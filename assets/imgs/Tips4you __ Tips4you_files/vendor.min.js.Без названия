/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */
(function(){function t(t,e,i){switch(i.length){case 0:return t.call(e);case 1:return t.call(e,i[0]);case 2:return t.call(e,i[0],i[1]);case 3:return t.call(e,i[0],i[1],i[2])}return t.apply(e,i)}function e(t,e,i,n){for(var o=-1,r=null==t?0:t.length;++o<r;){var s=t[o];e(n,s,i(s),t)}return n}function i(t,e){for(var i=-1,n=null==t?0:t.length;++i<n&&!1!==e(t[i],i,t););return t}function n(t,e){for(var i=null==t?0:t.length;i--&&!1!==e(t[i],i,t););return t}function o(t,e){for(var i=-1,n=null==t?0:t.length;++i<n;)if(!e(t[i],i,t))return!1;return!0}function r(t,e){for(var i=-1,n=null==t?0:t.length,o=0,r=[];++i<n;){var s=t[i];e(s,i,t)&&(r[o++]=s)}return r}function s(t,e){return!(null==t||!t.length)&&g(t,e,0)>-1}function a(t,e,i){for(var n=-1,o=null==t?0:t.length;++n<o;)if(i(e,t[n]))return!0;return!1}function l(t,e){for(var i=-1,n=null==t?0:t.length,o=Array(n);++i<n;)o[i]=e(t[i],i,t);return o}function c(t,e){for(var i=-1,n=e.length,o=t.length;++i<n;)t[o+i]=e[i];return t}function h(t,e,i,n){var o=-1,r=null==t?0:t.length;for(n&&r&&(i=t[++o]);++o<r;)i=e(i,t[o],o,t);return i}function u(t,e,i,n){var o=null==t?0:t.length;for(n&&o&&(i=t[--o]);o--;)i=e(i,t[o],o,t);return i}function d(t,e){for(var i=-1,n=null==t?0:t.length;++i<n;)if(e(t[i],i,t))return!0;return!1}function p(t){return t.match(Zt)||[]}function f(t,e,i){var n;return i(t,(function(t,i,o){if(e(t,i,o))return n=i,!1})),n}function m(t,e,i,n){for(var o=t.length,r=i+(n?1:-1);n?r--:++r<o;)if(e(t[r],r,t))return r;return-1}function g(t,e,i){return e==e?function(t,e,i){for(var n=i-1,o=t.length;++n<o;)if(t[n]===e)return n;return-1}(t,e,i):m(t,v,i)}function y(t,e,i,n){for(var o=i-1,r=t.length;++o<r;)if(n(t[o],e))return o;return-1}function v(t){return t!=t}function b(t,e){var i=null==t?0:t.length;return i?_(t,e)/i:tt}function x(t){return function(e){return null==e?j:e[t]}}function $(t){return function(e){return null==t?j:t[e]}}function w(t,e,i,n,o){return o(t,(function(t,o,r){i=n?(n=!1,t):e(i,t,o,r)})),i}function _(t,e){for(var i,n=-1,o=t.length;++n<o;){var r=e(t[n]);r!==j&&(i=i===j?r:i+r)}return i}function k(t,e){for(var i=-1,n=Array(t);++i<t;)n[i]=e(i);return n}function S(t){return t?t.slice(0,H(t)+1).replace(Vt,""):t}function C(t){return function(e){return t(e)}}function T(t,e){return l(e,(function(e){return t[e]}))}function M(t,e){return t.has(e)}function P(t,e){for(var i=-1,n=t.length;++i<n&&g(e,t[i],0)>-1;);return i}function E(t,e){for(var i=t.length;i--&&g(e,t[i],0)>-1;);return i}function I(t,e){for(var i=t.length,n=0;i--;)t[i]===e&&++n;return n}function A(t){return"\\"+Ge[t]}function D(t){return je.test(t)}function R(t){return Ye.test(t)}function L(t){var e=-1,i=Array(t.size);return t.forEach((function(t,n){i[++e]=[n,t]})),i}function O(t,e){return function(i){return t(e(i))}}function z(t,e){for(var i=-1,n=t.length,o=0,r=[];++i<n;){var s=t[i];s!==e&&s!==U||(t[i]=U,r[o++]=i)}return r}function F(t){var e=-1,i=Array(t.size);return t.forEach((function(t){i[++e]=t})),i}function B(t){return D(t)?function(t){for(var e=He.lastIndex=0;He.test(t);)++e;return e}(t):di(t)}function N(t){return D(t)?function(t){return t.match(He)||[]}(t):function(t){return t.split("")}(t)}function H(t){for(var e=t.length;e--&&Ut.test(t.charAt(e)););return e}function W(t){return t.match(We)||[]}var j,Y="Expected a function",V="__lodash_hash_undefined__",U="__lodash_placeholder__",q=16,X=32,G=64,Z=128,K=256,Q=1/0,J=9007199254740991,tt=NaN,et=4294967295,it=[["ary",Z],["bind",1],["bindKey",2],["curry",8],["curryRight",q],["flip",512],["partial",X],["partialRight",G],["rearg",K]],nt="[object Arguments]",ot="[object Array]",rt="[object Boolean]",st="[object Date]",at="[object Error]",lt="[object Function]",ct="[object GeneratorFunction]",ht="[object Map]",ut="[object Number]",dt="[object Object]",pt="[object Promise]",ft="[object RegExp]",mt="[object Set]",gt="[object String]",yt="[object Symbol]",vt="[object WeakMap]",bt="[object ArrayBuffer]",xt="[object DataView]",$t="[object Float32Array]",wt="[object Float64Array]",_t="[object Int8Array]",kt="[object Int16Array]",St="[object Int32Array]",Ct="[object Uint8Array]",Tt="[object Uint8ClampedArray]",Mt="[object Uint16Array]",Pt="[object Uint32Array]",Et=/\b__p \+= '';/g,It=/\b(__p \+=) '' \+/g,At=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Dt=/&(?:amp|lt|gt|quot|#39);/g,Rt=/[&<>"']/g,Lt=RegExp(Dt.source),Ot=RegExp(Rt.source),zt=/<%-([\s\S]+?)%>/g,Ft=/<%([\s\S]+?)%>/g,Bt=/<%=([\s\S]+?)%>/g,Nt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ht=/^\w*$/,Wt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,jt=/[\\^$.*+?()[\]{}|]/g,Yt=RegExp(jt.source),Vt=/^\s+/,Ut=/\s/,qt=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Xt=/\{\n\/\* \[wrapped with (.+)\] \*/,Gt=/,? & /,Zt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Kt=/[()=,{}\[\]\/\s]/,Qt=/\\(\\)?/g,Jt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,te=/\w*$/,ee=/^[-+]0x[0-9a-f]+$/i,ie=/^0b[01]+$/i,ne=/^\[object .+?Constructor\]$/,oe=/^0o[0-7]+$/i,re=/^(?:0|[1-9]\d*)$/,se=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ae=/($^)/,le=/['\n\r\u2028\u2029\\]/g,ce="\\ud800-\\udfff",he="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",ue="\\u2700-\\u27bf",de="a-z\\xdf-\\xf6\\xf8-\\xff",pe="A-Z\\xc0-\\xd6\\xd8-\\xde",fe="\\ufe0e\\ufe0f",me="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",ge="['’]",ye="["+ce+"]",ve="["+me+"]",be="["+he+"]",xe="\\d+",$e="["+ue+"]",we="["+de+"]",_e="[^"+ce+me+xe+ue+de+pe+"]",ke="\\ud83c[\\udffb-\\udfff]",Se="[^"+ce+"]",Ce="(?:\\ud83c[\\udde6-\\uddff]){2}",Te="[\\ud800-\\udbff][\\udc00-\\udfff]",Me="["+pe+"]",Pe="\\u200d",Ee="(?:"+we+"|"+_e+")",Ie="(?:"+Me+"|"+_e+")",Ae="(?:['’](?:d|ll|m|re|s|t|ve))?",De="(?:['’](?:D|LL|M|RE|S|T|VE))?",Re="(?:"+be+"|"+ke+")"+"?",Le="["+fe+"]?",Oe=Le+Re+("(?:\\u200d(?:"+[Se,Ce,Te].join("|")+")"+Le+Re+")*"),ze="(?:"+[$e,Ce,Te].join("|")+")"+Oe,Fe="(?:"+[Se+be+"?",be,Ce,Te,ye].join("|")+")",Be=RegExp(ge,"g"),Ne=RegExp(be,"g"),He=RegExp(ke+"(?="+ke+")|"+Fe+Oe,"g"),We=RegExp([Me+"?"+we+"+"+Ae+"(?="+[ve,Me,"$"].join("|")+")",Ie+"+"+De+"(?="+[ve,Me+Ee,"$"].join("|")+")",Me+"?"+Ee+"+"+Ae,Me+"+"+De,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",xe,ze].join("|"),"g"),je=RegExp("["+Pe+ce+he+fe+"]"),Ye=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Ve=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Ue=-1,qe={};qe[$t]=qe[wt]=qe[_t]=qe[kt]=qe[St]=qe[Ct]=qe[Tt]=qe[Mt]=qe[Pt]=!0,qe[nt]=qe[ot]=qe[bt]=qe[rt]=qe[xt]=qe[st]=qe[at]=qe[lt]=qe[ht]=qe[ut]=qe[dt]=qe[ft]=qe[mt]=qe[gt]=qe[vt]=!1;var Xe={};Xe[nt]=Xe[ot]=Xe[bt]=Xe[xt]=Xe[rt]=Xe[st]=Xe[$t]=Xe[wt]=Xe[_t]=Xe[kt]=Xe[St]=Xe[ht]=Xe[ut]=Xe[dt]=Xe[ft]=Xe[mt]=Xe[gt]=Xe[yt]=Xe[Ct]=Xe[Tt]=Xe[Mt]=Xe[Pt]=!0,Xe[at]=Xe[lt]=Xe[vt]=!1;var Ge={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Ze=parseFloat,Ke=parseInt,Qe="object"==typeof global&&global&&global.Object===Object&&global,Je="object"==typeof self&&self&&self.Object===Object&&self,ti=Qe||Je||Function("return this")(),ei="object"==typeof exports&&exports&&!exports.nodeType&&exports,ii=ei&&"object"==typeof module&&module&&!module.nodeType&&module,ni=ii&&ii.exports===ei,oi=ni&&Qe.process,ri=function(){try{var t=ii&&ii.require&&ii.require("util").types;return t||oi&&oi.binding&&oi.binding("util")}catch(t){}}(),si=ri&&ri.isArrayBuffer,ai=ri&&ri.isDate,li=ri&&ri.isMap,ci=ri&&ri.isRegExp,hi=ri&&ri.isSet,ui=ri&&ri.isTypedArray,di=x("length"),pi=$({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),fi=$({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"}),mi=$({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),gi=function $(Ut){function Zt(t){if(Ho(t)&&!Ea(t)&&!(t instanceof ue)){if(t instanceof he)return t;if(Er.call(t,"__wrapped__"))return po(t)}return new he(t)}function ce(){}function he(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=j}function ue(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=et,this.__views__=[]}function de(t){var e=-1,i=null==t?0:t.length;for(this.clear();++e<i;){var n=t[e];this.set(n[0],n[1])}}function pe(t){var e=-1,i=null==t?0:t.length;for(this.clear();++e<i;){var n=t[e];this.set(n[0],n[1])}}function fe(t){var e=-1,i=null==t?0:t.length;for(this.clear();++e<i;){var n=t[e];this.set(n[0],n[1])}}function me(t){var e=-1,i=null==t?0:t.length;for(this.__data__=new fe;++e<i;)this.add(t[e])}function ge(t){this.size=(this.__data__=new pe(t)).size}function ye(t,e){var i=Ea(t),n=!i&&Pa(t),o=!i&&!n&&Aa(t),r=!i&&!n&&!o&&za(t),s=i||n||o||r,a=s?k(t.length,_r):[],l=a.length;for(var c in t)!e&&!Er.call(t,c)||s&&("length"==c||o&&("offset"==c||"parent"==c)||r&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||Gn(c,l))||a.push(c);return a}function ve(t){var e=t.length;return e?t[Ii(0,e-1)]:j}function be(t,e){return lo(cn(t),Me(e,0,t.length))}function xe(t){return lo(cn(t))}function $e(t,e,i){(i===j||Do(t[e],i))&&(i!==j||e in t)||Ce(t,e,i)}function we(t,e,i){var n=t[e];Er.call(t,e)&&Do(n,i)&&(i!==j||e in t)||Ce(t,e,i)}function _e(t,e){for(var i=t.length;i--;)if(Do(t[i][0],e))return i;return-1}function ke(t,e,i,n){return Ms(t,(function(t,o,r){e(n,t,i(t),r)})),n}function Se(t,e){return t&&hn(e,er(e),t)}function Ce(t,e,i){"__proto__"==e&&Xr?Xr(t,e,{configurable:!0,enumerable:!0,value:i,writable:!0}):t[e]=i}function Te(t,e){for(var i=-1,n=e.length,o=gr(n),r=null==t;++i<n;)o[i]=r?j:Jo(t,e[i]);return o}function Me(t,e,i){return t==t&&(i!==j&&(t=t<=i?t:i),e!==j&&(t=t>=e?t:e)),t}function Pe(t,e,n,o,r,s){var a,l=1&e,c=2&e,h=4&e;if(n&&(a=r?n(t,o,r,s):n(t)),a!==j)return a;if(!No(t))return t;var u=Ea(t);if(u){if(a=function(t){var e=t.length,i=new t.constructor(e);return e&&"string"==typeof t[0]&&Er.call(t,"index")&&(i.index=t.index,i.input=t.input),i}(t),!l)return cn(t,a)}else{var d=Ns(t),p=d==lt||d==ct;if(Aa(t))return nn(t,l);if(d==dt||d==nt||p&&!r){if(a=c||p?{}:qn(t),!l)return c?function(t,e){return hn(t,Bs(t),e)}(t,function(t,e){return t&&hn(e,ir(e),t)}(a,t)):function(t,e){return hn(t,Fs(t),e)}(t,Se(a,t))}else{if(!Xe[d])return r?t:{};a=function(t,e,i){var n=t.constructor;switch(e){case bt:return on(t);case rt:case st:return new n(+t);case xt:return function(t,e){return new t.constructor(e?on(t.buffer):t.buffer,t.byteOffset,t.byteLength)}(t,i);case $t:case wt:case _t:case kt:case St:case Ct:case Tt:case Mt:case Pt:return rn(t,i);case ht:return new n;case ut:case gt:return new n(t);case ft:return function(t){var e=new t.constructor(t.source,te.exec(t));return e.lastIndex=t.lastIndex,e}(t);case mt:return new n;case yt:return function(t){return Ss?$r(Ss.call(t)):{}}(t)}}(t,d,l)}}s||(s=new ge);var f=s.get(t);if(f)return f;s.set(t,a),Oa(t)?t.forEach((function(i){a.add(Pe(i,e,n,i,t,s))})):Ra(t)&&t.forEach((function(i,o){a.set(o,Pe(i,e,n,o,t,s))}));var m=u?j:(h?c?Bn:Fn:c?ir:er)(t);return i(m||t,(function(i,o){m&&(i=t[o=i]),we(a,o,Pe(i,e,n,o,t,s))})),a}function Ee(t,e,i){var n=i.length;if(null==t)return!n;for(t=$r(t);n--;){var o=i[n],r=e[o],s=t[o];if(s===j&&!(o in t)||!r(s))return!1}return!0}function Ie(t,e,i){if("function"!=typeof t)throw new kr(Y);return js((function(){t.apply(j,i)}),e)}function Ae(t,e,i,n){var o=-1,r=s,c=!0,h=t.length,u=[],d=e.length;if(!h)return u;i&&(e=l(e,C(i))),n?(r=a,c=!1):e.length>=200&&(r=M,c=!1,e=new me(e));t:for(;++o<h;){var p=t[o],f=null==i?p:i(p);if(p=n||0!==p?p:0,c&&f==f){for(var m=d;m--;)if(e[m]===f)continue t;u.push(p)}else r(e,f,n)||u.push(p)}return u}function De(t,e){var i=!0;return Ms(t,(function(t,n,o){return i=!!e(t,n,o)})),i}function Re(t,e,i){for(var n=-1,o=t.length;++n<o;){var r=t[n],s=e(r);if(null!=s&&(a===j?s==s&&!Vo(s):i(s,a)))var a=s,l=r}return l}function Le(t,e){var i=[];return Ms(t,(function(t,n,o){e(t,n,o)&&i.push(t)})),i}function Oe(t,e,i,n,o){var r=-1,s=t.length;for(i||(i=Xn),o||(o=[]);++r<s;){var a=t[r];e>0&&i(a)?e>1?Oe(a,e-1,i,n,o):c(o,a):n||(o[o.length]=a)}return o}function ze(t,e){return t&&Es(t,e,er)}function Fe(t,e){return t&&Is(t,e,er)}function He(t,e){return r(e,(function(e){return zo(t[e])}))}function We(t,e){for(var i=0,n=(e=tn(e,t)).length;null!=t&&i<n;)t=t[co(e[i++])];return i&&i==n?t:j}function je(t,e,i){var n=e(t);return Ea(t)?n:c(n,i(t))}function Ye(t){return null==t?t===j?"[object Undefined]":"[object Null]":qr&&qr in $r(t)?function(t){var e=Er.call(t,qr),i=t[qr];try{t[qr]=j;var n=!0}catch(t){}var o=Dr.call(t);return n&&(e?t[qr]=i:delete t[qr]),o}(t):function(t){return Dr.call(t)}(t)}function Ge(t,e){return t>e}function Qe(t,e){return null!=t&&Er.call(t,e)}function Je(t,e){return null!=t&&e in $r(t)}function ei(t,e,i){for(var n=i?a:s,o=t[0].length,r=t.length,c=r,h=gr(r),u=1/0,d=[];c--;){var p=t[c];c&&e&&(p=l(p,C(e))),u=ss(p.length,u),h[c]=!i&&(e||o>=120&&p.length>=120)?new me(c&&p):j}p=t[0];var f=-1,m=h[0];t:for(;++f<o&&d.length<u;){var g=p[f],y=e?e(g):g;if(g=i||0!==g?g:0,!(m?M(m,y):n(d,y,i))){for(c=r;--c;){var v=h[c];if(!(v?M(v,y):n(t[c],y,i)))continue t}m&&m.push(y),d.push(g)}}return d}function ii(e,i,n){var o=null==(e=no(e,i=tn(i,e)))?e:e[co(vo(i))];return null==o?j:t(o,e,n)}function oi(t){return Ho(t)&&Ye(t)==nt}function ri(t,e,i,n,o){return t===e||(null==t||null==e||!Ho(t)&&!Ho(e)?t!=t&&e!=e:function(t,e,i,n,o,r){var s=Ea(t),a=Ea(e),l=s?ot:Ns(t),c=a?ot:Ns(e),h=(l=l==nt?dt:l)==dt,u=(c=c==nt?dt:c)==dt,d=l==c;if(d&&Aa(t)){if(!Aa(e))return!1;s=!0,h=!1}if(d&&!h)return r||(r=new ge),s||za(t)?On(t,e,i,n,o,r):function(t,e,i,n,o,r,s){switch(i){case xt:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case bt:return!(t.byteLength!=e.byteLength||!r(new Br(t),new Br(e)));case rt:case st:case ut:return Do(+t,+e);case at:return t.name==e.name&&t.message==e.message;case ft:case gt:return t==e+"";case ht:var a=L;case mt:var l=1&n;if(a||(a=F),t.size!=e.size&&!l)return!1;var c=s.get(t);if(c)return c==e;n|=2,s.set(t,e);var h=On(a(t),a(e),n,o,r,s);return s.delete(t),h;case yt:if(Ss)return Ss.call(t)==Ss.call(e)}return!1}(t,e,l,i,n,o,r);if(!(1&i)){var p=h&&Er.call(t,"__wrapped__"),f=u&&Er.call(e,"__wrapped__");if(p||f){var m=p?t.value():t,g=f?e.value():e;return r||(r=new ge),o(m,g,i,n,r)}}return!!d&&(r||(r=new ge),function(t,e,i,n,o,r){var s=1&i,a=Fn(t),l=a.length;if(l!=Fn(e).length&&!s)return!1;for(var c=l;c--;){var h=a[c];if(!(s?h in e:Er.call(e,h)))return!1}var u=r.get(t),d=r.get(e);if(u&&d)return u==e&&d==t;var p=!0;r.set(t,e),r.set(e,t);for(var f=s;++c<l;){var m=t[h=a[c]],g=e[h];if(n)var y=s?n(g,m,h,e,t,r):n(m,g,h,t,e,r);if(!(y===j?m===g||o(m,g,i,n,r):y)){p=!1;break}f||(f="constructor"==h)}if(p&&!f){var v=t.constructor,b=e.constructor;v!=b&&"constructor"in t&&"constructor"in e&&!("function"==typeof v&&v instanceof v&&"function"==typeof b&&b instanceof b)&&(p=!1)}return r.delete(t),r.delete(e),p}(t,e,i,n,o,r))}(t,e,i,n,ri,o))}function di(t,e,i,n){var o=i.length,r=o,s=!n;if(null==t)return!r;for(t=$r(t);o--;){var a=i[o];if(s&&a[2]?a[1]!==t[a[0]]:!(a[0]in t))return!1}for(;++o<r;){var l=(a=i[o])[0],c=t[l],h=a[1];if(s&&a[2]){if(c===j&&!(l in t))return!1}else{var u=new ge;if(n)var d=n(c,h,l,t,e,u);if(!(d===j?ri(h,c,3,n,u):d))return!1}}return!0}function yi(t){return!(!No(t)||function(t){return!!Ar&&Ar in t}(t))&&(zo(t)?Or:ne).test(ho(t))}function vi(t){return"function"==typeof t?t:null==t?cr:"object"==typeof t?Ea(t)?ki(t[0],t[1]):_i(t):pr(t)}function bi(t){if(!Jn(t))return os(t);var e=[];for(var i in $r(t))Er.call(t,i)&&"constructor"!=i&&e.push(i);return e}function xi(t){if(!No(t))return function(t){var e=[];if(null!=t)for(var i in $r(t))e.push(i);return e}(t);var e=Jn(t),i=[];for(var n in t)("constructor"!=n||!e&&Er.call(t,n))&&i.push(n);return i}function $i(t,e){return t<e}function wi(t,e){var i=-1,n=Ro(t)?gr(t.length):[];return Ms(t,(function(t,o,r){n[++i]=e(t,o,r)})),n}function _i(t){var e=Yn(t);return 1==e.length&&e[0][2]?eo(e[0][0],e[0][1]):function(i){return i===t||di(i,t,e)}}function ki(t,e){return Kn(t)&&to(e)?eo(co(t),e):function(i){var n=Jo(i,t);return n===j&&n===e?tr(i,t):ri(e,n,3)}}function Si(t,e,i,n,o){t!==e&&Es(e,(function(r,s){if(o||(o=new ge),No(r))!function(t,e,i,n,o,r,s){var a=ro(t,i),l=ro(e,i),c=s.get(l);if(c)return $e(t,i,c),j;var h=r?r(a,l,i+"",t,e,s):j,u=h===j;if(u){var d=Ea(l),p=!d&&Aa(l),f=!d&&!p&&za(l);h=l,d||p||f?Ea(a)?h=a:Lo(a)?h=cn(a):p?(u=!1,h=nn(l,!0)):f?(u=!1,h=rn(l,!0)):h=[]:jo(l)||Pa(l)?(h=a,Pa(a)?h=Ko(a):No(a)&&!zo(a)||(h=qn(l))):u=!1}u&&(s.set(l,h),o(h,l,n,r,s),s.delete(l)),$e(t,i,h)}(t,e,s,i,Si,n,o);else{var a=n?n(ro(t,s),r,s+"",t,e,o):j;a===j&&(a=r),$e(t,s,a)}}),ir)}function Ci(t,e){var i=t.length;if(i)return Gn(e+=e<0?i:0,i)?t[e]:j}function Ti(t,e,i){e=e.length?l(e,(function(t){return Ea(t)?function(e){return We(e,1===t.length?t[0]:t)}:t})):[cr];var n=-1;return e=l(e,C(Wn())),function(t,e){var i=t.length;for(t.sort(e);i--;)t[i]=t[i].value;return t}(wi(t,(function(t,i,o){return{criteria:l(e,(function(e){return e(t)})),index:++n,value:t}})),(function(t,e){return function(t,e,i){for(var n=-1,o=t.criteria,r=e.criteria,s=o.length,a=i.length;++n<s;){var l=sn(o[n],r[n]);if(l)return n>=a?l:l*("desc"==i[n]?-1:1)}return t.index-e.index}(t,e,i)}))}function Mi(t,e,i){for(var n=-1,o=e.length,r={};++n<o;){var s=e[n],a=We(t,s);i(a,s)&&Oi(r,tn(s,t),a)}return r}function Pi(t,e,i,n){var o=n?y:g,r=-1,s=e.length,a=t;for(t===e&&(e=cn(e)),i&&(a=l(t,C(i)));++r<s;)for(var c=0,h=e[r],u=i?i(h):h;(c=o(a,u,c,n))>-1;)a!==t&&Yr.call(a,c,1),Yr.call(t,c,1);return t}function Ei(t,e){for(var i=t?e.length:0,n=i-1;i--;){var o=e[i];if(i==n||o!==r){var r=o;Gn(o)?Yr.call(t,o,1):Ui(t,o)}}return t}function Ii(t,e){return t+Jr(cs()*(e-t+1))}function Ai(t,e){var i="";if(!t||e<1||e>J)return i;do{e%2&&(i+=t),(e=Jr(e/2))&&(t+=t)}while(e);return i}function Di(t,e){return Ys(io(t,e,cr),t+"")}function Ri(t){return ve(or(t))}function Li(t,e){var i=or(t);return lo(i,Me(e,0,i.length))}function Oi(t,e,i,n){if(!No(t))return t;for(var o=-1,r=(e=tn(e,t)).length,s=r-1,a=t;null!=a&&++o<r;){var l=co(e[o]),c=i;if("__proto__"===l||"constructor"===l||"prototype"===l)return t;if(o!=s){var h=a[l];(c=n?n(h,l,a):j)===j&&(c=No(h)?h:Gn(e[o+1])?[]:{})}we(a,l,c),a=a[l]}return t}function zi(t){return lo(or(t))}function Fi(t,e,i){var n=-1,o=t.length;e<0&&(e=-e>o?0:o+e),(i=i>o?o:i)<0&&(i+=o),o=e>i?0:i-e>>>0,e>>>=0;for(var r=gr(o);++n<o;)r[n]=t[n+e];return r}function Bi(t,e){var i;return Ms(t,(function(t,n,o){return!(i=e(t,n,o))})),!!i}function Ni(t,e,i){var n=0,o=null==t?n:t.length;if("number"==typeof e&&e==e&&o<=2147483647){for(;n<o;){var r=n+o>>>1,s=t[r];null!==s&&!Vo(s)&&(i?s<=e:s<e)?n=r+1:o=r}return o}return Hi(t,e,cr,i)}function Hi(t,e,i,n){var o=0,r=null==t?0:t.length;if(0===r)return 0;for(var s=(e=i(e))!=e,a=null===e,l=Vo(e),c=e===j;o<r;){var h=Jr((o+r)/2),u=i(t[h]),d=u!==j,p=null===u,f=u==u,m=Vo(u);if(s)var g=n||f;else g=c?f&&(n||d):a?f&&d&&(n||!p):l?f&&d&&!p&&(n||!m):!p&&!m&&(n?u<=e:u<e);g?o=h+1:r=h}return ss(r,4294967294)}function Wi(t,e){for(var i=-1,n=t.length,o=0,r=[];++i<n;){var s=t[i],a=e?e(s):s;if(!i||!Do(a,l)){var l=a;r[o++]=0===s?0:s}}return r}function ji(t){return"number"==typeof t?t:Vo(t)?tt:+t}function Yi(t){if("string"==typeof t)return t;if(Ea(t))return l(t,Yi)+"";if(Vo(t))return Cs?Cs.call(t):"";var e=t+"";return"0"==e&&1/t==-Q?"-0":e}function Vi(t,e,i){var n=-1,o=s,r=t.length,l=!0,c=[],h=c;if(i)l=!1,o=a;else if(r>=200){var u=e?null:Os(t);if(u)return F(u);l=!1,o=M,h=new me}else h=e?[]:c;t:for(;++n<r;){var d=t[n],p=e?e(d):d;if(d=i||0!==d?d:0,l&&p==p){for(var f=h.length;f--;)if(h[f]===p)continue t;e&&h.push(p),c.push(d)}else o(h,p,i)||(h!==c&&h.push(p),c.push(d))}return c}function Ui(t,e){return null==(t=no(t,e=tn(e,t)))||delete t[co(vo(e))]}function qi(t,e,i,n){return Oi(t,e,i(We(t,e)),n)}function Xi(t,e,i,n){for(var o=t.length,r=n?o:-1;(n?r--:++r<o)&&e(t[r],r,t););return i?Fi(t,n?0:r,n?r+1:o):Fi(t,n?r+1:0,n?o:r)}function Gi(t,e){var i=t;return i instanceof ue&&(i=i.value()),h(e,(function(t,e){return e.func.apply(e.thisArg,c([t],e.args))}),i)}function Zi(t,e,i){var n=t.length;if(n<2)return n?Vi(t[0]):[];for(var o=-1,r=gr(n);++o<n;)for(var s=t[o],a=-1;++a<n;)a!=o&&(r[o]=Ae(r[o]||s,t[a],e,i));return Vi(Oe(r,1),e,i)}function Ki(t,e,i){for(var n=-1,o=t.length,r=e.length,s={};++n<o;)i(s,t[n],n<r?e[n]:j);return s}function Qi(t){return Lo(t)?t:[]}function Ji(t){return"function"==typeof t?t:cr}function tn(t,e){return Ea(t)?t:Kn(t,e)?[t]:Vs(Qo(t))}function en(t,e,i){var n=t.length;return i=i===j?n:i,!e&&i>=n?t:Fi(t,e,i)}function nn(t,e){if(e)return t.slice();var i=t.length,n=Nr?Nr(i):new t.constructor(i);return t.copy(n),n}function on(t){var e=new t.constructor(t.byteLength);return new Br(e).set(new Br(t)),e}function rn(t,e){return new t.constructor(e?on(t.buffer):t.buffer,t.byteOffset,t.length)}function sn(t,e){if(t!==e){var i=t!==j,n=null===t,o=t==t,r=Vo(t),s=e!==j,a=null===e,l=e==e,c=Vo(e);if(!a&&!c&&!r&&t>e||r&&s&&l&&!a&&!c||n&&s&&l||!i&&l||!o)return 1;if(!n&&!r&&!c&&t<e||c&&i&&o&&!n&&!r||a&&i&&o||!s&&o||!l)return-1}return 0}function an(t,e,i,n){for(var o=-1,r=t.length,s=i.length,a=-1,l=e.length,c=rs(r-s,0),h=gr(l+c),u=!n;++a<l;)h[a]=e[a];for(;++o<s;)(u||o<r)&&(h[i[o]]=t[o]);for(;c--;)h[a++]=t[o++];return h}function ln(t,e,i,n){for(var o=-1,r=t.length,s=-1,a=i.length,l=-1,c=e.length,h=rs(r-a,0),u=gr(h+c),d=!n;++o<h;)u[o]=t[o];for(var p=o;++l<c;)u[p+l]=e[l];for(;++s<a;)(d||o<r)&&(u[p+i[s]]=t[o++]);return u}function cn(t,e){var i=-1,n=t.length;for(e||(e=gr(n));++i<n;)e[i]=t[i];return e}function hn(t,e,i,n){var o=!i;i||(i={});for(var r=-1,s=e.length;++r<s;){var a=e[r],l=n?n(i[a],t[a],a,i,t):j;l===j&&(l=t[a]),o?Ce(i,a,l):we(i,a,l)}return i}function un(t,i){return function(n,o){var r=Ea(n)?e:ke,s=i?i():{};return r(n,t,Wn(o,2),s)}}function dn(t){return Di((function(e,i){var n=-1,o=i.length,r=o>1?i[o-1]:j,s=o>2?i[2]:j;for(r=t.length>3&&"function"==typeof r?(o--,r):j,s&&Zn(i[0],i[1],s)&&(r=o<3?j:r,o=1),e=$r(e);++n<o;){var a=i[n];a&&t(e,a,n,r)}return e}))}function pn(t,e){return function(i,n){if(null==i)return i;if(!Ro(i))return t(i,n);for(var o=i.length,r=e?o:-1,s=$r(i);(e?r--:++r<o)&&!1!==n(s[r],r,s););return i}}function fn(t){return function(e,i,n){for(var o=-1,r=$r(e),s=n(e),a=s.length;a--;){var l=s[t?a:++o];if(!1===i(r[l],l,r))break}return e}}function mn(t){return function(e){var i=D(e=Qo(e))?N(e):j,n=i?i[0]:e.charAt(0),o=i?en(i,1).join(""):e.slice(1);return n[t]()+o}}function gn(t){return function(e){return h(ar(sr(e).replace(Be,"")),t,"")}}function yn(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var i=Ts(t.prototype),n=t.apply(i,e);return No(n)?n:i}}function vn(e,i,n){var o=yn(e);return function r(){for(var s=arguments.length,a=gr(s),l=s,c=Hn(r);l--;)a[l]=arguments[l];var h=s<3&&a[0]!==c&&a[s-1]!==c?[]:z(a,c);return(s-=h.length)<n?Pn(e,i,$n,r.placeholder,j,a,h,j,j,n-s):t(this&&this!==ti&&this instanceof r?o:e,this,a)}}function bn(t){return function(e,i,n){var o=$r(e);if(!Ro(e)){var r=Wn(i,3);e=er(e),i=function(t){return r(o[t],t,o)}}var s=t(e,i,n);return s>-1?o[r?e[s]:s]:j}}function xn(t){return zn((function(e){var i=e.length,n=i,o=he.prototype.thru;for(t&&e.reverse();n--;){var r=e[n];if("function"!=typeof r)throw new kr(Y);if(o&&!s&&"wrapper"==Nn(r))var s=new he([],!0)}for(n=s?n:i;++n<i;){var a=Nn(r=e[n]),l="wrapper"==a?zs(r):j;s=l&&Qn(l[0])&&424==l[1]&&!l[4].length&&1==l[9]?s[Nn(l[0])].apply(s,l[3]):1==r.length&&Qn(r)?s[a]():s.thru(r)}return function(){var t=arguments,n=t[0];if(s&&1==t.length&&Ea(n))return s.plant(n).value();for(var o=0,r=i?e[o].apply(this,t):n;++o<i;)r=e[o].call(this,r);return r}}))}function $n(t,e,i,n,o,r,s,a,l,c){var h=e&Z,u=1&e,d=2&e,p=24&e,f=512&e,m=d?j:yn(t);return function g(){for(var y=arguments.length,v=gr(y),b=y;b--;)v[b]=arguments[b];if(p)var x=Hn(g),$=I(v,x);if(n&&(v=an(v,n,o,p)),r&&(v=ln(v,r,s,p)),y-=$,p&&y<c)return Pn(t,e,$n,g.placeholder,i,v,z(v,x),a,l,c-y);var w=u?i:this,_=d?w[t]:t;return y=v.length,a?v=oo(v,a):f&&y>1&&v.reverse(),h&&l<y&&(v.length=l),this&&this!==ti&&this instanceof g&&(_=m||yn(_)),_.apply(w,v)}}function wn(t,e){return function(i,n){return function(t,e,i,n){return ze(t,(function(t,o,r){e(n,i(t),o,r)})),n}(i,t,e(n),{})}}function _n(t,e){return function(i,n){var o;if(i===j&&n===j)return e;if(i!==j&&(o=i),n!==j){if(o===j)return n;"string"==typeof i||"string"==typeof n?(i=Yi(i),n=Yi(n)):(i=ji(i),n=ji(n)),o=t(i,n)}return o}}function kn(e){return zn((function(i){return i=l(i,C(Wn())),Di((function(n){var o=this;return e(i,(function(e){return t(e,o,n)}))}))}))}function Sn(t,e){var i=(e=e===j?" ":Yi(e)).length;if(i<2)return i?Ai(e,t):e;var n=Ai(e,Qr(t/B(e)));return D(e)?en(N(n),0,t).join(""):n.slice(0,t)}function Cn(e,i,n,o){var r=1&i,s=yn(e);return function i(){for(var a=-1,l=arguments.length,c=-1,h=o.length,u=gr(h+l),d=this&&this!==ti&&this instanceof i?s:e;++c<h;)u[c]=o[c];for(;l--;)u[c++]=arguments[++a];return t(d,r?n:this,u)}}function Tn(t){return function(e,i,n){return n&&"number"!=typeof n&&Zn(e,i,n)&&(i=n=j),e=qo(e),i===j?(i=e,e=0):i=qo(i),function(t,e,i,n){for(var o=-1,r=rs(Qr((e-t)/(i||1)),0),s=gr(r);r--;)s[n?r:++o]=t,t+=i;return s}(e,i,n=n===j?e<i?1:-1:qo(n),t)}}function Mn(t){return function(e,i){return"string"==typeof e&&"string"==typeof i||(e=Zo(e),i=Zo(i)),t(e,i)}}function Pn(t,e,i,n,o,r,s,a,l,c){var h=8&e;e|=h?X:G,4&(e&=~(h?G:X))||(e&=-4);var u=[t,e,o,h?r:j,h?s:j,h?j:r,h?j:s,a,l,c],d=i.apply(j,u);return Qn(t)&&Ws(d,u),d.placeholder=n,so(d,t,e)}function En(t){var e=xr[t];return function(t,i){if(t=Zo(t),(i=null==i?0:ss(Xo(i),292))&&is(t)){var n=(Qo(t)+"e").split("e");return+((n=(Qo(e(n[0]+"e"+(+n[1]+i)))+"e").split("e"))[0]+"e"+(+n[1]-i))}return e(t)}}function In(t){return function(e){var i=Ns(e);return i==ht?L(e):i==mt?function(t){var e=-1,i=Array(t.size);return t.forEach((function(t){i[++e]=[t,t]})),i}(e):function(t,e){return l(e,(function(e){return[e,t[e]]}))}(e,t(e))}}function An(t,e,i,n,o,r,s,a){var l=2&e;if(!l&&"function"!=typeof t)throw new kr(Y);var c=n?n.length:0;if(c||(e&=-97,n=o=j),s=s===j?s:rs(Xo(s),0),a=a===j?a:Xo(a),c-=o?o.length:0,e&G){var h=n,u=o;n=o=j}var d=l?j:zs(t),p=[t,e,i,n,o,h,u,r,s,a];if(d&&function(t,e){var i=t[1],n=e[1],o=i|n,r=o<131,s=n==Z&&8==i||n==Z&&i==K&&t[7].length<=e[8]||384==n&&e[7].length<=e[8]&&8==i;if(!r&&!s)return t;1&n&&(t[2]=e[2],o|=1&i?0:4);var a=e[3];if(a){var l=t[3];t[3]=l?an(l,a,e[4]):a,t[4]=l?z(t[3],U):e[4]}(a=e[5])&&(l=t[5],t[5]=l?ln(l,a,e[6]):a,t[6]=l?z(t[5],U):e[6]),(a=e[7])&&(t[7]=a),n&Z&&(t[8]=null==t[8]?e[8]:ss(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=o}(p,d),t=p[0],e=p[1],i=p[2],n=p[3],o=p[4],!(a=p[9]=p[9]===j?l?0:t.length:rs(p[9]-c,0))&&24&e&&(e&=-25),e&&1!=e)f=8==e||e==q?vn(t,e,a):e!=X&&33!=e||o.length?$n.apply(j,p):Cn(t,e,i,n);else var f=function(t,e,i){var n=1&e,o=yn(t);return function e(){return(this&&this!==ti&&this instanceof e?o:t).apply(n?i:this,arguments)}}(t,e,i);return so((d?As:Ws)(f,p),t,e)}function Dn(t,e,i,n){return t===j||Do(t,Tr[i])&&!Er.call(n,i)?e:t}function Rn(t,e,i,n,o,r){return No(t)&&No(e)&&(r.set(e,t),Si(t,e,j,Rn,r),r.delete(e)),t}function Ln(t){return jo(t)?j:t}function On(t,e,i,n,o,r){var s=1&i,a=t.length,l=e.length;if(a!=l&&!(s&&l>a))return!1;var c=r.get(t),h=r.get(e);if(c&&h)return c==e&&h==t;var u=-1,p=!0,f=2&i?new me:j;for(r.set(t,e),r.set(e,t);++u<a;){var m=t[u],g=e[u];if(n)var y=s?n(g,m,u,e,t,r):n(m,g,u,t,e,r);if(y!==j){if(y)continue;p=!1;break}if(f){if(!d(e,(function(t,e){if(!M(f,e)&&(m===t||o(m,t,i,n,r)))return f.push(e)}))){p=!1;break}}else if(m!==g&&!o(m,g,i,n,r)){p=!1;break}}return r.delete(t),r.delete(e),p}function zn(t){return Ys(io(t,j,go),t+"")}function Fn(t){return je(t,er,Fs)}function Bn(t){return je(t,ir,Bs)}function Nn(t){for(var e=t.name+"",i=vs[e],n=Er.call(vs,e)?i.length:0;n--;){var o=i[n],r=o.func;if(null==r||r==t)return o.name}return e}function Hn(t){return(Er.call(Zt,"placeholder")?Zt:t).placeholder}function Wn(){var t=Zt.iteratee||hr;return t=t===hr?vi:t,arguments.length?t(arguments[0],arguments[1]):t}function jn(t,e){var i=t.__data__;return function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}(e)?i["string"==typeof e?"string":"hash"]:i.map}function Yn(t){for(var e=er(t),i=e.length;i--;){var n=e[i],o=t[n];e[i]=[n,o,to(o)]}return e}function Vn(t,e){var i=function(t,e){return null==t?j:t[e]}(t,e);return yi(i)?i:j}function Un(t,e,i){for(var n=-1,o=(e=tn(e,t)).length,r=!1;++n<o;){var s=co(e[n]);if(!(r=null!=t&&i(t,s)))break;t=t[s]}return r||++n!=o?r:!!(o=null==t?0:t.length)&&Bo(o)&&Gn(s,o)&&(Ea(t)||Pa(t))}function qn(t){return"function"!=typeof t.constructor||Jn(t)?{}:Ts(Hr(t))}function Xn(t){return Ea(t)||Pa(t)||!!(Vr&&t&&t[Vr])}function Gn(t,e){var i=typeof t;return!!(e=null==e?J:e)&&("number"==i||"symbol"!=i&&re.test(t))&&t>-1&&t%1==0&&t<e}function Zn(t,e,i){if(!No(i))return!1;var n=typeof e;return!!("number"==n?Ro(i)&&Gn(e,i.length):"string"==n&&e in i)&&Do(i[e],t)}function Kn(t,e){if(Ea(t))return!1;var i=typeof t;return!("number"!=i&&"symbol"!=i&&"boolean"!=i&&null!=t&&!Vo(t))||Ht.test(t)||!Nt.test(t)||null!=e&&t in $r(e)}function Qn(t){var e=Nn(t),i=Zt[e];if("function"!=typeof i||!(e in ue.prototype))return!1;if(t===i)return!0;var n=zs(i);return!!n&&t===n[0]}function Jn(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||Tr)}function to(t){return t==t&&!No(t)}function eo(t,e){return function(i){return null!=i&&i[t]===e&&(e!==j||t in $r(i))}}function io(e,i,n){return i=rs(i===j?e.length-1:i,0),function(){for(var o=arguments,r=-1,s=rs(o.length-i,0),a=gr(s);++r<s;)a[r]=o[i+r];r=-1;for(var l=gr(i+1);++r<i;)l[r]=o[r];return l[i]=n(a),t(e,this,l)}}function no(t,e){return e.length<2?t:We(t,Fi(e,0,-1))}function oo(t,e){for(var i=t.length,n=ss(e.length,i),o=cn(t);n--;){var r=e[n];t[n]=Gn(r,i)?o[r]:j}return t}function ro(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}function so(t,e,i){var n=e+"";return Ys(t,function(t,e){var i=e.length;if(!i)return t;var n=i-1;return e[n]=(i>1?"& ":"")+e[n],e=e.join(i>2?", ":" "),t.replace(qt,"{\n/* [wrapped with "+e+"] */\n")}(n,uo(function(t){var e=t.match(Xt);return e?e[1].split(Gt):[]}(n),i)))}function ao(t){var e=0,i=0;return function(){var n=as(),o=16-(n-i);if(i=n,o>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(j,arguments)}}function lo(t,e){var i=-1,n=t.length,o=n-1;for(e=e===j?n:e;++i<e;){var r=Ii(i,o),s=t[r];t[r]=t[i],t[i]=s}return t.length=e,t}function co(t){if("string"==typeof t||Vo(t))return t;var e=t+"";return"0"==e&&1/t==-Q?"-0":e}function ho(t){if(null!=t){try{return Pr.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function uo(t,e){return i(it,(function(i){var n="_."+i[0];e&i[1]&&!s(t,n)&&t.push(n)})),t.sort()}function po(t){if(t instanceof ue)return t.clone();var e=new he(t.__wrapped__,t.__chain__);return e.__actions__=cn(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}function fo(t,e,i){var n=null==t?0:t.length;if(!n)return-1;var o=null==i?0:Xo(i);return o<0&&(o=rs(n+o,0)),m(t,Wn(e,3),o)}function mo(t,e,i){var n=null==t?0:t.length;if(!n)return-1;var o=n-1;return i!==j&&(o=Xo(i),o=i<0?rs(n+o,0):ss(o,n-1)),m(t,Wn(e,3),o,!0)}function go(t){return null!=t&&t.length?Oe(t,1):[]}function yo(t){return t&&t.length?t[0]:j}function vo(t){var e=null==t?0:t.length;return e?t[e-1]:j}function bo(t,e){return t&&t.length&&e&&e.length?Pi(t,e):t}function xo(t){return null==t?t:hs.call(t)}function $o(t){if(!t||!t.length)return[];var e=0;return t=r(t,(function(t){if(Lo(t))return e=rs(t.length,e),!0})),k(e,(function(e){return l(t,x(e))}))}function wo(e,i){if(!e||!e.length)return[];var n=$o(e);return null==i?n:l(n,(function(e){return t(i,j,e)}))}function _o(t){var e=Zt(t);return e.__chain__=!0,e}function ko(t,e){return e(t)}function So(t,e){return(Ea(t)?i:Ms)(t,Wn(e,3))}function Co(t,e){return(Ea(t)?n:Ps)(t,Wn(e,3))}function To(t,e){return(Ea(t)?l:wi)(t,Wn(e,3))}function Mo(t,e,i){return e=i?j:e,e=t&&null==e?t.length:e,An(t,Z,j,j,j,j,e)}function Po(t,e){var i;if("function"!=typeof e)throw new kr(Y);return t=Xo(t),function(){return--t>0&&(i=e.apply(this,arguments)),t<=1&&(e=j),i}}function Eo(t,e,i){function n(e){var i=c,n=h;return c=h=j,m=e,d=t.apply(n,i)}function o(t){return m=t,p=js(s,e),g?n(t):d}function r(t){var i=t-f;return f===j||i>=e||i<0||y&&t-m>=u}function s(){var t=va();return r(t)?a(t):(p=js(s,function(t){var i=e-(t-f);return y?ss(i,u-(t-m)):i}(t)),j)}function a(t){return p=j,v&&c?n(t):(c=h=j,d)}function l(){var t=va(),i=r(t);if(c=arguments,h=this,f=t,i){if(p===j)return o(f);if(y)return Ls(p),p=js(s,e),n(f)}return p===j&&(p=js(s,e)),d}var c,h,u,d,p,f,m=0,g=!1,y=!1,v=!0;if("function"!=typeof t)throw new kr(Y);return e=Zo(e)||0,No(i)&&(g=!!i.leading,u=(y="maxWait"in i)?rs(Zo(i.maxWait)||0,e):u,v="trailing"in i?!!i.trailing:v),l.cancel=function(){p!==j&&Ls(p),m=0,c=f=h=p=j},l.flush=function(){return p===j?d:a(va())},l}function Io(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new kr(Y);var i=function(){var n=arguments,o=e?e.apply(this,n):n[0],r=i.cache;if(r.has(o))return r.get(o);var s=t.apply(this,n);return i.cache=r.set(o,s)||r,s};return i.cache=new(Io.Cache||fe),i}function Ao(t){if("function"!=typeof t)throw new kr(Y);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}function Do(t,e){return t===e||t!=t&&e!=e}function Ro(t){return null!=t&&Bo(t.length)&&!zo(t)}function Lo(t){return Ho(t)&&Ro(t)}function Oo(t){if(!Ho(t))return!1;var e=Ye(t);return e==at||"[object DOMException]"==e||"string"==typeof t.message&&"string"==typeof t.name&&!jo(t)}function zo(t){if(!No(t))return!1;var e=Ye(t);return e==lt||e==ct||"[object AsyncFunction]"==e||"[object Proxy]"==e}function Fo(t){return"number"==typeof t&&t==Xo(t)}function Bo(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=J}function No(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function Ho(t){return null!=t&&"object"==typeof t}function Wo(t){return"number"==typeof t||Ho(t)&&Ye(t)==ut}function jo(t){if(!Ho(t)||Ye(t)!=dt)return!1;var e=Hr(t);if(null===e)return!0;var i=Er.call(e,"constructor")&&e.constructor;return"function"==typeof i&&i instanceof i&&Pr.call(i)==Rr}function Yo(t){return"string"==typeof t||!Ea(t)&&Ho(t)&&Ye(t)==gt}function Vo(t){return"symbol"==typeof t||Ho(t)&&Ye(t)==yt}function Uo(t){if(!t)return[];if(Ro(t))return Yo(t)?N(t):cn(t);if(Ur&&t[Ur])return function(t){for(var e,i=[];!(e=t.next()).done;)i.push(e.value);return i}(t[Ur]());var e=Ns(t);return(e==ht?L:e==mt?F:or)(t)}function qo(t){return t?(t=Zo(t))===Q||t===-Q?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}function Xo(t){var e=qo(t),i=e%1;return e==e?i?e-i:e:0}function Go(t){return t?Me(Xo(t),0,et):0}function Zo(t){if("number"==typeof t)return t;if(Vo(t))return tt;if(No(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=No(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=S(t);var i=ie.test(t);return i||oe.test(t)?Ke(t.slice(2),i?2:8):ee.test(t)?tt:+t}function Ko(t){return hn(t,ir(t))}function Qo(t){return null==t?"":Yi(t)}function Jo(t,e,i){var n=null==t?j:We(t,e);return n===j?i:n}function tr(t,e){return null!=t&&Un(t,e,Je)}function er(t){return Ro(t)?ye(t):bi(t)}function ir(t){return Ro(t)?ye(t,!0):xi(t)}function nr(t,e){if(null==t)return{};var i=l(Bn(t),(function(t){return[t]}));return e=Wn(e),Mi(t,i,(function(t,i){return e(t,i[0])}))}function or(t){return null==t?[]:T(t,er(t))}function rr(t){return cl(Qo(t).toLowerCase())}function sr(t){return(t=Qo(t))&&t.replace(se,pi).replace(Ne,"")}function ar(t,e,i){return t=Qo(t),(e=i?j:e)===j?R(t)?W(t):p(t):t.match(e)||[]}function lr(t){return function(){return t}}function cr(t){return t}function hr(t){return vi("function"==typeof t?t:Pe(t,1))}function ur(t,e,n){var o=er(e),r=He(e,o);null!=n||No(e)&&(r.length||!o.length)||(n=e,e=t,t=this,r=He(e,er(e)));var s=!(No(n)&&"chain"in n&&!n.chain),a=zo(t);return i(r,(function(i){var n=e[i];t[i]=n,a&&(t.prototype[i]=function(){var e=this.__chain__;if(s||e){var i=t(this.__wrapped__);return(i.__actions__=cn(this.__actions__)).push({func:n,args:arguments,thisArg:t}),i.__chain__=e,i}return n.apply(t,c([this.value()],arguments))})})),t}function dr(){}function pr(t){return Kn(t)?x(co(t)):function(t){return function(e){return We(e,t)}}(t)}function fr(){return[]}function mr(){return!1}var gr=(Ut=null==Ut?ti:gi.defaults(ti.Object(),Ut,gi.pick(ti,Ve))).Array,yr=Ut.Date,vr=Ut.Error,br=Ut.Function,xr=Ut.Math,$r=Ut.Object,wr=Ut.RegExp,_r=Ut.String,kr=Ut.TypeError,Sr=gr.prototype,Cr=br.prototype,Tr=$r.prototype,Mr=Ut["__core-js_shared__"],Pr=Cr.toString,Er=Tr.hasOwnProperty,Ir=0,Ar=function(){var t=/[^.]+$/.exec(Mr&&Mr.keys&&Mr.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),Dr=Tr.toString,Rr=Pr.call($r),Lr=ti._,Or=wr("^"+Pr.call(Er).replace(jt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),zr=ni?Ut.Buffer:j,Fr=Ut.Symbol,Br=Ut.Uint8Array,Nr=zr?zr.allocUnsafe:j,Hr=O($r.getPrototypeOf,$r),Wr=$r.create,jr=Tr.propertyIsEnumerable,Yr=Sr.splice,Vr=Fr?Fr.isConcatSpreadable:j,Ur=Fr?Fr.iterator:j,qr=Fr?Fr.toStringTag:j,Xr=function(){try{var t=Vn($r,"defineProperty");return t({},"",{}),t}catch(t){}}(),Gr=Ut.clearTimeout!==ti.clearTimeout&&Ut.clearTimeout,Zr=yr&&yr.now!==ti.Date.now&&yr.now,Kr=Ut.setTimeout!==ti.setTimeout&&Ut.setTimeout,Qr=xr.ceil,Jr=xr.floor,ts=$r.getOwnPropertySymbols,es=zr?zr.isBuffer:j,is=Ut.isFinite,ns=Sr.join,os=O($r.keys,$r),rs=xr.max,ss=xr.min,as=yr.now,ls=Ut.parseInt,cs=xr.random,hs=Sr.reverse,us=Vn(Ut,"DataView"),ds=Vn(Ut,"Map"),ps=Vn(Ut,"Promise"),fs=Vn(Ut,"Set"),ms=Vn(Ut,"WeakMap"),gs=Vn($r,"create"),ys=ms&&new ms,vs={},bs=ho(us),xs=ho(ds),$s=ho(ps),ws=ho(fs),_s=ho(ms),ks=Fr?Fr.prototype:j,Ss=ks?ks.valueOf:j,Cs=ks?ks.toString:j,Ts=function(){function t(){}return function(e){if(!No(e))return{};if(Wr)return Wr(e);t.prototype=e;var i=new t;return t.prototype=j,i}}();Zt.templateSettings={escape:zt,evaluate:Ft,interpolate:Bt,variable:"",imports:{_:Zt}},Zt.prototype=ce.prototype,Zt.prototype.constructor=Zt,he.prototype=Ts(ce.prototype),he.prototype.constructor=he,ue.prototype=Ts(ce.prototype),ue.prototype.constructor=ue,de.prototype.clear=function(){this.__data__=gs?gs(null):{},this.size=0},de.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},de.prototype.get=function(t){var e=this.__data__;if(gs){var i=e[t];return i===V?j:i}return Er.call(e,t)?e[t]:j},de.prototype.has=function(t){var e=this.__data__;return gs?e[t]!==j:Er.call(e,t)},de.prototype.set=function(t,e){var i=this.__data__;return this.size+=this.has(t)?0:1,i[t]=gs&&e===j?V:e,this},pe.prototype.clear=function(){this.__data__=[],this.size=0},pe.prototype.delete=function(t){var e=this.__data__,i=_e(e,t);return!(i<0||(i==e.length-1?e.pop():Yr.call(e,i,1),--this.size,0))},pe.prototype.get=function(t){var e=this.__data__,i=_e(e,t);return i<0?j:e[i][1]},pe.prototype.has=function(t){return _e(this.__data__,t)>-1},pe.prototype.set=function(t,e){var i=this.__data__,n=_e(i,t);return n<0?(++this.size,i.push([t,e])):i[n][1]=e,this},fe.prototype.clear=function(){this.size=0,this.__data__={hash:new de,map:new(ds||pe),string:new de}},fe.prototype.delete=function(t){var e=jn(this,t).delete(t);return this.size-=e?1:0,e},fe.prototype.get=function(t){return jn(this,t).get(t)},fe.prototype.has=function(t){return jn(this,t).has(t)},fe.prototype.set=function(t,e){var i=jn(this,t),n=i.size;return i.set(t,e),this.size+=i.size==n?0:1,this},me.prototype.add=me.prototype.push=function(t){return this.__data__.set(t,V),this},me.prototype.has=function(t){return this.__data__.has(t)},ge.prototype.clear=function(){this.__data__=new pe,this.size=0},ge.prototype.delete=function(t){var e=this.__data__,i=e.delete(t);return this.size=e.size,i},ge.prototype.get=function(t){return this.__data__.get(t)},ge.prototype.has=function(t){return this.__data__.has(t)},ge.prototype.set=function(t,e){var i=this.__data__;if(i instanceof pe){var n=i.__data__;if(!ds||n.length<199)return n.push([t,e]),this.size=++i.size,this;i=this.__data__=new fe(n)}return i.set(t,e),this.size=i.size,this};var Ms=pn(ze),Ps=pn(Fe,!0),Es=fn(),Is=fn(!0),As=ys?function(t,e){return ys.set(t,e),t}:cr,Ds=Xr?function(t,e){return Xr(t,"toString",{configurable:!0,enumerable:!1,value:lr(e),writable:!0})}:cr,Rs=Di,Ls=Gr||function(t){return ti.clearTimeout(t)},Os=fs&&1/F(new fs([,-0]))[1]==Q?function(t){return new fs(t)}:dr,zs=ys?function(t){return ys.get(t)}:dr,Fs=ts?function(t){return null==t?[]:(t=$r(t),r(ts(t),(function(e){return jr.call(t,e)})))}:fr,Bs=ts?function(t){for(var e=[];t;)c(e,Fs(t)),t=Hr(t);return e}:fr,Ns=Ye;(us&&Ns(new us(new ArrayBuffer(1)))!=xt||ds&&Ns(new ds)!=ht||ps&&Ns(ps.resolve())!=pt||fs&&Ns(new fs)!=mt||ms&&Ns(new ms)!=vt)&&(Ns=function(t){var e=Ye(t),i=e==dt?t.constructor:j,n=i?ho(i):"";if(n)switch(n){case bs:return xt;case xs:return ht;case $s:return pt;case ws:return mt;case _s:return vt}return e});var Hs=Mr?zo:mr,Ws=ao(As),js=Kr||function(t,e){return ti.setTimeout(t,e)},Ys=ao(Ds),Vs=function(t){var e=Io(t,(function(t){return 500===i.size&&i.clear(),t})),i=e.cache;return e}((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(Wt,(function(t,i,n,o){e.push(n?o.replace(Qt,"$1"):i||t)})),e})),Us=Di((function(t,e){return Lo(t)?Ae(t,Oe(e,1,Lo,!0)):[]})),qs=Di((function(t,e){var i=vo(e);return Lo(i)&&(i=j),Lo(t)?Ae(t,Oe(e,1,Lo,!0),Wn(i,2)):[]})),Xs=Di((function(t,e){var i=vo(e);return Lo(i)&&(i=j),Lo(t)?Ae(t,Oe(e,1,Lo,!0),j,i):[]})),Gs=Di((function(t){var e=l(t,Qi);return e.length&&e[0]===t[0]?ei(e):[]})),Zs=Di((function(t){var e=vo(t),i=l(t,Qi);return e===vo(i)?e=j:i.pop(),i.length&&i[0]===t[0]?ei(i,Wn(e,2)):[]})),Ks=Di((function(t){var e=vo(t),i=l(t,Qi);return(e="function"==typeof e?e:j)&&i.pop(),i.length&&i[0]===t[0]?ei(i,j,e):[]})),Qs=Di(bo),Js=zn((function(t,e){var i=null==t?0:t.length,n=Te(t,e);return Ei(t,l(e,(function(t){return Gn(t,i)?+t:t})).sort(sn)),n})),ta=Di((function(t){return Vi(Oe(t,1,Lo,!0))})),ea=Di((function(t){var e=vo(t);return Lo(e)&&(e=j),Vi(Oe(t,1,Lo,!0),Wn(e,2))})),ia=Di((function(t){var e=vo(t);return e="function"==typeof e?e:j,Vi(Oe(t,1,Lo,!0),j,e)})),na=Di((function(t,e){return Lo(t)?Ae(t,e):[]})),oa=Di((function(t){return Zi(r(t,Lo))})),ra=Di((function(t){var e=vo(t);return Lo(e)&&(e=j),Zi(r(t,Lo),Wn(e,2))})),sa=Di((function(t){var e=vo(t);return e="function"==typeof e?e:j,Zi(r(t,Lo),j,e)})),aa=Di($o),la=Di((function(t){var e=t.length,i=e>1?t[e-1]:j;return i="function"==typeof i?(t.pop(),i):j,wo(t,i)})),ca=zn((function(t){var e=t.length,i=e?t[0]:0,n=this.__wrapped__,o=function(e){return Te(e,t)};return!(e>1||this.__actions__.length)&&n instanceof ue&&Gn(i)?((n=n.slice(i,+i+(e?1:0))).__actions__.push({func:ko,args:[o],thisArg:j}),new he(n,this.__chain__).thru((function(t){return e&&!t.length&&t.push(j),t}))):this.thru(o)})),ha=un((function(t,e,i){Er.call(t,i)?++t[i]:Ce(t,i,1)})),ua=bn(fo),da=bn(mo),pa=un((function(t,e,i){Er.call(t,i)?t[i].push(e):Ce(t,i,[e])})),fa=Di((function(e,i,n){var o=-1,r="function"==typeof i,s=Ro(e)?gr(e.length):[];return Ms(e,(function(e){s[++o]=r?t(i,e,n):ii(e,i,n)})),s})),ma=un((function(t,e,i){Ce(t,i,e)})),ga=un((function(t,e,i){t[i?0:1].push(e)}),(function(){return[[],[]]})),ya=Di((function(t,e){if(null==t)return[];var i=e.length;return i>1&&Zn(t,e[0],e[1])?e=[]:i>2&&Zn(e[0],e[1],e[2])&&(e=[e[0]]),Ti(t,Oe(e,1),[])})),va=Zr||function(){return ti.Date.now()},ba=Di((function(t,e,i){var n=1;if(i.length){var o=z(i,Hn(ba));n|=X}return An(t,n,e,i,o)})),xa=Di((function(t,e,i){var n=3;if(i.length){var o=z(i,Hn(xa));n|=X}return An(e,n,t,i,o)})),$a=Di((function(t,e){return Ie(t,1,e)})),wa=Di((function(t,e,i){return Ie(t,Zo(e)||0,i)}));Io.Cache=fe;var _a=Rs((function(e,i){var n=(i=1==i.length&&Ea(i[0])?l(i[0],C(Wn())):l(Oe(i,1),C(Wn()))).length;return Di((function(o){for(var r=-1,s=ss(o.length,n);++r<s;)o[r]=i[r].call(this,o[r]);return t(e,this,o)}))})),ka=Di((function(t,e){return An(t,X,j,e,z(e,Hn(ka)))})),Sa=Di((function(t,e){return An(t,G,j,e,z(e,Hn(Sa)))})),Ca=zn((function(t,e){return An(t,K,j,j,j,e)})),Ta=Mn(Ge),Ma=Mn((function(t,e){return t>=e})),Pa=oi(function(){return arguments}())?oi:function(t){return Ho(t)&&Er.call(t,"callee")&&!jr.call(t,"callee")},Ea=gr.isArray,Ia=si?C(si):function(t){return Ho(t)&&Ye(t)==bt},Aa=es||mr,Da=ai?C(ai):function(t){return Ho(t)&&Ye(t)==st},Ra=li?C(li):function(t){return Ho(t)&&Ns(t)==ht},La=ci?C(ci):function(t){return Ho(t)&&Ye(t)==ft},Oa=hi?C(hi):function(t){return Ho(t)&&Ns(t)==mt},za=ui?C(ui):function(t){return Ho(t)&&Bo(t.length)&&!!qe[Ye(t)]},Fa=Mn($i),Ba=Mn((function(t,e){return t<=e})),Na=dn((function(t,e){if(Jn(e)||Ro(e))return hn(e,er(e),t),j;for(var i in e)Er.call(e,i)&&we(t,i,e[i])})),Ha=dn((function(t,e){hn(e,ir(e),t)})),Wa=dn((function(t,e,i,n){hn(e,ir(e),t,n)})),ja=dn((function(t,e,i,n){hn(e,er(e),t,n)})),Ya=zn(Te),Va=Di((function(t,e){t=$r(t);var i=-1,n=e.length,o=n>2?e[2]:j;for(o&&Zn(e[0],e[1],o)&&(n=1);++i<n;)for(var r=e[i],s=ir(r),a=-1,l=s.length;++a<l;){var c=s[a],h=t[c];(h===j||Do(h,Tr[c])&&!Er.call(t,c))&&(t[c]=r[c])}return t})),Ua=Di((function(e){return e.push(j,Rn),t(Ka,j,e)})),qa=wn((function(t,e,i){null!=e&&"function"!=typeof e.toString&&(e=Dr.call(e)),t[e]=i}),lr(cr)),Xa=wn((function(t,e,i){null!=e&&"function"!=typeof e.toString&&(e=Dr.call(e)),Er.call(t,e)?t[e].push(i):t[e]=[i]}),Wn),Ga=Di(ii),Za=dn((function(t,e,i){Si(t,e,i)})),Ka=dn((function(t,e,i,n){Si(t,e,i,n)})),Qa=zn((function(t,e){var i={};if(null==t)return i;var n=!1;e=l(e,(function(e){return e=tn(e,t),n||(n=e.length>1),e})),hn(t,Bn(t),i),n&&(i=Pe(i,7,Ln));for(var o=e.length;o--;)Ui(i,e[o]);return i})),Ja=zn((function(t,e){return null==t?{}:function(t,e){return Mi(t,e,(function(e,i){return tr(t,i)}))}(t,e)})),tl=In(er),el=In(ir),il=gn((function(t,e,i){return e=e.toLowerCase(),t+(i?rr(e):e)})),nl=gn((function(t,e,i){return t+(i?"-":"")+e.toLowerCase()})),ol=gn((function(t,e,i){return t+(i?" ":"")+e.toLowerCase()})),rl=mn("toLowerCase"),sl=gn((function(t,e,i){return t+(i?"_":"")+e.toLowerCase()})),al=gn((function(t,e,i){return t+(i?" ":"")+cl(e)})),ll=gn((function(t,e,i){return t+(i?" ":"")+e.toUpperCase()})),cl=mn("toUpperCase"),hl=Di((function(e,i){try{return t(e,j,i)}catch(t){return Oo(t)?t:new vr(t)}})),ul=zn((function(t,e){return i(e,(function(e){e=co(e),Ce(t,e,ba(t[e],t))})),t})),dl=xn(),pl=xn(!0),fl=Di((function(t,e){return function(i){return ii(i,t,e)}})),ml=Di((function(t,e){return function(i){return ii(t,i,e)}})),gl=kn(l),yl=kn(o),vl=kn(d),bl=Tn(),xl=Tn(!0),$l=_n((function(t,e){return t+e}),0),wl=En("ceil"),_l=_n((function(t,e){return t/e}),1),kl=En("floor"),Sl=_n((function(t,e){return t*e}),1),Cl=En("round"),Tl=_n((function(t,e){return t-e}),0);return Zt.after=function(t,e){if("function"!=typeof e)throw new kr(Y);return t=Xo(t),function(){if(--t<1)return e.apply(this,arguments)}},Zt.ary=Mo,Zt.assign=Na,Zt.assignIn=Ha,Zt.assignInWith=Wa,Zt.assignWith=ja,Zt.at=Ya,Zt.before=Po,Zt.bind=ba,Zt.bindAll=ul,Zt.bindKey=xa,Zt.castArray=function(){if(!arguments.length)return[];var t=arguments[0];return Ea(t)?t:[t]},Zt.chain=_o,Zt.chunk=function(t,e,i){e=(i?Zn(t,e,i):e===j)?1:rs(Xo(e),0);var n=null==t?0:t.length;if(!n||e<1)return[];for(var o=0,r=0,s=gr(Qr(n/e));o<n;)s[r++]=Fi(t,o,o+=e);return s},Zt.compact=function(t){for(var e=-1,i=null==t?0:t.length,n=0,o=[];++e<i;){var r=t[e];r&&(o[n++]=r)}return o},Zt.concat=function(){var t=arguments.length;if(!t)return[];for(var e=gr(t-1),i=arguments[0],n=t;n--;)e[n-1]=arguments[n];return c(Ea(i)?cn(i):[i],Oe(e,1))},Zt.cond=function(e){var i=null==e?0:e.length,n=Wn();return e=i?l(e,(function(t){if("function"!=typeof t[1])throw new kr(Y);return[n(t[0]),t[1]]})):[],Di((function(n){for(var o=-1;++o<i;){var r=e[o];if(t(r[0],this,n))return t(r[1],this,n)}}))},Zt.conforms=function(t){return function(t){var e=er(t);return function(i){return Ee(i,t,e)}}(Pe(t,1))},Zt.constant=lr,Zt.countBy=ha,Zt.create=function(t,e){var i=Ts(t);return null==e?i:Se(i,e)},Zt.curry=function t(e,i,n){var o=An(e,8,j,j,j,j,j,i=n?j:i);return o.placeholder=t.placeholder,o},Zt.curryRight=function t(e,i,n){var o=An(e,q,j,j,j,j,j,i=n?j:i);return o.placeholder=t.placeholder,o},Zt.debounce=Eo,Zt.defaults=Va,Zt.defaultsDeep=Ua,Zt.defer=$a,Zt.delay=wa,Zt.difference=Us,Zt.differenceBy=qs,Zt.differenceWith=Xs,Zt.drop=function(t,e,i){var n=null==t?0:t.length;return n?Fi(t,(e=i||e===j?1:Xo(e))<0?0:e,n):[]},Zt.dropRight=function(t,e,i){var n=null==t?0:t.length;return n?Fi(t,0,(e=n-(e=i||e===j?1:Xo(e)))<0?0:e):[]},Zt.dropRightWhile=function(t,e){return t&&t.length?Xi(t,Wn(e,3),!0,!0):[]},Zt.dropWhile=function(t,e){return t&&t.length?Xi(t,Wn(e,3),!0):[]},Zt.fill=function(t,e,i,n){var o=null==t?0:t.length;return o?(i&&"number"!=typeof i&&Zn(t,e,i)&&(i=0,n=o),function(t,e,i,n){var o=t.length;for((i=Xo(i))<0&&(i=-i>o?0:o+i),(n=n===j||n>o?o:Xo(n))<0&&(n+=o),n=i>n?0:Go(n);i<n;)t[i++]=e;return t}(t,e,i,n)):[]},Zt.filter=function(t,e){return(Ea(t)?r:Le)(t,Wn(e,3))},Zt.flatMap=function(t,e){return Oe(To(t,e),1)},Zt.flatMapDeep=function(t,e){return Oe(To(t,e),Q)},Zt.flatMapDepth=function(t,e,i){return i=i===j?1:Xo(i),Oe(To(t,e),i)},Zt.flatten=go,Zt.flattenDeep=function(t){return null!=t&&t.length?Oe(t,Q):[]},Zt.flattenDepth=function(t,e){return null!=t&&t.length?Oe(t,e=e===j?1:Xo(e)):[]},Zt.flip=function(t){return An(t,512)},Zt.flow=dl,Zt.flowRight=pl,Zt.fromPairs=function(t){for(var e=-1,i=null==t?0:t.length,n={};++e<i;){var o=t[e];n[o[0]]=o[1]}return n},Zt.functions=function(t){return null==t?[]:He(t,er(t))},Zt.functionsIn=function(t){return null==t?[]:He(t,ir(t))},Zt.groupBy=pa,Zt.initial=function(t){return null!=t&&t.length?Fi(t,0,-1):[]},Zt.intersection=Gs,Zt.intersectionBy=Zs,Zt.intersectionWith=Ks,Zt.invert=qa,Zt.invertBy=Xa,Zt.invokeMap=fa,Zt.iteratee=hr,Zt.keyBy=ma,Zt.keys=er,Zt.keysIn=ir,Zt.map=To,Zt.mapKeys=function(t,e){var i={};return e=Wn(e,3),ze(t,(function(t,n,o){Ce(i,e(t,n,o),t)})),i},Zt.mapValues=function(t,e){var i={};return e=Wn(e,3),ze(t,(function(t,n,o){Ce(i,n,e(t,n,o))})),i},Zt.matches=function(t){return _i(Pe(t,1))},Zt.matchesProperty=function(t,e){return ki(t,Pe(e,1))},Zt.memoize=Io,Zt.merge=Za,Zt.mergeWith=Ka,Zt.method=fl,Zt.methodOf=ml,Zt.mixin=ur,Zt.negate=Ao,Zt.nthArg=function(t){return t=Xo(t),Di((function(e){return Ci(e,t)}))},Zt.omit=Qa,Zt.omitBy=function(t,e){return nr(t,Ao(Wn(e)))},Zt.once=function(t){return Po(2,t)},Zt.orderBy=function(t,e,i,n){return null==t?[]:(Ea(e)||(e=null==e?[]:[e]),Ea(i=n?j:i)||(i=null==i?[]:[i]),Ti(t,e,i))},Zt.over=gl,Zt.overArgs=_a,Zt.overEvery=yl,Zt.overSome=vl,Zt.partial=ka,Zt.partialRight=Sa,Zt.partition=ga,Zt.pick=Ja,Zt.pickBy=nr,Zt.property=pr,Zt.propertyOf=function(t){return function(e){return null==t?j:We(t,e)}},Zt.pull=Qs,Zt.pullAll=bo,Zt.pullAllBy=function(t,e,i){return t&&t.length&&e&&e.length?Pi(t,e,Wn(i,2)):t},Zt.pullAllWith=function(t,e,i){return t&&t.length&&e&&e.length?Pi(t,e,j,i):t},Zt.pullAt=Js,Zt.range=bl,Zt.rangeRight=xl,Zt.rearg=Ca,Zt.reject=function(t,e){return(Ea(t)?r:Le)(t,Ao(Wn(e,3)))},Zt.remove=function(t,e){var i=[];if(!t||!t.length)return i;var n=-1,o=[],r=t.length;for(e=Wn(e,3);++n<r;){var s=t[n];e(s,n,t)&&(i.push(s),o.push(n))}return Ei(t,o),i},Zt.rest=function(t,e){if("function"!=typeof t)throw new kr(Y);return Di(t,e=e===j?e:Xo(e))},Zt.reverse=xo,Zt.sampleSize=function(t,e,i){return e=(i?Zn(t,e,i):e===j)?1:Xo(e),(Ea(t)?be:Li)(t,e)},Zt.set=function(t,e,i){return null==t?t:Oi(t,e,i)},Zt.setWith=function(t,e,i,n){return n="function"==typeof n?n:j,null==t?t:Oi(t,e,i,n)},Zt.shuffle=function(t){return(Ea(t)?xe:zi)(t)},Zt.slice=function(t,e,i){var n=null==t?0:t.length;return n?(i&&"number"!=typeof i&&Zn(t,e,i)?(e=0,i=n):(e=null==e?0:Xo(e),i=i===j?n:Xo(i)),Fi(t,e,i)):[]},Zt.sortBy=ya,Zt.sortedUniq=function(t){return t&&t.length?Wi(t):[]},Zt.sortedUniqBy=function(t,e){return t&&t.length?Wi(t,Wn(e,2)):[]},Zt.split=function(t,e,i){return i&&"number"!=typeof i&&Zn(t,e,i)&&(e=i=j),(i=i===j?et:i>>>0)?(t=Qo(t))&&("string"==typeof e||null!=e&&!La(e))&&(!(e=Yi(e))&&D(t))?en(N(t),0,i):t.split(e,i):[]},Zt.spread=function(e,i){if("function"!=typeof e)throw new kr(Y);return i=null==i?0:rs(Xo(i),0),Di((function(n){var o=n[i],r=en(n,0,i);return o&&c(r,o),t(e,this,r)}))},Zt.tail=function(t){var e=null==t?0:t.length;return e?Fi(t,1,e):[]},Zt.take=function(t,e,i){return t&&t.length?Fi(t,0,(e=i||e===j?1:Xo(e))<0?0:e):[]},Zt.takeRight=function(t,e,i){var n=null==t?0:t.length;return n?Fi(t,(e=n-(e=i||e===j?1:Xo(e)))<0?0:e,n):[]},Zt.takeRightWhile=function(t,e){return t&&t.length?Xi(t,Wn(e,3),!1,!0):[]},Zt.takeWhile=function(t,e){return t&&t.length?Xi(t,Wn(e,3)):[]},Zt.tap=function(t,e){return e(t),t},Zt.throttle=function(t,e,i){var n=!0,o=!0;if("function"!=typeof t)throw new kr(Y);return No(i)&&(n="leading"in i?!!i.leading:n,o="trailing"in i?!!i.trailing:o),Eo(t,e,{leading:n,maxWait:e,trailing:o})},Zt.thru=ko,Zt.toArray=Uo,Zt.toPairs=tl,Zt.toPairsIn=el,Zt.toPath=function(t){return Ea(t)?l(t,co):Vo(t)?[t]:cn(Vs(Qo(t)))},Zt.toPlainObject=Ko,Zt.transform=function(t,e,n){var o=Ea(t),r=o||Aa(t)||za(t);if(e=Wn(e,4),null==n){var s=t&&t.constructor;n=r?o?new s:[]:No(t)&&zo(s)?Ts(Hr(t)):{}}return(r?i:ze)(t,(function(t,i,o){return e(n,t,i,o)})),n},Zt.unary=function(t){return Mo(t,1)},Zt.union=ta,Zt.unionBy=ea,Zt.unionWith=ia,Zt.uniq=function(t){return t&&t.length?Vi(t):[]},Zt.uniqBy=function(t,e){return t&&t.length?Vi(t,Wn(e,2)):[]},Zt.uniqWith=function(t,e){return e="function"==typeof e?e:j,t&&t.length?Vi(t,j,e):[]},Zt.unset=function(t,e){return null==t||Ui(t,e)},Zt.unzip=$o,Zt.unzipWith=wo,Zt.update=function(t,e,i){return null==t?t:qi(t,e,Ji(i))},Zt.updateWith=function(t,e,i,n){return n="function"==typeof n?n:j,null==t?t:qi(t,e,Ji(i),n)},Zt.values=or,Zt.valuesIn=function(t){return null==t?[]:T(t,ir(t))},Zt.without=na,Zt.words=ar,Zt.wrap=function(t,e){return ka(Ji(e),t)},Zt.xor=oa,Zt.xorBy=ra,Zt.xorWith=sa,Zt.zip=aa,Zt.zipObject=function(t,e){return Ki(t||[],e||[],we)},Zt.zipObjectDeep=function(t,e){return Ki(t||[],e||[],Oi)},Zt.zipWith=la,Zt.entries=tl,Zt.entriesIn=el,Zt.extend=Ha,Zt.extendWith=Wa,ur(Zt,Zt),Zt.add=$l,Zt.attempt=hl,Zt.camelCase=il,Zt.capitalize=rr,Zt.ceil=wl,Zt.clamp=function(t,e,i){return i===j&&(i=e,e=j),i!==j&&(i=(i=Zo(i))==i?i:0),e!==j&&(e=(e=Zo(e))==e?e:0),Me(Zo(t),e,i)},Zt.clone=function(t){return Pe(t,4)},Zt.cloneDeep=function(t){return Pe(t,5)},Zt.cloneDeepWith=function(t,e){return Pe(t,5,e="function"==typeof e?e:j)},Zt.cloneWith=function(t,e){return Pe(t,4,e="function"==typeof e?e:j)},Zt.conformsTo=function(t,e){return null==e||Ee(t,e,er(e))},Zt.deburr=sr,Zt.defaultTo=function(t,e){return null==t||t!=t?e:t},Zt.divide=_l,Zt.endsWith=function(t,e,i){t=Qo(t),e=Yi(e);var n=t.length,o=i=i===j?n:Me(Xo(i),0,n);return(i-=e.length)>=0&&t.slice(i,o)==e},Zt.eq=Do,Zt.escape=function(t){return(t=Qo(t))&&Ot.test(t)?t.replace(Rt,fi):t},Zt.escapeRegExp=function(t){return(t=Qo(t))&&Yt.test(t)?t.replace(jt,"\\$&"):t},Zt.every=function(t,e,i){var n=Ea(t)?o:De;return i&&Zn(t,e,i)&&(e=j),n(t,Wn(e,3))},Zt.find=ua,Zt.findIndex=fo,Zt.findKey=function(t,e){return f(t,Wn(e,3),ze)},Zt.findLast=da,Zt.findLastIndex=mo,Zt.findLastKey=function(t,e){return f(t,Wn(e,3),Fe)},Zt.floor=kl,Zt.forEach=So,Zt.forEachRight=Co,Zt.forIn=function(t,e){return null==t?t:Es(t,Wn(e,3),ir)},Zt.forInRight=function(t,e){return null==t?t:Is(t,Wn(e,3),ir)},Zt.forOwn=function(t,e){return t&&ze(t,Wn(e,3))},Zt.forOwnRight=function(t,e){return t&&Fe(t,Wn(e,3))},Zt.get=Jo,Zt.gt=Ta,Zt.gte=Ma,Zt.has=function(t,e){return null!=t&&Un(t,e,Qe)},Zt.hasIn=tr,Zt.head=yo,Zt.identity=cr,Zt.includes=function(t,e,i,n){t=Ro(t)?t:or(t),i=i&&!n?Xo(i):0;var o=t.length;return i<0&&(i=rs(o+i,0)),Yo(t)?i<=o&&t.indexOf(e,i)>-1:!!o&&g(t,e,i)>-1},Zt.indexOf=function(t,e,i){var n=null==t?0:t.length;if(!n)return-1;var o=null==i?0:Xo(i);return o<0&&(o=rs(n+o,0)),g(t,e,o)},Zt.inRange=function(t,e,i){return e=qo(e),i===j?(i=e,e=0):i=qo(i),function(t,e,i){return t>=ss(e,i)&&t<rs(e,i)}(t=Zo(t),e,i)},Zt.invoke=Ga,Zt.isArguments=Pa,Zt.isArray=Ea,Zt.isArrayBuffer=Ia,Zt.isArrayLike=Ro,Zt.isArrayLikeObject=Lo,Zt.isBoolean=function(t){return!0===t||!1===t||Ho(t)&&Ye(t)==rt},Zt.isBuffer=Aa,Zt.isDate=Da,Zt.isElement=function(t){return Ho(t)&&1===t.nodeType&&!jo(t)},Zt.isEmpty=function(t){if(null==t)return!0;if(Ro(t)&&(Ea(t)||"string"==typeof t||"function"==typeof t.splice||Aa(t)||za(t)||Pa(t)))return!t.length;var e=Ns(t);if(e==ht||e==mt)return!t.size;if(Jn(t))return!bi(t).length;for(var i in t)if(Er.call(t,i))return!1;return!0},Zt.isEqual=function(t,e){return ri(t,e)},Zt.isEqualWith=function(t,e,i){var n=(i="function"==typeof i?i:j)?i(t,e):j;return n===j?ri(t,e,j,i):!!n},Zt.isError=Oo,Zt.isFinite=function(t){return"number"==typeof t&&is(t)},Zt.isFunction=zo,Zt.isInteger=Fo,Zt.isLength=Bo,Zt.isMap=Ra,Zt.isMatch=function(t,e){return t===e||di(t,e,Yn(e))},Zt.isMatchWith=function(t,e,i){return i="function"==typeof i?i:j,di(t,e,Yn(e),i)},Zt.isNaN=function(t){return Wo(t)&&t!=+t},Zt.isNative=function(t){if(Hs(t))throw new vr("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return yi(t)},Zt.isNil=function(t){return null==t},Zt.isNull=function(t){return null===t},Zt.isNumber=Wo,Zt.isObject=No,Zt.isObjectLike=Ho,Zt.isPlainObject=jo,Zt.isRegExp=La,Zt.isSafeInteger=function(t){return Fo(t)&&t>=-J&&t<=J},Zt.isSet=Oa,Zt.isString=Yo,Zt.isSymbol=Vo,Zt.isTypedArray=za,Zt.isUndefined=function(t){return t===j},Zt.isWeakMap=function(t){return Ho(t)&&Ns(t)==vt},Zt.isWeakSet=function(t){return Ho(t)&&"[object WeakSet]"==Ye(t)},Zt.join=function(t,e){return null==t?"":ns.call(t,e)},Zt.kebabCase=nl,Zt.last=vo,Zt.lastIndexOf=function(t,e,i){var n=null==t?0:t.length;if(!n)return-1;var o=n;return i!==j&&(o=(o=Xo(i))<0?rs(n+o,0):ss(o,n-1)),e==e?function(t,e,i){for(var n=i+1;n--;)if(t[n]===e)return n;return n}(t,e,o):m(t,v,o,!0)},Zt.lowerCase=ol,Zt.lowerFirst=rl,Zt.lt=Fa,Zt.lte=Ba,Zt.max=function(t){return t&&t.length?Re(t,cr,Ge):j},Zt.maxBy=function(t,e){return t&&t.length?Re(t,Wn(e,2),Ge):j},Zt.mean=function(t){return b(t,cr)},Zt.meanBy=function(t,e){return b(t,Wn(e,2))},Zt.min=function(t){return t&&t.length?Re(t,cr,$i):j},Zt.minBy=function(t,e){return t&&t.length?Re(t,Wn(e,2),$i):j},Zt.stubArray=fr,Zt.stubFalse=mr,Zt.stubObject=function(){return{}},Zt.stubString=function(){return""},Zt.stubTrue=function(){return!0},Zt.multiply=Sl,Zt.nth=function(t,e){return t&&t.length?Ci(t,Xo(e)):j},Zt.noConflict=function(){return ti._===this&&(ti._=Lr),this},Zt.noop=dr,Zt.now=va,Zt.pad=function(t,e,i){t=Qo(t);var n=(e=Xo(e))?B(t):0;if(!e||n>=e)return t;var o=(e-n)/2;return Sn(Jr(o),i)+t+Sn(Qr(o),i)},Zt.padEnd=function(t,e,i){t=Qo(t);var n=(e=Xo(e))?B(t):0;return e&&n<e?t+Sn(e-n,i):t},Zt.padStart=function(t,e,i){t=Qo(t);var n=(e=Xo(e))?B(t):0;return e&&n<e?Sn(e-n,i)+t:t},Zt.parseInt=function(t,e,i){return i||null==e?e=0:e&&(e=+e),ls(Qo(t).replace(Vt,""),e||0)},Zt.random=function(t,e,i){if(i&&"boolean"!=typeof i&&Zn(t,e,i)&&(e=i=j),i===j&&("boolean"==typeof e?(i=e,e=j):"boolean"==typeof t&&(i=t,t=j)),t===j&&e===j?(t=0,e=1):(t=qo(t),e===j?(e=t,t=0):e=qo(e)),t>e){var n=t;t=e,e=n}if(i||t%1||e%1){var o=cs();return ss(t+o*(e-t+Ze("1e-"+((o+"").length-1))),e)}return Ii(t,e)},Zt.reduce=function(t,e,i){var n=Ea(t)?h:w,o=arguments.length<3;return n(t,Wn(e,4),i,o,Ms)},Zt.reduceRight=function(t,e,i){var n=Ea(t)?u:w,o=arguments.length<3;return n(t,Wn(e,4),i,o,Ps)},Zt.repeat=function(t,e,i){return e=(i?Zn(t,e,i):e===j)?1:Xo(e),Ai(Qo(t),e)},Zt.replace=function(){var t=arguments,e=Qo(t[0]);return t.length<3?e:e.replace(t[1],t[2])},Zt.result=function(t,e,i){var n=-1,o=(e=tn(e,t)).length;for(o||(o=1,t=j);++n<o;){var r=null==t?j:t[co(e[n])];r===j&&(n=o,r=i),t=zo(r)?r.call(t):r}return t},Zt.round=Cl,Zt.runInContext=$,Zt.sample=function(t){return(Ea(t)?ve:Ri)(t)},Zt.size=function(t){if(null==t)return 0;if(Ro(t))return Yo(t)?B(t):t.length;var e=Ns(t);return e==ht||e==mt?t.size:bi(t).length},Zt.snakeCase=sl,Zt.some=function(t,e,i){var n=Ea(t)?d:Bi;return i&&Zn(t,e,i)&&(e=j),n(t,Wn(e,3))},Zt.sortedIndex=function(t,e){return Ni(t,e)},Zt.sortedIndexBy=function(t,e,i){return Hi(t,e,Wn(i,2))},Zt.sortedIndexOf=function(t,e){var i=null==t?0:t.length;if(i){var n=Ni(t,e);if(n<i&&Do(t[n],e))return n}return-1},Zt.sortedLastIndex=function(t,e){return Ni(t,e,!0)},Zt.sortedLastIndexBy=function(t,e,i){return Hi(t,e,Wn(i,2),!0)},Zt.sortedLastIndexOf=function(t,e){if(null!=t&&t.length){var i=Ni(t,e,!0)-1;if(Do(t[i],e))return i}return-1},Zt.startCase=al,Zt.startsWith=function(t,e,i){return t=Qo(t),i=null==i?0:Me(Xo(i),0,t.length),e=Yi(e),t.slice(i,i+e.length)==e},Zt.subtract=Tl,Zt.sum=function(t){return t&&t.length?_(t,cr):0},Zt.sumBy=function(t,e){return t&&t.length?_(t,Wn(e,2)):0},Zt.template=function(t,e,i){var n=Zt.templateSettings;i&&Zn(t,e,i)&&(e=j),t=Qo(t),e=Wa({},e,n,Dn);var o,r,s=Wa({},e.imports,n.imports,Dn),a=er(s),l=T(s,a),c=0,h=e.interpolate||ae,u="__p += '",d=wr((e.escape||ae).source+"|"+h.source+"|"+(h===Bt?Jt:ae).source+"|"+(e.evaluate||ae).source+"|$","g"),p="//# sourceURL="+(Er.call(e,"sourceURL")?(e.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Ue+"]")+"\n";t.replace(d,(function(e,i,n,s,a,l){return n||(n=s),u+=t.slice(c,l).replace(le,A),i&&(o=!0,u+="' +\n__e("+i+") +\n'"),a&&(r=!0,u+="';\n"+a+";\n__p += '"),n&&(u+="' +\n((__t = ("+n+")) == null ? '' : __t) +\n'"),c=l+e.length,e})),u+="';\n";var f=Er.call(e,"variable")&&e.variable;if(f){if(Kt.test(f))throw new vr("Invalid `variable` option passed into `_.template`")}else u="with (obj) {\n"+u+"\n}\n";u=(r?u.replace(Et,""):u).replace(It,"$1").replace(At,"$1;"),u="function("+(f||"obj")+") {\n"+(f?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(r?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+u+"return __p\n}";var m=hl((function(){return br(a,p+"return "+u).apply(j,l)}));if(m.source=u,Oo(m))throw m;return m},Zt.times=function(t,e){if((t=Xo(t))<1||t>J)return[];var i=et,n=ss(t,et);e=Wn(e),t-=et;for(var o=k(n,e);++i<t;)e(i);return o},Zt.toFinite=qo,Zt.toInteger=Xo,Zt.toLength=Go,Zt.toLower=function(t){return Qo(t).toLowerCase()},Zt.toNumber=Zo,Zt.toSafeInteger=function(t){return t?Me(Xo(t),-J,J):0===t?t:0},Zt.toString=Qo,Zt.toUpper=function(t){return Qo(t).toUpperCase()},Zt.trim=function(t,e,i){if((t=Qo(t))&&(i||e===j))return S(t);if(!t||!(e=Yi(e)))return t;var n=N(t),o=N(e);return en(n,P(n,o),E(n,o)+1).join("")},Zt.trimEnd=function(t,e,i){if((t=Qo(t))&&(i||e===j))return t.slice(0,H(t)+1);if(!t||!(e=Yi(e)))return t;var n=N(t);return en(n,0,E(n,N(e))+1).join("")},Zt.trimStart=function(t,e,i){if((t=Qo(t))&&(i||e===j))return t.replace(Vt,"");if(!t||!(e=Yi(e)))return t;var n=N(t);return en(n,P(n,N(e))).join("")},Zt.truncate=function(t,e){var i=30,n="...";if(No(e)){var o="separator"in e?e.separator:o;i="length"in e?Xo(e.length):i,n="omission"in e?Yi(e.omission):n}var r=(t=Qo(t)).length;if(D(t)){var s=N(t);r=s.length}if(i>=r)return t;var a=i-B(n);if(a<1)return n;var l=s?en(s,0,a).join(""):t.slice(0,a);if(o===j)return l+n;if(s&&(a+=l.length-a),La(o)){if(t.slice(a).search(o)){var c,h=l;for(o.global||(o=wr(o.source,Qo(te.exec(o))+"g")),o.lastIndex=0;c=o.exec(h);)var u=c.index;l=l.slice(0,u===j?a:u)}}else if(t.indexOf(Yi(o),a)!=a){var d=l.lastIndexOf(o);d>-1&&(l=l.slice(0,d))}return l+n},Zt.unescape=function(t){return(t=Qo(t))&&Lt.test(t)?t.replace(Dt,mi):t},Zt.uniqueId=function(t){var e=++Ir;return Qo(t)+e},Zt.upperCase=ll,Zt.upperFirst=cl,Zt.each=So,Zt.eachRight=Co,Zt.first=yo,ur(Zt,function(){var t={};return ze(Zt,(function(e,i){Er.call(Zt.prototype,i)||(t[i]=e)})),t}(),{chain:!1}),Zt.VERSION="4.17.21",i(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(t){Zt[t].placeholder=Zt})),i(["drop","take"],(function(t,e){ue.prototype[t]=function(i){i=i===j?1:rs(Xo(i),0);var n=this.__filtered__&&!e?new ue(this):this.clone();return n.__filtered__?n.__takeCount__=ss(i,n.__takeCount__):n.__views__.push({size:ss(i,et),type:t+(n.__dir__<0?"Right":"")}),n},ue.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}})),i(["filter","map","takeWhile"],(function(t,e){var i=e+1,n=1==i||3==i;ue.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:Wn(t,3),type:i}),e.__filtered__=e.__filtered__||n,e}})),i(["head","last"],(function(t,e){var i="take"+(e?"Right":"");ue.prototype[t]=function(){return this[i](1).value()[0]}})),i(["initial","tail"],(function(t,e){var i="drop"+(e?"":"Right");ue.prototype[t]=function(){return this.__filtered__?new ue(this):this[i](1)}})),ue.prototype.compact=function(){return this.filter(cr)},ue.prototype.find=function(t){return this.filter(t).head()},ue.prototype.findLast=function(t){return this.reverse().find(t)},ue.prototype.invokeMap=Di((function(t,e){return"function"==typeof t?new ue(this):this.map((function(i){return ii(i,t,e)}))})),ue.prototype.reject=function(t){return this.filter(Ao(Wn(t)))},ue.prototype.slice=function(t,e){t=Xo(t);var i=this;return i.__filtered__&&(t>0||e<0)?new ue(i):(t<0?i=i.takeRight(-t):t&&(i=i.drop(t)),e!==j&&(i=(e=Xo(e))<0?i.dropRight(-e):i.take(e-t)),i)},ue.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},ue.prototype.toArray=function(){return this.take(et)},ze(ue.prototype,(function(t,e){var i=/^(?:filter|find|map|reject)|While$/.test(e),n=/^(?:head|last)$/.test(e),o=Zt[n?"take"+("last"==e?"Right":""):e],r=n||/^find/.test(e);o&&(Zt.prototype[e]=function(){var e=this.__wrapped__,s=n?[1]:arguments,a=e instanceof ue,l=s[0],h=a||Ea(e),u=function(t){var e=o.apply(Zt,c([t],s));return n&&d?e[0]:e};h&&i&&"function"==typeof l&&1!=l.length&&(a=h=!1);var d=this.__chain__,p=!!this.__actions__.length,f=r&&!d,m=a&&!p;if(!r&&h){e=m?e:new ue(this);var g=t.apply(e,s);return g.__actions__.push({func:ko,args:[u],thisArg:j}),new he(g,d)}return f&&m?t.apply(this,s):(g=this.thru(u),f?n?g.value()[0]:g.value():g)})})),i(["pop","push","shift","sort","splice","unshift"],(function(t){var e=Sr[t],i=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",n=/^(?:pop|shift)$/.test(t);Zt.prototype[t]=function(){var t=arguments;if(n&&!this.__chain__){var o=this.value();return e.apply(Ea(o)?o:[],t)}return this[i]((function(i){return e.apply(Ea(i)?i:[],t)}))}})),ze(ue.prototype,(function(t,e){var i=Zt[e];if(i){var n=i.name+"";Er.call(vs,n)||(vs[n]=[]),vs[n].push({name:e,func:i})}})),vs[$n(j,2).name]=[{name:"wrapper",func:j}],ue.prototype.clone=function(){var t=new ue(this.__wrapped__);return t.__actions__=cn(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=cn(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=cn(this.__views__),t},ue.prototype.reverse=function(){if(this.__filtered__){var t=new ue(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},ue.prototype.value=function(){var t=this.__wrapped__.value(),e=this.__dir__,i=Ea(t),n=e<0,o=i?t.length:0,r=function(t,e,i){for(var n=-1,o=i.length;++n<o;){var r=i[n],s=r.size;switch(r.type){case"drop":t+=s;break;case"dropRight":e-=s;break;case"take":e=ss(e,t+s);break;case"takeRight":t=rs(t,e-s)}}return{start:t,end:e}}(0,o,this.__views__),s=r.start,a=r.end,l=a-s,c=n?a:s-1,h=this.__iteratees__,u=h.length,d=0,p=ss(l,this.__takeCount__);if(!i||!n&&o==l&&p==l)return Gi(t,this.__actions__);var f=[];t:for(;l--&&d<p;){for(var m=-1,g=t[c+=e];++m<u;){var y=h[m],v=y.iteratee,b=y.type,x=v(g);if(2==b)g=x;else if(!x){if(1==b)continue t;break t}}f[d++]=g}return f},Zt.prototype.at=ca,Zt.prototype.chain=function(){return _o(this)},Zt.prototype.commit=function(){return new he(this.value(),this.__chain__)},Zt.prototype.next=function(){this.__values__===j&&(this.__values__=Uo(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?j:this.__values__[this.__index__++]}},Zt.prototype.plant=function(t){for(var e,i=this;i instanceof ce;){var n=po(i);n.__index__=0,n.__values__=j,e?o.__wrapped__=n:e=n;var o=n;i=i.__wrapped__}return o.__wrapped__=t,e},Zt.prototype.reverse=function(){var t=this.__wrapped__;if(t instanceof ue){var e=t;return this.__actions__.length&&(e=new ue(this)),(e=e.reverse()).__actions__.push({func:ko,args:[xo],thisArg:j}),new he(e,this.__chain__)}return this.thru(xo)},Zt.prototype.toJSON=Zt.prototype.valueOf=Zt.prototype.value=function(){return Gi(this.__wrapped__,this.__actions__)},Zt.prototype.first=Zt.prototype.head,Ur&&(Zt.prototype[Ur]=function(){return this}),Zt}();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(ti._=gi,define((function(){return gi}))):ii?((ii.exports=gi)._=gi,ei._=gi):ti._=gi}).call(this),
/*!
 * jQuery JavaScript Library v3.6.0
 * https://jquery.com/
 *
 * Includes Sizzle.js
 * https://sizzlejs.com/
 *
 * Copyright OpenJS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2021-03-02T17:08Z
 */
function(t,e){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=t.document?e(t,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return e(t)}:e(t)}("undefined"!=typeof window?window:this,(function(t,e){"use strict";var i=[],n=Object.getPrototypeOf,o=i.slice,r=i.flat?function(t){return i.flat.call(t)}:function(t){return i.concat.apply([],t)},s=i.push,a=i.indexOf,l={},c=l.toString,h=l.hasOwnProperty,u=h.toString,d=u.call(Object),p={},f=function(t){return"function"==typeof t&&"number"!=typeof t.nodeType&&"function"!=typeof t.item},m=function(t){return null!=t&&t===t.window},g=t.document,y={type:!0,src:!0,nonce:!0,noModule:!0};function v(t,e,i){var n,o,r=(i=i||g).createElement("script");if(r.text=t,e)for(n in y)(o=e[n]||e.getAttribute&&e.getAttribute(n))&&r.setAttribute(n,o);i.head.appendChild(r).parentNode.removeChild(r)}function b(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?l[c.call(t)]||"object":typeof t}var x="3.6.0",$=function(t,e){return new $.fn.init(t,e)};function w(t){var e=!!t&&"length"in t&&t.length,i=b(t);return!f(t)&&!m(t)&&("array"===i||0===e||"number"==typeof e&&e>0&&e-1 in t)}$.fn=$.prototype={jquery:x,constructor:$,length:0,toArray:function(){return o.call(this)},get:function(t){return null==t?o.call(this):t<0?this[t+this.length]:this[t]},pushStack:function(t){var e=$.merge(this.constructor(),t);return e.prevObject=this,e},each:function(t){return $.each(this,t)},map:function(t){return this.pushStack($.map(this,(function(e,i){return t.call(e,i,e)})))},slice:function(){return this.pushStack(o.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack($.grep(this,(function(t,e){return(e+1)%2})))},odd:function(){return this.pushStack($.grep(this,(function(t,e){return e%2})))},eq:function(t){var e=this.length,i=+t+(t<0?e:0);return this.pushStack(i>=0&&i<e?[this[i]]:[])},end:function(){return this.prevObject||this.constructor()},push:s,sort:i.sort,splice:i.splice},$.extend=$.fn.extend=function(){var t,e,i,n,o,r,s=arguments[0]||{},a=1,l=arguments.length,c=!1;for("boolean"==typeof s&&(c=s,s=arguments[a]||{},a++),"object"==typeof s||f(s)||(s={}),a===l&&(s=this,a--);a<l;a++)if(null!=(t=arguments[a]))for(e in t)n=t[e],"__proto__"!==e&&s!==n&&(c&&n&&($.isPlainObject(n)||(o=Array.isArray(n)))?(i=s[e],r=o&&!Array.isArray(i)?[]:o||$.isPlainObject(i)?i:{},o=!1,s[e]=$.extend(c,r,n)):void 0!==n&&(s[e]=n));return s},$.extend({expando:"jQuery"+(x+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isPlainObject:function(t){var e,i;return!(!t||"[object Object]"!==c.call(t))&&(!(e=n(t))||"function"==typeof(i=h.call(e,"constructor")&&e.constructor)&&u.call(i)===d)},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},globalEval:function(t,e,i){v(t,{nonce:e&&e.nonce},i)},each:function(t,e){var i,n=0;if(w(t))for(i=t.length;n<i&&!1!==e.call(t[n],n,t[n]);n++);else for(n in t)if(!1===e.call(t[n],n,t[n]))break;return t},makeArray:function(t,e){var i=e||[];return null!=t&&(w(Object(t))?$.merge(i,"string"==typeof t?[t]:t):s.call(i,t)),i},inArray:function(t,e,i){return null==e?-1:a.call(e,t,i)},merge:function(t,e){for(var i=+e.length,n=0,o=t.length;n<i;n++)t[o++]=e[n];return t.length=o,t},grep:function(t,e,i){for(var n=[],o=0,r=t.length,s=!i;o<r;o++)!e(t[o],o)!==s&&n.push(t[o]);return n},map:function(t,e,i){var n,o,s=0,a=[];if(w(t))for(n=t.length;s<n;s++)null!=(o=e(t[s],s,i))&&a.push(o);else for(s in t)null!=(o=e(t[s],s,i))&&a.push(o);return r(a)},guid:1,support:p}),"function"==typeof Symbol&&($.fn[Symbol.iterator]=i[Symbol.iterator]),$.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),(function(t,e){l["[object "+e+"]"]=e.toLowerCase()}));var _=
/*!
 * Sizzle CSS Selector Engine v2.3.6
 * https://sizzlejs.com/
 *
 * Copyright JS Foundation and other contributors
 * Released under the MIT license
 * https://js.foundation/
 *
 * Date: 2021-02-16
 */
function(t){var e,i,n,o,r,s,a,l,c,h,u,d,p,f,m,g,y,v,b,x="sizzle"+1*new Date,$=t.document,w=0,_=0,k=lt(),S=lt(),C=lt(),T=lt(),M=function(t,e){return t===e&&(u=!0),0},P={}.hasOwnProperty,E=[],I=E.pop,A=E.push,D=E.push,R=E.slice,L=function(t,e){for(var i=0,n=t.length;i<n;i++)if(t[i]===e)return i;return-1},O="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",z="[\\x20\\t\\r\\n\\f]",F="(?:\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",B="\\[[\\x20\\t\\r\\n\\f]*("+F+")(?:"+z+"*([*^$|!~]?=)"+z+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+F+"))|)"+z+"*\\]",N=":("+F+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+B+")*)|.*)\\)|)",H=new RegExp(z+"+","g"),W=new RegExp("^[\\x20\\t\\r\\n\\f]+|((?:^|[^\\\\])(?:\\\\.)*)[\\x20\\t\\r\\n\\f]+$","g"),j=new RegExp("^[\\x20\\t\\r\\n\\f]*,[\\x20\\t\\r\\n\\f]*"),Y=new RegExp("^[\\x20\\t\\r\\n\\f]*([>+~]|[\\x20\\t\\r\\n\\f])[\\x20\\t\\r\\n\\f]*"),V=new RegExp(z+"|>"),U=new RegExp(N),q=new RegExp("^"+F+"$"),X={ID:new RegExp("^#("+F+")"),CLASS:new RegExp("^\\.("+F+")"),TAG:new RegExp("^("+F+"|[*])"),ATTR:new RegExp("^"+B),PSEUDO:new RegExp("^"+N),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\([\\x20\\t\\r\\n\\f]*(even|odd|(([+-]|)(\\d*)n|)[\\x20\\t\\r\\n\\f]*(?:([+-]|)[\\x20\\t\\r\\n\\f]*(\\d+)|))[\\x20\\t\\r\\n\\f]*\\)|)","i"),bool:new RegExp("^(?:"+O+")$","i"),needsContext:new RegExp("^[\\x20\\t\\r\\n\\f]*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\([\\x20\\t\\r\\n\\f]*((?:-\\d)?\\d*)[\\x20\\t\\r\\n\\f]*\\)|)(?=[^-]|$)","i")},G=/HTML$/i,Z=/^(?:input|select|textarea|button)$/i,K=/^h\d$/i,Q=/^[^{]+\{\s*\[native \w/,J=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,tt=/[+~]/,et=new RegExp("\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\([^\\r\\n\\f])","g"),it=function(t,e){var i="0x"+t.slice(1)-65536;return e||(i<0?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320))},nt=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,ot=function(t,e){return e?"\0"===t?"�":t.slice(0,-1)+"\\"+t.charCodeAt(t.length-1).toString(16)+" ":"\\"+t},rt=function(){d()},st=xt((function(t){return!0===t.disabled&&"fieldset"===t.nodeName.toLowerCase()}),{dir:"parentNode",next:"legend"});try{D.apply(E=R.call($.childNodes),$.childNodes),E[$.childNodes.length].nodeType}catch(t){D={apply:E.length?function(t,e){A.apply(t,R.call(e))}:function(t,e){for(var i=t.length,n=0;t[i++]=e[n++];);t.length=i-1}}}function at(t,e,n,o){var r,a,c,h,u,f,y,v=e&&e.ownerDocument,$=e?e.nodeType:9;if(n=n||[],"string"!=typeof t||!t||1!==$&&9!==$&&11!==$)return n;if(!o&&(d(e),e=e||p,m)){if(11!==$&&(u=J.exec(t)))if(r=u[1]){if(9===$){if(!(c=e.getElementById(r)))return n;if(c.id===r)return n.push(c),n}else if(v&&(c=v.getElementById(r))&&b(e,c)&&c.id===r)return n.push(c),n}else{if(u[2])return D.apply(n,e.getElementsByTagName(t)),n;if((r=u[3])&&i.getElementsByClassName&&e.getElementsByClassName)return D.apply(n,e.getElementsByClassName(r)),n}if(i.qsa&&!T[t+" "]&&(!g||!g.test(t))&&(1!==$||"object"!==e.nodeName.toLowerCase())){if(y=t,v=e,1===$&&(V.test(t)||Y.test(t))){for((v=tt.test(t)&&yt(e.parentNode)||e)===e&&i.scope||((h=e.getAttribute("id"))?h=h.replace(nt,ot):e.setAttribute("id",h=x)),a=(f=s(t)).length;a--;)f[a]=(h?"#"+h:":scope")+" "+bt(f[a]);y=f.join(",")}try{return D.apply(n,v.querySelectorAll(y)),n}catch(e){T(t,!0)}finally{h===x&&e.removeAttribute("id")}}}return l(t.replace(W,"$1"),e,n,o)}function lt(){var t=[];return function e(i,o){return t.push(i+" ")>n.cacheLength&&delete e[t.shift()],e[i+" "]=o}}function ct(t){return t[x]=!0,t}function ht(t){var e=p.createElement("fieldset");try{return!!t(e)}catch(t){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function ut(t,e){for(var i=t.split("|"),o=i.length;o--;)n.attrHandle[i[o]]=e}function dt(t,e){var i=e&&t,n=i&&1===t.nodeType&&1===e.nodeType&&t.sourceIndex-e.sourceIndex;if(n)return n;if(i)for(;i=i.nextSibling;)if(i===e)return-1;return t?1:-1}function pt(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}function ft(t){return function(e){var i=e.nodeName.toLowerCase();return("input"===i||"button"===i)&&e.type===t}}function mt(t){return function(e){return"form"in e?e.parentNode&&!1===e.disabled?"label"in e?"label"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&st(e)===t:e.disabled===t:"label"in e&&e.disabled===t}}function gt(t){return ct((function(e){return e=+e,ct((function(i,n){for(var o,r=t([],i.length,e),s=r.length;s--;)i[o=r[s]]&&(i[o]=!(n[o]=i[o]))}))}))}function yt(t){return t&&void 0!==t.getElementsByTagName&&t}for(e in i=at.support={},r=at.isXML=function(t){var e=t&&t.namespaceURI,i=t&&(t.ownerDocument||t).documentElement;return!G.test(e||i&&i.nodeName||"HTML")},d=at.setDocument=function(t){var e,o,s=t?t.ownerDocument||t:$;return s!=p&&9===s.nodeType&&s.documentElement?(f=(p=s).documentElement,m=!r(p),$!=p&&(o=p.defaultView)&&o.top!==o&&(o.addEventListener?o.addEventListener("unload",rt,!1):o.attachEvent&&o.attachEvent("onunload",rt)),i.scope=ht((function(t){return f.appendChild(t).appendChild(p.createElement("div")),void 0!==t.querySelectorAll&&!t.querySelectorAll(":scope fieldset div").length})),i.attributes=ht((function(t){return t.className="i",!t.getAttribute("className")})),i.getElementsByTagName=ht((function(t){return t.appendChild(p.createComment("")),!t.getElementsByTagName("*").length})),i.getElementsByClassName=Q.test(p.getElementsByClassName),i.getById=ht((function(t){return f.appendChild(t).id=x,!p.getElementsByName||!p.getElementsByName(x).length})),i.getById?(n.filter.ID=function(t){var e=t.replace(et,it);return function(t){return t.getAttribute("id")===e}},n.find.ID=function(t,e){if(void 0!==e.getElementById&&m){var i=e.getElementById(t);return i?[i]:[]}}):(n.filter.ID=function(t){var e=t.replace(et,it);return function(t){var i=void 0!==t.getAttributeNode&&t.getAttributeNode("id");return i&&i.value===e}},n.find.ID=function(t,e){if(void 0!==e.getElementById&&m){var i,n,o,r=e.getElementById(t);if(r){if((i=r.getAttributeNode("id"))&&i.value===t)return[r];for(o=e.getElementsByName(t),n=0;r=o[n++];)if((i=r.getAttributeNode("id"))&&i.value===t)return[r]}return[]}}),n.find.TAG=i.getElementsByTagName?function(t,e){return void 0!==e.getElementsByTagName?e.getElementsByTagName(t):i.qsa?e.querySelectorAll(t):void 0}:function(t,e){var i,n=[],o=0,r=e.getElementsByTagName(t);if("*"===t){for(;i=r[o++];)1===i.nodeType&&n.push(i);return n}return r},n.find.CLASS=i.getElementsByClassName&&function(t,e){if(void 0!==e.getElementsByClassName&&m)return e.getElementsByClassName(t)},y=[],g=[],(i.qsa=Q.test(p.querySelectorAll))&&(ht((function(t){var e;f.appendChild(t).innerHTML="<a id='"+x+"'></a><select id='"+x+"-\r\\' msallowcapture=''><option selected=''></option></select>",t.querySelectorAll("[msallowcapture^='']").length&&g.push("[*^$]=[\\x20\\t\\r\\n\\f]*(?:''|\"\")"),t.querySelectorAll("[selected]").length||g.push("\\[[\\x20\\t\\r\\n\\f]*(?:value|"+O+")"),t.querySelectorAll("[id~="+x+"-]").length||g.push("~="),(e=p.createElement("input")).setAttribute("name",""),t.appendChild(e),t.querySelectorAll("[name='']").length||g.push("\\[[\\x20\\t\\r\\n\\f]*name[\\x20\\t\\r\\n\\f]*=[\\x20\\t\\r\\n\\f]*(?:''|\"\")"),t.querySelectorAll(":checked").length||g.push(":checked"),t.querySelectorAll("a#"+x+"+*").length||g.push(".#.+[+~]"),t.querySelectorAll("\\\f"),g.push("[\\r\\n\\f]")})),ht((function(t){t.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var e=p.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&g.push("name[\\x20\\t\\r\\n\\f]*[*^$|!~]?="),2!==t.querySelectorAll(":enabled").length&&g.push(":enabled",":disabled"),f.appendChild(t).disabled=!0,2!==t.querySelectorAll(":disabled").length&&g.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),g.push(",.*:")}))),(i.matchesSelector=Q.test(v=f.matches||f.webkitMatchesSelector||f.mozMatchesSelector||f.oMatchesSelector||f.msMatchesSelector))&&ht((function(t){i.disconnectedMatch=v.call(t,"*"),v.call(t,"[s!='']:x"),y.push("!=",N)})),g=g.length&&new RegExp(g.join("|")),y=y.length&&new RegExp(y.join("|")),e=Q.test(f.compareDocumentPosition),b=e||Q.test(f.contains)?function(t,e){var i=9===t.nodeType?t.documentElement:t,n=e&&e.parentNode;return t===n||!(!n||1!==n.nodeType||!(i.contains?i.contains(n):t.compareDocumentPosition&&16&t.compareDocumentPosition(n)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},M=e?function(t,e){if(t===e)return u=!0,0;var n=!t.compareDocumentPosition-!e.compareDocumentPosition;return n||(1&(n=(t.ownerDocument||t)==(e.ownerDocument||e)?t.compareDocumentPosition(e):1)||!i.sortDetached&&e.compareDocumentPosition(t)===n?t==p||t.ownerDocument==$&&b($,t)?-1:e==p||e.ownerDocument==$&&b($,e)?1:h?L(h,t)-L(h,e):0:4&n?-1:1)}:function(t,e){if(t===e)return u=!0,0;var i,n=0,o=t.parentNode,r=e.parentNode,s=[t],a=[e];if(!o||!r)return t==p?-1:e==p?1:o?-1:r?1:h?L(h,t)-L(h,e):0;if(o===r)return dt(t,e);for(i=t;i=i.parentNode;)s.unshift(i);for(i=e;i=i.parentNode;)a.unshift(i);for(;s[n]===a[n];)n++;return n?dt(s[n],a[n]):s[n]==$?-1:a[n]==$?1:0},p):p},at.matches=function(t,e){return at(t,null,null,e)},at.matchesSelector=function(t,e){if(d(t),i.matchesSelector&&m&&!T[e+" "]&&(!y||!y.test(e))&&(!g||!g.test(e)))try{var n=v.call(t,e);if(n||i.disconnectedMatch||t.document&&11!==t.document.nodeType)return n}catch(t){T(e,!0)}return at(e,p,null,[t]).length>0},at.contains=function(t,e){return(t.ownerDocument||t)!=p&&d(t),b(t,e)},at.attr=function(t,e){(t.ownerDocument||t)!=p&&d(t);var o=n.attrHandle[e.toLowerCase()],r=o&&P.call(n.attrHandle,e.toLowerCase())?o(t,e,!m):void 0;return void 0!==r?r:i.attributes||!m?t.getAttribute(e):(r=t.getAttributeNode(e))&&r.specified?r.value:null},at.escape=function(t){return(t+"").replace(nt,ot)},at.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},at.uniqueSort=function(t){var e,n=[],o=0,r=0;if(u=!i.detectDuplicates,h=!i.sortStable&&t.slice(0),t.sort(M),u){for(;e=t[r++];)e===t[r]&&(o=n.push(r));for(;o--;)t.splice(n[o],1)}return h=null,t},o=at.getText=function(t){var e,i="",n=0,r=t.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)i+=o(t)}else if(3===r||4===r)return t.nodeValue}else for(;e=t[n++];)i+=o(e);return i},n=at.selectors={cacheLength:50,createPseudo:ct,match:X,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(et,it),t[3]=(t[3]||t[4]||t[5]||"").replace(et,it),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||at.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&at.error(t[0]),t},PSEUDO:function(t){var e,i=!t[6]&&t[2];return X.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":i&&U.test(i)&&(e=s(i,!0))&&(e=i.indexOf(")",i.length-e)-i.length)&&(t[0]=t[0].slice(0,e),t[2]=i.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(et,it).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=k[t+" "];return e||(e=new RegExp("(^|[\\x20\\t\\r\\n\\f])"+t+"("+z+"|$)"))&&k(t,(function(t){return e.test("string"==typeof t.className&&t.className||void 0!==t.getAttribute&&t.getAttribute("class")||"")}))},ATTR:function(t,e,i){return function(n){var o=at.attr(n,t);return null==o?"!="===e:!e||(o+="","="===e?o===i:"!="===e?o!==i:"^="===e?i&&0===o.indexOf(i):"*="===e?i&&o.indexOf(i)>-1:"$="===e?i&&o.slice(-i.length)===i:"~="===e?(" "+o.replace(H," ")+" ").indexOf(i)>-1:"|="===e&&(o===i||o.slice(0,i.length+1)===i+"-"))}},CHILD:function(t,e,i,n,o){var r="nth"!==t.slice(0,3),s="last"!==t.slice(-4),a="of-type"===e;return 1===n&&0===o?function(t){return!!t.parentNode}:function(e,i,l){var c,h,u,d,p,f,m=r!==s?"nextSibling":"previousSibling",g=e.parentNode,y=a&&e.nodeName.toLowerCase(),v=!l&&!a,b=!1;if(g){if(r){for(;m;){for(d=e;d=d[m];)if(a?d.nodeName.toLowerCase()===y:1===d.nodeType)return!1;f=m="only"===t&&!f&&"nextSibling"}return!0}if(f=[s?g.firstChild:g.lastChild],s&&v){for(b=(p=(c=(h=(u=(d=g)[x]||(d[x]={}))[d.uniqueID]||(u[d.uniqueID]={}))[t]||[])[0]===w&&c[1])&&c[2],d=p&&g.childNodes[p];d=++p&&d&&d[m]||(b=p=0)||f.pop();)if(1===d.nodeType&&++b&&d===e){h[t]=[w,p,b];break}}else if(v&&(b=p=(c=(h=(u=(d=e)[x]||(d[x]={}))[d.uniqueID]||(u[d.uniqueID]={}))[t]||[])[0]===w&&c[1]),!1===b)for(;(d=++p&&d&&d[m]||(b=p=0)||f.pop())&&((a?d.nodeName.toLowerCase()!==y:1!==d.nodeType)||!++b||(v&&((h=(u=d[x]||(d[x]={}))[d.uniqueID]||(u[d.uniqueID]={}))[t]=[w,b]),d!==e)););return(b-=o)===n||b%n==0&&b/n>=0}}},PSEUDO:function(t,e){var i,o=n.pseudos[t]||n.setFilters[t.toLowerCase()]||at.error("unsupported pseudo: "+t);return o[x]?o(e):o.length>1?(i=[t,t,"",e],n.setFilters.hasOwnProperty(t.toLowerCase())?ct((function(t,i){for(var n,r=o(t,e),s=r.length;s--;)t[n=L(t,r[s])]=!(i[n]=r[s])})):function(t){return o(t,0,i)}):o}},pseudos:{not:ct((function(t){var e=[],i=[],n=a(t.replace(W,"$1"));return n[x]?ct((function(t,e,i,o){for(var r,s=n(t,null,o,[]),a=t.length;a--;)(r=s[a])&&(t[a]=!(e[a]=r))})):function(t,o,r){return e[0]=t,n(e,null,r,i),e[0]=null,!i.pop()}})),has:ct((function(t){return function(e){return at(t,e).length>0}})),contains:ct((function(t){return t=t.replace(et,it),function(e){return(e.textContent||o(e)).indexOf(t)>-1}})),lang:ct((function(t){return q.test(t||"")||at.error("unsupported lang: "+t),t=t.replace(et,it).toLowerCase(),function(e){var i;do{if(i=m?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(i=i.toLowerCase())===t||0===i.indexOf(t+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}})),target:function(e){var i=t.location&&t.location.hash;return i&&i.slice(1)===e.id},root:function(t){return t===f},focus:function(t){return t===p.activeElement&&(!p.hasFocus||p.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:mt(!1),disabled:mt(!0),checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,!0===t.selected},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!n.pseudos.empty(t)},header:function(t){return K.test(t.nodeName)},input:function(t){return Z.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:gt((function(){return[0]})),last:gt((function(t,e){return[e-1]})),eq:gt((function(t,e,i){return[i<0?i+e:i]})),even:gt((function(t,e){for(var i=0;i<e;i+=2)t.push(i);return t})),odd:gt((function(t,e){for(var i=1;i<e;i+=2)t.push(i);return t})),lt:gt((function(t,e,i){for(var n=i<0?i+e:i>e?e:i;--n>=0;)t.push(n);return t})),gt:gt((function(t,e,i){for(var n=i<0?i+e:i;++n<e;)t.push(n);return t}))}},n.pseudos.nth=n.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})n.pseudos[e]=pt(e);for(e in{submit:!0,reset:!0})n.pseudos[e]=ft(e);function vt(){}function bt(t){for(var e=0,i=t.length,n="";e<i;e++)n+=t[e].value;return n}function xt(t,e,i){var n=e.dir,o=e.next,r=o||n,s=i&&"parentNode"===r,a=_++;return e.first?function(e,i,o){for(;e=e[n];)if(1===e.nodeType||s)return t(e,i,o);return!1}:function(e,i,l){var c,h,u,d=[w,a];if(l){for(;e=e[n];)if((1===e.nodeType||s)&&t(e,i,l))return!0}else for(;e=e[n];)if(1===e.nodeType||s)if(h=(u=e[x]||(e[x]={}))[e.uniqueID]||(u[e.uniqueID]={}),o&&o===e.nodeName.toLowerCase())e=e[n]||e;else{if((c=h[r])&&c[0]===w&&c[1]===a)return d[2]=c[2];if(h[r]=d,d[2]=t(e,i,l))return!0}return!1}}function $t(t){return t.length>1?function(e,i,n){for(var o=t.length;o--;)if(!t[o](e,i,n))return!1;return!0}:t[0]}function wt(t,e,i,n,o){for(var r,s=[],a=0,l=t.length,c=null!=e;a<l;a++)(r=t[a])&&(i&&!i(r,n,o)||(s.push(r),c&&e.push(a)));return s}function _t(t,e,i,n,o,r){return n&&!n[x]&&(n=_t(n)),o&&!o[x]&&(o=_t(o,r)),ct((function(r,s,a,l){var c,h,u,d=[],p=[],f=s.length,m=r||function(t,e,i){for(var n=0,o=e.length;n<o;n++)at(t,e[n],i);return i}(e||"*",a.nodeType?[a]:a,[]),g=!t||!r&&e?m:wt(m,d,t,a,l),y=i?o||(r?t:f||n)?[]:s:g;if(i&&i(g,y,a,l),n)for(c=wt(y,p),n(c,[],a,l),h=c.length;h--;)(u=c[h])&&(y[p[h]]=!(g[p[h]]=u));if(r){if(o||t){if(o){for(c=[],h=y.length;h--;)(u=y[h])&&c.push(g[h]=u);o(null,y=[],c,l)}for(h=y.length;h--;)(u=y[h])&&(c=o?L(r,u):d[h])>-1&&(r[c]=!(s[c]=u))}}else y=wt(y===s?y.splice(f,y.length):y),o?o(null,s,y,l):D.apply(s,y)}))}function kt(t){for(var e,i,o,r=t.length,s=n.relative[t[0].type],a=s||n.relative[" "],l=s?1:0,h=xt((function(t){return t===e}),a,!0),u=xt((function(t){return L(e,t)>-1}),a,!0),d=[function(t,i,n){var o=!s&&(n||i!==c)||((e=i).nodeType?h(t,i,n):u(t,i,n));return e=null,o}];l<r;l++)if(i=n.relative[t[l].type])d=[xt($t(d),i)];else{if((i=n.filter[t[l].type].apply(null,t[l].matches))[x]){for(o=++l;o<r&&!n.relative[t[o].type];o++);return _t(l>1&&$t(d),l>1&&bt(t.slice(0,l-1).concat({value:" "===t[l-2].type?"*":""})).replace(W,"$1"),i,l<o&&kt(t.slice(l,o)),o<r&&kt(t=t.slice(o)),o<r&&bt(t))}d.push(i)}return $t(d)}return vt.prototype=n.filters=n.pseudos,n.setFilters=new vt,s=at.tokenize=function(t,e){var i,o,r,s,a,l,c,h=S[t+" "];if(h)return e?0:h.slice(0);for(a=t,l=[],c=n.preFilter;a;){for(s in i&&!(o=j.exec(a))||(o&&(a=a.slice(o[0].length)||a),l.push(r=[])),i=!1,(o=Y.exec(a))&&(i=o.shift(),r.push({value:i,type:o[0].replace(W," ")}),a=a.slice(i.length)),n.filter)!(o=X[s].exec(a))||c[s]&&!(o=c[s](o))||(i=o.shift(),r.push({value:i,type:s,matches:o}),a=a.slice(i.length));if(!i)break}return e?a.length:a?at.error(t):S(t,l).slice(0)},a=at.compile=function(t,e){var i,o=[],r=[],a=C[t+" "];if(!a){for(e||(e=s(t)),i=e.length;i--;)(a=kt(e[i]))[x]?o.push(a):r.push(a);a=C(t,function(t,e){var i=e.length>0,o=t.length>0,r=function(r,s,a,l,h){var u,f,g,y=0,v="0",b=r&&[],x=[],$=c,_=r||o&&n.find.TAG("*",h),k=w+=null==$?1:Math.random()||.1,S=_.length;for(h&&(c=s==p||s||h);v!==S&&null!=(u=_[v]);v++){if(o&&u){for(f=0,s||u.ownerDocument==p||(d(u),a=!m);g=t[f++];)if(g(u,s||p,a)){l.push(u);break}h&&(w=k)}i&&((u=!g&&u)&&y--,r&&b.push(u))}if(y+=v,i&&v!==y){for(f=0;g=e[f++];)g(b,x,s,a);if(r){if(y>0)for(;v--;)b[v]||x[v]||(x[v]=I.call(l));x=wt(x)}D.apply(l,x),h&&!r&&x.length>0&&y+e.length>1&&at.uniqueSort(l)}return h&&(w=k,c=$),b};return i?ct(r):r}(r,o)),a.selector=t}return a},l=at.select=function(t,e,i,o){var r,l,c,h,u,d="function"==typeof t&&t,p=!o&&s(t=d.selector||t);if(i=i||[],1===p.length){if((l=p[0]=p[0].slice(0)).length>2&&"ID"===(c=l[0]).type&&9===e.nodeType&&m&&n.relative[l[1].type]){if(!(e=(n.find.ID(c.matches[0].replace(et,it),e)||[])[0]))return i;d&&(e=e.parentNode),t=t.slice(l.shift().value.length)}for(r=X.needsContext.test(t)?0:l.length;r--&&(c=l[r],!n.relative[h=c.type]);)if((u=n.find[h])&&(o=u(c.matches[0].replace(et,it),tt.test(l[0].type)&&yt(e.parentNode)||e))){if(l.splice(r,1),!(t=o.length&&bt(l)))return D.apply(i,o),i;break}}return(d||a(t,p))(o,e,!m,i,!e||tt.test(t)&&yt(e.parentNode)||e),i},i.sortStable=x.split("").sort(M).join("")===x,i.detectDuplicates=!!u,d(),i.sortDetached=ht((function(t){return 1&t.compareDocumentPosition(p.createElement("fieldset"))})),ht((function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")}))||ut("type|href|height|width",(function(t,e,i){if(!i)return t.getAttribute(e,"type"===e.toLowerCase()?1:2)})),i.attributes&&ht((function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")}))||ut("value",(function(t,e,i){if(!i&&"input"===t.nodeName.toLowerCase())return t.defaultValue})),ht((function(t){return null==t.getAttribute("disabled")}))||ut(O,(function(t,e,i){var n;if(!i)return!0===t[e]?e.toLowerCase():(n=t.getAttributeNode(e))&&n.specified?n.value:null})),at}(t);$.find=_,$.expr=_.selectors,$.expr[":"]=$.expr.pseudos,$.uniqueSort=$.unique=_.uniqueSort,$.text=_.getText,$.isXMLDoc=_.isXML,$.contains=_.contains,$.escapeSelector=_.escape;var k=function(t,e,i){for(var n=[],o=void 0!==i;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(o&&$(t).is(i))break;n.push(t)}return n},S=function(t,e){for(var i=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&i.push(t);return i},C=$.expr.match.needsContext;function T(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()}var M=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function P(t,e,i){return f(e)?$.grep(t,(function(t,n){return!!e.call(t,n,t)!==i})):e.nodeType?$.grep(t,(function(t){return t===e!==i})):"string"!=typeof e?$.grep(t,(function(t){return a.call(e,t)>-1!==i})):$.filter(e,t,i)}$.filter=function(t,e,i){var n=e[0];return i&&(t=":not("+t+")"),1===e.length&&1===n.nodeType?$.find.matchesSelector(n,t)?[n]:[]:$.find.matches(t,$.grep(e,(function(t){return 1===t.nodeType})))},$.fn.extend({find:function(t){var e,i,n=this.length,o=this;if("string"!=typeof t)return this.pushStack($(t).filter((function(){for(e=0;e<n;e++)if($.contains(o[e],this))return!0})));for(i=this.pushStack([]),e=0;e<n;e++)$.find(t,o[e],i);return n>1?$.uniqueSort(i):i},filter:function(t){return this.pushStack(P(this,t||[],!1))},not:function(t){return this.pushStack(P(this,t||[],!0))},is:function(t){return!!P(this,"string"==typeof t&&C.test(t)?$(t):t||[],!1).length}});var E,I=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;($.fn.init=function(t,e,i){var n,o;if(!t)return this;if(i=i||E,"string"==typeof t){if(!(n="<"===t[0]&&">"===t[t.length-1]&&t.length>=3?[null,t,null]:I.exec(t))||!n[1]&&e)return!e||e.jquery?(e||i).find(t):this.constructor(e).find(t);if(n[1]){if(e=e instanceof $?e[0]:e,$.merge(this,$.parseHTML(n[1],e&&e.nodeType?e.ownerDocument||e:g,!0)),M.test(n[1])&&$.isPlainObject(e))for(n in e)f(this[n])?this[n](e[n]):this.attr(n,e[n]);return this}return(o=g.getElementById(n[2]))&&(this[0]=o,this.length=1),this}return t.nodeType?(this[0]=t,this.length=1,this):f(t)?void 0!==i.ready?i.ready(t):t($):$.makeArray(t,this)}).prototype=$.fn,E=$(g);var A=/^(?:parents|prev(?:Until|All))/,D={children:!0,contents:!0,next:!0,prev:!0};function R(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}$.fn.extend({has:function(t){var e=$(t,this),i=e.length;return this.filter((function(){for(var t=0;t<i;t++)if($.contains(this,e[t]))return!0}))},closest:function(t,e){var i,n=0,o=this.length,r=[],s="string"!=typeof t&&$(t);if(!C.test(t))for(;n<o;n++)for(i=this[n];i&&i!==e;i=i.parentNode)if(i.nodeType<11&&(s?s.index(i)>-1:1===i.nodeType&&$.find.matchesSelector(i,t))){r.push(i);break}return this.pushStack(r.length>1?$.uniqueSort(r):r)},index:function(t){return t?"string"==typeof t?a.call($(t),this[0]):a.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack($.uniqueSort($.merge(this.get(),$(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),$.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return k(t,"parentNode")},parentsUntil:function(t,e,i){return k(t,"parentNode",i)},next:function(t){return R(t,"nextSibling")},prev:function(t){return R(t,"previousSibling")},nextAll:function(t){return k(t,"nextSibling")},prevAll:function(t){return k(t,"previousSibling")},nextUntil:function(t,e,i){return k(t,"nextSibling",i)},prevUntil:function(t,e,i){return k(t,"previousSibling",i)},siblings:function(t){return S((t.parentNode||{}).firstChild,t)},children:function(t){return S(t.firstChild)},contents:function(t){return null!=t.contentDocument&&n(t.contentDocument)?t.contentDocument:(T(t,"template")&&(t=t.content||t),$.merge([],t.childNodes))}},(function(t,e){$.fn[t]=function(i,n){var o=$.map(this,e,i);return"Until"!==t.slice(-5)&&(n=i),n&&"string"==typeof n&&(o=$.filter(n,o)),this.length>1&&(D[t]||$.uniqueSort(o),A.test(t)&&o.reverse()),this.pushStack(o)}}));var L=/[^\x20\t\r\n\f]+/g;function O(t){return t}function z(t){throw t}function F(t,e,i,n){var o;try{t&&f(o=t.promise)?o.call(t).done(e).fail(i):t&&f(o=t.then)?o.call(t,e,i):e.apply(void 0,[t].slice(n))}catch(t){i.apply(void 0,[t])}}$.Callbacks=function(t){t="string"==typeof t?function(t){var e={};return $.each(t.match(L)||[],(function(t,i){e[i]=!0})),e}(t):$.extend({},t);var e,i,n,o,r=[],s=[],a=-1,l=function(){for(o=o||t.once,n=e=!0;s.length;a=-1)for(i=s.shift();++a<r.length;)!1===r[a].apply(i[0],i[1])&&t.stopOnFalse&&(a=r.length,i=!1);t.memory||(i=!1),e=!1,o&&(r=i?[]:"")},c={add:function(){return r&&(i&&!e&&(a=r.length-1,s.push(i)),function e(i){$.each(i,(function(i,n){f(n)?t.unique&&c.has(n)||r.push(n):n&&n.length&&"string"!==b(n)&&e(n)}))}(arguments),i&&!e&&l()),this},remove:function(){return $.each(arguments,(function(t,e){for(var i;(i=$.inArray(e,r,i))>-1;)r.splice(i,1),i<=a&&a--})),this},has:function(t){return t?$.inArray(t,r)>-1:r.length>0},empty:function(){return r&&(r=[]),this},disable:function(){return o=s=[],r=i="",this},disabled:function(){return!r},lock:function(){return o=s=[],i||e||(r=i=""),this},locked:function(){return!!o},fireWith:function(t,i){return o||(i=[t,(i=i||[]).slice?i.slice():i],s.push(i),e||l()),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!n}};return c},$.extend({Deferred:function(e){var i=[["notify","progress",$.Callbacks("memory"),$.Callbacks("memory"),2],["resolve","done",$.Callbacks("once memory"),$.Callbacks("once memory"),0,"resolved"],["reject","fail",$.Callbacks("once memory"),$.Callbacks("once memory"),1,"rejected"]],n="pending",o={state:function(){return n},always:function(){return r.done(arguments).fail(arguments),this},catch:function(t){return o.then(null,t)},pipe:function(){var t=arguments;return $.Deferred((function(e){$.each(i,(function(i,n){var o=f(t[n[4]])&&t[n[4]];r[n[1]]((function(){var t=o&&o.apply(this,arguments);t&&f(t.promise)?t.promise().progress(e.notify).done(e.resolve).fail(e.reject):e[n[0]+"With"](this,o?[t]:arguments)}))})),t=null})).promise()},then:function(e,n,o){var r=0;function s(e,i,n,o){return function(){var a=this,l=arguments,c=function(){var t,c;if(!(e<r)){if((t=n.apply(a,l))===i.promise())throw new TypeError("Thenable self-resolution");c=t&&("object"==typeof t||"function"==typeof t)&&t.then,f(c)?o?c.call(t,s(r,i,O,o),s(r,i,z,o)):(r++,c.call(t,s(r,i,O,o),s(r,i,z,o),s(r,i,O,i.notifyWith))):(n!==O&&(a=void 0,l=[t]),(o||i.resolveWith)(a,l))}},h=o?c:function(){try{c()}catch(t){$.Deferred.exceptionHook&&$.Deferred.exceptionHook(t,h.stackTrace),e+1>=r&&(n!==z&&(a=void 0,l=[t]),i.rejectWith(a,l))}};e?h():($.Deferred.getStackHook&&(h.stackTrace=$.Deferred.getStackHook()),t.setTimeout(h))}}return $.Deferred((function(t){i[0][3].add(s(0,t,f(o)?o:O,t.notifyWith)),i[1][3].add(s(0,t,f(e)?e:O)),i[2][3].add(s(0,t,f(n)?n:z))})).promise()},promise:function(t){return null!=t?$.extend(t,o):o}},r={};return $.each(i,(function(t,e){var s=e[2],a=e[5];o[e[1]]=s.add,a&&s.add((function(){n=a}),i[3-t][2].disable,i[3-t][3].disable,i[0][2].lock,i[0][3].lock),s.add(e[3].fire),r[e[0]]=function(){return r[e[0]+"With"](this===r?void 0:this,arguments),this},r[e[0]+"With"]=s.fireWith})),o.promise(r),e&&e.call(r,r),r},when:function(t){var e=arguments.length,i=e,n=Array(i),r=o.call(arguments),s=$.Deferred(),a=function(t){return function(i){n[t]=this,r[t]=arguments.length>1?o.call(arguments):i,--e||s.resolveWith(n,r)}};if(e<=1&&(F(t,s.done(a(i)).resolve,s.reject,!e),"pending"===s.state()||f(r[i]&&r[i].then)))return s.then();for(;i--;)F(r[i],a(i),s.reject);return s.promise()}});var B=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;$.Deferred.exceptionHook=function(e,i){t.console&&t.console.warn&&e&&B.test(e.name)&&t.console.warn("jQuery.Deferred exception: "+e.message,e.stack,i)},$.readyException=function(e){t.setTimeout((function(){throw e}))};var N=$.Deferred();function H(){g.removeEventListener("DOMContentLoaded",H),t.removeEventListener("load",H),$.ready()}$.fn.ready=function(t){return N.then(t).catch((function(t){$.readyException(t)})),this},$.extend({isReady:!1,readyWait:1,ready:function(t){(!0===t?--$.readyWait:$.isReady)||($.isReady=!0,!0!==t&&--$.readyWait>0||N.resolveWith(g,[$]))}}),$.ready.then=N.then,"complete"===g.readyState||"loading"!==g.readyState&&!g.documentElement.doScroll?t.setTimeout($.ready):(g.addEventListener("DOMContentLoaded",H),t.addEventListener("load",H));var W=function(t,e,i,n,o,r,s){var a=0,l=t.length,c=null==i;if("object"===b(i))for(a in o=!0,i)W(t,e,a,i[a],!0,r,s);else if(void 0!==n&&(o=!0,f(n)||(s=!0),c&&(s?(e.call(t,n),e=null):(c=e,e=function(t,e,i){return c.call($(t),i)})),e))for(;a<l;a++)e(t[a],i,s?n:n.call(t[a],a,e(t[a],i)));return o?t:c?e.call(t):l?e(t[0],i):r},j=/^-ms-/,Y=/-([a-z])/g;function V(t,e){return e.toUpperCase()}function U(t){return t.replace(j,"ms-").replace(Y,V)}var q=function(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType};function X(){this.expando=$.expando+X.uid++}X.uid=1,X.prototype={cache:function(t){var e=t[this.expando];return e||(e={},q(t)&&(t.nodeType?t[this.expando]=e:Object.defineProperty(t,this.expando,{value:e,configurable:!0}))),e},set:function(t,e,i){var n,o=this.cache(t);if("string"==typeof e)o[U(e)]=i;else for(n in e)o[U(n)]=e[n];return o},get:function(t,e){return void 0===e?this.cache(t):t[this.expando]&&t[this.expando][U(e)]},access:function(t,e,i){return void 0===e||e&&"string"==typeof e&&void 0===i?this.get(t,e):(this.set(t,e,i),void 0!==i?i:e)},remove:function(t,e){var i,n=t[this.expando];if(void 0!==n){if(void 0!==e){i=(e=Array.isArray(e)?e.map(U):(e=U(e))in n?[e]:e.match(L)||[]).length;for(;i--;)delete n[e[i]]}(void 0===e||$.isEmptyObject(n))&&(t.nodeType?t[this.expando]=void 0:delete t[this.expando])}},hasData:function(t){var e=t[this.expando];return void 0!==e&&!$.isEmptyObject(e)}};var G=new X,Z=new X,K=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Q=/[A-Z]/g;function J(t,e,i){var n;if(void 0===i&&1===t.nodeType)if(n="data-"+e.replace(Q,"-$&").toLowerCase(),"string"==typeof(i=t.getAttribute(n))){try{i=function(t){return"true"===t||"false"!==t&&("null"===t?null:t===+t+""?+t:K.test(t)?JSON.parse(t):t)}(i)}catch(t){}Z.set(t,e,i)}else i=void 0;return i}$.extend({hasData:function(t){return Z.hasData(t)||G.hasData(t)},data:function(t,e,i){return Z.access(t,e,i)},removeData:function(t,e){Z.remove(t,e)},_data:function(t,e,i){return G.access(t,e,i)},_removeData:function(t,e){G.remove(t,e)}}),$.fn.extend({data:function(t,e){var i,n,o,r=this[0],s=r&&r.attributes;if(void 0===t){if(this.length&&(o=Z.get(r),1===r.nodeType&&!G.get(r,"hasDataAttrs"))){for(i=s.length;i--;)s[i]&&0===(n=s[i].name).indexOf("data-")&&(n=U(n.slice(5)),J(r,n,o[n]));G.set(r,"hasDataAttrs",!0)}return o}return"object"==typeof t?this.each((function(){Z.set(this,t)})):W(this,(function(e){var i;if(r&&void 0===e)return void 0!==(i=Z.get(r,t))||void 0!==(i=J(r,t))?i:void 0;this.each((function(){Z.set(this,t,e)}))}),null,e,arguments.length>1,null,!0)},removeData:function(t){return this.each((function(){Z.remove(this,t)}))}}),$.extend({queue:function(t,e,i){var n;if(t)return e=(e||"fx")+"queue",n=G.get(t,e),i&&(!n||Array.isArray(i)?n=G.access(t,e,$.makeArray(i)):n.push(i)),n||[]},dequeue:function(t,e){e=e||"fx";var i=$.queue(t,e),n=i.length,o=i.shift(),r=$._queueHooks(t,e);"inprogress"===o&&(o=i.shift(),n--),o&&("fx"===e&&i.unshift("inprogress"),delete r.stop,o.call(t,(function(){$.dequeue(t,e)}),r)),!n&&r&&r.empty.fire()},_queueHooks:function(t,e){var i=e+"queueHooks";return G.get(t,i)||G.access(t,i,{empty:$.Callbacks("once memory").add((function(){G.remove(t,[e+"queue",i])}))})}}),$.fn.extend({queue:function(t,e){var i=2;return"string"!=typeof t&&(e=t,t="fx",i--),arguments.length<i?$.queue(this[0],t):void 0===e?this:this.each((function(){var i=$.queue(this,t,e);$._queueHooks(this,t),"fx"===t&&"inprogress"!==i[0]&&$.dequeue(this,t)}))},dequeue:function(t){return this.each((function(){$.dequeue(this,t)}))},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var i,n=1,o=$.Deferred(),r=this,s=this.length,a=function(){--n||o.resolveWith(r,[r])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";s--;)(i=G.get(r[s],t+"queueHooks"))&&i.empty&&(n++,i.empty.add(a));return a(),o.promise(e)}});var tt=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,et=new RegExp("^(?:([+-])=|)("+tt+")([a-z%]*)$","i"),it=["Top","Right","Bottom","Left"],nt=g.documentElement,ot=function(t){return $.contains(t.ownerDocument,t)},rt={composed:!0};nt.getRootNode&&(ot=function(t){return $.contains(t.ownerDocument,t)||t.getRootNode(rt)===t.ownerDocument});var st=function(t,e){return"none"===(t=e||t).style.display||""===t.style.display&&ot(t)&&"none"===$.css(t,"display")};function at(t,e,i,n){var o,r,s=20,a=n?function(){return n.cur()}:function(){return $.css(t,e,"")},l=a(),c=i&&i[3]||($.cssNumber[e]?"":"px"),h=t.nodeType&&($.cssNumber[e]||"px"!==c&&+l)&&et.exec($.css(t,e));if(h&&h[3]!==c){for(l/=2,c=c||h[3],h=+l||1;s--;)$.style(t,e,h+c),(1-r)*(1-(r=a()/l||.5))<=0&&(s=0),h/=r;h*=2,$.style(t,e,h+c),i=i||[]}return i&&(h=+h||+l||0,o=i[1]?h+(i[1]+1)*i[2]:+i[2],n&&(n.unit=c,n.start=h,n.end=o)),o}var lt={};function ct(t){var e,i=t.ownerDocument,n=t.nodeName,o=lt[n];return o||(e=i.body.appendChild(i.createElement(n)),o=$.css(e,"display"),e.parentNode.removeChild(e),"none"===o&&(o="block"),lt[n]=o,o)}function ht(t,e){for(var i,n,o=[],r=0,s=t.length;r<s;r++)(n=t[r]).style&&(i=n.style.display,e?("none"===i&&(o[r]=G.get(n,"display")||null,o[r]||(n.style.display="")),""===n.style.display&&st(n)&&(o[r]=ct(n))):"none"!==i&&(o[r]="none",G.set(n,"display",i)));for(r=0;r<s;r++)null!=o[r]&&(t[r].style.display=o[r]);return t}$.fn.extend({show:function(){return ht(this,!0)},hide:function(){return ht(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each((function(){st(this)?$(this).show():$(this).hide()}))}});var ut,dt,pt=/^(?:checkbox|radio)$/i,ft=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,mt=/^$|^module$|\/(?:java|ecma)script/i;ut=g.createDocumentFragment().appendChild(g.createElement("div")),(dt=g.createElement("input")).setAttribute("type","radio"),dt.setAttribute("checked","checked"),dt.setAttribute("name","t"),ut.appendChild(dt),p.checkClone=ut.cloneNode(!0).cloneNode(!0).lastChild.checked,ut.innerHTML="<textarea>x</textarea>",p.noCloneChecked=!!ut.cloneNode(!0).lastChild.defaultValue,ut.innerHTML="<option></option>",p.option=!!ut.lastChild;var gt={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function yt(t,e){var i;return i=void 0!==t.getElementsByTagName?t.getElementsByTagName(e||"*"):void 0!==t.querySelectorAll?t.querySelectorAll(e||"*"):[],void 0===e||e&&T(t,e)?$.merge([t],i):i}function vt(t,e){for(var i=0,n=t.length;i<n;i++)G.set(t[i],"globalEval",!e||G.get(e[i],"globalEval"))}gt.tbody=gt.tfoot=gt.colgroup=gt.caption=gt.thead,gt.th=gt.td,p.option||(gt.optgroup=gt.option=[1,"<select multiple='multiple'>","</select>"]);var bt=/<|&#?\w+;/;function xt(t,e,i,n,o){for(var r,s,a,l,c,h,u=e.createDocumentFragment(),d=[],p=0,f=t.length;p<f;p++)if((r=t[p])||0===r)if("object"===b(r))$.merge(d,r.nodeType?[r]:r);else if(bt.test(r)){for(s=s||u.appendChild(e.createElement("div")),a=(ft.exec(r)||["",""])[1].toLowerCase(),l=gt[a]||gt._default,s.innerHTML=l[1]+$.htmlPrefilter(r)+l[2],h=l[0];h--;)s=s.lastChild;$.merge(d,s.childNodes),(s=u.firstChild).textContent=""}else d.push(e.createTextNode(r));for(u.textContent="",p=0;r=d[p++];)if(n&&$.inArray(r,n)>-1)o&&o.push(r);else if(c=ot(r),s=yt(u.appendChild(r),"script"),c&&vt(s),i)for(h=0;r=s[h++];)mt.test(r.type||"")&&i.push(r);return u}var $t=/^([^.]*)(?:\.(.+)|)/;function wt(){return!0}function _t(){return!1}function kt(t,e){return t===function(){try{return g.activeElement}catch(t){}}()==("focus"===e)}function St(t,e,i,n,o,r){var s,a;if("object"==typeof e){for(a in"string"!=typeof i&&(n=n||i,i=void 0),e)St(t,a,i,n,e[a],r);return t}if(null==n&&null==o?(o=i,n=i=void 0):null==o&&("string"==typeof i?(o=n,n=void 0):(o=n,n=i,i=void 0)),!1===o)o=_t;else if(!o)return t;return 1===r&&(s=o,o=function(t){return $().off(t),s.apply(this,arguments)},o.guid=s.guid||(s.guid=$.guid++)),t.each((function(){$.event.add(this,e,o,n,i)}))}function Ct(t,e,i){i?(G.set(t,e,!1),$.event.add(t,e,{namespace:!1,handler:function(t){var n,r,s=G.get(this,e);if(1&t.isTrigger&&this[e]){if(s.length)($.event.special[e]||{}).delegateType&&t.stopPropagation();else if(s=o.call(arguments),G.set(this,e,s),n=i(this,e),this[e](),s!==(r=G.get(this,e))||n?G.set(this,e,!1):r={},s!==r)return t.stopImmediatePropagation(),t.preventDefault(),r&&r.value}else s.length&&(G.set(this,e,{value:$.event.trigger($.extend(s[0],$.Event.prototype),s.slice(1),this)}),t.stopImmediatePropagation())}})):void 0===G.get(t,e)&&$.event.add(t,e,wt)}$.event={global:{},add:function(t,e,i,n,o){var r,s,a,l,c,h,u,d,p,f,m,g=G.get(t);if(q(t))for(i.handler&&(i=(r=i).handler,o=r.selector),o&&$.find.matchesSelector(nt,o),i.guid||(i.guid=$.guid++),(l=g.events)||(l=g.events=Object.create(null)),(s=g.handle)||(s=g.handle=function(e){return void 0!==$&&$.event.triggered!==e.type?$.event.dispatch.apply(t,arguments):void 0}),c=(e=(e||"").match(L)||[""]).length;c--;)p=m=(a=$t.exec(e[c])||[])[1],f=(a[2]||"").split(".").sort(),p&&(u=$.event.special[p]||{},p=(o?u.delegateType:u.bindType)||p,u=$.event.special[p]||{},h=$.extend({type:p,origType:m,data:n,handler:i,guid:i.guid,selector:o,needsContext:o&&$.expr.match.needsContext.test(o),namespace:f.join(".")},r),(d=l[p])||((d=l[p]=[]).delegateCount=0,u.setup&&!1!==u.setup.call(t,n,f,s)||t.addEventListener&&t.addEventListener(p,s)),u.add&&(u.add.call(t,h),h.handler.guid||(h.handler.guid=i.guid)),o?d.splice(d.delegateCount++,0,h):d.push(h),$.event.global[p]=!0)},remove:function(t,e,i,n,o){var r,s,a,l,c,h,u,d,p,f,m,g=G.hasData(t)&&G.get(t);if(g&&(l=g.events)){for(c=(e=(e||"").match(L)||[""]).length;c--;)if(p=m=(a=$t.exec(e[c])||[])[1],f=(a[2]||"").split(".").sort(),p){for(u=$.event.special[p]||{},d=l[p=(n?u.delegateType:u.bindType)||p]||[],a=a[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),s=r=d.length;r--;)h=d[r],!o&&m!==h.origType||i&&i.guid!==h.guid||a&&!a.test(h.namespace)||n&&n!==h.selector&&("**"!==n||!h.selector)||(d.splice(r,1),h.selector&&d.delegateCount--,u.remove&&u.remove.call(t,h));s&&!d.length&&(u.teardown&&!1!==u.teardown.call(t,f,g.handle)||$.removeEvent(t,p,g.handle),delete l[p])}else for(p in l)$.event.remove(t,p+e[c],i,n,!0);$.isEmptyObject(l)&&G.remove(t,"handle events")}},dispatch:function(t){var e,i,n,o,r,s,a=new Array(arguments.length),l=$.event.fix(t),c=(G.get(this,"events")||Object.create(null))[l.type]||[],h=$.event.special[l.type]||{};for(a[0]=l,e=1;e<arguments.length;e++)a[e]=arguments[e];if(l.delegateTarget=this,!h.preDispatch||!1!==h.preDispatch.call(this,l)){for(s=$.event.handlers.call(this,l,c),e=0;(o=s[e++])&&!l.isPropagationStopped();)for(l.currentTarget=o.elem,i=0;(r=o.handlers[i++])&&!l.isImmediatePropagationStopped();)l.rnamespace&&!1!==r.namespace&&!l.rnamespace.test(r.namespace)||(l.handleObj=r,l.data=r.data,void 0!==(n=(($.event.special[r.origType]||{}).handle||r.handler).apply(o.elem,a))&&!1===(l.result=n)&&(l.preventDefault(),l.stopPropagation()));return h.postDispatch&&h.postDispatch.call(this,l),l.result}},handlers:function(t,e){var i,n,o,r,s,a=[],l=e.delegateCount,c=t.target;if(l&&c.nodeType&&!("click"===t.type&&t.button>=1))for(;c!==this;c=c.parentNode||this)if(1===c.nodeType&&("click"!==t.type||!0!==c.disabled)){for(r=[],s={},i=0;i<l;i++)void 0===s[o=(n=e[i]).selector+" "]&&(s[o]=n.needsContext?$(o,this).index(c)>-1:$.find(o,this,null,[c]).length),s[o]&&r.push(n);r.length&&a.push({elem:c,handlers:r})}return c=this,l<e.length&&a.push({elem:c,handlers:e.slice(l)}),a},addProp:function(t,e){Object.defineProperty($.Event.prototype,t,{enumerable:!0,configurable:!0,get:f(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(t){return t[$.expando]?t:new $.Event(t)},special:{load:{noBubble:!0},click:{setup:function(t){var e=this||t;return pt.test(e.type)&&e.click&&T(e,"input")&&Ct(e,"click",wt),!1},trigger:function(t){var e=this||t;return pt.test(e.type)&&e.click&&T(e,"input")&&Ct(e,"click"),!0},_default:function(t){var e=t.target;return pt.test(e.type)&&e.click&&T(e,"input")&&G.get(e,"click")||T(e,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}}},$.removeEvent=function(t,e,i){t.removeEventListener&&t.removeEventListener(e,i)},$.Event=function(t,e){if(!(this instanceof $.Event))return new $.Event(t,e);t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&!1===t.returnValue?wt:_t,this.target=t.target&&3===t.target.nodeType?t.target.parentNode:t.target,this.currentTarget=t.currentTarget,this.relatedTarget=t.relatedTarget):this.type=t,e&&$.extend(this,e),this.timeStamp=t&&t.timeStamp||Date.now(),this[$.expando]=!0},$.Event.prototype={constructor:$.Event,isDefaultPrevented:_t,isPropagationStopped:_t,isImmediatePropagationStopped:_t,isSimulated:!1,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=wt,t&&!this.isSimulated&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=wt,t&&!this.isSimulated&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=wt,t&&!this.isSimulated&&t.stopImmediatePropagation(),this.stopPropagation()}},$.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},$.event.addProp),$.each({focus:"focusin",blur:"focusout"},(function(t,e){$.event.special[t]={setup:function(){return Ct(this,t,kt),!1},trigger:function(){return Ct(this,t),!0},_default:function(){return!0},delegateType:e}})),$.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},(function(t,e){$.event.special[t]={delegateType:e,bindType:e,handle:function(t){var i,n=this,o=t.relatedTarget,r=t.handleObj;return o&&(o===n||$.contains(n,o))||(t.type=r.origType,i=r.handler.apply(this,arguments),t.type=e),i}}})),$.fn.extend({on:function(t,e,i,n){return St(this,t,e,i,n)},one:function(t,e,i,n){return St(this,t,e,i,n,1)},off:function(t,e,i){var n,o;if(t&&t.preventDefault&&t.handleObj)return n=t.handleObj,$(t.delegateTarget).off(n.namespace?n.origType+"."+n.namespace:n.origType,n.selector,n.handler),this;if("object"==typeof t){for(o in t)this.off(o,e,t[o]);return this}return!1!==e&&"function"!=typeof e||(i=e,e=void 0),!1===i&&(i=_t),this.each((function(){$.event.remove(this,t,i,e)}))}});var Tt=/<script|<style|<link/i,Mt=/checked\s*(?:[^=]|=\s*.checked.)/i,Pt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Et(t,e){return T(t,"table")&&T(11!==e.nodeType?e:e.firstChild,"tr")&&$(t).children("tbody")[0]||t}function It(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function At(t){return"true/"===(t.type||"").slice(0,5)?t.type=t.type.slice(5):t.removeAttribute("type"),t}function Dt(t,e){var i,n,o,r,s,a;if(1===e.nodeType){if(G.hasData(t)&&(a=G.get(t).events))for(o in G.remove(e,"handle events"),a)for(i=0,n=a[o].length;i<n;i++)$.event.add(e,o,a[o][i]);Z.hasData(t)&&(r=Z.access(t),s=$.extend({},r),Z.set(e,s))}}function Rt(t,e){var i=e.nodeName.toLowerCase();"input"===i&&pt.test(t.type)?e.checked=t.checked:"input"!==i&&"textarea"!==i||(e.defaultValue=t.defaultValue)}function Lt(t,e,i,n){e=r(e);var o,s,a,l,c,h,u=0,d=t.length,m=d-1,g=e[0],y=f(g);if(y||d>1&&"string"==typeof g&&!p.checkClone&&Mt.test(g))return t.each((function(o){var r=t.eq(o);y&&(e[0]=g.call(this,o,r.html())),Lt(r,e,i,n)}));if(d&&(s=(o=xt(e,t[0].ownerDocument,!1,t,n)).firstChild,1===o.childNodes.length&&(o=s),s||n)){for(l=(a=$.map(yt(o,"script"),It)).length;u<d;u++)c=o,u!==m&&(c=$.clone(c,!0,!0),l&&$.merge(a,yt(c,"script"))),i.call(t[u],c,u);if(l)for(h=a[a.length-1].ownerDocument,$.map(a,At),u=0;u<l;u++)c=a[u],mt.test(c.type||"")&&!G.access(c,"globalEval")&&$.contains(h,c)&&(c.src&&"module"!==(c.type||"").toLowerCase()?$._evalUrl&&!c.noModule&&$._evalUrl(c.src,{nonce:c.nonce||c.getAttribute("nonce")},h):v(c.textContent.replace(Pt,""),c,h))}return t}function Ot(t,e,i){for(var n,o=e?$.filter(e,t):t,r=0;null!=(n=o[r]);r++)i||1!==n.nodeType||$.cleanData(yt(n)),n.parentNode&&(i&&ot(n)&&vt(yt(n,"script")),n.parentNode.removeChild(n));return t}$.extend({htmlPrefilter:function(t){return t},clone:function(t,e,i){var n,o,r,s,a=t.cloneNode(!0),l=ot(t);if(!(p.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||$.isXMLDoc(t)))for(s=yt(a),n=0,o=(r=yt(t)).length;n<o;n++)Rt(r[n],s[n]);if(e)if(i)for(r=r||yt(t),s=s||yt(a),n=0,o=r.length;n<o;n++)Dt(r[n],s[n]);else Dt(t,a);return(s=yt(a,"script")).length>0&&vt(s,!l&&yt(t,"script")),a},cleanData:function(t){for(var e,i,n,o=$.event.special,r=0;void 0!==(i=t[r]);r++)if(q(i)){if(e=i[G.expando]){if(e.events)for(n in e.events)o[n]?$.event.remove(i,n):$.removeEvent(i,n,e.handle);i[G.expando]=void 0}i[Z.expando]&&(i[Z.expando]=void 0)}}}),$.fn.extend({detach:function(t){return Ot(this,t,!0)},remove:function(t){return Ot(this,t)},text:function(t){return W(this,(function(t){return void 0===t?$.text(this):this.empty().each((function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=t)}))}),null,t,arguments.length)},append:function(){return Lt(this,arguments,(function(t){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Et(this,t).appendChild(t)}))},prepend:function(){return Lt(this,arguments,(function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=Et(this,t);e.insertBefore(t,e.firstChild)}}))},before:function(){return Lt(this,arguments,(function(t){this.parentNode&&this.parentNode.insertBefore(t,this)}))},after:function(){return Lt(this,arguments,(function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)}))},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&($.cleanData(yt(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map((function(){return $.clone(this,t,e)}))},html:function(t){return W(this,(function(t){var e=this[0]||{},i=0,n=this.length;if(void 0===t&&1===e.nodeType)return e.innerHTML;if("string"==typeof t&&!Tt.test(t)&&!gt[(ft.exec(t)||["",""])[1].toLowerCase()]){t=$.htmlPrefilter(t);try{for(;i<n;i++)1===(e=this[i]||{}).nodeType&&($.cleanData(yt(e,!1)),e.innerHTML=t);e=0}catch(t){}}e&&this.empty().append(t)}),null,t,arguments.length)},replaceWith:function(){var t=[];return Lt(this,arguments,(function(e){var i=this.parentNode;$.inArray(this,t)<0&&($.cleanData(yt(this)),i&&i.replaceChild(e,this))}),t)}}),$.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},(function(t,e){$.fn[t]=function(t){for(var i,n=[],o=$(t),r=o.length-1,a=0;a<=r;a++)i=a===r?this:this.clone(!0),$(o[a])[e](i),s.apply(n,i.get());return this.pushStack(n)}}));var zt=new RegExp("^("+tt+")(?!px)[a-z%]+$","i"),Ft=function(e){var i=e.ownerDocument.defaultView;return i&&i.opener||(i=t),i.getComputedStyle(e)},Bt=function(t,e,i){var n,o,r={};for(o in e)r[o]=t.style[o],t.style[o]=e[o];for(o in n=i.call(t),e)t.style[o]=r[o];return n},Nt=new RegExp(it.join("|"),"i");function Ht(t,e,i){var n,o,r,s,a=t.style;return(i=i||Ft(t))&&(""!==(s=i.getPropertyValue(e)||i[e])||ot(t)||(s=$.style(t,e)),!p.pixelBoxStyles()&&zt.test(s)&&Nt.test(e)&&(n=a.width,o=a.minWidth,r=a.maxWidth,a.minWidth=a.maxWidth=a.width=s,s=i.width,a.width=n,a.minWidth=o,a.maxWidth=r)),void 0!==s?s+"":s}function Wt(t,e){return{get:function(){if(!t())return(this.get=e).apply(this,arguments);delete this.get}}}!function(){function e(){if(h){c.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",h.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",nt.appendChild(c).appendChild(h);var e=t.getComputedStyle(h);n="1%"!==e.top,l=12===i(e.marginLeft),h.style.right="60%",s=36===i(e.right),o=36===i(e.width),h.style.position="absolute",r=12===i(h.offsetWidth/3),nt.removeChild(c),h=null}}function i(t){return Math.round(parseFloat(t))}var n,o,r,s,a,l,c=g.createElement("div"),h=g.createElement("div");h.style&&(h.style.backgroundClip="content-box",h.cloneNode(!0).style.backgroundClip="",p.clearCloneStyle="content-box"===h.style.backgroundClip,$.extend(p,{boxSizingReliable:function(){return e(),o},pixelBoxStyles:function(){return e(),s},pixelPosition:function(){return e(),n},reliableMarginLeft:function(){return e(),l},scrollboxSize:function(){return e(),r},reliableTrDimensions:function(){var e,i,n,o;return null==a&&(e=g.createElement("table"),i=g.createElement("tr"),n=g.createElement("div"),e.style.cssText="position:absolute;left:-11111px;border-collapse:separate",i.style.cssText="border:1px solid",i.style.height="1px",n.style.height="9px",n.style.display="block",nt.appendChild(e).appendChild(i).appendChild(n),o=t.getComputedStyle(i),a=parseInt(o.height,10)+parseInt(o.borderTopWidth,10)+parseInt(o.borderBottomWidth,10)===i.offsetHeight,nt.removeChild(e)),a}}))}();var jt=["Webkit","Moz","ms"],Yt=g.createElement("div").style,Vt={};function Ut(t){var e=$.cssProps[t]||Vt[t];return e||(t in Yt?t:Vt[t]=function(t){for(var e=t[0].toUpperCase()+t.slice(1),i=jt.length;i--;)if((t=jt[i]+e)in Yt)return t}(t)||t)}var qt=/^(none|table(?!-c[ea]).+)/,Xt=/^--/,Gt={position:"absolute",visibility:"hidden",display:"block"},Zt={letterSpacing:"0",fontWeight:"400"};function Kt(t,e,i){var n=et.exec(e);return n?Math.max(0,n[2]-(i||0))+(n[3]||"px"):e}function Qt(t,e,i,n,o,r){var s="width"===e?1:0,a=0,l=0;if(i===(n?"border":"content"))return 0;for(;s<4;s+=2)"margin"===i&&(l+=$.css(t,i+it[s],!0,o)),n?("content"===i&&(l-=$.css(t,"padding"+it[s],!0,o)),"margin"!==i&&(l-=$.css(t,"border"+it[s]+"Width",!0,o))):(l+=$.css(t,"padding"+it[s],!0,o),"padding"!==i?l+=$.css(t,"border"+it[s]+"Width",!0,o):a+=$.css(t,"border"+it[s]+"Width",!0,o));return!n&&r>=0&&(l+=Math.max(0,Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-r-l-a-.5))||0),l}function Jt(t,e,i){var n=Ft(t),o=(!p.boxSizingReliable()||i)&&"border-box"===$.css(t,"boxSizing",!1,n),r=o,s=Ht(t,e,n),a="offset"+e[0].toUpperCase()+e.slice(1);if(zt.test(s)){if(!i)return s;s="auto"}return(!p.boxSizingReliable()&&o||!p.reliableTrDimensions()&&T(t,"tr")||"auto"===s||!parseFloat(s)&&"inline"===$.css(t,"display",!1,n))&&t.getClientRects().length&&(o="border-box"===$.css(t,"boxSizing",!1,n),(r=a in t)&&(s=t[a])),(s=parseFloat(s)||0)+Qt(t,e,i||(o?"border":"content"),r,n,s)+"px"}function te(t,e,i,n,o){return new te.prototype.init(t,e,i,n,o)}$.extend({cssHooks:{opacity:{get:function(t,e){if(e){var i=Ht(t,"opacity");return""===i?"1":i}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(t,e,i,n){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var o,r,s,a=U(e),l=Xt.test(e),c=t.style;if(l||(e=Ut(a)),s=$.cssHooks[e]||$.cssHooks[a],void 0===i)return s&&"get"in s&&void 0!==(o=s.get(t,!1,n))?o:c[e];"string"===(r=typeof i)&&(o=et.exec(i))&&o[1]&&(i=at(t,e,o),r="number"),null!=i&&i==i&&("number"!==r||l||(i+=o&&o[3]||($.cssNumber[a]?"":"px")),p.clearCloneStyle||""!==i||0!==e.indexOf("background")||(c[e]="inherit"),s&&"set"in s&&void 0===(i=s.set(t,i,n))||(l?c.setProperty(e,i):c[e]=i))}},css:function(t,e,i,n){var o,r,s,a=U(e);return Xt.test(e)||(e=Ut(a)),(s=$.cssHooks[e]||$.cssHooks[a])&&"get"in s&&(o=s.get(t,!0,i)),void 0===o&&(o=Ht(t,e,n)),"normal"===o&&e in Zt&&(o=Zt[e]),""===i||i?(r=parseFloat(o),!0===i||isFinite(r)?r||0:o):o}}),$.each(["height","width"],(function(t,e){$.cssHooks[e]={get:function(t,i,n){if(i)return!qt.test($.css(t,"display"))||t.getClientRects().length&&t.getBoundingClientRect().width?Jt(t,e,n):Bt(t,Gt,(function(){return Jt(t,e,n)}))},set:function(t,i,n){var o,r=Ft(t),s=!p.scrollboxSize()&&"absolute"===r.position,a=(s||n)&&"border-box"===$.css(t,"boxSizing",!1,r),l=n?Qt(t,e,n,a,r):0;return a&&s&&(l-=Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-parseFloat(r[e])-Qt(t,e,"border",!1,r)-.5)),l&&(o=et.exec(i))&&"px"!==(o[3]||"px")&&(t.style[e]=i,i=$.css(t,e)),Kt(0,i,l)}}})),$.cssHooks.marginLeft=Wt(p.reliableMarginLeft,(function(t,e){if(e)return(parseFloat(Ht(t,"marginLeft"))||t.getBoundingClientRect().left-Bt(t,{marginLeft:0},(function(){return t.getBoundingClientRect().left})))+"px"})),$.each({margin:"",padding:"",border:"Width"},(function(t,e){$.cssHooks[t+e]={expand:function(i){for(var n=0,o={},r="string"==typeof i?i.split(" "):[i];n<4;n++)o[t+it[n]+e]=r[n]||r[n-2]||r[0];return o}},"margin"!==t&&($.cssHooks[t+e].set=Kt)})),$.fn.extend({css:function(t,e){return W(this,(function(t,e,i){var n,o,r={},s=0;if(Array.isArray(e)){for(n=Ft(t),o=e.length;s<o;s++)r[e[s]]=$.css(t,e[s],!1,n);return r}return void 0!==i?$.style(t,e,i):$.css(t,e)}),t,e,arguments.length>1)}}),$.Tween=te,te.prototype={constructor:te,init:function(t,e,i,n,o,r){this.elem=t,this.prop=i,this.easing=o||$.easing._default,this.options=e,this.start=this.now=this.cur(),this.end=n,this.unit=r||($.cssNumber[i]?"":"px")},cur:function(){var t=te.propHooks[this.prop];return t&&t.get?t.get(this):te.propHooks._default.get(this)},run:function(t){var e,i=te.propHooks[this.prop];return this.options.duration?this.pos=e=$.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):this.pos=e=t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),i&&i.set?i.set(this):te.propHooks._default.set(this),this}},te.prototype.init.prototype=te.prototype,te.propHooks={_default:{get:function(t){var e;return 1!==t.elem.nodeType||null!=t.elem[t.prop]&&null==t.elem.style[t.prop]?t.elem[t.prop]:(e=$.css(t.elem,t.prop,""))&&"auto"!==e?e:0},set:function(t){$.fx.step[t.prop]?$.fx.step[t.prop](t):1!==t.elem.nodeType||!$.cssHooks[t.prop]&&null==t.elem.style[Ut(t.prop)]?t.elem[t.prop]=t.now:$.style(t.elem,t.prop,t.now+t.unit)}}},te.propHooks.scrollTop=te.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},$.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2},_default:"swing"},$.fx=te.prototype.init,$.fx.step={};var ee,ie,ne=/^(?:toggle|show|hide)$/,oe=/queueHooks$/;function re(){ie&&(!1===g.hidden&&t.requestAnimationFrame?t.requestAnimationFrame(re):t.setTimeout(re,$.fx.interval),$.fx.tick())}function se(){return t.setTimeout((function(){ee=void 0})),ee=Date.now()}function ae(t,e){var i,n=0,o={height:t};for(e=e?1:0;n<4;n+=2-e)o["margin"+(i=it[n])]=o["padding"+i]=t;return e&&(o.opacity=o.width=t),o}function le(t,e,i){for(var n,o=(ce.tweeners[e]||[]).concat(ce.tweeners["*"]),r=0,s=o.length;r<s;r++)if(n=o[r].call(i,e,t))return n}function ce(t,e,i){var n,o,r=0,s=ce.prefilters.length,a=$.Deferred().always((function(){delete l.elem})),l=function(){if(o)return!1;for(var e=ee||se(),i=Math.max(0,c.startTime+c.duration-e),n=1-(i/c.duration||0),r=0,s=c.tweens.length;r<s;r++)c.tweens[r].run(n);return a.notifyWith(t,[c,n,i]),n<1&&s?i:(s||a.notifyWith(t,[c,1,0]),a.resolveWith(t,[c]),!1)},c=a.promise({elem:t,props:$.extend({},e),opts:$.extend(!0,{specialEasing:{},easing:$.easing._default},i),originalProperties:e,originalOptions:i,startTime:ee||se(),duration:i.duration,tweens:[],createTween:function(e,i){var n=$.Tween(t,c.opts,e,i,c.opts.specialEasing[e]||c.opts.easing);return c.tweens.push(n),n},stop:function(e){var i=0,n=e?c.tweens.length:0;if(o)return this;for(o=!0;i<n;i++)c.tweens[i].run(1);return e?(a.notifyWith(t,[c,1,0]),a.resolveWith(t,[c,e])):a.rejectWith(t,[c,e]),this}}),h=c.props;for(!function(t,e){var i,n,o,r,s;for(i in t)if(o=e[n=U(i)],r=t[i],Array.isArray(r)&&(o=r[1],r=t[i]=r[0]),i!==n&&(t[n]=r,delete t[i]),(s=$.cssHooks[n])&&"expand"in s)for(i in r=s.expand(r),delete t[n],r)i in t||(t[i]=r[i],e[i]=o);else e[n]=o}(h,c.opts.specialEasing);r<s;r++)if(n=ce.prefilters[r].call(c,t,h,c.opts))return f(n.stop)&&($._queueHooks(c.elem,c.opts.queue).stop=n.stop.bind(n)),n;return $.map(h,le,c),f(c.opts.start)&&c.opts.start.call(t,c),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always),$.fx.timer($.extend(l,{elem:t,anim:c,queue:c.opts.queue})),c}$.Animation=$.extend(ce,{tweeners:{"*":[function(t,e){var i=this.createTween(t,e);return at(i.elem,t,et.exec(e),i),i}]},tweener:function(t,e){f(t)?(e=t,t=["*"]):t=t.match(L);for(var i,n=0,o=t.length;n<o;n++)i=t[n],ce.tweeners[i]=ce.tweeners[i]||[],ce.tweeners[i].unshift(e)},prefilters:[function(t,e,i){var n,o,r,s,a,l,c,h,u="width"in e||"height"in e,d=this,p={},f=t.style,m=t.nodeType&&st(t),g=G.get(t,"fxshow");for(n in i.queue||(null==(s=$._queueHooks(t,"fx")).unqueued&&(s.unqueued=0,a=s.empty.fire,s.empty.fire=function(){s.unqueued||a()}),s.unqueued++,d.always((function(){d.always((function(){s.unqueued--,$.queue(t,"fx").length||s.empty.fire()}))}))),e)if(o=e[n],ne.test(o)){if(delete e[n],r=r||"toggle"===o,o===(m?"hide":"show")){if("show"!==o||!g||void 0===g[n])continue;m=!0}p[n]=g&&g[n]||$.style(t,n)}if((l=!$.isEmptyObject(e))||!$.isEmptyObject(p))for(n in u&&1===t.nodeType&&(i.overflow=[f.overflow,f.overflowX,f.overflowY],null==(c=g&&g.display)&&(c=G.get(t,"display")),"none"===(h=$.css(t,"display"))&&(c?h=c:(ht([t],!0),c=t.style.display||c,h=$.css(t,"display"),ht([t]))),("inline"===h||"inline-block"===h&&null!=c)&&"none"===$.css(t,"float")&&(l||(d.done((function(){f.display=c})),null==c&&(h=f.display,c="none"===h?"":h)),f.display="inline-block")),i.overflow&&(f.overflow="hidden",d.always((function(){f.overflow=i.overflow[0],f.overflowX=i.overflow[1],f.overflowY=i.overflow[2]}))),l=!1,p)l||(g?"hidden"in g&&(m=g.hidden):g=G.access(t,"fxshow",{display:c}),r&&(g.hidden=!m),m&&ht([t],!0),d.done((function(){for(n in m||ht([t]),G.remove(t,"fxshow"),p)$.style(t,n,p[n])}))),l=le(m?g[n]:0,n,d),n in g||(g[n]=l.start,m&&(l.end=l.start,l.start=0))}],prefilter:function(t,e){e?ce.prefilters.unshift(t):ce.prefilters.push(t)}}),$.speed=function(t,e,i){var n=t&&"object"==typeof t?$.extend({},t):{complete:i||!i&&e||f(t)&&t,duration:t,easing:i&&e||e&&!f(e)&&e};return $.fx.off?n.duration=0:"number"!=typeof n.duration&&(n.duration in $.fx.speeds?n.duration=$.fx.speeds[n.duration]:n.duration=$.fx.speeds._default),null!=n.queue&&!0!==n.queue||(n.queue="fx"),n.old=n.complete,n.complete=function(){f(n.old)&&n.old.call(this),n.queue&&$.dequeue(this,n.queue)},n},$.fn.extend({fadeTo:function(t,e,i,n){return this.filter(st).css("opacity",0).show().end().animate({opacity:e},t,i,n)},animate:function(t,e,i,n){var o=$.isEmptyObject(t),r=$.speed(e,i,n),s=function(){var e=ce(this,$.extend({},t),r);(o||G.get(this,"finish"))&&e.stop(!0)};return s.finish=s,o||!1===r.queue?this.each(s):this.queue(r.queue,s)},stop:function(t,e,i){var n=function(t){var e=t.stop;delete t.stop,e(i)};return"string"!=typeof t&&(i=e,e=t,t=void 0),e&&this.queue(t||"fx",[]),this.each((function(){var e=!0,o=null!=t&&t+"queueHooks",r=$.timers,s=G.get(this);if(o)s[o]&&s[o].stop&&n(s[o]);else for(o in s)s[o]&&s[o].stop&&oe.test(o)&&n(s[o]);for(o=r.length;o--;)r[o].elem!==this||null!=t&&r[o].queue!==t||(r[o].anim.stop(i),e=!1,r.splice(o,1));!e&&i||$.dequeue(this,t)}))},finish:function(t){return!1!==t&&(t=t||"fx"),this.each((function(){var e,i=G.get(this),n=i[t+"queue"],o=i[t+"queueHooks"],r=$.timers,s=n?n.length:0;for(i.finish=!0,$.queue(this,t,[]),o&&o.stop&&o.stop.call(this,!0),e=r.length;e--;)r[e].elem===this&&r[e].queue===t&&(r[e].anim.stop(!0),r.splice(e,1));for(e=0;e<s;e++)n[e]&&n[e].finish&&n[e].finish.call(this);delete i.finish}))}}),$.each(["toggle","show","hide"],(function(t,e){var i=$.fn[e];$.fn[e]=function(t,n,o){return null==t||"boolean"==typeof t?i.apply(this,arguments):this.animate(ae(e,!0),t,n,o)}})),$.each({slideDown:ae("show"),slideUp:ae("hide"),slideToggle:ae("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},(function(t,e){$.fn[t]=function(t,i,n){return this.animate(e,t,i,n)}})),$.timers=[],$.fx.tick=function(){var t,e=0,i=$.timers;for(ee=Date.now();e<i.length;e++)(t=i[e])()||i[e]!==t||i.splice(e--,1);i.length||$.fx.stop(),ee=void 0},$.fx.timer=function(t){$.timers.push(t),$.fx.start()},$.fx.interval=13,$.fx.start=function(){ie||(ie=!0,re())},$.fx.stop=function(){ie=null},$.fx.speeds={slow:600,fast:200,_default:400},$.fn.delay=function(e,i){return e=$.fx&&$.fx.speeds[e]||e,i=i||"fx",this.queue(i,(function(i,n){var o=t.setTimeout(i,e);n.stop=function(){t.clearTimeout(o)}}))},function(){var t=g.createElement("input"),e=g.createElement("select").appendChild(g.createElement("option"));t.type="checkbox",p.checkOn=""!==t.value,p.optSelected=e.selected,(t=g.createElement("input")).value="t",t.type="radio",p.radioValue="t"===t.value}();var he,ue=$.expr.attrHandle;$.fn.extend({attr:function(t,e){return W(this,$.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each((function(){$.removeAttr(this,t)}))}}),$.extend({attr:function(t,e,i){var n,o,r=t.nodeType;if(3!==r&&8!==r&&2!==r)return void 0===t.getAttribute?$.prop(t,e,i):(1===r&&$.isXMLDoc(t)||(o=$.attrHooks[e.toLowerCase()]||($.expr.match.bool.test(e)?he:void 0)),void 0!==i?null===i?void $.removeAttr(t,e):o&&"set"in o&&void 0!==(n=o.set(t,i,e))?n:(t.setAttribute(e,i+""),i):o&&"get"in o&&null!==(n=o.get(t,e))?n:null==(n=$.find.attr(t,e))?void 0:n)},attrHooks:{type:{set:function(t,e){if(!p.radioValue&&"radio"===e&&T(t,"input")){var i=t.value;return t.setAttribute("type",e),i&&(t.value=i),e}}}},removeAttr:function(t,e){var i,n=0,o=e&&e.match(L);if(o&&1===t.nodeType)for(;i=o[n++];)t.removeAttribute(i)}}),he={set:function(t,e,i){return!1===e?$.removeAttr(t,i):t.setAttribute(i,i),i}},$.each($.expr.match.bool.source.match(/\w+/g),(function(t,e){var i=ue[e]||$.find.attr;ue[e]=function(t,e,n){var o,r,s=e.toLowerCase();return n||(r=ue[s],ue[s]=o,o=null!=i(t,e,n)?s:null,ue[s]=r),o}}));var de=/^(?:input|select|textarea|button)$/i,pe=/^(?:a|area)$/i;function fe(t){return(t.match(L)||[]).join(" ")}function me(t){return t.getAttribute&&t.getAttribute("class")||""}function ge(t){return Array.isArray(t)?t:"string"==typeof t&&t.match(L)||[]}$.fn.extend({prop:function(t,e){return W(this,$.prop,t,e,arguments.length>1)},removeProp:function(t){return this.each((function(){delete this[$.propFix[t]||t]}))}}),$.extend({prop:function(t,e,i){var n,o,r=t.nodeType;if(3!==r&&8!==r&&2!==r)return 1===r&&$.isXMLDoc(t)||(e=$.propFix[e]||e,o=$.propHooks[e]),void 0!==i?o&&"set"in o&&void 0!==(n=o.set(t,i,e))?n:t[e]=i:o&&"get"in o&&null!==(n=o.get(t,e))?n:t[e]},propHooks:{tabIndex:{get:function(t){var e=$.find.attr(t,"tabindex");return e?parseInt(e,10):de.test(t.nodeName)||pe.test(t.nodeName)&&t.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),p.optSelected||($.propHooks.selected={get:function(t){var e=t.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null},set:function(t){var e=t.parentNode;e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex)}}),$.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],(function(){$.propFix[this.toLowerCase()]=this})),$.fn.extend({addClass:function(t){var e,i,n,o,r,s,a,l=0;if(f(t))return this.each((function(e){$(this).addClass(t.call(this,e,me(this)))}));if((e=ge(t)).length)for(;i=this[l++];)if(o=me(i),n=1===i.nodeType&&" "+fe(o)+" "){for(s=0;r=e[s++];)n.indexOf(" "+r+" ")<0&&(n+=r+" ");o!==(a=fe(n))&&i.setAttribute("class",a)}return this},removeClass:function(t){var e,i,n,o,r,s,a,l=0;if(f(t))return this.each((function(e){$(this).removeClass(t.call(this,e,me(this)))}));if(!arguments.length)return this.attr("class","");if((e=ge(t)).length)for(;i=this[l++];)if(o=me(i),n=1===i.nodeType&&" "+fe(o)+" "){for(s=0;r=e[s++];)for(;n.indexOf(" "+r+" ")>-1;)n=n.replace(" "+r+" "," ");o!==(a=fe(n))&&i.setAttribute("class",a)}return this},toggleClass:function(t,e){var i=typeof t,n="string"===i||Array.isArray(t);return"boolean"==typeof e&&n?e?this.addClass(t):this.removeClass(t):f(t)?this.each((function(i){$(this).toggleClass(t.call(this,i,me(this),e),e)})):this.each((function(){var e,o,r,s;if(n)for(o=0,r=$(this),s=ge(t);e=s[o++];)r.hasClass(e)?r.removeClass(e):r.addClass(e);else void 0!==t&&"boolean"!==i||((e=me(this))&&G.set(this,"__className__",e),this.setAttribute&&this.setAttribute("class",e||!1===t?"":G.get(this,"__className__")||""))}))},hasClass:function(t){var e,i,n=0;for(e=" "+t+" ";i=this[n++];)if(1===i.nodeType&&(" "+fe(me(i))+" ").indexOf(e)>-1)return!0;return!1}});var ye=/\r/g;$.fn.extend({val:function(t){var e,i,n,o=this[0];return arguments.length?(n=f(t),this.each((function(i){var o;1===this.nodeType&&(null==(o=n?t.call(this,i,$(this).val()):t)?o="":"number"==typeof o?o+="":Array.isArray(o)&&(o=$.map(o,(function(t){return null==t?"":t+""}))),(e=$.valHooks[this.type]||$.valHooks[this.nodeName.toLowerCase()])&&"set"in e&&void 0!==e.set(this,o,"value")||(this.value=o))}))):o?(e=$.valHooks[o.type]||$.valHooks[o.nodeName.toLowerCase()])&&"get"in e&&void 0!==(i=e.get(o,"value"))?i:"string"==typeof(i=o.value)?i.replace(ye,""):null==i?"":i:void 0}}),$.extend({valHooks:{option:{get:function(t){var e=$.find.attr(t,"value");return null!=e?e:fe($.text(t))}},select:{get:function(t){var e,i,n,o=t.options,r=t.selectedIndex,s="select-one"===t.type,a=s?null:[],l=s?r+1:o.length;for(n=r<0?l:s?r:0;n<l;n++)if(((i=o[n]).selected||n===r)&&!i.disabled&&(!i.parentNode.disabled||!T(i.parentNode,"optgroup"))){if(e=$(i).val(),s)return e;a.push(e)}return a},set:function(t,e){for(var i,n,o=t.options,r=$.makeArray(e),s=o.length;s--;)((n=o[s]).selected=$.inArray($.valHooks.option.get(n),r)>-1)&&(i=!0);return i||(t.selectedIndex=-1),r}}}}),$.each(["radio","checkbox"],(function(){$.valHooks[this]={set:function(t,e){if(Array.isArray(e))return t.checked=$.inArray($(t).val(),e)>-1}},p.checkOn||($.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})})),p.focusin="onfocusin"in t;var ve=/^(?:focusinfocus|focusoutblur)$/,be=function(t){t.stopPropagation()};$.extend($.event,{trigger:function(e,i,n,o){var r,s,a,l,c,u,d,p,y=[n||g],v=h.call(e,"type")?e.type:e,b=h.call(e,"namespace")?e.namespace.split("."):[];if(s=p=a=n=n||g,3!==n.nodeType&&8!==n.nodeType&&!ve.test(v+$.event.triggered)&&(v.indexOf(".")>-1&&(b=v.split("."),v=b.shift(),b.sort()),c=v.indexOf(":")<0&&"on"+v,(e=e[$.expando]?e:new $.Event(v,"object"==typeof e&&e)).isTrigger=o?2:3,e.namespace=b.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+b.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=n),i=null==i?[e]:$.makeArray(i,[e]),d=$.event.special[v]||{},o||!d.trigger||!1!==d.trigger.apply(n,i))){if(!o&&!d.noBubble&&!m(n)){for(l=d.delegateType||v,ve.test(l+v)||(s=s.parentNode);s;s=s.parentNode)y.push(s),a=s;a===(n.ownerDocument||g)&&y.push(a.defaultView||a.parentWindow||t)}for(r=0;(s=y[r++])&&!e.isPropagationStopped();)p=s,e.type=r>1?l:d.bindType||v,(u=(G.get(s,"events")||Object.create(null))[e.type]&&G.get(s,"handle"))&&u.apply(s,i),(u=c&&s[c])&&u.apply&&q(s)&&(e.result=u.apply(s,i),!1===e.result&&e.preventDefault());return e.type=v,o||e.isDefaultPrevented()||d._default&&!1!==d._default.apply(y.pop(),i)||!q(n)||c&&f(n[v])&&!m(n)&&((a=n[c])&&(n[c]=null),$.event.triggered=v,e.isPropagationStopped()&&p.addEventListener(v,be),n[v](),e.isPropagationStopped()&&p.removeEventListener(v,be),$.event.triggered=void 0,a&&(n[c]=a)),e.result}},simulate:function(t,e,i){var n=$.extend(new $.Event,i,{type:t,isSimulated:!0});$.event.trigger(n,null,e)}}),$.fn.extend({trigger:function(t,e){return this.each((function(){$.event.trigger(t,e,this)}))},triggerHandler:function(t,e){var i=this[0];if(i)return $.event.trigger(t,e,i,!0)}}),p.focusin||$.each({focus:"focusin",blur:"focusout"},(function(t,e){var i=function(t){$.event.simulate(e,t.target,$.event.fix(t))};$.event.special[e]={setup:function(){var n=this.ownerDocument||this.document||this,o=G.access(n,e);o||n.addEventListener(t,i,!0),G.access(n,e,(o||0)+1)},teardown:function(){var n=this.ownerDocument||this.document||this,o=G.access(n,e)-1;o?G.access(n,e,o):(n.removeEventListener(t,i,!0),G.remove(n,e))}}}));var xe=t.location,$e={guid:Date.now()},we=/\?/;$.parseXML=function(e){var i,n;if(!e||"string"!=typeof e)return null;try{i=(new t.DOMParser).parseFromString(e,"text/xml")}catch(t){}return n=i&&i.getElementsByTagName("parsererror")[0],i&&!n||$.error("Invalid XML: "+(n?$.map(n.childNodes,(function(t){return t.textContent})).join("\n"):e)),i};var _e=/\[\]$/,ke=/\r?\n/g,Se=/^(?:submit|button|image|reset|file)$/i,Ce=/^(?:input|select|textarea|keygen)/i;function Te(t,e,i,n){var o;if(Array.isArray(e))$.each(e,(function(e,o){i||_e.test(t)?n(t,o):Te(t+"["+("object"==typeof o&&null!=o?e:"")+"]",o,i,n)}));else if(i||"object"!==b(e))n(t,e);else for(o in e)Te(t+"["+o+"]",e[o],i,n)}$.param=function(t,e){var i,n=[],o=function(t,e){var i=f(e)?e():e;n[n.length]=encodeURIComponent(t)+"="+encodeURIComponent(null==i?"":i)};if(null==t)return"";if(Array.isArray(t)||t.jquery&&!$.isPlainObject(t))$.each(t,(function(){o(this.name,this.value)}));else for(i in t)Te(i,t[i],e,o);return n.join("&")},$.fn.extend({serialize:function(){return $.param(this.serializeArray())},serializeArray:function(){return this.map((function(){var t=$.prop(this,"elements");return t?$.makeArray(t):this})).filter((function(){var t=this.type;return this.name&&!$(this).is(":disabled")&&Ce.test(this.nodeName)&&!Se.test(t)&&(this.checked||!pt.test(t))})).map((function(t,e){var i=$(this).val();return null==i?null:Array.isArray(i)?$.map(i,(function(t){return{name:e.name,value:t.replace(ke,"\r\n")}})):{name:e.name,value:i.replace(ke,"\r\n")}})).get()}});var Me=/%20/g,Pe=/#.*$/,Ee=/([?&])_=[^&]*/,Ie=/^(.*?):[ \t]*([^\r\n]*)$/gm,Ae=/^(?:GET|HEAD)$/,De=/^\/\//,Re={},Le={},Oe="*/".concat("*"),ze=g.createElement("a");function Fe(t){return function(e,i){"string"!=typeof e&&(i=e,e="*");var n,o=0,r=e.toLowerCase().match(L)||[];if(f(i))for(;n=r[o++];)"+"===n[0]?(n=n.slice(1)||"*",(t[n]=t[n]||[]).unshift(i)):(t[n]=t[n]||[]).push(i)}}function Be(t,e,i,n){var o={},r=t===Le;function s(a){var l;return o[a]=!0,$.each(t[a]||[],(function(t,a){var c=a(e,i,n);return"string"!=typeof c||r||o[c]?r?!(l=c):void 0:(e.dataTypes.unshift(c),s(c),!1)})),l}return s(e.dataTypes[0])||!o["*"]&&s("*")}function Ne(t,e){var i,n,o=$.ajaxSettings.flatOptions||{};for(i in e)void 0!==e[i]&&((o[i]?t:n||(n={}))[i]=e[i]);return n&&$.extend(!0,t,n),t}ze.href=xe.href,$.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:xe.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(xe.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Oe,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":$.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?Ne(Ne(t,$.ajaxSettings),e):Ne($.ajaxSettings,t)},ajaxPrefilter:Fe(Re),ajaxTransport:Fe(Le),ajax:function(e,i){"object"==typeof e&&(i=e,e=void 0),i=i||{};var n,o,r,s,a,l,c,h,u,d,p=$.ajaxSetup({},i),f=p.context||p,m=p.context&&(f.nodeType||f.jquery)?$(f):$.event,y=$.Deferred(),v=$.Callbacks("once memory"),b=p.statusCode||{},x={},w={},_="canceled",k={readyState:0,getResponseHeader:function(t){var e;if(c){if(!s)for(s={};e=Ie.exec(r);)s[e[1].toLowerCase()+" "]=(s[e[1].toLowerCase()+" "]||[]).concat(e[2]);e=s[t.toLowerCase()+" "]}return null==e?null:e.join(", ")},getAllResponseHeaders:function(){return c?r:null},setRequestHeader:function(t,e){return null==c&&(t=w[t.toLowerCase()]=w[t.toLowerCase()]||t,x[t]=e),this},overrideMimeType:function(t){return null==c&&(p.mimeType=t),this},statusCode:function(t){var e;if(t)if(c)k.always(t[k.status]);else for(e in t)b[e]=[b[e],t[e]];return this},abort:function(t){var e=t||_;return n&&n.abort(e),S(0,e),this}};if(y.promise(k),p.url=((e||p.url||xe.href)+"").replace(De,xe.protocol+"//"),p.type=i.method||i.type||p.method||p.type,p.dataTypes=(p.dataType||"*").toLowerCase().match(L)||[""],null==p.crossDomain){l=g.createElement("a");try{l.href=p.url,l.href=l.href,p.crossDomain=ze.protocol+"//"+ze.host!=l.protocol+"//"+l.host}catch(t){p.crossDomain=!0}}if(p.data&&p.processData&&"string"!=typeof p.data&&(p.data=$.param(p.data,p.traditional)),Be(Re,p,i,k),c)return k;for(u in(h=$.event&&p.global)&&0==$.active++&&$.event.trigger("ajaxStart"),p.type=p.type.toUpperCase(),p.hasContent=!Ae.test(p.type),o=p.url.replace(Pe,""),p.hasContent?p.data&&p.processData&&0===(p.contentType||"").indexOf("application/x-www-form-urlencoded")&&(p.data=p.data.replace(Me,"+")):(d=p.url.slice(o.length),p.data&&(p.processData||"string"==typeof p.data)&&(o+=(we.test(o)?"&":"?")+p.data,delete p.data),!1===p.cache&&(o=o.replace(Ee,"$1"),d=(we.test(o)?"&":"?")+"_="+$e.guid+++d),p.url=o+d),p.ifModified&&($.lastModified[o]&&k.setRequestHeader("If-Modified-Since",$.lastModified[o]),$.etag[o]&&k.setRequestHeader("If-None-Match",$.etag[o])),(p.data&&p.hasContent&&!1!==p.contentType||i.contentType)&&k.setRequestHeader("Content-Type",p.contentType),k.setRequestHeader("Accept",p.dataTypes[0]&&p.accepts[p.dataTypes[0]]?p.accepts[p.dataTypes[0]]+("*"!==p.dataTypes[0]?", "+Oe+"; q=0.01":""):p.accepts["*"]),p.headers)k.setRequestHeader(u,p.headers[u]);if(p.beforeSend&&(!1===p.beforeSend.call(f,k,p)||c))return k.abort();if(_="abort",v.add(p.complete),k.done(p.success),k.fail(p.error),n=Be(Le,p,i,k)){if(k.readyState=1,h&&m.trigger("ajaxSend",[k,p]),c)return k;p.async&&p.timeout>0&&(a=t.setTimeout((function(){k.abort("timeout")}),p.timeout));try{c=!1,n.send(x,S)}catch(t){if(c)throw t;S(-1,t)}}else S(-1,"No Transport");function S(e,i,s,l){var u,d,g,x,w,_=i;c||(c=!0,a&&t.clearTimeout(a),n=void 0,r=l||"",k.readyState=e>0?4:0,u=e>=200&&e<300||304===e,s&&(x=function(t,e,i){for(var n,o,r,s,a=t.contents,l=t.dataTypes;"*"===l[0];)l.shift(),void 0===n&&(n=t.mimeType||e.getResponseHeader("Content-Type"));if(n)for(o in a)if(a[o]&&a[o].test(n)){l.unshift(o);break}if(l[0]in i)r=l[0];else{for(o in i){if(!l[0]||t.converters[o+" "+l[0]]){r=o;break}s||(s=o)}r=r||s}if(r)return r!==l[0]&&l.unshift(r),i[r]}(p,k,s)),!u&&$.inArray("script",p.dataTypes)>-1&&$.inArray("json",p.dataTypes)<0&&(p.converters["text script"]=function(){}),x=function(t,e,i,n){var o,r,s,a,l,c={},h=t.dataTypes.slice();if(h[1])for(s in t.converters)c[s.toLowerCase()]=t.converters[s];for(r=h.shift();r;)if(t.responseFields[r]&&(i[t.responseFields[r]]=e),!l&&n&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),l=r,r=h.shift())if("*"===r)r=l;else if("*"!==l&&l!==r){if(!(s=c[l+" "+r]||c["* "+r]))for(o in c)if((a=o.split(" "))[1]===r&&(s=c[l+" "+a[0]]||c["* "+a[0]])){!0===s?s=c[o]:!0!==c[o]&&(r=a[0],h.unshift(a[1]));break}if(!0!==s)if(s&&t.throws)e=s(e);else try{e=s(e)}catch(t){return{state:"parsererror",error:s?t:"No conversion from "+l+" to "+r}}}return{state:"success",data:e}}(p,x,k,u),u?(p.ifModified&&((w=k.getResponseHeader("Last-Modified"))&&($.lastModified[o]=w),(w=k.getResponseHeader("etag"))&&($.etag[o]=w)),204===e||"HEAD"===p.type?_="nocontent":304===e?_="notmodified":(_=x.state,d=x.data,u=!(g=x.error))):(g=_,!e&&_||(_="error",e<0&&(e=0))),k.status=e,k.statusText=(i||_)+"",u?y.resolveWith(f,[d,_,k]):y.rejectWith(f,[k,_,g]),k.statusCode(b),b=void 0,h&&m.trigger(u?"ajaxSuccess":"ajaxError",[k,p,u?d:g]),v.fireWith(f,[k,_]),h&&(m.trigger("ajaxComplete",[k,p]),--$.active||$.event.trigger("ajaxStop")))}return k},getJSON:function(t,e,i){return $.get(t,e,i,"json")},getScript:function(t,e){return $.get(t,void 0,e,"script")}}),$.each(["get","post"],(function(t,e){$[e]=function(t,i,n,o){return f(i)&&(o=o||n,n=i,i=void 0),$.ajax($.extend({url:t,type:e,dataType:o,data:i,success:n},$.isPlainObject(t)&&t))}})),$.ajaxPrefilter((function(t){var e;for(e in t.headers)"content-type"===e.toLowerCase()&&(t.contentType=t.headers[e]||"")})),$._evalUrl=function(t,e,i){return $.ajax({url:t,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(t){$.globalEval(t,e,i)}})},$.fn.extend({wrapAll:function(t){var e;return this[0]&&(f(t)&&(t=t.call(this[0])),e=$(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map((function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t})).append(this)),this},wrapInner:function(t){return f(t)?this.each((function(e){$(this).wrapInner(t.call(this,e))})):this.each((function(){var e=$(this),i=e.contents();i.length?i.wrapAll(t):e.append(t)}))},wrap:function(t){var e=f(t);return this.each((function(i){$(this).wrapAll(e?t.call(this,i):t)}))},unwrap:function(t){return this.parent(t).not("body").each((function(){$(this).replaceWith(this.childNodes)})),this}}),$.expr.pseudos.hidden=function(t){return!$.expr.pseudos.visible(t)},$.expr.pseudos.visible=function(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)},$.ajaxSettings.xhr=function(){try{return new t.XMLHttpRequest}catch(t){}};var He={0:200,1223:204},We=$.ajaxSettings.xhr();p.cors=!!We&&"withCredentials"in We,p.ajax=We=!!We,$.ajaxTransport((function(e){var i,n;if(p.cors||We&&!e.crossDomain)return{send:function(o,r){var s,a=e.xhr();if(a.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(s in e.xhrFields)a[s]=e.xhrFields[s];for(s in e.mimeType&&a.overrideMimeType&&a.overrideMimeType(e.mimeType),e.crossDomain||o["X-Requested-With"]||(o["X-Requested-With"]="XMLHttpRequest"),o)a.setRequestHeader(s,o[s]);i=function(t){return function(){i&&(i=n=a.onload=a.onerror=a.onabort=a.ontimeout=a.onreadystatechange=null,"abort"===t?a.abort():"error"===t?"number"!=typeof a.status?r(0,"error"):r(a.status,a.statusText):r(He[a.status]||a.status,a.statusText,"text"!==(a.responseType||"text")||"string"!=typeof a.responseText?{binary:a.response}:{text:a.responseText},a.getAllResponseHeaders()))}},a.onload=i(),n=a.onerror=a.ontimeout=i("error"),void 0!==a.onabort?a.onabort=n:a.onreadystatechange=function(){4===a.readyState&&t.setTimeout((function(){i&&n()}))},i=i("abort");try{a.send(e.hasContent&&e.data||null)}catch(t){if(i)throw t}},abort:function(){i&&i()}}})),$.ajaxPrefilter((function(t){t.crossDomain&&(t.contents.script=!1)})),$.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(t){return $.globalEval(t),t}}}),$.ajaxPrefilter("script",(function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET")})),$.ajaxTransport("script",(function(t){var e,i;if(t.crossDomain||t.scriptAttrs)return{send:function(n,o){e=$("<script>").attr(t.scriptAttrs||{}).prop({charset:t.scriptCharset,src:t.url}).on("load error",i=function(t){e.remove(),i=null,t&&o("error"===t.type?404:200,t.type)}),g.head.appendChild(e[0])},abort:function(){i&&i()}}}));var je,Ye=[],Ve=/(=)\?(?=&|$)|\?\?/;$.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=Ye.pop()||$.expando+"_"+$e.guid++;return this[t]=!0,t}}),$.ajaxPrefilter("json jsonp",(function(e,i,n){var o,r,s,a=!1!==e.jsonp&&(Ve.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Ve.test(e.data)&&"data");if(a||"jsonp"===e.dataTypes[0])return o=e.jsonpCallback=f(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,a?e[a]=e[a].replace(Ve,"$1"+o):!1!==e.jsonp&&(e.url+=(we.test(e.url)?"&":"?")+e.jsonp+"="+o),e.converters["script json"]=function(){return s||$.error(o+" was not called"),s[0]},e.dataTypes[0]="json",r=t[o],t[o]=function(){s=arguments},n.always((function(){void 0===r?$(t).removeProp(o):t[o]=r,e[o]&&(e.jsonpCallback=i.jsonpCallback,Ye.push(o)),s&&f(r)&&r(s[0]),s=r=void 0})),"script"})),p.createHTMLDocument=((je=g.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===je.childNodes.length),$.parseHTML=function(t,e,i){return"string"!=typeof t?[]:("boolean"==typeof e&&(i=e,e=!1),e||(p.createHTMLDocument?((n=(e=g.implementation.createHTMLDocument("")).createElement("base")).href=g.location.href,e.head.appendChild(n)):e=g),r=!i&&[],(o=M.exec(t))?[e.createElement(o[1])]:(o=xt([t],e,r),r&&r.length&&$(r).remove(),$.merge([],o.childNodes)));var n,o,r},$.fn.load=function(t,e,i){var n,o,r,s=this,a=t.indexOf(" ");return a>-1&&(n=fe(t.slice(a)),t=t.slice(0,a)),f(e)?(i=e,e=void 0):e&&"object"==typeof e&&(o="POST"),s.length>0&&$.ajax({url:t,type:o||"GET",dataType:"html",data:e}).done((function(t){r=arguments,s.html(n?$("<div>").append($.parseHTML(t)).find(n):t)})).always(i&&function(t,e){s.each((function(){i.apply(this,r||[t.responseText,e,t])}))}),this},$.expr.pseudos.animated=function(t){return $.grep($.timers,(function(e){return t===e.elem})).length},$.offset={setOffset:function(t,e,i){var n,o,r,s,a,l,c=$.css(t,"position"),h=$(t),u={};"static"===c&&(t.style.position="relative"),a=h.offset(),r=$.css(t,"top"),l=$.css(t,"left"),("absolute"===c||"fixed"===c)&&(r+l).indexOf("auto")>-1?(s=(n=h.position()).top,o=n.left):(s=parseFloat(r)||0,o=parseFloat(l)||0),f(e)&&(e=e.call(t,i,$.extend({},a))),null!=e.top&&(u.top=e.top-a.top+s),null!=e.left&&(u.left=e.left-a.left+o),"using"in e?e.using.call(t,u):h.css(u)}},$.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each((function(e){$.offset.setOffset(this,t,e)}));var e,i,n=this[0];return n?n.getClientRects().length?(e=n.getBoundingClientRect(),i=n.ownerDocument.defaultView,{top:e.top+i.pageYOffset,left:e.left+i.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var t,e,i,n=this[0],o={top:0,left:0};if("fixed"===$.css(n,"position"))e=n.getBoundingClientRect();else{for(e=this.offset(),i=n.ownerDocument,t=n.offsetParent||i.documentElement;t&&(t===i.body||t===i.documentElement)&&"static"===$.css(t,"position");)t=t.parentNode;t&&t!==n&&1===t.nodeType&&((o=$(t).offset()).top+=$.css(t,"borderTopWidth",!0),o.left+=$.css(t,"borderLeftWidth",!0))}return{top:e.top-o.top-$.css(n,"marginTop",!0),left:e.left-o.left-$.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map((function(){for(var t=this.offsetParent;t&&"static"===$.css(t,"position");)t=t.offsetParent;return t||nt}))}}),$.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},(function(t,e){var i="pageYOffset"===e;$.fn[t]=function(n){return W(this,(function(t,n,o){var r;if(m(t)?r=t:9===t.nodeType&&(r=t.defaultView),void 0===o)return r?r[e]:t[n];r?r.scrollTo(i?r.pageXOffset:o,i?o:r.pageYOffset):t[n]=o}),t,n,arguments.length)}})),$.each(["top","left"],(function(t,e){$.cssHooks[e]=Wt(p.pixelPosition,(function(t,i){if(i)return i=Ht(t,e),zt.test(i)?$(t).position()[e]+"px":i}))})),$.each({Height:"height",Width:"width"},(function(t,e){$.each({padding:"inner"+t,content:e,"":"outer"+t},(function(i,n){$.fn[n]=function(o,r){var s=arguments.length&&(i||"boolean"!=typeof o),a=i||(!0===o||!0===r?"margin":"border");return W(this,(function(e,i,o){var r;return m(e)?0===n.indexOf("outer")?e["inner"+t]:e.document.documentElement["client"+t]:9===e.nodeType?(r=e.documentElement,Math.max(e.body["scroll"+t],r["scroll"+t],e.body["offset"+t],r["offset"+t],r["client"+t])):void 0===o?$.css(e,i,a):$.style(e,i,o,a)}),e,s?o:void 0,s)}}))})),$.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],(function(t,e){$.fn[e]=function(t){return this.on(e,t)}})),$.fn.extend({bind:function(t,e,i){return this.on(t,null,e,i)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,i,n){return this.on(e,t,i,n)},undelegate:function(t,e,i){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",i)},hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)}}),$.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),(function(t,e){$.fn[e]=function(t,i){return arguments.length>0?this.on(e,null,t,i):this.trigger(e)}}));var Ue=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;$.proxy=function(t,e){var i,n,r;if("string"==typeof e&&(i=t[e],e=t,t=i),f(t))return n=o.call(arguments,2),r=function(){return t.apply(e||this,n.concat(o.call(arguments)))},r.guid=t.guid=t.guid||$.guid++,r},$.holdReady=function(t){t?$.readyWait++:$.ready(!0)},$.isArray=Array.isArray,$.parseJSON=JSON.parse,$.nodeName=T,$.isFunction=f,$.isWindow=m,$.camelCase=U,$.type=b,$.now=Date.now,$.isNumeric=function(t){var e=$.type(t);return("number"===e||"string"===e)&&!isNaN(t-parseFloat(t))},$.trim=function(t){return null==t?"":(t+"").replace(Ue,"")},"function"==typeof define&&define.amd&&define("jquery",[],(function(){return $}));var qe=t.jQuery,Xe=t.$;return $.noConflict=function(e){return t.$===$&&(t.$=Xe),e&&t.jQuery===$&&(t.jQuery=qe),$},void 0===e&&(t.jQuery=t.$=$),$})),
/*! jQuery UI - v1.13.1 - 2022-01-20
* http://jqueryui.com
* Includes: widget.js, position.js, data.js, disable-selection.js, effect.js, effects/effect-blind.js, effects/effect-bounce.js, effects/effect-clip.js, effects/effect-drop.js, effects/effect-explode.js, effects/effect-fade.js, effects/effect-fold.js, effects/effect-highlight.js, effects/effect-puff.js, effects/effect-pulsate.js, effects/effect-scale.js, effects/effect-shake.js, effects/effect-size.js, effects/effect-slide.js, effects/effect-transfer.js, focusable.js, form-reset-mixin.js, jquery-patch.js, keycode.js, labels.js, scroll-parent.js, tabbable.js, unique-id.js, widgets/accordion.js, widgets/autocomplete.js, widgets/button.js, widgets/checkboxradio.js, widgets/controlgroup.js, widgets/datepicker.js, widgets/dialog.js, widgets/draggable.js, widgets/droppable.js, widgets/menu.js, widgets/mouse.js, widgets/progressbar.js, widgets/resizable.js, widgets/selectable.js, widgets/selectmenu.js, widgets/slider.js, widgets/sortable.js, widgets/spinner.js, widgets/tabs.js, widgets/tooltip.js
* Copyright jQuery Foundation and other contributors; Licensed MIT */
function(t){"use strict";"function"==typeof define&&define.amd?define(["jquery"],t):t(jQuery)}((function(t){"use strict";t.ui=t.ui||{};t.ui.version="1.13.1";
/*!
 * jQuery UI Widget 1.13.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */var e,i=0,n=Array.prototype.hasOwnProperty,o=Array.prototype.slice;t.cleanData=(e=t.cleanData,function(i){var n,o,r;for(r=0;null!=(o=i[r]);r++)(n=t._data(o,"events"))&&n.remove&&t(o).triggerHandler("remove");e(i)}),t.widget=function(e,i,n){var o,r,s,a={},l=e.split(".")[0],c=l+"-"+(e=e.split(".")[1]);return n||(n=i,i=t.Widget),Array.isArray(n)&&(n=t.extend.apply(null,[{}].concat(n))),t.expr.pseudos[c.toLowerCase()]=function(e){return!!t.data(e,c)},t[l]=t[l]||{},o=t[l][e],r=t[l][e]=function(t,e){if(!this||!this._createWidget)return new r(t,e);arguments.length&&this._createWidget(t,e)},t.extend(r,o,{version:n.version,_proto:t.extend({},n),_childConstructors:[]}),(s=new i).options=t.widget.extend({},s.options),t.each(n,(function(t,e){a[t]="function"==typeof e?function(){function n(){return i.prototype[t].apply(this,arguments)}function o(e){return i.prototype[t].apply(this,e)}return function(){var t,i=this._super,r=this._superApply;return this._super=n,this._superApply=o,t=e.apply(this,arguments),this._super=i,this._superApply=r,t}}():e})),r.prototype=t.widget.extend(s,{widgetEventPrefix:o&&s.widgetEventPrefix||e},a,{constructor:r,namespace:l,widgetName:e,widgetFullName:c}),o?(t.each(o._childConstructors,(function(e,i){var n=i.prototype;t.widget(n.namespace+"."+n.widgetName,r,i._proto)})),delete o._childConstructors):i._childConstructors.push(r),t.widget.bridge(e,r),r},t.widget.extend=function(e){for(var i,r,s=o.call(arguments,1),a=0,l=s.length;a<l;a++)for(i in s[a])r=s[a][i],n.call(s[a],i)&&void 0!==r&&(t.isPlainObject(r)?e[i]=t.isPlainObject(e[i])?t.widget.extend({},e[i],r):t.widget.extend({},r):e[i]=r);return e},t.widget.bridge=function(e,i){var n=i.prototype.widgetFullName||e;t.fn[e]=function(r){var s="string"==typeof r,a=o.call(arguments,1),l=this;return s?this.length||"instance"!==r?this.each((function(){var i,o=t.data(this,n);return"instance"===r?(l=o,!1):o?"function"!=typeof o[r]||"_"===r.charAt(0)?t.error("no such method '"+r+"' for "+e+" widget instance"):(i=o[r].apply(o,a))!==o&&void 0!==i?(l=i&&i.jquery?l.pushStack(i.get()):i,!1):void 0:t.error("cannot call methods on "+e+" prior to initialization; attempted to call method '"+r+"'")})):l=void 0:(a.length&&(r=t.widget.extend.apply(null,[r].concat(a))),this.each((function(){var e=t.data(this,n);e?(e.option(r||{}),e._init&&e._init()):t.data(this,n,new i(r,this))}))),l}},t.Widget=function(){},t.Widget._childConstructors=[],t.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{classes:{},disabled:!1,create:null},_createWidget:function(e,n){n=t(n||this.defaultElement||this)[0],this.element=t(n),this.uuid=i++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=t(),this.hoverable=t(),this.focusable=t(),this.classesElementLookup={},n!==this&&(t.data(n,this.widgetFullName,this),this._on(!0,this.element,{remove:function(t){t.target===n&&this.destroy()}}),this.document=t(n.style?n.ownerDocument:n.document||n),this.window=t(this.document[0].defaultView||this.document[0].parentWindow)),this.options=t.widget.extend({},this.options,this._getCreateOptions(),e),this._create(),this.options.disabled&&this._setOptionDisabled(this.options.disabled),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:function(){return{}},_getCreateEventData:t.noop,_create:t.noop,_init:t.noop,destroy:function(){var e=this;this._destroy(),t.each(this.classesElementLookup,(function(t,i){e._removeClass(i,t)})),this.element.off(this.eventNamespace).removeData(this.widgetFullName),this.widget().off(this.eventNamespace).removeAttr("aria-disabled"),this.bindings.off(this.eventNamespace)},_destroy:t.noop,widget:function(){return this.element},option:function(e,i){var n,o,r,s=e;if(0===arguments.length)return t.widget.extend({},this.options);if("string"==typeof e)if(s={},n=e.split("."),e=n.shift(),n.length){for(o=s[e]=t.widget.extend({},this.options[e]),r=0;r<n.length-1;r++)o[n[r]]=o[n[r]]||{},o=o[n[r]];if(e=n.pop(),1===arguments.length)return void 0===o[e]?null:o[e];o[e]=i}else{if(1===arguments.length)return void 0===this.options[e]?null:this.options[e];s[e]=i}return this._setOptions(s),this},_setOptions:function(t){var e;for(e in t)this._setOption(e,t[e]);return this},_setOption:function(t,e){return"classes"===t&&this._setOptionClasses(e),this.options[t]=e,"disabled"===t&&this._setOptionDisabled(e),this},_setOptionClasses:function(e){var i,n,o;for(i in e)o=this.classesElementLookup[i],e[i]!==this.options.classes[i]&&o&&o.length&&(n=t(o.get()),this._removeClass(o,i),n.addClass(this._classes({element:n,keys:i,classes:e,add:!0})))},_setOptionDisabled:function(t){this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!!t),t&&(this._removeClass(this.hoverable,null,"ui-state-hover"),this._removeClass(this.focusable,null,"ui-state-focus"))},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_classes:function(e){var i=[],n=this;function o(){var i=[];e.element.each((function(e,o){t.map(n.classesElementLookup,(function(t){return t})).some((function(t){return t.is(o)}))||i.push(o)})),n._on(t(i),{remove:"_untrackClassesElement"})}function r(r,s){var a,l;for(l=0;l<r.length;l++)a=n.classesElementLookup[r[l]]||t(),e.add?(o(),a=t(t.uniqueSort(a.get().concat(e.element.get())))):a=t(a.not(e.element).get()),n.classesElementLookup[r[l]]=a,i.push(r[l]),s&&e.classes[r[l]]&&i.push(e.classes[r[l]])}return(e=t.extend({element:this.element,classes:this.options.classes||{}},e)).keys&&r(e.keys.match(/\S+/g)||[],!0),e.extra&&r(e.extra.match(/\S+/g)||[]),i.join(" ")},_untrackClassesElement:function(e){var i=this;t.each(i.classesElementLookup,(function(n,o){-1!==t.inArray(e.target,o)&&(i.classesElementLookup[n]=t(o.not(e.target).get()))})),this._off(t(e.target))},_removeClass:function(t,e,i){return this._toggleClass(t,e,i,!1)},_addClass:function(t,e,i){return this._toggleClass(t,e,i,!0)},_toggleClass:function(t,e,i,n){n="boolean"==typeof n?n:i;var o="string"==typeof t||null===t,r={extra:o?e:i,keys:o?t:e,element:o?this.element:t,add:n};return r.element.toggleClass(this._classes(r),n),this},_on:function(e,i,n){var o,r=this;"boolean"!=typeof e&&(n=i,i=e,e=!1),n?(i=o=t(i),this.bindings=this.bindings.add(i)):(n=i,i=this.element,o=this.widget()),t.each(n,(function(n,s){function a(){if(e||!0!==r.options.disabled&&!t(this).hasClass("ui-state-disabled"))return("string"==typeof s?r[s]:s).apply(r,arguments)}"string"!=typeof s&&(a.guid=s.guid=s.guid||a.guid||t.guid++);var l=n.match(/^([\w:-]*)\s*(.*)$/),c=l[1]+r.eventNamespace,h=l[2];h?o.on(c,h,a):i.on(c,a)}))},_off:function(e,i){i=(i||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.off(i),this.bindings=t(this.bindings.not(e).get()),this.focusable=t(this.focusable.not(e).get()),this.hoverable=t(this.hoverable.not(e).get())},_delay:function(t,e){var i=this;return setTimeout((function(){return("string"==typeof t?i[t]:t).apply(i,arguments)}),e||0)},_hoverable:function(e){this.hoverable=this.hoverable.add(e),this._on(e,{mouseenter:function(e){this._addClass(t(e.currentTarget),null,"ui-state-hover")},mouseleave:function(e){this._removeClass(t(e.currentTarget),null,"ui-state-hover")}})},_focusable:function(e){this.focusable=this.focusable.add(e),this._on(e,{focusin:function(e){this._addClass(t(e.currentTarget),null,"ui-state-focus")},focusout:function(e){this._removeClass(t(e.currentTarget),null,"ui-state-focus")}})},_trigger:function(e,i,n){var o,r,s=this.options[e];if(n=n||{},(i=t.Event(i)).type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase(),i.target=this.element[0],r=i.originalEvent)for(o in r)o in i||(i[o]=r[o]);return this.element.trigger(i,n),!("function"==typeof s&&!1===s.apply(this.element[0],[i].concat(n))||i.isDefaultPrevented())}},t.each({show:"fadeIn",hide:"fadeOut"},(function(e,i){t.Widget.prototype["_"+e]=function(n,o,r){var s;"string"==typeof o&&(o={effect:o});var a=o?!0===o||"number"==typeof o?i:o.effect||i:e;"number"==typeof(o=o||{})?o={duration:o}:!0===o&&(o={}),s=!t.isEmptyObject(o),o.complete=r,o.delay&&n.delay(o.delay),s&&t.effects&&t.effects.effect[a]?n[e](o):a!==e&&n[a]?n[a](o.duration,o.easing,r):n.queue((function(i){t(this)[e](),r&&r.call(n[0]),i()}))}}));t.widget;
/*!
 * jQuery UI Position 1.13.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/position/
 */!function(){var e,i=Math.max,n=Math.abs,o=/left|center|right/,r=/top|center|bottom/,s=/[\+\-]\d+(\.[\d]+)?%?/,a=/^\w+/,l=/%$/,c=t.fn.position;function h(t,e,i){return[parseFloat(t[0])*(l.test(t[0])?e/100:1),parseFloat(t[1])*(l.test(t[1])?i/100:1)]}function u(e,i){return parseInt(t.css(e,i),10)||0}function d(t){return null!=t&&t===t.window}function p(t){var e=t[0];return 9===e.nodeType?{width:t.width(),height:t.height(),offset:{top:0,left:0}}:d(e)?{width:t.width(),height:t.height(),offset:{top:t.scrollTop(),left:t.scrollLeft()}}:e.preventDefault?{width:0,height:0,offset:{top:e.pageY,left:e.pageX}}:{width:t.outerWidth(),height:t.outerHeight(),offset:t.offset()}}t.position={scrollbarWidth:function(){if(void 0!==e)return e;var i,n,o=t("<div style='display:block;position:absolute;width:200px;height:200px;overflow:hidden;'><div style='height:300px;width:auto;'></div></div>"),r=o.children()[0];return t("body").append(o),i=r.offsetWidth,o.css("overflow","scroll"),i===(n=r.offsetWidth)&&(n=o[0].clientWidth),o.remove(),e=i-n},getScrollInfo:function(e){var i=e.isWindow||e.isDocument?"":e.element.css("overflow-x"),n=e.isWindow||e.isDocument?"":e.element.css("overflow-y"),o="scroll"===i||"auto"===i&&e.width<e.element[0].scrollWidth;return{width:"scroll"===n||"auto"===n&&e.height<e.element[0].scrollHeight?t.position.scrollbarWidth():0,height:o?t.position.scrollbarWidth():0}},getWithinInfo:function(e){var i=t(e||window),n=d(i[0]),o=!!i[0]&&9===i[0].nodeType;return{element:i,isWindow:n,isDocument:o,offset:!n&&!o?t(e).offset():{left:0,top:0},scrollLeft:i.scrollLeft(),scrollTop:i.scrollTop(),width:i.outerWidth(),height:i.outerHeight()}}},t.fn.position=function(e){if(!e||!e.of)return c.apply(this,arguments);var l,d,f,m,g,y,v="string"==typeof(e=t.extend({},e)).of?t(document).find(e.of):t(e.of),b=t.position.getWithinInfo(e.within),x=t.position.getScrollInfo(b),$=(e.collision||"flip").split(" "),w={};return y=p(v),v[0].preventDefault&&(e.at="left top"),d=y.width,f=y.height,m=y.offset,g=t.extend({},m),t.each(["my","at"],(function(){var t,i,n=(e[this]||"").split(" ");1===n.length&&(n=o.test(n[0])?n.concat(["center"]):r.test(n[0])?["center"].concat(n):["center","center"]),n[0]=o.test(n[0])?n[0]:"center",n[1]=r.test(n[1])?n[1]:"center",t=s.exec(n[0]),i=s.exec(n[1]),w[this]=[t?t[0]:0,i?i[0]:0],e[this]=[a.exec(n[0])[0],a.exec(n[1])[0]]})),1===$.length&&($[1]=$[0]),"right"===e.at[0]?g.left+=d:"center"===e.at[0]&&(g.left+=d/2),"bottom"===e.at[1]?g.top+=f:"center"===e.at[1]&&(g.top+=f/2),l=h(w.at,d,f),g.left+=l[0],g.top+=l[1],this.each((function(){var o,r,s=t(this),a=s.outerWidth(),c=s.outerHeight(),p=u(this,"marginLeft"),y=u(this,"marginTop"),_=a+p+u(this,"marginRight")+x.width,k=c+y+u(this,"marginBottom")+x.height,S=t.extend({},g),C=h(w.my,s.outerWidth(),s.outerHeight());"right"===e.my[0]?S.left-=a:"center"===e.my[0]&&(S.left-=a/2),"bottom"===e.my[1]?S.top-=c:"center"===e.my[1]&&(S.top-=c/2),S.left+=C[0],S.top+=C[1],o={marginLeft:p,marginTop:y},t.each(["left","top"],(function(i,n){t.ui.position[$[i]]&&t.ui.position[$[i]][n](S,{targetWidth:d,targetHeight:f,elemWidth:a,elemHeight:c,collisionPosition:o,collisionWidth:_,collisionHeight:k,offset:[l[0]+C[0],l[1]+C[1]],my:e.my,at:e.at,within:b,elem:s})})),e.using&&(r=function(t){var o=m.left-S.left,r=o+d-a,l=m.top-S.top,h=l+f-c,u={target:{element:v,left:m.left,top:m.top,width:d,height:f},element:{element:s,left:S.left,top:S.top,width:a,height:c},horizontal:r<0?"left":o>0?"right":"center",vertical:h<0?"top":l>0?"bottom":"middle"};d<a&&n(o+r)<d&&(u.horizontal="center"),f<c&&n(l+h)<f&&(u.vertical="middle"),i(n(o),n(r))>i(n(l),n(h))?u.important="horizontal":u.important="vertical",e.using.call(this,t,u)}),s.offset(t.extend(S,{using:r}))}))},t.ui.position={fit:{left:function(t,e){var n,o=e.within,r=o.isWindow?o.scrollLeft:o.offset.left,s=o.width,a=t.left-e.collisionPosition.marginLeft,l=r-a,c=a+e.collisionWidth-s-r;e.collisionWidth>s?l>0&&c<=0?(n=t.left+l+e.collisionWidth-s-r,t.left+=l-n):t.left=c>0&&l<=0?r:l>c?r+s-e.collisionWidth:r:l>0?t.left+=l:c>0?t.left-=c:t.left=i(t.left-a,t.left)},top:function(t,e){var n,o=e.within,r=o.isWindow?o.scrollTop:o.offset.top,s=e.within.height,a=t.top-e.collisionPosition.marginTop,l=r-a,c=a+e.collisionHeight-s-r;e.collisionHeight>s?l>0&&c<=0?(n=t.top+l+e.collisionHeight-s-r,t.top+=l-n):t.top=c>0&&l<=0?r:l>c?r+s-e.collisionHeight:r:l>0?t.top+=l:c>0?t.top-=c:t.top=i(t.top-a,t.top)}},flip:{left:function(t,e){var i,o,r=e.within,s=r.offset.left+r.scrollLeft,a=r.width,l=r.isWindow?r.scrollLeft:r.offset.left,c=t.left-e.collisionPosition.marginLeft,h=c-l,u=c+e.collisionWidth-a-l,d="left"===e.my[0]?-e.elemWidth:"right"===e.my[0]?e.elemWidth:0,p="left"===e.at[0]?e.targetWidth:"right"===e.at[0]?-e.targetWidth:0,f=-2*e.offset[0];h<0?((i=t.left+d+p+f+e.collisionWidth-a-s)<0||i<n(h))&&(t.left+=d+p+f):u>0&&((o=t.left-e.collisionPosition.marginLeft+d+p+f-l)>0||n(o)<u)&&(t.left+=d+p+f)},top:function(t,e){var i,o,r=e.within,s=r.offset.top+r.scrollTop,a=r.height,l=r.isWindow?r.scrollTop:r.offset.top,c=t.top-e.collisionPosition.marginTop,h=c-l,u=c+e.collisionHeight-a-l,d="top"===e.my[1]?-e.elemHeight:"bottom"===e.my[1]?e.elemHeight:0,p="top"===e.at[1]?e.targetHeight:"bottom"===e.at[1]?-e.targetHeight:0,f=-2*e.offset[1];h<0?((o=t.top+d+p+f+e.collisionHeight-a-s)<0||o<n(h))&&(t.top+=d+p+f):u>0&&((i=t.top-e.collisionPosition.marginTop+d+p+f-l)>0||n(i)<u)&&(t.top+=d+p+f)}},flipfit:{left:function(){t.ui.position.flip.left.apply(this,arguments),t.ui.position.fit.left.apply(this,arguments)},top:function(){t.ui.position.flip.top.apply(this,arguments),t.ui.position.fit.top.apply(this,arguments)}}}}();t.ui.position,t.extend(t.expr.pseudos,{data:t.expr.createPseudo?t.expr.createPseudo((function(e){return function(i){return!!t.data(i,e)}})):function(e,i,n){return!!t.data(e,n[3])}}),t.fn.extend({disableSelection:(r="onselectstart"in document.createElement("div")?"selectstart":"mousedown",function(){return this.on(r+".ui-disableSelection",(function(t){t.preventDefault()}))}),enableSelection:function(){return this.off(".ui-disableSelection")}});
/*!
 * jQuery UI :data 1.13.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */var r,s,a=t,l={},c=l.toString,h=/^([\-+])=\s*(\d+\.?\d*)/,u=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(t){return[t[1],t[2],t[3],t[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(t){return[2.55*t[1],2.55*t[2],2.55*t[3],t[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})?/,parse:function(t){return[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16),t[4]?(parseInt(t[4],16)/255).toFixed(2):1]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])([a-f0-9])?/,parse:function(t){return[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16),t[4]?(parseInt(t[4]+t[4],16)/255).toFixed(2):1]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(t){return[t[1],t[2]/100,t[3]/100,t[4]]}}],d=a.Color=function(t,e,i,n){return new a.Color.fn.parse(t,e,i,n)},p={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},f={byte:{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},m=d.support={},g=a("<p>")[0],y=a.each;function v(t){return null==t?t+"":"object"==typeof t?l[c.call(t)]||"object":typeof t}function b(t,e,i){var n=f[e.type]||{};return null==t?i||!e.def?null:e.def:(t=n.floor?~~t:parseFloat(t),isNaN(t)?e.def:n.mod?(t+n.mod)%n.mod:Math.min(n.max,Math.max(0,t)))}function x(t){var e=d(),i=e._rgba=[];return t=t.toLowerCase(),y(u,(function(n,o){var r,s=o.re.exec(t),a=s&&o.parse(s),l=o.space||"rgba";if(a)return r=e[l](a),e[p[l].cache]=r[p[l].cache],i=e._rgba=r._rgba,!1})),i.length?("0,0,0,0"===i.join()&&a.extend(i,s.transparent),e):s[t]}function $(t,e,i){return 6*(i=(i+1)%1)<1?t+(e-t)*i*6:2*i<1?e:3*i<2?t+(e-t)*(2/3-i)*6:t}g.style.cssText="background-color:rgba(1,1,1,.5)",m.rgba=g.style.backgroundColor.indexOf("rgba")>-1,y(p,(function(t,e){e.cache="_"+t,e.props.alpha={idx:3,type:"percent",def:1}})),a.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),(function(t,e){l["[object "+e+"]"]=e.toLowerCase()})),d.fn=a.extend(d.prototype,{parse:function(t,e,i,n){if(void 0===t)return this._rgba=[null,null,null,null],this;(t.jquery||t.nodeType)&&(t=a(t).css(e),e=void 0);var o=this,r=v(t),l=this._rgba=[];return void 0!==e&&(t=[t,e,i,n],r="array"),"string"===r?this.parse(x(t)||s._default):"array"===r?(y(p.rgba.props,(function(e,i){l[i.idx]=b(t[i.idx],i)})),this):"object"===r?(y(p,t instanceof d?function(e,i){t[i.cache]&&(o[i.cache]=t[i.cache].slice())}:function(e,i){var n=i.cache;y(i.props,(function(e,r){if(!o[n]&&i.to){if("alpha"===e||null==t[e])return;o[n]=i.to(o._rgba)}o[n][r.idx]=b(t[e],r,!0)})),o[n]&&a.inArray(null,o[n].slice(0,3))<0&&(null==o[n][3]&&(o[n][3]=1),i.from&&(o._rgba=i.from(o[n])))}),this):void 0},is:function(t){var e=d(t),i=!0,n=this;return y(p,(function(t,o){var r,s=e[o.cache];return s&&(r=n[o.cache]||o.to&&o.to(n._rgba)||[],y(o.props,(function(t,e){if(null!=s[e.idx])return i=s[e.idx]===r[e.idx]}))),i})),i},_space:function(){var t=[],e=this;return y(p,(function(i,n){e[n.cache]&&t.push(i)})),t.pop()},transition:function(t,e){var i=d(t),n=i._space(),o=p[n],r=0===this.alpha()?d("transparent"):this,s=r[o.cache]||o.to(r._rgba),a=s.slice();return i=i[o.cache],y(o.props,(function(t,n){var o=n.idx,r=s[o],l=i[o],c=f[n.type]||{};null!==l&&(null===r?a[o]=l:(c.mod&&(l-r>c.mod/2?r+=c.mod:r-l>c.mod/2&&(r-=c.mod)),a[o]=b((l-r)*e+r,n)))})),this[n](a)},blend:function(t){if(1===this._rgba[3])return this;var e=this._rgba.slice(),i=e.pop(),n=d(t)._rgba;return d(a.map(e,(function(t,e){return(1-i)*n[e]+i*t})))},toRgbaString:function(){var t="rgba(",e=a.map(this._rgba,(function(t,e){return null!=t?t:e>2?1:0}));return 1===e[3]&&(e.pop(),t="rgb("),t+e.join()+")"},toHslaString:function(){var t="hsla(",e=a.map(this.hsla(),(function(t,e){return null==t&&(t=e>2?1:0),e&&e<3&&(t=Math.round(100*t)+"%"),t}));return 1===e[3]&&(e.pop(),t="hsl("),t+e.join()+")"},toHexString:function(t){var e=this._rgba.slice(),i=e.pop();return t&&e.push(~~(255*i)),"#"+a.map(e,(function(t){return 1===(t=(t||0).toString(16)).length?"0"+t:t})).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}}),d.fn.parse.prototype=d.fn,p.hsla.to=function(t){if(null==t[0]||null==t[1]||null==t[2])return[null,null,null,t[3]];var e,i,n=t[0]/255,o=t[1]/255,r=t[2]/255,s=t[3],a=Math.max(n,o,r),l=Math.min(n,o,r),c=a-l,h=a+l,u=.5*h;return e=l===a?0:n===a?60*(o-r)/c+360:o===a?60*(r-n)/c+120:60*(n-o)/c+240,i=0===c?0:u<=.5?c/h:c/(2-h),[Math.round(e)%360,i,u,null==s?1:s]},p.hsla.from=function(t){if(null==t[0]||null==t[1]||null==t[2])return[null,null,null,t[3]];var e=t[0]/360,i=t[1],n=t[2],o=t[3],r=n<=.5?n*(1+i):n+i-n*i,s=2*n-r;return[Math.round(255*$(s,r,e+1/3)),Math.round(255*$(s,r,e)),Math.round(255*$(s,r,e-1/3)),o]},y(p,(function(t,e){var i=e.props,n=e.cache,o=e.to,r=e.from;d.fn[t]=function(t){if(o&&!this[n]&&(this[n]=o(this._rgba)),void 0===t)return this[n].slice();var e,s=v(t),a="array"===s||"object"===s?t:arguments,l=this[n].slice();return y(i,(function(t,e){var i=a["object"===s?t:e.idx];null==i&&(i=l[e.idx]),l[e.idx]=b(i,e)})),r?((e=d(r(l)))[n]=l,e):d(l)},y(i,(function(e,i){d.fn[e]||(d.fn[e]=function(n){var o,r,s,a,l=v(n);return r=(o=this[a="alpha"===e?this._hsla?"hsla":"rgba":t]())[i.idx],"undefined"===l?r:("function"===l&&(l=v(n=n.call(this,r))),null==n&&i.empty?this:("string"===l&&(s=h.exec(n))&&(n=r+parseFloat(s[2])*("+"===s[1]?1:-1)),o[i.idx]=n,this[a](o)))})}))})),d.hook=function(t){var e=t.split(" ");y(e,(function(t,e){a.cssHooks[e]={set:function(t,i){var n,o,r="";if("transparent"!==i&&("string"!==v(i)||(n=x(i)))){if(i=d(n||i),!m.rgba&&1!==i._rgba[3]){for(o="backgroundColor"===e?t.parentNode:t;(""===r||"transparent"===r)&&o&&o.style;)try{r=a.css(o,"backgroundColor"),o=o.parentNode}catch(t){}i=i.blend(r&&"transparent"!==r?r:"_default")}i=i.toRgbaString()}try{t.style[e]=i}catch(t){}}},a.fx.step[e]=function(t){t.colorInit||(t.start=d(t.elem,e),t.end=d(t.end),t.colorInit=!0),a.cssHooks[e].set(t.elem,t.start.transition(t.end,t.pos))}}))},d.hook("backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor"),a.cssHooks.borderColor={expand:function(t){var e={};return y(["Top","Right","Bottom","Left"],(function(i,n){e["border"+n+"Color"]=t})),e}},s=a.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"};
/*!
 * jQuery UI Effects 1.13.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
var w,_="ui-effects-",k="ui-effects-style",S="ui-effects-animated";t.effects={effect:{}},function(){var e=["add","remove","toggle"],i={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};function n(t){var e,i,n,o=t.ownerDocument.defaultView?t.ownerDocument.defaultView.getComputedStyle(t,null):t.currentStyle,r={};if(o&&o.length&&o[0]&&o[o[0]])for(i=o.length;i--;)"string"==typeof o[e=o[i]]&&(r[(n=e,n.replace(/-([\da-z])/gi,(function(t,e){return e.toUpperCase()})))]=o[e]);else for(e in o)"string"==typeof o[e]&&(r[e]=o[e]);return r}t.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],(function(e,i){t.fx.step[i]=function(t){("none"!==t.end&&!t.setAttr||1===t.pos&&!t.setAttr)&&(a.style(t.elem,i,t.end),t.setAttr=!0)}})),t.fn.addBack||(t.fn.addBack=function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}),t.effects.animateClass=function(o,r,s,a){var l=t.speed(r,s,a);return this.queue((function(){var r,s=t(this),a=s.attr("class")||"",c=l.children?s.find("*").addBack():s;c=c.map((function(){return{el:t(this),start:n(this)}})),(r=function(){t.each(e,(function(t,e){o[e]&&s[e+"Class"](o[e])}))})(),c=c.map((function(){return this.end=n(this.el[0]),this.diff=function(e,n){var o,r,s={};for(o in n)r=n[o],e[o]!==r&&(i[o]||!t.fx.step[o]&&isNaN(parseFloat(r))||(s[o]=r));return s}(this.start,this.end),this})),s.attr("class",a),c=c.map((function(){var e=this,i=t.Deferred(),n=t.extend({},l,{queue:!1,complete:function(){i.resolve(e)}});return this.el.animate(this.diff,n),i.promise()})),t.when.apply(t,c.get()).done((function(){r(),t.each(arguments,(function(){var e=this.el;t.each(this.diff,(function(t){e.css(t,"")}))})),l.complete.call(s[0])}))}))},t.fn.extend({addClass:function(e){return function(i,n,o,r){return n?t.effects.animateClass.call(this,{add:i},n,o,r):e.apply(this,arguments)}}(t.fn.addClass),removeClass:function(e){return function(i,n,o,r){return arguments.length>1?t.effects.animateClass.call(this,{remove:i},n,o,r):e.apply(this,arguments)}}(t.fn.removeClass),toggleClass:function(e){return function(i,n,o,r,s){return"boolean"==typeof n||void 0===n?o?t.effects.animateClass.call(this,n?{add:i}:{remove:i},o,r,s):e.apply(this,arguments):t.effects.animateClass.call(this,{toggle:i},n,o,r)}}(t.fn.toggleClass),switchClass:function(e,i,n,o,r){return t.effects.animateClass.call(this,{add:i,remove:e},n,o,r)}})}(),function(){function e(e,i,n,o){return t.isPlainObject(e)&&(i=e,e=e.effect),e={effect:e},null==i&&(i={}),"function"==typeof i&&(o=i,n=null,i={}),("number"==typeof i||t.fx.speeds[i])&&(o=n,n=i,i={}),"function"==typeof n&&(o=n,n=null),i&&t.extend(e,i),n=n||i.duration,e.duration=t.fx.off?0:"number"==typeof n?n:n in t.fx.speeds?t.fx.speeds[n]:t.fx.speeds._default,e.complete=o||i.complete,e}function i(e){return!(e&&"number"!=typeof e&&!t.fx.speeds[e])||("string"==typeof e&&!t.effects.effect[e]||("function"==typeof e||"object"==typeof e&&!e.effect))}function n(t,e){var i=e.outerWidth(),n=e.outerHeight(),o=/^rect\((-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto)\)$/.exec(t)||["",0,i,n,0];return{top:parseFloat(o[1])||0,right:"auto"===o[2]?i:parseFloat(o[2]),bottom:"auto"===o[3]?n:parseFloat(o[3]),left:parseFloat(o[4])||0}}t.expr&&t.expr.pseudos&&t.expr.pseudos.animated&&(t.expr.pseudos.animated=function(e){return function(i){return!!t(i).data(S)||e(i)}}(t.expr.pseudos.animated)),!1!==t.uiBackCompat&&t.extend(t.effects,{save:function(t,e){for(var i=0,n=e.length;i<n;i++)null!==e[i]&&t.data(_+e[i],t[0].style[e[i]])},restore:function(t,e){for(var i,n=0,o=e.length;n<o;n++)null!==e[n]&&(i=t.data(_+e[n]),t.css(e[n],i))},setMode:function(t,e){return"toggle"===e&&(e=t.is(":hidden")?"show":"hide"),e},createWrapper:function(e){if(e.parent().is(".ui-effects-wrapper"))return e.parent();var i={width:e.outerWidth(!0),height:e.outerHeight(!0),float:e.css("float")},n=t("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),o={width:e.width(),height:e.height()},r=document.activeElement;try{r.id}catch(t){r=document.body}return e.wrap(n),(e[0]===r||t.contains(e[0],r))&&t(r).trigger("focus"),n=e.parent(),"static"===e.css("position")?(n.css({position:"relative"}),e.css({position:"relative"})):(t.extend(i,{position:e.css("position"),zIndex:e.css("z-index")}),t.each(["top","left","bottom","right"],(function(t,n){i[n]=e.css(n),isNaN(parseInt(i[n],10))&&(i[n]="auto")})),e.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),e.css(o),n.css(i).show()},removeWrapper:function(e){var i=document.activeElement;return e.parent().is(".ui-effects-wrapper")&&(e.parent().replaceWith(e),(e[0]===i||t.contains(e[0],i))&&t(i).trigger("focus")),e}}),t.extend(t.effects,{version:"1.13.1",define:function(e,i,n){return n||(n=i,i="effect"),t.effects.effect[e]=n,t.effects.effect[e].mode=i,n},scaledDimensions:function(t,e,i){if(0===e)return{height:0,width:0,outerHeight:0,outerWidth:0};var n="horizontal"!==i?(e||100)/100:1,o="vertical"!==i?(e||100)/100:1;return{height:t.height()*o,width:t.width()*n,outerHeight:t.outerHeight()*o,outerWidth:t.outerWidth()*n}},clipToBox:function(t){return{width:t.clip.right-t.clip.left,height:t.clip.bottom-t.clip.top,left:t.clip.left,top:t.clip.top}},unshift:function(t,e,i){var n=t.queue();e>1&&n.splice.apply(n,[1,0].concat(n.splice(e,i))),t.dequeue()},saveStyle:function(t){t.data(k,t[0].style.cssText)},restoreStyle:function(t){t[0].style.cssText=t.data(k)||"",t.removeData(k)},mode:function(t,e){var i=t.is(":hidden");return"toggle"===e&&(e=i?"show":"hide"),(i?"hide"===e:"show"===e)&&(e="none"),e},getBaseline:function(t,e){var i,n;switch(t[0]){case"top":i=0;break;case"middle":i=.5;break;case"bottom":i=1;break;default:i=t[0]/e.height}switch(t[1]){case"left":n=0;break;case"center":n=.5;break;case"right":n=1;break;default:n=t[1]/e.width}return{x:n,y:i}},createPlaceholder:function(e){var i,n=e.css("position"),o=e.position();return e.css({marginTop:e.css("marginTop"),marginBottom:e.css("marginBottom"),marginLeft:e.css("marginLeft"),marginRight:e.css("marginRight")}).outerWidth(e.outerWidth()).outerHeight(e.outerHeight()),/^(static|relative)/.test(n)&&(n="absolute",i=t("<"+e[0].nodeName+">").insertAfter(e).css({display:/^(inline|ruby)/.test(e.css("display"))?"inline-block":"block",visibility:"hidden",marginTop:e.css("marginTop"),marginBottom:e.css("marginBottom"),marginLeft:e.css("marginLeft"),marginRight:e.css("marginRight"),float:e.css("float")}).outerWidth(e.outerWidth()).outerHeight(e.outerHeight()).addClass("ui-effects-placeholder"),e.data(_+"placeholder",i)),e.css({position:n,left:o.left,top:o.top}),i},removePlaceholder:function(t){var e=_+"placeholder",i=t.data(e);i&&(i.remove(),t.removeData(e))},cleanUp:function(e){t.effects.restoreStyle(e),t.effects.removePlaceholder(e)},setTransition:function(e,i,n,o){return o=o||{},t.each(i,(function(t,i){var r=e.cssUnit(i);r[0]>0&&(o[i]=r[0]*n+r[1])})),o}}),t.fn.extend({effect:function(){var i=e.apply(this,arguments),n=t.effects.effect[i.effect],o=n.mode,r=i.queue,s=r||"fx",a=i.complete,l=i.mode,c=[],h=function(e){var i=t(this),n=t.effects.mode(i,l)||o;i.data(S,!0),c.push(n),o&&("show"===n||n===o&&"hide"===n)&&i.show(),o&&"none"===n||t.effects.saveStyle(i),"function"==typeof e&&e()};if(t.fx.off||!n)return l?this[l](i.duration,a):this.each((function(){a&&a.call(this)}));function u(e){var r=t(this);function s(){"function"==typeof a&&a.call(r[0]),"function"==typeof e&&e()}i.mode=c.shift(),!1===t.uiBackCompat||o?"none"===i.mode?(r[l](),s()):n.call(r[0],i,(function(){r.removeData(S),t.effects.cleanUp(r),"hide"===i.mode&&r.hide(),s()})):(r.is(":hidden")?"hide"===l:"show"===l)?(r[l](),s()):n.call(r[0],i,s)}return!1===r?this.each(h).each(u):this.queue(s,h).queue(s,u)},show:function(t){return function(n){if(i(n))return t.apply(this,arguments);var o=e.apply(this,arguments);return o.mode="show",this.effect.call(this,o)}}(t.fn.show),hide:function(t){return function(n){if(i(n))return t.apply(this,arguments);var o=e.apply(this,arguments);return o.mode="hide",this.effect.call(this,o)}}(t.fn.hide),toggle:function(t){return function(n){if(i(n)||"boolean"==typeof n)return t.apply(this,arguments);var o=e.apply(this,arguments);return o.mode="toggle",this.effect.call(this,o)}}(t.fn.toggle),cssUnit:function(e){var i=this.css(e),n=[];return t.each(["em","px","%","pt"],(function(t,e){i.indexOf(e)>0&&(n=[parseFloat(i),e])})),n},cssClip:function(t){return t?this.css("clip","rect("+t.top+"px "+t.right+"px "+t.bottom+"px "+t.left+"px)"):n(this.css("clip"),this)},transfer:function(e,i){var n=t(this),o=t(e.to),r="fixed"===o.css("position"),s=t("body"),a=r?s.scrollTop():0,l=r?s.scrollLeft():0,c=o.offset(),h={top:c.top-a,left:c.left-l,height:o.innerHeight(),width:o.innerWidth()},u=n.offset(),d=t("<div class='ui-effects-transfer'></div>");d.appendTo("body").addClass(e.className).css({top:u.top-a,left:u.left-l,height:n.innerHeight(),width:n.innerWidth(),position:r?"fixed":"absolute"}).animate(h,e.duration,e.easing,(function(){d.remove(),"function"==typeof i&&i()}))}}),t.fx.step.clip=function(e){e.clipInit||(e.start=t(e.elem).cssClip(),"string"==typeof e.end&&(e.end=n(e.end,e.elem)),e.clipInit=!0),t(e.elem).cssClip({top:e.pos*(e.end.top-e.start.top)+e.start.top,right:e.pos*(e.end.right-e.start.right)+e.start.right,bottom:e.pos*(e.end.bottom-e.start.bottom)+e.start.bottom,left:e.pos*(e.end.left-e.start.left)+e.start.left})}}(),w={},t.each(["Quad","Cubic","Quart","Quint","Expo"],(function(t,e){w[e]=function(e){return Math.pow(e,t+2)}})),t.extend(w,{Sine:function(t){return 1-Math.cos(t*Math.PI/2)},Circ:function(t){return 1-Math.sqrt(1-t*t)},Elastic:function(t){return 0===t||1===t?t:-Math.pow(2,8*(t-1))*Math.sin((80*(t-1)-7.5)*Math.PI/15)},Back:function(t){return t*t*(3*t-2)},Bounce:function(t){for(var e,i=4;t<((e=Math.pow(2,--i))-1)/11;);return 1/Math.pow(4,3-i)-7.5625*Math.pow((3*e-2)/22-t,2)}}),t.each(w,(function(e,i){t.easing["easeIn"+e]=i,t.easing["easeOut"+e]=function(t){return 1-i(1-t)},t.easing["easeInOut"+e]=function(t){return t<.5?i(2*t)/2:1-i(-2*t+2)/2}}));t.effects,t.effects.define("blind","hide",(function(e,i){var n={up:["bottom","top"],vertical:["bottom","top"],down:["top","bottom"],left:["right","left"],horizontal:["right","left"],right:["left","right"]},o=t(this),r=e.direction||"up",s=o.cssClip(),a={clip:t.extend({},s)},l=t.effects.createPlaceholder(o);a.clip[n[r][0]]=a.clip[n[r][1]],"show"===e.mode&&(o.cssClip(a.clip),l&&l.css(t.effects.clipToBox(a)),a.clip=s),l&&l.animate(t.effects.clipToBox(a),e.duration,e.easing),o.animate(a,{queue:!1,duration:e.duration,easing:e.easing,complete:i})})),t.effects.define("bounce",(function(e,i){var n,o,r,s=t(this),a=e.mode,l="hide"===a,c="show"===a,h=e.direction||"up",u=e.distance,d=e.times||5,p=2*d+(c||l?1:0),f=e.duration/p,m=e.easing,g="up"===h||"down"===h?"top":"left",y="up"===h||"left"===h,v=0,b=s.queue().length;for(t.effects.createPlaceholder(s),r=s.css(g),u||(u=s["top"===g?"outerHeight":"outerWidth"]()/3),c&&((o={opacity:1})[g]=r,s.css("opacity",0).css(g,y?2*-u:2*u).animate(o,f,m)),l&&(u/=Math.pow(2,d-1)),(o={})[g]=r;v<d;v++)(n={})[g]=(y?"-=":"+=")+u,s.animate(n,f,m).animate(o,f,m),u=l?2*u:u/2;l&&((n={opacity:0})[g]=(y?"-=":"+=")+u,s.animate(n,f,m)),s.queue(i),t.effects.unshift(s,b,p+1)})),t.effects.define("clip","hide",(function(e,i){var n,o={},r=t(this),s=e.direction||"vertical",a="both"===s,l=a||"horizontal"===s,c=a||"vertical"===s;n=r.cssClip(),o.clip={top:c?(n.bottom-n.top)/2:n.top,right:l?(n.right-n.left)/2:n.right,bottom:c?(n.bottom-n.top)/2:n.bottom,left:l?(n.right-n.left)/2:n.left},t.effects.createPlaceholder(r),"show"===e.mode&&(r.cssClip(o.clip),o.clip=n),r.animate(o,{queue:!1,duration:e.duration,easing:e.easing,complete:i})})),t.effects.define("drop","hide",(function(e,i){var n,o=t(this),r="show"===e.mode,s=e.direction||"left",a="up"===s||"down"===s?"top":"left",l="up"===s||"left"===s?"-=":"+=",c="+="===l?"-=":"+=",h={opacity:0};t.effects.createPlaceholder(o),n=e.distance||o["top"===a?"outerHeight":"outerWidth"](!0)/2,h[a]=l+n,r&&(o.css(h),h[a]=c+n,h.opacity=1),o.animate(h,{queue:!1,duration:e.duration,easing:e.easing,complete:i})})),t.effects.define("explode","hide",(function(e,i){var n,o,r,s,a,l,c=e.pieces?Math.round(Math.sqrt(e.pieces)):3,h=c,u=t(this),d="show"===e.mode,p=u.show().css("visibility","hidden").offset(),f=Math.ceil(u.outerWidth()/h),m=Math.ceil(u.outerHeight()/c),g=[];function y(){g.push(this),g.length===c*h&&(u.css({visibility:"visible"}),t(g).remove(),i())}for(n=0;n<c;n++)for(s=p.top+n*m,l=n-(c-1)/2,o=0;o<h;o++)r=p.left+o*f,a=o-(h-1)/2,u.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-o*f,top:-n*m}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:f,height:m,left:r+(d?a*f:0),top:s+(d?l*m:0),opacity:d?0:1}).animate({left:r+(d?0:a*f),top:s+(d?0:l*m),opacity:d?1:0},e.duration||500,e.easing,y)})),t.effects.define("fade","toggle",(function(e,i){var n="show"===e.mode;t(this).css("opacity",n?0:1).animate({opacity:n?1:0},{queue:!1,duration:e.duration,easing:e.easing,complete:i})})),t.effects.define("fold","hide",(function(e,i){var n=t(this),o=e.mode,r="show"===o,s="hide"===o,a=e.size||15,l=/([0-9]+)%/.exec(a),c=!!e.horizFirst?["right","bottom"]:["bottom","right"],h=e.duration/2,u=t.effects.createPlaceholder(n),d=n.cssClip(),p={clip:t.extend({},d)},f={clip:t.extend({},d)},m=[d[c[0]],d[c[1]]],g=n.queue().length;l&&(a=parseInt(l[1],10)/100*m[s?0:1]),p.clip[c[0]]=a,f.clip[c[0]]=a,f.clip[c[1]]=0,r&&(n.cssClip(f.clip),u&&u.css(t.effects.clipToBox(f)),f.clip=d),n.queue((function(i){u&&u.animate(t.effects.clipToBox(p),h,e.easing).animate(t.effects.clipToBox(f),h,e.easing),i()})).animate(p,h,e.easing).animate(f,h,e.easing).queue(i),t.effects.unshift(n,g,4)})),t.effects.define("highlight","show",(function(e,i){var n=t(this),o={backgroundColor:n.css("backgroundColor")};"hide"===e.mode&&(o.opacity=0),t.effects.saveStyle(n),n.css({backgroundImage:"none",backgroundColor:e.color||"#ffff99"}).animate(o,{queue:!1,duration:e.duration,easing:e.easing,complete:i})})),t.effects.define("size",(function(e,i){var n,o,r,s=t(this),a=["fontSize"],l=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],c=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],h=e.mode,u="effect"!==h,d=e.scale||"both",p=e.origin||["middle","center"],f=s.css("position"),m=s.position(),g=t.effects.scaledDimensions(s),y=e.from||g,v=e.to||t.effects.scaledDimensions(s,0);t.effects.createPlaceholder(s),"show"===h&&(r=y,y=v,v=r),o={from:{y:y.height/g.height,x:y.width/g.width},to:{y:v.height/g.height,x:v.width/g.width}},"box"!==d&&"both"!==d||(o.from.y!==o.to.y&&(y=t.effects.setTransition(s,l,o.from.y,y),v=t.effects.setTransition(s,l,o.to.y,v)),o.from.x!==o.to.x&&(y=t.effects.setTransition(s,c,o.from.x,y),v=t.effects.setTransition(s,c,o.to.x,v))),"content"!==d&&"both"!==d||o.from.y!==o.to.y&&(y=t.effects.setTransition(s,a,o.from.y,y),v=t.effects.setTransition(s,a,o.to.y,v)),p&&(n=t.effects.getBaseline(p,g),y.top=(g.outerHeight-y.outerHeight)*n.y+m.top,y.left=(g.outerWidth-y.outerWidth)*n.x+m.left,v.top=(g.outerHeight-v.outerHeight)*n.y+m.top,v.left=(g.outerWidth-v.outerWidth)*n.x+m.left),delete y.outerHeight,delete y.outerWidth,s.css(y),"content"!==d&&"both"!==d||(l=l.concat(["marginTop","marginBottom"]).concat(a),c=c.concat(["marginLeft","marginRight"]),s.find("*[width]").each((function(){var i=t(this),n=t.effects.scaledDimensions(i),r={height:n.height*o.from.y,width:n.width*o.from.x,outerHeight:n.outerHeight*o.from.y,outerWidth:n.outerWidth*o.from.x},s={height:n.height*o.to.y,width:n.width*o.to.x,outerHeight:n.height*o.to.y,outerWidth:n.width*o.to.x};o.from.y!==o.to.y&&(r=t.effects.setTransition(i,l,o.from.y,r),s=t.effects.setTransition(i,l,o.to.y,s)),o.from.x!==o.to.x&&(r=t.effects.setTransition(i,c,o.from.x,r),s=t.effects.setTransition(i,c,o.to.x,s)),u&&t.effects.saveStyle(i),i.css(r),i.animate(s,e.duration,e.easing,(function(){u&&t.effects.restoreStyle(i)}))}))),s.animate(v,{queue:!1,duration:e.duration,easing:e.easing,complete:function(){var e=s.offset();0===v.opacity&&s.css("opacity",y.opacity),u||(s.css("position","static"===f?"relative":f).offset(e),t.effects.saveStyle(s)),i()}})})),t.effects.define("scale",(function(e,i){var n=t(this),o=e.mode,r=parseInt(e.percent,10)||(0===parseInt(e.percent,10)||"effect"!==o?0:100),s=t.extend(!0,{from:t.effects.scaledDimensions(n),to:t.effects.scaledDimensions(n,r,e.direction||"both"),origin:e.origin||["middle","center"]},e);e.fade&&(s.from.opacity=1,s.to.opacity=0),t.effects.effect.size.call(this,s,i)})),t.effects.define("puff","hide",(function(e,i){var n=t.extend(!0,{},e,{fade:!0,percent:parseInt(e.percent,10)||150});t.effects.effect.scale.call(this,n,i)})),t.effects.define("pulsate","show",(function(e,i){var n=t(this),o=e.mode,r="show"===o,s=r||"hide"===o,a=2*(e.times||5)+(s?1:0),l=e.duration/a,c=0,h=1,u=n.queue().length;for(!r&&n.is(":visible")||(n.css("opacity",0).show(),c=1);h<a;h++)n.animate({opacity:c},l,e.easing),c=1-c;n.animate({opacity:c},l,e.easing),n.queue(i),t.effects.unshift(n,u,a+1)})),t.effects.define("shake",(function(e,i){var n=1,o=t(this),r=e.direction||"left",s=e.distance||20,a=e.times||3,l=2*a+1,c=Math.round(e.duration/l),h="up"===r||"down"===r?"top":"left",u="up"===r||"left"===r,d={},p={},f={},m=o.queue().length;for(t.effects.createPlaceholder(o),d[h]=(u?"-=":"+=")+s,p[h]=(u?"+=":"-=")+2*s,f[h]=(u?"-=":"+=")+2*s,o.animate(d,c,e.easing);n<a;n++)o.animate(p,c,e.easing).animate(f,c,e.easing);o.animate(p,c,e.easing).animate(d,c/2,e.easing).queue(i),t.effects.unshift(o,m,l+1)})),t.effects.define("slide","show",(function(e,i){var n,o,r=t(this),s={up:["bottom","top"],down:["top","bottom"],left:["right","left"],right:["left","right"]},a=e.mode,l=e.direction||"left",c="up"===l||"down"===l?"top":"left",h="up"===l||"left"===l,u=e.distance||r["top"===c?"outerHeight":"outerWidth"](!0),d={};t.effects.createPlaceholder(r),n=r.cssClip(),o=r.position()[c],d[c]=(h?-1:1)*u+o,d.clip=r.cssClip(),d.clip[s[l][1]]=d.clip[s[l][0]],"show"===a&&(r.cssClip(d.clip),r.css(c,d[c]),d.clip=n,d[c]=o),r.animate(d,{queue:!1,duration:e.duration,easing:e.easing,complete:i})}));
/*!
 * jQuery UI Effects Blind 1.13.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */!1!==t.uiBackCompat&&t.effects.define("transfer",(function(e,i){t(this).transfer(e,i)}));
/*!
 * jQuery UI Focusable 1.13.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
t.ui.focusable=function(e,i){var n,o,r,s,a,l=e.nodeName.toLowerCase();return"area"===l?(o=(n=e.parentNode).name,!(!e.href||!o||"map"!==n.nodeName.toLowerCase())&&((r=t("img[usemap='#"+o+"']")).length>0&&r.is(":visible"))):(/^(input|select|textarea|button|object)$/.test(l)?(s=!e.disabled)&&(a=t(e).closest("fieldset")[0])&&(s=!a.disabled):s="a"===l&&e.href||i,s&&t(e).is(":visible")&&function(t){var e=t.css("visibility");for(;"inherit"===e;)e=(t=t.parent()).css("visibility");return"visible"===e}(t(e)))},t.extend(t.expr.pseudos,{focusable:function(e){return t.ui.focusable(e,null!=t.attr(e,"tabindex"))}});t.ui.focusable,t.fn._form=function(){return"string"==typeof this[0].form?this.closest("form"):t(this[0].form)},t.ui.formResetMixin={_formResetHandler:function(){var e=t(this);setTimeout((function(){var i=e.data("ui-form-reset-instances");t.each(i,(function(){this.refresh()}))}))},_bindFormResetHandler:function(){if(this.form=this.element._form(),this.form.length){var t=this.form.data("ui-form-reset-instances")||[];t.length||this.form.on("reset.ui-form-reset",this._formResetHandler),t.push(this),this.form.data("ui-form-reset-instances",t)}},_unbindFormResetHandler:function(){if(this.form.length){var e=this.form.data("ui-form-reset-instances");e.splice(t.inArray(this,e),1),e.length?this.form.data("ui-form-reset-instances",e):this.form.removeData("ui-form-reset-instances").off("reset.ui-form-reset")}}};if(
/*!
 * jQuery UI Support for jQuery core 1.8.x and newer 1.13.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 */
t.expr.pseudos||(t.expr.pseudos=t.expr[":"]),t.uniqueSort||(t.uniqueSort=t.unique),!t.escapeSelector){var C=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g,T=function(t,e){return e?"\0"===t?"�":t.slice(0,-1)+"\\"+t.charCodeAt(t.length-1).toString(16)+" ":"\\"+t};t.escapeSelector=function(t){return(t+"").replace(C,T)}}t.fn.even&&t.fn.odd||t.fn.extend({even:function(){return this.filter((function(t){return t%2==0}))},odd:function(){return this.filter((function(t){return t%2==1}))}});
/*!
 * jQuery UI Keycode 1.13.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
var M;
/*!
 * jQuery UI Labels 1.13.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */t.ui.keyCode={BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38},t.fn.labels=function(){var e,i,n,o,r;return this.length?this[0].labels&&this[0].labels.length?this.pushStack(this[0].labels):(o=this.eq(0).parents("label"),(n=this.attr("id"))&&(r=(e=this.eq(0).parents().last()).add(e.length?e.siblings():this.siblings()),i="label[for='"+t.escapeSelector(n)+"']",o=o.add(r.find(i).addBack(i))),this.pushStack(o)):this.pushStack([])},t.fn.scrollParent=function(e){var i=this.css("position"),n="absolute"===i,o=e?/(auto|scroll|hidden)/:/(auto|scroll)/,r=this.parents().filter((function(){var e=t(this);return(!n||"static"!==e.css("position"))&&o.test(e.css("overflow")+e.css("overflow-y")+e.css("overflow-x"))})).eq(0);return"fixed"!==i&&r.length?r:t(this[0].ownerDocument||document)},t.extend(t.expr.pseudos,{tabbable:function(e){var i=t.attr(e,"tabindex"),n=null!=i;return(!n||i>=0)&&t.ui.focusable(e,n)}}),t.fn.extend({uniqueId:(M=0,function(){return this.each((function(){this.id||(this.id="ui-id-"+ ++M)}))}),removeUniqueId:function(){return this.each((function(){/^ui-id-\d+$/.test(this.id)&&t(this).removeAttr("id")}))}}),t.widget("ui.accordion",{version:"1.13.1",options:{active:0,animate:{},classes:{"ui-accordion-header":"ui-corner-top","ui-accordion-header-collapsed":"ui-corner-all","ui-accordion-content":"ui-corner-bottom"},collapsible:!1,event:"click",header:function(t){return t.find("> li > :first-child").add(t.find("> :not(li)").even())},heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},hideProps:{borderTopWidth:"hide",borderBottomWidth:"hide",paddingTop:"hide",paddingBottom:"hide",height:"hide"},showProps:{borderTopWidth:"show",borderBottomWidth:"show",paddingTop:"show",paddingBottom:"show",height:"show"},_create:function(){var e=this.options;this.prevShow=this.prevHide=t(),this._addClass("ui-accordion","ui-widget ui-helper-reset"),this.element.attr("role","tablist"),e.collapsible||!1!==e.active&&null!=e.active||(e.active=0),this._processPanels(),e.active<0&&(e.active+=this.headers.length),this._refresh()},_getCreateEventData:function(){return{header:this.active,panel:this.active.length?this.active.next():t()}},_createIcons:function(){var e,i,n=this.options.icons;n&&(e=t("<span>"),this._addClass(e,"ui-accordion-header-icon","ui-icon "+n.header),e.prependTo(this.headers),i=this.active.children(".ui-accordion-header-icon"),this._removeClass(i,n.header)._addClass(i,null,n.activeHeader)._addClass(this.headers,"ui-accordion-icons"))},_destroyIcons:function(){this._removeClass(this.headers,"ui-accordion-icons"),this.headers.children(".ui-accordion-header-icon").remove()},_destroy:function(){var t;this.element.removeAttr("role"),this.headers.removeAttr("role aria-expanded aria-selected aria-controls tabIndex").removeUniqueId(),this._destroyIcons(),t=this.headers.next().css("display","").removeAttr("role aria-hidden aria-labelledby").removeUniqueId(),"content"!==this.options.heightStyle&&t.css("height","")},_setOption:function(t,e){"active"!==t?("event"===t&&(this.options.event&&this._off(this.headers,this.options.event),this._setupEvents(e)),this._super(t,e),"collapsible"!==t||e||!1!==this.options.active||this._activate(0),"icons"===t&&(this._destroyIcons(),e&&this._createIcons())):this._activate(e)},_setOptionDisabled:function(t){this._super(t),this.element.attr("aria-disabled",t),this._toggleClass(null,"ui-state-disabled",!!t),this._toggleClass(this.headers.add(this.headers.next()),null,"ui-state-disabled",!!t)},_keydown:function(e){if(!e.altKey&&!e.ctrlKey){var i=t.ui.keyCode,n=this.headers.length,o=this.headers.index(e.target),r=!1;switch(e.keyCode){case i.RIGHT:case i.DOWN:r=this.headers[(o+1)%n];break;case i.LEFT:case i.UP:r=this.headers[(o-1+n)%n];break;case i.SPACE:case i.ENTER:this._eventHandler(e);break;case i.HOME:r=this.headers[0];break;case i.END:r=this.headers[n-1]}r&&(t(e.target).attr("tabIndex",-1),t(r).attr("tabIndex",0),t(r).trigger("focus"),e.preventDefault())}},_panelKeyDown:function(e){e.keyCode===t.ui.keyCode.UP&&e.ctrlKey&&t(e.currentTarget).prev().trigger("focus")},refresh:function(){var e=this.options;this._processPanels(),!1===e.active&&!0===e.collapsible||!this.headers.length?(e.active=!1,this.active=t()):!1===e.active?this._activate(0):this.active.length&&!t.contains(this.element[0],this.active[0])?this.headers.length===this.headers.find(".ui-state-disabled").length?(e.active=!1,this.active=t()):this._activate(Math.max(0,e.active-1)):e.active=this.headers.index(this.active),this._destroyIcons(),this._refresh()},_processPanels:function(){var t=this.headers,e=this.panels;"function"==typeof this.options.header?this.headers=this.options.header(this.element):this.headers=this.element.find(this.options.header),this._addClass(this.headers,"ui-accordion-header ui-accordion-header-collapsed","ui-state-default"),this.panels=this.headers.next().filter(":not(.ui-accordion-content-active)").hide(),this._addClass(this.panels,"ui-accordion-content","ui-helper-reset ui-widget-content"),e&&(this._off(t.not(this.headers)),this._off(e.not(this.panels)))},_refresh:function(){var e,i=this.options,n=i.heightStyle,o=this.element.parent();this.active=this._findActive(i.active),this._addClass(this.active,"ui-accordion-header-active","ui-state-active")._removeClass(this.active,"ui-accordion-header-collapsed"),this._addClass(this.active.next(),"ui-accordion-content-active"),this.active.next().show(),this.headers.attr("role","tab").each((function(){var e=t(this),i=e.uniqueId().attr("id"),n=e.next(),o=n.uniqueId().attr("id");e.attr("aria-controls",o),n.attr("aria-labelledby",i)})).next().attr("role","tabpanel"),this.headers.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}).next().attr({"aria-hidden":"true"}).hide(),this.active.length?this.active.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}).next().attr({"aria-hidden":"false"}):this.headers.eq(0).attr("tabIndex",0),this._createIcons(),this._setupEvents(i.event),"fill"===n?(e=o.height(),this.element.siblings(":visible").each((function(){var i=t(this),n=i.css("position");"absolute"!==n&&"fixed"!==n&&(e-=i.outerHeight(!0))})),this.headers.each((function(){e-=t(this).outerHeight(!0)})),this.headers.next().each((function(){t(this).height(Math.max(0,e-t(this).innerHeight()+t(this).height()))})).css("overflow","auto")):"auto"===n&&(e=0,this.headers.next().each((function(){var i=t(this).is(":visible");i||t(this).show(),e=Math.max(e,t(this).css("height","").height()),i||t(this).hide()})).height(e))},_activate:function(e){var i=this._findActive(e)[0];i!==this.active[0]&&(i=i||this.active[0],this._eventHandler({target:i,currentTarget:i,preventDefault:t.noop}))},_findActive:function(e){return"number"==typeof e?this.headers.eq(e):t()},_setupEvents:function(e){var i={keydown:"_keydown"};e&&t.each(e.split(" "),(function(t,e){i[e]="_eventHandler"})),this._off(this.headers.add(this.headers.next())),this._on(this.headers,i),this._on(this.headers.next(),{keydown:"_panelKeyDown"}),this._hoverable(this.headers),this._focusable(this.headers)},_eventHandler:function(e){var i,n,o=this.options,r=this.active,s=t(e.currentTarget),a=s[0]===r[0],l=a&&o.collapsible,c=l?t():s.next(),h=r.next(),u={oldHeader:r,oldPanel:h,newHeader:l?t():s,newPanel:c};e.preventDefault(),a&&!o.collapsible||!1===this._trigger("beforeActivate",e,u)||(o.active=!l&&this.headers.index(s),this.active=a?t():s,this._toggle(u),this._removeClass(r,"ui-accordion-header-active","ui-state-active"),o.icons&&(i=r.children(".ui-accordion-header-icon"),this._removeClass(i,null,o.icons.activeHeader)._addClass(i,null,o.icons.header)),a||(this._removeClass(s,"ui-accordion-header-collapsed")._addClass(s,"ui-accordion-header-active","ui-state-active"),o.icons&&(n=s.children(".ui-accordion-header-icon"),this._removeClass(n,null,o.icons.header)._addClass(n,null,o.icons.activeHeader)),this._addClass(s.next(),"ui-accordion-content-active")))},_toggle:function(e){var i=e.newPanel,n=this.prevShow.length?this.prevShow:e.oldPanel;this.prevShow.add(this.prevHide).stop(!0,!0),this.prevShow=i,this.prevHide=n,this.options.animate?this._animate(i,n,e):(n.hide(),i.show(),this._toggleComplete(e)),n.attr({"aria-hidden":"true"}),n.prev().attr({"aria-selected":"false","aria-expanded":"false"}),i.length&&n.length?n.prev().attr({tabIndex:-1,"aria-expanded":"false"}):i.length&&this.headers.filter((function(){return 0===parseInt(t(this).attr("tabIndex"),10)})).attr("tabIndex",-1),i.attr("aria-hidden","false").prev().attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0})},_animate:function(t,e,i){var n,o,r,s=this,a=0,l=t.css("box-sizing"),c=t.length&&(!e.length||t.index()<e.index()),h=this.options.animate||{},u=c&&h.down||h,d=function(){s._toggleComplete(i)};return"number"==typeof u&&(r=u),"string"==typeof u&&(o=u),o=o||u.easing||h.easing,r=r||u.duration||h.duration,e.length?t.length?(n=t.show().outerHeight(),e.animate(this.hideProps,{duration:r,easing:o,step:function(t,e){e.now=Math.round(t)}}),void t.hide().animate(this.showProps,{duration:r,easing:o,complete:d,step:function(t,i){i.now=Math.round(t),"height"!==i.prop?"content-box"===l&&(a+=i.now):"content"!==s.options.heightStyle&&(i.now=Math.round(n-e.outerHeight()-a),a=0)}})):e.animate(this.hideProps,r,o,d):t.animate(this.showProps,r,o,d)},_toggleComplete:function(t){var e=t.oldPanel,i=e.prev();this._removeClass(e,"ui-accordion-content-active"),this._removeClass(i,"ui-accordion-header-active")._addClass(i,"ui-accordion-header-collapsed"),e.length&&(e.parent()[0].className=e.parent()[0].className),this._trigger("activate",null,t)}}),t.ui.safeActiveElement=function(t){var e;try{e=t.activeElement}catch(i){e=t.body}return e||(e=t.body),e.nodeName||(e=t.body),e},t.widget("ui.menu",{version:"1.13.1",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-caret-1-e"},items:"> *",menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.lastMousePosition={x:null,y:null},this.element.uniqueId().attr({role:this.options.role,tabIndex:0}),this._addClass("ui-menu","ui-widget ui-widget-content"),this._on({"mousedown .ui-menu-item":function(t){t.preventDefault(),this._activateItem(t)},"click .ui-menu-item":function(e){var i=t(e.target),n=t(t.ui.safeActiveElement(this.document[0]));!this.mouseHandled&&i.not(".ui-state-disabled").length&&(this.select(e),e.isPropagationStopped()||(this.mouseHandled=!0),i.has(".ui-menu").length?this.expand(e):!this.element.is(":focus")&&n.closest(".ui-menu").length&&(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":"_activateItem","mousemove .ui-menu-item":"_activateItem",mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(t,e){var i=this.active||this._menuItems().first();e||this.focus(t,i)},blur:function(e){this._delay((function(){!t.contains(this.element[0],t.ui.safeActiveElement(this.document[0]))&&this.collapseAll(e)}))},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(t){this._closeOnDocumentClick(t)&&this.collapseAll(t,!0),this.mouseHandled=!1}})},_activateItem:function(e){if(!this.previousFilter&&(e.clientX!==this.lastMousePosition.x||e.clientY!==this.lastMousePosition.y)){this.lastMousePosition={x:e.clientX,y:e.clientY};var i=t(e.target).closest(".ui-menu-item"),n=t(e.currentTarget);i[0]===n[0]&&(n.is(".ui-state-active")||(this._removeClass(n.siblings().children(".ui-state-active"),null,"ui-state-active"),this.focus(e,n)))}},_destroy:function(){var e=this.element.find(".ui-menu-item").removeAttr("role aria-disabled").children(".ui-menu-item-wrapper").removeUniqueId().removeAttr("tabIndex role aria-haspopup");this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeAttr("role aria-labelledby aria-expanded aria-hidden aria-disabled tabIndex").removeUniqueId().show(),e.children().each((function(){var e=t(this);e.data("ui-menu-submenu-caret")&&e.remove()}))},_keydown:function(e){var i,n,o,r,s=!0;switch(e.keyCode){case t.ui.keyCode.PAGE_UP:this.previousPage(e);break;case t.ui.keyCode.PAGE_DOWN:this.nextPage(e);break;case t.ui.keyCode.HOME:this._move("first","first",e);break;case t.ui.keyCode.END:this._move("last","last",e);break;case t.ui.keyCode.UP:this.previous(e);break;case t.ui.keyCode.DOWN:this.next(e);break;case t.ui.keyCode.LEFT:this.collapse(e);break;case t.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(e);break;case t.ui.keyCode.ENTER:case t.ui.keyCode.SPACE:this._activate(e);break;case t.ui.keyCode.ESCAPE:this.collapse(e);break;default:s=!1,n=this.previousFilter||"",r=!1,o=e.keyCode>=96&&e.keyCode<=105?(e.keyCode-96).toString():String.fromCharCode(e.keyCode),clearTimeout(this.filterTimer),o===n?r=!0:o=n+o,i=this._filterMenuItems(o),(i=r&&-1!==i.index(this.active.next())?this.active.nextAll(".ui-menu-item"):i).length||(o=String.fromCharCode(e.keyCode),i=this._filterMenuItems(o)),i.length?(this.focus(e,i),this.previousFilter=o,this.filterTimer=this._delay((function(){delete this.previousFilter}),1e3)):delete this.previousFilter}s&&e.preventDefault()},_activate:function(t){this.active&&!this.active.is(".ui-state-disabled")&&(this.active.children("[aria-haspopup='true']").length?this.expand(t):this.select(t))},refresh:function(){var e,i,n,o,r=this,s=this.options.icons.submenu,a=this.element.find(this.options.menus);this._toggleClass("ui-menu-icons",null,!!this.element.find(".ui-icon").length),i=a.filter(":not(.ui-menu)").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each((function(){var e=t(this),i=e.prev(),n=t("<span>").data("ui-menu-submenu-caret",!0);r._addClass(n,"ui-menu-icon","ui-icon "+s),i.attr("aria-haspopup","true").prepend(n),e.attr("aria-labelledby",i.attr("id"))})),this._addClass(i,"ui-menu","ui-widget ui-widget-content ui-front"),(e=a.add(this.element).find(this.options.items)).not(".ui-menu-item").each((function(){var e=t(this);r._isDivider(e)&&r._addClass(e,"ui-menu-divider","ui-widget-content")})),o=(n=e.not(".ui-menu-item, .ui-menu-divider")).children().not(".ui-menu").uniqueId().attr({tabIndex:-1,role:this._itemRole()}),this._addClass(n,"ui-menu-item")._addClass(o,"ui-menu-item-wrapper"),e.filter(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!t.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(t,e){if("icons"===t){var i=this.element.find(".ui-menu-icon");this._removeClass(i,null,this.options.icons.submenu)._addClass(i,null,e.submenu)}this._super(t,e)},_setOptionDisabled:function(t){this._super(t),this.element.attr("aria-disabled",String(t)),this._toggleClass(null,"ui-state-disabled",!!t)},focus:function(t,e){var i,n,o;this.blur(t,t&&"focus"===t.type),this._scrollIntoView(e),this.active=e.first(),n=this.active.children(".ui-menu-item-wrapper"),this._addClass(n,null,"ui-state-active"),this.options.role&&this.element.attr("aria-activedescendant",n.attr("id")),o=this.active.parent().closest(".ui-menu-item").children(".ui-menu-item-wrapper"),this._addClass(o,null,"ui-state-active"),t&&"keydown"===t.type?this._close():this.timer=this._delay((function(){this._close()}),this.delay),(i=e.children(".ui-menu")).length&&t&&/^mouse/.test(t.type)&&this._startOpening(i),this.activeMenu=e.parent(),this._trigger("focus",t,{item:e})},_scrollIntoView:function(e){var i,n,o,r,s,a;this._hasScroll()&&(i=parseFloat(t.css(this.activeMenu[0],"borderTopWidth"))||0,n=parseFloat(t.css(this.activeMenu[0],"paddingTop"))||0,o=e.offset().top-this.activeMenu.offset().top-i-n,r=this.activeMenu.scrollTop(),s=this.activeMenu.height(),a=e.outerHeight(),o<0?this.activeMenu.scrollTop(r+o):o+a>s&&this.activeMenu.scrollTop(r+o-s+a))},blur:function(t,e){e||clearTimeout(this.timer),this.active&&(this._removeClass(this.active.children(".ui-menu-item-wrapper"),null,"ui-state-active"),this._trigger("blur",t,{item:this.active}),this.active=null)},_startOpening:function(t){clearTimeout(this.timer),"true"===t.attr("aria-hidden")&&(this.timer=this._delay((function(){this._close(),this._open(t)}),this.delay))},_open:function(e){var i=t.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(e.parents(".ui-menu")).hide().attr("aria-hidden","true"),e.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(i)},collapseAll:function(e,i){clearTimeout(this.timer),this.timer=this._delay((function(){var n=i?this.element:t(e&&e.target).closest(this.element.find(".ui-menu"));n.length||(n=this.element),this._close(n),this.blur(e),this._removeClass(n.find(".ui-state-active"),null,"ui-state-active"),this.activeMenu=n}),i?0:this.delay)},_close:function(t){t||(t=this.active?this.active.parent():this.element),t.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false")},_closeOnDocumentClick:function(e){return!t(e.target).closest(".ui-menu").length},_isDivider:function(t){return!/[^\-\u2014\u2013\s]/.test(t.text())},collapse:function(t){var e=this.active&&this.active.parent().closest(".ui-menu-item",this.element);e&&e.length&&(this._close(),this.focus(t,e))},expand:function(t){var e=this.active&&this._menuItems(this.active.children(".ui-menu")).first();e&&e.length&&(this._open(e.parent()),this._delay((function(){this.focus(t,e)})))},next:function(t){this._move("next","first",t)},previous:function(t){this._move("prev","last",t)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_menuItems:function(t){return(t||this.element).find(this.options.items).filter(".ui-menu-item")},_move:function(t,e,i){var n;this.active&&(n="first"===t||"last"===t?this.active["first"===t?"prevAll":"nextAll"](".ui-menu-item").last():this.active[t+"All"](".ui-menu-item").first()),n&&n.length&&this.active||(n=this._menuItems(this.activeMenu)[e]()),this.focus(i,n)},nextPage:function(e){var i,n,o;this.active?this.isLastItem()||(this._hasScroll()?(n=this.active.offset().top,o=this.element.innerHeight(),0===t.fn.jquery.indexOf("3.2.")&&(o+=this.element[0].offsetHeight-this.element.outerHeight()),this.active.nextAll(".ui-menu-item").each((function(){return(i=t(this)).offset().top-n-o<0})),this.focus(e,i)):this.focus(e,this._menuItems(this.activeMenu)[this.active?"last":"first"]())):this.next(e)},previousPage:function(e){var i,n,o;this.active?this.isFirstItem()||(this._hasScroll()?(n=this.active.offset().top,o=this.element.innerHeight(),0===t.fn.jquery.indexOf("3.2.")&&(o+=this.element[0].offsetHeight-this.element.outerHeight()),this.active.prevAll(".ui-menu-item").each((function(){return(i=t(this)).offset().top-n+o>0})),this.focus(e,i)):this.focus(e,this._menuItems(this.activeMenu).first())):this.next(e)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(e){this.active=this.active||t(e.target).closest(".ui-menu-item");var i={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(e,!0),this._trigger("select",e,i)},_filterMenuItems:function(e){var i=e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&"),n=new RegExp("^"+i,"i");return this.activeMenu.find(this.options.items).filter(".ui-menu-item").filter((function(){return n.test(String.prototype.trim.call(t(this).children(".ui-menu-item-wrapper").text()))}))}});
/*!
 * jQuery UI Autocomplete 1.13.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
t.widget("ui.autocomplete",{version:"1.13.1",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},requestIndex:0,pending:0,liveRegionTimer:null,_create:function(){var e,i,n,o=this.element[0].nodeName.toLowerCase(),r="textarea"===o,s="input"===o;this.isMultiLine=r||!s&&this._isContentEditable(this.element),this.valueMethod=this.element[r||s?"val":"text"],this.isNewMenu=!0,this._addClass("ui-autocomplete-input"),this.element.attr("autocomplete","off"),this._on(this.element,{keydown:function(o){if(this.element.prop("readOnly"))return e=!0,n=!0,void(i=!0);e=!1,n=!1,i=!1;var r=t.ui.keyCode;switch(o.keyCode){case r.PAGE_UP:e=!0,this._move("previousPage",o);break;case r.PAGE_DOWN:e=!0,this._move("nextPage",o);break;case r.UP:e=!0,this._keyEvent("previous",o);break;case r.DOWN:e=!0,this._keyEvent("next",o);break;case r.ENTER:this.menu.active&&(e=!0,o.preventDefault(),this.menu.select(o));break;case r.TAB:this.menu.active&&this.menu.select(o);break;case r.ESCAPE:this.menu.element.is(":visible")&&(this.isMultiLine||this._value(this.term),this.close(o),o.preventDefault());break;default:i=!0,this._searchTimeout(o)}},keypress:function(n){if(e)return e=!1,void(this.isMultiLine&&!this.menu.element.is(":visible")||n.preventDefault());if(!i){var o=t.ui.keyCode;switch(n.keyCode){case o.PAGE_UP:this._move("previousPage",n);break;case o.PAGE_DOWN:this._move("nextPage",n);break;case o.UP:this._keyEvent("previous",n);break;case o.DOWN:this._keyEvent("next",n)}}},input:function(t){if(n)return n=!1,void t.preventDefault();this._searchTimeout(t)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(t){clearTimeout(this.searching),this.close(t),this._change(t)}}),this._initSource(),this.menu=t("<ul>").appendTo(this._appendTo()).menu({role:null}).hide().attr({unselectable:"on"}).menu("instance"),this._addClass(this.menu.element,"ui-autocomplete","ui-front"),this._on(this.menu.element,{mousedown:function(t){t.preventDefault()},menufocus:function(e,i){var n,o;if(this.isNewMenu&&(this.isNewMenu=!1,e.originalEvent&&/^mouse/.test(e.originalEvent.type)))return this.menu.blur(),void this.document.one("mousemove",(function(){t(e.target).trigger(e.originalEvent)}));o=i.item.data("ui-autocomplete-item"),!1!==this._trigger("focus",e,{item:o})&&e.originalEvent&&/^key/.test(e.originalEvent.type)&&this._value(o.value),(n=i.item.attr("aria-label")||o.value)&&String.prototype.trim.call(n).length&&(clearTimeout(this.liveRegionTimer),this.liveRegionTimer=this._delay((function(){this.liveRegion.html(t("<div>").text(n))}),100))},menuselect:function(e,i){var n=i.item.data("ui-autocomplete-item"),o=this.previous;this.element[0]!==t.ui.safeActiveElement(this.document[0])&&(this.element.trigger("focus"),this.previous=o,this._delay((function(){this.previous=o,this.selectedItem=n}))),!1!==this._trigger("select",e,{item:n})&&this._value(n.value),this.term=this._value(),this.close(e),this.selectedItem=n}}),this.liveRegion=t("<div>",{role:"status","aria-live":"assertive","aria-relevant":"additions"}).appendTo(this.document[0].body),this._addClass(this.liveRegion,null,"ui-helper-hidden-accessible"),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(t,e){this._super(t,e),"source"===t&&this._initSource(),"appendTo"===t&&this.menu.element.appendTo(this._appendTo()),"disabled"===t&&e&&this.xhr&&this.xhr.abort()},_isEventTargetInWidget:function(e){var i=this.menu.element[0];return e.target===this.element[0]||e.target===i||t.contains(i,e.target)},_closeOnClickOutside:function(t){this._isEventTargetInWidget(t)||this.close()},_appendTo:function(){var e=this.options.appendTo;return e&&(e=e.jquery||e.nodeType?t(e):this.document.find(e).eq(0)),e&&e[0]||(e=this.element.closest(".ui-front, dialog")),e.length||(e=this.document[0].body),e},_initSource:function(){var e,i,n=this;Array.isArray(this.options.source)?(e=this.options.source,this.source=function(i,n){n(t.ui.autocomplete.filter(e,i.term))}):"string"==typeof this.options.source?(i=this.options.source,this.source=function(e,o){n.xhr&&n.xhr.abort(),n.xhr=t.ajax({url:i,data:e,dataType:"json",success:function(t){o(t)},error:function(){o([])}})}):this.source=this.options.source},_searchTimeout:function(t){clearTimeout(this.searching),this.searching=this._delay((function(){var e=this.term===this._value(),i=this.menu.element.is(":visible"),n=t.altKey||t.ctrlKey||t.metaKey||t.shiftKey;e&&(!e||i||n)||(this.selectedItem=null,this.search(null,t))}),this.options.delay)},search:function(t,e){return t=null!=t?t:this._value(),this.term=this._value(),t.length<this.options.minLength?this.close(e):!1!==this._trigger("search",e)?this._search(t):void 0},_search:function(t){this.pending++,this._addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:t},this._response())},_response:function(){var t=++this.requestIndex;return function(e){t===this.requestIndex&&this.__response(e),this.pending--,this.pending||this._removeClass("ui-autocomplete-loading")}.bind(this)},__response:function(t){t&&(t=this._normalize(t)),this._trigger("response",null,{content:t}),!this.options.disabled&&t&&t.length&&!this.cancelSearch?(this._suggest(t),this._trigger("open")):this._close()},close:function(t){this.cancelSearch=!0,this._close(t)},_close:function(t){this._off(this.document,"mousedown"),this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",t))},_change:function(t){this.previous!==this._value()&&this._trigger("change",t,{item:this.selectedItem})},_normalize:function(e){return e.length&&e[0].label&&e[0].value?e:t.map(e,(function(e){return"string"==typeof e?{label:e,value:e}:t.extend({},e,{label:e.label||e.value,value:e.value||e.label})}))},_suggest:function(e){var i=this.menu.element.empty();this._renderMenu(i,e),this.isNewMenu=!0,this.menu.refresh(),i.show(),this._resizeMenu(),i.position(t.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next(),this._on(this.document,{mousedown:"_closeOnClickOutside"})},_resizeMenu:function(){var t=this.menu.element;t.outerWidth(Math.max(t.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(e,i){var n=this;t.each(i,(function(t,i){n._renderItemData(e,i)}))},_renderItemData:function(t,e){return this._renderItem(t,e).data("ui-autocomplete-item",e)},_renderItem:function(e,i){return t("<li>").append(t("<div>").text(i.label)).appendTo(e)},_move:function(t,e){if(this.menu.element.is(":visible"))return this.menu.isFirstItem()&&/^previous/.test(t)||this.menu.isLastItem()&&/^next/.test(t)?(this.isMultiLine||this._value(this.term),void this.menu.blur()):void this.menu[t](e);this.search(null,e)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(t,e){this.isMultiLine&&!this.menu.element.is(":visible")||(this._move(t,e),e.preventDefault())},_isContentEditable:function(t){if(!t.length)return!1;var e=t.prop("contentEditable");return"inherit"===e?this._isContentEditable(t.parent()):"true"===e}}),t.extend(t.ui.autocomplete,{escapeRegex:function(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(e,i){var n=new RegExp(t.ui.autocomplete.escapeRegex(i),"i");return t.grep(e,(function(t){return n.test(t.label||t.value||t)}))}}),t.widget("ui.autocomplete",t.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(t){return t+(t>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(e){var i;this._superApply(arguments),this.options.disabled||this.cancelSearch||(i=e&&e.length?this.options.messages.results(e.length):this.options.messages.noResults,clearTimeout(this.liveRegionTimer),this.liveRegionTimer=this._delay((function(){this.liveRegion.html(t("<div>").text(i))}),100))}});t.ui.autocomplete;
/*!
 * jQuery UI Controlgroup 1.13.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */var P=/ui-corner-([a-z]){2,6}/g;t.widget("ui.controlgroup",{version:"1.13.1",defaultElement:"<div>",options:{direction:"horizontal",disabled:null,onlyVisible:!0,items:{button:"input[type=button], input[type=submit], input[type=reset], button, a",controlgroupLabel:".ui-controlgroup-label",checkboxradio:"input[type='checkbox'], input[type='radio']",selectmenu:"select",spinner:".ui-spinner-input"}},_create:function(){this._enhance()},_enhance:function(){this.element.attr("role","toolbar"),this.refresh()},_destroy:function(){this._callChildMethod("destroy"),this.childWidgets.removeData("ui-controlgroup-data"),this.element.removeAttr("role"),this.options.items.controlgroupLabel&&this.element.find(this.options.items.controlgroupLabel).find(".ui-controlgroup-label-contents").contents().unwrap()},_initWidgets:function(){var e=this,i=[];t.each(this.options.items,(function(n,o){var r,s={};if(o)return"controlgroupLabel"===n?((r=e.element.find(o)).each((function(){var e=t(this);e.children(".ui-controlgroup-label-contents").length||e.contents().wrapAll("<span class='ui-controlgroup-label-contents'></span>")})),e._addClass(r,null,"ui-widget ui-widget-content ui-state-default"),void(i=i.concat(r.get()))):void(t.fn[n]&&(s=e["_"+n+"Options"]?e["_"+n+"Options"]("middle"):{classes:{}},e.element.find(o).each((function(){var o=t(this),r=o[n]("instance"),a=t.widget.extend({},s);if("button"!==n||!o.parent(".ui-spinner").length){r||(r=o[n]()[n]("instance")),r&&(a.classes=e._resolveClassesValues(a.classes,r)),o[n](a);var l=o[n]("widget");t.data(l[0],"ui-controlgroup-data",r||o[n]("instance")),i.push(l[0])}}))))})),this.childWidgets=t(t.uniqueSort(i)),this._addClass(this.childWidgets,"ui-controlgroup-item")},_callChildMethod:function(e){this.childWidgets.each((function(){var i=t(this).data("ui-controlgroup-data");i&&i[e]&&i[e]()}))},_updateCornerClass:function(t,e){var i=this._buildSimpleOptions(e,"label").classes.label;this._removeClass(t,null,"ui-corner-top ui-corner-bottom ui-corner-left ui-corner-right ui-corner-all"),this._addClass(t,null,i)},_buildSimpleOptions:function(t,e){var i="vertical"===this.options.direction,n={classes:{}};return n.classes[e]={middle:"",first:"ui-corner-"+(i?"top":"left"),last:"ui-corner-"+(i?"bottom":"right"),only:"ui-corner-all"}[t],n},_spinnerOptions:function(t){var e=this._buildSimpleOptions(t,"ui-spinner");return e.classes["ui-spinner-up"]="",e.classes["ui-spinner-down"]="",e},_buttonOptions:function(t){return this._buildSimpleOptions(t,"ui-button")},_checkboxradioOptions:function(t){return this._buildSimpleOptions(t,"ui-checkboxradio-label")},_selectmenuOptions:function(t){var e="vertical"===this.options.direction;return{width:!!e&&"auto",classes:{middle:{"ui-selectmenu-button-open":"","ui-selectmenu-button-closed":""},first:{"ui-selectmenu-button-open":"ui-corner-"+(e?"top":"tl"),"ui-selectmenu-button-closed":"ui-corner-"+(e?"top":"left")},last:{"ui-selectmenu-button-open":e?"":"ui-corner-tr","ui-selectmenu-button-closed":"ui-corner-"+(e?"bottom":"right")},only:{"ui-selectmenu-button-open":"ui-corner-top","ui-selectmenu-button-closed":"ui-corner-all"}}[t]}},_resolveClassesValues:function(e,i){var n={};return t.each(e,(function(t){var o=i.options.classes[t]||"";o=String.prototype.trim.call(o.replace(P,"")),n[t]=(o+" "+e[t]).replace(/\s+/g," ")})),n},_setOption:function(t,e){"direction"===t&&this._removeClass("ui-controlgroup-"+this.options.direction),this._super(t,e),"disabled"!==t?this.refresh():this._callChildMethod(e?"disable":"enable")},refresh:function(){var e,i=this;this._addClass("ui-controlgroup ui-controlgroup-"+this.options.direction),"horizontal"===this.options.direction&&this._addClass(null,"ui-helper-clearfix"),this._initWidgets(),e=this.childWidgets,this.options.onlyVisible&&(e=e.filter(":visible")),e.length&&(t.each(["first","last"],(function(t,n){var o=e[n]().data("ui-controlgroup-data");if(o&&i["_"+o.widgetName+"Options"]){var r=i["_"+o.widgetName+"Options"](1===e.length?"only":n);r.classes=i._resolveClassesValues(r.classes,o),o.element[o.widgetName](r)}else i._updateCornerClass(e[n](),n)})),this._callChildMethod("refresh"))}});
/*!
 * jQuery UI Checkboxradio 1.13.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
t.widget("ui.checkboxradio",[t.ui.formResetMixin,{version:"1.13.1",options:{disabled:null,label:null,icon:!0,classes:{"ui-checkboxradio-label":"ui-corner-all","ui-checkboxradio-icon":"ui-corner-all"}},_getCreateOptions:function(){var e,i,n=this,o=this._super()||{};return this._readType(),i=this.element.labels(),this.label=t(i[i.length-1]),this.label.length||t.error("No label found for checkboxradio widget"),this.originalLabel="",this.label.contents().not(this.element[0]).each((function(){n.originalLabel+=3===this.nodeType?t(this).text():this.outerHTML})),this.originalLabel&&(o.label=this.originalLabel),null!=(e=this.element[0].disabled)&&(o.disabled=e),o},_create:function(){var t=this.element[0].checked;this._bindFormResetHandler(),null==this.options.disabled&&(this.options.disabled=this.element[0].disabled),this._setOption("disabled",this.options.disabled),this._addClass("ui-checkboxradio","ui-helper-hidden-accessible"),this._addClass(this.label,"ui-checkboxradio-label","ui-button ui-widget"),"radio"===this.type&&this._addClass(this.label,"ui-checkboxradio-radio-label"),this.options.label&&this.options.label!==this.originalLabel?this._updateLabel():this.originalLabel&&(this.options.label=this.originalLabel),this._enhance(),t&&this._addClass(this.label,"ui-checkboxradio-checked","ui-state-active"),this._on({change:"_toggleClasses",focus:function(){this._addClass(this.label,null,"ui-state-focus ui-visual-focus")},blur:function(){this._removeClass(this.label,null,"ui-state-focus ui-visual-focus")}})},_readType:function(){var e=this.element[0].nodeName.toLowerCase();this.type=this.element[0].type,"input"===e&&/radio|checkbox/.test(this.type)||t.error("Can't create checkboxradio on element.nodeName="+e+" and element.type="+this.type)},_enhance:function(){this._updateIcon(this.element[0].checked)},widget:function(){return this.label},_getRadioGroup:function(){var e=this.element[0].name,i="input[name='"+t.escapeSelector(e)+"']";return e?(this.form.length?t(this.form[0].elements).filter(i):t(i).filter((function(){return 0===t(this)._form().length}))).not(this.element):t([])},_toggleClasses:function(){var e=this.element[0].checked;this._toggleClass(this.label,"ui-checkboxradio-checked","ui-state-active",e),this.options.icon&&"checkbox"===this.type&&this._toggleClass(this.icon,null,"ui-icon-check ui-state-checked",e)._toggleClass(this.icon,null,"ui-icon-blank",!e),"radio"===this.type&&this._getRadioGroup().each((function(){var e=t(this).checkboxradio("instance");e&&e._removeClass(e.label,"ui-checkboxradio-checked","ui-state-active")}))},_destroy:function(){this._unbindFormResetHandler(),this.icon&&(this.icon.remove(),this.iconSpace.remove())},_setOption:function(t,e){if("label"!==t||e){if(this._super(t,e),"disabled"===t)return this._toggleClass(this.label,null,"ui-state-disabled",e),void(this.element[0].disabled=e);this.refresh()}},_updateIcon:function(e){var i="ui-icon ui-icon-background ";this.options.icon?(this.icon||(this.icon=t("<span>"),this.iconSpace=t("<span> </span>"),this._addClass(this.iconSpace,"ui-checkboxradio-icon-space")),"checkbox"===this.type?(i+=e?"ui-icon-check ui-state-checked":"ui-icon-blank",this._removeClass(this.icon,null,e?"ui-icon-blank":"ui-icon-check")):i+="ui-icon-blank",this._addClass(this.icon,"ui-checkboxradio-icon",i),e||this._removeClass(this.icon,null,"ui-icon-check ui-state-checked"),this.icon.prependTo(this.label).after(this.iconSpace)):void 0!==this.icon&&(this.icon.remove(),this.iconSpace.remove(),delete this.icon)},_updateLabel:function(){var t=this.label.contents().not(this.element[0]);this.icon&&(t=t.not(this.icon[0])),this.iconSpace&&(t=t.not(this.iconSpace[0])),t.remove(),this.label.append(this.options.label)},refresh:function(){var t=this.element[0].checked,e=this.element[0].disabled;this._updateIcon(t),this._toggleClass(this.label,"ui-checkboxradio-checked","ui-state-active",t),null!==this.options.label&&this._updateLabel(),e!==this.options.disabled&&this._setOptions({disabled:e})}}]);t.ui.checkboxradio;
/*!
 * jQuery UI Button 1.13.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */t.widget("ui.button",{version:"1.13.1",defaultElement:"<button>",options:{classes:{"ui-button":"ui-corner-all"},disabled:null,icon:null,iconPosition:"beginning",label:null,showLabel:!0},_getCreateOptions:function(){var t,e=this._super()||{};return this.isInput=this.element.is("input"),null!=(t=this.element[0].disabled)&&(e.disabled=t),this.originalLabel=this.isInput?this.element.val():this.element.html(),this.originalLabel&&(e.label=this.originalLabel),e},_create:function(){!this.option.showLabel&!this.options.icon&&(this.options.showLabel=!0),null==this.options.disabled&&(this.options.disabled=this.element[0].disabled||!1),this.hasTitle=!!this.element.attr("title"),this.options.label&&this.options.label!==this.originalLabel&&(this.isInput?this.element.val(this.options.label):this.element.html(this.options.label)),this._addClass("ui-button","ui-widget"),this._setOption("disabled",this.options.disabled),this._enhance(),this.element.is("a")&&this._on({keyup:function(e){e.keyCode===t.ui.keyCode.SPACE&&(e.preventDefault(),this.element[0].click?this.element[0].click():this.element.trigger("click"))}})},_enhance:function(){this.element.is("button")||this.element.attr("role","button"),this.options.icon&&(this._updateIcon("icon",this.options.icon),this._updateTooltip())},_updateTooltip:function(){this.title=this.element.attr("title"),this.options.showLabel||this.title||this.element.attr("title",this.options.label)},_updateIcon:function(e,i){var n="iconPosition"!==e,o=n?this.options.iconPosition:i,r="top"===o||"bottom"===o;this.icon?n&&this._removeClass(this.icon,null,this.options.icon):(this.icon=t("<span>"),this._addClass(this.icon,"ui-button-icon","ui-icon"),this.options.showLabel||this._addClass("ui-button-icon-only")),n&&this._addClass(this.icon,null,i),this._attachIcon(o),r?(this._addClass(this.icon,null,"ui-widget-icon-block"),this.iconSpace&&this.iconSpace.remove()):(this.iconSpace||(this.iconSpace=t("<span> </span>"),this._addClass(this.iconSpace,"ui-button-icon-space")),this._removeClass(this.icon,null,"ui-wiget-icon-block"),this._attachIconSpace(o))},_destroy:function(){this.element.removeAttr("role"),this.icon&&this.icon.remove(),this.iconSpace&&this.iconSpace.remove(),this.hasTitle||this.element.removeAttr("title")},_attachIconSpace:function(t){this.icon[/^(?:end|bottom)/.test(t)?"before":"after"](this.iconSpace)},_attachIcon:function(t){this.element[/^(?:end|bottom)/.test(t)?"append":"prepend"](this.icon)},_setOptions:function(t){var e=void 0===t.showLabel?this.options.showLabel:t.showLabel,i=void 0===t.icon?this.options.icon:t.icon;e||i||(t.showLabel=!0),this._super(t)},_setOption:function(t,e){"icon"===t&&(e?this._updateIcon(t,e):this.icon&&(this.icon.remove(),this.iconSpace&&this.iconSpace.remove())),"iconPosition"===t&&this._updateIcon(t,e),"showLabel"===t&&(this._toggleClass("ui-button-icon-only",null,!e),this._updateTooltip()),"label"===t&&(this.isInput?this.element.val(e):(this.element.html(e),this.icon&&(this._attachIcon(this.options.iconPosition),this._attachIconSpace(this.options.iconPosition)))),this._super(t,e),"disabled"===t&&(this._toggleClass(null,"ui-state-disabled",e),this.element[0].disabled=e,e&&this.element.trigger("blur"))},refresh:function(){var t=this.element.is("input, button")?this.element[0].disabled:this.element.hasClass("ui-button-disabled");t!==this.options.disabled&&this._setOptions({disabled:t}),this._updateTooltip()}}),!1!==t.uiBackCompat&&(t.widget("ui.button",t.ui.button,{options:{text:!0,icons:{primary:null,secondary:null}},_create:function(){this.options.showLabel&&!this.options.text&&(this.options.showLabel=this.options.text),!this.options.showLabel&&this.options.text&&(this.options.text=this.options.showLabel),this.options.icon||!this.options.icons.primary&&!this.options.icons.secondary?this.options.icon&&(this.options.icons.primary=this.options.icon):this.options.icons.primary?this.options.icon=this.options.icons.primary:(this.options.icon=this.options.icons.secondary,this.options.iconPosition="end"),this._super()},_setOption:function(t,e){"text"!==t?("showLabel"===t&&(this.options.text=e),"icon"===t&&(this.options.icons.primary=e),"icons"===t&&(e.primary?(this._super("icon",e.primary),this._super("iconPosition","beginning")):e.secondary&&(this._super("icon",e.secondary),this._super("iconPosition","end"))),this._superApply(arguments)):this._super("showLabel",e)}}),t.fn.button=function(e){return function(i){var n="string"==typeof i,o=Array.prototype.slice.call(arguments,1),r=this;return n?this.length||"instance"!==i?this.each((function(){var e,n=t(this).attr("type"),s="checkbox"!==n&&"radio"!==n?"button":"checkboxradio",a=t.data(this,"ui-"+s);return"instance"===i?(r=a,!1):a?"function"!=typeof a[i]||"_"===i.charAt(0)?t.error("no such method '"+i+"' for button widget instance"):(e=a[i].apply(a,o))!==a&&void 0!==e?(r=e&&e.jquery?r.pushStack(e.get()):e,!1):void 0:t.error("cannot call methods on button prior to initialization; attempted to call method '"+i+"'")})):r=void 0:(o.length&&(i=t.widget.extend.apply(null,[i].concat(o))),this.each((function(){var n=t(this).attr("type"),o="checkbox"!==n&&"radio"!==n?"button":"checkboxradio",r=t.data(this,"ui-"+o);if(r)r.option(i||{}),r._init&&r._init();else{if("button"===o)return void e.call(t(this),i);t(this).checkboxradio(t.extend({icon:!1},i))}}))),r}}(t.fn.button),t.fn.buttonset=function(){return t.ui.controlgroup||t.error("Controlgroup widget missing"),"option"===arguments[0]&&"items"===arguments[1]&&arguments[2]?this.controlgroup.apply(this,[arguments[0],"items.button",arguments[2]]):"option"===arguments[0]&&"items"===arguments[1]?this.controlgroup.apply(this,[arguments[0],"items.button"]):("object"==typeof arguments[0]&&arguments[0].items&&(arguments[0].items={button:arguments[0].items}),this.controlgroup.apply(this,arguments))});var E;
/*!
 * jQuery UI Datepicker 1.13.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */t.ui.button;function I(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:"",selectMonthLabel:"Select month",selectYearLabel:"Select year"},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,onUpdateDatepicker:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},t.extend(this._defaults,this.regional[""]),this.regional.en=t.extend(!0,{},this.regional[""]),this.regional["en-US"]=t.extend(!0,{},this.regional.en),this.dpDiv=A(t("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function A(e){var i="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return e.on("mouseout",i,(function(){t(this).removeClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&t(this).removeClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&t(this).removeClass("ui-datepicker-next-hover")})).on("mouseover",i,D)}function D(){t.datepicker._isDisabledDatepicker(E.inline?E.dpDiv.parent()[0]:E.input[0])||(t(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),t(this).addClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&t(this).addClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&t(this).addClass("ui-datepicker-next-hover"))}function R(e,i){for(var n in t.extend(e,i),i)null==i[n]&&(e[n]=i[n]);return e}t.extend(t.ui,{datepicker:{version:"1.13.1"}}),t.extend(I.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(t){return R(this._defaults,t||{}),this},_attachDatepicker:function(e,i){var n,o,r;o="div"===(n=e.nodeName.toLowerCase())||"span"===n,e.id||(this.uuid+=1,e.id="dp"+this.uuid),(r=this._newInst(t(e),o)).settings=t.extend({},i||{}),"input"===n?this._connectDatepicker(e,r):o&&this._inlineDatepicker(e,r)},_newInst:function(e,i){return{id:e[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1"),input:e,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:i,dpDiv:i?A(t("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(e,i){var n=t(e);i.append=t([]),i.trigger=t([]),n.hasClass(this.markerClassName)||(this._attachments(n,i),n.addClass(this.markerClassName).on("keydown",this._doKeyDown).on("keypress",this._doKeyPress).on("keyup",this._doKeyUp),this._autoSize(i),t.data(e,"datepicker",i),i.settings.disabled&&this._disableDatepicker(e))},_attachments:function(e,i){var n,o,r,s=this._get(i,"appendText"),a=this._get(i,"isRTL");i.append&&i.append.remove(),s&&(i.append=t("<span>").addClass(this._appendClass).text(s),e[a?"before":"after"](i.append)),e.off("focus",this._showDatepicker),i.trigger&&i.trigger.remove(),"focus"!==(n=this._get(i,"showOn"))&&"both"!==n||e.on("focus",this._showDatepicker),"button"!==n&&"both"!==n||(o=this._get(i,"buttonText"),r=this._get(i,"buttonImage"),this._get(i,"buttonImageOnly")?i.trigger=t("<img>").addClass(this._triggerClass).attr({src:r,alt:o,title:o}):(i.trigger=t("<button type='button'>").addClass(this._triggerClass),r?i.trigger.html(t("<img>").attr({src:r,alt:o,title:o})):i.trigger.text(o)),e[a?"before":"after"](i.trigger),i.trigger.on("click",(function(){return t.datepicker._datepickerShowing&&t.datepicker._lastInput===e[0]?t.datepicker._hideDatepicker():t.datepicker._datepickerShowing&&t.datepicker._lastInput!==e[0]?(t.datepicker._hideDatepicker(),t.datepicker._showDatepicker(e[0])):t.datepicker._showDatepicker(e[0]),!1})))},_autoSize:function(t){if(this._get(t,"autoSize")&&!t.inline){var e,i,n,o,r=new Date(2009,11,20),s=this._get(t,"dateFormat");s.match(/[DM]/)&&(e=function(t){for(i=0,n=0,o=0;o<t.length;o++)t[o].length>i&&(i=t[o].length,n=o);return n},r.setMonth(e(this._get(t,s.match(/MM/)?"monthNames":"monthNamesShort"))),r.setDate(e(this._get(t,s.match(/DD/)?"dayNames":"dayNamesShort"))+20-r.getDay())),t.input.attr("size",this._formatDate(t,r).length)}},_inlineDatepicker:function(e,i){var n=t(e);n.hasClass(this.markerClassName)||(n.addClass(this.markerClassName).append(i.dpDiv),t.data(e,"datepicker",i),this._setDate(i,this._getDefaultDate(i),!0),this._updateDatepicker(i),this._updateAlternate(i),i.settings.disabled&&this._disableDatepicker(e),i.dpDiv.css("display","block"))},_dialogDatepicker:function(e,i,n,o,r){var s,a,l,c,h,u=this._dialogInst;return u||(this.uuid+=1,s="dp"+this.uuid,this._dialogInput=t("<input type='text' id='"+s+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.on("keydown",this._doKeyDown),t("body").append(this._dialogInput),(u=this._dialogInst=this._newInst(this._dialogInput,!1)).settings={},t.data(this._dialogInput[0],"datepicker",u)),R(u.settings,o||{}),i=i&&i.constructor===Date?this._formatDate(u,i):i,this._dialogInput.val(i),this._pos=r?r.length?r:[r.pageX,r.pageY]:null,this._pos||(a=document.documentElement.clientWidth,l=document.documentElement.clientHeight,c=document.documentElement.scrollLeft||document.body.scrollLeft,h=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[a/2-100+c,l/2-150+h]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),u.settings.onSelect=n,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),t.blockUI&&t.blockUI(this.dpDiv),t.data(this._dialogInput[0],"datepicker",u),this},_destroyDatepicker:function(e){var i,n=t(e),o=t.data(e,"datepicker");n.hasClass(this.markerClassName)&&(i=e.nodeName.toLowerCase(),t.removeData(e,"datepicker"),"input"===i?(o.append.remove(),o.trigger.remove(),n.removeClass(this.markerClassName).off("focus",this._showDatepicker).off("keydown",this._doKeyDown).off("keypress",this._doKeyPress).off("keyup",this._doKeyUp)):"div"!==i&&"span"!==i||n.removeClass(this.markerClassName).empty(),E===o&&(E=null,this._curInst=null))},_enableDatepicker:function(e){var i,n,o=t(e),r=t.data(e,"datepicker");o.hasClass(this.markerClassName)&&("input"===(i=e.nodeName.toLowerCase())?(e.disabled=!1,r.trigger.filter("button").each((function(){this.disabled=!1})).end().filter("img").css({opacity:"1.0",cursor:""})):"div"!==i&&"span"!==i||((n=o.children("."+this._inlineClass)).children().removeClass("ui-state-disabled"),n.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)),this._disabledInputs=t.map(this._disabledInputs,(function(t){return t===e?null:t})))},_disableDatepicker:function(e){var i,n,o=t(e),r=t.data(e,"datepicker");o.hasClass(this.markerClassName)&&("input"===(i=e.nodeName.toLowerCase())?(e.disabled=!0,r.trigger.filter("button").each((function(){this.disabled=!0})).end().filter("img").css({opacity:"0.5",cursor:"default"})):"div"!==i&&"span"!==i||((n=o.children("."+this._inlineClass)).children().addClass("ui-state-disabled"),n.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)),this._disabledInputs=t.map(this._disabledInputs,(function(t){return t===e?null:t})),this._disabledInputs[this._disabledInputs.length]=e)},_isDisabledDatepicker:function(t){if(!t)return!1;for(var e=0;e<this._disabledInputs.length;e++)if(this._disabledInputs[e]===t)return!0;return!1},_getInst:function(e){try{return t.data(e,"datepicker")}catch(t){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(e,i,n){var o,r,s,a,l=this._getInst(e);if(2===arguments.length&&"string"==typeof i)return"defaults"===i?t.extend({},t.datepicker._defaults):l?"all"===i?t.extend({},l.settings):this._get(l,i):null;o=i||{},"string"==typeof i&&((o={})[i]=n),l&&(this._curInst===l&&this._hideDatepicker(),r=this._getDateDatepicker(e,!0),s=this._getMinMaxDate(l,"min"),a=this._getMinMaxDate(l,"max"),R(l.settings,o),null!==s&&void 0!==o.dateFormat&&void 0===o.minDate&&(l.settings.minDate=this._formatDate(l,s)),null!==a&&void 0!==o.dateFormat&&void 0===o.maxDate&&(l.settings.maxDate=this._formatDate(l,a)),"disabled"in o&&(o.disabled?this._disableDatepicker(e):this._enableDatepicker(e)),this._attachments(t(e),l),this._autoSize(l),this._setDate(l,r),this._updateAlternate(l),this._updateDatepicker(l))},_changeDatepicker:function(t,e,i){this._optionDatepicker(t,e,i)},_refreshDatepicker:function(t){var e=this._getInst(t);e&&this._updateDatepicker(e)},_setDateDatepicker:function(t,e){var i=this._getInst(t);i&&(this._setDate(i,e),this._updateDatepicker(i),this._updateAlternate(i))},_getDateDatepicker:function(t,e){var i=this._getInst(t);return i&&!i.inline&&this._setDateFromField(i,e),i?this._getDate(i):null},_doKeyDown:function(e){var i,n,o,r=t.datepicker._getInst(e.target),s=!0,a=r.dpDiv.is(".ui-datepicker-rtl");if(r._keyEvent=!0,t.datepicker._datepickerShowing)switch(e.keyCode){case 9:t.datepicker._hideDatepicker(),s=!1;break;case 13:return(o=t("td."+t.datepicker._dayOverClass+":not(."+t.datepicker._currentClass+")",r.dpDiv))[0]&&t.datepicker._selectDay(e.target,r.selectedMonth,r.selectedYear,o[0]),(i=t.datepicker._get(r,"onSelect"))?(n=t.datepicker._formatDate(r),i.apply(r.input?r.input[0]:null,[n,r])):t.datepicker._hideDatepicker(),!1;case 27:t.datepicker._hideDatepicker();break;case 33:t.datepicker._adjustDate(e.target,e.ctrlKey?-t.datepicker._get(r,"stepBigMonths"):-t.datepicker._get(r,"stepMonths"),"M");break;case 34:t.datepicker._adjustDate(e.target,e.ctrlKey?+t.datepicker._get(r,"stepBigMonths"):+t.datepicker._get(r,"stepMonths"),"M");break;case 35:(e.ctrlKey||e.metaKey)&&t.datepicker._clearDate(e.target),s=e.ctrlKey||e.metaKey;break;case 36:(e.ctrlKey||e.metaKey)&&t.datepicker._gotoToday(e.target),s=e.ctrlKey||e.metaKey;break;case 37:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,a?1:-1,"D"),s=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&t.datepicker._adjustDate(e.target,e.ctrlKey?-t.datepicker._get(r,"stepBigMonths"):-t.datepicker._get(r,"stepMonths"),"M");break;case 38:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,-7,"D"),s=e.ctrlKey||e.metaKey;break;case 39:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,a?-1:1,"D"),s=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&t.datepicker._adjustDate(e.target,e.ctrlKey?+t.datepicker._get(r,"stepBigMonths"):+t.datepicker._get(r,"stepMonths"),"M");break;case 40:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,7,"D"),s=e.ctrlKey||e.metaKey;break;default:s=!1}else 36===e.keyCode&&e.ctrlKey?t.datepicker._showDatepicker(this):s=!1;s&&(e.preventDefault(),e.stopPropagation())},_doKeyPress:function(e){var i,n,o=t.datepicker._getInst(e.target);if(t.datepicker._get(o,"constrainInput"))return i=t.datepicker._possibleChars(t.datepicker._get(o,"dateFormat")),n=String.fromCharCode(null==e.charCode?e.keyCode:e.charCode),e.ctrlKey||e.metaKey||n<" "||!i||i.indexOf(n)>-1},_doKeyUp:function(e){var i=t.datepicker._getInst(e.target);if(i.input.val()!==i.lastVal)try{t.datepicker.parseDate(t.datepicker._get(i,"dateFormat"),i.input?i.input.val():null,t.datepicker._getFormatConfig(i))&&(t.datepicker._setDateFromField(i),t.datepicker._updateAlternate(i),t.datepicker._updateDatepicker(i))}catch(t){}return!0},_showDatepicker:function(e){var i,n,o,r,s,a,l;("input"!==(e=e.target||e).nodeName.toLowerCase()&&(e=t("input",e.parentNode)[0]),t.datepicker._isDisabledDatepicker(e)||t.datepicker._lastInput===e)||(i=t.datepicker._getInst(e),t.datepicker._curInst&&t.datepicker._curInst!==i&&(t.datepicker._curInst.dpDiv.stop(!0,!0),i&&t.datepicker._datepickerShowing&&t.datepicker._hideDatepicker(t.datepicker._curInst.input[0])),!1!==(o=(n=t.datepicker._get(i,"beforeShow"))?n.apply(e,[e,i]):{})&&(R(i.settings,o),i.lastVal=null,t.datepicker._lastInput=e,t.datepicker._setDateFromField(i),t.datepicker._inDialog&&(e.value=""),t.datepicker._pos||(t.datepicker._pos=t.datepicker._findPos(e),t.datepicker._pos[1]+=e.offsetHeight),r=!1,t(e).parents().each((function(){return!(r|="fixed"===t(this).css("position"))})),s={left:t.datepicker._pos[0],top:t.datepicker._pos[1]},t.datepicker._pos=null,i.dpDiv.empty(),i.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),t.datepicker._updateDatepicker(i),s=t.datepicker._checkOffset(i,s,r),i.dpDiv.css({position:t.datepicker._inDialog&&t.blockUI?"static":r?"fixed":"absolute",display:"none",left:s.left+"px",top:s.top+"px"}),i.inline||(a=t.datepicker._get(i,"showAnim"),l=t.datepicker._get(i,"duration"),i.dpDiv.css("z-index",function(t){for(var e,i;t.length&&t[0]!==document;){if(("absolute"===(e=t.css("position"))||"relative"===e||"fixed"===e)&&(i=parseInt(t.css("zIndex"),10),!isNaN(i)&&0!==i))return i;t=t.parent()}return 0}(t(e))+1),t.datepicker._datepickerShowing=!0,t.effects&&t.effects.effect[a]?i.dpDiv.show(a,t.datepicker._get(i,"showOptions"),l):i.dpDiv[a||"show"](a?l:null),t.datepicker._shouldFocusInput(i)&&i.input.trigger("focus"),t.datepicker._curInst=i)))},_updateDatepicker:function(e){this.maxRows=4,E=e,e.dpDiv.empty().append(this._generateHTML(e)),this._attachHandlers(e);var i,n=this._getNumberOfMonths(e),o=n[1],r=e.dpDiv.find("."+this._dayOverClass+" a"),s=t.datepicker._get(e,"onUpdateDatepicker");r.length>0&&D.apply(r.get(0)),e.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),o>1&&e.dpDiv.addClass("ui-datepicker-multi-"+o).css("width",17*o+"em"),e.dpDiv[(1!==n[0]||1!==n[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),e.dpDiv[(this._get(e,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),e===t.datepicker._curInst&&t.datepicker._datepickerShowing&&t.datepicker._shouldFocusInput(e)&&e.input.trigger("focus"),e.yearshtml&&(i=e.yearshtml,setTimeout((function(){i===e.yearshtml&&e.yearshtml&&e.dpDiv.find("select.ui-datepicker-year").first().replaceWith(e.yearshtml),i=e.yearshtml=null}),0)),s&&s.apply(e.input?e.input[0]:null,[e])},_shouldFocusInput:function(t){return t.input&&t.input.is(":visible")&&!t.input.is(":disabled")&&!t.input.is(":focus")},_checkOffset:function(e,i,n){var o=e.dpDiv.outerWidth(),r=e.dpDiv.outerHeight(),s=e.input?e.input.outerWidth():0,a=e.input?e.input.outerHeight():0,l=document.documentElement.clientWidth+(n?0:t(document).scrollLeft()),c=document.documentElement.clientHeight+(n?0:t(document).scrollTop());return i.left-=this._get(e,"isRTL")?o-s:0,i.left-=n&&i.left===e.input.offset().left?t(document).scrollLeft():0,i.top-=n&&i.top===e.input.offset().top+a?t(document).scrollTop():0,i.left-=Math.min(i.left,i.left+o>l&&l>o?Math.abs(i.left+o-l):0),i.top-=Math.min(i.top,i.top+r>c&&c>r?Math.abs(r+a):0),i},_findPos:function(e){for(var i,n=this._getInst(e),o=this._get(n,"isRTL");e&&("hidden"===e.type||1!==e.nodeType||t.expr.pseudos.hidden(e));)e=e[o?"previousSibling":"nextSibling"];return[(i=t(e).offset()).left,i.top]},_hideDatepicker:function(e){var i,n,o,r,s=this._curInst;!s||e&&s!==t.data(e,"datepicker")||this._datepickerShowing&&(i=this._get(s,"showAnim"),n=this._get(s,"duration"),o=function(){t.datepicker._tidyDialog(s)},t.effects&&(t.effects.effect[i]||t.effects[i])?s.dpDiv.hide(i,t.datepicker._get(s,"showOptions"),n,o):s.dpDiv["slideDown"===i?"slideUp":"fadeIn"===i?"fadeOut":"hide"](i?n:null,o),i||o(),this._datepickerShowing=!1,(r=this._get(s,"onClose"))&&r.apply(s.input?s.input[0]:null,[s.input?s.input.val():"",s]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),t.blockUI&&(t.unblockUI(),t("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(t){t.dpDiv.removeClass(this._dialogClass).off(".ui-datepicker-calendar")},_checkExternalClick:function(e){if(t.datepicker._curInst){var i=t(e.target),n=t.datepicker._getInst(i[0]);(i[0].id===t.datepicker._mainDivId||0!==i.parents("#"+t.datepicker._mainDivId).length||i.hasClass(t.datepicker.markerClassName)||i.closest("."+t.datepicker._triggerClass).length||!t.datepicker._datepickerShowing||t.datepicker._inDialog&&t.blockUI)&&(!i.hasClass(t.datepicker.markerClassName)||t.datepicker._curInst===n)||t.datepicker._hideDatepicker()}},_adjustDate:function(e,i,n){var o=t(e),r=this._getInst(o[0]);this._isDisabledDatepicker(o[0])||(this._adjustInstDate(r,i,n),this._updateDatepicker(r))},_gotoToday:function(e){var i,n=t(e),o=this._getInst(n[0]);this._get(o,"gotoCurrent")&&o.currentDay?(o.selectedDay=o.currentDay,o.drawMonth=o.selectedMonth=o.currentMonth,o.drawYear=o.selectedYear=o.currentYear):(i=new Date,o.selectedDay=i.getDate(),o.drawMonth=o.selectedMonth=i.getMonth(),o.drawYear=o.selectedYear=i.getFullYear()),this._notifyChange(o),this._adjustDate(n)},_selectMonthYear:function(e,i,n){var o=t(e),r=this._getInst(o[0]);r["selected"+("M"===n?"Month":"Year")]=r["draw"+("M"===n?"Month":"Year")]=parseInt(i.options[i.selectedIndex].value,10),this._notifyChange(r),this._adjustDate(o)},_selectDay:function(e,i,n,o){var r,s=t(e);t(o).hasClass(this._unselectableClass)||this._isDisabledDatepicker(s[0])||((r=this._getInst(s[0])).selectedDay=r.currentDay=parseInt(t("a",o).attr("data-date")),r.selectedMonth=r.currentMonth=i,r.selectedYear=r.currentYear=n,this._selectDate(e,this._formatDate(r,r.currentDay,r.currentMonth,r.currentYear)))},_clearDate:function(e){var i=t(e);this._selectDate(i,"")},_selectDate:function(e,i){var n,o=t(e),r=this._getInst(o[0]);i=null!=i?i:this._formatDate(r),r.input&&r.input.val(i),this._updateAlternate(r),(n=this._get(r,"onSelect"))?n.apply(r.input?r.input[0]:null,[i,r]):r.input&&r.input.trigger("change"),r.inline?this._updateDatepicker(r):(this._hideDatepicker(),this._lastInput=r.input[0],"object"!=typeof r.input[0]&&r.input.trigger("focus"),this._lastInput=null)},_updateAlternate:function(e){var i,n,o,r=this._get(e,"altField");r&&(i=this._get(e,"altFormat")||this._get(e,"dateFormat"),n=this._getDate(e),o=this.formatDate(i,n,this._getFormatConfig(e)),t(document).find(r).val(o))},noWeekends:function(t){var e=t.getDay();return[e>0&&e<6,""]},iso8601Week:function(t){var e,i=new Date(t.getTime());return i.setDate(i.getDate()+4-(i.getDay()||7)),e=i.getTime(),i.setMonth(0),i.setDate(1),Math.floor(Math.round((e-i)/864e5)/7)+1},parseDate:function(e,i,n){if(null==e||null==i)throw"Invalid arguments";if(""===(i="object"==typeof i?i.toString():i+""))return null;var o,r,s,a,l=0,c=(n?n.shortYearCutoff:null)||this._defaults.shortYearCutoff,h="string"!=typeof c?c:(new Date).getFullYear()%100+parseInt(c,10),u=(n?n.dayNamesShort:null)||this._defaults.dayNamesShort,d=(n?n.dayNames:null)||this._defaults.dayNames,p=(n?n.monthNamesShort:null)||this._defaults.monthNamesShort,f=(n?n.monthNames:null)||this._defaults.monthNames,m=-1,g=-1,y=-1,v=-1,b=!1,x=function(t){var i=o+1<e.length&&e.charAt(o+1)===t;return i&&o++,i},$=function(t){var e=x(t),n="@"===t?14:"!"===t?20:"y"===t&&e?4:"o"===t?3:2,o=new RegExp("^\\d{"+("y"===t?n:1)+","+n+"}"),r=i.substring(l).match(o);if(!r)throw"Missing number at position "+l;return l+=r[0].length,parseInt(r[0],10)},w=function(e,n,o){var r=-1,s=t.map(x(e)?o:n,(function(t,e){return[[e,t]]})).sort((function(t,e){return-(t[1].length-e[1].length)}));if(t.each(s,(function(t,e){var n=e[1];if(i.substr(l,n.length).toLowerCase()===n.toLowerCase())return r=e[0],l+=n.length,!1})),-1!==r)return r+1;throw"Unknown name at position "+l},_=function(){if(i.charAt(l)!==e.charAt(o))throw"Unexpected literal at position "+l;l++};for(o=0;o<e.length;o++)if(b)"'"!==e.charAt(o)||x("'")?_():b=!1;else switch(e.charAt(o)){case"d":y=$("d");break;case"D":w("D",u,d);break;case"o":v=$("o");break;case"m":g=$("m");break;case"M":g=w("M",p,f);break;case"y":m=$("y");break;case"@":m=(a=new Date($("@"))).getFullYear(),g=a.getMonth()+1,y=a.getDate();break;case"!":m=(a=new Date(($("!")-this._ticksTo1970)/1e4)).getFullYear(),g=a.getMonth()+1,y=a.getDate();break;case"'":x("'")?_():b=!0;break;default:_()}if(l<i.length&&(s=i.substr(l),!/^\s+/.test(s)))throw"Extra/unparsed characters found in date: "+s;if(-1===m?m=(new Date).getFullYear():m<100&&(m+=(new Date).getFullYear()-(new Date).getFullYear()%100+(m<=h?0:-100)),v>-1)for(g=1,y=v;;){if(y<=(r=this._getDaysInMonth(m,g-1)))break;g++,y-=r}if((a=this._daylightSavingAdjust(new Date(m,g-1,y))).getFullYear()!==m||a.getMonth()+1!==g||a.getDate()!==y)throw"Invalid date";return a},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*60*60*1e7,formatDate:function(t,e,i){if(!e)return"";var n,o=(i?i.dayNamesShort:null)||this._defaults.dayNamesShort,r=(i?i.dayNames:null)||this._defaults.dayNames,s=(i?i.monthNamesShort:null)||this._defaults.monthNamesShort,a=(i?i.monthNames:null)||this._defaults.monthNames,l=function(e){var i=n+1<t.length&&t.charAt(n+1)===e;return i&&n++,i},c=function(t,e,i){var n=""+e;if(l(t))for(;n.length<i;)n="0"+n;return n},h=function(t,e,i,n){return l(t)?n[e]:i[e]},u="",d=!1;if(e)for(n=0;n<t.length;n++)if(d)"'"!==t.charAt(n)||l("'")?u+=t.charAt(n):d=!1;else switch(t.charAt(n)){case"d":u+=c("d",e.getDate(),2);break;case"D":u+=h("D",e.getDay(),o,r);break;case"o":u+=c("o",Math.round((new Date(e.getFullYear(),e.getMonth(),e.getDate()).getTime()-new Date(e.getFullYear(),0,0).getTime())/864e5),3);break;case"m":u+=c("m",e.getMonth()+1,2);break;case"M":u+=h("M",e.getMonth(),s,a);break;case"y":u+=l("y")?e.getFullYear():(e.getFullYear()%100<10?"0":"")+e.getFullYear()%100;break;case"@":u+=e.getTime();break;case"!":u+=1e4*e.getTime()+this._ticksTo1970;break;case"'":l("'")?u+="'":d=!0;break;default:u+=t.charAt(n)}return u},_possibleChars:function(t){var e,i="",n=!1,o=function(i){var n=e+1<t.length&&t.charAt(e+1)===i;return n&&e++,n};for(e=0;e<t.length;e++)if(n)"'"!==t.charAt(e)||o("'")?i+=t.charAt(e):n=!1;else switch(t.charAt(e)){case"d":case"m":case"y":case"@":i+="0123456789";break;case"D":case"M":return null;case"'":o("'")?i+="'":n=!0;break;default:i+=t.charAt(e)}return i},_get:function(t,e){return void 0!==t.settings[e]?t.settings[e]:this._defaults[e]},_setDateFromField:function(t,e){if(t.input.val()!==t.lastVal){var i=this._get(t,"dateFormat"),n=t.lastVal=t.input?t.input.val():null,o=this._getDefaultDate(t),r=o,s=this._getFormatConfig(t);try{r=this.parseDate(i,n,s)||o}catch(t){n=e?"":n}t.selectedDay=r.getDate(),t.drawMonth=t.selectedMonth=r.getMonth(),t.drawYear=t.selectedYear=r.getFullYear(),t.currentDay=n?r.getDate():0,t.currentMonth=n?r.getMonth():0,t.currentYear=n?r.getFullYear():0,this._adjustInstDate(t)}},_getDefaultDate:function(t){return this._restrictMinMax(t,this._determineDate(t,this._get(t,"defaultDate"),new Date))},_determineDate:function(e,i,n){var o=null==i||""===i?n:"string"==typeof i?function(i){try{return t.datepicker.parseDate(t.datepicker._get(e,"dateFormat"),i,t.datepicker._getFormatConfig(e))}catch(t){}for(var n=(i.toLowerCase().match(/^c/)?t.datepicker._getDate(e):null)||new Date,o=n.getFullYear(),r=n.getMonth(),s=n.getDate(),a=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,l=a.exec(i);l;){switch(l[2]||"d"){case"d":case"D":s+=parseInt(l[1],10);break;case"w":case"W":s+=7*parseInt(l[1],10);break;case"m":case"M":r+=parseInt(l[1],10),s=Math.min(s,t.datepicker._getDaysInMonth(o,r));break;case"y":case"Y":o+=parseInt(l[1],10),s=Math.min(s,t.datepicker._getDaysInMonth(o,r))}l=a.exec(i)}return new Date(o,r,s)}(i):"number"==typeof i?isNaN(i)?n:function(t){var e=new Date;return e.setDate(e.getDate()+t),e}(i):new Date(i.getTime());return(o=o&&"Invalid Date"===o.toString()?n:o)&&(o.setHours(0),o.setMinutes(0),o.setSeconds(0),o.setMilliseconds(0)),this._daylightSavingAdjust(o)},_daylightSavingAdjust:function(t){return t?(t.setHours(t.getHours()>12?t.getHours()+2:0),t):null},_setDate:function(t,e,i){var n=!e,o=t.selectedMonth,r=t.selectedYear,s=this._restrictMinMax(t,this._determineDate(t,e,new Date));t.selectedDay=t.currentDay=s.getDate(),t.drawMonth=t.selectedMonth=t.currentMonth=s.getMonth(),t.drawYear=t.selectedYear=t.currentYear=s.getFullYear(),o===t.selectedMonth&&r===t.selectedYear||i||this._notifyChange(t),this._adjustInstDate(t),t.input&&t.input.val(n?"":this._formatDate(t))},_getDate:function(t){return!t.currentYear||t.input&&""===t.input.val()?null:this._daylightSavingAdjust(new Date(t.currentYear,t.currentMonth,t.currentDay))},_attachHandlers:function(e){var i=this._get(e,"stepMonths"),n="#"+e.id.replace(/\\\\/g,"\\");e.dpDiv.find("[data-handler]").map((function(){var e={prev:function(){t.datepicker._adjustDate(n,-i,"M")},next:function(){t.datepicker._adjustDate(n,+i,"M")},hide:function(){t.datepicker._hideDatepicker()},today:function(){t.datepicker._gotoToday(n)},selectDay:function(){return t.datepicker._selectDay(n,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return t.datepicker._selectMonthYear(n,this,"M"),!1},selectYear:function(){return t.datepicker._selectMonthYear(n,this,"Y"),!1}};t(this).on(this.getAttribute("data-event"),e[this.getAttribute("data-handler")])}))},_generateHTML:function(e){var i,n,o,r,s,a,l,c,h,u,d,p,f,m,g,y,v,b,x,$,w,_,k,S,C,T,M,P,E,I,A,D,R,L,O,z,F,B,N,H=new Date,W=this._daylightSavingAdjust(new Date(H.getFullYear(),H.getMonth(),H.getDate())),j=this._get(e,"isRTL"),Y=this._get(e,"showButtonPanel"),V=this._get(e,"hideIfNoPrevNext"),U=this._get(e,"navigationAsDateFormat"),q=this._getNumberOfMonths(e),X=this._get(e,"showCurrentAtPos"),G=this._get(e,"stepMonths"),Z=1!==q[0]||1!==q[1],K=this._daylightSavingAdjust(e.currentDay?new Date(e.currentYear,e.currentMonth,e.currentDay):new Date(9999,9,9)),Q=this._getMinMaxDate(e,"min"),J=this._getMinMaxDate(e,"max"),tt=e.drawMonth-X,et=e.drawYear;if(tt<0&&(tt+=12,et--),J)for(i=this._daylightSavingAdjust(new Date(J.getFullYear(),J.getMonth()-q[0]*q[1]+1,J.getDate())),i=Q&&i<Q?Q:i;this._daylightSavingAdjust(new Date(et,tt,1))>i;)--tt<0&&(tt=11,et--);for(e.drawMonth=tt,e.drawYear=et,n=this._get(e,"prevText"),n=U?this.formatDate(n,this._daylightSavingAdjust(new Date(et,tt-G,1)),this._getFormatConfig(e)):n,o=this._canAdjustMonth(e,-1,et,tt)?t("<a>").attr({class:"ui-datepicker-prev ui-corner-all","data-handler":"prev","data-event":"click",title:n}).append(t("<span>").addClass("ui-icon ui-icon-circle-triangle-"+(j?"e":"w")).text(n))[0].outerHTML:V?"":t("<a>").attr({class:"ui-datepicker-prev ui-corner-all ui-state-disabled",title:n}).append(t("<span>").addClass("ui-icon ui-icon-circle-triangle-"+(j?"e":"w")).text(n))[0].outerHTML,r=this._get(e,"nextText"),r=U?this.formatDate(r,this._daylightSavingAdjust(new Date(et,tt+G,1)),this._getFormatConfig(e)):r,s=this._canAdjustMonth(e,1,et,tt)?t("<a>").attr({class:"ui-datepicker-next ui-corner-all","data-handler":"next","data-event":"click",title:r}).append(t("<span>").addClass("ui-icon ui-icon-circle-triangle-"+(j?"w":"e")).text(r))[0].outerHTML:V?"":t("<a>").attr({class:"ui-datepicker-next ui-corner-all ui-state-disabled",title:r}).append(t("<span>").attr("class","ui-icon ui-icon-circle-triangle-"+(j?"w":"e")).text(r))[0].outerHTML,a=this._get(e,"currentText"),l=this._get(e,"gotoCurrent")&&e.currentDay?K:W,a=U?this.formatDate(a,l,this._getFormatConfig(e)):a,c="",e.inline||(c=t("<button>").attr({type:"button",class:"ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all","data-handler":"hide","data-event":"click"}).text(this._get(e,"closeText"))[0].outerHTML),h="",Y&&(h=t("<div class='ui-datepicker-buttonpane ui-widget-content'>").append(j?c:"").append(this._isInRange(e,l)?t("<button>").attr({type:"button",class:"ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all","data-handler":"today","data-event":"click"}).text(a):"").append(j?"":c)[0].outerHTML),u=parseInt(this._get(e,"firstDay"),10),u=isNaN(u)?0:u,d=this._get(e,"showWeek"),p=this._get(e,"dayNames"),f=this._get(e,"dayNamesMin"),m=this._get(e,"monthNames"),g=this._get(e,"monthNamesShort"),y=this._get(e,"beforeShowDay"),v=this._get(e,"showOtherMonths"),b=this._get(e,"selectOtherMonths"),x=this._getDefaultDate(e),$="",_=0;_<q[0];_++){for(k="",this.maxRows=4,S=0;S<q[1];S++){if(C=this._daylightSavingAdjust(new Date(et,tt,e.selectedDay)),T=" ui-corner-all",M="",Z){if(M+="<div class='ui-datepicker-group",q[1]>1)switch(S){case 0:M+=" ui-datepicker-group-first",T=" ui-corner-"+(j?"right":"left");break;case q[1]-1:M+=" ui-datepicker-group-last",T=" ui-corner-"+(j?"left":"right");break;default:M+=" ui-datepicker-group-middle",T=""}M+="'>"}for(M+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+T+"'>"+(/all|left/.test(T)&&0===_?j?s:o:"")+(/all|right/.test(T)&&0===_?j?o:s:"")+this._generateMonthYearHeader(e,tt,et,Q,J,_>0||S>0,m,g)+"</div><table class='ui-datepicker-calendar'><thead><tr>",P=d?"<th class='ui-datepicker-week-col'>"+this._get(e,"weekHeader")+"</th>":"",w=0;w<7;w++)P+="<th scope='col'"+((w+u+6)%7>=5?" class='ui-datepicker-week-end'":"")+"><span title='"+p[E=(w+u)%7]+"'>"+f[E]+"</span></th>";for(M+=P+"</tr></thead><tbody>",I=this._getDaysInMonth(et,tt),et===e.selectedYear&&tt===e.selectedMonth&&(e.selectedDay=Math.min(e.selectedDay,I)),A=(this._getFirstDayOfMonth(et,tt)-u+7)%7,D=Math.ceil((A+I)/7),R=Z&&this.maxRows>D?this.maxRows:D,this.maxRows=R,L=this._daylightSavingAdjust(new Date(et,tt,1-A)),O=0;O<R;O++){for(M+="<tr>",z=d?"<td class='ui-datepicker-week-col'>"+this._get(e,"calculateWeek")(L)+"</td>":"",w=0;w<7;w++)F=y?y.apply(e.input?e.input[0]:null,[L]):[!0,""],N=(B=L.getMonth()!==tt)&&!b||!F[0]||Q&&L<Q||J&&L>J,z+="<td class='"+((w+u+6)%7>=5?" ui-datepicker-week-end":"")+(B?" ui-datepicker-other-month":"")+(L.getTime()===C.getTime()&&tt===e.selectedMonth&&e._keyEvent||x.getTime()===L.getTime()&&x.getTime()===C.getTime()?" "+this._dayOverClass:"")+(N?" "+this._unselectableClass+" ui-state-disabled":"")+(B&&!v?"":" "+F[1]+(L.getTime()===K.getTime()?" "+this._currentClass:"")+(L.getTime()===W.getTime()?" ui-datepicker-today":""))+"'"+(B&&!v||!F[2]?"":" title='"+F[2].replace(/'/g,"&#39;")+"'")+(N?"":" data-handler='selectDay' data-event='click' data-month='"+L.getMonth()+"' data-year='"+L.getFullYear()+"'")+">"+(B&&!v?"&#xa0;":N?"<span class='ui-state-default'>"+L.getDate()+"</span>":"<a class='ui-state-default"+(L.getTime()===W.getTime()?" ui-state-highlight":"")+(L.getTime()===K.getTime()?" ui-state-active":"")+(B?" ui-priority-secondary":"")+"' href='#' aria-current='"+(L.getTime()===K.getTime()?"true":"false")+"' data-date='"+L.getDate()+"'>"+L.getDate()+"</a>")+"</td>",L.setDate(L.getDate()+1),L=this._daylightSavingAdjust(L);M+=z+"</tr>"}++tt>11&&(tt=0,et++),k+=M+="</tbody></table>"+(Z?"</div>"+(q[0]>0&&S===q[1]-1?"<div class='ui-datepicker-row-break'></div>":""):"")}$+=k}return $+=h,e._keyEvent=!1,$},_generateMonthYearHeader:function(t,e,i,n,o,r,s,a){var l,c,h,u,d,p,f,m,g=this._get(t,"changeMonth"),y=this._get(t,"changeYear"),v=this._get(t,"showMonthAfterYear"),b=this._get(t,"selectMonthLabel"),x=this._get(t,"selectYearLabel"),$="<div class='ui-datepicker-title'>",w="";if(r||!g)w+="<span class='ui-datepicker-month'>"+s[e]+"</span>";else{for(l=n&&n.getFullYear()===i,c=o&&o.getFullYear()===i,w+="<select class='ui-datepicker-month' aria-label='"+b+"' data-handler='selectMonth' data-event='change'>",h=0;h<12;h++)(!l||h>=n.getMonth())&&(!c||h<=o.getMonth())&&(w+="<option value='"+h+"'"+(h===e?" selected='selected'":"")+">"+a[h]+"</option>");w+="</select>"}if(v||($+=w+(!r&&g&&y?"":"&#xa0;")),!t.yearshtml)if(t.yearshtml="",r||!y)$+="<span class='ui-datepicker-year'>"+i+"</span>";else{for(u=this._get(t,"yearRange").split(":"),d=(new Date).getFullYear(),p=function(t){var e=t.match(/c[+\-].*/)?i+parseInt(t.substring(1),10):t.match(/[+\-].*/)?d+parseInt(t,10):parseInt(t,10);return isNaN(e)?d:e},f=p(u[0]),m=Math.max(f,p(u[1]||"")),f=n?Math.max(f,n.getFullYear()):f,m=o?Math.min(m,o.getFullYear()):m,t.yearshtml+="<select class='ui-datepicker-year' aria-label='"+x+"' data-handler='selectYear' data-event='change'>";f<=m;f++)t.yearshtml+="<option value='"+f+"'"+(f===i?" selected='selected'":"")+">"+f+"</option>";t.yearshtml+="</select>",$+=t.yearshtml,t.yearshtml=null}return $+=this._get(t,"yearSuffix"),v&&($+=(!r&&g&&y?"":"&#xa0;")+w),$+="</div>"},_adjustInstDate:function(t,e,i){var n=t.selectedYear+("Y"===i?e:0),o=t.selectedMonth+("M"===i?e:0),r=Math.min(t.selectedDay,this._getDaysInMonth(n,o))+("D"===i?e:0),s=this._restrictMinMax(t,this._daylightSavingAdjust(new Date(n,o,r)));t.selectedDay=s.getDate(),t.drawMonth=t.selectedMonth=s.getMonth(),t.drawYear=t.selectedYear=s.getFullYear(),"M"!==i&&"Y"!==i||this._notifyChange(t)},_restrictMinMax:function(t,e){var i=this._getMinMaxDate(t,"min"),n=this._getMinMaxDate(t,"max"),o=i&&e<i?i:e;return n&&o>n?n:o},_notifyChange:function(t){var e=this._get(t,"onChangeMonthYear");e&&e.apply(t.input?t.input[0]:null,[t.selectedYear,t.selectedMonth+1,t])},_getNumberOfMonths:function(t){var e=this._get(t,"numberOfMonths");return null==e?[1,1]:"number"==typeof e?[1,e]:e},_getMinMaxDate:function(t,e){return this._determineDate(t,this._get(t,e+"Date"),null)},_getDaysInMonth:function(t,e){return 32-this._daylightSavingAdjust(new Date(t,e,32)).getDate()},_getFirstDayOfMonth:function(t,e){return new Date(t,e,1).getDay()},_canAdjustMonth:function(t,e,i,n){var o=this._getNumberOfMonths(t),r=this._daylightSavingAdjust(new Date(i,n+(e<0?e:o[0]*o[1]),1));return e<0&&r.setDate(this._getDaysInMonth(r.getFullYear(),r.getMonth())),this._isInRange(t,r)},_isInRange:function(t,e){var i,n,o=this._getMinMaxDate(t,"min"),r=this._getMinMaxDate(t,"max"),s=null,a=null,l=this._get(t,"yearRange");return l&&(i=l.split(":"),n=(new Date).getFullYear(),s=parseInt(i[0],10),a=parseInt(i[1],10),i[0].match(/[+\-].*/)&&(s+=n),i[1].match(/[+\-].*/)&&(a+=n)),(!o||e.getTime()>=o.getTime())&&(!r||e.getTime()<=r.getTime())&&(!s||e.getFullYear()>=s)&&(!a||e.getFullYear()<=a)},_getFormatConfig:function(t){var e=this._get(t,"shortYearCutoff");return{shortYearCutoff:e="string"!=typeof e?e:(new Date).getFullYear()%100+parseInt(e,10),dayNamesShort:this._get(t,"dayNamesShort"),dayNames:this._get(t,"dayNames"),monthNamesShort:this._get(t,"monthNamesShort"),monthNames:this._get(t,"monthNames")}},_formatDate:function(t,e,i,n){e||(t.currentDay=t.selectedDay,t.currentMonth=t.selectedMonth,t.currentYear=t.selectedYear);var o=e?"object"==typeof e?e:this._daylightSavingAdjust(new Date(n,i,e)):this._daylightSavingAdjust(new Date(t.currentYear,t.currentMonth,t.currentDay));return this.formatDate(this._get(t,"dateFormat"),o,this._getFormatConfig(t))}}),t.fn.datepicker=function(e){if(!this.length)return this;t.datepicker.initialized||(t(document).on("mousedown",t.datepicker._checkExternalClick),t.datepicker.initialized=!0),0===t("#"+t.datepicker._mainDivId).length&&t("body").append(t.datepicker.dpDiv);var i=Array.prototype.slice.call(arguments,1);return"string"!=typeof e||"isDisabled"!==e&&"getDate"!==e&&"widget"!==e?"option"===e&&2===arguments.length&&"string"==typeof arguments[1]?t.datepicker["_"+e+"Datepicker"].apply(t.datepicker,[this[0]].concat(i)):this.each((function(){"string"==typeof e?t.datepicker["_"+e+"Datepicker"].apply(t.datepicker,[this].concat(i)):t.datepicker._attachDatepicker(this,e)})):t.datepicker["_"+e+"Datepicker"].apply(t.datepicker,[this[0]].concat(i))},t.datepicker=new I,t.datepicker.initialized=!1,t.datepicker.uuid=(new Date).getTime(),t.datepicker.version="1.13.1";t.datepicker,t.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase());var L=!1;t(document).on("mouseup",(function(){L=!1}));t.widget("ui.mouse",{version:"1.13.1",options:{cancel:"input, textarea, button, select, option",distance:1,delay:0},_mouseInit:function(){var e=this;this.element.on("mousedown."+this.widgetName,(function(t){return e._mouseDown(t)})).on("click."+this.widgetName,(function(i){if(!0===t.data(i.target,e.widgetName+".preventClickEvent"))return t.removeData(i.target,e.widgetName+".preventClickEvent"),i.stopImmediatePropagation(),!1})),this.started=!1},_mouseDestroy:function(){this.element.off("."+this.widgetName),this._mouseMoveDelegate&&this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(e){if(!L){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(e),this._mouseDownEvent=e;var i=this,n=1===e.which,o=!("string"!=typeof this.options.cancel||!e.target.nodeName)&&t(e.target).closest(this.options.cancel).length;return!(n&&!o&&this._mouseCapture(e))||(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout((function(){i.mouseDelayMet=!0}),this.options.delay)),this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=!1!==this._mouseStart(e),!this._mouseStarted)?(e.preventDefault(),!0):(!0===t.data(e.target,this.widgetName+".preventClickEvent")&&t.removeData(e.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(t){return i._mouseMove(t)},this._mouseUpDelegate=function(t){return i._mouseUp(t)},this.document.on("mousemove."+this.widgetName,this._mouseMoveDelegate).on("mouseup."+this.widgetName,this._mouseUpDelegate),e.preventDefault(),L=!0,!0))}},_mouseMove:function(e){if(this._mouseMoved){if(t.ui.ie&&(!document.documentMode||document.documentMode<9)&&!e.button)return this._mouseUp(e);if(!e.which)if(e.originalEvent.altKey||e.originalEvent.ctrlKey||e.originalEvent.metaKey||e.originalEvent.shiftKey)this.ignoreMissingWhich=!0;else if(!this.ignoreMissingWhich)return this._mouseUp(e)}return(e.which||e.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(e),e.preventDefault()):(this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,e),this._mouseStarted?this._mouseDrag(e):this._mouseUp(e)),!this._mouseStarted)},_mouseUp:function(e){this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,e.target===this._mouseDownEvent.target&&t.data(e.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(e)),this._mouseDelayTimer&&(clearTimeout(this._mouseDelayTimer),delete this._mouseDelayTimer),this.ignoreMissingWhich=!1,L=!1,e.preventDefault()},_mouseDistanceMet:function(t){return Math.max(Math.abs(this._mouseDownEvent.pageX-t.pageX),Math.abs(this._mouseDownEvent.pageY-t.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}}),t.ui.plugin={add:function(e,i,n){var o,r=t.ui[e].prototype;for(o in n)r.plugins[o]=r.plugins[o]||[],r.plugins[o].push([i,n[o]])},call:function(t,e,i,n){var o,r=t.plugins[e];if(r&&(n||t.element[0].parentNode&&11!==t.element[0].parentNode.nodeType))for(o=0;o<r.length;o++)t.options[r[o][0]]&&r[o][1].apply(t.element,i)}},t.ui.safeBlur=function(e){e&&"body"!==e.nodeName.toLowerCase()&&t(e).trigger("blur")};
/*!
 * jQuery UI Draggable 1.13.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
t.widget("ui.draggable",t.ui.mouse,{version:"1.13.1",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"===this.options.helper&&this._setPositionRelative(),this.options.addClasses&&this._addClass("ui-draggable"),this._setHandleClassName(),this._mouseInit()},_setOption:function(t,e){this._super(t,e),"handle"===t&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){(this.helper||this.element).is(".ui-draggable-dragging")?this.destroyOnClear=!0:(this._removeHandleClassName(),this._mouseDestroy())},_mouseCapture:function(e){var i=this.options;return!(this.helper||i.disabled||t(e.target).closest(".ui-resizable-handle").length>0)&&(this.handle=this._getHandle(e),!!this.handle&&(this._blurActiveElement(e),this._blockFrames(!0===i.iframeFix?"iframe":i.iframeFix),!0))},_blockFrames:function(e){this.iframeBlocks=this.document.find(e).map((function(){var e=t(this);return t("<div>").css("position","absolute").appendTo(e.parent()).outerWidth(e.outerWidth()).outerHeight(e.outerHeight()).offset(e.offset())[0]}))},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_blurActiveElement:function(e){var i=t.ui.safeActiveElement(this.document[0]);t(e.target).closest(i).length||t.ui.safeBlur(i)},_mouseStart:function(e){var i=this.options;return this.helper=this._createHelper(e),this._addClass(this.helper,"ui-draggable-dragging"),this._cacheHelperProportions(),t.ui.ddmanager&&(t.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(!0),this.offsetParent=this.helper.offsetParent(),this.hasFixedAncestor=this.helper.parents().filter((function(){return"fixed"===t(this).css("position")})).length>0,this.positionAbs=this.element.offset(),this._refreshOffsets(e),this.originalPosition=this.position=this._generatePosition(e,!1),this.originalPageX=e.pageX,this.originalPageY=e.pageY,i.cursorAt&&this._adjustOffsetFromHelper(i.cursorAt),this._setContainment(),!1===this._trigger("start",e)?(this._clear(),!1):(this._cacheHelperProportions(),t.ui.ddmanager&&!i.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e),this._mouseDrag(e,!0),t.ui.ddmanager&&t.ui.ddmanager.dragStart(this,e),!0)},_refreshOffsets:function(t){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:!1,parent:this._getParentOffset(),relative:this._getRelativeOffset()},this.offset.click={left:t.pageX-this.offset.left,top:t.pageY-this.offset.top}},_mouseDrag:function(e,i){if(this.hasFixedAncestor&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(e,!0),this.positionAbs=this._convertPositionTo("absolute"),!i){var n=this._uiHash();if(!1===this._trigger("drag",e,n))return this._mouseUp(new t.Event("mouseup",e)),!1;this.position=n.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",t.ui.ddmanager&&t.ui.ddmanager.drag(this,e),!1},_mouseStop:function(e){var i=this,n=!1;return t.ui.ddmanager&&!this.options.dropBehaviour&&(n=t.ui.ddmanager.drop(this,e)),this.dropped&&(n=this.dropped,this.dropped=!1),"invalid"===this.options.revert&&!n||"valid"===this.options.revert&&n||!0===this.options.revert||"function"==typeof this.options.revert&&this.options.revert.call(this.element,n)?t(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),(function(){!1!==i._trigger("stop",e)&&i._clear()})):!1!==this._trigger("stop",e)&&this._clear(),!1},_mouseUp:function(e){return this._unblockFrames(),t.ui.ddmanager&&t.ui.ddmanager.dragStop(this,e),this.handleElement.is(e.target)&&this.element.trigger("focus"),t.ui.mouse.prototype._mouseUp.call(this,e)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp(new t.Event("mouseup",{target:this.element[0]})):this._clear(),this},_getHandle:function(e){return!this.options.handle||!!t(e.target).closest(this.element.find(this.options.handle)).length},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element,this._addClass(this.handleElement,"ui-draggable-handle")},_removeHandleClassName:function(){this._removeClass(this.handleElement,"ui-draggable-handle")},_createHelper:function(e){var i=this.options,n="function"==typeof i.helper,o=n?t(i.helper.apply(this.element[0],[e])):"clone"===i.helper?this.element.clone().removeAttr("id"):this.element;return o.parents("body").length||o.appendTo("parent"===i.appendTo?this.element[0].parentNode:i.appendTo),n&&o[0]===this.element[0]&&this._setPositionRelative(),o[0]===this.element[0]||/(fixed|absolute)/.test(o.css("position"))||o.css("position","absolute"),o},_setPositionRelative:function(){/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative")},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),Array.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_isRootNode:function(t){return/(html|body)/i.test(t.tagName)||t===this.document[0]},_getParentOffset:function(){var e=this.offsetParent.offset(),i=this.document[0];return"absolute"===this.cssPosition&&this.scrollParent[0]!==i&&t.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),this._isRootNode(this.offsetParent[0])&&(e={top:0,left:0}),{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var t=this.element.position(),e=this._isRootNode(this.scrollParent[0]);return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+(e?0:this.scrollParent.scrollTop()),left:t.left-(parseInt(this.helper.css("left"),10)||0)+(e?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e,i,n,o=this.options,r=this.document[0];this.relativeContainer=null,o.containment?"window"!==o.containment?"document"!==o.containment?o.containment.constructor!==Array?("parent"===o.containment&&(o.containment=this.helper[0].parentNode),(n=(i=t(o.containment))[0])&&(e=/(scroll|auto)/.test(i.css("overflow")),this.containment=[(parseInt(i.css("borderLeftWidth"),10)||0)+(parseInt(i.css("paddingLeft"),10)||0),(parseInt(i.css("borderTopWidth"),10)||0)+(parseInt(i.css("paddingTop"),10)||0),(e?Math.max(n.scrollWidth,n.offsetWidth):n.offsetWidth)-(parseInt(i.css("borderRightWidth"),10)||0)-(parseInt(i.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(e?Math.max(n.scrollHeight,n.offsetHeight):n.offsetHeight)-(parseInt(i.css("borderBottomWidth"),10)||0)-(parseInt(i.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=i)):this.containment=o.containment:this.containment=[0,0,t(r).width()-this.helperProportions.width-this.margins.left,(t(r).height()||r.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]:this.containment=[t(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,t(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,t(window).scrollLeft()+t(window).width()-this.helperProportions.width-this.margins.left,t(window).scrollTop()+(t(window).height()||r.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]:this.containment=null},_convertPositionTo:function(t,e){e||(e=this.position);var i="absolute"===t?1:-1,n=this._isRootNode(this.scrollParent[0]);return{top:e.top+this.offset.relative.top*i+this.offset.parent.top*i-("fixed"===this.cssPosition?-this.offset.scroll.top:n?0:this.offset.scroll.top)*i,left:e.left+this.offset.relative.left*i+this.offset.parent.left*i-("fixed"===this.cssPosition?-this.offset.scroll.left:n?0:this.offset.scroll.left)*i}},_generatePosition:function(t,e){var i,n,o,r,s=this.options,a=this._isRootNode(this.scrollParent[0]),l=t.pageX,c=t.pageY;return a&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),e&&(this.containment&&(this.relativeContainer?(n=this.relativeContainer.offset(),i=[this.containment[0]+n.left,this.containment[1]+n.top,this.containment[2]+n.left,this.containment[3]+n.top]):i=this.containment,t.pageX-this.offset.click.left<i[0]&&(l=i[0]+this.offset.click.left),t.pageY-this.offset.click.top<i[1]&&(c=i[1]+this.offset.click.top),t.pageX-this.offset.click.left>i[2]&&(l=i[2]+this.offset.click.left),t.pageY-this.offset.click.top>i[3]&&(c=i[3]+this.offset.click.top)),s.grid&&(o=s.grid[1]?this.originalPageY+Math.round((c-this.originalPageY)/s.grid[1])*s.grid[1]:this.originalPageY,c=i?o-this.offset.click.top>=i[1]||o-this.offset.click.top>i[3]?o:o-this.offset.click.top>=i[1]?o-s.grid[1]:o+s.grid[1]:o,r=s.grid[0]?this.originalPageX+Math.round((l-this.originalPageX)/s.grid[0])*s.grid[0]:this.originalPageX,l=i?r-this.offset.click.left>=i[0]||r-this.offset.click.left>i[2]?r:r-this.offset.click.left>=i[0]?r-s.grid[0]:r+s.grid[0]:r),"y"===s.axis&&(l=this.originalPageX),"x"===s.axis&&(c=this.originalPageY)),{top:c-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.offset.scroll.top:a?0:this.offset.scroll.top),left:l-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:a?0:this.offset.scroll.left)}},_clear:function(){this._removeClass(this.helper,"ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1,this.destroyOnClear&&this.destroy()},_trigger:function(e,i,n){return n=n||this._uiHash(),t.ui.plugin.call(this,e,[i,n,this],!0),/^(drag|start|stop)/.test(e)&&(this.positionAbs=this._convertPositionTo("absolute"),n.offset=this.positionAbs),t.Widget.prototype._trigger.call(this,e,i,n)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),t.ui.plugin.add("draggable","connectToSortable",{start:function(e,i,n){var o=t.extend({},i,{item:n.element});n.sortables=[],t(n.options.connectToSortable).each((function(){var i=t(this).sortable("instance");i&&!i.options.disabled&&(n.sortables.push(i),i.refreshPositions(),i._trigger("activate",e,o))}))},stop:function(e,i,n){var o=t.extend({},i,{item:n.element});n.cancelHelperRemoval=!1,t.each(n.sortables,(function(){var t=this;t.isOver?(t.isOver=0,n.cancelHelperRemoval=!0,t.cancelHelperRemoval=!1,t._storedCSS={position:t.placeholder.css("position"),top:t.placeholder.css("top"),left:t.placeholder.css("left")},t._mouseStop(e),t.options.helper=t.options._helper):(t.cancelHelperRemoval=!0,t._trigger("deactivate",e,o))}))},drag:function(e,i,n){t.each(n.sortables,(function(){var o=!1,r=this;r.positionAbs=n.positionAbs,r.helperProportions=n.helperProportions,r.offset.click=n.offset.click,r._intersectsWith(r.containerCache)&&(o=!0,t.each(n.sortables,(function(){return this.positionAbs=n.positionAbs,this.helperProportions=n.helperProportions,this.offset.click=n.offset.click,this!==r&&this._intersectsWith(this.containerCache)&&t.contains(r.element[0],this.element[0])&&(o=!1),o}))),o?(r.isOver||(r.isOver=1,n._parent=i.helper.parent(),r.currentItem=i.helper.appendTo(r.element).data("ui-sortable-item",!0),r.options._helper=r.options.helper,r.options.helper=function(){return i.helper[0]},e.target=r.currentItem[0],r._mouseCapture(e,!0),r._mouseStart(e,!0,!0),r.offset.click.top=n.offset.click.top,r.offset.click.left=n.offset.click.left,r.offset.parent.left-=n.offset.parent.left-r.offset.parent.left,r.offset.parent.top-=n.offset.parent.top-r.offset.parent.top,n._trigger("toSortable",e),n.dropped=r.element,t.each(n.sortables,(function(){this.refreshPositions()})),n.currentItem=n.element,r.fromOutside=n),r.currentItem&&(r._mouseDrag(e),i.position=r.position)):r.isOver&&(r.isOver=0,r.cancelHelperRemoval=!0,r.options._revert=r.options.revert,r.options.revert=!1,r._trigger("out",e,r._uiHash(r)),r._mouseStop(e,!0),r.options.revert=r.options._revert,r.options.helper=r.options._helper,r.placeholder&&r.placeholder.remove(),i.helper.appendTo(n._parent),n._refreshOffsets(e),i.position=n._generatePosition(e,!0),n._trigger("fromSortable",e),n.dropped=!1,t.each(n.sortables,(function(){this.refreshPositions()})))}))}}),t.ui.plugin.add("draggable","cursor",{start:function(e,i,n){var o=t("body"),r=n.options;o.css("cursor")&&(r._cursor=o.css("cursor")),o.css("cursor",r.cursor)},stop:function(e,i,n){var o=n.options;o._cursor&&t("body").css("cursor",o._cursor)}}),t.ui.plugin.add("draggable","opacity",{start:function(e,i,n){var o=t(i.helper),r=n.options;o.css("opacity")&&(r._opacity=o.css("opacity")),o.css("opacity",r.opacity)},stop:function(e,i,n){var o=n.options;o._opacity&&t(i.helper).css("opacity",o._opacity)}}),t.ui.plugin.add("draggable","scroll",{start:function(t,e,i){i.scrollParentNotHidden||(i.scrollParentNotHidden=i.helper.scrollParent(!1)),i.scrollParentNotHidden[0]!==i.document[0]&&"HTML"!==i.scrollParentNotHidden[0].tagName&&(i.overflowOffset=i.scrollParentNotHidden.offset())},drag:function(e,i,n){var o=n.options,r=!1,s=n.scrollParentNotHidden[0],a=n.document[0];s!==a&&"HTML"!==s.tagName?(o.axis&&"x"===o.axis||(n.overflowOffset.top+s.offsetHeight-e.pageY<o.scrollSensitivity?s.scrollTop=r=s.scrollTop+o.scrollSpeed:e.pageY-n.overflowOffset.top<o.scrollSensitivity&&(s.scrollTop=r=s.scrollTop-o.scrollSpeed)),o.axis&&"y"===o.axis||(n.overflowOffset.left+s.offsetWidth-e.pageX<o.scrollSensitivity?s.scrollLeft=r=s.scrollLeft+o.scrollSpeed:e.pageX-n.overflowOffset.left<o.scrollSensitivity&&(s.scrollLeft=r=s.scrollLeft-o.scrollSpeed))):(o.axis&&"x"===o.axis||(e.pageY-t(a).scrollTop()<o.scrollSensitivity?r=t(a).scrollTop(t(a).scrollTop()-o.scrollSpeed):t(window).height()-(e.pageY-t(a).scrollTop())<o.scrollSensitivity&&(r=t(a).scrollTop(t(a).scrollTop()+o.scrollSpeed))),o.axis&&"y"===o.axis||(e.pageX-t(a).scrollLeft()<o.scrollSensitivity?r=t(a).scrollLeft(t(a).scrollLeft()-o.scrollSpeed):t(window).width()-(e.pageX-t(a).scrollLeft())<o.scrollSensitivity&&(r=t(a).scrollLeft(t(a).scrollLeft()+o.scrollSpeed)))),!1!==r&&t.ui.ddmanager&&!o.dropBehaviour&&t.ui.ddmanager.prepareOffsets(n,e)}}),t.ui.plugin.add("draggable","snap",{start:function(e,i,n){var o=n.options;n.snapElements=[],t(o.snap.constructor!==String?o.snap.items||":data(ui-draggable)":o.snap).each((function(){var e=t(this),i=e.offset();this!==n.element[0]&&n.snapElements.push({item:this,width:e.outerWidth(),height:e.outerHeight(),top:i.top,left:i.left})}))},drag:function(e,i,n){var o,r,s,a,l,c,h,u,d,p,f=n.options,m=f.snapTolerance,g=i.offset.left,y=g+n.helperProportions.width,v=i.offset.top,b=v+n.helperProportions.height;for(d=n.snapElements.length-1;d>=0;d--)c=(l=n.snapElements[d].left-n.margins.left)+n.snapElements[d].width,u=(h=n.snapElements[d].top-n.margins.top)+n.snapElements[d].height,y<l-m||g>c+m||b<h-m||v>u+m||!t.contains(n.snapElements[d].item.ownerDocument,n.snapElements[d].item)?(n.snapElements[d].snapping&&n.options.snap.release&&n.options.snap.release.call(n.element,e,t.extend(n._uiHash(),{snapItem:n.snapElements[d].item})),n.snapElements[d].snapping=!1):("inner"!==f.snapMode&&(o=Math.abs(h-b)<=m,r=Math.abs(u-v)<=m,s=Math.abs(l-y)<=m,a=Math.abs(c-g)<=m,o&&(i.position.top=n._convertPositionTo("relative",{top:h-n.helperProportions.height,left:0}).top),r&&(i.position.top=n._convertPositionTo("relative",{top:u,left:0}).top),s&&(i.position.left=n._convertPositionTo("relative",{top:0,left:l-n.helperProportions.width}).left),a&&(i.position.left=n._convertPositionTo("relative",{top:0,left:c}).left)),p=o||r||s||a,"outer"!==f.snapMode&&(o=Math.abs(h-v)<=m,r=Math.abs(u-b)<=m,s=Math.abs(l-g)<=m,a=Math.abs(c-y)<=m,o&&(i.position.top=n._convertPositionTo("relative",{top:h,left:0}).top),r&&(i.position.top=n._convertPositionTo("relative",{top:u-n.helperProportions.height,left:0}).top),s&&(i.position.left=n._convertPositionTo("relative",{top:0,left:l}).left),a&&(i.position.left=n._convertPositionTo("relative",{top:0,left:c-n.helperProportions.width}).left)),!n.snapElements[d].snapping&&(o||r||s||a||p)&&n.options.snap.snap&&n.options.snap.snap.call(n.element,e,t.extend(n._uiHash(),{snapItem:n.snapElements[d].item})),n.snapElements[d].snapping=o||r||s||a||p)}}),t.ui.plugin.add("draggable","stack",{start:function(e,i,n){var o,r=n.options,s=t.makeArray(t(r.stack)).sort((function(e,i){return(parseInt(t(e).css("zIndex"),10)||0)-(parseInt(t(i).css("zIndex"),10)||0)}));s.length&&(o=parseInt(t(s[0]).css("zIndex"),10)||0,t(s).each((function(e){t(this).css("zIndex",o+e)})),this.css("zIndex",o+s.length))}}),t.ui.plugin.add("draggable","zIndex",{start:function(e,i,n){var o=t(i.helper),r=n.options;o.css("zIndex")&&(r._zIndex=o.css("zIndex")),o.css("zIndex",r.zIndex)},stop:function(e,i,n){var o=n.options;o._zIndex&&t(i.helper).css("zIndex",o._zIndex)}});t.ui.draggable;
/*!
 * jQuery UI Resizable 1.13.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */t.widget("ui.resizable",t.ui.mouse,{version:"1.13.1",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,classes:{"ui-resizable-se":"ui-icon ui-icon-gripsmall-diagonal-se"},containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_num:function(t){return parseFloat(t)||0},_isNumber:function(t){return!isNaN(parseFloat(t))},_hasScroll:function(e,i){if("hidden"===t(e).css("overflow"))return!1;var n=i&&"left"===i?"scrollLeft":"scrollTop",o=!1;if(e[n]>0)return!0;try{e[n]=1,o=e[n]>0,e[n]=0}catch(t){}return o},_create:function(){var e,i=this.options,n=this;this._addClass("ui-resizable"),t.extend(this,{_aspectRatio:!!i.aspectRatio,aspectRatio:i.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:i.helper||i.ghost||i.animate?i.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/^(canvas|textarea|input|select|button|img)$/i)&&(this.element.wrap(t("<div class='ui-wrapper'></div>").css({overflow:"hidden",position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.resizable("instance")),this.elementIsWrapper=!0,e={marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom"),marginLeft:this.originalElement.css("marginLeft")},this.element.css(e),this.originalElement.css("margin",0),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css(e),this._proportionallyResize()),this._setupHandles(),i.autoHide&&t(this.element).on("mouseenter",(function(){i.disabled||(n._removeClass("ui-resizable-autohide"),n._handles.show())})).on("mouseleave",(function(){i.disabled||n.resizing||(n._addClass("ui-resizable-autohide"),n._handles.hide())})),this._mouseInit()},_destroy:function(){this._mouseDestroy(),this._addedHandles.remove();var e,i=function(e){t(e).removeData("resizable").removeData("ui-resizable").off(".resizable")};return this.elementIsWrapper&&(i(this.element),e=this.element,this.originalElement.css({position:e.css("position"),width:e.outerWidth(),height:e.outerHeight(),top:e.css("top"),left:e.css("left")}).insertAfter(e),e.remove()),this.originalElement.css("resize",this.originalResizeStyle),i(this.originalElement),this},_setOption:function(t,e){switch(this._super(t,e),t){case"handles":this._removeHandles(),this._setupHandles();break;case"aspectRatio":this._aspectRatio=!!e}},_setupHandles:function(){var e,i,n,o,r,s=this.options,a=this;if(this.handles=s.handles||(t(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this._handles=t(),this._addedHandles=t(),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),n=this.handles.split(","),this.handles={},i=0;i<n.length;i++)o="ui-resizable-"+(e=String.prototype.trim.call(n[i])),r=t("<div>"),this._addClass(r,"ui-resizable-handle "+o),r.css({zIndex:s.zIndex}),this.handles[e]=".ui-resizable-"+e,this.element.children(this.handles[e]).length||(this.element.append(r),this._addedHandles=this._addedHandles.add(r));this._renderAxis=function(e){var i,n,o,r;for(i in e=e||this.element,this.handles)this.handles[i].constructor===String?this.handles[i]=this.element.children(this.handles[i]).first().show():(this.handles[i].jquery||this.handles[i].nodeType)&&(this.handles[i]=t(this.handles[i]),this._on(this.handles[i],{mousedown:a._mouseDown})),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/^(textarea|input|select|button)$/i)&&(n=t(this.handles[i],this.element),r=/sw|ne|nw|se|n|s/.test(i)?n.outerHeight():n.outerWidth(),o=["padding",/ne|nw|n/.test(i)?"Top":/se|sw|s/.test(i)?"Bottom":/^e$/.test(i)?"Right":"Left"].join(""),e.css(o,r),this._proportionallyResize()),this._handles=this._handles.add(this.handles[i])},this._renderAxis(this.element),this._handles=this._handles.add(this.element.find(".ui-resizable-handle")),this._handles.disableSelection(),this._handles.on("mouseover",(function(){a.resizing||(this.className&&(r=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),a.axis=r&&r[1]?r[1]:"se")})),s.autoHide&&(this._handles.hide(),this._addClass("ui-resizable-autohide"))},_removeHandles:function(){this._addedHandles.remove()},_mouseCapture:function(e){var i,n,o=!1;for(i in this.handles)((n=t(this.handles[i])[0])===e.target||t.contains(n,e.target))&&(o=!0);return!this.options.disabled&&o},_mouseStart:function(e){var i,n,o,r=this.options,s=this.element;return this.resizing=!0,this._renderProxy(),i=this._num(this.helper.css("left")),n=this._num(this.helper.css("top")),r.containment&&(i+=t(r.containment).scrollLeft()||0,n+=t(r.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:i,top:n},this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:s.width(),height:s.height()},this.originalSize=this._helper?{width:s.outerWidth(),height:s.outerHeight()}:{width:s.width(),height:s.height()},this.sizeDiff={width:s.outerWidth()-s.width(),height:s.outerHeight()-s.height()},this.originalPosition={left:i,top:n},this.originalMousePosition={left:e.pageX,top:e.pageY},this.aspectRatio="number"==typeof r.aspectRatio?r.aspectRatio:this.originalSize.width/this.originalSize.height||1,o=t(".ui-resizable-"+this.axis).css("cursor"),t("body").css("cursor","auto"===o?this.axis+"-resize":o),this._addClass("ui-resizable-resizing"),this._propagate("start",e),!0},_mouseDrag:function(e){var i,n,o=this.originalMousePosition,r=this.axis,s=e.pageX-o.left||0,a=e.pageY-o.top||0,l=this._change[r];return this._updatePrevProperties(),!!l&&(i=l.apply(this,[e,s,a]),this._updateVirtualBoundaries(e.shiftKey),(this._aspectRatio||e.shiftKey)&&(i=this._updateRatio(i,e)),i=this._respectSize(i,e),this._updateCache(i),this._propagate("resize",e),n=this._applyChanges(),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),t.isEmptyObject(n)||(this._updatePrevProperties(),this._trigger("resize",e,this.ui()),this._applyChanges()),!1)},_mouseStop:function(e){this.resizing=!1;var i,n,o,r,s,a,l,c=this.options,h=this;return this._helper&&(o=(n=(i=this._proportionallyResizeElements).length&&/textarea/i.test(i[0].nodeName))&&this._hasScroll(i[0],"left")?0:h.sizeDiff.height,r=n?0:h.sizeDiff.width,s={width:h.helper.width()-r,height:h.helper.height()-o},a=parseFloat(h.element.css("left"))+(h.position.left-h.originalPosition.left)||null,l=parseFloat(h.element.css("top"))+(h.position.top-h.originalPosition.top)||null,c.animate||this.element.css(t.extend(s,{top:l,left:a})),h.helper.height(h.size.height),h.helper.width(h.size.width),this._helper&&!c.animate&&this._proportionallyResize()),t("body").css("cursor","auto"),this._removeClass("ui-resizable-resizing"),this._propagate("stop",e),this._helper&&this.helper.remove(),!1},_updatePrevProperties:function(){this.prevPosition={top:this.position.top,left:this.position.left},this.prevSize={width:this.size.width,height:this.size.height}},_applyChanges:function(){var t={};return this.position.top!==this.prevPosition.top&&(t.top=this.position.top+"px"),this.position.left!==this.prevPosition.left&&(t.left=this.position.left+"px"),this.size.width!==this.prevSize.width&&(t.width=this.size.width+"px"),this.size.height!==this.prevSize.height&&(t.height=this.size.height+"px"),this.helper.css(t),t},_updateVirtualBoundaries:function(t){var e,i,n,o,r,s=this.options;r={minWidth:this._isNumber(s.minWidth)?s.minWidth:0,maxWidth:this._isNumber(s.maxWidth)?s.maxWidth:1/0,minHeight:this._isNumber(s.minHeight)?s.minHeight:0,maxHeight:this._isNumber(s.maxHeight)?s.maxHeight:1/0},(this._aspectRatio||t)&&(e=r.minHeight*this.aspectRatio,n=r.minWidth/this.aspectRatio,i=r.maxHeight*this.aspectRatio,o=r.maxWidth/this.aspectRatio,e>r.minWidth&&(r.minWidth=e),n>r.minHeight&&(r.minHeight=n),i<r.maxWidth&&(r.maxWidth=i),o<r.maxHeight&&(r.maxHeight=o)),this._vBoundaries=r},_updateCache:function(t){this.offset=this.helper.offset(),this._isNumber(t.left)&&(this.position.left=t.left),this._isNumber(t.top)&&(this.position.top=t.top),this._isNumber(t.height)&&(this.size.height=t.height),this._isNumber(t.width)&&(this.size.width=t.width)},_updateRatio:function(t){var e=this.position,i=this.size,n=this.axis;return this._isNumber(t.height)?t.width=t.height*this.aspectRatio:this._isNumber(t.width)&&(t.height=t.width/this.aspectRatio),"sw"===n&&(t.left=e.left+(i.width-t.width),t.top=null),"nw"===n&&(t.top=e.top+(i.height-t.height),t.left=e.left+(i.width-t.width)),t},_respectSize:function(t){var e=this._vBoundaries,i=this.axis,n=this._isNumber(t.width)&&e.maxWidth&&e.maxWidth<t.width,o=this._isNumber(t.height)&&e.maxHeight&&e.maxHeight<t.height,r=this._isNumber(t.width)&&e.minWidth&&e.minWidth>t.width,s=this._isNumber(t.height)&&e.minHeight&&e.minHeight>t.height,a=this.originalPosition.left+this.originalSize.width,l=this.originalPosition.top+this.originalSize.height,c=/sw|nw|w/.test(i),h=/nw|ne|n/.test(i);return r&&(t.width=e.minWidth),s&&(t.height=e.minHeight),n&&(t.width=e.maxWidth),o&&(t.height=e.maxHeight),r&&c&&(t.left=a-e.minWidth),n&&c&&(t.left=a-e.maxWidth),s&&h&&(t.top=l-e.minHeight),o&&h&&(t.top=l-e.maxHeight),t.width||t.height||t.left||!t.top?t.width||t.height||t.top||!t.left||(t.left=null):t.top=null,t},_getPaddingPlusBorderDimensions:function(t){for(var e=0,i=[],n=[t.css("borderTopWidth"),t.css("borderRightWidth"),t.css("borderBottomWidth"),t.css("borderLeftWidth")],o=[t.css("paddingTop"),t.css("paddingRight"),t.css("paddingBottom"),t.css("paddingLeft")];e<4;e++)i[e]=parseFloat(n[e])||0,i[e]+=parseFloat(o[e])||0;return{height:i[0]+i[2],width:i[1]+i[3]}},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var t,e=0,i=this.helper||this.element;e<this._proportionallyResizeElements.length;e++)t=this._proportionallyResizeElements[e],this.outerDimensions||(this.outerDimensions=this._getPaddingPlusBorderDimensions(t)),t.css({height:i.height()-this.outerDimensions.height||0,width:i.width()-this.outerDimensions.width||0})},_renderProxy:function(){var e=this.element,i=this.options;this.elementOffset=e.offset(),this._helper?(this.helper=this.helper||t("<div></div>").css({overflow:"hidden"}),this._addClass(this.helper,this._helper),this.helper.css({width:this.element.outerWidth(),height:this.element.outerHeight(),position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++i.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(t,e){return{width:this.originalSize.width+e}},w:function(t,e){var i=this.originalSize;return{left:this.originalPosition.left+e,width:i.width-e}},n:function(t,e,i){var n=this.originalSize;return{top:this.originalPosition.top+i,height:n.height-i}},s:function(t,e,i){return{height:this.originalSize.height+i}},se:function(e,i,n){return t.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[e,i,n]))},sw:function(e,i,n){return t.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[e,i,n]))},ne:function(e,i,n){return t.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[e,i,n]))},nw:function(e,i,n){return t.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[e,i,n]))}},_propagate:function(e,i){t.ui.plugin.call(this,e,[i,this.ui()]),"resize"!==e&&this._trigger(e,i,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),t.ui.plugin.add("resizable","animate",{stop:function(e){var i=t(this).resizable("instance"),n=i.options,o=i._proportionallyResizeElements,r=o.length&&/textarea/i.test(o[0].nodeName),s=r&&i._hasScroll(o[0],"left")?0:i.sizeDiff.height,a=r?0:i.sizeDiff.width,l={width:i.size.width-a,height:i.size.height-s},c=parseFloat(i.element.css("left"))+(i.position.left-i.originalPosition.left)||null,h=parseFloat(i.element.css("top"))+(i.position.top-i.originalPosition.top)||null;i.element.animate(t.extend(l,h&&c?{top:h,left:c}:{}),{duration:n.animateDuration,easing:n.animateEasing,step:function(){var n={width:parseFloat(i.element.css("width")),height:parseFloat(i.element.css("height")),top:parseFloat(i.element.css("top")),left:parseFloat(i.element.css("left"))};o&&o.length&&t(o[0]).css({width:n.width,height:n.height}),i._updateCache(n),i._propagate("resize",e)}})}}),t.ui.plugin.add("resizable","containment",{start:function(){var e,i,n,o,r,s,a,l=t(this).resizable("instance"),c=l.options,h=l.element,u=c.containment,d=u instanceof t?u.get(0):/parent/.test(u)?h.parent().get(0):u;d&&(l.containerElement=t(d),/document/.test(u)||u===document?(l.containerOffset={left:0,top:0},l.containerPosition={left:0,top:0},l.parentData={element:t(document),left:0,top:0,width:t(document).width(),height:t(document).height()||document.body.parentNode.scrollHeight}):(e=t(d),i=[],t(["Top","Right","Left","Bottom"]).each((function(t,n){i[t]=l._num(e.css("padding"+n))})),l.containerOffset=e.offset(),l.containerPosition=e.position(),l.containerSize={height:e.innerHeight()-i[3],width:e.innerWidth()-i[1]},n=l.containerOffset,o=l.containerSize.height,r=l.containerSize.width,s=l._hasScroll(d,"left")?d.scrollWidth:r,a=l._hasScroll(d)?d.scrollHeight:o,l.parentData={element:d,left:n.left,top:n.top,width:s,height:a}))},resize:function(e){var i,n,o,r,s=t(this).resizable("instance"),a=s.options,l=s.containerOffset,c=s.position,h=s._aspectRatio||e.shiftKey,u={top:0,left:0},d=s.containerElement,p=!0;d[0]!==document&&/static/.test(d.css("position"))&&(u=l),c.left<(s._helper?l.left:0)&&(s.size.width=s.size.width+(s._helper?s.position.left-l.left:s.position.left-u.left),h&&(s.size.height=s.size.width/s.aspectRatio,p=!1),s.position.left=a.helper?l.left:0),c.top<(s._helper?l.top:0)&&(s.size.height=s.size.height+(s._helper?s.position.top-l.top:s.position.top),h&&(s.size.width=s.size.height*s.aspectRatio,p=!1),s.position.top=s._helper?l.top:0),o=s.containerElement.get(0)===s.element.parent().get(0),r=/relative|absolute/.test(s.containerElement.css("position")),o&&r?(s.offset.left=s.parentData.left+s.position.left,s.offset.top=s.parentData.top+s.position.top):(s.offset.left=s.element.offset().left,s.offset.top=s.element.offset().top),i=Math.abs(s.sizeDiff.width+(s._helper?s.offset.left-u.left:s.offset.left-l.left)),n=Math.abs(s.sizeDiff.height+(s._helper?s.offset.top-u.top:s.offset.top-l.top)),i+s.size.width>=s.parentData.width&&(s.size.width=s.parentData.width-i,h&&(s.size.height=s.size.width/s.aspectRatio,p=!1)),n+s.size.height>=s.parentData.height&&(s.size.height=s.parentData.height-n,h&&(s.size.width=s.size.height*s.aspectRatio,p=!1)),p||(s.position.left=s.prevPosition.left,s.position.top=s.prevPosition.top,s.size.width=s.prevSize.width,s.size.height=s.prevSize.height)},stop:function(){var e=t(this).resizable("instance"),i=e.options,n=e.containerOffset,o=e.containerPosition,r=e.containerElement,s=t(e.helper),a=s.offset(),l=s.outerWidth()-e.sizeDiff.width,c=s.outerHeight()-e.sizeDiff.height;e._helper&&!i.animate&&/relative/.test(r.css("position"))&&t(this).css({left:a.left-o.left-n.left,width:l,height:c}),e._helper&&!i.animate&&/static/.test(r.css("position"))&&t(this).css({left:a.left-o.left-n.left,width:l,height:c})}}),t.ui.plugin.add("resizable","alsoResize",{start:function(){var e=t(this).resizable("instance").options;t(e.alsoResize).each((function(){var e=t(this);e.data("ui-resizable-alsoresize",{width:parseFloat(e.width()),height:parseFloat(e.height()),left:parseFloat(e.css("left")),top:parseFloat(e.css("top"))})}))},resize:function(e,i){var n=t(this).resizable("instance"),o=n.options,r=n.originalSize,s=n.originalPosition,a={height:n.size.height-r.height||0,width:n.size.width-r.width||0,top:n.position.top-s.top||0,left:n.position.left-s.left||0};t(o.alsoResize).each((function(){var e=t(this),n=t(this).data("ui-resizable-alsoresize"),o={},r=e.parents(i.originalElement[0]).length?["width","height"]:["width","height","top","left"];t.each(r,(function(t,e){var i=(n[e]||0)+(a[e]||0);i&&i>=0&&(o[e]=i||null)})),e.css(o)}))},stop:function(){t(this).removeData("ui-resizable-alsoresize")}}),t.ui.plugin.add("resizable","ghost",{start:function(){var e=t(this).resizable("instance"),i=e.size;e.ghost=e.originalElement.clone(),e.ghost.css({opacity:.25,display:"block",position:"relative",height:i.height,width:i.width,margin:0,left:0,top:0}),e._addClass(e.ghost,"ui-resizable-ghost"),!1!==t.uiBackCompat&&"string"==typeof e.options.ghost&&e.ghost.addClass(this.options.ghost),e.ghost.appendTo(e.helper)},resize:function(){var e=t(this).resizable("instance");e.ghost&&e.ghost.css({position:"relative",height:e.size.height,width:e.size.width})},stop:function(){var e=t(this).resizable("instance");e.ghost&&e.helper&&e.helper.get(0).removeChild(e.ghost.get(0))}}),t.ui.plugin.add("resizable","grid",{resize:function(){var e,i=t(this).resizable("instance"),n=i.options,o=i.size,r=i.originalSize,s=i.originalPosition,a=i.axis,l="number"==typeof n.grid?[n.grid,n.grid]:n.grid,c=l[0]||1,h=l[1]||1,u=Math.round((o.width-r.width)/c)*c,d=Math.round((o.height-r.height)/h)*h,p=r.width+u,f=r.height+d,m=n.maxWidth&&n.maxWidth<p,g=n.maxHeight&&n.maxHeight<f,y=n.minWidth&&n.minWidth>p,v=n.minHeight&&n.minHeight>f;n.grid=l,y&&(p+=c),v&&(f+=h),m&&(p-=c),g&&(f-=h),/^(se|s|e)$/.test(a)?(i.size.width=p,i.size.height=f):/^(ne)$/.test(a)?(i.size.width=p,i.size.height=f,i.position.top=s.top-d):/^(sw)$/.test(a)?(i.size.width=p,i.size.height=f,i.position.left=s.left-u):((f-h<=0||p-c<=0)&&(e=i._getPaddingPlusBorderDimensions(this)),f-h>0?(i.size.height=f,i.position.top=s.top-d):(f=h-e.height,i.size.height=f,i.position.top=s.top+r.height-f),p-c>0?(i.size.width=p,i.position.left=s.left-u):(p=c-e.width,i.size.width=p,i.position.left=s.left+r.width-p))}});t.ui.resizable;
/*!
 * jQuery UI Dialog 1.13.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */t.widget("ui.dialog",{version:"1.13.1",options:{appendTo:"body",autoOpen:!0,buttons:[],classes:{"ui-dialog":"ui-corner-all","ui-dialog-titlebar":"ui-corner-all"},closeOnEscape:!0,closeText:"Close",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(e){var i=t(this).css(e).offset().top;i<0&&t(this).css("top",e.top-i)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},sizeRelatedOptions:{buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},resizableRelatedOptions:{maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height},this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.originalTitle=this.element.attr("title"),null==this.options.title&&null!=this.originalTitle&&(this.options.title=this.originalTitle),this.options.disabled&&(this.options.disabled=!1),this._createWrapper(),this.element.show().removeAttr("title").appendTo(this.uiDialog),this._addClass("ui-dialog-content","ui-widget-content"),this._createTitlebar(),this._createButtonPane(),this.options.draggable&&t.fn.draggable&&this._makeDraggable(),this.options.resizable&&t.fn.resizable&&this._makeResizable(),this._isOpen=!1,this._trackFocus()},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var e=this.options.appendTo;return e&&(e.jquery||e.nodeType)?t(e):this.document.find(e||"body").eq(0)},_destroy:function(){var t,e=this.originalPosition;this._untrackInstance(),this._destroyOverlay(),this.element.removeUniqueId().css(this.originalCss).detach(),this.uiDialog.remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),(t=e.parent.children().eq(e.index)).length&&t[0]!==this.element[0]?t.before(this.element):e.parent.append(this.element)},widget:function(){return this.uiDialog},disable:t.noop,enable:t.noop,close:function(e){var i=this;this._isOpen&&!1!==this._trigger("beforeClose",e)&&(this._isOpen=!1,this._focusedElement=null,this._destroyOverlay(),this._untrackInstance(),this.opener.filter(":focusable").trigger("focus").length||t.ui.safeBlur(t.ui.safeActiveElement(this.document[0])),this._hide(this.uiDialog,this.options.hide,(function(){i._trigger("close",e)})))},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(e,i){var n=!1,o=this.uiDialog.siblings(".ui-front:visible").map((function(){return+t(this).css("z-index")})).get(),r=Math.max.apply(null,o);return r>=+this.uiDialog.css("z-index")&&(this.uiDialog.css("z-index",r+1),n=!0),n&&!i&&this._trigger("focus",e),n},open:function(){var e=this;this._isOpen?this._moveToTop()&&this._focusTabbable():(this._isOpen=!0,this.opener=t(t.ui.safeActiveElement(this.document[0])),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this.overlay&&this.overlay.css("z-index",this.uiDialog.css("z-index")-1),this._show(this.uiDialog,this.options.show,(function(){e._focusTabbable(),e._trigger("focus")})),this._makeFocusTarget(),this._trigger("open"))},_focusTabbable:function(){var t=this._focusedElement;t||(t=this.element.find("[autofocus]")),t.length||(t=this.element.find(":tabbable")),t.length||(t=this.uiDialogButtonPane.find(":tabbable")),t.length||(t=this.uiDialogTitlebarClose.filter(":tabbable")),t.length||(t=this.uiDialog),t.eq(0).trigger("focus")},_restoreTabbableFocus:function(){var e=t.ui.safeActiveElement(this.document[0]);this.uiDialog[0]===e||t.contains(this.uiDialog[0],e)||this._focusTabbable()},_keepFocus:function(t){t.preventDefault(),this._restoreTabbableFocus(),this._delay(this._restoreTabbableFocus)},_createWrapper:function(){this.uiDialog=t("<div>").hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo()),this._addClass(this.uiDialog,"ui-dialog","ui-widget ui-widget-content ui-front"),this._on(this.uiDialog,{keydown:function(e){if(this.options.closeOnEscape&&!e.isDefaultPrevented()&&e.keyCode&&e.keyCode===t.ui.keyCode.ESCAPE)return e.preventDefault(),void this.close(e);if(e.keyCode===t.ui.keyCode.TAB&&!e.isDefaultPrevented()){var i=this.uiDialog.find(":tabbable"),n=i.first(),o=i.last();e.target!==o[0]&&e.target!==this.uiDialog[0]||e.shiftKey?e.target!==n[0]&&e.target!==this.uiDialog[0]||!e.shiftKey||(this._delay((function(){o.trigger("focus")})),e.preventDefault()):(this._delay((function(){n.trigger("focus")})),e.preventDefault())}},mousedown:function(t){this._moveToTop(t)&&this._focusTabbable()}}),this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){var e;this.uiDialogTitlebar=t("<div>"),this._addClass(this.uiDialogTitlebar,"ui-dialog-titlebar","ui-widget-header ui-helper-clearfix"),this._on(this.uiDialogTitlebar,{mousedown:function(e){t(e.target).closest(".ui-dialog-titlebar-close")||this.uiDialog.trigger("focus")}}),this.uiDialogTitlebarClose=t("<button type='button'></button>").button({label:t("<a>").text(this.options.closeText).html(),icon:"ui-icon-closethick",showLabel:!1}).appendTo(this.uiDialogTitlebar),this._addClass(this.uiDialogTitlebarClose,"ui-dialog-titlebar-close"),this._on(this.uiDialogTitlebarClose,{click:function(t){t.preventDefault(),this.close(t)}}),e=t("<span>").uniqueId().prependTo(this.uiDialogTitlebar),this._addClass(e,"ui-dialog-title"),this._title(e),this.uiDialogTitlebar.prependTo(this.uiDialog),this.uiDialog.attr({"aria-labelledby":e.attr("id")})},_title:function(t){this.options.title?t.text(this.options.title):t.html("&#160;")},_createButtonPane:function(){this.uiDialogButtonPane=t("<div>"),this._addClass(this.uiDialogButtonPane,"ui-dialog-buttonpane","ui-widget-content ui-helper-clearfix"),this.uiButtonSet=t("<div>").appendTo(this.uiDialogButtonPane),this._addClass(this.uiButtonSet,"ui-dialog-buttonset"),this._createButtons()},_createButtons:function(){var e=this,i=this.options.buttons;this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),t.isEmptyObject(i)||Array.isArray(i)&&!i.length?this._removeClass(this.uiDialog,"ui-dialog-buttons"):(t.each(i,(function(i,n){var o,r;n="function"==typeof n?{click:n,text:i}:n,n=t.extend({type:"button"},n),o=n.click,r={icon:n.icon,iconPosition:n.iconPosition,showLabel:n.showLabel,icons:n.icons,text:n.text},delete n.click,delete n.icon,delete n.iconPosition,delete n.showLabel,delete n.icons,"boolean"==typeof n.text&&delete n.text,t("<button></button>",n).button(r).appendTo(e.uiButtonSet).on("click",(function(){o.apply(e.element[0],arguments)}))})),this._addClass(this.uiDialog,"ui-dialog-buttons"),this.uiDialogButtonPane.appendTo(this.uiDialog))},_makeDraggable:function(){var e=this,i=this.options;function n(t){return{position:t.position,offset:t.offset}}this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(i,o){e._addClass(t(this),"ui-dialog-dragging"),e._blockFrames(),e._trigger("dragStart",i,n(o))},drag:function(t,i){e._trigger("drag",t,n(i))},stop:function(o,r){var s=r.offset.left-e.document.scrollLeft(),a=r.offset.top-e.document.scrollTop();i.position={my:"left top",at:"left"+(s>=0?"+":"")+s+" top"+(a>=0?"+":"")+a,of:e.window},e._removeClass(t(this),"ui-dialog-dragging"),e._unblockFrames(),e._trigger("dragStop",o,n(r))}})},_makeResizable:function(){var e=this,i=this.options,n=i.resizable,o=this.uiDialog.css("position"),r="string"==typeof n?n:"n,e,s,w,se,sw,ne,nw";function s(t){return{originalPosition:t.originalPosition,originalSize:t.originalSize,position:t.position,size:t.size}}this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:i.maxWidth,maxHeight:i.maxHeight,minWidth:i.minWidth,minHeight:this._minHeight(),handles:r,start:function(i,n){e._addClass(t(this),"ui-dialog-resizing"),e._blockFrames(),e._trigger("resizeStart",i,s(n))},resize:function(t,i){e._trigger("resize",t,s(i))},stop:function(n,o){var r=e.uiDialog.offset(),a=r.left-e.document.scrollLeft(),l=r.top-e.document.scrollTop();i.height=e.uiDialog.height(),i.width=e.uiDialog.width(),i.position={my:"left top",at:"left"+(a>=0?"+":"")+a+" top"+(l>=0?"+":"")+l,of:e.window},e._removeClass(t(this),"ui-dialog-resizing"),e._unblockFrames(),e._trigger("resizeStop",n,s(o))}}).css("position",o)},_trackFocus:function(){this._on(this.widget(),{focusin:function(e){this._makeFocusTarget(),this._focusedElement=t(e.target)}})},_makeFocusTarget:function(){this._untrackInstance(),this._trackingInstances().unshift(this)},_untrackInstance:function(){var e=this._trackingInstances(),i=t.inArray(this,e);-1!==i&&e.splice(i,1)},_trackingInstances:function(){var t=this.document.data("ui-dialog-instances");return t||(t=[],this.document.data("ui-dialog-instances",t)),t},_minHeight:function(){var t=this.options;return"auto"===t.height?t.minHeight:Math.min(t.minHeight,t.height)},_position:function(){var t=this.uiDialog.is(":visible");t||this.uiDialog.show(),this.uiDialog.position(this.options.position),t||this.uiDialog.hide()},_setOptions:function(e){var i=this,n=!1,o={};t.each(e,(function(t,e){i._setOption(t,e),t in i.sizeRelatedOptions&&(n=!0),t in i.resizableRelatedOptions&&(o[t]=e)})),n&&(this._size(),this._position()),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",o)},_setOption:function(e,i){var n,o,r=this.uiDialog;"disabled"!==e&&(this._super(e,i),"appendTo"===e&&this.uiDialog.appendTo(this._appendTo()),"buttons"===e&&this._createButtons(),"closeText"===e&&this.uiDialogTitlebarClose.button({label:t("<a>").text(""+this.options.closeText).html()}),"draggable"===e&&((n=r.is(":data(ui-draggable)"))&&!i&&r.draggable("destroy"),!n&&i&&this._makeDraggable()),"position"===e&&this._position(),"resizable"===e&&((o=r.is(":data(ui-resizable)"))&&!i&&r.resizable("destroy"),o&&"string"==typeof i&&r.resizable("option","handles",i),o||!1===i||this._makeResizable()),"title"===e&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title")))},_size:function(){var t,e,i,n=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0}),n.minWidth>n.width&&(n.width=n.minWidth),t=this.uiDialog.css({height:"auto",width:n.width}).outerHeight(),e=Math.max(0,n.minHeight-t),i="number"==typeof n.maxHeight?Math.max(0,n.maxHeight-t):"none","auto"===n.height?this.element.css({minHeight:e,maxHeight:i,height:"auto"}):this.element.height(Math.max(0,n.height-t)),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map((function(){var e=t(this);return t("<div>").css({position:"absolute",width:e.outerWidth(),height:e.outerHeight()}).appendTo(e.parent()).offset(e.offset())[0]}))},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_allowInteraction:function(e){return!!t(e.target).closest(".ui-dialog").length||!!t(e.target).closest(".ui-datepicker").length},_createOverlay:function(){if(this.options.modal){var e=t.fn.jquery.substring(0,4),i=!0;this._delay((function(){i=!1})),this.document.data("ui-dialog-overlays")||this.document.on("focusin.ui-dialog",function(t){if(!i){var n=this._trackingInstances()[0];n._allowInteraction(t)||(t.preventDefault(),n._focusTabbable(),"3.4."!==e&&"3.5."!==e||n._delay(n._restoreTabbableFocus))}}.bind(this)),this.overlay=t("<div>").appendTo(this._appendTo()),this._addClass(this.overlay,null,"ui-widget-overlay ui-front"),this._on(this.overlay,{mousedown:"_keepFocus"}),this.document.data("ui-dialog-overlays",(this.document.data("ui-dialog-overlays")||0)+1)}},_destroyOverlay:function(){if(this.options.modal&&this.overlay){var t=this.document.data("ui-dialog-overlays")-1;t?this.document.data("ui-dialog-overlays",t):(this.document.off("focusin.ui-dialog"),this.document.removeData("ui-dialog-overlays")),this.overlay.remove(),this.overlay=null}}}),!1!==t.uiBackCompat&&t.widget("ui.dialog",t.ui.dialog,{options:{dialogClass:""},_createWrapper:function(){this._super(),this.uiDialog.addClass(this.options.dialogClass)},_setOption:function(t,e){"dialogClass"===t&&this.uiDialog.removeClass(this.options.dialogClass).addClass(e),this._superApply(arguments)}});t.ui.dialog;
/*!
 * jQuery UI Droppable 1.13.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */t.widget("ui.droppable",{version:"1.13.1",widgetEventPrefix:"drop",options:{accept:"*",addClasses:!0,greedy:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var t,e=this.options,i=e.accept;this.isover=!1,this.isout=!0,this.accept="function"==typeof i?i:function(t){return t.is(i)},this.proportions=function(){if(!arguments.length)return t||(t={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight});t=arguments[0]},this._addToManager(e.scope),e.addClasses&&this._addClass("ui-droppable")},_addToManager:function(e){t.ui.ddmanager.droppables[e]=t.ui.ddmanager.droppables[e]||[],t.ui.ddmanager.droppables[e].push(this)},_splice:function(t){for(var e=0;e<t.length;e++)t[e]===this&&t.splice(e,1)},_destroy:function(){var e=t.ui.ddmanager.droppables[this.options.scope];this._splice(e)},_setOption:function(e,i){if("accept"===e)this.accept="function"==typeof i?i:function(t){return t.is(i)};else if("scope"===e){var n=t.ui.ddmanager.droppables[this.options.scope];this._splice(n),this._addToManager(i)}this._super(e,i)},_activate:function(e){var i=t.ui.ddmanager.current;this._addActiveClass(),i&&this._trigger("activate",e,this.ui(i))},_deactivate:function(e){var i=t.ui.ddmanager.current;this._removeActiveClass(),i&&this._trigger("deactivate",e,this.ui(i))},_over:function(e){var i=t.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!==this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this._addHoverClass(),this._trigger("over",e,this.ui(i)))},_out:function(e){var i=t.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!==this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this._removeHoverClass(),this._trigger("out",e,this.ui(i)))},_drop:function(e,i){var n=i||t.ui.ddmanager.current,o=!1;return!(!n||(n.currentItem||n.element)[0]===this.element[0])&&(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each((function(){var i=t(this).droppable("instance");if(i.options.greedy&&!i.options.disabled&&i.options.scope===n.options.scope&&i.accept.call(i.element[0],n.currentItem||n.element)&&t.ui.intersect(n,t.extend(i,{offset:i.element.offset()}),i.options.tolerance,e))return o=!0,!1})),!o&&(!!this.accept.call(this.element[0],n.currentItem||n.element)&&(this._removeActiveClass(),this._removeHoverClass(),this._trigger("drop",e,this.ui(n)),this.element)))},ui:function(t){return{draggable:t.currentItem||t.element,helper:t.helper,position:t.position,offset:t.positionAbs}},_addHoverClass:function(){this._addClass("ui-droppable-hover")},_removeHoverClass:function(){this._removeClass("ui-droppable-hover")},_addActiveClass:function(){this._addClass("ui-droppable-active")},_removeActiveClass:function(){this._removeClass("ui-droppable-active")}}),t.ui.intersect=function(){function t(t,e,i){return t>=e&&t<e+i}return function(e,i,n,o){if(!i.offset)return!1;var r=(e.positionAbs||e.position.absolute).left+e.margins.left,s=(e.positionAbs||e.position.absolute).top+e.margins.top,a=r+e.helperProportions.width,l=s+e.helperProportions.height,c=i.offset.left,h=i.offset.top,u=c+i.proportions().width,d=h+i.proportions().height;switch(n){case"fit":return c<=r&&a<=u&&h<=s&&l<=d;case"intersect":return c<r+e.helperProportions.width/2&&a-e.helperProportions.width/2<u&&h<s+e.helperProportions.height/2&&l-e.helperProportions.height/2<d;case"pointer":return t(o.pageY,h,i.proportions().height)&&t(o.pageX,c,i.proportions().width);case"touch":return(s>=h&&s<=d||l>=h&&l<=d||s<h&&l>d)&&(r>=c&&r<=u||a>=c&&a<=u||r<c&&a>u);default:return!1}}}(),t.ui.ddmanager={current:null,droppables:{default:[]},prepareOffsets:function(e,i){var n,o,r=t.ui.ddmanager.droppables[e.options.scope]||[],s=i?i.type:null,a=(e.currentItem||e.element).find(":data(ui-droppable)").addBack();t:for(n=0;n<r.length;n++)if(!(r[n].options.disabled||e&&!r[n].accept.call(r[n].element[0],e.currentItem||e.element))){for(o=0;o<a.length;o++)if(a[o]===r[n].element[0]){r[n].proportions().height=0;continue t}r[n].visible="none"!==r[n].element.css("display"),r[n].visible&&("mousedown"===s&&r[n]._activate.call(r[n],i),r[n].offset=r[n].element.offset(),r[n].proportions({width:r[n].element[0].offsetWidth,height:r[n].element[0].offsetHeight}))}},drop:function(e,i){var n=!1;return t.each((t.ui.ddmanager.droppables[e.options.scope]||[]).slice(),(function(){this.options&&(!this.options.disabled&&this.visible&&t.ui.intersect(e,this,this.options.tolerance,i)&&(n=this._drop.call(this,i)||n),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],e.currentItem||e.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,i)))})),n},dragStart:function(e,i){e.element.parentsUntil("body").on("scroll.droppable",(function(){e.options.refreshPositions||t.ui.ddmanager.prepareOffsets(e,i)}))},drag:function(e,i){e.options.refreshPositions&&t.ui.ddmanager.prepareOffsets(e,i),t.each(t.ui.ddmanager.droppables[e.options.scope]||[],(function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var n,o,r,s=t.ui.intersect(e,this,this.options.tolerance,i),a=!s&&this.isover?"isout":s&&!this.isover?"isover":null;a&&(this.options.greedy&&(o=this.options.scope,(r=this.element.parents(":data(ui-droppable)").filter((function(){return t(this).droppable("instance").options.scope===o}))).length&&((n=t(r[0]).droppable("instance")).greedyChild="isover"===a)),n&&"isover"===a&&(n.isover=!1,n.isout=!0,n._out.call(n,i)),this[a]=!0,this["isout"===a?"isover":"isout"]=!1,this["isover"===a?"_over":"_out"].call(this,i),n&&"isout"===a&&(n.isout=!1,n.isover=!0,n._over.call(n,i)))}}))},dragStop:function(e,i){e.element.parentsUntil("body").off("scroll.droppable"),e.options.refreshPositions||t.ui.ddmanager.prepareOffsets(e,i)}},!1!==t.uiBackCompat&&t.widget("ui.droppable",t.ui.droppable,{options:{hoverClass:!1,activeClass:!1},_addActiveClass:function(){this._super(),this.options.activeClass&&this.element.addClass(this.options.activeClass)},_removeActiveClass:function(){this._super(),this.options.activeClass&&this.element.removeClass(this.options.activeClass)},_addHoverClass:function(){this._super(),this.options.hoverClass&&this.element.addClass(this.options.hoverClass)},_removeHoverClass:function(){this._super(),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass)}});t.ui.droppable,t.widget("ui.progressbar",{version:"1.13.1",options:{classes:{"ui-progressbar":"ui-corner-all","ui-progressbar-value":"ui-corner-left","ui-progressbar-complete":"ui-corner-right"},max:100,value:0,change:null,complete:null},min:0,_create:function(){this.oldValue=this.options.value=this._constrainedValue(),this.element.attr({role:"progressbar","aria-valuemin":this.min}),this._addClass("ui-progressbar","ui-widget ui-widget-content"),this.valueDiv=t("<div>").appendTo(this.element),this._addClass(this.valueDiv,"ui-progressbar-value","ui-widget-header"),this._refreshValue()},_destroy:function(){this.element.removeAttr("role aria-valuemin aria-valuemax aria-valuenow"),this.valueDiv.remove()},value:function(t){if(void 0===t)return this.options.value;this.options.value=this._constrainedValue(t),this._refreshValue()},_constrainedValue:function(t){return void 0===t&&(t=this.options.value),this.indeterminate=!1===t,"number"!=typeof t&&(t=0),!this.indeterminate&&Math.min(this.options.max,Math.max(this.min,t))},_setOptions:function(t){var e=t.value;delete t.value,this._super(t),this.options.value=this._constrainedValue(e),this._refreshValue()},_setOption:function(t,e){"max"===t&&(e=Math.max(this.min,e)),this._super(t,e)},_setOptionDisabled:function(t){this._super(t),this.element.attr("aria-disabled",t),this._toggleClass(null,"ui-state-disabled",!!t)},_percentage:function(){return this.indeterminate?100:100*(this.options.value-this.min)/(this.options.max-this.min)},_refreshValue:function(){var e=this.options.value,i=this._percentage();this.valueDiv.toggle(this.indeterminate||e>this.min).width(i.toFixed(0)+"%"),this._toggleClass(this.valueDiv,"ui-progressbar-complete",null,e===this.options.max)._toggleClass("ui-progressbar-indeterminate",null,this.indeterminate),this.indeterminate?(this.element.removeAttr("aria-valuenow"),this.overlayDiv||(this.overlayDiv=t("<div>").appendTo(this.valueDiv),this._addClass(this.overlayDiv,"ui-progressbar-overlay"))):(this.element.attr({"aria-valuemax":this.options.max,"aria-valuenow":e}),this.overlayDiv&&(this.overlayDiv.remove(),this.overlayDiv=null)),this.oldValue!==e&&(this.oldValue=e,this._trigger("change")),e===this.options.max&&this._trigger("complete")}}),t.widget("ui.selectable",t.ui.mouse,{version:"1.13.1",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var e=this;this._addClass("ui-selectable"),this.dragged=!1,this.refresh=function(){e.elementPos=t(e.element[0]).offset(),e.selectees=t(e.options.filter,e.element[0]),e._addClass(e.selectees,"ui-selectee"),e.selectees.each((function(){var i=t(this),n=i.offset(),o={left:n.left-e.elementPos.left,top:n.top-e.elementPos.top};t.data(this,"selectable-item",{element:this,$element:i,left:o.left,top:o.top,right:o.left+i.outerWidth(),bottom:o.top+i.outerHeight(),startselected:!1,selected:i.hasClass("ui-selected"),selecting:i.hasClass("ui-selecting"),unselecting:i.hasClass("ui-unselecting")})}))},this.refresh(),this._mouseInit(),this.helper=t("<div>"),this._addClass(this.helper,"ui-selectable-helper")},_destroy:function(){this.selectees.removeData("selectable-item"),this._mouseDestroy()},_mouseStart:function(e){var i=this,n=this.options;this.opos=[e.pageX,e.pageY],this.elementPos=t(this.element[0]).offset(),this.options.disabled||(this.selectees=t(n.filter,this.element[0]),this._trigger("start",e),t(n.appendTo).append(this.helper),this.helper.css({left:e.pageX,top:e.pageY,width:0,height:0}),n.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each((function(){var n=t.data(this,"selectable-item");n.startselected=!0,e.metaKey||e.ctrlKey||(i._removeClass(n.$element,"ui-selected"),n.selected=!1,i._addClass(n.$element,"ui-unselecting"),n.unselecting=!0,i._trigger("unselecting",e,{unselecting:n.element}))})),t(e.target).parents().addBack().each((function(){var n,o=t.data(this,"selectable-item");if(o)return n=!e.metaKey&&!e.ctrlKey||!o.$element.hasClass("ui-selected"),i._removeClass(o.$element,n?"ui-unselecting":"ui-selected")._addClass(o.$element,n?"ui-selecting":"ui-unselecting"),o.unselecting=!n,o.selecting=n,o.selected=n,n?i._trigger("selecting",e,{selecting:o.element}):i._trigger("unselecting",e,{unselecting:o.element}),!1})))},_mouseDrag:function(e){if(this.dragged=!0,!this.options.disabled){var i,n=this,o=this.options,r=this.opos[0],s=this.opos[1],a=e.pageX,l=e.pageY;return r>a&&(i=a,a=r,r=i),s>l&&(i=l,l=s,s=i),this.helper.css({left:r,top:s,width:a-r,height:l-s}),this.selectees.each((function(){var i=t.data(this,"selectable-item"),c=!1,h={};i&&i.element!==n.element[0]&&(h.left=i.left+n.elementPos.left,h.right=i.right+n.elementPos.left,h.top=i.top+n.elementPos.top,h.bottom=i.bottom+n.elementPos.top,"touch"===o.tolerance?c=!(h.left>a||h.right<r||h.top>l||h.bottom<s):"fit"===o.tolerance&&(c=h.left>r&&h.right<a&&h.top>s&&h.bottom<l),c?(i.selected&&(n._removeClass(i.$element,"ui-selected"),i.selected=!1),i.unselecting&&(n._removeClass(i.$element,"ui-unselecting"),i.unselecting=!1),i.selecting||(n._addClass(i.$element,"ui-selecting"),i.selecting=!0,n._trigger("selecting",e,{selecting:i.element}))):(i.selecting&&((e.metaKey||e.ctrlKey)&&i.startselected?(n._removeClass(i.$element,"ui-selecting"),i.selecting=!1,n._addClass(i.$element,"ui-selected"),i.selected=!0):(n._removeClass(i.$element,"ui-selecting"),i.selecting=!1,i.startselected&&(n._addClass(i.$element,"ui-unselecting"),i.unselecting=!0),n._trigger("unselecting",e,{unselecting:i.element}))),i.selected&&(e.metaKey||e.ctrlKey||i.startselected||(n._removeClass(i.$element,"ui-selected"),i.selected=!1,n._addClass(i.$element,"ui-unselecting"),i.unselecting=!0,n._trigger("unselecting",e,{unselecting:i.element})))))})),!1}},_mouseStop:function(e){var i=this;return this.dragged=!1,t(".ui-unselecting",this.element[0]).each((function(){var n=t.data(this,"selectable-item");i._removeClass(n.$element,"ui-unselecting"),n.unselecting=!1,n.startselected=!1,i._trigger("unselected",e,{unselected:n.element})})),t(".ui-selecting",this.element[0]).each((function(){var n=t.data(this,"selectable-item");i._removeClass(n.$element,"ui-selecting")._addClass(n.$element,"ui-selected"),n.selecting=!1,n.selected=!0,n.startselected=!0,i._trigger("selected",e,{selected:n.element})})),this._trigger("stop",e),this.helper.remove(),!1}}),t.widget("ui.selectmenu",[t.ui.formResetMixin,{version:"1.13.1",defaultElement:"<select>",options:{appendTo:null,classes:{"ui-selectmenu-button-open":"ui-corner-top","ui-selectmenu-button-closed":"ui-corner-all"},disabled:null,icons:{button:"ui-icon-triangle-1-s"},position:{my:"left top",at:"left bottom",collision:"none"},width:!1,change:null,close:null,focus:null,open:null,select:null},_create:function(){var e=this.element.uniqueId().attr("id");this.ids={element:e,button:e+"-button",menu:e+"-menu"},this._drawButton(),this._drawMenu(),this._bindFormResetHandler(),this._rendered=!1,this.menuItems=t()},_drawButton:function(){var e,i=this,n=this._parseOption(this.element.find("option:selected"),this.element[0].selectedIndex);this.labels=this.element.labels().attr("for",this.ids.button),this._on(this.labels,{click:function(t){this.button.trigger("focus"),t.preventDefault()}}),this.element.hide(),this.button=t("<span>",{tabindex:this.options.disabled?-1:0,id:this.ids.button,role:"combobox","aria-expanded":"false","aria-autocomplete":"list","aria-owns":this.ids.menu,"aria-haspopup":"true",title:this.element.attr("title")}).insertAfter(this.element),this._addClass(this.button,"ui-selectmenu-button ui-selectmenu-button-closed","ui-button ui-widget"),e=t("<span>").appendTo(this.button),this._addClass(e,"ui-selectmenu-icon","ui-icon "+this.options.icons.button),this.buttonItem=this._renderButtonItem(n).appendTo(this.button),!1!==this.options.width&&this._resizeButton(),this._on(this.button,this._buttonEvents),this.button.one("focusin",(function(){i._rendered||i._refreshMenu()}))},_drawMenu:function(){var e=this;this.menu=t("<ul>",{"aria-hidden":"true","aria-labelledby":this.ids.button,id:this.ids.menu}),this.menuWrap=t("<div>").append(this.menu),this._addClass(this.menuWrap,"ui-selectmenu-menu","ui-front"),this.menuWrap.appendTo(this._appendTo()),this.menuInstance=this.menu.menu({classes:{"ui-menu":"ui-corner-bottom"},role:"listbox",select:function(t,i){t.preventDefault(),e._setSelection(),e._select(i.item.data("ui-selectmenu-item"),t)},focus:function(t,i){var n=i.item.data("ui-selectmenu-item");null!=e.focusIndex&&n.index!==e.focusIndex&&(e._trigger("focus",t,{item:n}),e.isOpen||e._select(n,t)),e.focusIndex=n.index,e.button.attr("aria-activedescendant",e.menuItems.eq(n.index).attr("id"))}}).menu("instance"),this.menuInstance._off(this.menu,"mouseleave"),this.menuInstance._closeOnDocumentClick=function(){return!1},this.menuInstance._isDivider=function(){return!1}},refresh:function(){this._refreshMenu(),this.buttonItem.replaceWith(this.buttonItem=this._renderButtonItem(this._getSelectedItem().data("ui-selectmenu-item")||{})),null===this.options.width&&this._resizeButton()},_refreshMenu:function(){var t,e=this.element.find("option");this.menu.empty(),this._parseOptions(e),this._renderMenu(this.menu,this.items),this.menuInstance.refresh(),this.menuItems=this.menu.find("li").not(".ui-selectmenu-optgroup").find(".ui-menu-item-wrapper"),this._rendered=!0,e.length&&(t=this._getSelectedItem(),this.menuInstance.focus(null,t),this._setAria(t.data("ui-selectmenu-item")),this._setOption("disabled",this.element.prop("disabled")))},open:function(t){this.options.disabled||(this._rendered?(this._removeClass(this.menu.find(".ui-state-active"),null,"ui-state-active"),this.menuInstance.focus(null,this._getSelectedItem())):this._refreshMenu(),this.menuItems.length&&(this.isOpen=!0,this._toggleAttr(),this._resizeMenu(),this._position(),this._on(this.document,this._documentClick),this._trigger("open",t)))},_position:function(){this.menuWrap.position(t.extend({of:this.button},this.options.position))},close:function(t){this.isOpen&&(this.isOpen=!1,this._toggleAttr(),this.range=null,this._off(this.document),this._trigger("close",t))},widget:function(){return this.button},menuWidget:function(){return this.menu},_renderButtonItem:function(e){var i=t("<span>");return this._setText(i,e.label),this._addClass(i,"ui-selectmenu-text"),i},_renderMenu:function(e,i){var n=this,o="";t.each(i,(function(i,r){var s;r.optgroup!==o&&(s=t("<li>",{text:r.optgroup}),n._addClass(s,"ui-selectmenu-optgroup","ui-menu-divider"+(r.element.parent("optgroup").prop("disabled")?" ui-state-disabled":"")),s.appendTo(e),o=r.optgroup),n._renderItemData(e,r)}))},_renderItemData:function(t,e){return this._renderItem(t,e).data("ui-selectmenu-item",e)},_renderItem:function(e,i){var n=t("<li>"),o=t("<div>",{title:i.element.attr("title")});return i.disabled&&this._addClass(n,null,"ui-state-disabled"),this._setText(o,i.label),n.append(o).appendTo(e)},_setText:function(t,e){e?t.text(e):t.html("&#160;")},_move:function(t,e){var i,n,o=".ui-menu-item";this.isOpen?i=this.menuItems.eq(this.focusIndex).parent("li"):(i=this.menuItems.eq(this.element[0].selectedIndex).parent("li"),o+=":not(.ui-state-disabled)"),(n="first"===t||"last"===t?i["first"===t?"prevAll":"nextAll"](o).eq(-1):i[t+"All"](o).eq(0)).length&&this.menuInstance.focus(e,n)},_getSelectedItem:function(){return this.menuItems.eq(this.element[0].selectedIndex).parent("li")},_toggle:function(t){this[this.isOpen?"close":"open"](t)},_setSelection:function(){var t;this.range&&(window.getSelection?((t=window.getSelection()).removeAllRanges(),t.addRange(this.range)):this.range.select(),this.button.focus())},_documentClick:{mousedown:function(e){this.isOpen&&(t(e.target).closest(".ui-selectmenu-menu, #"+t.escapeSelector(this.ids.button)).length||this.close(e))}},_buttonEvents:{mousedown:function(){var t;window.getSelection?(t=window.getSelection()).rangeCount&&(this.range=t.getRangeAt(0)):this.range=document.selection.createRange()},click:function(t){this._setSelection(),this._toggle(t)},keydown:function(e){var i=!0;switch(e.keyCode){case t.ui.keyCode.TAB:case t.ui.keyCode.ESCAPE:this.close(e),i=!1;break;case t.ui.keyCode.ENTER:this.isOpen&&this._selectFocusedItem(e);break;case t.ui.keyCode.UP:e.altKey?this._toggle(e):this._move("prev",e);break;case t.ui.keyCode.DOWN:e.altKey?this._toggle(e):this._move("next",e);break;case t.ui.keyCode.SPACE:this.isOpen?this._selectFocusedItem(e):this._toggle(e);break;case t.ui.keyCode.LEFT:this._move("prev",e);break;case t.ui.keyCode.RIGHT:this._move("next",e);break;case t.ui.keyCode.HOME:case t.ui.keyCode.PAGE_UP:this._move("first",e);break;case t.ui.keyCode.END:case t.ui.keyCode.PAGE_DOWN:this._move("last",e);break;default:this.menu.trigger(e),i=!1}i&&e.preventDefault()}},_selectFocusedItem:function(t){var e=this.menuItems.eq(this.focusIndex).parent("li");e.hasClass("ui-state-disabled")||this._select(e.data("ui-selectmenu-item"),t)},_select:function(t,e){var i=this.element[0].selectedIndex;this.element[0].selectedIndex=t.index,this.buttonItem.replaceWith(this.buttonItem=this._renderButtonItem(t)),this._setAria(t),this._trigger("select",e,{item:t}),t.index!==i&&this._trigger("change",e,{item:t}),this.close(e)},_setAria:function(t){var e=this.menuItems.eq(t.index).attr("id");this.button.attr({"aria-labelledby":e,"aria-activedescendant":e}),this.menu.attr("aria-activedescendant",e)},_setOption:function(t,e){if("icons"===t){var i=this.button.find("span.ui-icon");this._removeClass(i,null,this.options.icons.button)._addClass(i,null,e.button)}this._super(t,e),"appendTo"===t&&this.menuWrap.appendTo(this._appendTo()),"width"===t&&this._resizeButton()},_setOptionDisabled:function(t){this._super(t),this.menuInstance.option("disabled",t),this.button.attr("aria-disabled",t),this._toggleClass(this.button,null,"ui-state-disabled",t),this.element.prop("disabled",t),t?(this.button.attr("tabindex",-1),this.close()):this.button.attr("tabindex",0)},_appendTo:function(){var e=this.options.appendTo;return e&&(e=e.jquery||e.nodeType?t(e):this.document.find(e).eq(0)),e&&e[0]||(e=this.element.closest(".ui-front, dialog")),e.length||(e=this.document[0].body),e},_toggleAttr:function(){this.button.attr("aria-expanded",this.isOpen),this._removeClass(this.button,"ui-selectmenu-button-"+(this.isOpen?"closed":"open"))._addClass(this.button,"ui-selectmenu-button-"+(this.isOpen?"open":"closed"))._toggleClass(this.menuWrap,"ui-selectmenu-open",null,this.isOpen),this.menu.attr("aria-hidden",!this.isOpen)},_resizeButton:function(){var t=this.options.width;!1!==t?(null===t&&(t=this.element.show().outerWidth(),this.element.hide()),this.button.outerWidth(t)):this.button.css("width","")},_resizeMenu:function(){this.menu.outerWidth(Math.max(this.button.outerWidth(),this.menu.width("").outerWidth()+1))},_getCreateOptions:function(){var t=this._super();return t.disabled=this.element.prop("disabled"),t},_parseOptions:function(e){var i=this,n=[];e.each((function(e,o){o.hidden||n.push(i._parseOption(t(o),e))})),this.items=n},_parseOption:function(t,e){var i=t.parent("optgroup");return{element:t,index:e,value:t.val(),label:t.text(),optgroup:i.attr("label")||"",disabled:i.prop("disabled")||t.prop("disabled")}},_destroy:function(){this._unbindFormResetHandler(),this.menuWrap.remove(),this.button.remove(),this.element.show(),this.element.removeUniqueId(),this.labels.attr("for",this.ids.element)}}]),t.widget("ui.slider",t.ui.mouse,{version:"1.13.1",widgetEventPrefix:"slide",options:{animate:!1,classes:{"ui-slider":"ui-corner-all","ui-slider-handle":"ui-corner-all","ui-slider-range":"ui-corner-all ui-widget-header"},distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},numPages:5,_create:function(){this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this._calculateNewMax(),this._addClass("ui-slider ui-slider-"+this.orientation,"ui-widget ui-widget-content"),this._refresh(),this._animateOff=!1},_refresh:function(){this._createRange(),this._createHandles(),this._setupEvents(),this._refreshValue()},_createHandles:function(){var e,i,n=this.options,o=this.element.find(".ui-slider-handle"),r=[];for(i=n.values&&n.values.length||1,o.length>i&&(o.slice(i).remove(),o=o.slice(0,i)),e=o.length;e<i;e++)r.push("<span tabindex='0'></span>");this.handles=o.add(t(r.join("")).appendTo(this.element)),this._addClass(this.handles,"ui-slider-handle","ui-state-default"),this.handle=this.handles.eq(0),this.handles.each((function(e){t(this).data("ui-slider-handle-index",e).attr("tabIndex",0)}))},_createRange:function(){var e=this.options;e.range?(!0===e.range&&(e.values?e.values.length&&2!==e.values.length?e.values=[e.values[0],e.values[0]]:Array.isArray(e.values)&&(e.values=e.values.slice(0)):e.values=[this._valueMin(),this._valueMin()]),this.range&&this.range.length?(this._removeClass(this.range,"ui-slider-range-min ui-slider-range-max"),this.range.css({left:"",bottom:""})):(this.range=t("<div>").appendTo(this.element),this._addClass(this.range,"ui-slider-range")),"min"!==e.range&&"max"!==e.range||this._addClass(this.range,"ui-slider-range-"+e.range)):(this.range&&this.range.remove(),this.range=null)},_setupEvents:function(){this._off(this.handles),this._on(this.handles,this._handleEvents),this._hoverable(this.handles),this._focusable(this.handles)},_destroy:function(){this.handles.remove(),this.range&&this.range.remove(),this._mouseDestroy()},_mouseCapture:function(e){var i,n,o,r,s,a,l,c=this,h=this.options;return!h.disabled&&(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),i={x:e.pageX,y:e.pageY},n=this._normValueFromMouse(i),o=this._valueMax()-this._valueMin()+1,this.handles.each((function(e){var i=Math.abs(n-c.values(e));(o>i||o===i&&(e===c._lastChangedValue||c.values(e)===h.min))&&(o=i,r=t(this),s=e)})),!1!==this._start(e,s)&&(this._mouseSliding=!0,this._handleIndex=s,this._addClass(r,null,"ui-state-active"),r.trigger("focus"),a=r.offset(),l=!t(e.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=l?{left:0,top:0}:{left:e.pageX-a.left-r.width()/2,top:e.pageY-a.top-r.height()/2-(parseInt(r.css("borderTopWidth"),10)||0)-(parseInt(r.css("borderBottomWidth"),10)||0)+(parseInt(r.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(e,s,n),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(t){var e={x:t.pageX,y:t.pageY},i=this._normValueFromMouse(e);return this._slide(t,this._handleIndex,i),!1},_mouseStop:function(t){return this._removeClass(this.handles,null,"ui-state-active"),this._mouseSliding=!1,this._stop(t,this._handleIndex),this._change(t,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(t){var e,i,n,o,r;return"horizontal"===this.orientation?(e=this.elementSize.width,i=t.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(e=this.elementSize.height,i=t.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),(n=i/e)>1&&(n=1),n<0&&(n=0),"vertical"===this.orientation&&(n=1-n),o=this._valueMax()-this._valueMin(),r=this._valueMin()+n*o,this._trimAlignValue(r)},_uiHash:function(t,e,i){var n={handle:this.handles[t],handleIndex:t,value:void 0!==e?e:this.value()};return this._hasMultipleValues()&&(n.value=void 0!==e?e:this.values(t),n.values=i||this.values()),n},_hasMultipleValues:function(){return this.options.values&&this.options.values.length},_start:function(t,e){return this._trigger("start",t,this._uiHash(e))},_slide:function(t,e,i){var n,o=this.value(),r=this.values();this._hasMultipleValues()&&(n=this.values(e?0:1),o=this.values(e),2===this.options.values.length&&!0===this.options.range&&(i=0===e?Math.min(n,i):Math.max(n,i)),r[e]=i),i!==o&&!1!==this._trigger("slide",t,this._uiHash(e,i,r))&&(this._hasMultipleValues()?this.values(e,i):this.value(i))},_stop:function(t,e){this._trigger("stop",t,this._uiHash(e))},_change:function(t,e){this._keySliding||this._mouseSliding||(this._lastChangedValue=e,this._trigger("change",t,this._uiHash(e)))},value:function(t){return arguments.length?(this.options.value=this._trimAlignValue(t),this._refreshValue(),void this._change(null,0)):this._value()},values:function(t,e){var i,n,o;if(arguments.length>1)return this.options.values[t]=this._trimAlignValue(e),this._refreshValue(),void this._change(null,t);if(!arguments.length)return this._values();if(!Array.isArray(arguments[0]))return this._hasMultipleValues()?this._values(t):this.value();for(i=this.options.values,n=arguments[0],o=0;o<i.length;o+=1)i[o]=this._trimAlignValue(n[o]),this._change(null,o);this._refreshValue()},_setOption:function(t,e){var i,n=0;switch("range"===t&&!0===this.options.range&&("min"===e?(this.options.value=this._values(0),this.options.values=null):"max"===e&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),Array.isArray(this.options.values)&&(n=this.options.values.length),this._super(t,e),t){case"orientation":this._detectOrientation(),this._removeClass("ui-slider-horizontal ui-slider-vertical")._addClass("ui-slider-"+this.orientation),this._refreshValue(),this.options.range&&this._refreshRange(e),this.handles.css("horizontal"===e?"bottom":"left","");break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),i=n-1;i>=0;i--)this._change(null,i);this._animateOff=!1;break;case"step":case"min":case"max":this._animateOff=!0,this._calculateNewMax(),this._refreshValue(),this._animateOff=!1;break;case"range":this._animateOff=!0,this._refresh(),this._animateOff=!1}},_setOptionDisabled:function(t){this._super(t),this._toggleClass(null,"ui-state-disabled",!!t)},_value:function(){var t=this.options.value;return t=this._trimAlignValue(t)},_values:function(t){var e,i,n;if(arguments.length)return e=this.options.values[t],e=this._trimAlignValue(e);if(this._hasMultipleValues()){for(i=this.options.values.slice(),n=0;n<i.length;n+=1)i[n]=this._trimAlignValue(i[n]);return i}return[]},_trimAlignValue:function(t){if(t<=this._valueMin())return this._valueMin();if(t>=this._valueMax())return this._valueMax();var e=this.options.step>0?this.options.step:1,i=(t-this._valueMin())%e,n=t-i;return 2*Math.abs(i)>=e&&(n+=i>0?e:-e),parseFloat(n.toFixed(5))},_calculateNewMax:function(){var t=this.options.max,e=this._valueMin(),i=this.options.step;(t=Math.round((t-e)/i)*i+e)>this.options.max&&(t-=i),this.max=parseFloat(t.toFixed(this._precision()))},_precision:function(){var t=this._precisionOf(this.options.step);return null!==this.options.min&&(t=Math.max(t,this._precisionOf(this.options.min))),t},_precisionOf:function(t){var e=t.toString(),i=e.indexOf(".");return-1===i?0:e.length-i-1},_valueMin:function(){return this.options.min},_valueMax:function(){return this.max},_refreshRange:function(t){"vertical"===t&&this.range.css({width:"",left:""}),"horizontal"===t&&this.range.css({height:"",bottom:""})},_refreshValue:function(){var e,i,n,o,r,s=this.options.range,a=this.options,l=this,c=!this._animateOff&&a.animate,h={};this._hasMultipleValues()?this.handles.each((function(n){i=(l.values(n)-l._valueMin())/(l._valueMax()-l._valueMin())*100,h["horizontal"===l.orientation?"left":"bottom"]=i+"%",t(this).stop(1,1)[c?"animate":"css"](h,a.animate),!0===l.options.range&&("horizontal"===l.orientation?(0===n&&l.range.stop(1,1)[c?"animate":"css"]({left:i+"%"},a.animate),1===n&&l.range[c?"animate":"css"]({width:i-e+"%"},{queue:!1,duration:a.animate})):(0===n&&l.range.stop(1,1)[c?"animate":"css"]({bottom:i+"%"},a.animate),1===n&&l.range[c?"animate":"css"]({height:i-e+"%"},{queue:!1,duration:a.animate}))),e=i})):(n=this.value(),o=this._valueMin(),r=this._valueMax(),i=r!==o?(n-o)/(r-o)*100:0,h["horizontal"===this.orientation?"left":"bottom"]=i+"%",this.handle.stop(1,1)[c?"animate":"css"](h,a.animate),"min"===s&&"horizontal"===this.orientation&&this.range.stop(1,1)[c?"animate":"css"]({width:i+"%"},a.animate),"max"===s&&"horizontal"===this.orientation&&this.range.stop(1,1)[c?"animate":"css"]({width:100-i+"%"},a.animate),"min"===s&&"vertical"===this.orientation&&this.range.stop(1,1)[c?"animate":"css"]({height:i+"%"},a.animate),"max"===s&&"vertical"===this.orientation&&this.range.stop(1,1)[c?"animate":"css"]({height:100-i+"%"},a.animate))},_handleEvents:{keydown:function(e){var i,n,o,r=t(e.target).data("ui-slider-handle-index");switch(e.keyCode){case t.ui.keyCode.HOME:case t.ui.keyCode.END:case t.ui.keyCode.PAGE_UP:case t.ui.keyCode.PAGE_DOWN:case t.ui.keyCode.UP:case t.ui.keyCode.RIGHT:case t.ui.keyCode.DOWN:case t.ui.keyCode.LEFT:if(e.preventDefault(),!this._keySliding&&(this._keySliding=!0,this._addClass(t(e.target),null,"ui-state-active"),!1===this._start(e,r)))return}switch(o=this.options.step,i=n=this._hasMultipleValues()?this.values(r):this.value(),e.keyCode){case t.ui.keyCode.HOME:n=this._valueMin();break;case t.ui.keyCode.END:n=this._valueMax();break;case t.ui.keyCode.PAGE_UP:n=this._trimAlignValue(i+(this._valueMax()-this._valueMin())/this.numPages);break;case t.ui.keyCode.PAGE_DOWN:n=this._trimAlignValue(i-(this._valueMax()-this._valueMin())/this.numPages);break;case t.ui.keyCode.UP:case t.ui.keyCode.RIGHT:if(i===this._valueMax())return;n=this._trimAlignValue(i+o);break;case t.ui.keyCode.DOWN:case t.ui.keyCode.LEFT:if(i===this._valueMin())return;n=this._trimAlignValue(i-o)}this._slide(e,r,n)},keyup:function(e){var i=t(e.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(e,i),this._change(e,i),this._removeClass(t(e.target),null,"ui-state-active"))}}}),t.widget("ui.sortable",t.ui.mouse,{version:"1.13.1",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_isOverAxis:function(t,e,i){return t>=e&&t<e+i},_isFloating:function(t){return/left|right/.test(t.css("float"))||/inline|table-cell/.test(t.css("display"))},_create:function(){this.containerCache={},this._addClass("ui-sortable"),this.refresh(),this.offset=this.element.offset(),this._mouseInit(),this._setHandleClassName(),this.ready=!0},_setOption:function(t,e){this._super(t,e),"handle"===t&&this._setHandleClassName()},_setHandleClassName:function(){var e=this;this._removeClass(this.element.find(".ui-sortable-handle"),"ui-sortable-handle"),t.each(this.items,(function(){e._addClass(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item,"ui-sortable-handle")}))},_destroy:function(){this._mouseDestroy();for(var t=this.items.length-1;t>=0;t--)this.items[t].item.removeData(this.widgetName+"-item");return this},_mouseCapture:function(e,i){var n=null,o=!1,r=this;return!this.reverting&&(!this.options.disabled&&"static"!==this.options.type&&(this._refreshItems(e),t(e.target).parents().each((function(){if(t.data(this,r.widgetName+"-item")===r)return n=t(this),!1})),t.data(e.target,r.widgetName+"-item")===r&&(n=t(e.target)),!!n&&(!(this.options.handle&&!i&&(t(this.options.handle,n).find("*").addBack().each((function(){this===e.target&&(o=!0)})),!o))&&(this.currentItem=n,this._removeCurrentsFromItems(),!0))))},_mouseStart:function(e,i,n){var o,r,s=this.options;if(this.currentContainer=this,this.refreshPositions(),this.appendTo=t("parent"!==s.appendTo?s.appendTo:this.currentItem.parent()),this.helper=this._createHelper(e),this._cacheHelperProportions(),this._cacheMargins(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},t.extend(this.offset,{click:{left:e.pageX-this.offset.left,top:e.pageY-this.offset.top},relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),s.cursorAt&&this._adjustOffsetFromHelper(s.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),this.scrollParent=this.placeholder.scrollParent(),t.extend(this.offset,{parent:this._getParentOffset()}),s.containment&&this._setContainment(),s.cursor&&"auto"!==s.cursor&&(r=this.document.find("body"),this.storedCursor=r.css("cursor"),r.css("cursor",s.cursor),this.storedStylesheet=t("<style>*{ cursor: "+s.cursor+" !important; }</style>").appendTo(r)),s.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",s.zIndex)),s.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",s.opacity)),this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",e,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!n)for(o=this.containers.length-1;o>=0;o--)this.containers[o]._trigger("activate",e,this._uiHash(this));return t.ui.ddmanager&&(t.ui.ddmanager.current=this),t.ui.ddmanager&&!s.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e),this.dragging=!0,this._addClass(this.helper,"ui-sortable-helper"),this.helper.parent().is(this.appendTo)||(this.helper.detach().appendTo(this.appendTo),this.offset.parent=this._getParentOffset()),this.position=this.originalPosition=this._generatePosition(e),this.originalPageX=e.pageX,this.originalPageY=e.pageY,this.lastPositionAbs=this.positionAbs=this._convertPositionTo("absolute"),this._mouseDrag(e),!0},_scroll:function(t){var e=this.options,i=!1;return this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<e.scrollSensitivity?this.scrollParent[0].scrollTop=i=this.scrollParent[0].scrollTop+e.scrollSpeed:t.pageY-this.overflowOffset.top<e.scrollSensitivity&&(this.scrollParent[0].scrollTop=i=this.scrollParent[0].scrollTop-e.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<e.scrollSensitivity?this.scrollParent[0].scrollLeft=i=this.scrollParent[0].scrollLeft+e.scrollSpeed:t.pageX-this.overflowOffset.left<e.scrollSensitivity&&(this.scrollParent[0].scrollLeft=i=this.scrollParent[0].scrollLeft-e.scrollSpeed)):(t.pageY-this.document.scrollTop()<e.scrollSensitivity?i=this.document.scrollTop(this.document.scrollTop()-e.scrollSpeed):this.window.height()-(t.pageY-this.document.scrollTop())<e.scrollSensitivity&&(i=this.document.scrollTop(this.document.scrollTop()+e.scrollSpeed)),t.pageX-this.document.scrollLeft()<e.scrollSensitivity?i=this.document.scrollLeft(this.document.scrollLeft()-e.scrollSpeed):this.window.width()-(t.pageX-this.document.scrollLeft())<e.scrollSensitivity&&(i=this.document.scrollLeft(this.document.scrollLeft()+e.scrollSpeed))),i},_mouseDrag:function(e){var i,n,o,r,s=this.options;for(this.position=this._generatePosition(e),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),s.scroll&&!1!==this._scroll(e)&&(this._refreshItemPositions(!0),t.ui.ddmanager&&!s.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e)),this.dragDirection={vertical:this._getDragVerticalDirection(),horizontal:this._getDragHorizontalDirection()},i=this.items.length-1;i>=0;i--)if(o=(n=this.items[i]).item[0],(r=this._intersectsWithPointer(n))&&n.instance===this.currentContainer&&!(o===this.currentItem[0]||this.placeholder[1===r?"next":"prev"]()[0]===o||t.contains(this.placeholder[0],o)||"semi-dynamic"===this.options.type&&t.contains(this.element[0],o))){if(this.direction=1===r?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(n))break;this._rearrange(e,n),this._trigger("change",e,this._uiHash());break}return this._contactContainers(e),t.ui.ddmanager&&t.ui.ddmanager.drag(this,e),this._trigger("sort",e,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(e,i){if(e){if(t.ui.ddmanager&&!this.options.dropBehaviour&&t.ui.ddmanager.drop(this,e),this.options.revert){var n=this,o=this.placeholder.offset(),r=this.options.axis,s={};r&&"x"!==r||(s.left=o.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollLeft)),r&&"y"!==r||(s.top=o.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,t(this.helper).animate(s,parseInt(this.options.revert,10)||500,(function(){n._clear(e)}))}else this._clear(e,i);return!1}},cancel:function(){if(this.dragging){this._mouseUp(new t.Event("mouseup",{target:null})),"original"===this.options.helper?(this.currentItem.css(this._storedCSS),this._removeClass(this.currentItem,"ui-sortable-helper")):this.currentItem.show();for(var e=this.containers.length-1;e>=0;e--)this.containers[e]._trigger("deactivate",null,this._uiHash(this)),this.containers[e].containerCache.over&&(this.containers[e]._trigger("out",null,this._uiHash(this)),this.containers[e].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),t.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?t(this.domPosition.prev).after(this.currentItem):t(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(e){var i=this._getItemsAsjQuery(e&&e.connected),n=[];return e=e||{},t(i).each((function(){var i=(t(e.item||this).attr(e.attribute||"id")||"").match(e.expression||/(.+)[\-=_](.+)/);i&&n.push((e.key||i[1]+"[]")+"="+(e.key&&e.expression?i[1]:i[2]))})),!n.length&&e.key&&n.push(e.key+"="),n.join("&")},toArray:function(e){var i=this._getItemsAsjQuery(e&&e.connected),n=[];return e=e||{},i.each((function(){n.push(t(e.item||this).attr(e.attribute||"id")||"")})),n},_intersectsWith:function(t){var e=this.positionAbs.left,i=e+this.helperProportions.width,n=this.positionAbs.top,o=n+this.helperProportions.height,r=t.left,s=r+t.width,a=t.top,l=a+t.height,c=this.offset.click.top,h=this.offset.click.left,u="x"===this.options.axis||n+c>a&&n+c<l,d="y"===this.options.axis||e+h>r&&e+h<s,p=u&&d;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>t[this.floating?"width":"height"]?p:r<e+this.helperProportions.width/2&&i-this.helperProportions.width/2<s&&a<n+this.helperProportions.height/2&&o-this.helperProportions.height/2<l},_intersectsWithPointer:function(t){var e,i,n="x"===this.options.axis||this._isOverAxis(this.positionAbs.top+this.offset.click.top,t.top,t.height),o="y"===this.options.axis||this._isOverAxis(this.positionAbs.left+this.offset.click.left,t.left,t.width);return!(!n||!o)&&(e=this.dragDirection.vertical,i=this.dragDirection.horizontal,this.floating?"right"===i||"down"===e?2:1:e&&("down"===e?2:1))},_intersectsWithSides:function(t){var e=this._isOverAxis(this.positionAbs.top+this.offset.click.top,t.top+t.height/2,t.height),i=this._isOverAxis(this.positionAbs.left+this.offset.click.left,t.left+t.width/2,t.width),n=this.dragDirection.vertical,o=this.dragDirection.horizontal;return this.floating&&o?"right"===o&&i||"left"===o&&!i:n&&("down"===n&&e||"up"===n&&!e)},_getDragVerticalDirection:function(){var t=this.positionAbs.top-this.lastPositionAbs.top;return 0!==t&&(t>0?"down":"up")},_getDragHorizontalDirection:function(){var t=this.positionAbs.left-this.lastPositionAbs.left;return 0!==t&&(t>0?"right":"left")},refresh:function(t){return this._refreshItems(t),this._setHandleClassName(),this.refreshPositions(),this},_connectWith:function(){var t=this.options;return t.connectWith.constructor===String?[t.connectWith]:t.connectWith},_getItemsAsjQuery:function(e){var i,n,o,r,s=[],a=[],l=this._connectWith();if(l&&e)for(i=l.length-1;i>=0;i--)for(n=(o=t(l[i],this.document[0])).length-1;n>=0;n--)(r=t.data(o[n],this.widgetFullName))&&r!==this&&!r.options.disabled&&a.push(["function"==typeof r.options.items?r.options.items.call(r.element):t(r.options.items,r.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),r]);function c(){s.push(this)}for(a.push(["function"==typeof this.options.items?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):t(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),i=a.length-1;i>=0;i--)a[i][0].each(c);return t(s)},_removeCurrentsFromItems:function(){var e=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=t.grep(this.items,(function(t){for(var i=0;i<e.length;i++)if(e[i]===t.item[0])return!1;return!0}))},_refreshItems:function(e){this.items=[],this.containers=[this];var i,n,o,r,s,a,l,c,h=this.items,u=[["function"==typeof this.options.items?this.options.items.call(this.element[0],e,{item:this.currentItem}):t(this.options.items,this.element),this]],d=this._connectWith();if(d&&this.ready)for(i=d.length-1;i>=0;i--)for(n=(o=t(d[i],this.document[0])).length-1;n>=0;n--)(r=t.data(o[n],this.widgetFullName))&&r!==this&&!r.options.disabled&&(u.push(["function"==typeof r.options.items?r.options.items.call(r.element[0],e,{item:this.currentItem}):t(r.options.items,r.element),r]),this.containers.push(r));for(i=u.length-1;i>=0;i--)for(s=u[i][1],n=0,c=(a=u[i][0]).length;n<c;n++)(l=t(a[n])).data(this.widgetName+"-item",s),h.push({item:l,instance:s,width:0,height:0,left:0,top:0})},_refreshItemPositions:function(e){var i,n,o,r;for(i=this.items.length-1;i>=0;i--)n=this.items[i],this.currentContainer&&n.instance!==this.currentContainer&&n.item[0]!==this.currentItem[0]||(o=this.options.toleranceElement?t(this.options.toleranceElement,n.item):n.item,e||(n.width=o.outerWidth(),n.height=o.outerHeight()),r=o.offset(),n.left=r.left,n.top=r.top)},refreshPositions:function(t){var e,i;if(this.floating=!!this.items.length&&("x"===this.options.axis||this._isFloating(this.items[0].item)),this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset()),this._refreshItemPositions(t),this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(e=this.containers.length-1;e>=0;e--)i=this.containers[e].element.offset(),this.containers[e].containerCache.left=i.left,this.containers[e].containerCache.top=i.top,this.containers[e].containerCache.width=this.containers[e].element.outerWidth(),this.containers[e].containerCache.height=this.containers[e].element.outerHeight();return this},_createPlaceholder:function(e){var i,n,o=(e=e||this).options;o.placeholder&&o.placeholder.constructor!==String||(i=o.placeholder,n=e.currentItem[0].nodeName.toLowerCase(),o.placeholder={element:function(){var o=t("<"+n+">",e.document[0]);return e._addClass(o,"ui-sortable-placeholder",i||e.currentItem[0].className)._removeClass(o,"ui-sortable-helper"),"tbody"===n?e._createTrPlaceholder(e.currentItem.find("tr").eq(0),t("<tr>",e.document[0]).appendTo(o)):"tr"===n?e._createTrPlaceholder(e.currentItem,o):"img"===n&&o.attr("src",e.currentItem.attr("src")),i||o.css("visibility","hidden"),o},update:function(t,r){i&&!o.forcePlaceholderSize||(r.height()&&(!o.forcePlaceholderSize||"tbody"!==n&&"tr"!==n)||r.height(e.currentItem.innerHeight()-parseInt(e.currentItem.css("paddingTop")||0,10)-parseInt(e.currentItem.css("paddingBottom")||0,10)),r.width()||r.width(e.currentItem.innerWidth()-parseInt(e.currentItem.css("paddingLeft")||0,10)-parseInt(e.currentItem.css("paddingRight")||0,10)))}}),e.placeholder=t(o.placeholder.element.call(e.element,e.currentItem)),e.currentItem.after(e.placeholder),o.placeholder.update(e,e.placeholder)},_createTrPlaceholder:function(e,i){var n=this;e.children().each((function(){t("<td>&#160;</td>",n.document[0]).attr("colspan",t(this).attr("colspan")||1).appendTo(i)}))},_contactContainers:function(e){var i,n,o,r,s,a,l,c,h,u,d=null,p=null;for(i=this.containers.length-1;i>=0;i--)if(!t.contains(this.currentItem[0],this.containers[i].element[0]))if(this._intersectsWith(this.containers[i].containerCache)){if(d&&t.contains(this.containers[i].element[0],d.element[0]))continue;d=this.containers[i],p=i}else this.containers[i].containerCache.over&&(this.containers[i]._trigger("out",e,this._uiHash(this)),this.containers[i].containerCache.over=0);if(d)if(1===this.containers.length)this.containers[p].containerCache.over||(this.containers[p]._trigger("over",e,this._uiHash(this)),this.containers[p].containerCache.over=1);else{for(o=1e4,r=null,s=(h=d.floating||this._isFloating(this.currentItem))?"left":"top",a=h?"width":"height",u=h?"pageX":"pageY",n=this.items.length-1;n>=0;n--)t.contains(this.containers[p].element[0],this.items[n].item[0])&&this.items[n].item[0]!==this.currentItem[0]&&(l=this.items[n].item.offset()[s],c=!1,e[u]-l>this.items[n][a]/2&&(c=!0),Math.abs(e[u]-l)<o&&(o=Math.abs(e[u]-l),r=this.items[n],this.direction=c?"up":"down"));if(!r&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[p])return void(this.currentContainer.containerCache.over||(this.containers[p]._trigger("over",e,this._uiHash()),this.currentContainer.containerCache.over=1));r?this._rearrange(e,r,null,!0):this._rearrange(e,null,this.containers[p].element,!0),this._trigger("change",e,this._uiHash()),this.containers[p]._trigger("change",e,this._uiHash(this)),this.currentContainer=this.containers[p],this.options.placeholder.update(this.currentContainer,this.placeholder),this.scrollParent=this.placeholder.scrollParent(),this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this.containers[p]._trigger("over",e,this._uiHash(this)),this.containers[p].containerCache.over=1}},_createHelper:function(e){var i=this.options,n="function"==typeof i.helper?t(i.helper.apply(this.element[0],[e,this.currentItem])):"clone"===i.helper?this.currentItem.clone():this.currentItem;return n.parents("body").length||this.appendTo[0].appendChild(n[0]),n[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),n[0].style.width&&!i.forceHelperSize||n.width(this.currentItem.width()),n[0].style.height&&!i.forceHelperSize||n.height(this.currentItem.height()),n},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),Array.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var e=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==this.document[0]&&t.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===this.document[0].body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&t.ui.ie)&&(e={top:0,left:0}),{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var t=this.currentItem.position();return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:t.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e,i,n,o=this.options;"parent"===o.containment&&(o.containment=this.helper[0].parentNode),"document"!==o.containment&&"window"!==o.containment||(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,"document"===o.containment?this.document.width():this.window.width()-this.helperProportions.width-this.margins.left,("document"===o.containment?this.document.height()||document.body.parentNode.scrollHeight:this.window.height()||this.document[0].body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(o.containment)||(e=t(o.containment)[0],i=t(o.containment).offset(),n="hidden"!==t(e).css("overflow"),this.containment=[i.left+(parseInt(t(e).css("borderLeftWidth"),10)||0)+(parseInt(t(e).css("paddingLeft"),10)||0)-this.margins.left,i.top+(parseInt(t(e).css("borderTopWidth"),10)||0)+(parseInt(t(e).css("paddingTop"),10)||0)-this.margins.top,i.left+(n?Math.max(e.scrollWidth,e.offsetWidth):e.offsetWidth)-(parseInt(t(e).css("borderLeftWidth"),10)||0)-(parseInt(t(e).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,i.top+(n?Math.max(e.scrollHeight,e.offsetHeight):e.offsetHeight)-(parseInt(t(e).css("borderTopWidth"),10)||0)-(parseInt(t(e).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(e,i){i||(i=this.position);var n="absolute"===e?1:-1,o="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,r=/(html|body)/i.test(o[0].tagName);return{top:i.top+this.offset.relative.top*n+this.offset.parent.top*n-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():r?0:o.scrollTop())*n,left:i.left+this.offset.relative.left*n+this.offset.parent.left*n-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():r?0:o.scrollLeft())*n}},_generatePosition:function(e){var i,n,o=this.options,r=e.pageX,s=e.pageY,a="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,l=/(html|body)/i.test(a[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(e.pageX-this.offset.click.left<this.containment[0]&&(r=this.containment[0]+this.offset.click.left),e.pageY-this.offset.click.top<this.containment[1]&&(s=this.containment[1]+this.offset.click.top),e.pageX-this.offset.click.left>this.containment[2]&&(r=this.containment[2]+this.offset.click.left),e.pageY-this.offset.click.top>this.containment[3]&&(s=this.containment[3]+this.offset.click.top)),o.grid&&(i=this.originalPageY+Math.round((s-this.originalPageY)/o.grid[1])*o.grid[1],s=this.containment?i-this.offset.click.top>=this.containment[1]&&i-this.offset.click.top<=this.containment[3]?i:i-this.offset.click.top>=this.containment[1]?i-o.grid[1]:i+o.grid[1]:i,n=this.originalPageX+Math.round((r-this.originalPageX)/o.grid[0])*o.grid[0],r=this.containment?n-this.offset.click.left>=this.containment[0]&&n-this.offset.click.left<=this.containment[2]?n:n-this.offset.click.left>=this.containment[0]?n-o.grid[0]:n+o.grid[0]:n)),{top:s-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():l?0:a.scrollTop()),left:r-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():l?0:a.scrollLeft())}},_rearrange:function(t,e,i,n){i?i[0].appendChild(this.placeholder[0]):e.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?e.item[0]:e.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var o=this.counter;this._delay((function(){o===this.counter&&this.refreshPositions(!n)}))},_clear:function(t,e){this.reverting=!1;var i,n=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(i in this._storedCSS)"auto"!==this._storedCSS[i]&&"static"!==this._storedCSS[i]||(this._storedCSS[i]="");this.currentItem.css(this._storedCSS),this._removeClass(this.currentItem,"ui-sortable-helper")}else this.currentItem.show();function o(t,e,i){return function(n){i._trigger(t,n,e._uiHash(e))}}for(this.fromOutside&&!e&&n.push((function(t){this._trigger("receive",t,this._uiHash(this.fromOutside))})),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||e||n.push((function(t){this._trigger("update",t,this._uiHash())})),this!==this.currentContainer&&(e||(n.push((function(t){this._trigger("remove",t,this._uiHash())})),n.push(function(t){return function(e){t._trigger("receive",e,this._uiHash(this))}}.call(this,this.currentContainer)),n.push(function(t){return function(e){t._trigger("update",e,this._uiHash(this))}}.call(this,this.currentContainer)))),i=this.containers.length-1;i>=0;i--)e||n.push(o("deactivate",this,this.containers[i])),this.containers[i].containerCache.over&&(n.push(o("out",this,this.containers[i])),this.containers[i].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,e||this._trigger("beforeStop",t,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.cancelHelperRemoval||(this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null),!e){for(i=0;i<n.length;i++)n[i].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!this.cancelHelperRemoval},_trigger:function(){!1===t.Widget.prototype._trigger.apply(this,arguments)&&this.cancel()},_uiHash:function(e){var i=e||this;return{helper:i.helper,placeholder:i.placeholder||t([]),position:i.position,originalPosition:i.originalPosition,offset:i.positionAbs,item:i.currentItem,sender:e?e.element:null}}});
/*!
 * jQuery UI Progressbar 1.13.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
/*!
 * jQuery UI Spinner 1.13.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
function O(t){return function(){var e=this.element.val();t.apply(this,arguments),this._refresh(),e!==this.element.val()&&this._trigger("change")}}t.widget("ui.spinner",{version:"1.13.1",defaultElement:"<input>",widgetEventPrefix:"spin",options:{classes:{"ui-spinner":"ui-corner-all","ui-spinner-down":"ui-corner-br","ui-spinner-up":"ui-corner-tr"},culture:null,icons:{down:"ui-icon-triangle-1-s",up:"ui-icon-triangle-1-n"},incremental:!0,max:null,min:null,numberFormat:null,page:10,step:1,change:null,spin:null,start:null,stop:null},_create:function(){this._setOption("max",this.options.max),this._setOption("min",this.options.min),this._setOption("step",this.options.step),""!==this.value()&&this._value(this.element.val(),!0),this._draw(),this._on(this._events),this._refresh(),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_getCreateOptions:function(){var e=this._super(),i=this.element;return t.each(["min","max","step"],(function(t,n){var o=i.attr(n);null!=o&&o.length&&(e[n]=o)})),e},_events:{keydown:function(t){this._start(t)&&this._keydown(t)&&t.preventDefault()},keyup:"_stop",focus:function(){this.previous=this.element.val()},blur:function(t){this.cancelBlur?delete this.cancelBlur:(this._stop(),this._refresh(),this.previous!==this.element.val()&&this._trigger("change",t))},mousewheel:function(e,i){var n=t.ui.safeActiveElement(this.document[0]);if(this.element[0]===n&&i){if(!this.spinning&&!this._start(e))return!1;this._spin((i>0?1:-1)*this.options.step,e),clearTimeout(this.mousewheelTimer),this.mousewheelTimer=this._delay((function(){this.spinning&&this._stop(e)}),100),e.preventDefault()}},"mousedown .ui-spinner-button":function(e){var i;function n(){this.element[0]===t.ui.safeActiveElement(this.document[0])||(this.element.trigger("focus"),this.previous=i,this._delay((function(){this.previous=i})))}i=this.element[0]===t.ui.safeActiveElement(this.document[0])?this.previous:this.element.val(),e.preventDefault(),n.call(this),this.cancelBlur=!0,this._delay((function(){delete this.cancelBlur,n.call(this)})),!1!==this._start(e)&&this._repeat(null,t(e.currentTarget).hasClass("ui-spinner-up")?1:-1,e)},"mouseup .ui-spinner-button":"_stop","mouseenter .ui-spinner-button":function(e){if(t(e.currentTarget).hasClass("ui-state-active"))return!1!==this._start(e)&&void this._repeat(null,t(e.currentTarget).hasClass("ui-spinner-up")?1:-1,e)},"mouseleave .ui-spinner-button":"_stop"},_enhance:function(){this.uiSpinner=this.element.attr("autocomplete","off").wrap("<span>").parent().append("<a></a><a></a>")},_draw:function(){this._enhance(),this._addClass(this.uiSpinner,"ui-spinner","ui-widget ui-widget-content"),this._addClass("ui-spinner-input"),this.element.attr("role","spinbutton"),this.buttons=this.uiSpinner.children("a").attr("tabIndex",-1).attr("aria-hidden",!0).button({classes:{"ui-button":""}}),this._removeClass(this.buttons,"ui-corner-all"),this._addClass(this.buttons.first(),"ui-spinner-button ui-spinner-up"),this._addClass(this.buttons.last(),"ui-spinner-button ui-spinner-down"),this.buttons.first().button({icon:this.options.icons.up,showLabel:!1}),this.buttons.last().button({icon:this.options.icons.down,showLabel:!1}),this.buttons.height()>Math.ceil(.5*this.uiSpinner.height())&&this.uiSpinner.height()>0&&this.uiSpinner.height(this.uiSpinner.height())},_keydown:function(e){var i=this.options,n=t.ui.keyCode;switch(e.keyCode){case n.UP:return this._repeat(null,1,e),!0;case n.DOWN:return this._repeat(null,-1,e),!0;case n.PAGE_UP:return this._repeat(null,i.page,e),!0;case n.PAGE_DOWN:return this._repeat(null,-i.page,e),!0}return!1},_start:function(t){return!(!this.spinning&&!1===this._trigger("start",t))&&(this.counter||(this.counter=1),this.spinning=!0,!0)},_repeat:function(t,e,i){t=t||500,clearTimeout(this.timer),this.timer=this._delay((function(){this._repeat(40,e,i)}),t),this._spin(e*this.options.step,i)},_spin:function(t,e){var i=this.value()||0;this.counter||(this.counter=1),i=this._adjustValue(i+t*this._increment(this.counter)),this.spinning&&!1===this._trigger("spin",e,{value:i})||(this._value(i),this.counter++)},_increment:function(t){var e=this.options.incremental;return e?"function"==typeof e?e(t):Math.floor(t*t*t/5e4-t*t/500+17*t/200+1):1},_precision:function(){var t=this._precisionOf(this.options.step);return null!==this.options.min&&(t=Math.max(t,this._precisionOf(this.options.min))),t},_precisionOf:function(t){var e=t.toString(),i=e.indexOf(".");return-1===i?0:e.length-i-1},_adjustValue:function(t){var e,i,n=this.options;return i=t-(e=null!==n.min?n.min:0),t=e+(i=Math.round(i/n.step)*n.step),t=parseFloat(t.toFixed(this._precision())),null!==n.max&&t>n.max?n.max:null!==n.min&&t<n.min?n.min:t},_stop:function(t){this.spinning&&(clearTimeout(this.timer),clearTimeout(this.mousewheelTimer),this.counter=0,this.spinning=!1,this._trigger("stop",t))},_setOption:function(t,e){var i,n,o;if("culture"===t||"numberFormat"===t)return i=this._parse(this.element.val()),this.options[t]=e,void this.element.val(this._format(i));"max"!==t&&"min"!==t&&"step"!==t||"string"==typeof e&&(e=this._parse(e)),"icons"===t&&(n=this.buttons.first().find(".ui-icon"),this._removeClass(n,null,this.options.icons.up),this._addClass(n,null,e.up),o=this.buttons.last().find(".ui-icon"),this._removeClass(o,null,this.options.icons.down),this._addClass(o,null,e.down)),this._super(t,e)},_setOptionDisabled:function(t){this._super(t),this._toggleClass(this.uiSpinner,null,"ui-state-disabled",!!t),this.element.prop("disabled",!!t),this.buttons.button(t?"disable":"enable")},_setOptions:O((function(t){this._super(t)})),_parse:function(t){return"string"==typeof t&&""!==t&&(t=window.Globalize&&this.options.numberFormat?Globalize.parseFloat(t,10,this.options.culture):+t),""===t||isNaN(t)?null:t},_format:function(t){return""===t?"":window.Globalize&&this.options.numberFormat?Globalize.format(t,this.options.numberFormat,this.options.culture):t},_refresh:function(){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuenow":this._parse(this.element.val())})},isValid:function(){var t=this.value();return null!==t&&t===this._adjustValue(t)},_value:function(t,e){var i;""!==t&&null!==(i=this._parse(t))&&(e||(i=this._adjustValue(i)),t=this._format(i)),this.element.val(t),this._refresh()},_destroy:function(){this.element.prop("disabled",!1).removeAttr("autocomplete role aria-valuemin aria-valuemax aria-valuenow"),this.uiSpinner.replaceWith(this.element)},stepUp:O((function(t){this._stepUp(t)})),_stepUp:function(t){this._start()&&(this._spin((t||1)*this.options.step),this._stop())},stepDown:O((function(t){this._stepDown(t)})),_stepDown:function(t){this._start()&&(this._spin((t||1)*-this.options.step),this._stop())},pageUp:O((function(t){this._stepUp((t||1)*this.options.page)})),pageDown:O((function(t){this._stepDown((t||1)*this.options.page)})),value:function(t){if(!arguments.length)return this._parse(this.element.val());O(this._value).call(this,t)},widget:function(){return this.uiSpinner}}),!1!==t.uiBackCompat&&t.widget("ui.spinner",t.ui.spinner,{_enhance:function(){this.uiSpinner=this.element.attr("autocomplete","off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml())},_uiSpinnerHtml:function(){return"<span>"},_buttonHtml:function(){return"<a></a><a></a>"}});var z;
/*!
 * jQuery UI Tabs 1.13.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */t.ui.spinner;t.widget("ui.tabs",{version:"1.13.1",delay:300,options:{active:null,classes:{"ui-tabs":"ui-corner-all","ui-tabs-nav":"ui-corner-all","ui-tabs-panel":"ui-corner-bottom","ui-tabs-tab":"ui-corner-top"},collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_isLocal:(z=/#.*$/,function(t){var e,i;e=t.href.replace(z,""),i=location.href.replace(z,"");try{e=decodeURIComponent(e)}catch(t){}try{i=decodeURIComponent(i)}catch(t){}return t.hash.length>1&&e===i}),_create:function(){var e=this,i=this.options;this.running=!1,this._addClass("ui-tabs","ui-widget ui-widget-content"),this._toggleClass("ui-tabs-collapsible",null,i.collapsible),this._processTabs(),i.active=this._initialActive(),Array.isArray(i.disabled)&&(i.disabled=t.uniqueSort(i.disabled.concat(t.map(this.tabs.filter(".ui-state-disabled"),(function(t){return e.tabs.index(t)})))).sort()),!1!==this.options.active&&this.anchors.length?this.active=this._findActive(i.active):this.active=t(),this._refresh(),this.active.length&&this.load(i.active)},_initialActive:function(){var e=this.options.active,i=this.options.collapsible,n=location.hash.substring(1);return null===e&&(n&&this.tabs.each((function(i,o){if(t(o).attr("aria-controls")===n)return e=i,!1})),null===e&&(e=this.tabs.index(this.tabs.filter(".ui-tabs-active"))),null!==e&&-1!==e||(e=!!this.tabs.length&&0)),!1!==e&&-1===(e=this.tabs.index(this.tabs.eq(e)))&&(e=!i&&0),!i&&!1===e&&this.anchors.length&&(e=0),e},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):t()}},_tabKeydown:function(e){var i=t(t.ui.safeActiveElement(this.document[0])).closest("li"),n=this.tabs.index(i),o=!0;if(!this._handlePageNav(e)){switch(e.keyCode){case t.ui.keyCode.RIGHT:case t.ui.keyCode.DOWN:n++;break;case t.ui.keyCode.UP:case t.ui.keyCode.LEFT:o=!1,n--;break;case t.ui.keyCode.END:n=this.anchors.length-1;break;case t.ui.keyCode.HOME:n=0;break;case t.ui.keyCode.SPACE:return e.preventDefault(),clearTimeout(this.activating),void this._activate(n);case t.ui.keyCode.ENTER:return e.preventDefault(),clearTimeout(this.activating),void this._activate(n!==this.options.active&&n);default:return}e.preventDefault(),clearTimeout(this.activating),n=this._focusNextTab(n,o),e.ctrlKey||e.metaKey||(i.attr("aria-selected","false"),this.tabs.eq(n).attr("aria-selected","true"),this.activating=this._delay((function(){this.option("active",n)}),this.delay))}},_panelKeydown:function(e){this._handlePageNav(e)||e.ctrlKey&&e.keyCode===t.ui.keyCode.UP&&(e.preventDefault(),this.active.trigger("focus"))},_handlePageNav:function(e){return e.altKey&&e.keyCode===t.ui.keyCode.PAGE_UP?(this._activate(this._focusNextTab(this.options.active-1,!1)),!0):e.altKey&&e.keyCode===t.ui.keyCode.PAGE_DOWN?(this._activate(this._focusNextTab(this.options.active+1,!0)),!0):void 0},_findNextTab:function(e,i){var n=this.tabs.length-1;for(;-1!==t.inArray((e>n&&(e=0),e<0&&(e=n),e),this.options.disabled);)e=i?e+1:e-1;return e},_focusNextTab:function(t,e){return t=this._findNextTab(t,e),this.tabs.eq(t).trigger("focus"),t},_setOption:function(t,e){"active"!==t?(this._super(t,e),"collapsible"===t&&(this._toggleClass("ui-tabs-collapsible",null,e),e||!1!==this.options.active||this._activate(0)),"event"===t&&this._setupEvents(e),"heightStyle"===t&&this._setupHeightStyle(e)):this._activate(e)},_sanitizeSelector:function(t){return t?t.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var e=this.options,i=this.tablist.children(":has(a[href])");e.disabled=t.map(i.filter(".ui-state-disabled"),(function(t){return i.index(t)})),this._processTabs(),!1!==e.active&&this.anchors.length?this.active.length&&!t.contains(this.tablist[0],this.active[0])?this.tabs.length===e.disabled.length?(e.active=!1,this.active=t()):this._activate(this._findNextTab(Math.max(0,e.active-1),!1)):e.active=this.tabs.index(this.active):(e.active=!1,this.active=t()),this._refresh()},_refresh:function(){this._setOptionDisabled(this.options.disabled),this._setupEvents(this.options.event),this._setupHeightStyle(this.options.heightStyle),this.tabs.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}),this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-hidden":"true"}),this.active.length?(this.active.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}),this._addClass(this.active,"ui-tabs-active","ui-state-active"),this._getPanelForTab(this.active).show().attr({"aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var e=this,i=this.tabs,n=this.anchors,o=this.panels;this.tablist=this._getList().attr("role","tablist"),this._addClass(this.tablist,"ui-tabs-nav","ui-helper-reset ui-helper-clearfix ui-widget-header"),this.tablist.on("mousedown"+this.eventNamespace,"> li",(function(e){t(this).is(".ui-state-disabled")&&e.preventDefault()})).on("focus"+this.eventNamespace,".ui-tabs-anchor",(function(){t(this).closest("li").is(".ui-state-disabled")&&this.blur()})),this.tabs=this.tablist.find("> li:has(a[href])").attr({role:"tab",tabIndex:-1}),this._addClass(this.tabs,"ui-tabs-tab","ui-state-default"),this.anchors=this.tabs.map((function(){return t("a",this)[0]})).attr({tabIndex:-1}),this._addClass(this.anchors,"ui-tabs-anchor"),this.panels=t(),this.anchors.each((function(i,n){var o,r,s,a=t(n).uniqueId().attr("id"),l=t(n).closest("li"),c=l.attr("aria-controls");e._isLocal(n)?(s=(o=n.hash).substring(1),r=e.element.find(e._sanitizeSelector(o))):(o="#"+(s=l.attr("aria-controls")||t({}).uniqueId()[0].id),(r=e.element.find(o)).length||(r=e._createPanel(s)).insertAfter(e.panels[i-1]||e.tablist),r.attr("aria-live","polite")),r.length&&(e.panels=e.panels.add(r)),c&&l.data("ui-tabs-aria-controls",c),l.attr({"aria-controls":s,"aria-labelledby":a}),r.attr("aria-labelledby",a)})),this.panels.attr("role","tabpanel"),this._addClass(this.panels,"ui-tabs-panel","ui-widget-content"),i&&(this._off(i.not(this.tabs)),this._off(n.not(this.anchors)),this._off(o.not(this.panels)))},_getList:function(){return this.tablist||this.element.find("ol, ul").eq(0)},_createPanel:function(e){return t("<div>").attr("id",e).data("ui-tabs-destroy",!0)},_setOptionDisabled:function(e){var i,n,o;for(Array.isArray(e)&&(e.length?e.length===this.anchors.length&&(e=!0):e=!1),o=0;n=this.tabs[o];o++)i=t(n),!0===e||-1!==t.inArray(o,e)?(i.attr("aria-disabled","true"),this._addClass(i,null,"ui-state-disabled")):(i.removeAttr("aria-disabled"),this._removeClass(i,null,"ui-state-disabled"));this.options.disabled=e,this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!0===e)},_setupEvents:function(e){var i={};e&&t.each(e.split(" "),(function(t,e){i[e]="_eventHandler"})),this._off(this.anchors.add(this.tabs).add(this.panels)),this._on(!0,this.anchors,{click:function(t){t.preventDefault()}}),this._on(this.anchors,i),this._on(this.tabs,{keydown:"_tabKeydown"}),this._on(this.panels,{keydown:"_panelKeydown"}),this._focusable(this.tabs),this._hoverable(this.tabs)},_setupHeightStyle:function(e){var i,n=this.element.parent();"fill"===e?(i=n.height(),i-=this.element.outerHeight()-this.element.height(),this.element.siblings(":visible").each((function(){var e=t(this),n=e.css("position");"absolute"!==n&&"fixed"!==n&&(i-=e.outerHeight(!0))})),this.element.children().not(this.panels).each((function(){i-=t(this).outerHeight(!0)})),this.panels.each((function(){t(this).height(Math.max(0,i-t(this).innerHeight()+t(this).height()))})).css("overflow","auto")):"auto"===e&&(i=0,this.panels.each((function(){i=Math.max(i,t(this).height("").height())})).height(i))},_eventHandler:function(e){var i=this.options,n=this.active,o=t(e.currentTarget).closest("li"),r=o[0]===n[0],s=r&&i.collapsible,a=s?t():this._getPanelForTab(o),l=n.length?this._getPanelForTab(n):t(),c={oldTab:n,oldPanel:l,newTab:s?t():o,newPanel:a};e.preventDefault(),o.hasClass("ui-state-disabled")||o.hasClass("ui-tabs-loading")||this.running||r&&!i.collapsible||!1===this._trigger("beforeActivate",e,c)||(i.active=!s&&this.tabs.index(o),this.active=r?t():o,this.xhr&&this.xhr.abort(),l.length||a.length||t.error("jQuery UI Tabs: Mismatching fragment identifier."),a.length&&this.load(this.tabs.index(o),e),this._toggle(e,c))},_toggle:function(e,i){var n=this,o=i.newPanel,r=i.oldPanel;function s(){n.running=!1,n._trigger("activate",e,i)}function a(){n._addClass(i.newTab.closest("li"),"ui-tabs-active","ui-state-active"),o.length&&n.options.show?n._show(o,n.options.show,s):(o.show(),s())}this.running=!0,r.length&&this.options.hide?this._hide(r,this.options.hide,(function(){n._removeClass(i.oldTab.closest("li"),"ui-tabs-active","ui-state-active"),a()})):(this._removeClass(i.oldTab.closest("li"),"ui-tabs-active","ui-state-active"),r.hide(),a()),r.attr("aria-hidden","true"),i.oldTab.attr({"aria-selected":"false","aria-expanded":"false"}),o.length&&r.length?i.oldTab.attr("tabIndex",-1):o.length&&this.tabs.filter((function(){return 0===t(this).attr("tabIndex")})).attr("tabIndex",-1),o.attr("aria-hidden","false"),i.newTab.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0})},_activate:function(e){var i,n=this._findActive(e);n[0]!==this.active[0]&&(n.length||(n=this.active),i=n.find(".ui-tabs-anchor")[0],this._eventHandler({target:i,currentTarget:i,preventDefault:t.noop}))},_findActive:function(e){return!1===e?t():this.tabs.eq(e)},_getIndex:function(e){return"string"==typeof e&&(e=this.anchors.index(this.anchors.filter("[href$='"+t.escapeSelector(e)+"']"))),e},_destroy:function(){this.xhr&&this.xhr.abort(),this.tablist.removeAttr("role").off(this.eventNamespace),this.anchors.removeAttr("role tabIndex").removeUniqueId(),this.tabs.add(this.panels).each((function(){t.data(this,"ui-tabs-destroy")?t(this).remove():t(this).removeAttr("role tabIndex aria-live aria-busy aria-selected aria-labelledby aria-hidden aria-expanded")})),this.tabs.each((function(){var e=t(this),i=e.data("ui-tabs-aria-controls");i?e.attr("aria-controls",i).removeData("ui-tabs-aria-controls"):e.removeAttr("aria-controls")})),this.panels.show(),"content"!==this.options.heightStyle&&this.panels.css("height","")},enable:function(e){var i=this.options.disabled;!1!==i&&(void 0===e?i=!1:(e=this._getIndex(e),i=Array.isArray(i)?t.map(i,(function(t){return t!==e?t:null})):t.map(this.tabs,(function(t,i){return i!==e?i:null}))),this._setOptionDisabled(i))},disable:function(e){var i=this.options.disabled;if(!0!==i){if(void 0===e)i=!0;else{if(e=this._getIndex(e),-1!==t.inArray(e,i))return;i=Array.isArray(i)?t.merge([e],i).sort():[e]}this._setOptionDisabled(i)}},load:function(e,i){e=this._getIndex(e);var n=this,o=this.tabs.eq(e),r=o.find(".ui-tabs-anchor"),s=this._getPanelForTab(o),a={tab:o,panel:s},l=function(t,e){"abort"===e&&n.panels.stop(!1,!0),n._removeClass(o,"ui-tabs-loading"),s.removeAttr("aria-busy"),t===n.xhr&&delete n.xhr};this._isLocal(r[0])||(this.xhr=t.ajax(this._ajaxSettings(r,i,a)),this.xhr&&"canceled"!==this.xhr.statusText&&(this._addClass(o,"ui-tabs-loading"),s.attr("aria-busy","true"),this.xhr.done((function(t,e,o){setTimeout((function(){s.html(t),n._trigger("load",i,a),l(o,e)}),1)})).fail((function(t,e){setTimeout((function(){l(t,e)}),1)}))))},_ajaxSettings:function(e,i,n){var o=this;return{url:e.attr("href").replace(/#.*$/,""),beforeSend:function(e,r){return o._trigger("beforeLoad",i,t.extend({jqXHR:e,ajaxSettings:r},n))}}},_getPanelForTab:function(e){var i=t(e).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+i))}}),!1!==t.uiBackCompat&&t.widget("ui.tabs",t.ui.tabs,{_processTabs:function(){this._superApply(arguments),this._addClass(this.tabs,"ui-tab")}});t.ui.tabs;
/*!
 * jQuery UI Tooltip 1.13.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */t.widget("ui.tooltip",{version:"1.13.1",options:{classes:{"ui-tooltip":"ui-corner-all ui-widget-shadow"},content:function(){var e=t(this).attr("title");return t("<a>").text(e).html()},hide:!0,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:!0,track:!1,close:null,open:null},_addDescribedBy:function(t,e){var i=(t.attr("aria-describedby")||"").split(/\s+/);i.push(e),t.data("ui-tooltip-id",e).attr("aria-describedby",String.prototype.trim.call(i.join(" ")))},_removeDescribedBy:function(e){var i=e.data("ui-tooltip-id"),n=(e.attr("aria-describedby")||"").split(/\s+/),o=t.inArray(i,n);-1!==o&&n.splice(o,1),e.removeData("ui-tooltip-id"),(n=String.prototype.trim.call(n.join(" ")))?e.attr("aria-describedby",n):e.removeAttr("aria-describedby")},_create:function(){this._on({mouseover:"open",focusin:"open"}),this.tooltips={},this.parents={},this.liveRegion=t("<div>").attr({role:"log","aria-live":"assertive","aria-relevant":"additions"}).appendTo(this.document[0].body),this._addClass(this.liveRegion,null,"ui-helper-hidden-accessible"),this.disabledTitles=t([])},_setOption:function(e,i){var n=this;this._super(e,i),"content"===e&&t.each(this.tooltips,(function(t,e){n._updateContent(e.element)}))},_setOptionDisabled:function(t){this[t?"_disable":"_enable"]()},_disable:function(){var e=this;t.each(this.tooltips,(function(i,n){var o=t.Event("blur");o.target=o.currentTarget=n.element[0],e.close(o,!0)})),this.disabledTitles=this.disabledTitles.add(this.element.find(this.options.items).addBack().filter((function(){var e=t(this);if(e.is("[title]"))return e.data("ui-tooltip-title",e.attr("title")).removeAttr("title")})))},_enable:function(){this.disabledTitles.each((function(){var e=t(this);e.data("ui-tooltip-title")&&e.attr("title",e.data("ui-tooltip-title"))})),this.disabledTitles=t([])},open:function(e){var i=this,n=t(e?e.target:this.element).closest(this.options.items);n.length&&!n.data("ui-tooltip-id")&&(n.attr("title")&&n.data("ui-tooltip-title",n.attr("title")),n.data("ui-tooltip-open",!0),e&&"mouseover"===e.type&&n.parents().each((function(){var e,n=t(this);n.data("ui-tooltip-open")&&((e=t.Event("blur")).target=e.currentTarget=this,i.close(e,!0)),n.attr("title")&&(n.uniqueId(),i.parents[this.id]={element:this,title:n.attr("title")},n.attr("title",""))})),this._registerCloseHandlers(e,n),this._updateContent(n,e))},_updateContent:function(t,e){var i,n=this.options.content,o=this,r=e?e.type:null;if("string"==typeof n||n.nodeType||n.jquery)return this._open(e,t,n);(i=n.call(t[0],(function(i){o._delay((function(){t.data("ui-tooltip-open")&&(e&&(e.type=r),this._open(e,t,i))}))})))&&this._open(e,t,i)},_open:function(e,i,n){var o,r,s,a,l=t.extend({},this.options.position);function c(t){l.of=t,r.is(":hidden")||r.position(l)}n&&((o=this._find(i))?o.tooltip.find(".ui-tooltip-content").html(n):(i.is("[title]")&&(e&&"mouseover"===e.type?i.attr("title",""):i.removeAttr("title")),o=this._tooltip(i),r=o.tooltip,this._addDescribedBy(i,r.attr("id")),r.find(".ui-tooltip-content").html(n),this.liveRegion.children().hide(),(a=t("<div>").html(r.find(".ui-tooltip-content").html())).removeAttr("name").find("[name]").removeAttr("name"),a.removeAttr("id").find("[id]").removeAttr("id"),a.appendTo(this.liveRegion),this.options.track&&e&&/^mouse/.test(e.type)?(this._on(this.document,{mousemove:c}),c(e)):r.position(t.extend({of:i},this.options.position)),r.hide(),this._show(r,this.options.show),this.options.track&&this.options.show&&this.options.show.delay&&(s=this.delayedShow=setInterval((function(){r.is(":visible")&&(c(l.of),clearInterval(s))}),13)),this._trigger("open",e,{tooltip:r})))},_registerCloseHandlers:function(e,i){var n={keyup:function(e){if(e.keyCode===t.ui.keyCode.ESCAPE){var n=t.Event(e);n.currentTarget=i[0],this.close(n,!0)}}};i[0]!==this.element[0]&&(n.remove=function(){var t=this._find(i);t&&this._removeTooltip(t.tooltip)}),e&&"mouseover"!==e.type||(n.mouseleave="close"),e&&"focusin"!==e.type||(n.focusout="close"),this._on(!0,i,n)},close:function(e){var i,n=this,o=t(e?e.currentTarget:this.element),r=this._find(o);r?(i=r.tooltip,r.closing||(clearInterval(this.delayedShow),o.data("ui-tooltip-title")&&!o.attr("title")&&o.attr("title",o.data("ui-tooltip-title")),this._removeDescribedBy(o),r.hiding=!0,i.stop(!0),this._hide(i,this.options.hide,(function(){n._removeTooltip(t(this))})),o.removeData("ui-tooltip-open"),this._off(o,"mouseleave focusout keyup"),o[0]!==this.element[0]&&this._off(o,"remove"),this._off(this.document,"mousemove"),e&&"mouseleave"===e.type&&t.each(this.parents,(function(e,i){t(i.element).attr("title",i.title),delete n.parents[e]})),r.closing=!0,this._trigger("close",e,{tooltip:i}),r.hiding||(r.closing=!1))):o.removeData("ui-tooltip-open")},_tooltip:function(e){var i=t("<div>").attr("role","tooltip"),n=t("<div>").appendTo(i),o=i.uniqueId().attr("id");return this._addClass(n,"ui-tooltip-content"),this._addClass(i,"ui-tooltip","ui-widget ui-widget-content"),i.appendTo(this._appendTo(e)),this.tooltips[o]={element:e,tooltip:i}},_find:function(t){var e=t.data("ui-tooltip-id");return e?this.tooltips[e]:null},_removeTooltip:function(t){clearInterval(this.delayedShow),t.remove(),delete this.tooltips[t.attr("id")]},_appendTo:function(t){var e=t.closest(".ui-front, dialog");return e.length||(e=this.document[0].body),e},_destroy:function(){var e=this;t.each(this.tooltips,(function(i,n){var o=t.Event("blur"),r=n.element;o.target=o.currentTarget=r[0],e.close(o,!0),t("#"+i).remove(),r.data("ui-tooltip-title")&&(r.attr("title")||r.attr("title",r.data("ui-tooltip-title")),r.removeData("ui-tooltip-title"))})),this.liveRegion.remove()}}),!1!==t.uiBackCompat&&t.widget("ui.tooltip",t.ui.tooltip,{options:{tooltipClass:null},_tooltip:function(){var t=this._superApply(arguments);return this.options.tooltipClass&&t.tooltip.addClass(this.options.tooltipClass),t}});t.ui.tooltip})),
/*!
  * Bootstrap v4.6.1 (https://getbootstrap.com/)
  * Copyright 2011-2021 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */
function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("jquery")):"function"==typeof define&&define.amd?define(["exports","jquery"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).bootstrap={},t.jQuery)}(this,(function(t,e){"use strict";function i(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var n=i(e);function o(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function r(t,e,i){return e&&o(t.prototype,e),i&&o(t,i),t}function s(){return s=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},s.apply(this,arguments)}function a(t,e){return a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},a(t,e)}var l="transitionend";function c(t){var e=this,i=!1;return n.default(this).one(h.TRANSITION_END,(function(){i=!0})),setTimeout((function(){i||h.triggerTransitionEnd(e)}),t),this}var h={TRANSITION_END:"bsTransitionEnd",getUID:function(t){do{t+=~~(1e6*Math.random())}while(document.getElementById(t));return t},getSelectorFromElement:function(t){var e=t.getAttribute("data-target");if(!e||"#"===e){var i=t.getAttribute("href");e=i&&"#"!==i?i.trim():""}try{return document.querySelector(e)?e:null}catch(t){return null}},getTransitionDurationFromElement:function(t){if(!t)return 0;var e=n.default(t).css("transition-duration"),i=n.default(t).css("transition-delay"),o=parseFloat(e),r=parseFloat(i);return o||r?(e=e.split(",")[0],i=i.split(",")[0],1e3*(parseFloat(e)+parseFloat(i))):0},reflow:function(t){return t.offsetHeight},triggerTransitionEnd:function(t){n.default(t).trigger(l)},supportsTransitionEnd:function(){return Boolean(l)},isElement:function(t){return(t[0]||t).nodeType},typeCheckConfig:function(t,e,i){for(var n in i)if(Object.prototype.hasOwnProperty.call(i,n)){var o=i[n],r=e[n],s=r&&h.isElement(r)?"element":null==(a=r)?""+a:{}.toString.call(a).match(/\s([a-z]+)/i)[1].toLowerCase();if(!new RegExp(o).test(s))throw new Error(t.toUpperCase()+': Option "'+n+'" provided type "'+s+'" but expected type "'+o+'".')}var a},findShadowRoot:function(t){if(!document.documentElement.attachShadow)return null;if("function"==typeof t.getRootNode){var e=t.getRootNode();return e instanceof ShadowRoot?e:null}return t instanceof ShadowRoot?t:t.parentNode?h.findShadowRoot(t.parentNode):null},jQueryDetection:function(){if(void 0===n.default)throw new TypeError("Bootstrap's JavaScript requires jQuery. jQuery must be included before Bootstrap's JavaScript.");var t=n.default.fn.jquery.split(" ")[0].split(".");if(t[0]<2&&t[1]<9||1===t[0]&&9===t[1]&&t[2]<1||t[0]>=4)throw new Error("Bootstrap's JavaScript requires at least jQuery v1.9.1 but less than v4.0.0")}};h.jQueryDetection(),n.default.fn.emulateTransitionEnd=c,n.default.event.special[h.TRANSITION_END]={bindType:l,delegateType:l,handle:function(t){if(n.default(t.target).is(this))return t.handleObj.handler.apply(this,arguments)}};var u="bs.alert",d=n.default.fn.alert,p=function(){function t(t){this._element=t}var e=t.prototype;return e.close=function(t){var e=this._element;t&&(e=this._getRootElement(t)),this._triggerCloseEvent(e).isDefaultPrevented()||this._removeElement(e)},e.dispose=function(){n.default.removeData(this._element,u),this._element=null},e._getRootElement=function(t){var e=h.getSelectorFromElement(t),i=!1;return e&&(i=document.querySelector(e)),i||(i=n.default(t).closest(".alert")[0]),i},e._triggerCloseEvent=function(t){var e=n.default.Event("close.bs.alert");return n.default(t).trigger(e),e},e._removeElement=function(t){var e=this;if(n.default(t).removeClass("show"),n.default(t).hasClass("fade")){var i=h.getTransitionDurationFromElement(t);n.default(t).one(h.TRANSITION_END,(function(i){return e._destroyElement(t,i)})).emulateTransitionEnd(i)}else this._destroyElement(t)},e._destroyElement=function(t){n.default(t).detach().trigger("closed.bs.alert").remove()},t._jQueryInterface=function(e){return this.each((function(){var i=n.default(this),o=i.data(u);o||(o=new t(this),i.data(u,o)),"close"===e&&o[e](this)}))},t._handleDismiss=function(t){return function(e){e&&e.preventDefault(),t.close(this)}},r(t,null,[{key:"VERSION",get:function(){return"4.6.1"}}]),t}();n.default(document).on("click.bs.alert.data-api",'[data-dismiss="alert"]',p._handleDismiss(new p)),n.default.fn.alert=p._jQueryInterface,n.default.fn.alert.Constructor=p,n.default.fn.alert.noConflict=function(){return n.default.fn.alert=d,p._jQueryInterface};var f="bs.button",m=n.default.fn.button,g="active",y='[data-toggle^="button"]',v='input:not([type="hidden"])',b=".btn",x=function(){function t(t){this._element=t,this.shouldAvoidTriggerChange=!1}var e=t.prototype;return e.toggle=function(){var t=!0,e=!0,i=n.default(this._element).closest('[data-toggle="buttons"]')[0];if(i){var o=this._element.querySelector(v);if(o){if("radio"===o.type)if(o.checked&&this._element.classList.contains(g))t=!1;else{var r=i.querySelector(".active");r&&n.default(r).removeClass(g)}t&&("checkbox"!==o.type&&"radio"!==o.type||(o.checked=!this._element.classList.contains(g)),this.shouldAvoidTriggerChange||n.default(o).trigger("change")),o.focus(),e=!1}}this._element.hasAttribute("disabled")||this._element.classList.contains("disabled")||(e&&this._element.setAttribute("aria-pressed",!this._element.classList.contains(g)),t&&n.default(this._element).toggleClass(g))},e.dispose=function(){n.default.removeData(this._element,f),this._element=null},t._jQueryInterface=function(e,i){return this.each((function(){var o=n.default(this),r=o.data(f);r||(r=new t(this),o.data(f,r)),r.shouldAvoidTriggerChange=i,"toggle"===e&&r[e]()}))},r(t,null,[{key:"VERSION",get:function(){return"4.6.1"}}]),t}();n.default(document).on("click.bs.button.data-api",y,(function(t){var e=t.target,i=e;if(n.default(e).hasClass("btn")||(e=n.default(e).closest(b)[0]),!e||e.hasAttribute("disabled")||e.classList.contains("disabled"))t.preventDefault();else{var o=e.querySelector(v);if(o&&(o.hasAttribute("disabled")||o.classList.contains("disabled")))return void t.preventDefault();"INPUT"!==i.tagName&&"LABEL"===e.tagName||x._jQueryInterface.call(n.default(e),"toggle","INPUT"===i.tagName)}})).on("focus.bs.button.data-api blur.bs.button.data-api",y,(function(t){var e=n.default(t.target).closest(b)[0];n.default(e).toggleClass("focus",/^focus(in)?$/.test(t.type))})),n.default(window).on("load.bs.button.data-api",(function(){for(var t=[].slice.call(document.querySelectorAll('[data-toggle="buttons"] .btn')),e=0,i=t.length;e<i;e++){var n=t[e],o=n.querySelector(v);o.checked||o.hasAttribute("checked")?n.classList.add(g):n.classList.remove(g)}for(var r=0,s=(t=[].slice.call(document.querySelectorAll('[data-toggle="button"]'))).length;r<s;r++){var a=t[r];"true"===a.getAttribute("aria-pressed")?a.classList.add(g):a.classList.remove(g)}})),n.default.fn.button=x._jQueryInterface,n.default.fn.button.Constructor=x,n.default.fn.button.noConflict=function(){return n.default.fn.button=m,x._jQueryInterface};var $="carousel",w="bs.carousel",_=".bs.carousel",k=n.default.fn[$],S="active",C="next",T="prev",M="slid.bs.carousel",P=".active.carousel-item",E={interval:5e3,keyboard:!0,slide:!1,pause:"hover",wrap:!0,touch:!0},I={interval:"(number|boolean)",keyboard:"boolean",slide:"(boolean|string)",pause:"(string|boolean)",wrap:"boolean",touch:"boolean"},A={TOUCH:"touch",PEN:"pen"},D=function(){function t(t,e){this._items=null,this._interval=null,this._activeElement=null,this._isPaused=!1,this._isSliding=!1,this.touchTimeout=null,this.touchStartX=0,this.touchDeltaX=0,this._config=this._getConfig(e),this._element=t,this._indicatorsElement=this._element.querySelector(".carousel-indicators"),this._touchSupported="ontouchstart"in document.documentElement||navigator.maxTouchPoints>0,this._pointerEvent=Boolean(window.PointerEvent||window.MSPointerEvent),this._addEventListeners()}var e=t.prototype;return e.next=function(){this._isSliding||this._slide(C)},e.nextWhenVisible=function(){var t=n.default(this._element);!document.hidden&&t.is(":visible")&&"hidden"!==t.css("visibility")&&this.next()},e.prev=function(){this._isSliding||this._slide(T)},e.pause=function(t){t||(this._isPaused=!0),this._element.querySelector(".carousel-item-next, .carousel-item-prev")&&(h.triggerTransitionEnd(this._element),this.cycle(!0)),clearInterval(this._interval),this._interval=null},e.cycle=function(t){t||(this._isPaused=!1),this._interval&&(clearInterval(this._interval),this._interval=null),this._config.interval&&!this._isPaused&&(this._updateInterval(),this._interval=setInterval((document.visibilityState?this.nextWhenVisible:this.next).bind(this),this._config.interval))},e.to=function(t){var e=this;this._activeElement=this._element.querySelector(P);var i=this._getItemIndex(this._activeElement);if(!(t>this._items.length-1||t<0))if(this._isSliding)n.default(this._element).one(M,(function(){return e.to(t)}));else{if(i===t)return this.pause(),void this.cycle();var o=t>i?C:T;this._slide(o,this._items[t])}},e.dispose=function(){n.default(this._element).off(_),n.default.removeData(this._element,w),this._items=null,this._config=null,this._element=null,this._interval=null,this._isPaused=null,this._isSliding=null,this._activeElement=null,this._indicatorsElement=null},e._getConfig=function(t){return t=s({},E,t),h.typeCheckConfig($,t,I),t},e._handleSwipe=function(){var t=Math.abs(this.touchDeltaX);if(!(t<=40)){var e=t/this.touchDeltaX;this.touchDeltaX=0,e>0&&this.prev(),e<0&&this.next()}},e._addEventListeners=function(){var t=this;this._config.keyboard&&n.default(this._element).on("keydown.bs.carousel",(function(e){return t._keydown(e)})),"hover"===this._config.pause&&n.default(this._element).on("mouseenter.bs.carousel",(function(e){return t.pause(e)})).on("mouseleave.bs.carousel",(function(e){return t.cycle(e)})),this._config.touch&&this._addTouchEventListeners()},e._addTouchEventListeners=function(){var t=this;if(this._touchSupported){var e=function(e){t._pointerEvent&&A[e.originalEvent.pointerType.toUpperCase()]?t.touchStartX=e.originalEvent.clientX:t._pointerEvent||(t.touchStartX=e.originalEvent.touches[0].clientX)},i=function(e){t._pointerEvent&&A[e.originalEvent.pointerType.toUpperCase()]&&(t.touchDeltaX=e.originalEvent.clientX-t.touchStartX),t._handleSwipe(),"hover"===t._config.pause&&(t.pause(),t.touchTimeout&&clearTimeout(t.touchTimeout),t.touchTimeout=setTimeout((function(e){return t.cycle(e)}),500+t._config.interval))};n.default(this._element.querySelectorAll(".carousel-item img")).on("dragstart.bs.carousel",(function(t){return t.preventDefault()})),this._pointerEvent?(n.default(this._element).on("pointerdown.bs.carousel",(function(t){return e(t)})),n.default(this._element).on("pointerup.bs.carousel",(function(t){return i(t)})),this._element.classList.add("pointer-event")):(n.default(this._element).on("touchstart.bs.carousel",(function(t){return e(t)})),n.default(this._element).on("touchmove.bs.carousel",(function(e){return function(e){t.touchDeltaX=e.originalEvent.touches&&e.originalEvent.touches.length>1?0:e.originalEvent.touches[0].clientX-t.touchStartX}(e)})),n.default(this._element).on("touchend.bs.carousel",(function(t){return i(t)})))}},e._keydown=function(t){if(!/input|textarea/i.test(t.target.tagName))switch(t.which){case 37:t.preventDefault(),this.prev();break;case 39:t.preventDefault(),this.next()}},e._getItemIndex=function(t){return this._items=t&&t.parentNode?[].slice.call(t.parentNode.querySelectorAll(".carousel-item")):[],this._items.indexOf(t)},e._getItemByDirection=function(t,e){var i=t===C,n=t===T,o=this._getItemIndex(e),r=this._items.length-1;if((n&&0===o||i&&o===r)&&!this._config.wrap)return e;var s=(o+(t===T?-1:1))%this._items.length;return-1===s?this._items[this._items.length-1]:this._items[s]},e._triggerSlideEvent=function(t,e){var i=this._getItemIndex(t),o=this._getItemIndex(this._element.querySelector(P)),r=n.default.Event("slide.bs.carousel",{relatedTarget:t,direction:e,from:o,to:i});return n.default(this._element).trigger(r),r},e._setActiveIndicatorElement=function(t){if(this._indicatorsElement){var e=[].slice.call(this._indicatorsElement.querySelectorAll(".active"));n.default(e).removeClass(S);var i=this._indicatorsElement.children[this._getItemIndex(t)];i&&n.default(i).addClass(S)}},e._updateInterval=function(){var t=this._activeElement||this._element.querySelector(P);if(t){var e=parseInt(t.getAttribute("data-interval"),10);e?(this._config.defaultInterval=this._config.defaultInterval||this._config.interval,this._config.interval=e):this._config.interval=this._config.defaultInterval||this._config.interval}},e._slide=function(t,e){var i,o,r,s=this,a=this._element.querySelector(P),l=this._getItemIndex(a),c=e||a&&this._getItemByDirection(t,a),u=this._getItemIndex(c),d=Boolean(this._interval);if(t===C?(i="carousel-item-left",o="carousel-item-next",r="left"):(i="carousel-item-right",o="carousel-item-prev",r="right"),c&&n.default(c).hasClass(S))this._isSliding=!1;else if(!this._triggerSlideEvent(c,r).isDefaultPrevented()&&a&&c){this._isSliding=!0,d&&this.pause(),this._setActiveIndicatorElement(c),this._activeElement=c;var p=n.default.Event(M,{relatedTarget:c,direction:r,from:l,to:u});if(n.default(this._element).hasClass("slide")){n.default(c).addClass(o),h.reflow(c),n.default(a).addClass(i),n.default(c).addClass(i);var f=h.getTransitionDurationFromElement(a);n.default(a).one(h.TRANSITION_END,(function(){n.default(c).removeClass(i+" "+o).addClass(S),n.default(a).removeClass("active "+o+" "+i),s._isSliding=!1,setTimeout((function(){return n.default(s._element).trigger(p)}),0)})).emulateTransitionEnd(f)}else n.default(a).removeClass(S),n.default(c).addClass(S),this._isSliding=!1,n.default(this._element).trigger(p);d&&this.cycle()}},t._jQueryInterface=function(e){return this.each((function(){var i=n.default(this).data(w),o=s({},E,n.default(this).data());"object"==typeof e&&(o=s({},o,e));var r="string"==typeof e?e:o.slide;if(i||(i=new t(this,o),n.default(this).data(w,i)),"number"==typeof e)i.to(e);else if("string"==typeof r){if(void 0===i[r])throw new TypeError('No method named "'+r+'"');i[r]()}else o.interval&&o.ride&&(i.pause(),i.cycle())}))},t._dataApiClickHandler=function(e){var i=h.getSelectorFromElement(this);if(i){var o=n.default(i)[0];if(o&&n.default(o).hasClass("carousel")){var r=s({},n.default(o).data(),n.default(this).data()),a=this.getAttribute("data-slide-to");a&&(r.interval=!1),t._jQueryInterface.call(n.default(o),r),a&&n.default(o).data(w).to(a),e.preventDefault()}}},r(t,null,[{key:"VERSION",get:function(){return"4.6.1"}},{key:"Default",get:function(){return E}}]),t}();n.default(document).on("click.bs.carousel.data-api","[data-slide], [data-slide-to]",D._dataApiClickHandler),n.default(window).on("load.bs.carousel.data-api",(function(){for(var t=[].slice.call(document.querySelectorAll('[data-ride="carousel"]')),e=0,i=t.length;e<i;e++){var o=n.default(t[e]);D._jQueryInterface.call(o,o.data())}})),n.default.fn[$]=D._jQueryInterface,n.default.fn[$].Constructor=D,n.default.fn[$].noConflict=function(){return n.default.fn[$]=k,D._jQueryInterface};var R="collapse",L="bs.collapse",O=n.default.fn[R],z="show",F="collapse",B="collapsing",N="collapsed",H="width",W='[data-toggle="collapse"]',j={toggle:!0,parent:""},Y={toggle:"boolean",parent:"(string|element)"},V=function(){function t(t,e){this._isTransitioning=!1,this._element=t,this._config=this._getConfig(e),this._triggerArray=[].slice.call(document.querySelectorAll('[data-toggle="collapse"][href="#'+t.id+'"],[data-toggle="collapse"][data-target="#'+t.id+'"]'));for(var i=[].slice.call(document.querySelectorAll(W)),n=0,o=i.length;n<o;n++){var r=i[n],s=h.getSelectorFromElement(r),a=[].slice.call(document.querySelectorAll(s)).filter((function(e){return e===t}));null!==s&&a.length>0&&(this._selector=s,this._triggerArray.push(r))}this._parent=this._config.parent?this._getParent():null,this._config.parent||this._addAriaAndCollapsedClass(this._element,this._triggerArray),this._config.toggle&&this.toggle()}var e=t.prototype;return e.toggle=function(){n.default(this._element).hasClass(z)?this.hide():this.show()},e.show=function(){var e,i,o=this;if(!this._isTransitioning&&!n.default(this._element).hasClass(z)&&(this._parent&&0===(e=[].slice.call(this._parent.querySelectorAll(".show, .collapsing")).filter((function(t){return"string"==typeof o._config.parent?t.getAttribute("data-parent")===o._config.parent:t.classList.contains(F)}))).length&&(e=null),!(e&&(i=n.default(e).not(this._selector).data(L))&&i._isTransitioning))){var r=n.default.Event("show.bs.collapse");if(n.default(this._element).trigger(r),!r.isDefaultPrevented()){e&&(t._jQueryInterface.call(n.default(e).not(this._selector),"hide"),i||n.default(e).data(L,null));var s=this._getDimension();n.default(this._element).removeClass(F).addClass(B),this._element.style[s]=0,this._triggerArray.length&&n.default(this._triggerArray).removeClass(N).attr("aria-expanded",!0),this.setTransitioning(!0);var a="scroll"+(s[0].toUpperCase()+s.slice(1)),l=h.getTransitionDurationFromElement(this._element);n.default(this._element).one(h.TRANSITION_END,(function(){n.default(o._element).removeClass(B).addClass("collapse show"),o._element.style[s]="",o.setTransitioning(!1),n.default(o._element).trigger("shown.bs.collapse")})).emulateTransitionEnd(l),this._element.style[s]=this._element[a]+"px"}}},e.hide=function(){var t=this;if(!this._isTransitioning&&n.default(this._element).hasClass(z)){var e=n.default.Event("hide.bs.collapse");if(n.default(this._element).trigger(e),!e.isDefaultPrevented()){var i=this._getDimension();this._element.style[i]=this._element.getBoundingClientRect()[i]+"px",h.reflow(this._element),n.default(this._element).addClass(B).removeClass("collapse show");var o=this._triggerArray.length;if(o>0)for(var r=0;r<o;r++){var s=this._triggerArray[r],a=h.getSelectorFromElement(s);if(null!==a)n.default([].slice.call(document.querySelectorAll(a))).hasClass(z)||n.default(s).addClass(N).attr("aria-expanded",!1)}this.setTransitioning(!0);this._element.style[i]="";var l=h.getTransitionDurationFromElement(this._element);n.default(this._element).one(h.TRANSITION_END,(function(){t.setTransitioning(!1),n.default(t._element).removeClass(B).addClass(F).trigger("hidden.bs.collapse")})).emulateTransitionEnd(l)}}},e.setTransitioning=function(t){this._isTransitioning=t},e.dispose=function(){n.default.removeData(this._element,L),this._config=null,this._parent=null,this._element=null,this._triggerArray=null,this._isTransitioning=null},e._getConfig=function(t){return(t=s({},j,t)).toggle=Boolean(t.toggle),h.typeCheckConfig(R,t,Y),t},e._getDimension=function(){return n.default(this._element).hasClass(H)?H:"height"},e._getParent=function(){var e,i=this;h.isElement(this._config.parent)?(e=this._config.parent,void 0!==this._config.parent.jquery&&(e=this._config.parent[0])):e=document.querySelector(this._config.parent);var o='[data-toggle="collapse"][data-parent="'+this._config.parent+'"]',r=[].slice.call(e.querySelectorAll(o));return n.default(r).each((function(e,n){i._addAriaAndCollapsedClass(t._getTargetFromElement(n),[n])})),e},e._addAriaAndCollapsedClass=function(t,e){var i=n.default(t).hasClass(z);e.length&&n.default(e).toggleClass(N,!i).attr("aria-expanded",i)},t._getTargetFromElement=function(t){var e=h.getSelectorFromElement(t);return e?document.querySelector(e):null},t._jQueryInterface=function(e){return this.each((function(){var i=n.default(this),o=i.data(L),r=s({},j,i.data(),"object"==typeof e&&e?e:{});if(!o&&r.toggle&&"string"==typeof e&&/show|hide/.test(e)&&(r.toggle=!1),o||(o=new t(this,r),i.data(L,o)),"string"==typeof e){if(void 0===o[e])throw new TypeError('No method named "'+e+'"');o[e]()}}))},r(t,null,[{key:"VERSION",get:function(){return"4.6.1"}},{key:"Default",get:function(){return j}}]),t}();n.default(document).on("click.bs.collapse.data-api",W,(function(t){"A"===t.currentTarget.tagName&&t.preventDefault();var e=n.default(this),i=h.getSelectorFromElement(this),o=[].slice.call(document.querySelectorAll(i));n.default(o).each((function(){var t=n.default(this),i=t.data(L)?"toggle":e.data();V._jQueryInterface.call(t,i)}))})),n.default.fn[R]=V._jQueryInterface,n.default.fn[R].Constructor=V,n.default.fn[R].noConflict=function(){return n.default.fn[R]=O,V._jQueryInterface};
/**!
   * @fileOverview Kickass library to create and place poppers near their reference elements.
   * @version 1.16.1
   * @license
   * Copyright (c) 2016 Federico Zivolo and contributors
   *
   * Permission is hereby granted, free of charge, to any person obtaining a copy
   * of this software and associated documentation files (the "Software"), to deal
   * in the Software without restriction, including without limitation the rights
   * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
   * copies of the Software, and to permit persons to whom the Software is
   * furnished to do so, subject to the following conditions:
   *
   * The above copyright notice and this permission notice shall be included in all
   * copies or substantial portions of the Software.
   *
   * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
   * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
   * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
   * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
   * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
   * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
   * SOFTWARE.
   */
var U="undefined"!=typeof window&&"undefined"!=typeof document&&"undefined"!=typeof navigator,q=function(){for(var t=["Edge","Trident","Firefox"],e=0;e<t.length;e+=1)if(U&&navigator.userAgent.indexOf(t[e])>=0)return 1;return 0}();var X=U&&window.Promise?function(t){var e=!1;return function(){e||(e=!0,window.Promise.resolve().then((function(){e=!1,t()})))}}:function(t){var e=!1;return function(){e||(e=!0,setTimeout((function(){e=!1,t()}),q))}};function G(t){return t&&"[object Function]"==={}.toString.call(t)}function Z(t,e){if(1!==t.nodeType)return[];var i=t.ownerDocument.defaultView.getComputedStyle(t,null);return e?i[e]:i}function K(t){return"HTML"===t.nodeName?t:t.parentNode||t.host}function Q(t){if(!t)return document.body;switch(t.nodeName){case"HTML":case"BODY":return t.ownerDocument.body;case"#document":return t.body}var e=Z(t),i=e.overflow,n=e.overflowX,o=e.overflowY;return/(auto|scroll|overlay)/.test(i+o+n)?t:Q(K(t))}function J(t){return t&&t.referenceNode?t.referenceNode:t}var tt=U&&!(!window.MSInputMethodContext||!document.documentMode),et=U&&/MSIE 10/.test(navigator.userAgent);function it(t){return 11===t?tt:10===t?et:tt||et}function nt(t){if(!t)return document.documentElement;for(var e=it(10)?document.body:null,i=t.offsetParent||null;i===e&&t.nextElementSibling;)i=(t=t.nextElementSibling).offsetParent;var n=i&&i.nodeName;return n&&"BODY"!==n&&"HTML"!==n?-1!==["TH","TD","TABLE"].indexOf(i.nodeName)&&"static"===Z(i,"position")?nt(i):i:t?t.ownerDocument.documentElement:document.documentElement}function ot(t){return null!==t.parentNode?ot(t.parentNode):t}function rt(t,e){if(!(t&&t.nodeType&&e&&e.nodeType))return document.documentElement;var i=t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_FOLLOWING,n=i?t:e,o=i?e:t,r=document.createRange();r.setStart(n,0),r.setEnd(o,0);var s,a,l=r.commonAncestorContainer;if(t!==l&&e!==l||n.contains(o))return"BODY"===(a=(s=l).nodeName)||"HTML"!==a&&nt(s.firstElementChild)!==s?nt(l):l;var c=ot(t);return c.host?rt(c.host,e):rt(t,ot(e).host)}function st(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"top",i="top"===e?"scrollTop":"scrollLeft",n=t.nodeName;if("BODY"===n||"HTML"===n){var o=t.ownerDocument.documentElement,r=t.ownerDocument.scrollingElement||o;return r[i]}return t[i]}function at(t,e){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=st(e,"top"),o=st(e,"left"),r=i?-1:1;return t.top+=n*r,t.bottom+=n*r,t.left+=o*r,t.right+=o*r,t}function lt(t,e){var i="x"===e?"Left":"Top",n="Left"===i?"Right":"Bottom";return parseFloat(t["border"+i+"Width"])+parseFloat(t["border"+n+"Width"])}function ct(t,e,i,n){return Math.max(e["offset"+t],e["scroll"+t],i["client"+t],i["offset"+t],i["scroll"+t],it(10)?parseInt(i["offset"+t])+parseInt(n["margin"+("Height"===t?"Top":"Left")])+parseInt(n["margin"+("Height"===t?"Bottom":"Right")]):0)}function ht(t){var e=t.body,i=t.documentElement,n=it(10)&&getComputedStyle(i);return{height:ct("Height",e,i,n),width:ct("Width",e,i,n)}}var ut=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},dt=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),pt=function(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t},ft=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t};function mt(t){return ft({},t,{right:t.left+t.width,bottom:t.top+t.height})}function gt(t){var e={};try{if(it(10)){e=t.getBoundingClientRect();var i=st(t,"top"),n=st(t,"left");e.top+=i,e.left+=n,e.bottom+=i,e.right+=n}else e=t.getBoundingClientRect()}catch(t){}var o={left:e.left,top:e.top,width:e.right-e.left,height:e.bottom-e.top},r="HTML"===t.nodeName?ht(t.ownerDocument):{},s=r.width||t.clientWidth||o.width,a=r.height||t.clientHeight||o.height,l=t.offsetWidth-s,c=t.offsetHeight-a;if(l||c){var h=Z(t);l-=lt(h,"x"),c-=lt(h,"y"),o.width-=l,o.height-=c}return mt(o)}function yt(t,e){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=it(10),o="HTML"===e.nodeName,r=gt(t),s=gt(e),a=Q(t),l=Z(e),c=parseFloat(l.borderTopWidth),h=parseFloat(l.borderLeftWidth);i&&o&&(s.top=Math.max(s.top,0),s.left=Math.max(s.left,0));var u=mt({top:r.top-s.top-c,left:r.left-s.left-h,width:r.width,height:r.height});if(u.marginTop=0,u.marginLeft=0,!n&&o){var d=parseFloat(l.marginTop),p=parseFloat(l.marginLeft);u.top-=c-d,u.bottom-=c-d,u.left-=h-p,u.right-=h-p,u.marginTop=d,u.marginLeft=p}return(n&&!i?e.contains(a):e===a&&"BODY"!==a.nodeName)&&(u=at(u,e)),u}function vt(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=t.ownerDocument.documentElement,n=yt(t,i),o=Math.max(i.clientWidth,window.innerWidth||0),r=Math.max(i.clientHeight,window.innerHeight||0),s=e?0:st(i),a=e?0:st(i,"left"),l={top:s-n.top+n.marginTop,left:a-n.left+n.marginLeft,width:o,height:r};return mt(l)}function bt(t){var e=t.nodeName;if("BODY"===e||"HTML"===e)return!1;if("fixed"===Z(t,"position"))return!0;var i=K(t);return!!i&&bt(i)}function xt(t){if(!t||!t.parentElement||it())return document.documentElement;for(var e=t.parentElement;e&&"none"===Z(e,"transform");)e=e.parentElement;return e||document.documentElement}function $t(t,e,i,n){var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],r={top:0,left:0},s=o?xt(t):rt(t,J(e));if("viewport"===n)r=vt(s,o);else{var a=void 0;"scrollParent"===n?"BODY"===(a=Q(K(e))).nodeName&&(a=t.ownerDocument.documentElement):a="window"===n?t.ownerDocument.documentElement:n;var l=yt(a,s,o);if("HTML"!==a.nodeName||bt(s))r=l;else{var c=ht(t.ownerDocument),h=c.height,u=c.width;r.top+=l.top-l.marginTop,r.bottom=h+l.top,r.left+=l.left-l.marginLeft,r.right=u+l.left}}var d="number"==typeof(i=i||0);return r.left+=d?i:i.left||0,r.top+=d?i:i.top||0,r.right-=d?i:i.right||0,r.bottom-=d?i:i.bottom||0,r}function wt(t){return t.width*t.height}function _t(t,e,i,n,o){var r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;if(-1===t.indexOf("auto"))return t;var s=$t(i,n,r,o),a={top:{width:s.width,height:e.top-s.top},right:{width:s.right-e.right,height:s.height},bottom:{width:s.width,height:s.bottom-e.bottom},left:{width:e.left-s.left,height:s.height}},l=Object.keys(a).map((function(t){return ft({key:t},a[t],{area:wt(a[t])})})).sort((function(t,e){return e.area-t.area})),c=l.filter((function(t){var e=t.width,n=t.height;return e>=i.clientWidth&&n>=i.clientHeight})),h=c.length>0?c[0].key:l[0].key,u=t.split("-")[1];return h+(u?"-"+u:"")}function kt(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=n?xt(e):rt(e,J(i));return yt(i,o,n)}function St(t){var e=t.ownerDocument.defaultView.getComputedStyle(t),i=parseFloat(e.marginTop||0)+parseFloat(e.marginBottom||0),n=parseFloat(e.marginLeft||0)+parseFloat(e.marginRight||0);return{width:t.offsetWidth+n,height:t.offsetHeight+i}}function Ct(t){var e={left:"right",right:"left",bottom:"top",top:"bottom"};return t.replace(/left|right|bottom|top/g,(function(t){return e[t]}))}function Tt(t,e,i){i=i.split("-")[0];var n=St(t),o={width:n.width,height:n.height},r=-1!==["right","left"].indexOf(i),s=r?"top":"left",a=r?"left":"top",l=r?"height":"width",c=r?"width":"height";return o[s]=e[s]+e[l]/2-n[l]/2,o[a]=i===a?e[a]-n[c]:e[Ct(a)],o}function Mt(t,e){return Array.prototype.find?t.find(e):t.filter(e)[0]}function Pt(t,e,i){return(void 0===i?t:t.slice(0,function(t,e,i){if(Array.prototype.findIndex)return t.findIndex((function(t){return t[e]===i}));var n=Mt(t,(function(t){return t[e]===i}));return t.indexOf(n)}(t,"name",i))).forEach((function(t){t.function&&console.warn("`modifier.function` is deprecated, use `modifier.fn`!");var i=t.function||t.fn;t.enabled&&G(i)&&(e.offsets.popper=mt(e.offsets.popper),e.offsets.reference=mt(e.offsets.reference),e=i(e,t))})),e}function Et(){if(!this.state.isDestroyed){var t={instance:this,styles:{},arrowStyles:{},attributes:{},flipped:!1,offsets:{}};t.offsets.reference=kt(this.state,this.popper,this.reference,this.options.positionFixed),t.placement=_t(this.options.placement,t.offsets.reference,this.popper,this.reference,this.options.modifiers.flip.boundariesElement,this.options.modifiers.flip.padding),t.originalPlacement=t.placement,t.positionFixed=this.options.positionFixed,t.offsets.popper=Tt(this.popper,t.offsets.reference,t.placement),t.offsets.popper.position=this.options.positionFixed?"fixed":"absolute",t=Pt(this.modifiers,t),this.state.isCreated?this.options.onUpdate(t):(this.state.isCreated=!0,this.options.onCreate(t))}}function It(t,e){return t.some((function(t){var i=t.name;return t.enabled&&i===e}))}function At(t){for(var e=[!1,"ms","Webkit","Moz","O"],i=t.charAt(0).toUpperCase()+t.slice(1),n=0;n<e.length;n++){var o=e[n],r=o?""+o+i:t;if(void 0!==document.body.style[r])return r}return null}function Dt(){return this.state.isDestroyed=!0,It(this.modifiers,"applyStyle")&&(this.popper.removeAttribute("x-placement"),this.popper.style.position="",this.popper.style.top="",this.popper.style.left="",this.popper.style.right="",this.popper.style.bottom="",this.popper.style.willChange="",this.popper.style[At("transform")]=""),this.disableEventListeners(),this.options.removeOnDestroy&&this.popper.parentNode.removeChild(this.popper),this}function Rt(t){var e=t.ownerDocument;return e?e.defaultView:window}function Lt(t,e,i,n){var o="BODY"===t.nodeName,r=o?t.ownerDocument.defaultView:t;r.addEventListener(e,i,{passive:!0}),o||Lt(Q(r.parentNode),e,i,n),n.push(r)}function Ot(t,e,i,n){i.updateBound=n,Rt(t).addEventListener("resize",i.updateBound,{passive:!0});var o=Q(t);return Lt(o,"scroll",i.updateBound,i.scrollParents),i.scrollElement=o,i.eventsEnabled=!0,i}function zt(){this.state.eventsEnabled||(this.state=Ot(this.reference,this.options,this.state,this.scheduleUpdate))}function Ft(){var t,e;this.state.eventsEnabled&&(cancelAnimationFrame(this.scheduleUpdate),this.state=(t=this.reference,e=this.state,Rt(t).removeEventListener("resize",e.updateBound),e.scrollParents.forEach((function(t){t.removeEventListener("scroll",e.updateBound)})),e.updateBound=null,e.scrollParents=[],e.scrollElement=null,e.eventsEnabled=!1,e))}function Bt(t){return""!==t&&!isNaN(parseFloat(t))&&isFinite(t)}function Nt(t,e){Object.keys(e).forEach((function(i){var n="";-1!==["width","height","top","right","bottom","left"].indexOf(i)&&Bt(e[i])&&(n="px"),t.style[i]=e[i]+n}))}var Ht=U&&/Firefox/i.test(navigator.userAgent);function Wt(t,e,i){var n=Mt(t,(function(t){return t.name===e})),o=!!n&&t.some((function(t){return t.name===i&&t.enabled&&t.order<n.order}));if(!o){var r="`"+e+"`",s="`"+i+"`";console.warn(s+" modifier is required by "+r+" modifier in order to work, be sure to include it before "+r+"!")}return o}var jt=["auto-start","auto","auto-end","top-start","top","top-end","right-start","right","right-end","bottom-end","bottom","bottom-start","left-end","left","left-start"],Yt=jt.slice(3);function Vt(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=Yt.indexOf(t),n=Yt.slice(i+1).concat(Yt.slice(0,i));return e?n.reverse():n}var Ut="flip",qt="clockwise",Xt="counterclockwise";function Gt(t,e,i,n){var o=[0,0],r=-1!==["right","left"].indexOf(n),s=t.split(/(\+|\-)/).map((function(t){return t.trim()})),a=s.indexOf(Mt(s,(function(t){return-1!==t.search(/,|\s/)})));s[a]&&-1===s[a].indexOf(",")&&console.warn("Offsets separated by white space(s) are deprecated, use a comma (,) instead.");var l=/\s*,\s*|\s+/,c=-1!==a?[s.slice(0,a).concat([s[a].split(l)[0]]),[s[a].split(l)[1]].concat(s.slice(a+1))]:[s];return c=c.map((function(t,n){var o=(1===n?!r:r)?"height":"width",s=!1;return t.reduce((function(t,e){return""===t[t.length-1]&&-1!==["+","-"].indexOf(e)?(t[t.length-1]=e,s=!0,t):s?(t[t.length-1]+=e,s=!1,t):t.concat(e)}),[]).map((function(t){return function(t,e,i,n){var o=t.match(/((?:\-|\+)?\d*\.?\d*)(.*)/),r=+o[1],s=o[2];if(!r)return t;if(0===s.indexOf("%")){return mt("%p"===s?i:n)[e]/100*r}if("vh"===s||"vw"===s)return("vh"===s?Math.max(document.documentElement.clientHeight,window.innerHeight||0):Math.max(document.documentElement.clientWidth,window.innerWidth||0))/100*r;return r}(t,o,e,i)}))})),c.forEach((function(t,e){t.forEach((function(i,n){Bt(i)&&(o[e]+=i*("-"===t[n-1]?-1:1))}))})),o}var Zt={shift:{order:100,enabled:!0,fn:function(t){var e=t.placement,i=e.split("-")[0],n=e.split("-")[1];if(n){var o=t.offsets,r=o.reference,s=o.popper,a=-1!==["bottom","top"].indexOf(i),l=a?"left":"top",c=a?"width":"height",h={start:pt({},l,r[l]),end:pt({},l,r[l]+r[c]-s[c])};t.offsets.popper=ft({},s,h[n])}return t}},offset:{order:200,enabled:!0,fn:function(t,e){var i=e.offset,n=t.placement,o=t.offsets,r=o.popper,s=o.reference,a=n.split("-")[0],l=void 0;return l=Bt(+i)?[+i,0]:Gt(i,r,s,a),"left"===a?(r.top+=l[0],r.left-=l[1]):"right"===a?(r.top+=l[0],r.left+=l[1]):"top"===a?(r.left+=l[0],r.top-=l[1]):"bottom"===a&&(r.left+=l[0],r.top+=l[1]),t.popper=r,t},offset:0},preventOverflow:{order:300,enabled:!0,fn:function(t,e){var i=e.boundariesElement||nt(t.instance.popper);t.instance.reference===i&&(i=nt(i));var n=At("transform"),o=t.instance.popper.style,r=o.top,s=o.left,a=o[n];o.top="",o.left="",o[n]="";var l=$t(t.instance.popper,t.instance.reference,e.padding,i,t.positionFixed);o.top=r,o.left=s,o[n]=a,e.boundaries=l;var c=e.priority,h=t.offsets.popper,u={primary:function(t){var i=h[t];return h[t]<l[t]&&!e.escapeWithReference&&(i=Math.max(h[t],l[t])),pt({},t,i)},secondary:function(t){var i="right"===t?"left":"top",n=h[i];return h[t]>l[t]&&!e.escapeWithReference&&(n=Math.min(h[i],l[t]-("right"===t?h.width:h.height))),pt({},i,n)}};return c.forEach((function(t){var e=-1!==["left","top"].indexOf(t)?"primary":"secondary";h=ft({},h,u[e](t))})),t.offsets.popper=h,t},priority:["left","right","top","bottom"],padding:5,boundariesElement:"scrollParent"},keepTogether:{order:400,enabled:!0,fn:function(t){var e=t.offsets,i=e.popper,n=e.reference,o=t.placement.split("-")[0],r=Math.floor,s=-1!==["top","bottom"].indexOf(o),a=s?"right":"bottom",l=s?"left":"top",c=s?"width":"height";return i[a]<r(n[l])&&(t.offsets.popper[l]=r(n[l])-i[c]),i[l]>r(n[a])&&(t.offsets.popper[l]=r(n[a])),t}},arrow:{order:500,enabled:!0,fn:function(t,e){var i;if(!Wt(t.instance.modifiers,"arrow","keepTogether"))return t;var n=e.element;if("string"==typeof n){if(!(n=t.instance.popper.querySelector(n)))return t}else if(!t.instance.popper.contains(n))return console.warn("WARNING: `arrow.element` must be child of its popper element!"),t;var o=t.placement.split("-")[0],r=t.offsets,s=r.popper,a=r.reference,l=-1!==["left","right"].indexOf(o),c=l?"height":"width",h=l?"Top":"Left",u=h.toLowerCase(),d=l?"left":"top",p=l?"bottom":"right",f=St(n)[c];a[p]-f<s[u]&&(t.offsets.popper[u]-=s[u]-(a[p]-f)),a[u]+f>s[p]&&(t.offsets.popper[u]+=a[u]+f-s[p]),t.offsets.popper=mt(t.offsets.popper);var m=a[u]+a[c]/2-f/2,g=Z(t.instance.popper),y=parseFloat(g["margin"+h]),v=parseFloat(g["border"+h+"Width"]),b=m-t.offsets.popper[u]-y-v;return b=Math.max(Math.min(s[c]-f,b),0),t.arrowElement=n,t.offsets.arrow=(pt(i={},u,Math.round(b)),pt(i,d,""),i),t},element:"[x-arrow]"},flip:{order:600,enabled:!0,fn:function(t,e){if(It(t.instance.modifiers,"inner"))return t;if(t.flipped&&t.placement===t.originalPlacement)return t;var i=$t(t.instance.popper,t.instance.reference,e.padding,e.boundariesElement,t.positionFixed),n=t.placement.split("-")[0],o=Ct(n),r=t.placement.split("-")[1]||"",s=[];switch(e.behavior){case Ut:s=[n,o];break;case qt:s=Vt(n);break;case Xt:s=Vt(n,!0);break;default:s=e.behavior}return s.forEach((function(a,l){if(n!==a||s.length===l+1)return t;n=t.placement.split("-")[0],o=Ct(n);var c=t.offsets.popper,h=t.offsets.reference,u=Math.floor,d="left"===n&&u(c.right)>u(h.left)||"right"===n&&u(c.left)<u(h.right)||"top"===n&&u(c.bottom)>u(h.top)||"bottom"===n&&u(c.top)<u(h.bottom),p=u(c.left)<u(i.left),f=u(c.right)>u(i.right),m=u(c.top)<u(i.top),g=u(c.bottom)>u(i.bottom),y="left"===n&&p||"right"===n&&f||"top"===n&&m||"bottom"===n&&g,v=-1!==["top","bottom"].indexOf(n),b=!!e.flipVariations&&(v&&"start"===r&&p||v&&"end"===r&&f||!v&&"start"===r&&m||!v&&"end"===r&&g),x=!!e.flipVariationsByContent&&(v&&"start"===r&&f||v&&"end"===r&&p||!v&&"start"===r&&g||!v&&"end"===r&&m),$=b||x;(d||y||$)&&(t.flipped=!0,(d||y)&&(n=s[l+1]),$&&(r=function(t){return"end"===t?"start":"start"===t?"end":t}(r)),t.placement=n+(r?"-"+r:""),t.offsets.popper=ft({},t.offsets.popper,Tt(t.instance.popper,t.offsets.reference,t.placement)),t=Pt(t.instance.modifiers,t,"flip"))})),t},behavior:"flip",padding:5,boundariesElement:"viewport",flipVariations:!1,flipVariationsByContent:!1},inner:{order:700,enabled:!1,fn:function(t){var e=t.placement,i=e.split("-")[0],n=t.offsets,o=n.popper,r=n.reference,s=-1!==["left","right"].indexOf(i),a=-1===["top","left"].indexOf(i);return o[s?"left":"top"]=r[i]-(a?o[s?"width":"height"]:0),t.placement=Ct(e),t.offsets.popper=mt(o),t}},hide:{order:800,enabled:!0,fn:function(t){if(!Wt(t.instance.modifiers,"hide","preventOverflow"))return t;var e=t.offsets.reference,i=Mt(t.instance.modifiers,(function(t){return"preventOverflow"===t.name})).boundaries;if(e.bottom<i.top||e.left>i.right||e.top>i.bottom||e.right<i.left){if(!0===t.hide)return t;t.hide=!0,t.attributes["x-out-of-boundaries"]=""}else{if(!1===t.hide)return t;t.hide=!1,t.attributes["x-out-of-boundaries"]=!1}return t}},computeStyle:{order:850,enabled:!0,fn:function(t,e){var i=e.x,n=e.y,o=t.offsets.popper,r=Mt(t.instance.modifiers,(function(t){return"applyStyle"===t.name})).gpuAcceleration;void 0!==r&&console.warn("WARNING: `gpuAcceleration` option moved to `computeStyle` modifier and will not be supported in future versions of Popper.js!");var s=void 0!==r?r:e.gpuAcceleration,a=nt(t.instance.popper),l=gt(a),c={position:o.position},h=function(t,e){var i=t.offsets,n=i.popper,o=i.reference,r=Math.round,s=Math.floor,a=function(t){return t},l=r(o.width),c=r(n.width),h=-1!==["left","right"].indexOf(t.placement),u=-1!==t.placement.indexOf("-"),d=e?h||u||l%2==c%2?r:s:a,p=e?r:a;return{left:d(l%2==1&&c%2==1&&!u&&e?n.left-1:n.left),top:p(n.top),bottom:p(n.bottom),right:d(n.right)}}(t,window.devicePixelRatio<2||!Ht),u="bottom"===i?"top":"bottom",d="right"===n?"left":"right",p=At("transform"),f=void 0,m=void 0;if(m="bottom"===u?"HTML"===a.nodeName?-a.clientHeight+h.bottom:-l.height+h.bottom:h.top,f="right"===d?"HTML"===a.nodeName?-a.clientWidth+h.right:-l.width+h.right:h.left,s&&p)c[p]="translate3d("+f+"px, "+m+"px, 0)",c[u]=0,c[d]=0,c.willChange="transform";else{var g="bottom"===u?-1:1,y="right"===d?-1:1;c[u]=m*g,c[d]=f*y,c.willChange=u+", "+d}var v={"x-placement":t.placement};return t.attributes=ft({},v,t.attributes),t.styles=ft({},c,t.styles),t.arrowStyles=ft({},t.offsets.arrow,t.arrowStyles),t},gpuAcceleration:!0,x:"bottom",y:"right"},applyStyle:{order:900,enabled:!0,fn:function(t){var e,i;return Nt(t.instance.popper,t.styles),e=t.instance.popper,i=t.attributes,Object.keys(i).forEach((function(t){!1!==i[t]?e.setAttribute(t,i[t]):e.removeAttribute(t)})),t.arrowElement&&Object.keys(t.arrowStyles).length&&Nt(t.arrowElement,t.arrowStyles),t},onLoad:function(t,e,i,n,o){var r=kt(o,e,t,i.positionFixed),s=_t(i.placement,r,e,t,i.modifiers.flip.boundariesElement,i.modifiers.flip.padding);return e.setAttribute("x-placement",s),Nt(e,{position:i.positionFixed?"fixed":"absolute"}),i},gpuAcceleration:void 0}},Kt={placement:"bottom",positionFixed:!1,eventsEnabled:!0,removeOnDestroy:!1,onCreate:function(){},onUpdate:function(){},modifiers:Zt},Qt=function(){function t(e,i){var n=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};ut(this,t),this.scheduleUpdate=function(){return requestAnimationFrame(n.update)},this.update=X(this.update.bind(this)),this.options=ft({},t.Defaults,o),this.state={isDestroyed:!1,isCreated:!1,scrollParents:[]},this.reference=e&&e.jquery?e[0]:e,this.popper=i&&i.jquery?i[0]:i,this.options.modifiers={},Object.keys(ft({},t.Defaults.modifiers,o.modifiers)).forEach((function(e){n.options.modifiers[e]=ft({},t.Defaults.modifiers[e]||{},o.modifiers?o.modifiers[e]:{})})),this.modifiers=Object.keys(this.options.modifiers).map((function(t){return ft({name:t},n.options.modifiers[t])})).sort((function(t,e){return t.order-e.order})),this.modifiers.forEach((function(t){t.enabled&&G(t.onLoad)&&t.onLoad(n.reference,n.popper,n.options,t,n.state)})),this.update();var r=this.options.eventsEnabled;r&&this.enableEventListeners(),this.state.eventsEnabled=r}return dt(t,[{key:"update",value:function(){return Et.call(this)}},{key:"destroy",value:function(){return Dt.call(this)}},{key:"enableEventListeners",value:function(){return zt.call(this)}},{key:"disableEventListeners",value:function(){return Ft.call(this)}}]),t}();Qt.Utils=("undefined"!=typeof window?window:global).PopperUtils,Qt.placements=jt,Qt.Defaults=Kt;var Jt=Qt,te="dropdown",ee="bs.dropdown",ie=".bs.dropdown",ne=n.default.fn[te],oe=new RegExp("38|40|27"),re="disabled",se="show",ae="dropdown-menu-right",le="hide.bs.dropdown",ce="hidden.bs.dropdown",he="click.bs.dropdown.data-api",ue="keydown.bs.dropdown.data-api",de='[data-toggle="dropdown"]',pe=".dropdown-menu",fe={offset:0,flip:!0,boundary:"scrollParent",reference:"toggle",display:"dynamic",popperConfig:null},me={offset:"(number|string|function)",flip:"boolean",boundary:"(string|element)",reference:"(string|element)",display:"string",popperConfig:"(null|object)"},ge=function(){function t(t,e){this._element=t,this._popper=null,this._config=this._getConfig(e),this._menu=this._getMenuElement(),this._inNavbar=this._detectNavbar(),this._addEventListeners()}var e=t.prototype;return e.toggle=function(){if(!this._element.disabled&&!n.default(this._element).hasClass(re)){var e=n.default(this._menu).hasClass(se);t._clearMenus(),e||this.show(!0)}},e.show=function(e){if(void 0===e&&(e=!1),!(this._element.disabled||n.default(this._element).hasClass(re)||n.default(this._menu).hasClass(se))){var i={relatedTarget:this._element},o=n.default.Event("show.bs.dropdown",i),r=t._getParentFromElement(this._element);if(n.default(r).trigger(o),!o.isDefaultPrevented()){if(!this._inNavbar&&e){if(void 0===Jt)throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");var s=this._element;"parent"===this._config.reference?s=r:h.isElement(this._config.reference)&&(s=this._config.reference,void 0!==this._config.reference.jquery&&(s=this._config.reference[0])),"scrollParent"!==this._config.boundary&&n.default(r).addClass("position-static"),this._popper=new Jt(s,this._menu,this._getPopperConfig())}"ontouchstart"in document.documentElement&&0===n.default(r).closest(".navbar-nav").length&&n.default(document.body).children().on("mouseover",null,n.default.noop),this._element.focus(),this._element.setAttribute("aria-expanded",!0),n.default(this._menu).toggleClass(se),n.default(r).toggleClass(se).trigger(n.default.Event("shown.bs.dropdown",i))}}},e.hide=function(){if(!this._element.disabled&&!n.default(this._element).hasClass(re)&&n.default(this._menu).hasClass(se)){var e={relatedTarget:this._element},i=n.default.Event(le,e),o=t._getParentFromElement(this._element);n.default(o).trigger(i),i.isDefaultPrevented()||(this._popper&&this._popper.destroy(),n.default(this._menu).toggleClass(se),n.default(o).toggleClass(se).trigger(n.default.Event(ce,e)))}},e.dispose=function(){n.default.removeData(this._element,ee),n.default(this._element).off(ie),this._element=null,this._menu=null,null!==this._popper&&(this._popper.destroy(),this._popper=null)},e.update=function(){this._inNavbar=this._detectNavbar(),null!==this._popper&&this._popper.scheduleUpdate()},e._addEventListeners=function(){var t=this;n.default(this._element).on("click.bs.dropdown",(function(e){e.preventDefault(),e.stopPropagation(),t.toggle()}))},e._getConfig=function(t){return t=s({},this.constructor.Default,n.default(this._element).data(),t),h.typeCheckConfig(te,t,this.constructor.DefaultType),t},e._getMenuElement=function(){if(!this._menu){var e=t._getParentFromElement(this._element);e&&(this._menu=e.querySelector(pe))}return this._menu},e._getPlacement=function(){var t=n.default(this._element.parentNode),e="bottom-start";return t.hasClass("dropup")?e=n.default(this._menu).hasClass(ae)?"top-end":"top-start":t.hasClass("dropright")?e="right-start":t.hasClass("dropleft")?e="left-start":n.default(this._menu).hasClass(ae)&&(e="bottom-end"),e},e._detectNavbar=function(){return n.default(this._element).closest(".navbar").length>0},e._getOffset=function(){var t=this,e={};return"function"==typeof this._config.offset?e.fn=function(e){return e.offsets=s({},e.offsets,t._config.offset(e.offsets,t._element)),e}:e.offset=this._config.offset,e},e._getPopperConfig=function(){var t={placement:this._getPlacement(),modifiers:{offset:this._getOffset(),flip:{enabled:this._config.flip},preventOverflow:{boundariesElement:this._config.boundary}}};return"static"===this._config.display&&(t.modifiers.applyStyle={enabled:!1}),s({},t,this._config.popperConfig)},t._jQueryInterface=function(e){return this.each((function(){var i=n.default(this).data(ee);if(i||(i=new t(this,"object"==typeof e?e:null),n.default(this).data(ee,i)),"string"==typeof e){if(void 0===i[e])throw new TypeError('No method named "'+e+'"');i[e]()}}))},t._clearMenus=function(e){if(!e||3!==e.which&&("keyup"!==e.type||9===e.which))for(var i=[].slice.call(document.querySelectorAll(de)),o=0,r=i.length;o<r;o++){var s=t._getParentFromElement(i[o]),a=n.default(i[o]).data(ee),l={relatedTarget:i[o]};if(e&&"click"===e.type&&(l.clickEvent=e),a){var c=a._menu;if(n.default(s).hasClass(se)&&!(e&&("click"===e.type&&/input|textarea/i.test(e.target.tagName)||"keyup"===e.type&&9===e.which)&&n.default.contains(s,e.target))){var h=n.default.Event(le,l);n.default(s).trigger(h),h.isDefaultPrevented()||("ontouchstart"in document.documentElement&&n.default(document.body).children().off("mouseover",null,n.default.noop),i[o].setAttribute("aria-expanded","false"),a._popper&&a._popper.destroy(),n.default(c).removeClass(se),n.default(s).removeClass(se).trigger(n.default.Event(ce,l)))}}}},t._getParentFromElement=function(t){var e,i=h.getSelectorFromElement(t);return i&&(e=document.querySelector(i)),e||t.parentNode},t._dataApiKeydownHandler=function(e){if(!(/input|textarea/i.test(e.target.tagName)?32===e.which||27!==e.which&&(40!==e.which&&38!==e.which||n.default(e.target).closest(pe).length):!oe.test(e.which))&&!this.disabled&&!n.default(this).hasClass(re)){var i=t._getParentFromElement(this),o=n.default(i).hasClass(se);if(o||27!==e.which){if(e.preventDefault(),e.stopPropagation(),!o||27===e.which||32===e.which)return 27===e.which&&n.default(i.querySelector(de)).trigger("focus"),void n.default(this).trigger("click");var r=[].slice.call(i.querySelectorAll(".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)")).filter((function(t){return n.default(t).is(":visible")}));if(0!==r.length){var s=r.indexOf(e.target);38===e.which&&s>0&&s--,40===e.which&&s<r.length-1&&s++,s<0&&(s=0),r[s].focus()}}}},r(t,null,[{key:"VERSION",get:function(){return"4.6.1"}},{key:"Default",get:function(){return fe}},{key:"DefaultType",get:function(){return me}}]),t}();n.default(document).on(ue,de,ge._dataApiKeydownHandler).on(ue,pe,ge._dataApiKeydownHandler).on(he+" keyup.bs.dropdown.data-api",ge._clearMenus).on(he,de,(function(t){t.preventDefault(),t.stopPropagation(),ge._jQueryInterface.call(n.default(this),"toggle")})).on(he,".dropdown form",(function(t){t.stopPropagation()})),n.default.fn[te]=ge._jQueryInterface,n.default.fn[te].Constructor=ge,n.default.fn[te].noConflict=function(){return n.default.fn[te]=ne,ge._jQueryInterface};var ye="modal",ve="bs.modal",be=".bs.modal",xe=n.default.fn.modal,$e="modal-open",we="fade",_e="show",ke="modal-static",Se="hidden.bs.modal",Ce="show.bs.modal",Te="focusin.bs.modal",Me="resize.bs.modal",Pe="click.dismiss.bs.modal",Ee="keydown.dismiss.bs.modal",Ie="mousedown.dismiss.bs.modal",Ae=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",De=".sticky-top",Re={backdrop:!0,keyboard:!0,focus:!0,show:!0},Le={backdrop:"(boolean|string)",keyboard:"boolean",focus:"boolean",show:"boolean"},Oe=function(){function t(t,e){this._config=this._getConfig(e),this._element=t,this._dialog=t.querySelector(".modal-dialog"),this._backdrop=null,this._isShown=!1,this._isBodyOverflowing=!1,this._ignoreBackdropClick=!1,this._isTransitioning=!1,this._scrollbarWidth=0}var e=t.prototype;return e.toggle=function(t){return this._isShown?this.hide():this.show(t)},e.show=function(t){var e=this;if(!this._isShown&&!this._isTransitioning){var i=n.default.Event(Ce,{relatedTarget:t});n.default(this._element).trigger(i),i.isDefaultPrevented()||(this._isShown=!0,n.default(this._element).hasClass(we)&&(this._isTransitioning=!0),this._checkScrollbar(),this._setScrollbar(),this._adjustDialog(),this._setEscapeEvent(),this._setResizeEvent(),n.default(this._element).on(Pe,'[data-dismiss="modal"]',(function(t){return e.hide(t)})),n.default(this._dialog).on(Ie,(function(){n.default(e._element).one("mouseup.dismiss.bs.modal",(function(t){n.default(t.target).is(e._element)&&(e._ignoreBackdropClick=!0)}))})),this._showBackdrop((function(){return e._showElement(t)})))}},e.hide=function(t){var e=this;if(t&&t.preventDefault(),this._isShown&&!this._isTransitioning){var i=n.default.Event("hide.bs.modal");if(n.default(this._element).trigger(i),this._isShown&&!i.isDefaultPrevented()){this._isShown=!1;var o=n.default(this._element).hasClass(we);if(o&&(this._isTransitioning=!0),this._setEscapeEvent(),this._setResizeEvent(),n.default(document).off(Te),n.default(this._element).removeClass(_e),n.default(this._element).off(Pe),n.default(this._dialog).off(Ie),o){var r=h.getTransitionDurationFromElement(this._element);n.default(this._element).one(h.TRANSITION_END,(function(t){return e._hideModal(t)})).emulateTransitionEnd(r)}else this._hideModal()}}},e.dispose=function(){[window,this._element,this._dialog].forEach((function(t){return n.default(t).off(be)})),n.default(document).off(Te),n.default.removeData(this._element,ve),this._config=null,this._element=null,this._dialog=null,this._backdrop=null,this._isShown=null,this._isBodyOverflowing=null,this._ignoreBackdropClick=null,this._isTransitioning=null,this._scrollbarWidth=null},e.handleUpdate=function(){this._adjustDialog()},e._getConfig=function(t){return t=s({},Re,t),h.typeCheckConfig(ye,t,Le),t},e._triggerBackdropTransition=function(){var t=this,e=n.default.Event("hidePrevented.bs.modal");if(n.default(this._element).trigger(e),!e.isDefaultPrevented()){var i=this._element.scrollHeight>document.documentElement.clientHeight;i||(this._element.style.overflowY="hidden"),this._element.classList.add(ke);var o=h.getTransitionDurationFromElement(this._dialog);n.default(this._element).off(h.TRANSITION_END),n.default(this._element).one(h.TRANSITION_END,(function(){t._element.classList.remove(ke),i||n.default(t._element).one(h.TRANSITION_END,(function(){t._element.style.overflowY=""})).emulateTransitionEnd(t._element,o)})).emulateTransitionEnd(o),this._element.focus()}},e._showElement=function(t){var e=this,i=n.default(this._element).hasClass(we),o=this._dialog?this._dialog.querySelector(".modal-body"):null;this._element.parentNode&&this._element.parentNode.nodeType===Node.ELEMENT_NODE||document.body.appendChild(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),n.default(this._dialog).hasClass("modal-dialog-scrollable")&&o?o.scrollTop=0:this._element.scrollTop=0,i&&h.reflow(this._element),n.default(this._element).addClass(_e),this._config.focus&&this._enforceFocus();var r=n.default.Event("shown.bs.modal",{relatedTarget:t}),s=function(){e._config.focus&&e._element.focus(),e._isTransitioning=!1,n.default(e._element).trigger(r)};if(i){var a=h.getTransitionDurationFromElement(this._dialog);n.default(this._dialog).one(h.TRANSITION_END,s).emulateTransitionEnd(a)}else s()},e._enforceFocus=function(){var t=this;n.default(document).off(Te).on(Te,(function(e){document!==e.target&&t._element!==e.target&&0===n.default(t._element).has(e.target).length&&t._element.focus()}))},e._setEscapeEvent=function(){var t=this;this._isShown?n.default(this._element).on(Ee,(function(e){t._config.keyboard&&27===e.which?(e.preventDefault(),t.hide()):t._config.keyboard||27!==e.which||t._triggerBackdropTransition()})):this._isShown||n.default(this._element).off(Ee)},e._setResizeEvent=function(){var t=this;this._isShown?n.default(window).on(Me,(function(e){return t.handleUpdate(e)})):n.default(window).off(Me)},e._hideModal=function(){var t=this;this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._showBackdrop((function(){n.default(document.body).removeClass($e),t._resetAdjustments(),t._resetScrollbar(),n.default(t._element).trigger(Se)}))},e._removeBackdrop=function(){this._backdrop&&(n.default(this._backdrop).remove(),this._backdrop=null)},e._showBackdrop=function(t){var e=this,i=n.default(this._element).hasClass(we)?we:"";if(this._isShown&&this._config.backdrop){if(this._backdrop=document.createElement("div"),this._backdrop.className="modal-backdrop",i&&this._backdrop.classList.add(i),n.default(this._backdrop).appendTo(document.body),n.default(this._element).on(Pe,(function(t){e._ignoreBackdropClick?e._ignoreBackdropClick=!1:t.target===t.currentTarget&&("static"===e._config.backdrop?e._triggerBackdropTransition():e.hide())})),i&&h.reflow(this._backdrop),n.default(this._backdrop).addClass(_e),!t)return;if(!i)return void t();var o=h.getTransitionDurationFromElement(this._backdrop);n.default(this._backdrop).one(h.TRANSITION_END,t).emulateTransitionEnd(o)}else if(!this._isShown&&this._backdrop){n.default(this._backdrop).removeClass(_e);var r=function(){e._removeBackdrop(),t&&t()};if(n.default(this._element).hasClass(we)){var s=h.getTransitionDurationFromElement(this._backdrop);n.default(this._backdrop).one(h.TRANSITION_END,r).emulateTransitionEnd(s)}else r()}else t&&t()},e._adjustDialog=function(){var t=this._element.scrollHeight>document.documentElement.clientHeight;!this._isBodyOverflowing&&t&&(this._element.style.paddingLeft=this._scrollbarWidth+"px"),this._isBodyOverflowing&&!t&&(this._element.style.paddingRight=this._scrollbarWidth+"px")},e._resetAdjustments=function(){this._element.style.paddingLeft="",this._element.style.paddingRight=""},e._checkScrollbar=function(){var t=document.body.getBoundingClientRect();this._isBodyOverflowing=Math.round(t.left+t.right)<window.innerWidth,this._scrollbarWidth=this._getScrollbarWidth()},e._setScrollbar=function(){var t=this;if(this._isBodyOverflowing){var e=[].slice.call(document.querySelectorAll(Ae)),i=[].slice.call(document.querySelectorAll(De));n.default(e).each((function(e,i){var o=i.style.paddingRight,r=n.default(i).css("padding-right");n.default(i).data("padding-right",o).css("padding-right",parseFloat(r)+t._scrollbarWidth+"px")})),n.default(i).each((function(e,i){var o=i.style.marginRight,r=n.default(i).css("margin-right");n.default(i).data("margin-right",o).css("margin-right",parseFloat(r)-t._scrollbarWidth+"px")}));var o=document.body.style.paddingRight,r=n.default(document.body).css("padding-right");n.default(document.body).data("padding-right",o).css("padding-right",parseFloat(r)+this._scrollbarWidth+"px")}n.default(document.body).addClass($e)},e._resetScrollbar=function(){var t=[].slice.call(document.querySelectorAll(Ae));n.default(t).each((function(t,e){var i=n.default(e).data("padding-right");n.default(e).removeData("padding-right"),e.style.paddingRight=i||""}));var e=[].slice.call(document.querySelectorAll(".sticky-top"));n.default(e).each((function(t,e){var i=n.default(e).data("margin-right");void 0!==i&&n.default(e).css("margin-right",i).removeData("margin-right")}));var i=n.default(document.body).data("padding-right");n.default(document.body).removeData("padding-right"),document.body.style.paddingRight=i||""},e._getScrollbarWidth=function(){var t=document.createElement("div");t.className="modal-scrollbar-measure",document.body.appendChild(t);var e=t.getBoundingClientRect().width-t.clientWidth;return document.body.removeChild(t),e},t._jQueryInterface=function(e,i){return this.each((function(){var o=n.default(this).data(ve),r=s({},Re,n.default(this).data(),"object"==typeof e&&e?e:{});if(o||(o=new t(this,r),n.default(this).data(ve,o)),"string"==typeof e){if(void 0===o[e])throw new TypeError('No method named "'+e+'"');o[e](i)}else r.show&&o.show(i)}))},r(t,null,[{key:"VERSION",get:function(){return"4.6.1"}},{key:"Default",get:function(){return Re}}]),t}();n.default(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',(function(t){var e,i=this,o=h.getSelectorFromElement(this);o&&(e=document.querySelector(o));var r=n.default(e).data(ve)?"toggle":s({},n.default(e).data(),n.default(this).data());"A"!==this.tagName&&"AREA"!==this.tagName||t.preventDefault();var a=n.default(e).one(Ce,(function(t){t.isDefaultPrevented()||a.one(Se,(function(){n.default(i).is(":visible")&&i.focus()}))}));Oe._jQueryInterface.call(n.default(e),r,this)})),n.default.fn.modal=Oe._jQueryInterface,n.default.fn.modal.Constructor=Oe,n.default.fn.modal.noConflict=function(){return n.default.fn.modal=xe,Oe._jQueryInterface};var ze=["background","cite","href","itemtype","longdesc","poster","src","xlink:href"],Fe={"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},Be=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^#&/:?]*(?:[#/?]|$))/i,Ne=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[\d+/a-z]+=*$/i;function He(t,e,i){if(0===t.length)return t;if(i&&"function"==typeof i)return i(t);for(var n=(new window.DOMParser).parseFromString(t,"text/html"),o=Object.keys(e),r=[].slice.call(n.body.querySelectorAll("*")),s=function(t,i){var n=r[t],s=n.nodeName.toLowerCase();if(-1===o.indexOf(n.nodeName.toLowerCase()))return n.parentNode.removeChild(n),"continue";var a=[].slice.call(n.attributes),l=[].concat(e["*"]||[],e[s]||[]);a.forEach((function(t){(function(t,e){var i=t.nodeName.toLowerCase();if(-1!==e.indexOf(i))return-1===ze.indexOf(i)||Boolean(Be.test(t.nodeValue)||Ne.test(t.nodeValue));for(var n=e.filter((function(t){return t instanceof RegExp})),o=0,r=n.length;o<r;o++)if(n[o].test(i))return!0;return!1})(t,l)||n.removeAttribute(t.nodeName)}))},a=0,l=r.length;a<l;a++)s(a);return n.body.innerHTML}var We="tooltip",je="bs.tooltip",Ye=".bs.tooltip",Ve=n.default.fn.tooltip,Ue=new RegExp("(^|\\s)bs-tooltip\\S+","g"),qe=["sanitize","whiteList","sanitizeFn"],Xe="fade",Ge="show",Ze="show",Ke="out",Qe="hover",Je="focus",ti={AUTO:"auto",TOP:"top",RIGHT:"right",BOTTOM:"bottom",LEFT:"left"},ei={animation:!0,template:'<div class="tooltip" role="tooltip"><div class="arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,selector:!1,placement:"top",offset:0,container:!1,fallbackPlacement:"flip",boundary:"scrollParent",customClass:"",sanitize:!0,sanitizeFn:null,whiteList:Fe,popperConfig:null},ii={animation:"boolean",template:"string",title:"(string|element|function)",trigger:"string",delay:"(number|object)",html:"boolean",selector:"(string|boolean)",placement:"(string|function)",offset:"(number|string|function)",container:"(string|element|boolean)",fallbackPlacement:"(string|array)",boundary:"(string|element)",customClass:"(string|function)",sanitize:"boolean",sanitizeFn:"(null|function)",whiteList:"object",popperConfig:"(null|object)"},ni={HIDE:"hide.bs.tooltip",HIDDEN:"hidden.bs.tooltip",SHOW:"show.bs.tooltip",SHOWN:"shown.bs.tooltip",INSERTED:"inserted.bs.tooltip",CLICK:"click.bs.tooltip",FOCUSIN:"focusin.bs.tooltip",FOCUSOUT:"focusout.bs.tooltip",MOUSEENTER:"mouseenter.bs.tooltip",MOUSELEAVE:"mouseleave.bs.tooltip"},oi=function(){function t(t,e){if(void 0===Jt)throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");this._isEnabled=!0,this._timeout=0,this._hoverState="",this._activeTrigger={},this._popper=null,this.element=t,this.config=this._getConfig(e),this.tip=null,this._setListeners()}var e=t.prototype;return e.enable=function(){this._isEnabled=!0},e.disable=function(){this._isEnabled=!1},e.toggleEnabled=function(){this._isEnabled=!this._isEnabled},e.toggle=function(t){if(this._isEnabled)if(t){var e=this.constructor.DATA_KEY,i=n.default(t.currentTarget).data(e);i||(i=new this.constructor(t.currentTarget,this._getDelegateConfig()),n.default(t.currentTarget).data(e,i)),i._activeTrigger.click=!i._activeTrigger.click,i._isWithActiveTrigger()?i._enter(null,i):i._leave(null,i)}else{if(n.default(this.getTipElement()).hasClass(Ge))return void this._leave(null,this);this._enter(null,this)}},e.dispose=function(){clearTimeout(this._timeout),n.default.removeData(this.element,this.constructor.DATA_KEY),n.default(this.element).off(this.constructor.EVENT_KEY),n.default(this.element).closest(".modal").off("hide.bs.modal",this._hideModalHandler),this.tip&&n.default(this.tip).remove(),this._isEnabled=null,this._timeout=null,this._hoverState=null,this._activeTrigger=null,this._popper&&this._popper.destroy(),this._popper=null,this.element=null,this.config=null,this.tip=null},e.show=function(){var t=this;if("none"===n.default(this.element).css("display"))throw new Error("Please use show on visible elements");var e=n.default.Event(this.constructor.Event.SHOW);if(this.isWithContent()&&this._isEnabled){n.default(this.element).trigger(e);var i=h.findShadowRoot(this.element),o=n.default.contains(null!==i?i:this.element.ownerDocument.documentElement,this.element);if(e.isDefaultPrevented()||!o)return;var r=this.getTipElement(),s=h.getUID(this.constructor.NAME);r.setAttribute("id",s),this.element.setAttribute("aria-describedby",s),this.setContent(),this.config.animation&&n.default(r).addClass(Xe);var a="function"==typeof this.config.placement?this.config.placement.call(this,r,this.element):this.config.placement,l=this._getAttachment(a);this.addAttachmentClass(l);var c=this._getContainer();n.default(r).data(this.constructor.DATA_KEY,this),n.default.contains(this.element.ownerDocument.documentElement,this.tip)||n.default(r).appendTo(c),n.default(this.element).trigger(this.constructor.Event.INSERTED),this._popper=new Jt(this.element,r,this._getPopperConfig(l)),n.default(r).addClass(Ge),n.default(r).addClass(this.config.customClass),"ontouchstart"in document.documentElement&&n.default(document.body).children().on("mouseover",null,n.default.noop);var u=function(){t.config.animation&&t._fixTransition();var e=t._hoverState;t._hoverState=null,n.default(t.element).trigger(t.constructor.Event.SHOWN),e===Ke&&t._leave(null,t)};if(n.default(this.tip).hasClass(Xe)){var d=h.getTransitionDurationFromElement(this.tip);n.default(this.tip).one(h.TRANSITION_END,u).emulateTransitionEnd(d)}else u()}},e.hide=function(t){var e=this,i=this.getTipElement(),o=n.default.Event(this.constructor.Event.HIDE),r=function(){e._hoverState!==Ze&&i.parentNode&&i.parentNode.removeChild(i),e._cleanTipClass(),e.element.removeAttribute("aria-describedby"),n.default(e.element).trigger(e.constructor.Event.HIDDEN),null!==e._popper&&e._popper.destroy(),t&&t()};if(n.default(this.element).trigger(o),!o.isDefaultPrevented()){if(n.default(i).removeClass(Ge),"ontouchstart"in document.documentElement&&n.default(document.body).children().off("mouseover",null,n.default.noop),this._activeTrigger.click=!1,this._activeTrigger.focus=!1,this._activeTrigger.hover=!1,n.default(this.tip).hasClass(Xe)){var s=h.getTransitionDurationFromElement(i);n.default(i).one(h.TRANSITION_END,r).emulateTransitionEnd(s)}else r();this._hoverState=""}},e.update=function(){null!==this._popper&&this._popper.scheduleUpdate()},e.isWithContent=function(){return Boolean(this.getTitle())},e.addAttachmentClass=function(t){n.default(this.getTipElement()).addClass("bs-tooltip-"+t)},e.getTipElement=function(){return this.tip=this.tip||n.default(this.config.template)[0],this.tip},e.setContent=function(){var t=this.getTipElement();this.setElementContent(n.default(t.querySelectorAll(".tooltip-inner")),this.getTitle()),n.default(t).removeClass("fade show")},e.setElementContent=function(t,e){"object"!=typeof e||!e.nodeType&&!e.jquery?this.config.html?(this.config.sanitize&&(e=He(e,this.config.whiteList,this.config.sanitizeFn)),t.html(e)):t.text(e):this.config.html?n.default(e).parent().is(t)||t.empty().append(e):t.text(n.default(e).text())},e.getTitle=function(){var t=this.element.getAttribute("data-original-title");return t||(t="function"==typeof this.config.title?this.config.title.call(this.element):this.config.title),t},e._getPopperConfig=function(t){var e=this;return s({},{placement:t,modifiers:{offset:this._getOffset(),flip:{behavior:this.config.fallbackPlacement},arrow:{element:".arrow"},preventOverflow:{boundariesElement:this.config.boundary}},onCreate:function(t){t.originalPlacement!==t.placement&&e._handlePopperPlacementChange(t)},onUpdate:function(t){return e._handlePopperPlacementChange(t)}},this.config.popperConfig)},e._getOffset=function(){var t=this,e={};return"function"==typeof this.config.offset?e.fn=function(e){return e.offsets=s({},e.offsets,t.config.offset(e.offsets,t.element)),e}:e.offset=this.config.offset,e},e._getContainer=function(){return!1===this.config.container?document.body:h.isElement(this.config.container)?n.default(this.config.container):n.default(document).find(this.config.container)},e._getAttachment=function(t){return ti[t.toUpperCase()]},e._setListeners=function(){var t=this;this.config.trigger.split(" ").forEach((function(e){if("click"===e)n.default(t.element).on(t.constructor.Event.CLICK,t.config.selector,(function(e){return t.toggle(e)}));else if("manual"!==e){var i=e===Qe?t.constructor.Event.MOUSEENTER:t.constructor.Event.FOCUSIN,o=e===Qe?t.constructor.Event.MOUSELEAVE:t.constructor.Event.FOCUSOUT;n.default(t.element).on(i,t.config.selector,(function(e){return t._enter(e)})).on(o,t.config.selector,(function(e){return t._leave(e)}))}})),this._hideModalHandler=function(){t.element&&t.hide()},n.default(this.element).closest(".modal").on("hide.bs.modal",this._hideModalHandler),this.config.selector?this.config=s({},this.config,{trigger:"manual",selector:""}):this._fixTitle()},e._fixTitle=function(){var t=typeof this.element.getAttribute("data-original-title");(this.element.getAttribute("title")||"string"!==t)&&(this.element.setAttribute("data-original-title",this.element.getAttribute("title")||""),this.element.setAttribute("title",""))},e._enter=function(t,e){var i=this.constructor.DATA_KEY;(e=e||n.default(t.currentTarget).data(i))||(e=new this.constructor(t.currentTarget,this._getDelegateConfig()),n.default(t.currentTarget).data(i,e)),t&&(e._activeTrigger["focusin"===t.type?Je:Qe]=!0),n.default(e.getTipElement()).hasClass(Ge)||e._hoverState===Ze?e._hoverState=Ze:(clearTimeout(e._timeout),e._hoverState=Ze,e.config.delay&&e.config.delay.show?e._timeout=setTimeout((function(){e._hoverState===Ze&&e.show()}),e.config.delay.show):e.show())},e._leave=function(t,e){var i=this.constructor.DATA_KEY;(e=e||n.default(t.currentTarget).data(i))||(e=new this.constructor(t.currentTarget,this._getDelegateConfig()),n.default(t.currentTarget).data(i,e)),t&&(e._activeTrigger["focusout"===t.type?Je:Qe]=!1),e._isWithActiveTrigger()||(clearTimeout(e._timeout),e._hoverState=Ke,e.config.delay&&e.config.delay.hide?e._timeout=setTimeout((function(){e._hoverState===Ke&&e.hide()}),e.config.delay.hide):e.hide())},e._isWithActiveTrigger=function(){for(var t in this._activeTrigger)if(this._activeTrigger[t])return!0;return!1},e._getConfig=function(t){var e=n.default(this.element).data();return Object.keys(e).forEach((function(t){-1!==qe.indexOf(t)&&delete e[t]})),"number"==typeof(t=s({},this.constructor.Default,e,"object"==typeof t&&t?t:{})).delay&&(t.delay={show:t.delay,hide:t.delay}),"number"==typeof t.title&&(t.title=t.title.toString()),"number"==typeof t.content&&(t.content=t.content.toString()),h.typeCheckConfig(We,t,this.constructor.DefaultType),t.sanitize&&(t.template=He(t.template,t.whiteList,t.sanitizeFn)),t},e._getDelegateConfig=function(){var t={};if(this.config)for(var e in this.config)this.constructor.Default[e]!==this.config[e]&&(t[e]=this.config[e]);return t},e._cleanTipClass=function(){var t=n.default(this.getTipElement()),e=t.attr("class").match(Ue);null!==e&&e.length&&t.removeClass(e.join(""))},e._handlePopperPlacementChange=function(t){this.tip=t.instance.popper,this._cleanTipClass(),this.addAttachmentClass(this._getAttachment(t.placement))},e._fixTransition=function(){var t=this.getTipElement(),e=this.config.animation;null===t.getAttribute("x-placement")&&(n.default(t).removeClass(Xe),this.config.animation=!1,this.hide(),this.show(),this.config.animation=e)},t._jQueryInterface=function(e){return this.each((function(){var i=n.default(this),o=i.data(je),r="object"==typeof e&&e;if((o||!/dispose|hide/.test(e))&&(o||(o=new t(this,r),i.data(je,o)),"string"==typeof e)){if(void 0===o[e])throw new TypeError('No method named "'+e+'"');o[e]()}}))},r(t,null,[{key:"VERSION",get:function(){return"4.6.1"}},{key:"Default",get:function(){return ei}},{key:"NAME",get:function(){return We}},{key:"DATA_KEY",get:function(){return je}},{key:"Event",get:function(){return ni}},{key:"EVENT_KEY",get:function(){return Ye}},{key:"DefaultType",get:function(){return ii}}]),t}();n.default.fn.tooltip=oi._jQueryInterface,n.default.fn.tooltip.Constructor=oi,n.default.fn.tooltip.noConflict=function(){return n.default.fn.tooltip=Ve,oi._jQueryInterface};var ri="popover",si="bs.popover",ai=".bs.popover",li=n.default.fn.popover,ci=new RegExp("(^|\\s)bs-popover\\S+","g"),hi=s({},oi.Default,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>'}),ui=s({},oi.DefaultType,{content:"(string|element|function)"}),di={HIDE:"hide.bs.popover",HIDDEN:"hidden.bs.popover",SHOW:"show.bs.popover",SHOWN:"shown.bs.popover",INSERTED:"inserted.bs.popover",CLICK:"click.bs.popover",FOCUSIN:"focusin.bs.popover",FOCUSOUT:"focusout.bs.popover",MOUSEENTER:"mouseenter.bs.popover",MOUSELEAVE:"mouseleave.bs.popover"},pi=function(t){var e,i;function o(){return t.apply(this,arguments)||this}i=t,(e=o).prototype=Object.create(i.prototype),e.prototype.constructor=e,a(e,i);var s=o.prototype;return s.isWithContent=function(){return this.getTitle()||this._getContent()},s.addAttachmentClass=function(t){n.default(this.getTipElement()).addClass("bs-popover-"+t)},s.getTipElement=function(){return this.tip=this.tip||n.default(this.config.template)[0],this.tip},s.setContent=function(){var t=n.default(this.getTipElement());this.setElementContent(t.find(".popover-header"),this.getTitle());var e=this._getContent();"function"==typeof e&&(e=e.call(this.element)),this.setElementContent(t.find(".popover-body"),e),t.removeClass("fade show")},s._getContent=function(){return this.element.getAttribute("data-content")||this.config.content},s._cleanTipClass=function(){var t=n.default(this.getTipElement()),e=t.attr("class").match(ci);null!==e&&e.length>0&&t.removeClass(e.join(""))},o._jQueryInterface=function(t){return this.each((function(){var e=n.default(this).data(si),i="object"==typeof t?t:null;if((e||!/dispose|hide/.test(t))&&(e||(e=new o(this,i),n.default(this).data(si,e)),"string"==typeof t)){if(void 0===e[t])throw new TypeError('No method named "'+t+'"');e[t]()}}))},r(o,null,[{key:"VERSION",get:function(){return"4.6.1"}},{key:"Default",get:function(){return hi}},{key:"NAME",get:function(){return ri}},{key:"DATA_KEY",get:function(){return si}},{key:"Event",get:function(){return di}},{key:"EVENT_KEY",get:function(){return ai}},{key:"DefaultType",get:function(){return ui}}]),o}(oi);n.default.fn.popover=pi._jQueryInterface,n.default.fn.popover.Constructor=pi,n.default.fn.popover.noConflict=function(){return n.default.fn.popover=li,pi._jQueryInterface};var fi="scrollspy",mi="bs.scrollspy",gi="."+mi,yi=n.default.fn[fi],vi="active",bi="position",xi=".nav, .list-group",$i=".nav-link",wi={offset:10,method:"auto",target:""},_i={offset:"number",method:"string",target:"(string|element)"},ki=function(){function t(t,e){var i=this;this._element=t,this._scrollElement="BODY"===t.tagName?window:t,this._config=this._getConfig(e),this._selector=this._config.target+" "+".nav-link,"+this._config.target+" .list-group-item,"+this._config.target+" .dropdown-item",this._offsets=[],this._targets=[],this._activeTarget=null,this._scrollHeight=0,n.default(this._scrollElement).on("scroll.bs.scrollspy",(function(t){return i._process(t)})),this.refresh(),this._process()}var e=t.prototype;return e.refresh=function(){var t=this,e=this._scrollElement===this._scrollElement.window?"offset":bi,i="auto"===this._config.method?e:this._config.method,o=i===bi?this._getScrollTop():0;this._offsets=[],this._targets=[],this._scrollHeight=this._getScrollHeight(),[].slice.call(document.querySelectorAll(this._selector)).map((function(t){var e,r=h.getSelectorFromElement(t);if(r&&(e=document.querySelector(r)),e){var s=e.getBoundingClientRect();if(s.width||s.height)return[n.default(e)[i]().top+o,r]}return null})).filter((function(t){return t})).sort((function(t,e){return t[0]-e[0]})).forEach((function(e){t._offsets.push(e[0]),t._targets.push(e[1])}))},e.dispose=function(){n.default.removeData(this._element,mi),n.default(this._scrollElement).off(gi),this._element=null,this._scrollElement=null,this._config=null,this._selector=null,this._offsets=null,this._targets=null,this._activeTarget=null,this._scrollHeight=null},e._getConfig=function(t){if("string"!=typeof(t=s({},wi,"object"==typeof t&&t?t:{})).target&&h.isElement(t.target)){var e=n.default(t.target).attr("id");e||(e=h.getUID(fi),n.default(t.target).attr("id",e)),t.target="#"+e}return h.typeCheckConfig(fi,t,_i),t},e._getScrollTop=function(){return this._scrollElement===window?this._scrollElement.pageYOffset:this._scrollElement.scrollTop},e._getScrollHeight=function(){return this._scrollElement.scrollHeight||Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)},e._getOffsetHeight=function(){return this._scrollElement===window?window.innerHeight:this._scrollElement.getBoundingClientRect().height},e._process=function(){var t=this._getScrollTop()+this._config.offset,e=this._getScrollHeight(),i=this._config.offset+e-this._getOffsetHeight();if(this._scrollHeight!==e&&this.refresh(),t>=i){var n=this._targets[this._targets.length-1];this._activeTarget!==n&&this._activate(n)}else{if(this._activeTarget&&t<this._offsets[0]&&this._offsets[0]>0)return this._activeTarget=null,void this._clear();for(var o=this._offsets.length;o--;){this._activeTarget!==this._targets[o]&&t>=this._offsets[o]&&(void 0===this._offsets[o+1]||t<this._offsets[o+1])&&this._activate(this._targets[o])}}},e._activate=function(t){this._activeTarget=t,this._clear();var e=this._selector.split(",").map((function(e){return e+'[data-target="'+t+'"],'+e+'[href="'+t+'"]'})),i=n.default([].slice.call(document.querySelectorAll(e.join(","))));i.hasClass("dropdown-item")?(i.closest(".dropdown").find(".dropdown-toggle").addClass(vi),i.addClass(vi)):(i.addClass(vi),i.parents(xi).prev(".nav-link, .list-group-item").addClass(vi),i.parents(xi).prev(".nav-item").children($i).addClass(vi)),n.default(this._scrollElement).trigger("activate.bs.scrollspy",{relatedTarget:t})},e._clear=function(){[].slice.call(document.querySelectorAll(this._selector)).filter((function(t){return t.classList.contains(vi)})).forEach((function(t){return t.classList.remove(vi)}))},t._jQueryInterface=function(e){return this.each((function(){var i=n.default(this).data(mi);if(i||(i=new t(this,"object"==typeof e&&e),n.default(this).data(mi,i)),"string"==typeof e){if(void 0===i[e])throw new TypeError('No method named "'+e+'"');i[e]()}}))},r(t,null,[{key:"VERSION",get:function(){return"4.6.1"}},{key:"Default",get:function(){return wi}}]),t}();n.default(window).on("load.bs.scrollspy.data-api",(function(){for(var t=[].slice.call(document.querySelectorAll('[data-spy="scroll"]')),e=t.length;e--;){var i=n.default(t[e]);ki._jQueryInterface.call(i,i.data())}})),n.default.fn[fi]=ki._jQueryInterface,n.default.fn[fi].Constructor=ki,n.default.fn[fi].noConflict=function(){return n.default.fn[fi]=yi,ki._jQueryInterface};var Si="bs.tab",Ci=n.default.fn.tab,Ti="active",Mi="fade",Pi="show",Ei=".active",Ii="> li > .active",Ai=function(){function t(t){this._element=t}var e=t.prototype;return e.show=function(){var t=this;if(!(this._element.parentNode&&this._element.parentNode.nodeType===Node.ELEMENT_NODE&&n.default(this._element).hasClass(Ti)||n.default(this._element).hasClass("disabled"))){var e,i,o=n.default(this._element).closest(".nav, .list-group")[0],r=h.getSelectorFromElement(this._element);if(o){var s="UL"===o.nodeName||"OL"===o.nodeName?Ii:Ei;i=(i=n.default.makeArray(n.default(o).find(s)))[i.length-1]}var a=n.default.Event("hide.bs.tab",{relatedTarget:this._element}),l=n.default.Event("show.bs.tab",{relatedTarget:i});if(i&&n.default(i).trigger(a),n.default(this._element).trigger(l),!l.isDefaultPrevented()&&!a.isDefaultPrevented()){r&&(e=document.querySelector(r)),this._activate(this._element,o);var c=function(){var e=n.default.Event("hidden.bs.tab",{relatedTarget:t._element}),o=n.default.Event("shown.bs.tab",{relatedTarget:i});n.default(i).trigger(e),n.default(t._element).trigger(o)};e?this._activate(e,e.parentNode,c):c()}}},e.dispose=function(){n.default.removeData(this._element,Si),this._element=null},e._activate=function(t,e,i){var o=this,r=(!e||"UL"!==e.nodeName&&"OL"!==e.nodeName?n.default(e).children(Ei):n.default(e).find(Ii))[0],s=i&&r&&n.default(r).hasClass(Mi),a=function(){return o._transitionComplete(t,r,i)};if(r&&s){var l=h.getTransitionDurationFromElement(r);n.default(r).removeClass(Pi).one(h.TRANSITION_END,a).emulateTransitionEnd(l)}else a()},e._transitionComplete=function(t,e,i){if(e){n.default(e).removeClass(Ti);var o=n.default(e.parentNode).find("> .dropdown-menu .active")[0];o&&n.default(o).removeClass(Ti),"tab"===e.getAttribute("role")&&e.setAttribute("aria-selected",!1)}n.default(t).addClass(Ti),"tab"===t.getAttribute("role")&&t.setAttribute("aria-selected",!0),h.reflow(t),t.classList.contains(Mi)&&t.classList.add(Pi);var r=t.parentNode;if(r&&"LI"===r.nodeName&&(r=r.parentNode),r&&n.default(r).hasClass("dropdown-menu")){var s=n.default(t).closest(".dropdown")[0];if(s){var a=[].slice.call(s.querySelectorAll(".dropdown-toggle"));n.default(a).addClass(Ti)}t.setAttribute("aria-expanded",!0)}i&&i()},t._jQueryInterface=function(e){return this.each((function(){var i=n.default(this),o=i.data(Si);if(o||(o=new t(this),i.data(Si,o)),"string"==typeof e){if(void 0===o[e])throw new TypeError('No method named "'+e+'"');o[e]()}}))},r(t,null,[{key:"VERSION",get:function(){return"4.6.1"}}]),t}();n.default(document).on("click.bs.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"], [data-toggle="list"]',(function(t){t.preventDefault(),Ai._jQueryInterface.call(n.default(this),"show")})),n.default.fn.tab=Ai._jQueryInterface,n.default.fn.tab.Constructor=Ai,n.default.fn.tab.noConflict=function(){return n.default.fn.tab=Ci,Ai._jQueryInterface};var Di="toast",Ri="bs.toast",Li=n.default.fn.toast,Oi="hide",zi="show",Fi="showing",Bi="click.dismiss.bs.toast",Ni={animation:!0,autohide:!0,delay:500},Hi={animation:"boolean",autohide:"boolean",delay:"number"},Wi=function(){function t(t,e){this._element=t,this._config=this._getConfig(e),this._timeout=null,this._setListeners()}var e=t.prototype;return e.show=function(){var t=this,e=n.default.Event("show.bs.toast");if(n.default(this._element).trigger(e),!e.isDefaultPrevented()){this._clearTimeout(),this._config.animation&&this._element.classList.add("fade");var i=function(){t._element.classList.remove(Fi),t._element.classList.add(zi),n.default(t._element).trigger("shown.bs.toast"),t._config.autohide&&(t._timeout=setTimeout((function(){t.hide()}),t._config.delay))};if(this._element.classList.remove(Oi),h.reflow(this._element),this._element.classList.add(Fi),this._config.animation){var o=h.getTransitionDurationFromElement(this._element);n.default(this._element).one(h.TRANSITION_END,i).emulateTransitionEnd(o)}else i()}},e.hide=function(){if(this._element.classList.contains(zi)){var t=n.default.Event("hide.bs.toast");n.default(this._element).trigger(t),t.isDefaultPrevented()||this._close()}},e.dispose=function(){this._clearTimeout(),this._element.classList.contains(zi)&&this._element.classList.remove(zi),n.default(this._element).off(Bi),n.default.removeData(this._element,Ri),this._element=null,this._config=null},e._getConfig=function(t){return t=s({},Ni,n.default(this._element).data(),"object"==typeof t&&t?t:{}),h.typeCheckConfig(Di,t,this.constructor.DefaultType),t},e._setListeners=function(){var t=this;n.default(this._element).on(Bi,'[data-dismiss="toast"]',(function(){return t.hide()}))},e._close=function(){var t=this,e=function(){t._element.classList.add(Oi),n.default(t._element).trigger("hidden.bs.toast")};if(this._element.classList.remove(zi),this._config.animation){var i=h.getTransitionDurationFromElement(this._element);n.default(this._element).one(h.TRANSITION_END,e).emulateTransitionEnd(i)}else e()},e._clearTimeout=function(){clearTimeout(this._timeout),this._timeout=null},t._jQueryInterface=function(e){return this.each((function(){var i=n.default(this),o=i.data(Ri);if(o||(o=new t(this,"object"==typeof e&&e),i.data(Ri,o)),"string"==typeof e){if(void 0===o[e])throw new TypeError('No method named "'+e+'"');o[e](this)}}))},r(t,null,[{key:"VERSION",get:function(){return"4.6.1"}},{key:"DefaultType",get:function(){return Hi}},{key:"Default",get:function(){return Ni}}]),t}();n.default.fn.toast=Wi._jQueryInterface,n.default.fn.toast.Constructor=Wi,n.default.fn.toast.noConflict=function(){return n.default.fn.toast=Li,Wi._jQueryInterface},t.Alert=p,t.Button=x,t.Carousel=D,t.Collapse=V,t.Dropdown=ge,t.Modal=Oe,t.Popover=pi,t.Scrollspy=ki,t.Tab=Ai,t.Toast=Wi,t.Tooltip=oi,t.Util=h,Object.defineProperty(t,"__esModule",{value:!0})})),
/*!
 * Bootstrap-select v1.13.18 (https://developer.snapappointments.com/bootstrap-select)
 *
 * Copyright 2012-2020 SnapAppointments, LLC
 * Licensed under MIT (https://github.com/snapappointments/bootstrap-select/blob/master/LICENSE)
 */
function(t,e){void 0===t&&void 0!==window&&(t=window),"function"==typeof define&&define.amd?define(["jquery"],(function(t){return e(t)})):"object"==typeof module&&module.exports?module.exports=e(require("jquery")):e(t.jQuery)}(this,(function(t){!function(t){"use strict";var e=["sanitize","whiteList","sanitizeFn"],i=["background","cite","href","itemtype","longdesc","poster","src","xlink:href"],n={"*":["class","dir","id","lang","role","tabindex","style",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},o=/^(?:(?:https?|mailto|ftp|tel|file):|[^&:/?#]*(?:[/?#]|$))/gi,r=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+/]+=*$/i;function s(e,n){var s=e.nodeName.toLowerCase();if(-1!==t.inArray(s,n))return-1===t.inArray(s,i)||Boolean(e.nodeValue.match(o)||e.nodeValue.match(r));for(var a=t(n).filter((function(t,e){return e instanceof RegExp})),l=0,c=a.length;l<c;l++)if(s.match(a[l]))return!0;return!1}function a(t,e,i){if(i&&"function"==typeof i)return i(t);for(var n=Object.keys(e),o=0,r=t.length;o<r;o++)for(var a=t[o].querySelectorAll("*"),l=0,c=a.length;l<c;l++){var h=a[l],u=h.nodeName.toLowerCase();if(-1!==n.indexOf(u))for(var d=[].slice.call(h.attributes),p=[].concat(e["*"]||[],e[u]||[]),f=0,m=d.length;f<m;f++){var g=d[f];s(g,p)||h.removeAttribute(g.nodeName)}else h.parentNode.removeChild(h)}}"classList"in document.createElement("_")||function(e){if("Element"in e){var i="classList",n=e.Element.prototype,o=Object,r=function(){var e=t(this);return{add:function(t){return t=Array.prototype.slice.call(arguments).join(" "),e.addClass(t)},remove:function(t){return t=Array.prototype.slice.call(arguments).join(" "),e.removeClass(t)},toggle:function(t,i){return e.toggleClass(t,i)},contains:function(t){return e.hasClass(t)}}};if(o.defineProperty){var s={get:r,enumerable:!0,configurable:!0};try{o.defineProperty(n,i,s)}catch(t){void 0!==t.number&&-2146823252!==t.number||(s.enumerable=!1,o.defineProperty(n,i,s))}}else o.prototype.__defineGetter__&&n.__defineGetter__(i,r)}}(window);var l,c,h,u=document.createElement("_");if(u.classList.add("c1","c2"),!u.classList.contains("c2")){var d=DOMTokenList.prototype.add,p=DOMTokenList.prototype.remove;DOMTokenList.prototype.add=function(){Array.prototype.forEach.call(arguments,d.bind(this))},DOMTokenList.prototype.remove=function(){Array.prototype.forEach.call(arguments,p.bind(this))}}if(u.classList.toggle("c3",!1),u.classList.contains("c3")){var f=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(t,e){return 1 in arguments&&!this.contains(t)==!e?e:f.call(this,t)}}function m(t,e){var i,n=t.selectedOptions,o=[];if(e){for(var r=0,s=n.length;r<s;r++)(i=n[r]).disabled||"OPTGROUP"===i.parentNode.tagName&&i.parentNode.disabled||o.push(i);return o}return n}function g(t,e){for(var i,n=[],o=e||t.selectedOptions,r=0,s=o.length;r<s;r++)(i=o[r]).disabled||"OPTGROUP"===i.parentNode.tagName&&i.parentNode.disabled||n.push(i.value);return t.multiple?n:n.length?n[0]:null}u=null,String.prototype.startsWith||(l=function(){try{var t={},e=Object.defineProperty,i=e(t,t,t)&&e}catch(t){}return i}(),c={}.toString,h=function(t){if(null==this)throw new TypeError;var e=String(this);if(t&&"[object RegExp]"==c.call(t))throw new TypeError;var i=e.length,n=String(t),o=n.length,r=arguments.length>1?arguments[1]:void 0,s=r?Number(r):0;s!=s&&(s=0);var a=Math.min(Math.max(s,0),i);if(o+a>i)return!1;for(var l=-1;++l<o;)if(e.charCodeAt(a+l)!=n.charCodeAt(l))return!1;return!0},l?l(String.prototype,"startsWith",{value:h,configurable:!0,writable:!0}):String.prototype.startsWith=h),Object.keys||(Object.keys=function(t,e,i){for(e in i=[],t)i.hasOwnProperty.call(t,e)&&i.push(e);return i}),HTMLSelectElement&&!HTMLSelectElement.prototype.hasOwnProperty("selectedOptions")&&Object.defineProperty(HTMLSelectElement.prototype,"selectedOptions",{get:function(){return this.querySelectorAll(":checked")}});var y={useDefault:!1,_set:t.valHooks.select.set};t.valHooks.select.set=function(e,i){return i&&!y.useDefault&&t(e).data("selected",!0),y._set.apply(this,arguments)};var v=null,b=function(){try{return new Event("change"),!0}catch(t){return!1}}();function x(t,e,i,n){for(var o=["display","subtext","tokens"],r=!1,s=0;s<o.length;s++){var a=o[s],l=t[a];if(l&&(l=l.toString(),"display"===a&&(l=l.replace(/<[^>]+>/g,"")),n&&(l=C(l)),l=l.toUpperCase(),r="contains"===i?l.indexOf(e)>=0:l.startsWith(e)))break}return r}function $(t){return parseInt(t,10)||0}t.fn.triggerNative=function(t){var e,i=this[0];i.dispatchEvent?(b?e=new Event(t,{bubbles:!0}):(e=document.createEvent("Event")).initEvent(t,!0,!1),i.dispatchEvent(e)):i.fireEvent?((e=document.createEventObject()).eventType=t,i.fireEvent("on"+t,e)):this.trigger(t)};var w={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"},_=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,k=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\u1ab0-\\u1aff\\u1dc0-\\u1dff]","g");function S(t){return w[t]}function C(t){return(t=t.toString())&&t.replace(_,S).replace(k,"")}var T,M,P,E,I,A=(T={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},M=function(t){return T[t]},P="(?:"+Object.keys(T).join("|")+")",E=RegExp(P),I=RegExp(P,"g"),function(t){return t=null==t?"":""+t,E.test(t)?t.replace(I,M):t}),D={32:" ",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",65:"A",66:"B",67:"C",68:"D",69:"E",70:"F",71:"G",72:"H",73:"I",74:"J",75:"K",76:"L",77:"M",78:"N",79:"O",80:"P",81:"Q",82:"R",83:"S",84:"T",85:"U",86:"V",87:"W",88:"X",89:"Y",90:"Z",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9"},R=27,L=13,O=32,z=9,F=38,B=40,N={success:!1,major:"3"};try{N.full=(t.fn.dropdown.Constructor.VERSION||"").split(" ")[0].split("."),N.major=N.full[0],N.success=!0}catch(t){}var H=0,W=".bs.select",j={DISABLED:"disabled",DIVIDER:"divider",SHOW:"open",DROPUP:"dropup",MENU:"dropdown-menu",MENURIGHT:"dropdown-menu-right",MENULEFT:"dropdown-menu-left",BUTTONCLASS:"btn-default",POPOVERHEADER:"popover-title",ICONBASE:"glyphicon",TICKICON:"glyphicon-ok"},Y={MENU:"."+j.MENU},V={div:document.createElement("div"),span:document.createElement("span"),i:document.createElement("i"),subtext:document.createElement("small"),a:document.createElement("a"),li:document.createElement("li"),whitespace:document.createTextNode(" "),fragment:document.createDocumentFragment()};V.noResults=V.li.cloneNode(!1),V.noResults.className="no-results",V.a.setAttribute("role","option"),V.a.className="dropdown-item",V.subtext.className="text-muted",V.text=V.span.cloneNode(!1),V.text.className="text",V.checkMark=V.span.cloneNode(!1);var U=new RegExp(F+"|"+B),q=new RegExp("^"+z+"$|"+R),X={li:function(t,e,i){var n=V.li.cloneNode(!1);return t&&(1===t.nodeType||11===t.nodeType?n.appendChild(t):n.innerHTML=t),void 0!==e&&""!==e&&(n.className=e),null!=i&&n.classList.add("optgroup-"+i),n},a:function(t,e,i){var n=V.a.cloneNode(!0);return t&&(11===t.nodeType?n.appendChild(t):n.insertAdjacentHTML("beforeend",t)),void 0!==e&&""!==e&&n.classList.add.apply(n.classList,e.split(/\s+/)),i&&n.setAttribute("style",i),n},text:function(t,e){var i,n,o=V.text.cloneNode(!1);if(t.content)o.innerHTML=t.content;else{if(o.textContent=t.text,t.icon){var r=V.whitespace.cloneNode(!1);(n=(!0===e?V.i:V.span).cloneNode(!1)).className=this.options.iconBase+" "+t.icon,V.fragment.appendChild(n),V.fragment.appendChild(r)}t.subtext&&((i=V.subtext.cloneNode(!1)).textContent=t.subtext,o.appendChild(i))}if(!0===e)for(;o.childNodes.length>0;)V.fragment.appendChild(o.childNodes[0]);else V.fragment.appendChild(o);return V.fragment},label:function(t){var e,i,n=V.text.cloneNode(!1);if(n.innerHTML=t.display,t.icon){var o=V.whitespace.cloneNode(!1);(i=V.span.cloneNode(!1)).className=this.options.iconBase+" "+t.icon,V.fragment.appendChild(i),V.fragment.appendChild(o)}return t.subtext&&((e=V.subtext.cloneNode(!1)).textContent=t.subtext,n.appendChild(e)),V.fragment.appendChild(n),V.fragment}};function G(t,e){t.length||(V.noResults.innerHTML=this.options.noneResultsText.replace("{0}",'"'+A(e)+'"'),this.$menuInner[0].firstChild.appendChild(V.noResults))}var Z=function(e,i){var n=this;y.useDefault||(t.valHooks.select.set=y._set,y.useDefault=!0),this.$element=t(e),this.$newElement=null,this.$button=null,this.$menu=null,this.options=i,this.selectpicker={main:{},search:{},current:{},view:{},isSearching:!1,keydown:{keyHistory:"",resetKeyHistory:{start:function(){return setTimeout((function(){n.selectpicker.keydown.keyHistory=""}),800)}}}},this.sizeInfo={},null===this.options.title&&(this.options.title=this.$element.attr("title"));var o=this.options.windowPadding;"number"==typeof o&&(this.options.windowPadding=[o,o,o,o]),this.val=Z.prototype.val,this.render=Z.prototype.render,this.refresh=Z.prototype.refresh,this.setStyle=Z.prototype.setStyle,this.selectAll=Z.prototype.selectAll,this.deselectAll=Z.prototype.deselectAll,this.destroy=Z.prototype.destroy,this.remove=Z.prototype.remove,this.show=Z.prototype.show,this.hide=Z.prototype.hide,this.init()};function K(i){var n,o=arguments,r=i;if([].shift.apply(o),!N.success){try{N.full=(t.fn.dropdown.Constructor.VERSION||"").split(" ")[0].split(".")}catch(t){Z.BootstrapVersion?N.full=Z.BootstrapVersion.split(" ")[0].split("."):(N.full=[N.major,"0","0"],console.warn("There was an issue retrieving Bootstrap's version. Ensure Bootstrap is being loaded before bootstrap-select and there is no namespace collision. If loading Bootstrap asynchronously, the version may need to be manually specified via $.fn.selectpicker.Constructor.BootstrapVersion.",t))}N.major=N.full[0],N.success=!0}if("4"===N.major){var s=[];Z.DEFAULTS.style===j.BUTTONCLASS&&s.push({name:"style",className:"BUTTONCLASS"}),Z.DEFAULTS.iconBase===j.ICONBASE&&s.push({name:"iconBase",className:"ICONBASE"}),Z.DEFAULTS.tickIcon===j.TICKICON&&s.push({name:"tickIcon",className:"TICKICON"}),j.DIVIDER="dropdown-divider",j.SHOW="show",j.BUTTONCLASS="btn-light",j.POPOVERHEADER="popover-header",j.ICONBASE="",j.TICKICON="bs-ok-default";for(var a=0;a<s.length;a++){i=s[a];Z.DEFAULTS[i.name]=j[i.className]}}var l=this.each((function(){var i=t(this);if(i.is("select")){var s=i.data("selectpicker"),a="object"==typeof r&&r;if(s){if(a)for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(s.options[l]=a[l])}else{var c=i.data();for(var h in c)Object.prototype.hasOwnProperty.call(c,h)&&-1!==t.inArray(h,e)&&delete c[h];var u=t.extend({},Z.DEFAULTS,t.fn.selectpicker.defaults||{},c,a);u.template=t.extend({},Z.DEFAULTS.template,t.fn.selectpicker.defaults?t.fn.selectpicker.defaults.template:{},c.template,a.template),i.data("selectpicker",s=new Z(this,u))}"string"==typeof r&&(n=s[r]instanceof Function?s[r].apply(s,o):s.options[r])}}));return void 0!==n?n:l}Z.VERSION="1.13.18",Z.DEFAULTS={noneSelectedText:"Nothing selected",noneResultsText:"No results matched {0}",countSelectedText:function(t,e){return 1==t?"{0} item selected":"{0} items selected"},maxOptionsText:function(t,e){return[1==t?"Limit reached ({n} item max)":"Limit reached ({n} items max)",1==e?"Group limit reached ({n} item max)":"Group limit reached ({n} items max)"]},selectAllText:"Select All",deselectAllText:"Deselect All",doneButton:!1,doneButtonText:"Close",multipleSeparator:", ",styleBase:"btn",style:j.BUTTONCLASS,size:"auto",title:null,selectedTextFormat:"values",width:!1,container:!1,hideDisabled:!1,showSubtext:!1,showIcon:!0,showContent:!0,dropupAuto:!0,header:!1,liveSearch:!1,liveSearchPlaceholder:null,liveSearchNormalize:!1,liveSearchStyle:"contains",actionsBox:!1,iconBase:j.ICONBASE,tickIcon:j.TICKICON,showTick:!1,template:{caret:'<span class="caret"></span>'},maxOptions:!1,mobile:!1,selectOnTab:!1,dropdownAlignRight:!1,windowPadding:0,virtualScroll:600,display:!1,sanitize:!0,sanitizeFn:null,whiteList:n},Z.prototype={constructor:Z,init:function(){var t=this,e=this.$element.attr("id"),i=this.$element[0],n=i.form;H++,this.selectId="bs-select-"+H,i.classList.add("bs-select-hidden"),this.multiple=this.$element.prop("multiple"),this.autofocus=this.$element.prop("autofocus"),i.classList.contains("show-tick")&&(this.options.showTick=!0),this.$newElement=this.createDropdown(),this.buildData(),this.$element.after(this.$newElement).prependTo(this.$newElement),n&&null===i.form&&(n.id||(n.id="form-"+this.selectId),i.setAttribute("form",n.id)),this.$button=this.$newElement.children("button"),this.$menu=this.$newElement.children(Y.MENU),this.$menuInner=this.$menu.children(".inner"),this.$searchbox=this.$menu.find("input"),i.classList.remove("bs-select-hidden"),!0===this.options.dropdownAlignRight&&this.$menu[0].classList.add(j.MENURIGHT),void 0!==e&&this.$button.attr("data-id",e),this.checkDisabled(),this.clickListener(),this.options.liveSearch?(this.liveSearchListener(),this.focusedParent=this.$searchbox[0]):this.focusedParent=this.$menuInner[0],this.setStyle(),this.render(),this.setWidth(),this.options.container?this.selectPosition():this.$element.on("hide.bs.select",(function(){if(t.isVirtual()){var e=t.$menuInner[0],i=e.firstChild.cloneNode(!1);e.replaceChild(i,e.firstChild),e.scrollTop=0}})),this.$menu.data("this",this),this.$newElement.data("this",this),this.options.mobile&&this.mobile(),this.$newElement.on({"hide.bs.dropdown":function(e){t.$element.trigger("hide.bs.select",e)},"hidden.bs.dropdown":function(e){t.$element.trigger("hidden.bs.select",e)},"show.bs.dropdown":function(e){t.$element.trigger("show.bs.select",e)},"shown.bs.dropdown":function(e){t.$element.trigger("shown.bs.select",e)}}),i.hasAttribute("required")&&this.$element.on("invalid.bs.select",(function(){t.$button[0].classList.add("bs-invalid"),t.$element.on("shown.bs.select.invalid",(function(){t.$element.val(t.$element.val()).off("shown.bs.select.invalid")})).on("rendered.bs.select",(function(){this.validity.valid&&t.$button[0].classList.remove("bs-invalid"),t.$element.off("rendered.bs.select")})),t.$button.on("blur.bs.select",(function(){t.$element.trigger("focus").trigger("blur"),t.$button.off("blur.bs.select")}))})),setTimeout((function(){t.buildList(),t.$element.trigger("loaded.bs.select")}))},createDropdown:function(){var e=this.multiple||this.options.showTick?" show-tick":"",i=this.multiple?' aria-multiselectable="true"':"",n="",o=this.autofocus?" autofocus":"";N.major<4&&this.$element.parent().hasClass("input-group")&&(n=" input-group-btn");var r,s="",a="",l="",c="";return this.options.header&&(s='<div class="'+j.POPOVERHEADER+'"><button type="button" class="close" aria-hidden="true">&times;</button>'+this.options.header+"</div>"),this.options.liveSearch&&(a='<div class="bs-searchbox"><input type="search" class="form-control" autocomplete="off"'+(null===this.options.liveSearchPlaceholder?"":' placeholder="'+A(this.options.liveSearchPlaceholder)+'"')+' role="combobox" aria-label="Search" aria-controls="'+this.selectId+'" aria-autocomplete="list"></div>'),this.multiple&&this.options.actionsBox&&(l='<div class="bs-actionsbox"><div class="btn-group btn-group-sm btn-block"><button type="button" class="actions-btn bs-select-all btn '+j.BUTTONCLASS+'">'+this.options.selectAllText+'</button><button type="button" class="actions-btn bs-deselect-all btn '+j.BUTTONCLASS+'">'+this.options.deselectAllText+"</button></div></div>"),this.multiple&&this.options.doneButton&&(c='<div class="bs-donebutton"><div class="btn-group btn-block"><button type="button" class="btn btn-sm '+j.BUTTONCLASS+'">'+this.options.doneButtonText+"</button></div></div>"),r='<div class="dropdown bootstrap-select'+e+n+'"><button type="button" tabindex="-1" class="'+this.options.styleBase+' dropdown-toggle" '+("static"===this.options.display?'data-display="static"':"")+'data-toggle="dropdown"'+o+' role="combobox" aria-owns="'+this.selectId+'" aria-haspopup="listbox" aria-expanded="false"><div class="filter-option"><div class="filter-option-inner"><div class="filter-option-inner-inner"></div></div> </div>'+("4"===N.major?"":'<span class="bs-caret">'+this.options.template.caret+"</span>")+'</button><div class="'+j.MENU+" "+("4"===N.major?"":j.SHOW)+'">'+s+a+l+'<div class="inner '+j.SHOW+'" role="listbox" id="'+this.selectId+'" tabindex="-1" '+i+'><ul class="'+j.MENU+" inner "+("4"===N.major?j.SHOW:"")+'" role="presentation"></ul></div>'+c+"</div></div>",t(r)},setPositionData:function(){this.selectpicker.view.canHighlight=[],this.selectpicker.view.size=0,this.selectpicker.view.firstHighlightIndex=!1;for(var t=0;t<this.selectpicker.current.data.length;t++){var e=this.selectpicker.current.data[t],i=!0;"divider"===e.type?(i=!1,e.height=this.sizeInfo.dividerHeight):"optgroup-label"===e.type?(i=!1,e.height=this.sizeInfo.dropdownHeaderHeight):e.height=this.sizeInfo.liHeight,e.disabled&&(i=!1),this.selectpicker.view.canHighlight.push(i),i&&(this.selectpicker.view.size++,e.posinset=this.selectpicker.view.size,!1===this.selectpicker.view.firstHighlightIndex&&(this.selectpicker.view.firstHighlightIndex=t)),e.position=(0===t?0:this.selectpicker.current.data[t-1].position)+e.height}},isVirtual:function(){return!1!==this.options.virtualScroll&&this.selectpicker.main.elements.length>=this.options.virtualScroll||!0===this.options.virtualScroll},createView:function(e,i,n){var o,r,s=this,l=0,c=[];if(this.selectpicker.isSearching=e,this.selectpicker.current=e?this.selectpicker.search:this.selectpicker.main,this.setPositionData(),i)if(n)l=this.$menuInner[0].scrollTop;else if(!s.multiple){var h=s.$element[0],u=(h.options[h.selectedIndex]||{}).liIndex;if("number"==typeof u&&!1!==s.options.size){var d=s.selectpicker.main.data[u],p=d&&d.position;p&&(l=p-(s.sizeInfo.menuInnerHeight+s.sizeInfo.liHeight)/2)}}function f(t,i){var n,l,h,u,d,p,f,m,g,y,v=s.selectpicker.current.elements.length,b=[],x=!0,$=s.isVirtual();s.selectpicker.view.scrollTop=t,n=Math.ceil(s.sizeInfo.menuInnerHeight/s.sizeInfo.liHeight*1.5),l=Math.round(v/n)||1;for(var w=0;w<l;w++){var _=(w+1)*n;if(w===l-1&&(_=v),b[w]=[w*n+(w?1:0),_],!v)break;void 0===d&&t-1<=s.selectpicker.current.data[_-1].position-s.sizeInfo.menuInnerHeight&&(d=w)}if(void 0===d&&(d=0),p=[s.selectpicker.view.position0,s.selectpicker.view.position1],h=Math.max(0,d-1),u=Math.min(l-1,d+1),s.selectpicker.view.position0=!1===$?0:Math.max(0,b[h][0])||0,s.selectpicker.view.position1=!1===$?v:Math.min(v,b[u][1])||0,f=p[0]!==s.selectpicker.view.position0||p[1]!==s.selectpicker.view.position1,void 0!==s.activeIndex&&(r=s.selectpicker.main.elements[s.prevActiveIndex],c=s.selectpicker.main.elements[s.activeIndex],o=s.selectpicker.main.elements[s.selectedIndex],i&&(s.activeIndex!==s.selectedIndex&&s.defocusItem(c),s.activeIndex=void 0),s.activeIndex&&s.activeIndex!==s.selectedIndex&&s.defocusItem(o)),void 0!==s.prevActiveIndex&&s.prevActiveIndex!==s.activeIndex&&s.prevActiveIndex!==s.selectedIndex&&s.defocusItem(r),(i||f)&&(m=s.selectpicker.view.visibleElements?s.selectpicker.view.visibleElements.slice():[],s.selectpicker.view.visibleElements=!1===$?s.selectpicker.current.elements:s.selectpicker.current.elements.slice(s.selectpicker.view.position0,s.selectpicker.view.position1),s.setOptionStatus(),(e||!1===$&&i)&&(g=m,y=s.selectpicker.view.visibleElements,x=!(g.length===y.length&&g.every((function(t,e){return t===y[e]})))),(i||!0===$)&&x)){var k,S,C=s.$menuInner[0],T=document.createDocumentFragment(),M=C.firstChild.cloneNode(!1),P=s.selectpicker.view.visibleElements,E=[];C.replaceChild(M,C.firstChild);w=0;for(var I=P.length;w<I;w++){var A,D,R=P[w];s.options.sanitize&&(A=R.lastChild)&&(D=s.selectpicker.current.data[w+s.selectpicker.view.position0])&&D.content&&!D.sanitized&&(E.push(A),D.sanitized=!0),T.appendChild(R)}if(s.options.sanitize&&E.length&&a(E,s.options.whiteList,s.options.sanitizeFn),!0===$?(k=0===s.selectpicker.view.position0?0:s.selectpicker.current.data[s.selectpicker.view.position0-1].position,S=s.selectpicker.view.position1>v-1?0:s.selectpicker.current.data[v-1].position-s.selectpicker.current.data[s.selectpicker.view.position1-1].position,C.firstChild.style.marginTop=k+"px",C.firstChild.style.marginBottom=S+"px"):(C.firstChild.style.marginTop=0,C.firstChild.style.marginBottom=0),C.firstChild.appendChild(T),!0===$&&s.sizeInfo.hasScrollBar){var L=C.firstChild.offsetWidth;if(i&&L<s.sizeInfo.menuInnerInnerWidth&&s.sizeInfo.totalMenuWidth>s.sizeInfo.selectWidth)C.firstChild.style.minWidth=s.sizeInfo.menuInnerInnerWidth+"px";else if(L>s.sizeInfo.menuInnerInnerWidth){s.$menu[0].style.minWidth=0;var O=C.firstChild.offsetWidth;O>s.sizeInfo.menuInnerInnerWidth&&(s.sizeInfo.menuInnerInnerWidth=O,C.firstChild.style.minWidth=s.sizeInfo.menuInnerInnerWidth+"px"),s.$menu[0].style.minWidth=""}}}if(s.prevActiveIndex=s.activeIndex,s.options.liveSearch){if(e&&i){var z,F=0;s.selectpicker.view.canHighlight[F]||(F=1+s.selectpicker.view.canHighlight.slice(1).indexOf(!0)),z=s.selectpicker.view.visibleElements[F],s.defocusItem(s.selectpicker.view.currentActive),s.activeIndex=(s.selectpicker.current.data[F]||{}).index,s.focusItem(z)}}else s.$menuInner.trigger("focus")}f(l,!0),this.$menuInner.off("scroll.createView").on("scroll.createView",(function(t,e){s.noScroll||f(this.scrollTop,e),s.noScroll=!1})),t(window).off("resize.bs.select."+this.selectId+".createView").on("resize.bs.select."+this.selectId+".createView",(function(){s.$newElement.hasClass(j.SHOW)&&f(s.$menuInner[0].scrollTop)}))},focusItem:function(t,e,i){if(t){e=e||this.selectpicker.main.data[this.activeIndex];var n=t.firstChild;n&&(n.setAttribute("aria-setsize",this.selectpicker.view.size),n.setAttribute("aria-posinset",e.posinset),!0!==i&&(this.focusedParent.setAttribute("aria-activedescendant",n.id),t.classList.add("active"),n.classList.add("active")))}},defocusItem:function(t){t&&(t.classList.remove("active"),t.firstChild&&t.firstChild.classList.remove("active"))},setPlaceholder:function(){var t=this,e=!1;if(this.options.title&&!this.multiple){this.selectpicker.view.titleOption||(this.selectpicker.view.titleOption=document.createElement("option")),e=!0;var i=this.$element[0],n=!1,o=!this.selectpicker.view.titleOption.parentNode,r=i.selectedIndex,s=i.options[r],a=window.performance&&window.performance.getEntriesByType("navigation"),l=a&&a.length?"back_forward"!==a[0].type:2!==window.performance.navigation.type;o&&(this.selectpicker.view.titleOption.className="bs-title-option",this.selectpicker.view.titleOption.value="",n=!s||0===r&&!1===s.defaultSelected&&void 0===this.$element.data("selected")),(o||0!==this.selectpicker.view.titleOption.index)&&i.insertBefore(this.selectpicker.view.titleOption,i.firstChild),n&&l?i.selectedIndex=0:"complete"!==document.readyState&&window.addEventListener("pageshow",(function(){t.selectpicker.view.displayedValue!==i.value&&t.render()}))}return e},buildData:function(){var t=':not([hidden]):not([data-hidden="true"])',e=[],i=0,n=this.setPlaceholder()?1:0;this.options.hideDisabled&&(t+=":not(:disabled)");var o=this.$element[0].querySelectorAll("select > *"+t);function r(t){var i=e[e.length-1];i&&"divider"===i.type&&(i.optID||t.optID)||((t=t||{}).type="divider",e.push(t))}function s(t,i){if((i=i||{}).divider="true"===t.getAttribute("data-divider"),i.divider)r({optID:i.optID});else{var n=e.length,o=t.style.cssText,s=o?A(o):"",a=(t.className||"")+(i.optgroupClass||"");i.optID&&(a="opt "+a),i.optionClass=a.trim(),i.inlineStyle=s,i.text=t.textContent,i.content=t.getAttribute("data-content"),i.tokens=t.getAttribute("data-tokens"),i.subtext=t.getAttribute("data-subtext"),i.icon=t.getAttribute("data-icon"),t.liIndex=n,i.display=i.content||i.text,i.type="option",i.index=n,i.option=t,i.selected=!!t.selected,i.disabled=i.disabled||!!t.disabled,e.push(i)}}function a(o,a){var l=a[o],c=!(o-1<n)&&a[o-1],h=a[o+1],u=l.querySelectorAll("option"+t);if(u.length){var d,p,f={display:A(l.label),subtext:l.getAttribute("data-subtext"),icon:l.getAttribute("data-icon"),type:"optgroup-label",optgroupClass:" "+(l.className||"")};i++,c&&r({optID:i}),f.optID=i,e.push(f);for(var m=0,g=u.length;m<g;m++){var y=u[m];0===m&&(p=(d=e.length-1)+g),s(y,{headerIndex:d,lastIndex:p,optID:f.optID,optgroupClass:f.optgroupClass,disabled:l.disabled})}h&&r({optID:i})}}for(var l=o.length,c=n;c<l;c++){var h=o[c];"OPTGROUP"!==h.tagName?s(h,{}):a(c,o)}this.selectpicker.main.data=this.selectpicker.current.data=e},buildList:function(){var t=this,e=this.selectpicker.main.data,i=[],n=0;function o(e){var o,r=0;switch(e.type){case"divider":o=X.li(!1,j.DIVIDER,e.optID?e.optID+"div":void 0);break;case"option":(o=X.li(X.a(X.text.call(t,e),e.optionClass,e.inlineStyle),"",e.optID)).firstChild&&(o.firstChild.id=t.selectId+"-"+e.index);break;case"optgroup-label":o=X.li(X.label.call(t,e),"dropdown-header"+e.optgroupClass,e.optID)}e.element=o,i.push(o),e.display&&(r+=e.display.length),e.subtext&&(r+=e.subtext.length),e.icon&&(r+=1),r>n&&(n=r,t.selectpicker.view.widestOption=i[i.length-1])}!t.options.showTick&&!t.multiple||V.checkMark.parentNode||(V.checkMark.className=this.options.iconBase+" "+t.options.tickIcon+" check-mark",V.a.appendChild(V.checkMark));for(var r=e.length,s=0;s<r;s++){o(e[s])}this.selectpicker.main.elements=this.selectpicker.current.elements=i},findLis:function(){return this.$menuInner.find(".inner > li")},render:function(){var t,e,i=this,n=this.$element[0],o=this.setPlaceholder()&&0===n.selectedIndex,r=m(n,this.options.hideDisabled),s=r.length,l=this.$button[0],c=l.querySelector(".filter-option-inner-inner"),h=document.createTextNode(this.options.multipleSeparator),u=V.fragment.cloneNode(!1),d=!1;if(l.classList.toggle("bs-placeholder",i.multiple?!s:!g(n,r)),i.multiple||1!==r.length||(i.selectpicker.view.displayedValue=g(n,r)),"static"===this.options.selectedTextFormat)u=X.text.call(this,{text:this.options.title},!0);else if((t=this.multiple&&-1!==this.options.selectedTextFormat.indexOf("count")&&s>1)&&(t=(e=this.options.selectedTextFormat.split(">")).length>1&&s>e[1]||1===e.length&&s>=2),!1===t){if(!o){for(var p=0;p<s&&p<50;p++){var f=r[p],y=this.selectpicker.main.data[f.liIndex],v={};this.multiple&&p>0&&u.appendChild(h.cloneNode(!1)),f.title?v.text=f.title:y&&(y.content&&i.options.showContent?(v.content=y.content.toString(),d=!0):(i.options.showIcon&&(v.icon=y.icon),i.options.showSubtext&&!i.multiple&&y.subtext&&(v.subtext=" "+y.subtext),v.text=f.textContent.trim())),u.appendChild(X.text.call(this,v,!0))}s>49&&u.appendChild(document.createTextNode("..."))}}else{var b=':not([hidden]):not([data-hidden="true"]):not([data-divider="true"])';this.options.hideDisabled&&(b+=":not(:disabled)");var x=this.$element[0].querySelectorAll("select > option"+b+", optgroup"+b+" option"+b).length,$="function"==typeof this.options.countSelectedText?this.options.countSelectedText(s,x):this.options.countSelectedText;u=X.text.call(this,{text:$.replace("{0}",s.toString()).replace("{1}",x.toString())},!0)}if(null==this.options.title&&(this.options.title=this.$element.attr("title")),u.childNodes.length||(u=X.text.call(this,{text:void 0!==this.options.title?this.options.title:this.options.noneSelectedText},!0)),l.title=u.textContent.replace(/<[^>]*>?/g,"").trim(),this.options.sanitize&&d&&a([u],i.options.whiteList,i.options.sanitizeFn),c.innerHTML="",c.appendChild(u),N.major<4&&this.$newElement[0].classList.contains("bs3-has-addon")){var w=l.querySelector(".filter-expand"),_=c.cloneNode(!0);_.className="filter-expand",w?l.replaceChild(_,w):l.appendChild(_)}this.$element.trigger("rendered.bs.select")},setStyle:function(t,e){var i,n=this.$button[0],o=this.$newElement[0],r=this.options.style.trim();this.$element.attr("class")&&this.$newElement.addClass(this.$element.attr("class").replace(/selectpicker|mobile-device|bs-select-hidden|validate\[.*\]/gi,"")),N.major<4&&(o.classList.add("bs3"),o.parentNode.classList&&o.parentNode.classList.contains("input-group")&&(o.previousElementSibling||o.nextElementSibling)&&(o.previousElementSibling||o.nextElementSibling).classList.contains("input-group-addon")&&o.classList.add("bs3-has-addon")),i=t?t.trim():r,"add"==e?i&&n.classList.add.apply(n.classList,i.split(" ")):"remove"==e?i&&n.classList.remove.apply(n.classList,i.split(" ")):(r&&n.classList.remove.apply(n.classList,r.split(" ")),i&&n.classList.add.apply(n.classList,i.split(" ")))},liHeight:function(e){if(e||!1!==this.options.size&&!Object.keys(this.sizeInfo).length){var i,n=V.div.cloneNode(!1),o=V.div.cloneNode(!1),r=V.div.cloneNode(!1),s=document.createElement("ul"),a=V.li.cloneNode(!1),l=V.li.cloneNode(!1),c=V.a.cloneNode(!1),h=V.span.cloneNode(!1),u=this.options.header&&this.$menu.find("."+j.POPOVERHEADER).length>0?this.$menu.find("."+j.POPOVERHEADER)[0].cloneNode(!0):null,d=this.options.liveSearch?V.div.cloneNode(!1):null,p=this.options.actionsBox&&this.multiple&&this.$menu.find(".bs-actionsbox").length>0?this.$menu.find(".bs-actionsbox")[0].cloneNode(!0):null,f=this.options.doneButton&&this.multiple&&this.$menu.find(".bs-donebutton").length>0?this.$menu.find(".bs-donebutton")[0].cloneNode(!0):null,m=this.$element.find("option")[0];if(this.sizeInfo.selectWidth=this.$newElement[0].offsetWidth,h.className="text",c.className="dropdown-item "+(m?m.className:""),n.className=this.$menu[0].parentNode.className+" "+j.SHOW,n.style.width=0,"auto"===this.options.width&&(o.style.minWidth=0),o.className=j.MENU+" "+j.SHOW,r.className="inner "+j.SHOW,s.className=j.MENU+" inner "+("4"===N.major?j.SHOW:""),a.className=j.DIVIDER,l.className="dropdown-header",h.appendChild(document.createTextNode("​")),this.selectpicker.current.data.length)for(var g=0;g<this.selectpicker.current.data.length;g++){var y=this.selectpicker.current.data[g];if("option"===y.type){i=y.element;break}}else i=V.li.cloneNode(!1),c.appendChild(h),i.appendChild(c);if(l.appendChild(h.cloneNode(!0)),this.selectpicker.view.widestOption&&s.appendChild(this.selectpicker.view.widestOption.cloneNode(!0)),s.appendChild(i),s.appendChild(a),s.appendChild(l),u&&o.appendChild(u),d){var v=document.createElement("input");d.className="bs-searchbox",v.className="form-control",d.appendChild(v),o.appendChild(d)}p&&o.appendChild(p),r.appendChild(s),o.appendChild(r),f&&o.appendChild(f),n.appendChild(o),document.body.appendChild(n);var b,x=i.offsetHeight,w=l?l.offsetHeight:0,_=u?u.offsetHeight:0,k=d?d.offsetHeight:0,S=p?p.offsetHeight:0,C=f?f.offsetHeight:0,T=t(a).outerHeight(!0),M=!!window.getComputedStyle&&window.getComputedStyle(o),P=o.offsetWidth,E=M?null:t(o),I={vert:$(M?M.paddingTop:E.css("paddingTop"))+$(M?M.paddingBottom:E.css("paddingBottom"))+$(M?M.borderTopWidth:E.css("borderTopWidth"))+$(M?M.borderBottomWidth:E.css("borderBottomWidth")),horiz:$(M?M.paddingLeft:E.css("paddingLeft"))+$(M?M.paddingRight:E.css("paddingRight"))+$(M?M.borderLeftWidth:E.css("borderLeftWidth"))+$(M?M.borderRightWidth:E.css("borderRightWidth"))},A={vert:I.vert+$(M?M.marginTop:E.css("marginTop"))+$(M?M.marginBottom:E.css("marginBottom"))+2,horiz:I.horiz+$(M?M.marginLeft:E.css("marginLeft"))+$(M?M.marginRight:E.css("marginRight"))+2};r.style.overflowY="scroll",b=o.offsetWidth-P,document.body.removeChild(n),this.sizeInfo.liHeight=x,this.sizeInfo.dropdownHeaderHeight=w,this.sizeInfo.headerHeight=_,this.sizeInfo.searchHeight=k,this.sizeInfo.actionsHeight=S,this.sizeInfo.doneButtonHeight=C,this.sizeInfo.dividerHeight=T,this.sizeInfo.menuPadding=I,this.sizeInfo.menuExtras=A,this.sizeInfo.menuWidth=P,this.sizeInfo.menuInnerInnerWidth=P-I.horiz,this.sizeInfo.totalMenuWidth=this.sizeInfo.menuWidth,this.sizeInfo.scrollBarWidth=b,this.sizeInfo.selectHeight=this.$newElement[0].offsetHeight,this.setPositionData()}},getSelectPosition:function(){var e,i=this,n=t(window),o=i.$newElement.offset(),r=t(i.options.container);i.options.container&&r.length&&!r.is("body")?((e=r.offset()).top+=parseInt(r.css("borderTopWidth")),e.left+=parseInt(r.css("borderLeftWidth"))):e={top:0,left:0};var s=i.options.windowPadding;this.sizeInfo.selectOffsetTop=o.top-e.top-n.scrollTop(),this.sizeInfo.selectOffsetBot=n.height()-this.sizeInfo.selectOffsetTop-this.sizeInfo.selectHeight-e.top-s[2],this.sizeInfo.selectOffsetLeft=o.left-e.left-n.scrollLeft(),this.sizeInfo.selectOffsetRight=n.width()-this.sizeInfo.selectOffsetLeft-this.sizeInfo.selectWidth-e.left-s[1],this.sizeInfo.selectOffsetTop-=s[0],this.sizeInfo.selectOffsetLeft-=s[3]},setMenuSize:function(t){this.getSelectPosition();var e,i,n,o,r,s,a,l,c=this.sizeInfo.selectWidth,h=this.sizeInfo.liHeight,u=this.sizeInfo.headerHeight,d=this.sizeInfo.searchHeight,p=this.sizeInfo.actionsHeight,f=this.sizeInfo.doneButtonHeight,m=this.sizeInfo.dividerHeight,g=this.sizeInfo.menuPadding,y=0;if(this.options.dropupAuto&&(a=h*this.selectpicker.current.elements.length+g.vert,l=this.sizeInfo.selectOffsetTop-this.sizeInfo.selectOffsetBot>this.sizeInfo.menuExtras.vert&&a+this.sizeInfo.menuExtras.vert+50>this.sizeInfo.selectOffsetBot,!0===this.selectpicker.isSearching&&(l=this.selectpicker.dropup),this.$newElement.toggleClass(j.DROPUP,l),this.selectpicker.dropup=l),"auto"===this.options.size)o=this.selectpicker.current.elements.length>3?3*this.sizeInfo.liHeight+this.sizeInfo.menuExtras.vert-2:0,i=this.sizeInfo.selectOffsetBot-this.sizeInfo.menuExtras.vert,n=o+u+d+p+f,s=Math.max(o-g.vert,0),this.$newElement.hasClass(j.DROPUP)&&(i=this.sizeInfo.selectOffsetTop-this.sizeInfo.menuExtras.vert),r=i,e=i-u-d-p-f-g.vert;else if(this.options.size&&"auto"!=this.options.size&&this.selectpicker.current.elements.length>this.options.size){for(var v=0;v<this.options.size;v++)"divider"===this.selectpicker.current.data[v].type&&y++;e=(i=h*this.options.size+y*m+g.vert)-g.vert,r=i+u+d+p+f,n=s=""}this.$menu.css({"max-height":r+"px",overflow:"hidden","min-height":n+"px"}),this.$menuInner.css({"max-height":e+"px","overflow-y":"auto","min-height":s+"px"}),this.sizeInfo.menuInnerHeight=Math.max(e,1),this.selectpicker.current.data.length&&this.selectpicker.current.data[this.selectpicker.current.data.length-1].position>this.sizeInfo.menuInnerHeight&&(this.sizeInfo.hasScrollBar=!0,this.sizeInfo.totalMenuWidth=this.sizeInfo.menuWidth+this.sizeInfo.scrollBarWidth),"auto"===this.options.dropdownAlignRight&&this.$menu.toggleClass(j.MENURIGHT,this.sizeInfo.selectOffsetLeft>this.sizeInfo.selectOffsetRight&&this.sizeInfo.selectOffsetRight<this.sizeInfo.totalMenuWidth-c),this.dropdown&&this.dropdown._popper&&this.dropdown._popper.update()},setSize:function(e){if(this.liHeight(e),this.options.header&&this.$menu.css("padding-top",0),!1!==this.options.size){var i=this,n=t(window);this.setMenuSize(),this.options.liveSearch&&this.$searchbox.off("input.setMenuSize propertychange.setMenuSize").on("input.setMenuSize propertychange.setMenuSize",(function(){return i.setMenuSize()})),"auto"===this.options.size?n.off("resize.bs.select."+this.selectId+".setMenuSize scroll"+".bs.select."+this.selectId+".setMenuSize").on("resize.bs.select."+this.selectId+".setMenuSize scroll"+".bs.select."+this.selectId+".setMenuSize",(function(){return i.setMenuSize()})):this.options.size&&"auto"!=this.options.size&&this.selectpicker.current.elements.length>this.options.size&&n.off("resize.bs.select."+this.selectId+".setMenuSize scroll"+".bs.select."+this.selectId+".setMenuSize")}this.createView(!1,!0,e)},setWidth:function(){var t=this;"auto"===this.options.width?requestAnimationFrame((function(){t.$menu.css("min-width","0"),t.$element.on("loaded.bs.select",(function(){t.liHeight(),t.setMenuSize();var e=t.$newElement.clone().appendTo("body"),i=e.css("width","auto").children("button").outerWidth();e.remove(),t.sizeInfo.selectWidth=Math.max(t.sizeInfo.totalMenuWidth,i),t.$newElement.css("width",t.sizeInfo.selectWidth+"px")}))})):"fit"===this.options.width?(this.$menu.css("min-width",""),this.$newElement.css("width","").addClass("fit-width")):this.options.width?(this.$menu.css("min-width",""),this.$newElement.css("width",this.options.width)):(this.$menu.css("min-width",""),this.$newElement.css("width","")),this.$newElement.hasClass("fit-width")&&"fit"!==this.options.width&&this.$newElement[0].classList.remove("fit-width")},selectPosition:function(){this.$bsContainer=t('<div class="bs-container" />');var e,i,n,o=this,r=t(this.options.container),s=function(s){var a={},l=o.options.display||!!t.fn.dropdown.Constructor.Default&&t.fn.dropdown.Constructor.Default.display;o.$bsContainer.addClass(s.attr("class").replace(/form-control|fit-width/gi,"")).toggleClass(j.DROPUP,s.hasClass(j.DROPUP)),e=s.offset(),r.is("body")?i={top:0,left:0}:((i=r.offset()).top+=parseInt(r.css("borderTopWidth"))-r.scrollTop(),i.left+=parseInt(r.css("borderLeftWidth"))-r.scrollLeft()),n=s.hasClass(j.DROPUP)?0:s[0].offsetHeight,(N.major<4||"static"===l)&&(a.top=e.top-i.top+n,a.left=e.left-i.left),a.width=s[0].offsetWidth,o.$bsContainer.css(a)};this.$button.on("click.bs.dropdown.data-api",(function(){o.isDisabled()||(s(o.$newElement),o.$bsContainer.appendTo(o.options.container).toggleClass(j.SHOW,!o.$button.hasClass(j.SHOW)).append(o.$menu))})),t(window).off("resize.bs.select."+this.selectId+" scroll"+".bs.select."+this.selectId).on("resize.bs.select."+this.selectId+" scroll"+".bs.select."+this.selectId,(function(){o.$newElement.hasClass(j.SHOW)&&s(o.$newElement)})),this.$element.on("hide.bs.select",(function(){o.$menu.data("height",o.$menu.height()),o.$bsContainer.detach()}))},setOptionStatus:function(t){var e=this;if(e.noScroll=!1,e.selectpicker.view.visibleElements&&e.selectpicker.view.visibleElements.length)for(var i=0;i<e.selectpicker.view.visibleElements.length;i++){var n=e.selectpicker.current.data[i+e.selectpicker.view.position0],o=n.option;o&&(!0!==t&&e.setDisabled(n.index,n.disabled),e.setSelected(n.index,o.selected))}},setSelected:function(t,e){var i,n,o=this.selectpicker.main.elements[t],r=this.selectpicker.main.data[t],s=void 0!==this.activeIndex,a=this.activeIndex===t||e&&!this.multiple&&!s;r.selected=e,n=o.firstChild,e&&(this.selectedIndex=t),o.classList.toggle("selected",e),a?(this.focusItem(o,r),this.selectpicker.view.currentActive=o,this.activeIndex=t):this.defocusItem(o),n&&(n.classList.toggle("selected",e),e?n.setAttribute("aria-selected",!0):this.multiple?n.setAttribute("aria-selected",!1):n.removeAttribute("aria-selected")),a||s||!e||void 0===this.prevActiveIndex||(i=this.selectpicker.main.elements[this.prevActiveIndex],this.defocusItem(i))},setDisabled:function(t,e){var i,n=this.selectpicker.main.elements[t];this.selectpicker.main.data[t].disabled=e,i=n.firstChild,n.classList.toggle(j.DISABLED,e),i&&("4"===N.major&&i.classList.toggle(j.DISABLED,e),e?(i.setAttribute("aria-disabled",e),i.setAttribute("tabindex",-1)):(i.removeAttribute("aria-disabled"),i.setAttribute("tabindex",0)))},isDisabled:function(){return this.$element[0].disabled},checkDisabled:function(){this.isDisabled()?(this.$newElement[0].classList.add(j.DISABLED),this.$button.addClass(j.DISABLED).attr("aria-disabled",!0)):this.$button[0].classList.contains(j.DISABLED)&&(this.$newElement[0].classList.remove(j.DISABLED),this.$button.removeClass(j.DISABLED).attr("aria-disabled",!1))},clickListener:function(){var e=this,i=t(document);function n(){e.options.liveSearch?e.$searchbox.trigger("focus"):e.$menuInner.trigger("focus")}function o(){e.dropdown&&e.dropdown._popper&&e.dropdown._popper.state.isCreated?n():requestAnimationFrame(o)}i.data("spaceSelect",!1),this.$button.on("keyup",(function(t){/(32)/.test(t.keyCode.toString(10))&&i.data("spaceSelect")&&(t.preventDefault(),i.data("spaceSelect",!1))})),this.$newElement.on("show.bs.dropdown",(function(){N.major>3&&!e.dropdown&&(e.dropdown=e.$button.data("bs.dropdown"),e.dropdown._menu=e.$menu[0])})),this.$button.on("click.bs.dropdown.data-api",(function(){e.$newElement.hasClass(j.SHOW)||e.setSize()})),this.$element.on("shown.bs.select",(function(){e.$menuInner[0].scrollTop!==e.selectpicker.view.scrollTop&&(e.$menuInner[0].scrollTop=e.selectpicker.view.scrollTop),N.major>3?requestAnimationFrame(o):n()})),this.$menuInner.on("mouseenter","li a",(function(t){var i=this.parentElement,n=e.isVirtual()?e.selectpicker.view.position0:0,o=Array.prototype.indexOf.call(i.parentElement.children,i),r=e.selectpicker.current.data[o+n];e.focusItem(i,r,!0)})),this.$menuInner.on("click","li a",(function(i,n){var o=t(this),r=e.$element[0],s=e.isVirtual()?e.selectpicker.view.position0:0,a=e.selectpicker.current.data[o.parent().index()+s],l=a.index,c=g(r),h=r.selectedIndex,u=r.options[h],d=!0;if(e.multiple&&1!==e.options.maxOptions&&i.stopPropagation(),i.preventDefault(),!e.isDisabled()&&!o.parent().hasClass(j.DISABLED)){var p=a.option,f=t(p),y=p.selected,b=f.parent("optgroup"),x=b.find("option"),$=e.options.maxOptions,w=b.data("maxOptions")||!1;if(l===e.activeIndex&&(n=!0),n||(e.prevActiveIndex=e.activeIndex,e.activeIndex=void 0),e.multiple){if(p.selected=!y,e.setSelected(l,!y),e.focusedParent.focus(),!1!==$||!1!==w){var _=$<m(r).length,k=w<b.find("option:selected").length;if($&&_||w&&k)if($&&1==$)r.selectedIndex=-1,p.selected=!0,e.setOptionStatus(!0);else if(w&&1==w){for(var S=0;S<x.length;S++){var C=x[S];C.selected=!1,e.setSelected(C.liIndex,!1)}p.selected=!0,e.setSelected(l,!0)}else{var T="string"==typeof e.options.maxOptionsText?[e.options.maxOptionsText,e.options.maxOptionsText]:e.options.maxOptionsText,M="function"==typeof T?T($,w):T,P=M[0].replace("{n}",$),E=M[1].replace("{n}",w),I=t('<div class="notify"></div>');M[2]&&(P=P.replace("{var}",M[2][$>1?0:1]),E=E.replace("{var}",M[2][w>1?0:1])),p.selected=!1,e.$menu.append(I),$&&_&&(I.append(t("<div>"+P+"</div>")),d=!1,e.$element.trigger("maxReached.bs.select")),w&&k&&(I.append(t("<div>"+E+"</div>")),d=!1,e.$element.trigger("maxReachedGrp.bs.select")),setTimeout((function(){e.setSelected(l,!1)}),10),I[0].classList.add("fadeOut"),setTimeout((function(){I.remove()}),1050)}}}else u&&(u.selected=!1),p.selected=!0,e.setSelected(l,!0);!e.multiple||e.multiple&&1===e.options.maxOptions?e.$button.trigger("focus"):e.options.liveSearch&&e.$searchbox.trigger("focus"),d&&(e.multiple||h!==r.selectedIndex)&&(v=[p.index,f.prop("selected"),c],e.$element.triggerNative("change"))}})),this.$menu.on("click","li."+j.DISABLED+" a, ."+j.POPOVERHEADER+", ."+j.POPOVERHEADER+" :not(.close)",(function(i){i.currentTarget==this&&(i.preventDefault(),i.stopPropagation(),e.options.liveSearch&&!t(i.target).hasClass("close")?e.$searchbox.trigger("focus"):e.$button.trigger("focus"))})),this.$menuInner.on("click",".divider, .dropdown-header",(function(t){t.preventDefault(),t.stopPropagation(),e.options.liveSearch?e.$searchbox.trigger("focus"):e.$button.trigger("focus")})),this.$menu.on("click","."+j.POPOVERHEADER+" .close",(function(){e.$button.trigger("click")})),this.$searchbox.on("click",(function(t){t.stopPropagation()})),this.$menu.on("click",".actions-btn",(function(i){e.options.liveSearch?e.$searchbox.trigger("focus"):e.$button.trigger("focus"),i.preventDefault(),i.stopPropagation(),t(this).hasClass("bs-select-all")?e.selectAll():e.deselectAll()})),this.$button.on("focus.bs.select",(function(t){var i=e.$element[0].getAttribute("tabindex");void 0!==i&&t.originalEvent&&t.originalEvent.isTrusted&&(this.setAttribute("tabindex",i),e.$element[0].setAttribute("tabindex",-1),e.selectpicker.view.tabindex=i)})).on("blur.bs.select",(function(t){void 0!==e.selectpicker.view.tabindex&&t.originalEvent&&t.originalEvent.isTrusted&&(e.$element[0].setAttribute("tabindex",e.selectpicker.view.tabindex),this.setAttribute("tabindex",-1),e.selectpicker.view.tabindex=void 0)})),this.$element.on("change.bs.select",(function(){e.render(),e.$element.trigger("changed.bs.select",v),v=null})).on("focus.bs.select",(function(){e.options.mobile||e.$button[0].focus()}))},liveSearchListener:function(){var t=this;this.$button.on("click.bs.dropdown.data-api",(function(){t.$searchbox.val()&&(t.$searchbox.val(""),t.selectpicker.search.previousValue=void 0)})),this.$searchbox.on("click.bs.dropdown.data-api focus.bs.dropdown.data-api touchend.bs.dropdown.data-api",(function(t){t.stopPropagation()})),this.$searchbox.on("input propertychange",(function(){var e=t.$searchbox[0].value;if(t.selectpicker.search.elements=[],t.selectpicker.search.data=[],e){var i=[],n=e.toUpperCase(),o={},r=[],s=t._searchStyle(),a=t.options.liveSearchNormalize;a&&(n=C(n));for(var l=0;l<t.selectpicker.main.data.length;l++){var c=t.selectpicker.main.data[l];o[l]||(o[l]=x(c,n,s,a)),o[l]&&void 0!==c.headerIndex&&-1===r.indexOf(c.headerIndex)&&(c.headerIndex>0&&(o[c.headerIndex-1]=!0,r.push(c.headerIndex-1)),o[c.headerIndex]=!0,r.push(c.headerIndex),o[c.lastIndex+1]=!0),o[l]&&"optgroup-label"!==c.type&&r.push(l)}l=0;for(var h=r.length;l<h;l++){var u=r[l],d=r[l-1],p=(c=t.selectpicker.main.data[u],t.selectpicker.main.data[d]);("divider"!==c.type||"divider"===c.type&&p&&"divider"!==p.type&&h-1!==l)&&(t.selectpicker.search.data.push(c),i.push(t.selectpicker.main.elements[u]))}t.activeIndex=void 0,t.noScroll=!0,t.$menuInner.scrollTop(0),t.selectpicker.search.elements=i,t.createView(!0),G.call(t,i,e)}else t.selectpicker.search.previousValue&&(t.$menuInner.scrollTop(0),t.createView(!1));t.selectpicker.search.previousValue=e}))},_searchStyle:function(){return this.options.liveSearchStyle||"contains"},val:function(t){var e=this.$element[0];if(void 0!==t){var i=g(e);if(v=[null,null,i],this.$element.val(t).trigger("changed.bs.select",v),this.$newElement.hasClass(j.SHOW))if(this.multiple)this.setOptionStatus(!0);else{var n=(e.options[e.selectedIndex]||{}).liIndex;"number"==typeof n&&(this.setSelected(this.selectedIndex,!1),this.setSelected(n,!0))}return this.render(),v=null,this.$element}return this.$element.val()},changeAll:function(t){if(this.multiple){void 0===t&&(t=!0);var e=this.$element[0],i=0,n=0,o=g(e);e.classList.add("bs-select-hidden");for(var r=0,s=this.selectpicker.current.data,a=s.length;r<a;r++){var l=s[r],c=l.option;c&&!l.disabled&&"divider"!==l.type&&(l.selected&&i++,c.selected=t,!0===t&&n++)}e.classList.remove("bs-select-hidden"),i!==n&&(this.setOptionStatus(),v=[null,null,o],this.$element.triggerNative("change"))}},selectAll:function(){return this.changeAll(!0)},deselectAll:function(){return this.changeAll(!1)},toggle:function(t){(t=t||window.event)&&t.stopPropagation(),this.$button.trigger("click.bs.dropdown.data-api")},keydown:function(e){var i,n,o,r,s,a=t(this),l=a.hasClass("dropdown-toggle"),c=(l?a.closest(".dropdown"):a.closest(Y.MENU)).data("this"),h=c.findLis(),u=!1,d=e.which===z&&!l&&!c.options.selectOnTab,p=U.test(e.which)||d,f=c.$menuInner[0].scrollTop,m=!0===c.isVirtual()?c.selectpicker.view.position0:0;if(!(e.which>=112&&e.which<=123))if(!(n=c.$newElement.hasClass(j.SHOW))&&(p||e.which>=48&&e.which<=57||e.which>=96&&e.which<=105||e.which>=65&&e.which<=90)&&(c.$button.trigger("click.bs.dropdown.data-api"),c.options.liveSearch))c.$searchbox.trigger("focus");else{if(e.which===R&&n&&(e.preventDefault(),c.$button.trigger("click.bs.dropdown.data-api").trigger("focus")),p){if(!h.length)return;-1!==(i=(o=c.selectpicker.main.elements[c.activeIndex])?Array.prototype.indexOf.call(o.parentElement.children,o):-1)&&c.defocusItem(o),e.which===F?(-1!==i&&i--,i+m<0&&(i+=h.length),c.selectpicker.view.canHighlight[i+m]||-1===(i=c.selectpicker.view.canHighlight.slice(0,i+m).lastIndexOf(!0)-m)&&(i=h.length-1)):(e.which===B||d)&&(++i+m>=c.selectpicker.view.canHighlight.length&&(i=c.selectpicker.view.firstHighlightIndex),c.selectpicker.view.canHighlight[i+m]||(i=i+1+c.selectpicker.view.canHighlight.slice(i+m+1).indexOf(!0))),e.preventDefault();var g=m+i;e.which===F?0===m&&i===h.length-1?(c.$menuInner[0].scrollTop=c.$menuInner[0].scrollHeight,g=c.selectpicker.current.elements.length-1):u=(s=(r=c.selectpicker.current.data[g]).position-r.height)<f:(e.which===B||d)&&(i===c.selectpicker.view.firstHighlightIndex?(c.$menuInner[0].scrollTop=0,g=c.selectpicker.view.firstHighlightIndex):u=(s=(r=c.selectpicker.current.data[g]).position-c.sizeInfo.menuInnerHeight)>f),o=c.selectpicker.current.elements[g],c.activeIndex=c.selectpicker.current.data[g].index,c.focusItem(o),c.selectpicker.view.currentActive=o,u&&(c.$menuInner[0].scrollTop=s),c.options.liveSearch?c.$searchbox.trigger("focus"):a.trigger("focus")}else if(!a.is("input")&&!q.test(e.which)||e.which===O&&c.selectpicker.keydown.keyHistory){var y,v,b=[];e.preventDefault(),c.selectpicker.keydown.keyHistory+=D[e.which],c.selectpicker.keydown.resetKeyHistory.cancel&&clearTimeout(c.selectpicker.keydown.resetKeyHistory.cancel),c.selectpicker.keydown.resetKeyHistory.cancel=c.selectpicker.keydown.resetKeyHistory.start(),v=c.selectpicker.keydown.keyHistory,/^(.)\1+$/.test(v)&&(v=v.charAt(0));for(var $=0;$<c.selectpicker.current.data.length;$++){var w=c.selectpicker.current.data[$];x(w,v,"startsWith",!0)&&c.selectpicker.view.canHighlight[$]&&b.push(w.index)}if(b.length){var _=0;h.removeClass("active").find("a").removeClass("active"),1===v.length&&(-1===(_=b.indexOf(c.activeIndex))||_===b.length-1?_=0:_++),y=b[_],f-(r=c.selectpicker.main.data[y]).position>0?(s=r.position-r.height,u=!0):(s=r.position-c.sizeInfo.menuInnerHeight,u=r.position>f+c.sizeInfo.menuInnerHeight),o=c.selectpicker.main.elements[y],c.activeIndex=b[_],c.focusItem(o),o&&o.firstChild.focus(),u&&(c.$menuInner[0].scrollTop=s),a.trigger("focus")}}n&&(e.which===O&&!c.selectpicker.keydown.keyHistory||e.which===L||e.which===z&&c.options.selectOnTab)&&(e.which!==O&&e.preventDefault(),c.options.liveSearch&&e.which===O||(c.$menuInner.find(".active a").trigger("click",!0),a.trigger("focus"),c.options.liveSearch||(e.preventDefault(),t(document).data("spaceSelect",!0))))}},mobile:function(){this.options.mobile=!0,this.$element[0].classList.add("mobile-device")},refresh:function(){var e=t.extend({},this.options,this.$element.data());this.options=e,this.checkDisabled(),this.buildData(),this.setStyle(),this.render(),this.buildList(),this.setWidth(),this.setSize(!0),this.$element.trigger("refreshed.bs.select")},hide:function(){this.$newElement.hide()},show:function(){this.$newElement.show()},remove:function(){this.$newElement.remove(),this.$element.remove()},destroy:function(){this.$newElement.before(this.$element).remove(),this.$bsContainer?this.$bsContainer.remove():this.$menu.remove(),this.selectpicker.view.titleOption&&this.selectpicker.view.titleOption.parentNode&&this.selectpicker.view.titleOption.parentNode.removeChild(this.selectpicker.view.titleOption),this.$element.off(W).removeData("selectpicker").removeClass("bs-select-hidden selectpicker"),t(window).off(".bs.select."+this.selectId)}};var Q=t.fn.selectpicker;function J(){if(t.fn.dropdown){var e=t.fn.dropdown.Constructor._dataApiKeydownHandler||t.fn.dropdown.Constructor.prototype.keydown;return e.apply(this,arguments)}}t.fn.selectpicker=K,t.fn.selectpicker.Constructor=Z,t.fn.selectpicker.noConflict=function(){return t.fn.selectpicker=Q,this},t(document).off("keydown.bs.dropdown.data-api").on("keydown.bs.dropdown.data-api",':not(.bootstrap-select) > [data-toggle="dropdown"]',J).on("keydown.bs.dropdown.data-api",":not(.bootstrap-select) > .dropdown-menu",J).on("keydown.bs.select",'.bootstrap-select [data-toggle="dropdown"], .bootstrap-select [role="listbox"], .bootstrap-select .bs-searchbox input',Z.prototype.keydown).on("focusin.modal",'.bootstrap-select [data-toggle="dropdown"], .bootstrap-select [role="listbox"], .bootstrap-select .bs-searchbox input',(function(t){t.stopPropagation()})),t(window).on("load.bs.select.data-api",(function(){t(".selectpicker").each((function(){var e=t(this);K.call(e,e.data())}))}))}(t)})),function(t){"use strict";var e=":not(:disabled):not(.ajs-reset)",i=13,n=27,o=112,r=123,s=37,a=39,l=9,c={autoReset:!0,basic:!1,closable:!0,closableByDimmer:!0,invokeOnCloseOff:!1,frameless:!1,defaultFocusOff:!1,maintainFocus:!0,maximizable:!0,modal:!0,movable:!0,moveBounded:!1,overflow:!0,padding:!0,pinnable:!0,pinned:!0,preventBodyShift:!1,resizable:!0,startMaximized:!1,transition:"pulse",transitionOff:!1,tabbable:["button","[href]","input","select","textarea",'[tabindex]:not([tabindex^="-"])'+e].join(e+","),notifier:{delay:5,position:"bottom-right",closeButton:!1,classes:{base:"alertify-notifier",prefix:"ajs-",message:"ajs-message",top:"ajs-top",right:"ajs-right",bottom:"ajs-bottom",left:"ajs-left",center:"ajs-center",visible:"ajs-visible",hidden:"ajs-hidden",close:"ajs-close"}},glossary:{title:"AlertifyJS",ok:"OK",cancel:"Cancel",acccpt:"Accept",deny:"Deny",confirm:"Confirm",decline:"Decline",close:"Close",maximize:"Maximize",restore:"Restore"},theme:{input:"ajs-input",ok:"ajs-ok",cancel:"ajs-cancel"},hooks:{preinit:function(){},postinit:function(){}}},h=[];function u(t,e){t.className+=" "+e}function d(t,e){for(var i=t.className.split(" "),n=e.split(" "),o=0;o<n.length;o+=1){var r=i.indexOf(n[o]);r>-1&&i.splice(r,1)}t.className=i.join(" ")}function p(){return"rtl"===t.getComputedStyle(document.body).direction}function f(){return document.documentElement&&document.documentElement.scrollTop||document.body.scrollTop}function m(){return document.documentElement&&document.documentElement.scrollLeft||document.body.scrollLeft}function g(t){for(;t.lastChild;)t.removeChild(t.lastChild)}function y(t){if(null===t)return t;var e;if(Array.isArray(t)){e=[];for(var i=0;i<t.length;i+=1)e.push(y(t[i]));return e}if(t instanceof Date)return new Date(t.getTime());if(t instanceof RegExp)return(e=new RegExp(t.source)).global=t.global,e.ignoreCase=t.ignoreCase,e.multiline=t.multiline,e.lastIndex=t.lastIndex,e;if("object"==typeof t){for(var n in e={},t)t.hasOwnProperty(n)&&(e[n]=y(t[n]));return e}return t}function v(t,e){if(t.elements){var i=t.elements.root;i.parentNode.removeChild(i),delete t.elements,t.settings=y(t.__settings),t.__init=e,delete t.__internal}}var b=!1;try{var x=Object.defineProperty({},"passive",{get:function(){b=!0}});t.addEventListener("test",x,x),t.removeEventListener("test",x,x)}catch(t){}var $=function(t,e,i,n,o){t.addEventListener(e,i,b?{capture:n,passive:o}:!0===n)},w=function(t,e,i,n,o){t.removeEventListener(e,i,b?{capture:n,passive:o}:!0===n)},_=function(){var t,e,i=!1,n={animation:"animationend",OAnimation:"oAnimationEnd oanimationend",msAnimation:"MSAnimationEnd",MozAnimation:"animationend",WebkitAnimation:"webkitAnimationEnd"};for(t in n)if(void 0!==document.documentElement.style[t]){e=n[t],i=!0;break}return{type:e,supported:i}}();function k(t,e){return function(){if(arguments.length>0){for(var i=[],n=0;n<arguments.length;n+=1)i.push(arguments[n]);return i.push(t),e.apply(t,i)}return e.apply(t,[null,t])}}function S(t,e){return{index:t,button:e,cancel:!1}}function C(t,e){if("function"==typeof e.get(t))return e.get(t).call(e)}var T=function(){var e,i,b=[],x=!1,T=t.navigator.userAgent.indexOf("Safari")>-1&&t.navigator.userAgent.indexOf("Chrome")<0,M='<div class="ajs-dimmer"></div>',E='<div class="ajs-modal" tabindex="0"></div>',I='<div class="ajs-dialog" tabindex="0"></div>',A='<button class="ajs-reset"></button>',D='<div class="ajs-commands"><button class="ajs-pin"></button><button class="ajs-maximize"></button><button class="ajs-close"></button></div>',R='<div class="ajs-header"></div>',L='<div class="ajs-body"></div>',O='<div class="ajs-content"></div>',z='<div class="ajs-footer"></div>',F={primary:'<div class="ajs-primary ajs-buttons"></div>',auxiliary:'<div class="ajs-auxiliary ajs-buttons"></div>'},B='<button class="ajs-button"></button>',N='<div class="ajs-handle"></div>',H="ajs-in",W="ajs-out",j="alertify",Y="ajs-basic",V="ajs-capture",U="ajs-closable",q="ajs-fixed",X="ajs-frameless",G="ajs-hidden",Z="ajs-maximized",K="ajs-maximizable",Q="ajs-modeless",J="ajs-movable",tt="ajs-no-selection",et="ajs-no-overflow",it="ajs-no-padding",nt="ajs-pinnable",ot="ajs-",rt="ajs-resizable",st="ajs-shake",at="ajs-unpinned",lt="ajs-no-transition";function ct(t){if(!t.__internal){var e;P.defaults.hooks.preinit(t),delete t.__init,t.__settings||(t.__settings=y(t.settings)),"function"==typeof t.setup?((e=t.setup()).options=e.options||{},e.focus=e.focus||{}):e={buttons:[],focus:{element:null,select:!1},options:{}},"object"!=typeof t.hooks&&(t.hooks={});var i=[];if(Array.isArray(e.buttons))for(var n=0;n<e.buttons.length;n+=1){var o=e.buttons[n],r={};for(var s in o)o.hasOwnProperty(s)&&(r[s]=o[s]);i.push(r)}var a=t.__internal={isOpen:!1,activeElement:document.body,timerIn:void 0,timerOut:void 0,buttons:i,focus:e.focus,options:{title:void 0,modal:void 0,basic:void 0,frameless:void 0,defaultFocusOff:void 0,pinned:void 0,movable:void 0,moveBounded:void 0,resizable:void 0,autoReset:void 0,closable:void 0,closableByDimmer:void 0,invokeOnCloseOff:void 0,maximizable:void 0,startMaximized:void 0,pinnable:void 0,transition:void 0,transitionOff:void 0,padding:void 0,overflow:void 0,onshow:void 0,onclosing:void 0,onclose:void 0,onfocus:void 0,onmove:void 0,onmoved:void 0,onresize:void 0,onresized:void 0,onmaximize:void 0,onmaximized:void 0,onrestore:void 0,onrestored:void 0},resetHandler:void 0,beginMoveHandler:void 0,beginResizeHandler:void 0,bringToFrontHandler:void 0,modalClickHandler:void 0,buttonsClickHandler:void 0,commandsClickHandler:void 0,transitionInHandler:void 0,transitionOutHandler:void 0,destroy:void 0},l={};l.root=document.createElement("div"),l.root.style.display="none",l.root.className=j+" "+G+" ",l.root.innerHTML=M+E,l.dimmer=l.root.firstChild,l.modal=l.root.lastChild,l.modal.innerHTML=I,l.dialog=l.modal.firstChild,l.dialog.innerHTML=A+D+R+L+z+N+A,l.reset=[],l.reset.push(l.dialog.firstChild),l.reset.push(l.dialog.lastChild),l.commands={},l.commands.container=l.reset[0].nextSibling,l.commands.pin=l.commands.container.firstChild,l.commands.maximize=l.commands.pin.nextSibling,l.commands.close=l.commands.maximize.nextSibling,l.header=l.commands.container.nextSibling,l.body=l.header.nextSibling,l.body.innerHTML=O,l.content=l.body.firstChild,l.footer=l.body.nextSibling,l.footer.innerHTML=F.auxiliary+F.primary,l.resizeHandle=l.footer.nextSibling,l.buttons={},l.buttons.auxiliary=l.footer.firstChild,l.buttons.primary=l.buttons.auxiliary.nextSibling,l.buttons.primary.innerHTML=B,l.buttonTemplate=l.buttons.primary.firstChild,l.buttons.primary.removeChild(l.buttonTemplate);for(var c=0;c<t.__internal.buttons.length;c+=1){var h=t.__internal.buttons[c];for(var d in b.indexOf(h.key)<0&&b.push(h.key),h.element=l.buttonTemplate.cloneNode(),h.element.innerHTML=h.text,"string"==typeof h.className&&""!==h.className&&u(h.element,h.className),h.attrs)"className"!==d&&h.attrs.hasOwnProperty(d)&&h.element.setAttribute(d,h.attrs[d]);"auxiliary"===h.scope?l.buttons.auxiliary.appendChild(h.element):l.buttons.primary.appendChild(h.element)}for(var p in t.elements=l,a.resetHandler=k(t,zt),a.beginMoveHandler=k(t,Qt),a.beginResizeHandler=k(t,ae),a.bringToFrontHandler=k(t,mt),a.modalClickHandler=k(t,Pt),a.buttonsClickHandler=k(t,Dt),a.commandsClickHandler=k(t,bt),a.transitionInHandler=k(t,Nt),a.transitionOutHandler=k(t,Ht),a.options)void 0!==e.options[p]?t.set(p,e.options[p]):P.defaults.hasOwnProperty(p)?t.set(p,P.defaults[p]):"title"===p&&t.set(p,P.defaults.glossary[p]);"function"==typeof t.build&&t.build(),P.defaults.hooks.postinit(t)}document.body.appendChild(t.elements.root)}function ht(){t.scrollTo(e,i)}function ut(){for(var t=0,e=0;e<h.length;e+=1){var i=h[e];(i.isModal()||i.isMaximized())&&(t+=1)}0===t&&document.body.className.indexOf(et)>=0?(d(document.body,et),ft(!1)):t>0&&document.body.className.indexOf(et)<0&&(ft(!0),u(document.body,et))}var dt="",pt=0;function ft(e){P.defaults.preventBodyShift&&(e&&document.documentElement.scrollHeight>document.documentElement.clientHeight?(pt=i,dt=t.getComputedStyle(document.body).top,u(document.body,q),document.body.style.top=-i+"px"):e||(i=pt,document.body.style.top=dt,d(document.body,q),ht()))}function mt(t,e){for(var i=h.indexOf(e)+1;i<h.length;i+=1)if(h[i].isModal())return;return document.body.lastChild!==e.elements.root&&(document.body.appendChild(e.elements.root),h.splice(h.indexOf(e),1),h.push(e),Ot(e)),!1}function gt(t,e,i,n){switch(e){case"title":t.setHeader(n);break;case"modal":!function(t){t.get("modal")?(d(t.elements.root,Q),t.isOpen()&&(pe(t),Ct(t),ut())):(u(t.elements.root,Q),t.isOpen()&&(de(t),Ct(t),ut()))}(t);break;case"basic":!function(t){t.get("basic")?u(t.elements.root,Y):d(t.elements.root,Y)}(t);break;case"frameless":!function(t){t.get("frameless")?u(t.elements.root,X):d(t.elements.root,X)}(t);break;case"pinned":!function(t){t.get("pinned")?(d(t.elements.root,at),t.isOpen()&&St(t)):(u(t.elements.root,at),t.isOpen()&&!t.isModal()&&kt(t))}(t);break;case"closable":!function(t){t.get("closable")?(u(t.elements.root,U),function(t){$(t.elements.modal,"click",t.__internal.modalClickHandler)}(t)):(d(t.elements.root,U),function(t){w(t.elements.modal,"click",t.__internal.modalClickHandler)}(t))}(t);break;case"maximizable":!function(t){t.get("maximizable")?u(t.elements.root,K):d(t.elements.root,K)}(t);break;case"pinnable":!function(t){t.get("pinnable")?u(t.elements.root,nt):d(t.elements.root,nt)}(t);break;case"movable":!function(t){t.get("movable")?(u(t.elements.root,J),t.isOpen()&&fe(t)):(ee(t),d(t.elements.root,J),t.isOpen()&&me(t))}(t);break;case"resizable":!function(t){t.get("resizable")?(u(t.elements.root,rt),t.isOpen()&&ge(t)):(he(t),d(t.elements.root,rt),t.isOpen()&&ye(t))}(t);break;case"padding":n?d(t.elements.root,it):t.elements.root.className.indexOf(it)<0&&u(t.elements.root,it);break;case"overflow":n?d(t.elements.root,et):t.elements.root.className.indexOf(et)<0&&u(t.elements.root,et);break;case"transition":!function(t,e,i){"string"==typeof i&&d(t.elements.root,ot+i),u(t.elements.root,ot+e),t.elements.root.offsetWidth}(t,n,i);break;case"transitionOff":!function(t){t.get("transitionOff")?u(t.elements.root,lt):d(t.elements.root,lt)}(t)}"function"==typeof t.hooks.onupdate&&t.hooks.onupdate.call(t,e,i,n)}function yt(t,e,i,n,o){var r,s={op:void 0,items:[]};if(void 0===o&&"string"==typeof n)s.op="get",e.hasOwnProperty(n)?(s.found=!0,s.value=e[n]):(s.found=!1,s.value=void 0);else if(s.op="set","object"==typeof n){var a=n;for(var l in a)e.hasOwnProperty(l)?(e[l]!==a[l]&&(r=e[l],e[l]=a[l],i.call(t,l,r,a[l])),s.items.push({key:l,value:a[l],found:!0})):s.items.push({key:l,value:a[l],found:!1})}else{if("string"!=typeof n)throw new Error("args must be a string or object");e.hasOwnProperty(n)?(e[n]!==o&&(r=e[n],e[n]=o,i.call(t,n,r,o)),s.items.push({key:n,value:o,found:!0})):s.items.push({key:n,value:o,found:!1})}return s}function vt(t){var e;At(t,(function(i){return e=!0!==t.get("invokeOnCloseOff")&&!0===i.invokeOnClose})),!e&&t.isOpen()&&t.close()}function bt(t,e){switch(t.srcElement||t.target){case e.elements.commands.pin:e.isPinned()?$t(e):xt(e);break;case e.elements.commands.maximize:e.isMaximized()?_t(e):wt(e);break;case e.elements.commands.close:vt(e)}return!1}function xt(t){t.set("pinned",!0)}function $t(t){t.set("pinned",!1)}function wt(t){C("onmaximize",t),u(t.elements.root,Z),t.isOpen()&&ut(),C("onmaximized",t)}function _t(t){C("onrestore",t),d(t.elements.root,Z),t.isOpen()&&ut(),C("onrestored",t)}function kt(t){var e=m();t.elements.modal.style.marginTop=f()+"px",t.elements.modal.style.marginLeft=e+"px",t.elements.modal.style.marginRight=-e+"px"}function St(t){var e=parseInt(t.elements.modal.style.marginTop,10),i=parseInt(t.elements.modal.style.marginLeft,10);if(t.elements.modal.style.marginTop="",t.elements.modal.style.marginLeft="",t.elements.modal.style.marginRight="",t.isOpen()){var n=0,o=0;""!==t.elements.dialog.style.top&&(n=parseInt(t.elements.dialog.style.top,10)),t.elements.dialog.style.top=n+(e-f())+"px",""!==t.elements.dialog.style.left&&(o=parseInt(t.elements.dialog.style.left,10)),t.elements.dialog.style.left=o+(i-m())+"px"}}function Ct(t){t.get("modal")||t.get("pinned")?St(t):kt(t)}var Tt=!1,Mt=0;function Pt(t,e){if(t.timeStamp-Mt>200&&(Mt=t.timeStamp)&&!Tt){var i=t.srcElement||t.target;!0===e.get("closableByDimmer")&&i===e.elements.modal&&vt(e)}Tt=!1}var Et=0,It=!1;function At(t,e){if(Date.now()-Et>200&&(Et=Date.now()))for(var i=0;i<t.__internal.buttons.length;i+=1){var n=t.__internal.buttons[i];if(!n.element.disabled&&e(n)){var o=S(i,n);"function"==typeof t.callback&&t.callback.apply(t,[o]),!1===o.cancel&&t.close();break}}}function Dt(t,e){var i=t.srcElement||t.target;At(e,(function(t){return t.element===i&&(It=!0)}))}function Rt(t){if(!It){var e=h[h.length-1],i=t.keyCode;return 0===e.__internal.buttons.length&&i===n&&!0===e.get("closable")?(vt(e),!1):b.indexOf(i)>-1?(At(e,(function(t){return t.key===i})),!1):void 0}It=!1}function Lt(t){var e=h[h.length-1],i=t.keyCode;if(i===s||i===a){for(var n=e.__internal.buttons,l=0;l<n.length;l+=1)if(document.activeElement===n[l].element)switch(i){case s:return void n[(l||n.length)-1].element.focus();case a:return void n[(l+1)%n.length].element.focus()}}else if(i<r+1&&i>o-1&&b.indexOf(i)>-1)return t.preventDefault(),t.stopPropagation(),At(e,(function(t){return t.key===i})),!1}function Ot(t,e){if(e)e.focus();else{var i=t.__internal.focus,n=i.element;switch(typeof i.element){case"number":t.__internal.buttons.length>i.element&&(n=!0===t.get("basic")?t.elements.reset[0]:t.__internal.buttons[i.element].element);break;case"string":n=t.elements.body.querySelector(i.element);break;case"function":n=i.element.call(t)}(!0===t.get("defaultFocusOff")||null==n&&0===t.__internal.buttons.length)&&(n=t.elements.reset[0]),n&&n.focus&&(n.focus(),i.select&&n.select&&n.select())}}function zt(t,e){if(!e)for(var i=h.length-1;i>-1;i-=1)if(h[i].isModal()){e=h[i];break}if(e&&e.isModal()){var n,o=e.elements.reset[0],r=e.elements.reset[1],s=t.relatedTarget,a=e.elements.root.contains(s),l=t.srcElement||t.target;if(l===o&&!a||l===r&&s===o)return;l===r||l===document.body?n=o:l===o&&s===r?n=Ft(e):l===o&&a&&(n=Ft(e,!0)),Ot(e,n)}}function Ft(t,e){var i=[].slice.call(t.elements.dialog.querySelectorAll(c.tabbable));e&&i.reverse();for(var n=0;n<i.length;n+=1){var o=i[n];if(o.offsetParent||o.offsetWidth||o.offsetHeight||o.getClientRects().length)return o}}function Bt(t){var e=h[h.length-1];e&&t.shiftKey&&t.keyCode===l&&e.elements.reset[1].focus()}function Nt(t,e){clearTimeout(e.__internal.timerIn),Ot(e),It=!1,C("onfocus",e),w(e.elements.dialog,_.type,e.__internal.transitionInHandler),d(e.elements.root,H)}function Ht(t,e){clearTimeout(e.__internal.timerOut),w(e.elements.dialog,_.type,e.__internal.transitionOutHandler),ee(e),he(e),e.isMaximized()&&!e.get("startMaximized")&&_t(e),"function"==typeof e.__internal.destroy&&e.__internal.destroy.apply(e)}var Wt=null,jt=0,Yt=0,Vt="pageX",Ut="pageY",qt=null,Xt=!1,Gt=null;function Zt(t,e){var i=t[Vt]-jt,n=t[Ut]-Yt;Xt&&(n-=document.body.scrollTop),e.style.left=i+"px",e.style.top=n+"px"}function Kt(t,e){var i=t[Vt]-jt,n=t[Ut]-Yt;Xt&&(n-=document.body.scrollTop),e.style.left=Math.min(qt.maxLeft,Math.max(qt.minLeft,i))+"px",e.style.top=Xt?Math.min(qt.maxTop,Math.max(qt.minTop,n))+"px":Math.max(qt.minTop,n)+"px"}function Qt(t,e){if(null===ie&&!e.isMaximized()&&e.get("movable")){var i,n=0,o=0;if("touchstart"===t.type?(t.preventDefault(),i=t.targetTouches[0],Vt="clientX",Ut="clientY"):0===t.button&&(i=t),i){var r=e.elements.dialog;if(u(r,V),r.style.left&&(n=parseInt(r.style.left,10)),r.style.top&&(o=parseInt(r.style.top,10)),jt=i[Vt]-n,Yt=i[Ut]-o,e.isModal()?Yt+=e.elements.modal.scrollTop:e.isPinned()&&(Yt-=document.body.scrollTop),e.get("moveBounded")){var s=r,a=-n,l=-o;do{a+=s.offsetLeft,l+=s.offsetTop}while(s=s.offsetParent);qt={maxLeft:a,minLeft:-a,maxTop:document.documentElement.clientHeight-r.clientHeight-l,minTop:-l},Gt=Kt}else qt=null,Gt=Zt;return C("onmove",e),Xt=!e.isModal()&&e.isPinned(),Wt=e,Gt(i,r),u(document.body,tt),!1}}}function Jt(t){var e;Wt&&("touchmove"===t.type?(t.preventDefault(),e=t.targetTouches[0]):0===t.button&&(e=t),e&&Gt(e,Wt.elements.dialog))}function te(){if(Wt){var t=Wt;Wt=qt=null,d(document.body,tt),d(t.elements.dialog,V),C("onmoved",t)}}function ee(t){Wt=null;var e=t.elements.dialog;e.style.left=e.style.top=""}var ie=null,ne=Number.Nan,oe=0,re=0,se=0;function ae(t,e){var i;if(!e.isMaximized()&&("touchstart"===t.type?(t.preventDefault(),i=t.targetTouches[0]):0===t.button&&(i=t),i)){C("onresize",e),ie=e,se=e.elements.resizeHandle.offsetHeight/2;var n=e.elements.dialog;return u(n,V),ne=parseInt(n.style.left,10),n.style.height=n.offsetHeight+"px",n.style.minHeight=e.elements.header.offsetHeight+e.elements.footer.offsetHeight+"px",n.style.width=(oe=n.offsetWidth)+"px","none"!==n.style.maxWidth&&(n.style.minWidth=(re=n.offsetWidth)+"px"),n.style.maxWidth="none",u(document.body,tt),!1}}function le(t){var e;ie&&("touchmove"===t.type?(t.preventDefault(),e=t.targetTouches[0]):0===t.button&&(e=t),e&&function(t,e,i){var n,o,r=e,s=0,a=0;do{s+=r.offsetLeft,a+=r.offsetTop}while(r=r.offsetParent);!0===i?(n=t.pageX,o=t.pageY):(n=t.clientX,o=t.clientY);var l=p();if(l&&(n=document.body.offsetWidth-n,isNaN(ne)||(s=document.body.offsetWidth-s-e.offsetWidth)),e.style.height=o-a+se+"px",e.style.width=n-s+se+"px",!isNaN(ne)){var c=.5*Math.abs(e.offsetWidth-oe);l&&(c*=-1),e.offsetWidth>oe?e.style.left=ne+c+"px":e.offsetWidth>=re&&(e.style.left=ne-c+"px")}}(e,ie.elements.dialog,!ie.get("modal")&&!ie.get("pinned")))}function ce(){if(ie){var t=ie;ie=null,d(document.body,tt),d(t.elements.dialog,V),Tt=!0,C("onresized",t)}}function he(t){ie=null;var e=t.elements.dialog;"none"===e.style.maxWidth&&(e.style.maxWidth=e.style.minWidth=e.style.width=e.style.height=e.style.minHeight=e.style.left="",ne=Number.Nan,oe=re=se=0)}function ue(){for(var t=0;t<h.length;t+=1){var e=h[t];e.get("autoReset")&&(ee(e),he(e))}}function de(t){$(t.elements.dialog,"focus",t.__internal.bringToFrontHandler,!0)}function pe(t){w(t.elements.dialog,"focus",t.__internal.bringToFrontHandler,!0)}function fe(t){$(t.elements.header,"mousedown",t.__internal.beginMoveHandler),$(t.elements.header,"touchstart",t.__internal.beginMoveHandler,!1,!1)}function me(t){w(t.elements.header,"mousedown",t.__internal.beginMoveHandler),w(t.elements.header,"touchstart",t.__internal.beginMoveHandler,!1,!1)}function ge(t){$(t.elements.resizeHandle,"mousedown",t.__internal.beginResizeHandler),$(t.elements.resizeHandle,"touchstart",t.__internal.beginResizeHandler,!1,!1)}function ye(t){w(t.elements.resizeHandle,"mousedown",t.__internal.beginResizeHandler),w(t.elements.resizeHandle,"touchstart",t.__internal.beginResizeHandler,!1,!1)}return{__init:ct,isOpen:function(){return this.__internal.isOpen},isModal:function(){return this.elements.root.className.indexOf(Q)<0},isMaximized:function(){return this.elements.root.className.indexOf(Z)>-1},isPinned:function(){return this.elements.root.className.indexOf(at)<0},maximize:function(){return this.isMaximized()||wt(this),this},restore:function(){return this.isMaximized()&&_t(this),this},pin:function(){return this.isPinned()||xt(this),this},unpin:function(){return this.isPinned()&&$t(this),this},bringToFront:function(){return mt(0,this),this},moveTo:function(t,e){if(!isNaN(t)&&!isNaN(e)){C("onmove",this);var i=this.elements.dialog,n=i,o=0,r=0;i.style.left&&(o-=parseInt(i.style.left,10)),i.style.top&&(r-=parseInt(i.style.top,10));do{o+=n.offsetLeft,r+=n.offsetTop}while(n=n.offsetParent);var s=t-o,a=e-r;p()&&(s*=-1),i.style.left=s+"px",i.style.top=a+"px",C("onmoved",this)}return this},resizeTo:function(t,e){var i=parseFloat(t),n=parseFloat(e),o=/(\d*\.\d+|\d+)%/;if(!isNaN(i)&&!isNaN(n)&&!0===this.get("resizable")){C("onresize",this),(""+t).match(o)&&(i=i/100*document.documentElement.clientWidth),(""+e).match(o)&&(n=n/100*document.documentElement.clientHeight);var r=this.elements.dialog;"none"!==r.style.maxWidth&&(r.style.minWidth=(re=r.offsetWidth)+"px"),r.style.maxWidth="none",r.style.minHeight=this.elements.header.offsetHeight+this.elements.footer.offsetHeight+"px",r.style.width=i+"px",r.style.height=n+"px",C("onresized",this)}return this},setting:function(t,e){var i=this,n=yt(this,this.__internal.options,(function(t,e,n){gt(i,t,e,n)}),t,e);if("get"===n.op)return n.found?n.value:void 0!==this.settings?yt(this,this.settings,this.settingUpdated||function(){},t,e).value:void 0;if("set"===n.op){if(n.items.length>0)for(var o=this.settingUpdated||function(){},r=0;r<n.items.length;r+=1){var s=n.items[r];s.found||void 0===this.settings||yt(this,this.settings,o,s.key,s.value)}return this}},set:function(t,e){return this.setting(t,e),this},get:function(t){return this.setting(t)},setHeader:function(e){return"string"==typeof e?(g(this.elements.header),this.elements.header.innerHTML=e):e instanceof t.HTMLElement&&this.elements.header.firstChild!==e&&(g(this.elements.header),this.elements.header.appendChild(e)),this},setContent:function(e){return"string"==typeof e?(g(this.elements.content),this.elements.content.innerHTML=e):e instanceof t.HTMLElement&&this.elements.content.firstChild!==e&&(g(this.elements.content),this.elements.content.appendChild(e)),this},showModal:function(t){return this.show(!0,t)},show:function(n,o){if(ct(this),this.__internal.isOpen){ee(this),he(this),u(this.elements.dialog,st);var r=this;setTimeout((function(){d(r.elements.dialog,st)}),200)}else{if(this.__internal.isOpen=!0,h.push(this),P.defaults.maintainFocus&&(this.__internal.activeElement=document.activeElement),document.body.hasAttribute("tabindex")||document.body.setAttribute("tabindex",x="0"),"function"==typeof this.prepare&&this.prepare(),a=this,1===h.length&&($(t,"resize",ue),$(document.body,"keyup",Rt),$(document.body,"keydown",Lt),$(document.body,"focus",zt),$(document.documentElement,"mousemove",Jt),$(document.documentElement,"touchmove",Jt,!1,!1),$(document.documentElement,"mouseup",te),$(document.documentElement,"touchend",te),$(document.documentElement,"mousemove",le),$(document.documentElement,"touchmove",le,!1,!1),$(document.documentElement,"mouseup",ce),$(document.documentElement,"touchend",ce)),$(a.elements.commands.container,"click",a.__internal.commandsClickHandler),$(a.elements.footer,"click",a.__internal.buttonsClickHandler),$(a.elements.reset[0],"focusin",a.__internal.resetHandler),$(a.elements.reset[0],"keydown",Bt),$(a.elements.reset[1],"focusin",a.__internal.resetHandler),It=!0,$(a.elements.dialog,_.type,a.__internal.transitionInHandler),a.get("modal")||de(a),a.get("resizable")&&ge(a),a.get("movable")&&fe(a),void 0!==n&&this.set("modal",n),e=m(),i=f(),ut(),"string"==typeof o&&""!==o&&(this.__internal.className=o,u(this.elements.root,o)),this.get("startMaximized")?this.maximize():this.isMaximized()&&_t(this),Ct(this),this.elements.root.removeAttribute("style"),d(this.elements.root,W),u(this.elements.root,H),clearTimeout(this.__internal.timerIn),this.__internal.timerIn=setTimeout(this.__internal.transitionInHandler,_.supported?1e3:100),T){var s=this.elements.root;s.style.display="none",setTimeout((function(){s.style.display="block"}),0)}this.elements.root.offsetWidth,d(this.elements.root,G),ht(),"function"==typeof this.hooks.onshow&&this.hooks.onshow.call(this),C("onshow",this)}var a;return this},close:function(){var e;return this.__internal.isOpen&&!1!==C("onclosing",this)&&(e=this,1===h.length&&(w(t,"resize",ue),w(document.body,"keyup",Rt),w(document.body,"keydown",Lt),w(document.body,"focus",zt),w(document.documentElement,"mousemove",Jt),w(document.documentElement,"mouseup",te),w(document.documentElement,"mousemove",le),w(document.documentElement,"mouseup",ce)),w(e.elements.commands.container,"click",e.__internal.commandsClickHandler),w(e.elements.footer,"click",e.__internal.buttonsClickHandler),w(e.elements.reset[0],"focusin",e.__internal.resetHandler),w(e.elements.reset[0],"keydown",Bt),w(e.elements.reset[1],"focusin",e.__internal.resetHandler),$(e.elements.dialog,_.type,e.__internal.transitionOutHandler),e.get("modal")||pe(e),e.get("movable")&&me(e),e.get("resizable")&&ye(e),d(this.elements.root,H),u(this.elements.root,W),clearTimeout(this.__internal.timerOut),this.__internal.timerOut=setTimeout(this.__internal.transitionOutHandler,_.supported?1e3:100),u(this.elements.root,G),this.elements.modal.offsetWidth,P.defaults.maintainFocus&&this.__internal.activeElement&&(this.__internal.activeElement.focus(),this.__internal.activeElement=null),void 0!==this.__internal.className&&""!==this.__internal.className&&d(this.elements.root,this.__internal.className),"function"==typeof this.hooks.onclose&&this.hooks.onclose.call(this),C("onclose",this),h.splice(h.indexOf(this),1),this.__internal.isOpen=!1,ut()),h.length||"0"!==x||document.body.removeAttribute("tabindex"),this},closeOthers:function(){return P.closeAll(this),this},destroy:function(){return this.__internal&&(this.__internal.isOpen?(this.__internal.destroy=function(){v(this,ct)},this.close()):this.__internal.destroy||v(this,ct)),this}}}(),M=function(){var e,i=[],n=c.notifier.classes,o=n.base;function r(t){t.__internal||(t.__internal={position:P.defaults.notifier.position,delay:P.defaults.notifier.delay},e=document.createElement("DIV"),("transitionOff"in c.notifier?c.notifier.transitionOff:c.transitionOff)&&(o=n.base+" ajs-no-transition"),a(t));e.parentNode!==document.body&&document.body.appendChild(e)}function s(t){t.__internal.pushed=!0,i.push(t)}function a(t){switch(e.className=o,t.__internal.position){case"top-right":u(e,n.top+" "+n.right);break;case"top-left":u(e,n.top+" "+n.left);break;case"top-center":u(e,n.top+" "+n.center);break;case"bottom-left":u(e,n.bottom+" "+n.left);break;case"bottom-center":u(e,n.bottom+" "+n.center);break;default:u(e,n.bottom+" "+n.right)}}function l(o,r){function a(t,e){e.__internal.closeButton&&"true"!==t.target.getAttribute("data-close")||e.dismiss(!0)}function l(t,i){w(i.element,_.type,l),e.removeChild(i.element)}function c(t){clearTimeout(t.__internal.timer),clearTimeout(t.__internal.transitionTimeout)}return h={element:o,push:function(t,i){if(!this.__internal.pushed){var o,r;switch(s(this),c(this),arguments.length){case 0:r=this.__internal.delay;break;case 1:"number"==typeof t?r=t:(o=t,r=this.__internal.delay);break;case 2:o=t,r=i}return this.__internal.closeButton=P.defaults.notifier.closeButton,void 0!==o&&this.setContent(o),M.__internal.position.indexOf("top")<0?e.appendChild(this.element):e.insertBefore(this.element,e.firstChild),this.element.offsetWidth,u(this.element,n.visible),$(this.element,"click",this.__internal.clickHandler),this.delay(r)}return this},ondismiss:function(){},callback:r,dismiss:function(t){var o;return this.__internal.pushed&&(c(this),"function"==typeof this.ondismiss&&!1===this.ondismiss.call(this)||(w(this.element,"click",this.__internal.clickHandler),void 0!==this.element&&this.element.parentNode===e&&(this.__internal.transitionTimeout=setTimeout(this.__internal.transitionEndHandler,_.supported?1e3:100),d(this.element,n.visible),"function"==typeof this.callback&&this.callback.call(this,t)),o=this,i.splice(i.indexOf(o),1),o.__internal.pushed=!1)),this},delay:function(t){if(c(this),this.__internal.delay=void 0===t||isNaN(+t)?M.__internal.delay:+t,this.__internal.delay>0){var e=this;this.__internal.timer=setTimeout((function(){e.dismiss()}),1e3*this.__internal.delay)}return this},setContent:function(e){if("string"==typeof e?(g(this.element),this.element.innerHTML=e):e instanceof t.HTMLElement&&this.element.firstChild!==e&&(g(this.element),this.element.appendChild(e)),this.__internal.closeButton){var i=document.createElement("span");u(i,n.close),i.setAttribute("data-close",!0),this.element.appendChild(i)}return this},dismissOthers:function(){return M.dismissAll(this),this}},h.__internal||(h.__internal={pushed:!1,delay:void 0,timer:void 0,clickHandler:void 0,transitionEndHandler:void 0,transitionTimeout:void 0},h.__internal.clickHandler=k(h,a),h.__internal.transitionEndHandler=k(h,l)),h;var h}return{setting:function(t,e){if(r(this),void 0===e)return this.__internal[t];switch(t){case"position":this.__internal.position=e,a(this);break;case"delay":this.__internal.delay=e}return this},set:function(t,e){return this.setting(t,e),this},get:function(t){return this.setting(t)},create:function(t,e){r(this);var i=document.createElement("div");return i.className=n.message+("string"==typeof t&&""!==t?" "+n.prefix+t:""),l(i,e)},dismissAll:function(t){for(var e=i.slice(0),n=0;n<e.length;n+=1){var o=e[n];void 0!==t&&t===o||o.dismiss()}}}}();var P=new function(){var t={};function e(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t}function i(e){var i=t[e].dialog;return i&&"function"==typeof i.__init&&i.__init(i),i}return{defaults:c,dialog:function(n,o,r,s){if("function"!=typeof o)return i(n);if(this.hasOwnProperty(n))throw new Error("alertify.dialog: name already exists");var a=function(i,n,o,r){var s={dialog:null,factory:n};return void 0!==r&&(s.factory=function(){return e(new t[r].factory,new n)}),o||(s.dialog=e(new s.factory,T)),t[i]=s}(n,o,r,s);this[n]=r?function(){if(0===arguments.length)return a.dialog;var t=e(new a.factory,T);return t&&"function"==typeof t.__init&&t.__init(t),t.main.apply(t,arguments),t.show.apply(t)}:function(){if(a.dialog&&"function"==typeof a.dialog.__init&&a.dialog.__init(a.dialog),0===arguments.length)return a.dialog;var t=a.dialog;return t.main.apply(a.dialog,arguments),t.show.apply(a.dialog)}},closeAll:function(t){for(var e=h.slice(0),i=0;i<e.length;i+=1){var n=e[i];void 0!==t&&t===n||n.close()}},setting:function(t,e,n){if("notifier"===t)return M.setting(e,n);var o=i(t);return o?o.setting(e,n):void 0},set:function(t,e,i){return this.setting(t,e,i)},get:function(t,e){return this.setting(t,e)},notify:function(t,e,i,n){return M.create(e,n).push(t,i)},message:function(t,e,i){return M.create(null,i).push(t,e)},success:function(t,e,i){return M.create("success",i).push(t,e)},error:function(t,e,i){return M.create("error",i).push(t,e)},warning:function(t,e,i){return M.create("warning",i).push(t,e)},dismissAll:function(){M.dismissAll()}}};P.dialog("alert",(function(){return{main:function(t,e,i){var n,o,r;switch(arguments.length){case 1:o=t;break;case 2:"function"==typeof e?(o=t,r=e):(n=t,o=e);break;case 3:n=t,o=e,r=i}return this.set("title",n),this.set("message",o),this.set("onok",r),this},setup:function(){return{buttons:[{text:P.defaults.glossary.ok,key:n,invokeOnClose:!0,className:P.defaults.theme.ok}],focus:{element:0,select:!1},options:{maximizable:!1,resizable:!1}}},build:function(){},prepare:function(){},setMessage:function(t){this.setContent(t)},settings:{message:void 0,onok:void 0,label:void 0},settingUpdated:function(t,e,i){switch(t){case"message":this.setMessage(i);break;case"label":this.__internal.buttons[0].element&&(this.__internal.buttons[0].element.innerHTML=i)}},callback:function(t){if("function"==typeof this.get("onok")){var e=this.get("onok").call(this,t);void 0!==e&&(t.cancel=!e)}}}})),P.dialog("confirm",(function(){var t={timer:null,index:null,text:null,duration:null,task:function(i,n){if(n.isOpen()){if(n.__internal.buttons[t.index].element.innerHTML=t.text+" (&#8207;"+t.duration+"&#8207;) ",t.duration-=1,-1===t.duration){e(n);var o=n.__internal.buttons[t.index],r=S(t.index,o);"function"==typeof n.callback&&n.callback.apply(n,[r]),!1!==r.close&&n.close()}}else e(n)}};function e(e){null!==t.timer&&(clearInterval(t.timer),t.timer=null,e.__internal.buttons[t.index].element.innerHTML=t.text)}function o(i,n,o){e(i),t.duration=o,t.index=n,t.text=i.__internal.buttons[n].element.innerHTML,t.timer=setInterval(k(i,t.task),1e3),t.task(null,i)}return{main:function(t,e,i,n){var o,r,s,a;switch(arguments.length){case 1:r=t;break;case 2:r=t,s=e;break;case 3:r=t,s=e,a=i;break;case 4:o=t,r=e,s=i,a=n}return this.set("title",o),this.set("message",r),this.set("onok",s),this.set("oncancel",a),this},setup:function(){return{buttons:[{text:P.defaults.glossary.ok,key:i,className:P.defaults.theme.ok},{text:P.defaults.glossary.cancel,key:n,invokeOnClose:!0,className:P.defaults.theme.cancel}],focus:{element:0,select:!1},options:{maximizable:!1,resizable:!1}}},build:function(){},prepare:function(){},setMessage:function(t){this.setContent(t)},settings:{message:null,labels:null,onok:null,oncancel:null,defaultFocus:null,reverseButtons:null},settingUpdated:function(t,e,i){switch(t){case"message":this.setMessage(i);break;case"labels":"ok"in i&&this.__internal.buttons[0].element&&(this.__internal.buttons[0].text=i.ok,this.__internal.buttons[0].element.innerHTML=i.ok),"cancel"in i&&this.__internal.buttons[1].element&&(this.__internal.buttons[1].text=i.cancel,this.__internal.buttons[1].element.innerHTML=i.cancel);break;case"reverseButtons":!0===i?this.elements.buttons.primary.appendChild(this.__internal.buttons[0].element):this.elements.buttons.primary.appendChild(this.__internal.buttons[1].element);break;case"defaultFocus":this.__internal.focus.element="ok"===i?0:1}},callback:function(t){var i;switch(e(this),t.index){case 0:"function"==typeof this.get("onok")&&void 0!==(i=this.get("onok").call(this,t))&&(t.cancel=!i);break;case 1:"function"==typeof this.get("oncancel")&&void 0!==(i=this.get("oncancel").call(this,t))&&(t.cancel=!i)}},autoOk:function(t){return o(this,0,t),this},autoCancel:function(t){return o(this,1,t),this}}})),P.dialog("prompt",(function(){var e=document.createElement("INPUT"),o=document.createElement("P");return{main:function(t,e,i,n,o){var r,s,a,l,c;switch(arguments.length){case 1:s=t;break;case 2:s=t,a=e;break;case 3:s=t,a=e,l=i;break;case 4:s=t,a=e,l=i,c=n;break;case 5:r=t,s=e,a=i,l=n,c=o}return this.set("title",r),this.set("message",s),this.set("value",a),this.set("onok",l),this.set("oncancel",c),this},setup:function(){return{buttons:[{text:P.defaults.glossary.ok,key:i,className:P.defaults.theme.ok},{text:P.defaults.glossary.cancel,key:n,invokeOnClose:!0,className:P.defaults.theme.cancel}],focus:{element:e,select:!0},options:{maximizable:!1,resizable:!1}}},build:function(){e.className=P.defaults.theme.input,e.setAttribute("type","text"),e.value=this.get("value"),this.elements.content.appendChild(o),this.elements.content.appendChild(e)},prepare:function(){},setMessage:function(e){"string"==typeof e?(g(o),o.innerHTML=e):e instanceof t.HTMLElement&&o.firstChild!==e&&(g(o),o.appendChild(e))},settings:{message:void 0,labels:void 0,onok:void 0,oncancel:void 0,value:"",type:"text",reverseButtons:void 0},settingUpdated:function(t,i,n){switch(t){case"message":this.setMessage(n);break;case"value":e.value=n;break;case"type":switch(n){case"text":case"color":case"date":case"datetime-local":case"email":case"month":case"number":case"password":case"search":case"tel":case"time":case"week":e.type=n;break;default:e.type="text"}break;case"labels":n.ok&&this.__internal.buttons[0].element&&(this.__internal.buttons[0].element.innerHTML=n.ok),n.cancel&&this.__internal.buttons[1].element&&(this.__internal.buttons[1].element.innerHTML=n.cancel);break;case"reverseButtons":!0===n?this.elements.buttons.primary.appendChild(this.__internal.buttons[0].element):this.elements.buttons.primary.appendChild(this.__internal.buttons[1].element)}},callback:function(t){var i;switch(t.index){case 0:this.settings.value=e.value,"function"==typeof this.get("onok")&&void 0!==(i=this.get("onok").call(this,t,this.settings.value))&&(t.cancel=!i);break;case 1:"function"==typeof this.get("oncancel")&&void 0!==(i=this.get("oncancel").call(this,t))&&(t.cancel=!i),t.cancel||(e.value=this.settings.value)}}}})),"object"==typeof module&&"object"==typeof module.exports?module.exports=P:"function"==typeof define&&define.amd?define([],(function(){return P})):t.alertify||(t.alertify=P)}("undefined"!=typeof window?window:this),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).cookie=e()}(this,(function(){"use strict";var t=function(){return t.get.apply(t,arguments)},e=t.utils={isArray:Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},isPlainObject:function(t){return!!t&&"[object Object]"===Object.prototype.toString.call(t)},toArray:function(t){return Array.prototype.slice.call(t)},getKeys:Object.keys||function(t){var e=[],i="";for(i in t)t.hasOwnProperty(i)&&e.push(i);return e},encode:function(t){return String(t).replace(/[,;"\\=\s%]/g,(function(t){return encodeURIComponent(t)}))},decode:function(t){return decodeURIComponent(t)},retrieve:function(t,e){return null==t?e:t}};return t.defaults={},t.expiresMultiplier=86400,t.set=function(t,i,n){if(e.isPlainObject(t))for(var o in t)t.hasOwnProperty(o)&&this.set(o,t[o],i);else{var r=void 0!==(n=e.isPlainObject(n)?n:{expires:n}).expires?n.expires:this.defaults.expires||"",s=typeof r;"string"===s&&""!==r?r=new Date(r):"number"===s&&(r=new Date(+new Date+1e3*this.expiresMultiplier*r)),""!==r&&"toUTCString"in r&&(r=";expires="+r.toUTCString());var a=n.path||this.defaults.path;a=a?";path="+a:"";var l=n.domain||this.defaults.domain;l=l?";domain="+l:"";var c=n.secure||this.defaults.secure?";secure":"";!1===n.secure&&(c="");var h=n.sameSite||this.defaults.sameSite;h=h?";SameSite="+h:"",null===n.sameSite&&(h=""),document.cookie=e.encode(t)+"="+e.encode(i)+r+a+l+c+h}return this},t.setDefault=function(i,n,o){if(e.isPlainObject(i)){for(var r in i)void 0===this.get(r)&&this.set(r,i[r],n);return t}if(void 0===this.get(i))return this.set.apply(this,arguments)},t.remove=function(t){for(var i=0,n=(t=e.isArray(t)?t:e.toArray(arguments)).length;i<n;i++)this.set(t[i],"",-1);return this},t.removeSpecific=function(t,i){if(!i)return this.remove(t);t=e.isArray(t)?t:[t],i.expires=-1;for(var n=0,o=t.length;n<o;n++)this.set(t[n],"",i);return this},t.empty=function(){return this.remove(e.getKeys(this.all()))},t.get=function(t,i){var n=this.all();if(e.isArray(t)){for(var o={},r=0,s=t.length;r<s;r++){var a=t[r];o[a]=e.retrieve(n[a],i)}return o}return e.retrieve(n[t],i)},t.all=function(){if(""===document.cookie)return{};for(var t=document.cookie.split("; "),i={},n=0,o=t.length;n<o;n++){var r=t[n].split("="),s=e.decode(r.shift()),a=e.decode(r.join("="));i[s]=a}return i},t.enabled=function(){if(navigator.cookieEnabled)return!0;var e="_"===t.set("_","_").get("_");return t.remove("_"),e},t})),function(t,e,i){"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof exports&&"undefined"==typeof Meteor?module.exports=t(require("jquery")):t(e||i)}((function(t){"use strict";var e=function(e,i,n){var o={invalid:[],getCaret:function(){try{var t,i=0,n=e.get(0),r=document.selection,s=n.selectionStart;return r&&-1===navigator.appVersion.indexOf("MSIE 10")?((t=r.createRange()).moveStart("character",-o.val().length),i=t.text.length):(s||"0"===s)&&(i=s),i}catch(t){}},setCaret:function(t){try{if(e.is(":focus")){var i,n=e.get(0);n.setSelectionRange?n.setSelectionRange(t,t):((i=n.createTextRange()).collapse(!0),i.moveEnd("character",t),i.moveStart("character",t),i.select())}}catch(t){}},events:function(){e.on("keydown.mask",(function(t){e.data("mask-keycode",t.keyCode||t.which),e.data("mask-previus-value",e.val()),e.data("mask-previus-caret-pos",o.getCaret()),o.maskDigitPosMapOld=o.maskDigitPosMap})).on(t.jMaskGlobals.useInput?"input.mask":"keyup.mask",o.behaviour).on("paste.mask drop.mask",(function(){setTimeout((function(){e.keydown().keyup()}),100)})).on("change.mask",(function(){e.data("changed",!0)})).on("blur.mask",(function(){a===o.val()||e.data("changed")||e.trigger("change"),e.data("changed",!1)})).on("blur.mask",(function(){a=o.val()})).on("focus.mask",(function(e){!0===n.selectOnFocus&&t(e.target).select()})).on("focusout.mask",(function(){n.clearIfNotMatch&&!r.test(o.val())&&o.val("")}))},getRegexMask:function(){for(var t,e,n,o,r,a,l=[],c=0;c<i.length;c++)(t=s.translation[i.charAt(c)])?(e=t.pattern.toString().replace(/.{1}$|^.{1}/g,""),n=t.optional,(o=t.recursive)?(l.push(i.charAt(c)),r={digit:i.charAt(c),pattern:e}):l.push(n||o?e+"?":e)):l.push(i.charAt(c).replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"));return a=l.join(""),r&&(a=a.replace(new RegExp("("+r.digit+"(.*"+r.digit+")?)"),"($1)?").replace(new RegExp(r.digit,"g"),r.pattern)),new RegExp(a)},destroyEvents:function(){e.off(["input","keydown","keyup","paste","drop","blur","focusout",""].join(".mask "))},val:function(t){var i,n=e.is("input"),o=n?"val":"text";return arguments.length>0?(e[o]()!==t&&e[o](t),i=e):i=e[o](),i},calculateCaretPosition:function(t){var i=o.getMasked(),n=o.getCaret();if(t!==i){var r=e.data("mask-previus-caret-pos")||0,s=i.length,a=t.length,l=0,c=0,h=0,u=0,d=0;for(d=n;d<s&&o.maskDigitPosMap[d];d++)c++;for(d=n-1;d>=0&&o.maskDigitPosMap[d];d--)l++;for(d=n-1;d>=0;d--)o.maskDigitPosMap[d]&&h++;for(d=r-1;d>=0;d--)o.maskDigitPosMapOld[d]&&u++;if(n>a)n=10*s;else if(r>=n&&r!==a){if(!o.maskDigitPosMapOld[n]){var p=n;n-=u-h,n-=l,o.maskDigitPosMap[n]&&(n=p)}}else n>r&&(n+=h-u,n+=c)}return n},behaviour:function(i){i=i||window.event,o.invalid=[];var n=e.data("mask-keycode");if(-1===t.inArray(n,s.byPassKeys)){var r=o.getMasked(),a=o.getCaret(),l=e.data("mask-previus-value")||"";return setTimeout((function(){o.setCaret(o.calculateCaretPosition(l))}),t.jMaskGlobals.keyStrokeCompensation),o.val(r),o.setCaret(a),o.callbacks(i)}},getMasked:function(t,e){var r,a,l,c=[],h=void 0===e?o.val():e+"",u=0,d=i.length,p=0,f=h.length,m=1,g="push",y=-1,v=0,b=[];for(n.reverse?(g="unshift",m=-1,r=0,u=d-1,p=f-1,a=function(){return u>-1&&p>-1}):(r=d-1,a=function(){return u<d&&p<f});a();){var x=i.charAt(u),$=h.charAt(p),w=s.translation[x];w?($.match(w.pattern)?(c[g]($),w.recursive&&(-1===y?y=u:u===r&&u!==y&&(u=y-m),r===y&&(u-=m)),u+=m):$===l?(v--,l=void 0):w.optional?(u+=m,p-=m):w.fallback?(c[g](w.fallback),u+=m,p-=m):o.invalid.push({p:p,v:$,e:w.pattern}),p+=m):(t||c[g](x),$===x?(b.push(p),p+=m):(l=x,b.push(p+v),v++),u+=m)}var _=i.charAt(r);d!==f+1||s.translation[_]||c.push(_);var k=c.join("");return o.mapMaskdigitPositions(k,b,f),k},mapMaskdigitPositions:function(t,e,i){var r=n.reverse?t.length-i:0;o.maskDigitPosMap={};for(var s=0;s<e.length;s++)o.maskDigitPosMap[e[s]+r]=1},callbacks:function(t){var r=o.val(),s=r!==a,l=[r,t,e,n],c=function(t,e,i){"function"==typeof n[t]&&e&&n[t].apply(this,i)};c("onChange",!0===s,l),c("onKeyPress",!0===s,l),c("onComplete",r.length===i.length,l),c("onInvalid",o.invalid.length>0,[r,t,e,o.invalid,n])}};e=t(e);var r,s=this,a=o.val();i="function"==typeof i?i(o.val(),void 0,e,n):i,s.mask=i,s.options=n,s.remove=function(){var t=o.getCaret();return s.options.placeholder&&e.removeAttr("placeholder"),e.data("mask-maxlength")&&e.removeAttr("maxlength"),o.destroyEvents(),o.val(s.getCleanVal()),o.setCaret(t),e},s.getCleanVal=function(){return o.getMasked(!0)},s.getMaskedVal=function(t){return o.getMasked(!1,t)},s.init=function(a){if(a=a||!1,n=n||{},s.clearIfNotMatch=t.jMaskGlobals.clearIfNotMatch,s.byPassKeys=t.jMaskGlobals.byPassKeys,s.translation=t.extend({},t.jMaskGlobals.translation,n.translation),s=t.extend(!0,{},s,n),r=o.getRegexMask(),a)o.events(),o.val(o.getMasked());else{n.placeholder&&e.attr("placeholder",n.placeholder),e.data("mask")&&e.attr("autocomplete","off");for(var l=0,c=!0;l<i.length;l++){var h=s.translation[i.charAt(l)];if(h&&h.recursive){c=!1;break}}c&&e.attr("maxlength",i.length).data("mask-maxlength",!0),o.destroyEvents(),o.events();var u=o.getCaret();o.val(o.getMasked()),o.setCaret(u)}},s.init(!e.is("input"))};t.maskWatchers={};var i=function(){var i=t(this),o={},r="data-mask-",s=i.attr("data-mask");if(i.attr(r+"reverse")&&(o.reverse=!0),i.attr(r+"clearifnotmatch")&&(o.clearIfNotMatch=!0),"true"===i.attr(r+"selectonfocus")&&(o.selectOnFocus=!0),n(i,s,o))return i.data("mask",new e(this,s,o))},n=function(e,i,n){n=n||{};var o=t(e).data("mask"),r=JSON.stringify,s=t(e).val()||t(e).text();try{return"function"==typeof i&&(i=i(s)),"object"!=typeof o||r(o.options)!==r(n)||o.mask!==i}catch(t){}};t.fn.mask=function(i,o){o=o||{};var r=this.selector,s=t.jMaskGlobals,a=s.watchInterval,l=o.watchInputs||s.watchInputs,c=function(){if(n(this,i,o))return t(this).data("mask",new e(this,i,o))};return t(this).each(c),r&&""!==r&&l&&(clearInterval(t.maskWatchers[r]),t.maskWatchers[r]=setInterval((function(){t(document).find(r).each(c)}),a)),this},t.fn.masked=function(t){return this.data("mask").getMaskedVal(t)},t.fn.unmask=function(){return clearInterval(t.maskWatchers[this.selector]),delete t.maskWatchers[this.selector],this.each((function(){var e=t(this).data("mask");e&&e.remove().removeData("mask")}))},t.fn.cleanVal=function(){return this.data("mask").getCleanVal()},t.applyDataMask=function(e){((e=e||t.jMaskGlobals.maskElements)instanceof t?e:t(e)).filter(t.jMaskGlobals.dataMaskAttr).each(i)};var o,r,s,a={maskElements:"input,td,span,div",dataMaskAttr:"*[data-mask]",dataMask:!0,watchInterval:300,watchInputs:!0,keyStrokeCompensation:10,useInput:!/Chrome\/[2-4][0-9]|SamsungBrowser/.test(window.navigator.userAgent)&&(o="input",s=document.createElement("div"),(r=(o="on"+o)in s)||(s.setAttribute(o,"return;"),r="function"==typeof s[o]),s=null,r),watchDataMask:!1,byPassKeys:[9,16,17,18,36,37,38,39,40,91],translation:{0:{pattern:/\d/},9:{pattern:/\d/,optional:!0},"#":{pattern:/\d/,recursive:!0},A:{pattern:/[a-zA-Z0-9]/},S:{pattern:/[a-zA-Z]/}}};t.jMaskGlobals=t.jMaskGlobals||{},(a=t.jMaskGlobals=t.extend(!0,{},a,t.jMaskGlobals)).dataMask&&t.applyDataMask(),setInterval((function(){t.jMaskGlobals.watchDataMask&&t.applyDataMask()}),a.watchInterval)}),window.jQuery,window.Zepto),
/*!
 * Chart.js v3.7.1
 * https://www.chartjs.org
 * (c) 2022 Chart.js Contributors
 * Released under the MIT License
 */
function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).Chart=e()}(this,(function(){"use strict";const t="undefined"==typeof window?function(t){return t()}:window.requestAnimationFrame;function e(e,i,n){const o=n||(t=>Array.prototype.slice.call(t));let r=!1,s=[];return function(...n){s=o(n),r||(r=!0,t.call(window,(()=>{r=!1,e.apply(i,s)})))}}function i(t,e){let i;return function(...n){return e?(clearTimeout(i),i=setTimeout(t,e,n)):t.apply(this,n),e}}const n=t=>"start"===t?"left":"end"===t?"right":"center",o=(t,e,i)=>"start"===t?e:"end"===t?i:(e+i)/2,r=(t,e,i,n)=>t===(n?"left":"right")?i:"center"===t?(e+i)/2:e;var s=new class{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,e,i,n){const o=e.listeners[n],r=e.duration;o.forEach((n=>n({chart:t,initial:e.initial,numSteps:r,currentStep:Math.min(i-e.start,r)})))}_refresh(){this._request||(this._running=!0,this._request=t.call(window,(()=>{this._update(),this._request=null,this._running&&this._refresh()})))}_update(t=Date.now()){let e=0;this._charts.forEach(((i,n)=>{if(!i.running||!i.items.length)return;const o=i.items;let r,s=o.length-1,a=!1;for(;s>=0;--s)r=o[s],r._active?(r._total>i.duration&&(i.duration=r._total),r.tick(t),a=!0):(o[s]=o[o.length-1],o.pop());a&&(n.draw(),this._notify(n,i,t,"progress")),o.length||(i.running=!1,this._notify(n,i,t,"complete"),i.initial=!1),e+=o.length})),this._lastDate=t,0===e&&(this._running=!1)}_getAnims(t){const e=this._charts;let i=e.get(t);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},e.set(t,i)),i}listen(t,e,i){this._getAnims(t).listeners[e].push(i)}add(t,e){e&&e.length&&this._getAnims(t).items.push(...e)}has(t){return this._getAnims(t).items.length>0}start(t){const e=this._charts.get(t);e&&(e.running=!0,e.start=Date.now(),e.duration=e.items.reduce(((t,e)=>Math.max(t,e._duration)),0),this._refresh())}running(t){if(!this._running)return!1;const e=this._charts.get(t);return!!(e&&e.running&&e.items.length)}stop(t){const e=this._charts.get(t);if(!e||!e.items.length)return;const i=e.items;let n=i.length-1;for(;n>=0;--n)i[n].cancel();e.items=[],this._notify(t,e,Date.now(),"complete")}remove(t){return this._charts.delete(t)}};
/*!
 * @kurkle/color v0.1.9
 * https://github.com/kurkle/color#readme
 * (c) 2020 Jukka Kurkela
 * Released under the MIT License
 */const a={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},l="0123456789ABCDEF",c=t=>l[15&t],h=t=>l[(240&t)>>4]+l[15&t],u=t=>(240&t)>>4==(15&t);function d(t){var e=function(t){return u(t.r)&&u(t.g)&&u(t.b)&&u(t.a)}(t)?c:h;return t?"#"+e(t.r)+e(t.g)+e(t.b)+(t.a<255?e(t.a):""):t}function p(t){return t+.5|0}const f=(t,e,i)=>Math.max(Math.min(t,i),e);function m(t){return f(p(2.55*t),0,255)}function g(t){return f(p(255*t),0,255)}function y(t){return f(p(t/2.55)/100,0,1)}function v(t){return f(p(100*t),0,100)}const b=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;const x=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function $(t,e,i){const n=e*Math.min(i,1-i),o=(e,o=(e+t/30)%12)=>i-n*Math.max(Math.min(o-3,9-o,1),-1);return[o(0),o(8),o(4)]}function w(t,e,i){const n=(n,o=(n+t/60)%6)=>i-i*e*Math.max(Math.min(o,4-o,1),0);return[n(5),n(3),n(1)]}function _(t,e,i){const n=$(t,1,.5);let o;for(e+i>1&&(o=1/(e+i),e*=o,i*=o),o=0;o<3;o++)n[o]*=1-e-i,n[o]+=e;return n}function k(t){const e=t.r/255,i=t.g/255,n=t.b/255,o=Math.max(e,i,n),r=Math.min(e,i,n),s=(o+r)/2;let a,l,c;return o!==r&&(c=o-r,l=s>.5?c/(2-o-r):c/(o+r),a=o===e?(i-n)/c+(i<n?6:0):o===i?(n-e)/c+2:(e-i)/c+4,a=60*a+.5),[0|a,l||0,s]}function S(t,e,i,n){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,i,n)).map(g)}function C(t,e,i){return S($,t,e,i)}function T(t){return(t%360+360)%360}function M(t){const e=x.exec(t);let i,n=255;if(!e)return;e[5]!==i&&(n=e[6]?m(+e[5]):g(+e[5]));const o=T(+e[2]),r=+e[3]/100,s=+e[4]/100;return i="hwb"===e[1]?function(t,e,i){return S(_,t,e,i)}(o,r,s):"hsv"===e[1]?function(t,e,i){return S(w,t,e,i)}(o,r,s):C(o,r,s),{r:i[0],g:i[1],b:i[2],a:n}}const P={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},E={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};let I;function A(t){I||(I=function(){const t={},e=Object.keys(E),i=Object.keys(P);let n,o,r,s,a;for(n=0;n<e.length;n++){for(s=a=e[n],o=0;o<i.length;o++)r=i[o],a=a.replace(r,P[r]);r=parseInt(E[s],16),t[a]=[r>>16&255,r>>8&255,255&r]}return t}(),I.transparent=[0,0,0,0]);const e=I[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:4===e.length?e[3]:255}}function D(t,e,i){if(t){let n=k(t);n[e]=Math.max(0,Math.min(n[e]+n[e]*i,0===e?360:1)),n=C(n),t.r=n[0],t.g=n[1],t.b=n[2]}}function R(t,e){return t?Object.assign(e||{},t):t}function L(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=g(t[3]))):(e=R(t,{r:0,g:0,b:0,a:1})).a=g(e.a),e}function O(t){return"r"===t.charAt(0)?function(t){const e=b.exec(t);let i,n,o,r=255;if(e){if(e[7]!==i){const t=+e[7];r=255&(e[8]?m(t):255*t)}return i=+e[1],n=+e[3],o=+e[5],i=255&(e[2]?m(i):i),n=255&(e[4]?m(n):n),o=255&(e[6]?m(o):o),{r:i,g:n,b:o,a:r}}}(t):M(t)}class z{constructor(t){if(t instanceof z)return t;const e=typeof t;let i;var n,o,r;"object"===e?i=L(t):"string"===e&&(r=(n=t).length,"#"===n[0]&&(4===r||5===r?o={r:255&17*a[n[1]],g:255&17*a[n[2]],b:255&17*a[n[3]],a:5===r?17*a[n[4]]:255}:7!==r&&9!==r||(o={r:a[n[1]]<<4|a[n[2]],g:a[n[3]]<<4|a[n[4]],b:a[n[5]]<<4|a[n[6]],a:9===r?a[n[7]]<<4|a[n[8]]:255})),i=o||A(t)||O(t)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var t=R(this._rgb);return t&&(t.a=y(t.a)),t}set rgb(t){this._rgb=L(t)}rgbString(){return this._valid?(t=this._rgb)&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${y(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`):this._rgb;var t}hexString(){return this._valid?d(this._rgb):this._rgb}hslString(){return this._valid?function(t){if(!t)return;const e=k(t),i=e[0],n=v(e[1]),o=v(e[2]);return t.a<255?`hsla(${i}, ${n}%, ${o}%, ${y(t.a)})`:`hsl(${i}, ${n}%, ${o}%)`}(this._rgb):this._rgb}mix(t,e){const i=this;if(t){const n=i.rgb,o=t.rgb;let r;const s=e===r?.5:e,a=2*s-1,l=n.a-o.a,c=((a*l==-1?a:(a+l)/(1+a*l))+1)/2;r=1-c,n.r=255&c*n.r+r*o.r+.5,n.g=255&c*n.g+r*o.g+.5,n.b=255&c*n.b+r*o.b+.5,n.a=s*n.a+(1-s)*o.a,i.rgb=n}return i}clone(){return new z(this.rgb)}alpha(t){return this._rgb.a=g(t),this}clearer(t){return this._rgb.a*=1-t,this}greyscale(){const t=this._rgb,e=p(.3*t.r+.59*t.g+.11*t.b);return t.r=t.g=t.b=e,this}opaquer(t){return this._rgb.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return D(this._rgb,2,t),this}darken(t){return D(this._rgb,2,-t),this}saturate(t){return D(this._rgb,1,t),this}desaturate(t){return D(this._rgb,1,-t),this}rotate(t){return function(t,e){var i=k(t);i[0]=T(i[0]+e),i=C(i),t.r=i[0],t.g=i[1],t.b=i[2]}(this._rgb,t),this}}function F(t){return new z(t)}const B=t=>t instanceof CanvasGradient||t instanceof CanvasPattern;function N(t){return B(t)?t:F(t)}function H(t){return B(t)?t:F(t).saturate(.5).darken(.1).hexString()}function W(){}const j=function(){let t=0;return function(){return t++}}();function Y(t){return null==t}function V(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return"[object"===e.substr(0,7)&&"Array]"===e.substr(-6)}function U(t){return null!==t&&"[object Object]"===Object.prototype.toString.call(t)}const q=t=>("number"==typeof t||t instanceof Number)&&isFinite(+t);function X(t,e){return q(t)?t:e}function G(t,e){return void 0===t?e:t}const Z=(t,e)=>"string"==typeof t&&t.endsWith("%")?parseFloat(t)/100:t/e,K=(t,e)=>"string"==typeof t&&t.endsWith("%")?parseFloat(t)/100*e:+t;function Q(t,e,i){if(t&&"function"==typeof t.call)return t.apply(i,e)}function J(t,e,i,n){let o,r,s;if(V(t))if(r=t.length,n)for(o=r-1;o>=0;o--)e.call(i,t[o],o);else for(o=0;o<r;o++)e.call(i,t[o],o);else if(U(t))for(s=Object.keys(t),r=s.length,o=0;o<r;o++)e.call(i,t[s[o]],s[o])}function tt(t,e){let i,n,o,r;if(!t||!e||t.length!==e.length)return!1;for(i=0,n=t.length;i<n;++i)if(o=t[i],r=e[i],o.datasetIndex!==r.datasetIndex||o.index!==r.index)return!1;return!0}function et(t){if(V(t))return t.map(et);if(U(t)){const e=Object.create(null),i=Object.keys(t),n=i.length;let o=0;for(;o<n;++o)e[i[o]]=et(t[i[o]]);return e}return t}function it(t){return-1===["__proto__","prototype","constructor"].indexOf(t)}function nt(t,e,i,n){if(!it(t))return;const o=e[t],r=i[t];U(o)&&U(r)?ot(o,r,n):e[t]=et(r)}function ot(t,e,i){const n=V(e)?e:[e],o=n.length;if(!U(t))return t;const r=(i=i||{}).merger||nt;for(let s=0;s<o;++s){if(!U(e=n[s]))continue;const o=Object.keys(e);for(let n=0,s=o.length;n<s;++n)r(o[n],t,e,i)}return t}function rt(t,e){return ot(t,e,{merger:st})}function st(t,e,i){if(!it(t))return;const n=e[t],o=i[t];U(n)&&U(o)?rt(n,o):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=et(o))}function at(t,e){const i=t.indexOf(".",e);return-1===i?t.length:i}function lt(t,e){if(""===e)return t;let i=0,n=at(e,i);for(;t&&n>i;)t=t[e.substr(i,n-i)],i=n+1,n=at(e,i);return t}function ct(t){return t.charAt(0).toUpperCase()+t.slice(1)}const ht=t=>void 0!==t,ut=t=>"function"==typeof t,dt=(t,e)=>{if(t.size!==e.size)return!1;for(const i of t)if(!e.has(i))return!1;return!0};function pt(t){return"mouseup"===t.type||"click"===t.type||"contextmenu"===t.type}const ft=Object.create(null),mt=Object.create(null);function gt(t,e){if(!e)return t;const i=e.split(".");for(let e=0,n=i.length;e<n;++e){const n=i[e];t=t[n]||(t[n]=Object.create(null))}return t}function yt(t,e,i){return"string"==typeof e?ot(gt(t,e),i):ot(gt(t,""),e)}var vt=new class{constructor(t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=t=>t.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(t,e)=>H(e.backgroundColor),this.hoverBorderColor=(t,e)=>H(e.borderColor),this.hoverColor=(t,e)=>H(e.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t)}set(t,e){return yt(this,t,e)}get(t){return gt(this,t)}describe(t,e){return yt(mt,t,e)}override(t,e){return yt(ft,t,e)}route(t,e,i,n){const o=gt(this,t),r=gt(this,i),s="_"+e;Object.defineProperties(o,{[s]:{value:o[e],writable:!0},[e]:{enumerable:!0,get(){const t=this[s],e=r[n];return U(t)?Object.assign({},e,t):G(t,e)},set(t){this[s]=t}}})}}({_scriptable:t=>!t.startsWith("on"),_indexable:t=>"events"!==t,hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}});const bt=Math.PI,xt=2*bt,$t=xt+bt,wt=Number.POSITIVE_INFINITY,_t=bt/180,kt=bt/2,St=bt/4,Ct=2*bt/3,Tt=Math.log10,Mt=Math.sign;function Pt(t){const e=Math.round(t);t=At(t,e,t/1e3)?e:t;const i=Math.pow(10,Math.floor(Tt(t))),n=t/i;return(n<=1?1:n<=2?2:n<=5?5:10)*i}function Et(t){const e=[],i=Math.sqrt(t);let n;for(n=1;n<i;n++)t%n==0&&(e.push(n),e.push(t/n));return i===(0|i)&&e.push(i),e.sort(((t,e)=>t-e)).pop(),e}function It(t){return!isNaN(parseFloat(t))&&isFinite(t)}function At(t,e,i){return Math.abs(t-e)<i}function Dt(t,e){const i=Math.round(t);return i-e<=t&&i+e>=t}function Rt(t,e,i){let n,o,r;for(n=0,o=t.length;n<o;n++)r=t[n][i],isNaN(r)||(e.min=Math.min(e.min,r),e.max=Math.max(e.max,r))}function Lt(t){return t*(bt/180)}function Ot(t){return t*(180/bt)}function zt(t){if(!q(t))return;let e=1,i=0;for(;Math.round(t*e)/e!==t;)e*=10,i++;return i}function Ft(t,e){const i=e.x-t.x,n=e.y-t.y,o=Math.sqrt(i*i+n*n);let r=Math.atan2(n,i);return r<-.5*bt&&(r+=xt),{angle:r,distance:o}}function Bt(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function Nt(t,e){return(t-e+$t)%xt-bt}function Ht(t){return(t%xt+xt)%xt}function Wt(t,e,i,n){const o=Ht(t),r=Ht(e),s=Ht(i),a=Ht(r-o),l=Ht(s-o),c=Ht(o-r),h=Ht(o-s);return o===r||o===s||n&&r===s||a>l&&c<h}function jt(t,e,i){return Math.max(e,Math.min(i,t))}function Yt(t){return jt(t,-32768,32767)}function Vt(t,e,i,n=1e-6){return t>=Math.min(e,i)-n&&t<=Math.max(e,i)+n}function Ut(t){return!t||Y(t.size)||Y(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function qt(t,e,i,n,o){let r=e[o];return r||(r=e[o]=t.measureText(o).width,i.push(o)),r>n&&(n=r),n}function Xt(t,e,i,n){let o=(n=n||{}).data=n.data||{},r=n.garbageCollect=n.garbageCollect||[];n.font!==e&&(o=n.data={},r=n.garbageCollect=[],n.font=e),t.save(),t.font=e;let s=0;const a=i.length;let l,c,h,u,d;for(l=0;l<a;l++)if(u=i[l],null!=u&&!0!==V(u))s=qt(t,o,r,s,u);else if(V(u))for(c=0,h=u.length;c<h;c++)d=u[c],null==d||V(d)||(s=qt(t,o,r,s,d));t.restore();const p=r.length/2;if(p>i.length){for(l=0;l<p;l++)delete o[r[l]];r.splice(0,p)}return s}function Gt(t,e,i){const n=t.currentDevicePixelRatio,o=0!==i?Math.max(i/2,.5):0;return Math.round((e-o)*n)/n+o}function Zt(t,e){(e=e||t.getContext("2d")).save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore()}function Kt(t,e,i,n){let o,r,s,a,l;const c=e.pointStyle,h=e.rotation,u=e.radius;let d=(h||0)*_t;if(c&&"object"==typeof c&&(o=c.toString(),"[object HTMLImageElement]"===o||"[object HTMLCanvasElement]"===o))return t.save(),t.translate(i,n),t.rotate(d),t.drawImage(c,-c.width/2,-c.height/2,c.width,c.height),void t.restore();if(!(isNaN(u)||u<=0)){switch(t.beginPath(),c){default:t.arc(i,n,u,0,xt),t.closePath();break;case"triangle":t.moveTo(i+Math.sin(d)*u,n-Math.cos(d)*u),d+=Ct,t.lineTo(i+Math.sin(d)*u,n-Math.cos(d)*u),d+=Ct,t.lineTo(i+Math.sin(d)*u,n-Math.cos(d)*u),t.closePath();break;case"rectRounded":l=.516*u,a=u-l,r=Math.cos(d+St)*a,s=Math.sin(d+St)*a,t.arc(i-r,n-s,l,d-bt,d-kt),t.arc(i+s,n-r,l,d-kt,d),t.arc(i+r,n+s,l,d,d+kt),t.arc(i-s,n+r,l,d+kt,d+bt),t.closePath();break;case"rect":if(!h){a=Math.SQRT1_2*u,t.rect(i-a,n-a,2*a,2*a);break}d+=St;case"rectRot":r=Math.cos(d)*u,s=Math.sin(d)*u,t.moveTo(i-r,n-s),t.lineTo(i+s,n-r),t.lineTo(i+r,n+s),t.lineTo(i-s,n+r),t.closePath();break;case"crossRot":d+=St;case"cross":r=Math.cos(d)*u,s=Math.sin(d)*u,t.moveTo(i-r,n-s),t.lineTo(i+r,n+s),t.moveTo(i+s,n-r),t.lineTo(i-s,n+r);break;case"star":r=Math.cos(d)*u,s=Math.sin(d)*u,t.moveTo(i-r,n-s),t.lineTo(i+r,n+s),t.moveTo(i+s,n-r),t.lineTo(i-s,n+r),d+=St,r=Math.cos(d)*u,s=Math.sin(d)*u,t.moveTo(i-r,n-s),t.lineTo(i+r,n+s),t.moveTo(i+s,n-r),t.lineTo(i-s,n+r);break;case"line":r=Math.cos(d)*u,s=Math.sin(d)*u,t.moveTo(i-r,n-s),t.lineTo(i+r,n+s);break;case"dash":t.moveTo(i,n),t.lineTo(i+Math.cos(d)*u,n+Math.sin(d)*u)}t.fill(),e.borderWidth>0&&t.stroke()}}function Qt(t,e,i){return i=i||.5,!e||t&&t.x>e.left-i&&t.x<e.right+i&&t.y>e.top-i&&t.y<e.bottom+i}function Jt(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function te(t){t.restore()}function ee(t,e,i,n,o){if(!e)return t.lineTo(i.x,i.y);if("middle"===o){const n=(e.x+i.x)/2;t.lineTo(n,e.y),t.lineTo(n,i.y)}else"after"===o!=!!n?t.lineTo(e.x,i.y):t.lineTo(i.x,e.y);t.lineTo(i.x,i.y)}function ie(t,e,i,n){if(!e)return t.lineTo(i.x,i.y);t.bezierCurveTo(n?e.cp1x:e.cp2x,n?e.cp1y:e.cp2y,n?i.cp2x:i.cp1x,n?i.cp2y:i.cp1y,i.x,i.y)}function ne(t,e,i,n,o,r={}){const s=V(e)?e:[e],a=r.strokeWidth>0&&""!==r.strokeColor;let l,c;for(t.save(),t.font=o.string,function(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]);Y(e.rotation)||t.rotate(e.rotation);e.color&&(t.fillStyle=e.color);e.textAlign&&(t.textAlign=e.textAlign);e.textBaseline&&(t.textBaseline=e.textBaseline)}(t,r),l=0;l<s.length;++l)c=s[l],a&&(r.strokeColor&&(t.strokeStyle=r.strokeColor),Y(r.strokeWidth)||(t.lineWidth=r.strokeWidth),t.strokeText(c,i,n,r.maxWidth)),t.fillText(c,i,n,r.maxWidth),oe(t,i,n,c,r),n+=o.lineHeight;t.restore()}function oe(t,e,i,n,o){if(o.strikethrough||o.underline){const r=t.measureText(n),s=e-r.actualBoundingBoxLeft,a=e+r.actualBoundingBoxRight,l=i-r.actualBoundingBoxAscent,c=i+r.actualBoundingBoxDescent,h=o.strikethrough?(l+c)/2:c;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=o.decorationWidth||2,t.moveTo(s,h),t.lineTo(a,h),t.stroke()}}function re(t,e){const{x:i,y:n,w:o,h:r,radius:s}=e;t.arc(i+s.topLeft,n+s.topLeft,s.topLeft,-kt,bt,!0),t.lineTo(i,n+r-s.bottomLeft),t.arc(i+s.bottomLeft,n+r-s.bottomLeft,s.bottomLeft,bt,kt,!0),t.lineTo(i+o-s.bottomRight,n+r),t.arc(i+o-s.bottomRight,n+r-s.bottomRight,s.bottomRight,kt,0,!0),t.lineTo(i+o,n+s.topRight),t.arc(i+o-s.topRight,n+s.topRight,s.topRight,0,-kt,!0),t.lineTo(i+s.topLeft,n)}function se(t,e,i){i=i||(i=>t[i]<e);let n,o=t.length-1,r=0;for(;o-r>1;)n=r+o>>1,i(n)?r=n:o=n;return{lo:r,hi:o}}const ae=(t,e,i)=>se(t,i,(n=>t[n][e]<i)),le=(t,e,i)=>se(t,i,(n=>t[n][e]>=i));function ce(t,e,i){let n=0,o=t.length;for(;n<o&&t[n]<e;)n++;for(;o>n&&t[o-1]>i;)o--;return n>0||o<t.length?t.slice(n,o):t}const he=["push","pop","shift","splice","unshift"];function ue(t,e){t._chartjs?t._chartjs.listeners.push(e):(Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),he.forEach((e=>{const i="_onData"+ct(e),n=t[e];Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value(...e){const o=n.apply(this,e);return t._chartjs.listeners.forEach((t=>{"function"==typeof t[i]&&t[i](...e)})),o}})})))}function de(t,e){const i=t._chartjs;if(!i)return;const n=i.listeners,o=n.indexOf(e);-1!==o&&n.splice(o,1),n.length>0||(he.forEach((e=>{delete t[e]})),delete t._chartjs)}function pe(t){const e=new Set;let i,n;for(i=0,n=t.length;i<n;++i)e.add(t[i]);return e.size===n?t:Array.from(e)}function fe(){return"undefined"!=typeof window&&"undefined"!=typeof document}function me(t){let e=t.parentNode;return e&&"[object ShadowRoot]"===e.toString()&&(e=e.host),e}function ge(t,e,i){let n;return"string"==typeof t?(n=parseInt(t,10),-1!==t.indexOf("%")&&(n=n/100*e.parentNode[i])):n=t,n}const ye=t=>window.getComputedStyle(t,null);function ve(t,e){return ye(t).getPropertyValue(e)}const be=["top","right","bottom","left"];function xe(t,e,i){const n={};i=i?"-"+i:"";for(let o=0;o<4;o++){const r=be[o];n[r]=parseFloat(t[e+"-"+r+i])||0}return n.width=n.left+n.right,n.height=n.top+n.bottom,n}function $e(t,e){const{canvas:i,currentDevicePixelRatio:n}=e,o=ye(i),r="border-box"===o.boxSizing,s=xe(o,"padding"),a=xe(o,"border","width"),{x:l,y:c,box:h}=function(t,e){const i=t.native||t,n=i.touches,o=n&&n.length?n[0]:i,{offsetX:r,offsetY:s}=o;let a,l,c=!1;if(((t,e,i)=>(t>0||e>0)&&(!i||!i.shadowRoot))(r,s,i.target))a=r,l=s;else{const t=e.getBoundingClientRect();a=o.clientX-t.left,l=o.clientY-t.top,c=!0}return{x:a,y:l,box:c}}(t,i),u=s.left+(h&&a.left),d=s.top+(h&&a.top);let{width:p,height:f}=e;return r&&(p-=s.width+a.width,f-=s.height+a.height),{x:Math.round((l-u)/p*i.width/n),y:Math.round((c-d)/f*i.height/n)}}const we=t=>Math.round(10*t)/10;function _e(t,e,i,n){const o=ye(t),r=xe(o,"margin"),s=ge(o.maxWidth,t,"clientWidth")||wt,a=ge(o.maxHeight,t,"clientHeight")||wt,l=function(t,e,i){let n,o;if(void 0===e||void 0===i){const r=me(t);if(r){const t=r.getBoundingClientRect(),s=ye(r),a=xe(s,"border","width"),l=xe(s,"padding");e=t.width-l.width-a.width,i=t.height-l.height-a.height,n=ge(s.maxWidth,r,"clientWidth"),o=ge(s.maxHeight,r,"clientHeight")}else e=t.clientWidth,i=t.clientHeight}return{width:e,height:i,maxWidth:n||wt,maxHeight:o||wt}}(t,e,i);let{width:c,height:h}=l;if("content-box"===o.boxSizing){const t=xe(o,"border","width"),e=xe(o,"padding");c-=e.width+t.width,h-=e.height+t.height}return c=Math.max(0,c-r.width),h=Math.max(0,n?Math.floor(c/n):h-r.height),c=we(Math.min(c,s,l.maxWidth)),h=we(Math.min(h,a,l.maxHeight)),c&&!h&&(h=we(c/2)),{width:c,height:h}}function ke(t,e,i){const n=e||1,o=Math.floor(t.height*n),r=Math.floor(t.width*n);t.height=o/n,t.width=r/n;const s=t.canvas;return s.style&&(i||!s.style.height&&!s.style.width)&&(s.style.height=`${t.height}px`,s.style.width=`${t.width}px`),(t.currentDevicePixelRatio!==n||s.height!==o||s.width!==r)&&(t.currentDevicePixelRatio=n,s.height=o,s.width=r,t.ctx.setTransform(n,0,0,n,0,0),!0)}const Se=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};window.addEventListener("test",null,e),window.removeEventListener("test",null,e)}catch(t){}return t}();function Ce(t,e){const i=ve(t,e),n=i&&i.match(/^(\d+)(\.\d+)?px$/);return n?+n[1]:void 0}function Te(t,e){return"native"in t?{x:t.x,y:t.y}:$e(t,e)}function Me(t,e,i,n){const{controller:o,data:r,_sorted:s}=t,a=o._cachedMeta.iScale;if(a&&e===a.axis&&"r"!==e&&s&&r.length){const t=a._reversePixels?le:ae;if(!n)return t(r,e,i);if(o._sharedOptions){const n=r[0],o="function"==typeof n.getRange&&n.getRange(e);if(o){const n=t(r,e,i-o),s=t(r,e,i+o);return{lo:n.lo,hi:s.hi}}}}return{lo:0,hi:r.length-1}}function Pe(t,e,i,n,o){const r=t.getSortedVisibleDatasetMetas(),s=i[e];for(let t=0,i=r.length;t<i;++t){const{index:i,data:a}=r[t],{lo:l,hi:c}=Me(r[t],e,s,o);for(let t=l;t<=c;++t){const e=a[t];e.skip||n(e,i,t)}}}function Ee(t,e,i,n){const o=[];if(!Qt(e,t.chartArea,t._minPadding))return o;return Pe(t,i,e,(function(t,i,r){t.inRange(e.x,e.y,n)&&o.push({element:t,datasetIndex:i,index:r})}),!0),o}function Ie(t,e,i,n,o){let r=[];const s=function(t){const e=-1!==t.indexOf("x"),i=-1!==t.indexOf("y");return function(t,n){const o=e?Math.abs(t.x-n.x):0,r=i?Math.abs(t.y-n.y):0;return Math.sqrt(Math.pow(o,2)+Math.pow(r,2))}}(i);let a=Number.POSITIVE_INFINITY;return Pe(t,i,e,(function(i,l,c){const h=i.inRange(e.x,e.y,o);if(n&&!h)return;const u=i.getCenterPoint(o);if(!Qt(u,t.chartArea,t._minPadding)&&!h)return;const d=s(e,u);d<a?(r=[{element:i,datasetIndex:l,index:c}],a=d):d===a&&r.push({element:i,datasetIndex:l,index:c})})),r}function Ae(t,e,i,n,o){return Qt(e,t.chartArea,t._minPadding)?"r"!==i||n?Ie(t,e,i,n,o):function(t,e,i,n){let o=[];return Pe(t,i,e,(function(t,i,r){const{startAngle:s,endAngle:a}=t.getProps(["startAngle","endAngle"],n),{angle:l}=Ft(t,{x:e.x,y:e.y});Wt(l,s,a)&&o.push({element:t,datasetIndex:i,index:r})})),o}(t,e,i,o):[]}function De(t,e,i,n){const o=Te(e,t),r=[],s=i.axis,a="x"===s?"inXRange":"inYRange";let l=!1;return function(t,e){const i=t.getSortedVisibleDatasetMetas();let n,o,r;for(let t=0,s=i.length;t<s;++t){({index:n,data:o}=i[t]);for(let t=0,i=o.length;t<i;++t)r=o[t],r.skip||e(r,n,t)}}(t,((t,e,i)=>{t[a](o[s],n)&&r.push({element:t,datasetIndex:e,index:i}),t.inRange(o.x,o.y,n)&&(l=!0)})),i.intersect&&!l?[]:r}var Re={modes:{index(t,e,i,n){const o=Te(e,t),r=i.axis||"x",s=i.intersect?Ee(t,o,r,n):Ae(t,o,r,!1,n),a=[];return s.length?(t.getSortedVisibleDatasetMetas().forEach((t=>{const e=s[0].index,i=t.data[e];i&&!i.skip&&a.push({element:i,datasetIndex:t.index,index:e})})),a):[]},dataset(t,e,i,n){const o=Te(e,t),r=i.axis||"xy";let s=i.intersect?Ee(t,o,r,n):Ae(t,o,r,!1,n);if(s.length>0){const e=s[0].datasetIndex,i=t.getDatasetMeta(e).data;s=[];for(let t=0;t<i.length;++t)s.push({element:i[t],datasetIndex:e,index:t})}return s},point:(t,e,i,n)=>Ee(t,Te(e,t),i.axis||"xy",n),nearest:(t,e,i,n)=>Ae(t,Te(e,t),i.axis||"xy",i.intersect,n),x:(t,e,i,n)=>De(t,e,{axis:"x",intersect:i.intersect},n),y:(t,e,i,n)=>De(t,e,{axis:"y",intersect:i.intersect},n)}};const Le=new RegExp(/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/),Oe=new RegExp(/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/);function ze(t,e){const i=(""+t).match(Le);if(!i||"normal"===i[1])return 1.2*e;switch(t=+i[2],i[3]){case"px":return t;case"%":t/=100}return e*t}function Fe(t,e){const i={},n=U(e),o=n?Object.keys(e):e,r=U(t)?n?i=>G(t[i],t[e[i]]):e=>t[e]:()=>t;for(const t of o)i[t]=+r(t)||0;return i}function Be(t){return Fe(t,{top:"y",right:"x",bottom:"y",left:"x"})}function Ne(t){return Fe(t,["topLeft","topRight","bottomLeft","bottomRight"])}function He(t){const e=Be(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function We(t,e){t=t||{},e=e||vt.font;let i=G(t.size,e.size);"string"==typeof i&&(i=parseInt(i,10));let n=G(t.style,e.style);n&&!(""+n).match(Oe)&&(console.warn('Invalid font style specified: "'+n+'"'),n="");const o={family:G(t.family,e.family),lineHeight:ze(G(t.lineHeight,e.lineHeight),i),size:i,style:n,weight:G(t.weight,e.weight),string:""};return o.string=Ut(o),o}function je(t,e,i,n){let o,r,s,a=!0;for(o=0,r=t.length;o<r;++o)if(s=t[o],void 0!==s&&(void 0!==e&&"function"==typeof s&&(s=s(e),a=!1),void 0!==i&&V(s)&&(s=s[i%s.length],a=!1),void 0!==s))return n&&!a&&(n.cacheable=!1),s}function Ye(t,e,i){const{min:n,max:o}=t,r=K(e,(o-n)/2),s=(t,e)=>i&&0===t?0:t+e;return{min:s(n,-Math.abs(r)),max:s(o,r)}}function Ve(t,e){return Object.assign(Object.create(t),e)}const Ue=["left","top","right","bottom"];function qe(t,e){return t.filter((t=>t.pos===e))}function Xe(t,e){return t.filter((t=>-1===Ue.indexOf(t.pos)&&t.box.axis===e))}function Ge(t,e){return t.sort(((t,i)=>{const n=e?i:t,o=e?t:i;return n.weight===o.weight?n.index-o.index:n.weight-o.weight}))}function Ze(t,e){const i=function(t){const e={};for(const i of t){const{stack:t,pos:n,stackWeight:o}=i;if(!t||!Ue.includes(n))continue;const r=e[t]||(e[t]={count:0,placed:0,weight:0,size:0});r.count++,r.weight+=o}return e}(t),{vBoxMaxWidth:n,hBoxMaxHeight:o}=e;let r,s,a;for(r=0,s=t.length;r<s;++r){a=t[r];const{fullSize:s}=a.box,l=i[a.stack],c=l&&a.stackWeight/l.weight;a.horizontal?(a.width=c?c*n:s&&e.availableWidth,a.height=o):(a.width=n,a.height=c?c*o:s&&e.availableHeight)}return i}function Ke(t,e,i,n){return Math.max(t[i],e[i])+Math.max(t[n],e[n])}function Qe(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function Je(t,e,i,n){const{pos:o,box:r}=i,s=t.maxPadding;if(!U(o)){i.size&&(t[o]-=i.size);const e=n[i.stack]||{size:0,count:1};e.size=Math.max(e.size,i.horizontal?r.height:r.width),i.size=e.size/e.count,t[o]+=i.size}r.getPadding&&Qe(s,r.getPadding());const a=Math.max(0,e.outerWidth-Ke(s,t,"left","right")),l=Math.max(0,e.outerHeight-Ke(s,t,"top","bottom")),c=a!==t.w,h=l!==t.h;return t.w=a,t.h=l,i.horizontal?{same:c,other:h}:{same:h,other:c}}function ti(t,e){const i=e.maxPadding;function n(t){const n={left:0,top:0,right:0,bottom:0};return t.forEach((t=>{n[t]=Math.max(e[t],i[t])})),n}return n(t?["left","right"]:["top","bottom"])}function ei(t,e,i,n){const o=[];let r,s,a,l,c,h;for(r=0,s=t.length,c=0;r<s;++r){a=t[r],l=a.box,l.update(a.width||e.w,a.height||e.h,ti(a.horizontal,e));const{same:s,other:u}=Je(e,i,a,n);c|=s&&o.length,h=h||u,l.fullSize||o.push(a)}return c&&ei(o,e,i,n)||h}function ii(t,e,i,n,o){t.top=i,t.left=e,t.right=e+n,t.bottom=i+o,t.width=n,t.height=o}function ni(t,e,i,n){const o=i.padding;let{x:r,y:s}=e;for(const a of t){const t=a.box,l=n[a.stack]||{count:1,placed:0,weight:1},c=a.stackWeight/l.weight||1;if(a.horizontal){const n=e.w*c,r=l.size||t.height;ht(l.start)&&(s=l.start),t.fullSize?ii(t,o.left,s,i.outerWidth-o.right-o.left,r):ii(t,e.left+l.placed,s,n,r),l.start=s,l.placed+=n,s=t.bottom}else{const n=e.h*c,s=l.size||t.width;ht(l.start)&&(r=l.start),t.fullSize?ii(t,r,o.top,s,i.outerHeight-o.bottom-o.top):ii(t,r,e.top+l.placed,s,n),l.start=r,l.placed+=n,r=t.right}}e.x=r,e.y=s}vt.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}});var oi={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(t){e.draw(t)}}]},t.boxes.push(e)},removeBox(t,e){const i=t.boxes?t.boxes.indexOf(e):-1;-1!==i&&t.boxes.splice(i,1)},configure(t,e,i){e.fullSize=i.fullSize,e.position=i.position,e.weight=i.weight},update(t,e,i,n){if(!t)return;const o=He(t.options.layout.padding),r=Math.max(e-o.width,0),s=Math.max(i-o.height,0),a=function(t){const e=function(t){const e=[];let i,n,o,r,s,a;for(i=0,n=(t||[]).length;i<n;++i)o=t[i],({position:r,options:{stack:s,stackWeight:a=1}}=o),e.push({index:i,box:o,pos:r,horizontal:o.isHorizontal(),weight:o.weight,stack:s&&r+s,stackWeight:a});return e}(t),i=Ge(e.filter((t=>t.box.fullSize)),!0),n=Ge(qe(e,"left"),!0),o=Ge(qe(e,"right")),r=Ge(qe(e,"top"),!0),s=Ge(qe(e,"bottom")),a=Xe(e,"x"),l=Xe(e,"y");return{fullSize:i,leftAndTop:n.concat(r),rightAndBottom:o.concat(l).concat(s).concat(a),chartArea:qe(e,"chartArea"),vertical:n.concat(o).concat(l),horizontal:r.concat(s).concat(a)}}(t.boxes),l=a.vertical,c=a.horizontal;J(t.boxes,(t=>{"function"==typeof t.beforeLayout&&t.beforeLayout()}));const h=l.reduce(((t,e)=>e.box.options&&!1===e.box.options.display?t:t+1),0)||1,u=Object.freeze({outerWidth:e,outerHeight:i,padding:o,availableWidth:r,availableHeight:s,vBoxMaxWidth:r/2/h,hBoxMaxHeight:s/2}),d=Object.assign({},o);Qe(d,He(n));const p=Object.assign({maxPadding:d,w:r,h:s,x:o.left,y:o.top},o),f=Ze(l.concat(c),u);ei(a.fullSize,p,u,f),ei(l,p,u,f),ei(c,p,u,f)&&ei(l,p,u,f),function(t){const e=t.maxPadding;function i(i){const n=Math.max(e[i]-t[i],0);return t[i]+=n,n}t.y+=i("top"),t.x+=i("left"),i("right"),i("bottom")}(p),ni(a.leftAndTop,p,u,f),p.x+=p.w,p.y+=p.h,ni(a.rightAndBottom,p,u,f),t.chartArea={left:p.left,top:p.top,right:p.left+p.w,bottom:p.top+p.h,height:p.h,width:p.w},J(a.chartArea,(e=>{const i=e.box;Object.assign(i,t.chartArea),i.update(p.w,p.h,{left:0,top:0,right:0,bottom:0})}))}};function ri(t,e=[""],i=t,n,o=(()=>t[0])){ht(n)||(n=gi("_fallback",t));const r={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:i,_fallback:n,_getTarget:o,override:o=>ri([o,...t],e,i,n)};return new Proxy(r,{deleteProperty:(e,i)=>(delete e[i],delete e._keys,delete t[0][i],!0),get:(i,n)=>hi(i,n,(()=>function(t,e,i,n){let o;for(const r of e)if(o=gi(li(r,t),i),ht(o))return ci(t,o)?fi(i,n,t,o):o}(n,e,t,i))),getOwnPropertyDescriptor:(t,e)=>Reflect.getOwnPropertyDescriptor(t._scopes[0],e),getPrototypeOf:()=>Reflect.getPrototypeOf(t[0]),has:(t,e)=>yi(t).includes(e),ownKeys:t=>yi(t),set(t,e,i){const n=t._storage||(t._storage=o());return t[e]=n[e]=i,delete t._keys,!0}})}function si(t,e,i,n){const o={_cacheable:!1,_proxy:t,_context:e,_subProxy:i,_stack:new Set,_descriptors:ai(t,n),setContext:e=>si(t,e,i,n),override:o=>si(t.override(o),e,i,n)};return new Proxy(o,{deleteProperty:(e,i)=>(delete e[i],delete t[i],!0),get:(t,e,i)=>hi(t,e,(()=>function(t,e,i){const{_proxy:n,_context:o,_subProxy:r,_descriptors:s}=t;let a=n[e];ut(a)&&s.isScriptable(e)&&(a=function(t,e,i,n){const{_proxy:o,_context:r,_subProxy:s,_stack:a}=i;if(a.has(t))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+t);a.add(t),e=e(r,s||n),a.delete(t),ci(t,e)&&(e=fi(o._scopes,o,t,e));return e}(e,a,t,i));V(a)&&a.length&&(a=function(t,e,i,n){const{_proxy:o,_context:r,_subProxy:s,_descriptors:a}=i;if(ht(r.index)&&n(t))e=e[r.index%e.length];else if(U(e[0])){const i=e,n=o._scopes.filter((t=>t!==i));e=[];for(const l of i){const i=fi(n,o,t,l);e.push(si(i,r,s&&s[t],a))}}return e}(e,a,t,s.isIndexable));ci(e,a)&&(a=si(a,o,r&&r[e],s));return a}(t,e,i))),getOwnPropertyDescriptor:(e,i)=>e._descriptors.allKeys?Reflect.has(t,i)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,i),getPrototypeOf:()=>Reflect.getPrototypeOf(t),has:(e,i)=>Reflect.has(t,i),ownKeys:()=>Reflect.ownKeys(t),set:(e,i,n)=>(t[i]=n,delete e[i],!0)})}function ai(t,e={scriptable:!0,indexable:!0}){const{_scriptable:i=e.scriptable,_indexable:n=e.indexable,_allKeys:o=e.allKeys}=t;return{allKeys:o,scriptable:i,indexable:n,isScriptable:ut(i)?i:()=>i,isIndexable:ut(n)?n:()=>n}}const li=(t,e)=>t?t+ct(e):e,ci=(t,e)=>U(e)&&"adapters"!==t&&(null===Object.getPrototypeOf(e)||e.constructor===Object);function hi(t,e,i){if(Object.prototype.hasOwnProperty.call(t,e))return t[e];const n=i();return t[e]=n,n}function ui(t,e,i){return ut(t)?t(e,i):t}const di=(t,e)=>!0===t?e:"string"==typeof t?lt(e,t):void 0;function pi(t,e,i,n,o){for(const r of e){const e=di(i,r);if(e){t.add(e);const r=ui(e._fallback,i,o);if(ht(r)&&r!==i&&r!==n)return r}else if(!1===e&&ht(n)&&i!==n)return null}return!1}function fi(t,e,i,n){const o=e._rootScopes,r=ui(e._fallback,i,n),s=[...t,...o],a=new Set;a.add(n);let l=mi(a,s,i,r||i,n);return null!==l&&((!ht(r)||r===i||(l=mi(a,s,r,l,n),null!==l))&&ri(Array.from(a),[""],o,r,(()=>function(t,e,i){const n=t._getTarget();e in n||(n[e]={});const o=n[e];if(V(o)&&U(i))return i;return o}(e,i,n))))}function mi(t,e,i,n,o){for(;i;)i=pi(t,e,i,n,o);return i}function gi(t,e){for(const i of e){if(!i)continue;const e=i[t];if(ht(e))return e}}function yi(t){let e=t._keys;return e||(e=t._keys=function(t){const e=new Set;for(const i of t)for(const t of Object.keys(i).filter((t=>!t.startsWith("_"))))e.add(t);return Array.from(e)}(t._scopes)),e}const vi=Number.EPSILON||1e-14,bi=(t,e)=>e<t.length&&!t[e].skip&&t[e],xi=t=>"x"===t?"y":"x";function $i(t,e,i,n){const o=t.skip?e:t,r=e,s=i.skip?e:i,a=Bt(r,o),l=Bt(s,r);let c=a/(a+l),h=l/(a+l);c=isNaN(c)?0:c,h=isNaN(h)?0:h;const u=n*c,d=n*h;return{previous:{x:r.x-u*(s.x-o.x),y:r.y-u*(s.y-o.y)},next:{x:r.x+d*(s.x-o.x),y:r.y+d*(s.y-o.y)}}}function wi(t,e="x"){const i=xi(e),n=t.length,o=Array(n).fill(0),r=Array(n);let s,a,l,c=bi(t,0);for(s=0;s<n;++s)if(a=l,l=c,c=bi(t,s+1),l){if(c){const t=c[e]-l[e];o[s]=0!==t?(c[i]-l[i])/t:0}r[s]=a?c?Mt(o[s-1])!==Mt(o[s])?0:(o[s-1]+o[s])/2:o[s-1]:o[s]}!function(t,e,i){const n=t.length;let o,r,s,a,l,c=bi(t,0);for(let h=0;h<n-1;++h)l=c,c=bi(t,h+1),l&&c&&(At(e[h],0,vi)?i[h]=i[h+1]=0:(o=i[h]/e[h],r=i[h+1]/e[h],a=Math.pow(o,2)+Math.pow(r,2),a<=9||(s=3/Math.sqrt(a),i[h]=o*s*e[h],i[h+1]=r*s*e[h])))}(t,o,r),function(t,e,i="x"){const n=xi(i),o=t.length;let r,s,a,l=bi(t,0);for(let c=0;c<o;++c){if(s=a,a=l,l=bi(t,c+1),!a)continue;const o=a[i],h=a[n];s&&(r=(o-s[i])/3,a[`cp1${i}`]=o-r,a[`cp1${n}`]=h-r*e[c]),l&&(r=(l[i]-o)/3,a[`cp2${i}`]=o+r,a[`cp2${n}`]=h+r*e[c])}}(t,r,e)}function _i(t,e,i){return Math.max(Math.min(t,i),e)}function ki(t,e,i,n,o){let r,s,a,l;if(e.spanGaps&&(t=t.filter((t=>!t.skip))),"monotone"===e.cubicInterpolationMode)wi(t,o);else{let i=n?t[t.length-1]:t[0];for(r=0,s=t.length;r<s;++r)a=t[r],l=$i(i,a,t[Math.min(r+1,s-(n?0:1))%s],e.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,i=a}e.capBezierPoints&&function(t,e){let i,n,o,r,s,a=Qt(t[0],e);for(i=0,n=t.length;i<n;++i)s=r,r=a,a=i<n-1&&Qt(t[i+1],e),r&&(o=t[i],s&&(o.cp1x=_i(o.cp1x,e.left,e.right),o.cp1y=_i(o.cp1y,e.top,e.bottom)),a&&(o.cp2x=_i(o.cp2x,e.left,e.right),o.cp2y=_i(o.cp2y,e.top,e.bottom)))}(t,i)}const Si=t=>0===t||1===t,Ci=(t,e,i)=>-Math.pow(2,10*(t-=1))*Math.sin((t-e)*xt/i),Ti=(t,e,i)=>Math.pow(2,-10*t)*Math.sin((t-e)*xt/i)+1,Mi={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>1-Math.cos(t*kt),easeOutSine:t=>Math.sin(t*kt),easeInOutSine:t=>-.5*(Math.cos(bt*t)-1),easeInExpo:t=>0===t?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>1===t?1:1-Math.pow(2,-10*t),easeInOutExpo:t=>Si(t)?t:t<.5?.5*Math.pow(2,10*(2*t-1)):.5*(2-Math.pow(2,-10*(2*t-1))),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>Si(t)?t:Ci(t,.075,.3),easeOutElastic:t=>Si(t)?t:Ti(t,.075,.3),easeInOutElastic(t){const e=.1125;return Si(t)?t:t<.5?.5*Ci(2*t,e,.45):.5+.5*Ti(2*t-1,e,.45)},easeInBack(t){const e=1.70158;return t*t*((e+1)*t-e)},easeOutBack(t){const e=1.70158;return(t-=1)*t*((e+1)*t+e)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?t*t*((1+(e*=1.525))*t-e)*.5:.5*((t-=2)*t*((1+(e*=1.525))*t+e)+2)},easeInBounce:t=>1-Mi.easeOutBounce(1-t),easeOutBounce(t){const e=7.5625,i=2.75;return t<1/i?e*t*t:t<2/i?e*(t-=1.5/i)*t+.75:t<2.5/i?e*(t-=2.25/i)*t+.9375:e*(t-=2.625/i)*t+.984375},easeInOutBounce:t=>t<.5?.5*Mi.easeInBounce(2*t):.5*Mi.easeOutBounce(2*t-1)+.5};function Pi(t,e,i,n){return{x:t.x+i*(e.x-t.x),y:t.y+i*(e.y-t.y)}}function Ei(t,e,i,n){return{x:t.x+i*(e.x-t.x),y:"middle"===n?i<.5?t.y:e.y:"after"===n?i<1?t.y:e.y:i>0?e.y:t.y}}function Ii(t,e,i,n){const o={x:t.cp2x,y:t.cp2y},r={x:e.cp1x,y:e.cp1y},s=Pi(t,o,i),a=Pi(o,r,i),l=Pi(r,e,i),c=Pi(s,a,i),h=Pi(a,l,i);return Pi(c,h,i)}const Ai=new Map;function Di(t,e,i){return function(t,e){e=e||{};const i=t+JSON.stringify(e);let n=Ai.get(i);return n||(n=new Intl.NumberFormat(t,e),Ai.set(i,n)),n}(e,i).format(t)}function Ri(t,e,i){return t?function(t,e){return{x:i=>t+t+e-i,setWidth(t){e=t},textAlign:t=>"center"===t?t:"right"===t?"left":"right",xPlus:(t,e)=>t-e,leftForLtr:(t,e)=>t-e}}(e,i):{x:t=>t,setWidth(t){},textAlign:t=>t,xPlus:(t,e)=>t+e,leftForLtr:(t,e)=>t}}function Li(t,e){let i,n;"ltr"!==e&&"rtl"!==e||(i=t.canvas.style,n=[i.getPropertyValue("direction"),i.getPropertyPriority("direction")],i.setProperty("direction",e,"important"),t.prevTextDirection=n)}function Oi(t,e){void 0!==e&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function zi(t){return"angle"===t?{between:Wt,compare:Nt,normalize:Ht}:{between:Vt,compare:(t,e)=>t-e,normalize:t=>t}}function Fi({start:t,end:e,count:i,loop:n,style:o}){return{start:t%i,end:e%i,loop:n&&(e-t+1)%i==0,style:o}}function Bi(t,e,i){if(!i)return[t];const{property:n,start:o,end:r}=i,s=e.length,{compare:a,between:l,normalize:c}=zi(n),{start:h,end:u,loop:d,style:p}=function(t,e,i){const{property:n,start:o,end:r}=i,{between:s,normalize:a}=zi(n),l=e.length;let c,h,{start:u,end:d,loop:p}=t;if(p){for(u+=l,d+=l,c=0,h=l;c<h&&s(a(e[u%l][n]),o,r);++c)u--,d--;u%=l,d%=l}return d<u&&(d+=l),{start:u,end:d,loop:p,style:t.style}}(t,e,i),f=[];let m,g,y,v=!1,b=null;const x=()=>v||l(o,y,m)&&0!==a(o,y),$=()=>!v||0===a(r,m)||l(r,y,m);for(let t=h,i=h;t<=u;++t)g=e[t%s],g.skip||(m=c(g[n]),m!==y&&(v=l(m,o,r),null===b&&x()&&(b=0===a(m,o)?t:i),null!==b&&$()&&(f.push(Fi({start:b,end:t,loop:d,count:s,style:p})),b=null),i=t,y=m));return null!==b&&f.push(Fi({start:b,end:u,loop:d,count:s,style:p})),f}function Ni(t,e){const i=[],n=t.segments;for(let o=0;o<n.length;o++){const r=Bi(n[o],t.points,e);r.length&&i.push(...r)}return i}function Hi(t,e){const i=t.points,n=t.options.spanGaps,o=i.length;if(!o)return[];const r=!!t._loop,{start:s,end:a}=function(t,e,i,n){let o=0,r=e-1;if(i&&!n)for(;o<e&&!t[o].skip;)o++;for(;o<e&&t[o].skip;)o++;for(o%=e,i&&(r+=o);r>o&&t[r%e].skip;)r--;return r%=e,{start:o,end:r}}(i,o,r,n);if(!0===n)return Wi(t,[{start:s,end:a,loop:r}],i,e);return Wi(t,function(t,e,i,n){const o=t.length,r=[];let s,a=e,l=t[e];for(s=e+1;s<=i;++s){const i=t[s%o];i.skip||i.stop?l.skip||(n=!1,r.push({start:e%o,end:(s-1)%o,loop:n}),e=a=i.stop?s:null):(a=s,l.skip&&(e=s)),l=i}return null!==a&&r.push({start:e%o,end:a%o,loop:n}),r}(i,s,a<s?a+o:a,!!t._fullLoop&&0===s&&a===o-1),i,e)}function Wi(t,e,i,n){return n&&n.setContext&&i?function(t,e,i,n){const o=t._chart.getContext(),r=ji(t.options),{_datasetIndex:s,options:{spanGaps:a}}=t,l=i.length,c=[];let h=r,u=e[0].start,d=u;function p(t,e,n,o){const r=a?-1:1;if(t!==e){for(t+=l;i[t%l].skip;)t-=r;for(;i[e%l].skip;)e+=r;t%l!=e%l&&(c.push({start:t%l,end:e%l,loop:n,style:o}),h=o,u=e%l)}}for(const t of e){u=a?u:t.start;let e,r=i[u%l];for(d=u+1;d<=t.end;d++){const a=i[d%l];e=ji(n.setContext(Ve(o,{type:"segment",p0:r,p1:a,p0DataIndex:(d-1)%l,p1DataIndex:d%l,datasetIndex:s}))),Yi(e,h)&&p(u,d-1,t.loop,h),r=a,h=e}u<d-1&&p(u,d-1,t.loop,h)}return c}(t,e,i,n):e}function ji(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function Yi(t,e){return e&&JSON.stringify(t)!==JSON.stringify(e)}var Vi=Object.freeze({__proto__:null,easingEffects:Mi,color:N,getHoverColor:H,noop:W,uid:j,isNullOrUndef:Y,isArray:V,isObject:U,isFinite:q,finiteOrDefault:X,valueOrDefault:G,toPercentage:Z,toDimension:K,callback:Q,each:J,_elementsEqual:tt,clone:et,_merger:nt,merge:ot,mergeIf:rt,_mergerIf:st,_deprecated:function(t,e,i,n){void 0!==e&&console.warn(t+': "'+i+'" is deprecated. Please use "'+n+'" instead')},resolveObjectKey:lt,_capitalize:ct,defined:ht,isFunction:ut,setsEqual:dt,_isClickEvent:pt,toFontString:Ut,_measureText:qt,_longestText:Xt,_alignPixel:Gt,clearCanvas:Zt,drawPoint:Kt,_isPointInArea:Qt,clipArea:Jt,unclipArea:te,_steppedLineTo:ee,_bezierCurveTo:ie,renderText:ne,addRoundedRectPath:re,_lookup:se,_lookupByKey:ae,_rlookupByKey:le,_filterBetween:ce,listenArrayEvents:ue,unlistenArrayEvents:de,_arrayUnique:pe,_createResolver:ri,_attachContext:si,_descriptors:ai,splineCurve:$i,splineCurveMonotone:wi,_updateBezierControlPoints:ki,_isDomSupported:fe,_getParentNode:me,getStyle:ve,getRelativePosition:$e,getMaximumSize:_e,retinaScale:ke,supportsEventListenerOptions:Se,readUsedSize:Ce,fontString:function(t,e,i){return e+" "+t+"px "+i},requestAnimFrame:t,throttled:e,debounce:i,_toLeftRightCenter:n,_alignStartEnd:o,_textX:r,_pointInLine:Pi,_steppedInterpolation:Ei,_bezierInterpolation:Ii,formatNumber:Di,toLineHeight:ze,_readValueToProps:Fe,toTRBL:Be,toTRBLCorners:Ne,toPadding:He,toFont:We,resolve:je,_addGrace:Ye,createContext:Ve,PI:bt,TAU:xt,PITAU:$t,INFINITY:wt,RAD_PER_DEG:_t,HALF_PI:kt,QUARTER_PI:St,TWO_THIRDS_PI:Ct,log10:Tt,sign:Mt,niceNum:Pt,_factorize:Et,isNumber:It,almostEquals:At,almostWhole:Dt,_setMinAndMaxByKey:Rt,toRadians:Lt,toDegrees:Ot,_decimalPlaces:zt,getAngleFromPoint:Ft,distanceBetweenPoints:Bt,_angleDiff:Nt,_normalizeAngle:Ht,_angleBetween:Wt,_limitValue:jt,_int16Range:Yt,_isBetween:Vt,getRtlAdapter:Ri,overrideTextDirection:Li,restoreTextDirection:Oi,_boundSegment:Bi,_boundSegments:Ni,_computeSegments:Hi});class Ui{acquireContext(t,e){}releaseContext(t){return!1}addEventListener(t,e,i){}removeEventListener(t,e,i){}getDevicePixelRatio(){return 1}getMaximumSize(t,e,i,n){return e=Math.max(0,e||t.width),i=i||t.height,{width:e,height:Math.max(0,n?Math.floor(e/n):i)}}isAttached(t){return!0}updateConfig(t){}}class qi extends Ui{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const Xi={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},Gi=t=>null===t||""===t;const Zi=!!Se&&{passive:!0};function Ki(t,e,i){t.canvas.removeEventListener(e,i,Zi)}function Qi(t,e){for(const i of t)if(i===e||i.contains(e))return!0}function Ji(t,e,i){const n=t.canvas,o=new MutationObserver((t=>{let e=!1;for(const i of t)e=e||Qi(i.addedNodes,n),e=e&&!Qi(i.removedNodes,n);e&&i()}));return o.observe(document,{childList:!0,subtree:!0}),o}function tn(t,e,i){const n=t.canvas,o=new MutationObserver((t=>{let e=!1;for(const i of t)e=e||Qi(i.removedNodes,n),e=e&&!Qi(i.addedNodes,n);e&&i()}));return o.observe(document,{childList:!0,subtree:!0}),o}const en=new Map;let nn=0;function on(){const t=window.devicePixelRatio;t!==nn&&(nn=t,en.forEach(((e,i)=>{i.currentDevicePixelRatio!==t&&e()})))}function rn(t,i,n){const o=t.canvas,r=o&&me(o);if(!r)return;const s=e(((t,e)=>{const i=r.clientWidth;n(t,e),i<r.clientWidth&&n()}),window),a=new ResizeObserver((t=>{const e=t[0],i=e.contentRect.width,n=e.contentRect.height;0===i&&0===n||s(i,n)}));return a.observe(r),function(t,e){en.size||window.addEventListener("resize",on),en.set(t,e)}(t,s),a}function sn(t,e,i){i&&i.disconnect(),"resize"===e&&function(t){en.delete(t),en.size||window.removeEventListener("resize",on)}(t)}function an(t,i,n){const o=t.canvas,r=e((e=>{null!==t.ctx&&n(function(t,e){const i=Xi[t.type]||t.type,{x:n,y:o}=$e(t,e);return{type:i,chart:e,native:t,x:void 0!==n?n:null,y:void 0!==o?o:null}}(e,t))}),t,(t=>{const e=t[0];return[e,e.offsetX,e.offsetY]}));return function(t,e,i){t.addEventListener(e,i,Zi)}(o,i,r),r}class ln extends Ui{acquireContext(t,e){const i=t&&t.getContext&&t.getContext("2d");return i&&i.canvas===t?(function(t,e){const i=t.style,n=t.getAttribute("height"),o=t.getAttribute("width");if(t.$chartjs={initial:{height:n,width:o,style:{display:i.display,height:i.height,width:i.width}}},i.display=i.display||"block",i.boxSizing=i.boxSizing||"border-box",Gi(o)){const e=Ce(t,"width");void 0!==e&&(t.width=e)}if(Gi(n))if(""===t.style.height)t.height=t.width/(e||2);else{const e=Ce(t,"height");void 0!==e&&(t.height=e)}}(t,e),i):null}releaseContext(t){const e=t.canvas;if(!e.$chartjs)return!1;const i=e.$chartjs.initial;["height","width"].forEach((t=>{const n=i[t];Y(n)?e.removeAttribute(t):e.setAttribute(t,n)}));const n=i.style||{};return Object.keys(n).forEach((t=>{e.style[t]=n[t]})),e.width=e.width,delete e.$chartjs,!0}addEventListener(t,e,i){this.removeEventListener(t,e);const n=t.$proxies||(t.$proxies={}),o={attach:Ji,detach:tn,resize:rn}[e]||an;n[e]=o(t,e,i)}removeEventListener(t,e){const i=t.$proxies||(t.$proxies={}),n=i[e];if(!n)return;({attach:sn,detach:sn,resize:sn}[e]||Ki)(t,e,n),i[e]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,e,i,n){return _e(t,e,i,n)}isAttached(t){const e=me(t);return!(!e||!e.isConnected)}}function cn(t){return!fe()||"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas?qi:ln}var hn=Object.freeze({__proto__:null,_detectPlatform:cn,BasePlatform:Ui,BasicPlatform:qi,DomPlatform:ln});const un="transparent",dn={boolean:(t,e,i)=>i>.5?e:t,color(t,e,i){const n=N(t||un),o=n.valid&&N(e||un);return o&&o.valid?o.mix(n,i).hexString():e},number:(t,e,i)=>t+(e-t)*i};class pn{constructor(t,e,i,n){const o=e[i];n=je([t.to,n,o,t.from]);const r=je([t.from,o,n]);this._active=!0,this._fn=t.fn||dn[t.type||typeof r],this._easing=Mi[t.easing]||Mi.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=e,this._prop=i,this._from=r,this._to=n,this._promises=void 0}active(){return this._active}update(t,e,i){if(this._active){this._notify(!1);const n=this._target[this._prop],o=i-this._start,r=this._duration-o;this._start=i,this._duration=Math.floor(Math.max(r,t.duration)),this._total+=o,this._loop=!!t.loop,this._to=je([t.to,e,n,t.from]),this._from=je([t.from,n,e])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const e=t-this._start,i=this._duration,n=this._prop,o=this._from,r=this._loop,s=this._to;let a;if(this._active=o!==s&&(r||e<i),!this._active)return this._target[n]=s,void this._notify(!0);e<0?this._target[n]=o:(a=e/i%2,a=r&&a>1?2-a:a,a=this._easing(Math.min(1,Math.max(0,a))),this._target[n]=this._fn(o,s,a))}wait(){const t=this._promises||(this._promises=[]);return new Promise(((e,i)=>{t.push({res:e,rej:i})}))}_notify(t){const e=t?"res":"rej",i=this._promises||[];for(let t=0;t<i.length;t++)i[t][e]()}}vt.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0});const fn=Object.keys(vt.animation);vt.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>"onProgress"!==t&&"onComplete"!==t&&"fn"!==t}),vt.set("animations",{colors:{type:"color",properties:["color","borderColor","backgroundColor"]},numbers:{type:"number",properties:["x","y","borderWidth","radius","tension"]}}),vt.describe("animations",{_fallback:"animation"}),vt.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>0|t}}}});class mn{constructor(t,e){this._chart=t,this._properties=new Map,this.configure(e)}configure(t){if(!U(t))return;const e=this._properties;Object.getOwnPropertyNames(t).forEach((i=>{const n=t[i];if(!U(n))return;const o={};for(const t of fn)o[t]=n[t];(V(n.properties)&&n.properties||[i]).forEach((t=>{t!==i&&e.has(t)||e.set(t,o)}))}))}_animateOptions(t,e){const i=e.options,n=function(t,e){if(!e)return;let i=t.options;if(!i)return void(t.options=e);i.$shared&&(t.options=i=Object.assign({},i,{$shared:!1,$animations:{}}));return i}(t,i);if(!n)return[];const o=this._createAnimations(n,i);return i.$shared&&function(t,e){const i=[],n=Object.keys(e);for(let e=0;e<n.length;e++){const o=t[n[e]];o&&o.active()&&i.push(o.wait())}return Promise.all(i)}(t.options.$animations,i).then((()=>{t.options=i}),(()=>{})),o}_createAnimations(t,e){const i=this._properties,n=[],o=t.$animations||(t.$animations={}),r=Object.keys(e),s=Date.now();let a;for(a=r.length-1;a>=0;--a){const l=r[a];if("$"===l.charAt(0))continue;if("options"===l){n.push(...this._animateOptions(t,e));continue}const c=e[l];let h=o[l];const u=i.get(l);if(h){if(u&&h.active()){h.update(u,c,s);continue}h.cancel()}u&&u.duration?(o[l]=h=new pn(u,t,l,c),n.push(h)):t[l]=c}return n}update(t,e){if(0===this._properties.size)return void Object.assign(t,e);const i=this._createAnimations(t,e);return i.length?(s.add(this._chart,i),!0):void 0}}function gn(t,e){const i=t&&t.options||{},n=i.reverse,o=void 0===i.min?e:0,r=void 0===i.max?e:0;return{start:n?r:o,end:n?o:r}}function yn(t,e){const i=[],n=t._getSortedDatasetMetas(e);let o,r;for(o=0,r=n.length;o<r;++o)i.push(n[o].index);return i}function vn(t,e,i,n={}){const o=t.keys,r="single"===n.mode;let s,a,l,c;if(null!==e){for(s=0,a=o.length;s<a;++s){if(l=+o[s],l===i){if(n.all)continue;break}c=t.values[l],q(c)&&(r||0===e||Mt(e)===Mt(c))&&(e+=c)}return e}}function bn(t,e){const i=t&&t.options.stacked;return i||void 0===i&&void 0!==e.stack}function xn(t,e,i){const n=t[e]||(t[e]={});return n[i]||(n[i]={})}function $n(t,e,i,n){for(const o of e.getMatchingVisibleMetas(n).reverse()){const e=t[o.index];if(i&&e>0||!i&&e<0)return o.index}return null}function wn(t,e){const{chart:i,_cachedMeta:n}=t,o=i._stacks||(i._stacks={}),{iScale:r,vScale:s,index:a}=n,l=r.axis,c=s.axis,h=function(t,e,i){return`${t.id}.${e.id}.${i.stack||i.type}`}(r,s,n),u=e.length;let d;for(let t=0;t<u;++t){const i=e[t],{[l]:r,[c]:u}=i;d=(i._stacks||(i._stacks={}))[c]=xn(o,h,r),d[a]=u,d._top=$n(d,s,!0,n.type),d._bottom=$n(d,s,!1,n.type)}}function _n(t,e){const i=t.scales;return Object.keys(i).filter((t=>i[t].axis===e)).shift()}function kn(t,e){const i=t.controller.index,n=t.vScale&&t.vScale.axis;if(n){e=e||t._parsed;for(const t of e){const e=t._stacks;if(!e||void 0===e[n]||void 0===e[n][i])return;delete e[n][i]}}}const Sn=t=>"reset"===t||"none"===t,Cn=(t,e)=>e?t:Object.assign({},t);class Tn{constructor(t,e){this.chart=t,this._ctx=t.ctx,this.index=e,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.$context=void 0,this._syncList=[],this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=bn(t.vScale,t),this.addElements()}updateIndex(t){this.index!==t&&kn(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,e=this._cachedMeta,i=this.getDataset(),n=(t,e,i,n)=>"x"===t?e:"r"===t?n:i,o=e.xAxisID=G(i.xAxisID,_n(t,"x")),r=e.yAxisID=G(i.yAxisID,_n(t,"y")),s=e.rAxisID=G(i.rAxisID,_n(t,"r")),a=e.indexAxis,l=e.iAxisID=n(a,o,r,s),c=e.vAxisID=n(a,r,o,s);e.xScale=this.getScaleForId(o),e.yScale=this.getScaleForId(r),e.rScale=this.getScaleForId(s),e.iScale=this.getScaleForId(l),e.vScale=this.getScaleForId(c)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const e=this._cachedMeta;return t===e.iScale?e.vScale:e.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&de(this._data,this),t._stacked&&kn(t)}_dataCheck(){const t=this.getDataset(),e=t.data||(t.data=[]),i=this._data;if(U(e))this._data=function(t){const e=Object.keys(t),i=new Array(e.length);let n,o,r;for(n=0,o=e.length;n<o;++n)r=e[n],i[n]={x:r,y:t[r]};return i}(e);else if(i!==e){if(i){de(i,this);const t=this._cachedMeta;kn(t),t._parsed=[]}e&&Object.isExtensible(e)&&ue(e,this),this._syncList=[],this._data=e}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const e=this._cachedMeta,i=this.getDataset();let n=!1;this._dataCheck();const o=e._stacked;e._stacked=bn(e.vScale,e),e.stack!==i.stack&&(n=!0,kn(e),e.stack=i.stack),this._resyncElements(t),(n||o!==e._stacked)&&wn(this,e._parsed)}configure(){const t=this.chart.config,e=t.datasetScopeKeys(this._type),i=t.getOptionScopes(this.getDataset(),e,!0);this.options=t.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,e){const{_cachedMeta:i,_data:n}=this,{iScale:o,_stacked:r}=i,s=o.axis;let a,l,c,h=0===t&&e===n.length||i._sorted,u=t>0&&i._parsed[t-1];if(!1===this._parsing)i._parsed=n,i._sorted=!0,c=n;else{c=V(n[t])?this.parseArrayData(i,n,t,e):U(n[t])?this.parseObjectData(i,n,t,e):this.parsePrimitiveData(i,n,t,e);const o=()=>null===l[s]||u&&l[s]<u[s];for(a=0;a<e;++a)i._parsed[a+t]=l=c[a],h&&(o()&&(h=!1),u=l);i._sorted=h}r&&wn(this,c)}parsePrimitiveData(t,e,i,n){const{iScale:o,vScale:r}=t,s=o.axis,a=r.axis,l=o.getLabels(),c=o===r,h=new Array(n);let u,d,p;for(u=0,d=n;u<d;++u)p=u+i,h[u]={[s]:c||o.parse(l[p],p),[a]:r.parse(e[p],p)};return h}parseArrayData(t,e,i,n){const{xScale:o,yScale:r}=t,s=new Array(n);let a,l,c,h;for(a=0,l=n;a<l;++a)c=a+i,h=e[c],s[a]={x:o.parse(h[0],c),y:r.parse(h[1],c)};return s}parseObjectData(t,e,i,n){const{xScale:o,yScale:r}=t,{xAxisKey:s="x",yAxisKey:a="y"}=this._parsing,l=new Array(n);let c,h,u,d;for(c=0,h=n;c<h;++c)u=c+i,d=e[u],l[c]={x:o.parse(lt(d,s),u),y:r.parse(lt(d,a),u)};return l}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,e,i){const n=this.chart,o=this._cachedMeta,r=e[t.axis];return vn({keys:yn(n,!0),values:e._stacks[t.axis]},r,o.index,{mode:i})}updateRangeFromParsed(t,e,i,n){const o=i[e.axis];let r=null===o?NaN:o;const s=n&&i._stacks[e.axis];n&&s&&(n.values=s,r=vn(n,o,this._cachedMeta.index)),t.min=Math.min(t.min,r),t.max=Math.max(t.max,r)}getMinMax(t,e){const i=this._cachedMeta,n=i._parsed,o=i._sorted&&t===i.iScale,r=n.length,s=this._getOtherScale(t),a=((t,e,i)=>t&&!e.hidden&&e._stacked&&{keys:yn(i,!0),values:null})(e,i,this.chart),l={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:c,max:h}=function(t){const{min:e,max:i,minDefined:n,maxDefined:o}=t.getUserBounds();return{min:n?e:Number.NEGATIVE_INFINITY,max:o?i:Number.POSITIVE_INFINITY}}(s);let u,d;function p(){d=n[u];const e=d[s.axis];return!q(d[t.axis])||c>e||h<e}for(u=0;u<r&&(p()||(this.updateRangeFromParsed(l,t,d,a),!o));++u);if(o)for(u=r-1;u>=0;--u)if(!p()){this.updateRangeFromParsed(l,t,d,a);break}return l}getAllParsedValues(t){const e=this._cachedMeta._parsed,i=[];let n,o,r;for(n=0,o=e.length;n<o;++n)r=e[n][t.axis],q(r)&&i.push(r);return i}getMaxOverflow(){return!1}getLabelAndValue(t){const e=this._cachedMeta,i=e.iScale,n=e.vScale,o=this.getParsed(t);return{label:i?""+i.getLabelForValue(o[i.axis]):"",value:n?""+n.getLabelForValue(o[n.axis]):""}}_update(t){const e=this._cachedMeta;this.update(t||"default"),e._clip=function(t){let e,i,n,o;return U(t)?(e=t.top,i=t.right,n=t.bottom,o=t.left):e=i=n=o=t,{top:e,right:i,bottom:n,left:o,disabled:!1===t}}(G(this.options.clip,function(t,e,i){if(!1===i)return!1;const n=gn(t,i),o=gn(e,i);return{top:o.end,right:n.end,bottom:o.start,left:n.start}}(e.xScale,e.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,e=this.chart,i=this._cachedMeta,n=i.data||[],o=e.chartArea,r=[],s=this._drawStart||0,a=this._drawCount||n.length-s,l=this.options.drawActiveElementsOnTop;let c;for(i.dataset&&i.dataset.draw(t,o,s,a),c=s;c<s+a;++c){const e=n[c];e.hidden||(e.active&&l?r.push(e):e.draw(t,o))}for(c=0;c<r.length;++c)r[c].draw(t,o)}getStyle(t,e){const i=e?"active":"default";return void 0===t&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(t||0,i)}getContext(t,e,i){const n=this.getDataset();let o;if(t>=0&&t<this._cachedMeta.data.length){const e=this._cachedMeta.data[t];o=e.$context||(e.$context=function(t,e,i){return Ve(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:i,index:e,mode:"default",type:"data"})}(this.getContext(),t,e)),o.parsed=this.getParsed(t),o.raw=n.data[t],o.index=o.dataIndex=t}else o=this.$context||(this.$context=function(t,e){return Ve(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}(this.chart.getContext(),this.index)),o.dataset=n,o.index=o.datasetIndex=this.index;return o.active=!!e,o.mode=i,o}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,e){return this._resolveElementOptions(this.dataElementType.id,e,t)}_resolveElementOptions(t,e="default",i){const n="active"===e,o=this._cachedDataOpts,r=t+"-"+e,s=o[r],a=this.enableOptionSharing&&ht(i);if(s)return Cn(s,a);const l=this.chart.config,c=l.datasetElementScopeKeys(this._type,t),h=n?[`${t}Hover`,"hover",t,""]:[t,""],u=l.getOptionScopes(this.getDataset(),c),d=Object.keys(vt.elements[t]),p=l.resolveNamedOptions(u,d,(()=>this.getContext(i,n)),h);return p.$shared&&(p.$shared=a,o[r]=Object.freeze(Cn(p,a))),p}_resolveAnimations(t,e,i){const n=this.chart,o=this._cachedDataOpts,r=`animation-${e}`,s=o[r];if(s)return s;let a;if(!1!==n.options.animation){const n=this.chart.config,o=n.datasetAnimationScopeKeys(this._type,e),r=n.getOptionScopes(this.getDataset(),o);a=n.createResolver(r,this.getContext(t,i,e))}const l=new mn(n,a&&a.animations);return a&&a._cacheable&&(o[r]=Object.freeze(l)),l}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,e){return!e||Sn(t)||this.chart._animationsDisabled}updateElement(t,e,i,n){Sn(n)?Object.assign(t,i):this._resolveAnimations(e,n).update(t,i)}updateSharedOptions(t,e,i){t&&!Sn(e)&&this._resolveAnimations(void 0,e).update(t,i)}_setStyle(t,e,i,n){t.active=n;const o=this.getStyle(e,n);this._resolveAnimations(e,i,n).update(t,{options:!n&&this.getSharedOptions(o)||o})}removeHoverStyle(t,e,i){this._setStyle(t,i,"active",!1)}setHoverStyle(t,e,i){this._setStyle(t,i,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const e=this._data,i=this._cachedMeta.data;for(const[t,e,i]of this._syncList)this[t](e,i);this._syncList=[];const n=i.length,o=e.length,r=Math.min(o,n);r&&this.parse(0,r),o>n?this._insertElements(n,o-n,t):o<n&&this._removeElements(o,n-o)}_insertElements(t,e,i=!0){const n=this._cachedMeta,o=n.data,r=t+e;let s;const a=t=>{for(t.length+=e,s=t.length-1;s>=r;s--)t[s]=t[s-e]};for(a(o),s=t;s<r;++s)o[s]=new this.dataElementType;this._parsing&&a(n._parsed),this.parse(t,e),i&&this.updateElements(o,t,e,"reset")}updateElements(t,e,i,n){}_removeElements(t,e){const i=this._cachedMeta;if(this._parsing){const n=i._parsed.splice(t,e);i._stacked&&kn(i,n)}i.data.splice(t,e)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[e,i,n]=t;this[e](i,n)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,e){e&&this._sync(["_removeElements",t,e]);const i=arguments.length-2;i&&this._sync(["_insertElements",t,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}Tn.defaults={},Tn.prototype.datasetElementType=null,Tn.prototype.dataElementType=null;class Mn{constructor(){this.x=void 0,this.y=void 0,this.active=!1,this.options=void 0,this.$animations=void 0}tooltipPosition(t){const{x:e,y:i}=this.getProps(["x","y"],t);return{x:e,y:i}}hasValue(){return It(this.x)&&It(this.y)}getProps(t,e){const i=this.$animations;if(!e||!i)return this;const n={};return t.forEach((t=>{n[t]=i[t]&&i[t].active()?i[t]._to:this[t]})),n}}Mn.defaults={},Mn.defaultRoutes=void 0;const Pn={values:t=>V(t)?t:""+t,numeric(t,e,i){if(0===t)return"0";const n=this.chart.options.locale;let o,r=t;if(i.length>1){const e=Math.max(Math.abs(i[0].value),Math.abs(i[i.length-1].value));(e<1e-4||e>1e15)&&(o="scientific"),r=function(t,e){let i=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;Math.abs(i)>=1&&t!==Math.floor(t)&&(i=t-Math.floor(t));return i}(t,i)}const s=Tt(Math.abs(r)),a=Math.max(Math.min(-1*Math.floor(s),20),0),l={notation:o,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),Di(t,n,l)},logarithmic(t,e,i){if(0===t)return"0";const n=t/Math.pow(10,Math.floor(Tt(t)));return 1===n||2===n||5===n?Pn.numeric.call(this,t,e,i):""}};var En={formatters:Pn};function In(t,e){const i=t.options.ticks,n=i.maxTicksLimit||function(t){const e=t.options.offset,i=t._tickSize(),n=t._length/i+(e?0:1),o=t._maxLength/i;return Math.floor(Math.min(n,o))}(t),o=i.major.enabled?function(t){const e=[];let i,n;for(i=0,n=t.length;i<n;i++)t[i].major&&e.push(i);return e}(e):[],r=o.length,s=o[0],a=o[r-1],l=[];if(r>n)return function(t,e,i,n){let o,r=0,s=i[0];for(n=Math.ceil(n),o=0;o<t.length;o++)o===s&&(e.push(t[o]),r++,s=i[r*n])}(e,l,o,r/n),l;const c=function(t,e,i){const n=function(t){const e=t.length;let i,n;if(e<2)return!1;for(n=t[0],i=1;i<e;++i)if(t[i]-t[i-1]!==n)return!1;return n}(t),o=e.length/i;if(!n)return Math.max(o,1);const r=Et(n);for(let t=0,e=r.length-1;t<e;t++){const e=r[t];if(e>o)return e}return Math.max(o,1)}(o,e,n);if(r>0){let t,i;const n=r>1?Math.round((a-s)/(r-1)):null;for(An(e,l,c,Y(n)?0:s-n,s),t=0,i=r-1;t<i;t++)An(e,l,c,o[t],o[t+1]);return An(e,l,c,a,Y(n)?e.length:a+n),l}return An(e,l,c),l}function An(t,e,i,n,o){const r=G(n,0),s=Math.min(G(o,t.length),t.length);let a,l,c,h=0;for(i=Math.ceil(i),o&&(a=o-n,i=a/Math.floor(a/i)),c=r;c<0;)h++,c=Math.round(r+h*i);for(l=Math.max(r,0);l<s;l++)l===c&&(e.push(t[l]),h++,c=Math.round(r+h*i))}vt.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",grace:0,grid:{display:!0,lineWidth:1,drawBorder:!0,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,e)=>e.lineWidth,tickColor:(t,e)=>e.color,offset:!1,borderDash:[],borderDashOffset:0,borderWidth:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:En.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),vt.route("scale.ticks","color","","color"),vt.route("scale.grid","color","","borderColor"),vt.route("scale.grid","borderColor","","borderColor"),vt.route("scale.title","color","","color"),vt.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&"callback"!==t&&"parser"!==t,_indexable:t=>"borderDash"!==t&&"tickBorderDash"!==t}),vt.describe("scales",{_fallback:"scale"}),vt.describe("scale.ticks",{_scriptable:t=>"backdropPadding"!==t&&"callback"!==t,_indexable:t=>"backdropPadding"!==t});const Dn=(t,e,i)=>"top"===e||"left"===e?t[e]+i:t[e]-i;function Rn(t,e){const i=[],n=t.length/e,o=t.length;let r=0;for(;r<o;r+=n)i.push(t[Math.floor(r)]);return i}function Ln(t,e,i){const n=t.ticks.length,o=Math.min(e,n-1),r=t._startPixel,s=t._endPixel,a=1e-6;let l,c=t.getPixelForTick(o);if(!(i&&(l=1===n?Math.max(c-r,s-c):0===e?(t.getPixelForTick(1)-c)/2:(c-t.getPixelForTick(o-1))/2,c+=o<e?l:-l,c<r-a||c>s+a)))return c}function On(t){return t.drawTicks?t.tickLength:0}function zn(t,e){if(!t.display)return 0;const i=We(t.font,e),n=He(t.padding);return(V(t.text)?t.text.length:1)*i.lineHeight+n.height}function Fn(t,e,i){let o=n(t);return(i&&"right"!==e||!i&&"right"===e)&&(o=(t=>"left"===t?"right":"right"===t?"left":t)(o)),o}class Bn extends Mn{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,e){return t}getUserBounds(){let{_userMin:t,_userMax:e,_suggestedMin:i,_suggestedMax:n}=this;return t=X(t,Number.POSITIVE_INFINITY),e=X(e,Number.NEGATIVE_INFINITY),i=X(i,Number.POSITIVE_INFINITY),n=X(n,Number.NEGATIVE_INFINITY),{min:X(t,i),max:X(e,n),minDefined:q(t),maxDefined:q(e)}}getMinMax(t){let e,{min:i,max:n,minDefined:o,maxDefined:r}=this.getUserBounds();if(o&&r)return{min:i,max:n};const s=this.getMatchingVisibleMetas();for(let a=0,l=s.length;a<l;++a)e=s[a].controller.getMinMax(this,t),o||(i=Math.min(i,e.min)),r||(n=Math.max(n,e.max));return i=r&&i>n?n:i,n=o&&i>n?i:n,{min:X(i,X(n,i)),max:X(n,X(i,n))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Q(this.options.beforeUpdate,[this])}update(t,e,i){const{beginAtZero:n,grace:o,ticks:r}=this.options,s=r.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=e,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=Ye(this,o,n),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const a=s<this.ticks.length;this._convertTicksToLabels(a?Rn(this.ticks,s):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),r.display&&(r.autoSkip||"auto"===r.source)&&(this.ticks=In(this,this.ticks),this._labelSizes=null),a&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t,e,i=this.options.reverse;this.isHorizontal()?(t=this.left,e=this.right):(t=this.top,e=this.bottom,i=!i),this._startPixel=t,this._endPixel=e,this._reversePixels=i,this._length=e-t,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Q(this.options.afterUpdate,[this])}beforeSetDimensions(){Q(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Q(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),Q(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Q(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const e=this.options.ticks;let i,n,o;for(i=0,n=t.length;i<n;i++)o=t[i],o.label=Q(e.callback,[o.value,i,t],this)}afterTickToLabelConversion(){Q(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Q(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,e=t.ticks,i=this.ticks.length,n=e.minRotation||0,o=e.maxRotation;let r,s,a,l=n;if(!this._isVisible()||!e.display||n>=o||i<=1||!this.isHorizontal())return void(this.labelRotation=n);const c=this._getLabelSizes(),h=c.widest.width,u=c.highest.height,d=jt(this.chart.width-h,0,this.maxWidth);r=t.offset?this.maxWidth/i:d/(i-1),h+6>r&&(r=d/(i-(t.offset?.5:1)),s=this.maxHeight-On(t.grid)-e.padding-zn(t.title,this.chart.options.font),a=Math.sqrt(h*h+u*u),l=Ot(Math.min(Math.asin(jt((c.highest.height+6)/r,-1,1)),Math.asin(jt(s/a,-1,1))-Math.asin(jt(u/a,-1,1)))),l=Math.max(n,Math.min(o,l))),this.labelRotation=l}afterCalculateLabelRotation(){Q(this.options.afterCalculateLabelRotation,[this])}beforeFit(){Q(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:e,options:{ticks:i,title:n,grid:o}}=this,r=this._isVisible(),s=this.isHorizontal();if(r){const r=zn(n,e.options.font);if(s?(t.width=this.maxWidth,t.height=On(o)+r):(t.height=this.maxHeight,t.width=On(o)+r),i.display&&this.ticks.length){const{first:e,last:n,widest:o,highest:r}=this._getLabelSizes(),a=2*i.padding,l=Lt(this.labelRotation),c=Math.cos(l),h=Math.sin(l);if(s){const e=i.mirror?0:h*o.width+c*r.height;t.height=Math.min(this.maxHeight,t.height+e+a)}else{const e=i.mirror?0:c*o.width+h*r.height;t.width=Math.min(this.maxWidth,t.width+e+a)}this._calculatePadding(e,n,h,c)}}this._handleMargins(),s?(this.width=this._length=e.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=e.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,e,i,n){const{ticks:{align:o,padding:r},position:s}=this.options,a=0!==this.labelRotation,l="top"!==s&&"x"===this.axis;if(this.isHorizontal()){const s=this.getPixelForTick(0)-this.left,c=this.right-this.getPixelForTick(this.ticks.length-1);let h=0,u=0;a?l?(h=n*t.width,u=i*e.height):(h=i*t.height,u=n*e.width):"start"===o?u=e.width:"end"===o?h=t.width:(h=t.width/2,u=e.width/2),this.paddingLeft=Math.max((h-s+r)*this.width/(this.width-s),0),this.paddingRight=Math.max((u-c+r)*this.width/(this.width-c),0)}else{let i=e.height/2,n=t.height/2;"start"===o?(i=0,n=t.height):"end"===o&&(i=e.height,n=0),this.paddingTop=i+r,this.paddingBottom=n+r}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Q(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:e}=this.options;return"top"===e||"bottom"===e||"x"===t}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){let e,i;for(this.beforeTickToLabelConversion(),this.generateTickLabels(t),e=0,i=t.length;e<i;e++)Y(t[e].label)&&(t.splice(e,1),i--,e--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const e=this.options.ticks.sampleSize;let i=this.ticks;e<i.length&&(i=Rn(i,e)),this._labelSizes=t=this._computeLabelSizes(i,i.length)}return t}_computeLabelSizes(t,e){const{ctx:i,_longestTextCache:n}=this,o=[],r=[];let s,a,l,c,h,u,d,p,f,m,g,y=0,v=0;for(s=0;s<e;++s){if(c=t[s].label,h=this._resolveTickFontOptions(s),i.font=u=h.string,d=n[u]=n[u]||{data:{},gc:[]},p=h.lineHeight,f=m=0,Y(c)||V(c)){if(V(c))for(a=0,l=c.length;a<l;++a)g=c[a],Y(g)||V(g)||(f=qt(i,d.data,d.gc,f,g),m+=p)}else f=qt(i,d.data,d.gc,f,c),m=p;o.push(f),r.push(m),y=Math.max(f,y),v=Math.max(m,v)}!function(t,e){J(t,(t=>{const i=t.gc,n=i.length/2;let o;if(n>e){for(o=0;o<n;++o)delete t.data[i[o]];i.splice(0,n)}}))}(n,e);const b=o.indexOf(y),x=r.indexOf(v),$=t=>({width:o[t]||0,height:r[t]||0});return{first:$(0),last:$(e-1),widest:$(b),highest:$(x),widths:o,heights:r}}getLabelForValue(t){return t}getPixelForValue(t,e){return NaN}getValueForPixel(t){}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const e=this._startPixel+t*this._length;return Yt(this._alignToPixels?Gt(this.chart,e,0):e)}getDecimalForPixel(t){const e=(t-this._startPixel)/this._length;return this._reversePixels?1-e:e}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:e}=this;return t<0&&e<0?e:t>0&&e>0?t:0}getContext(t){const e=this.ticks||[];if(t>=0&&t<e.length){const i=e[t];return i.$context||(i.$context=function(t,e,i){return Ve(t,{tick:i,index:e,type:"tick"})}(this.getContext(),t,i))}return this.$context||(this.$context=Ve(this.chart.getContext(),{scale:this,type:"scale"}))}_tickSize(){const t=this.options.ticks,e=Lt(this.labelRotation),i=Math.abs(Math.cos(e)),n=Math.abs(Math.sin(e)),o=this._getLabelSizes(),r=t.autoSkipPadding||0,s=o?o.widest.width+r:0,a=o?o.highest.height+r:0;return this.isHorizontal()?a*i>s*n?s/i:a/n:a*n<s*i?a/i:s/n}_isVisible(){const t=this.options.display;return"auto"!==t?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const e=this.axis,i=this.chart,n=this.options,{grid:o,position:r}=n,s=o.offset,a=this.isHorizontal(),l=this.ticks.length+(s?1:0),c=On(o),h=[],u=o.setContext(this.getContext()),d=u.drawBorder?u.borderWidth:0,p=d/2,f=function(t){return Gt(i,t,d)};let m,g,y,v,b,x,$,w,_,k,S,C;if("top"===r)m=f(this.bottom),x=this.bottom-c,w=m-p,k=f(t.top)+p,C=t.bottom;else if("bottom"===r)m=f(this.top),k=t.top,C=f(t.bottom)-p,x=m+p,w=this.top+c;else if("left"===r)m=f(this.right),b=this.right-c,$=m-p,_=f(t.left)+p,S=t.right;else if("right"===r)m=f(this.left),_=t.left,S=f(t.right)-p,b=m+p,$=this.left+c;else if("x"===e){if("center"===r)m=f((t.top+t.bottom)/2+.5);else if(U(r)){const t=Object.keys(r)[0],e=r[t];m=f(this.chart.scales[t].getPixelForValue(e))}k=t.top,C=t.bottom,x=m+p,w=x+c}else if("y"===e){if("center"===r)m=f((t.left+t.right)/2);else if(U(r)){const t=Object.keys(r)[0],e=r[t];m=f(this.chart.scales[t].getPixelForValue(e))}b=m-p,$=b-c,_=t.left,S=t.right}const T=G(n.ticks.maxTicksLimit,l),M=Math.max(1,Math.ceil(l/T));for(g=0;g<l;g+=M){const t=o.setContext(this.getContext(g)),e=t.lineWidth,n=t.color,r=o.borderDash||[],l=t.borderDashOffset,c=t.tickWidth,u=t.tickColor,d=t.tickBorderDash||[],p=t.tickBorderDashOffset;y=Ln(this,g,s),void 0!==y&&(v=Gt(i,y,e),a?b=$=_=S=v:x=w=k=C=v,h.push({tx1:b,ty1:x,tx2:$,ty2:w,x1:_,y1:k,x2:S,y2:C,width:e,color:n,borderDash:r,borderDashOffset:l,tickWidth:c,tickColor:u,tickBorderDash:d,tickBorderDashOffset:p}))}return this._ticksLength=l,this._borderValue=m,h}_computeLabelItems(t){const e=this.axis,i=this.options,{position:n,ticks:o}=i,r=this.isHorizontal(),s=this.ticks,{align:a,crossAlign:l,padding:c,mirror:h}=o,u=On(i.grid),d=u+c,p=h?-c:d,f=-Lt(this.labelRotation),m=[];let g,y,v,b,x,$,w,_,k,S,C,T,M="middle";if("top"===n)$=this.bottom-p,w=this._getXAxisLabelAlignment();else if("bottom"===n)$=this.top+p,w=this._getXAxisLabelAlignment();else if("left"===n){const t=this._getYAxisLabelAlignment(u);w=t.textAlign,x=t.x}else if("right"===n){const t=this._getYAxisLabelAlignment(u);w=t.textAlign,x=t.x}else if("x"===e){if("center"===n)$=(t.top+t.bottom)/2+d;else if(U(n)){const t=Object.keys(n)[0],e=n[t];$=this.chart.scales[t].getPixelForValue(e)+d}w=this._getXAxisLabelAlignment()}else if("y"===e){if("center"===n)x=(t.left+t.right)/2-d;else if(U(n)){const t=Object.keys(n)[0],e=n[t];x=this.chart.scales[t].getPixelForValue(e)}w=this._getYAxisLabelAlignment(u).textAlign}"y"===e&&("start"===a?M="top":"end"===a&&(M="bottom"));const P=this._getLabelSizes();for(g=0,y=s.length;g<y;++g){v=s[g],b=v.label;const t=o.setContext(this.getContext(g));_=this.getPixelForTick(g)+o.labelOffset,k=this._resolveTickFontOptions(g),S=k.lineHeight,C=V(b)?b.length:1;const e=C/2,i=t.color,a=t.textStrokeColor,c=t.textStrokeWidth;let u;if(r?(x=_,T="top"===n?"near"===l||0!==f?-C*S+S/2:"center"===l?-P.highest.height/2-e*S+S:-P.highest.height+S/2:"near"===l||0!==f?S/2:"center"===l?P.highest.height/2-e*S:P.highest.height-C*S,h&&(T*=-1)):($=_,T=(1-C)*S/2),t.showLabelBackdrop){const e=He(t.backdropPadding),i=P.heights[g],n=P.widths[g];let o=$+T-e.top,r=x-e.left;switch(M){case"middle":o-=i/2;break;case"bottom":o-=i}switch(w){case"center":r-=n/2;break;case"right":r-=n}u={left:r,top:o,width:n+e.width,height:i+e.height,color:t.backdropColor}}m.push({rotation:f,label:b,font:k,color:i,strokeColor:a,strokeWidth:c,textOffset:T,textAlign:w,textBaseline:M,translation:[x,$],backdrop:u})}return m}_getXAxisLabelAlignment(){const{position:t,ticks:e}=this.options;if(-Lt(this.labelRotation))return"top"===t?"left":"right";let i="center";return"start"===e.align?i="left":"end"===e.align&&(i="right"),i}_getYAxisLabelAlignment(t){const{position:e,ticks:{crossAlign:i,mirror:n,padding:o}}=this.options,r=t+o,s=this._getLabelSizes().widest.width;let a,l;return"left"===e?n?(l=this.right+o,"near"===i?a="left":"center"===i?(a="center",l+=s/2):(a="right",l+=s)):(l=this.right-r,"near"===i?a="right":"center"===i?(a="center",l-=s/2):(a="left",l=this.left)):"right"===e?n?(l=this.left+o,"near"===i?a="right":"center"===i?(a="center",l-=s/2):(a="left",l-=s)):(l=this.left+r,"near"===i?a="left":"center"===i?(a="center",l+=s/2):(a="right",l=this.right)):a="right",{textAlign:a,x:l}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,e=this.options.position;return"left"===e||"right"===e?{top:0,left:this.left,bottom:t.height,right:this.right}:"top"===e||"bottom"===e?{top:this.top,left:0,bottom:this.bottom,right:t.width}:void 0}drawBackground(){const{ctx:t,options:{backgroundColor:e},left:i,top:n,width:o,height:r}=this;e&&(t.save(),t.fillStyle=e,t.fillRect(i,n,o,r),t.restore())}getLineWidthForValue(t){const e=this.options.grid;if(!this._isVisible()||!e.display)return 0;const i=this.ticks.findIndex((e=>e.value===t));if(i>=0){return e.setContext(this.getContext(i)).lineWidth}return 0}drawGrid(t){const e=this.options.grid,i=this.ctx,n=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let o,r;const s=(t,e,n)=>{n.width&&n.color&&(i.save(),i.lineWidth=n.width,i.strokeStyle=n.color,i.setLineDash(n.borderDash||[]),i.lineDashOffset=n.borderDashOffset,i.beginPath(),i.moveTo(t.x,t.y),i.lineTo(e.x,e.y),i.stroke(),i.restore())};if(e.display)for(o=0,r=n.length;o<r;++o){const t=n[o];e.drawOnChartArea&&s({x:t.x1,y:t.y1},{x:t.x2,y:t.y2},t),e.drawTicks&&s({x:t.tx1,y:t.ty1},{x:t.tx2,y:t.ty2},{color:t.tickColor,width:t.tickWidth,borderDash:t.tickBorderDash,borderDashOffset:t.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:e,options:{grid:i}}=this,n=i.setContext(this.getContext()),o=i.drawBorder?n.borderWidth:0;if(!o)return;const r=i.setContext(this.getContext(0)).lineWidth,s=this._borderValue;let a,l,c,h;this.isHorizontal()?(a=Gt(t,this.left,o)-o/2,l=Gt(t,this.right,r)+r/2,c=h=s):(c=Gt(t,this.top,o)-o/2,h=Gt(t,this.bottom,r)+r/2,a=l=s),e.save(),e.lineWidth=n.borderWidth,e.strokeStyle=n.borderColor,e.beginPath(),e.moveTo(a,c),e.lineTo(l,h),e.stroke(),e.restore()}drawLabels(t){if(!this.options.ticks.display)return;const e=this.ctx,i=this._computeLabelArea();i&&Jt(e,i);const n=this._labelItems||(this._labelItems=this._computeLabelItems(t));let o,r;for(o=0,r=n.length;o<r;++o){const t=n[o],i=t.font,r=t.label;t.backdrop&&(e.fillStyle=t.backdrop.color,e.fillRect(t.backdrop.left,t.backdrop.top,t.backdrop.width,t.backdrop.height)),ne(e,r,0,t.textOffset,i,t)}i&&te(e)}drawTitle(){const{ctx:t,options:{position:e,title:i,reverse:n}}=this;if(!i.display)return;const r=We(i.font),s=He(i.padding),a=i.align;let l=r.lineHeight/2;"bottom"===e||"center"===e||U(e)?(l+=s.bottom,V(i.text)&&(l+=r.lineHeight*(i.text.length-1))):l+=s.top;const{titleX:c,titleY:h,maxWidth:u,rotation:d}=function(t,e,i,n){const{top:r,left:s,bottom:a,right:l,chart:c}=t,{chartArea:h,scales:u}=c;let d,p,f,m=0;const g=a-r,y=l-s;if(t.isHorizontal()){if(p=o(n,s,l),U(i)){const t=Object.keys(i)[0],n=i[t];f=u[t].getPixelForValue(n)+g-e}else f="center"===i?(h.bottom+h.top)/2+g-e:Dn(t,i,e);d=l-s}else{if(U(i)){const t=Object.keys(i)[0],n=i[t];p=u[t].getPixelForValue(n)-y+e}else p="center"===i?(h.left+h.right)/2-y+e:Dn(t,i,e);f=o(n,a,r),m="left"===i?-kt:kt}return{titleX:p,titleY:f,maxWidth:d,rotation:m}}(this,l,e,a);ne(t,i.text,0,0,r,{color:i.color,maxWidth:u,rotation:d,textAlign:Fn(a,e,n),textBaseline:"middle",translation:[c,h]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,e=t.ticks&&t.ticks.z||0,i=G(t.grid&&t.grid.z,-1);return this._isVisible()&&this.draw===Bn.prototype.draw?[{z:i,draw:t=>{this.drawBackground(),this.drawGrid(t),this.drawTitle()}},{z:i+1,draw:()=>{this.drawBorder()}},{z:e,draw:t=>{this.drawLabels(t)}}]:[{z:e,draw:t=>{this.draw(t)}}]}getMatchingVisibleMetas(t){const e=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",n=[];let o,r;for(o=0,r=e.length;o<r;++o){const r=e[o];r[i]!==this.id||t&&r.type!==t||n.push(r)}return n}_resolveTickFontOptions(t){return We(this.options.ticks.setContext(this.getContext(t)).font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class Nn{constructor(t,e,i){this.type=t,this.scope=e,this.override=i,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const e=Object.getPrototypeOf(t);let i;(function(t){return"id"in t&&"defaults"in t})(e)&&(i=this.register(e));const n=this.items,o=t.id,r=this.scope+"."+o;if(!o)throw new Error("class does not have id: "+t);return o in n||(n[o]=t,function(t,e,i){const n=ot(Object.create(null),[i?vt.get(i):{},vt.get(e),t.defaults]);vt.set(e,n),t.defaultRoutes&&function(t,e){Object.keys(e).forEach((i=>{const n=i.split("."),o=n.pop(),r=[t].concat(n).join("."),s=e[i].split("."),a=s.pop(),l=s.join(".");vt.route(r,o,l,a)}))}(e,t.defaultRoutes);t.descriptors&&vt.describe(e,t.descriptors)}(t,r,i),this.override&&vt.override(t.id,t.overrides)),r}get(t){return this.items[t]}unregister(t){const e=this.items,i=t.id,n=this.scope;i in e&&delete e[i],n&&i in vt[n]&&(delete vt[n][i],this.override&&delete ft[i])}}var Hn=new class{constructor(){this.controllers=new Nn(Tn,"datasets",!0),this.elements=new Nn(Mn,"elements"),this.plugins=new Nn(Object,"plugins"),this.scales=new Nn(Bn,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,e,i){[...e].forEach((e=>{const n=i||this._getRegistryForType(e);i||n.isForType(e)||n===this.plugins&&e.id?this._exec(t,n,e):J(e,(e=>{const n=i||this._getRegistryForType(e);this._exec(t,n,e)}))}))}_exec(t,e,i){const n=ct(t);Q(i["before"+n],[],i),e[t](i),Q(i["after"+n],[],i)}_getRegistryForType(t){for(let e=0;e<this._typedRegistries.length;e++){const i=this._typedRegistries[e];if(i.isForType(t))return i}return this.plugins}_get(t,e,i){const n=e.get(t);if(void 0===n)throw new Error('"'+t+'" is not a registered '+i+".");return n}};class Wn{constructor(){this._init=[]}notify(t,e,i,n){"beforeInit"===e&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));const o=n?this._descriptors(t).filter(n):this._descriptors(t),r=this._notify(o,t,e,i);return"afterDestroy"===e&&(this._notify(o,t,"stop"),this._notify(this._init,t,"uninstall")),r}_notify(t,e,i,n){n=n||{};for(const o of t){const t=o.plugin;if(!1===Q(t[i],[e,n,o.options],t)&&n.cancelable)return!1}return!0}invalidate(){Y(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const e=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),e}_createDescriptors(t,e){const i=t&&t.config,n=G(i.options&&i.options.plugins,{}),o=function(t){const e=[],i=Object.keys(Hn.plugins.items);for(let t=0;t<i.length;t++)e.push(Hn.getPlugin(i[t]));const n=t.plugins||[];for(let t=0;t<n.length;t++){const i=n[t];-1===e.indexOf(i)&&e.push(i)}return e}(i);return!1!==n||e?function(t,e,i,n){const o=[],r=t.getContext();for(let s=0;s<e.length;s++){const a=e[s],l=jn(i[a.id],n);null!==l&&o.push({plugin:a,options:Yn(t.config,a,l,r)})}return o}(t,o,n,e):[]}_notifyStateChanges(t){const e=this._oldCache||[],i=this._cache,n=(t,e)=>t.filter((t=>!e.some((e=>t.plugin.id===e.plugin.id))));this._notify(n(e,i),t,"stop"),this._notify(n(i,e),t,"start")}}function jn(t,e){return e||!1!==t?!0===t?{}:t:null}function Yn(t,e,i,n){const o=t.pluginScopeKeys(e),r=t.getOptionScopes(i,o);return t.createResolver(r,n,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Vn(t,e){const i=vt.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||i.indexAxis||"x"}function Un(t,e){return"x"===t||"y"===t?t:e.axis||("top"===(i=e.position)||"bottom"===i?"x":"left"===i||"right"===i?"y":void 0)||t.charAt(0).toLowerCase();var i}function qn(t){const e=t.options||(t.options={});e.plugins=G(e.plugins,{}),e.scales=function(t,e){const i=ft[t.type]||{scales:{}},n=e.scales||{},o=Vn(t.type,e),r=Object.create(null),s=Object.create(null);return Object.keys(n).forEach((t=>{const e=n[t];if(!U(e))return console.error(`Invalid scale configuration for scale: ${t}`);if(e._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${t}`);const a=Un(t,e),l=function(t,e){return t===e?"_index_":"_value_"}(a,o),c=i.scales||{};r[a]=r[a]||t,s[t]=rt(Object.create(null),[{axis:a},e,c[a],c[l]])})),t.data.datasets.forEach((i=>{const o=i.type||t.type,a=i.indexAxis||Vn(o,e),l=(ft[o]||{}).scales||{};Object.keys(l).forEach((t=>{const e=function(t,e){let i=t;return"_index_"===t?i=e:"_value_"===t&&(i="x"===e?"y":"x"),i}(t,a),o=i[e+"AxisID"]||r[e]||e;s[o]=s[o]||Object.create(null),rt(s[o],[{axis:e},n[o],l[t]])}))})),Object.keys(s).forEach((t=>{const e=s[t];rt(e,[vt.scales[e.type],vt.scale])})),s}(t,e)}function Xn(t){return(t=t||{}).datasets=t.datasets||[],t.labels=t.labels||[],t}const Gn=new Map,Zn=new Set;function Kn(t,e){let i=Gn.get(t);return i||(i=e(),Gn.set(t,i),Zn.add(i)),i}const Qn=(t,e,i)=>{const n=lt(e,i);void 0!==n&&t.add(n)};class Jn{constructor(t){this._config=function(t){return(t=t||{}).data=Xn(t.data),qn(t),t}(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=Xn(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),qn(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return Kn(t,(()=>[[`datasets.${t}`,""]]))}datasetAnimationScopeKeys(t,e){return Kn(`${t}.transition.${e}`,(()=>[[`datasets.${t}.transitions.${e}`,`transitions.${e}`],[`datasets.${t}`,""]]))}datasetElementScopeKeys(t,e){return Kn(`${t}-${e}`,(()=>[[`datasets.${t}.elements.${e}`,`datasets.${t}`,`elements.${e}`,""]]))}pluginScopeKeys(t){const e=t.id;return Kn(`${this.type}-plugin-${e}`,(()=>[[`plugins.${e}`,...t.additionalOptionScopes||[]]]))}_cachedScopes(t,e){const i=this._scopeCache;let n=i.get(t);return n&&!e||(n=new Map,i.set(t,n)),n}getOptionScopes(t,e,i){const{options:n,type:o}=this,r=this._cachedScopes(t,i),s=r.get(e);if(s)return s;const a=new Set;e.forEach((e=>{t&&(a.add(t),e.forEach((e=>Qn(a,t,e)))),e.forEach((t=>Qn(a,n,t))),e.forEach((t=>Qn(a,ft[o]||{},t))),e.forEach((t=>Qn(a,vt,t))),e.forEach((t=>Qn(a,mt,t)))}));const l=Array.from(a);return 0===l.length&&l.push(Object.create(null)),Zn.has(e)&&r.set(e,l),l}chartOptionScopes(){const{options:t,type:e}=this;return[t,ft[e]||{},vt.datasets[e]||{},{type:e},vt,mt]}resolveNamedOptions(t,e,i,n=[""]){const o={$shared:!0},{resolver:r,subPrefixes:s}=to(this._resolverCache,t,n);let a=r;if(function(t,e){const{isScriptable:i,isIndexable:n}=ai(t);for(const o of e){const e=i(o),r=n(o),s=(r||e)&&t[o];if(e&&(ut(s)||eo(s))||r&&V(s))return!0}return!1}(r,e)){o.$shared=!1;a=si(r,i=ut(i)?i():i,this.createResolver(t,i,s))}for(const t of e)o[t]=a[t];return o}createResolver(t,e,i=[""],n){const{resolver:o}=to(this._resolverCache,t,i);return U(e)?si(o,e,void 0,n):o}}function to(t,e,i){let n=t.get(e);n||(n=new Map,t.set(e,n));const o=i.join();let r=n.get(o);if(!r){r={resolver:ri(e,i),subPrefixes:i.filter((t=>!t.toLowerCase().includes("hover")))},n.set(o,r)}return r}const eo=t=>U(t)&&Object.getOwnPropertyNames(t).reduce(((e,i)=>e||ut(t[i])),!1);const io=["top","bottom","left","right","chartArea"];function no(t,e){return"top"===t||"bottom"===t||-1===io.indexOf(t)&&"x"===e}function oo(t,e){return function(i,n){return i[t]===n[t]?i[e]-n[e]:i[t]-n[t]}}function ro(t){const e=t.chart,i=e.options.animation;e.notifyPlugins("afterRender"),Q(i&&i.onComplete,[t],e)}function so(t){const e=t.chart,i=e.options.animation;Q(i&&i.onProgress,[t],e)}function ao(t){return fe()&&"string"==typeof t?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const lo={},co=t=>{const e=ao(t);return Object.values(lo).filter((t=>t.canvas===e)).pop()};function ho(t,e,i){const n=Object.keys(t);for(const o of n){const n=+o;if(n>=e){const r=t[o];delete t[o],(i>0||n>e)&&(t[n+i]=r)}}}class uo{constructor(t,e){const n=this.config=new Jn(e),o=ao(t),r=co(o);if(r)throw new Error("Canvas is already in use. Chart with ID '"+r.id+"' must be destroyed before the canvas can be reused.");const a=n.createResolver(n.chartOptionScopes(),this.getContext());this.platform=new(n.platform||cn(o)),this.platform.updateConfig(n);const l=this.platform.acquireContext(o,a.aspectRatio),c=l&&l.canvas,h=c&&c.height,u=c&&c.width;this.id=j(),this.ctx=l,this.canvas=c,this.width=u,this.height=h,this._options=a,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new Wn,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=i((t=>this.update(t)),a.resizeDelay||0),this._dataChanges=[],lo[this.id]=this,l&&c?(s.listen(this,"complete",ro),s.listen(this,"progress",so),this._initialize(),this.attached&&this.update()):console.error("Failed to create chart: can't acquire context from the given item")}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:e},width:i,height:n,_aspectRatio:o}=this;return Y(t)?e&&o?o:n?i/n:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():ke(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Zt(this.canvas,this.ctx),this}stop(){return s.stop(this),this}resize(t,e){s.running(this)?this._resizeBeforeDraw={width:t,height:e}:this._resize(t,e)}_resize(t,e){const i=this.options,n=this.canvas,o=i.maintainAspectRatio&&this.aspectRatio,r=this.platform.getMaximumSize(n,t,e,o),s=i.devicePixelRatio||this.platform.getDevicePixelRatio(),a=this.width?"resize":"attach";this.width=r.width,this.height=r.height,this._aspectRatio=this.aspectRatio,ke(this,s,!0)&&(this.notifyPlugins("resize",{size:r}),Q(i.onResize,[this,r],this),this.attached&&this._doResize(a)&&this.render())}ensureScalesHaveIDs(){J(this.options.scales||{},((t,e)=>{t.id=e}))}buildOrUpdateScales(){const t=this.options,e=t.scales,i=this.scales,n=Object.keys(i).reduce(((t,e)=>(t[e]=!1,t)),{});let o=[];e&&(o=o.concat(Object.keys(e).map((t=>{const i=e[t],n=Un(t,i),o="r"===n,r="x"===n;return{options:i,dposition:o?"chartArea":r?"bottom":"left",dtype:o?"radialLinear":r?"category":"linear"}})))),J(o,(e=>{const o=e.options,r=o.id,s=Un(r,o),a=G(o.type,e.dtype);void 0!==o.position&&no(o.position,s)===no(e.dposition)||(o.position=e.dposition),n[r]=!0;let l=null;if(r in i&&i[r].type===a)l=i[r];else{l=new(Hn.getScale(a))({id:r,type:a,ctx:this.ctx,chart:this}),i[l.id]=l}l.init(o,t)})),J(n,((t,e)=>{t||delete i[e]})),J(i,(t=>{oi.configure(this,t,t.options),oi.addBox(this,t)}))}_updateMetasets(){const t=this._metasets,e=this.data.datasets.length,i=t.length;if(t.sort(((t,e)=>t.index-e.index)),i>e){for(let t=e;t<i;++t)this._destroyDatasetMeta(t);t.splice(e,i-e)}this._sortedMetasets=t.slice(0).sort(oo("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:e}}=this;t.length>e.length&&delete this._stacks,t.forEach(((t,i)=>{0===e.filter((e=>e===t._dataset)).length&&this._destroyDatasetMeta(i)}))}buildOrUpdateControllers(){const t=[],e=this.data.datasets;let i,n;for(this._removeUnreferencedMetasets(),i=0,n=e.length;i<n;i++){const n=e[i];let o=this.getDatasetMeta(i);const r=n.type||this.config.type;if(o.type&&o.type!==r&&(this._destroyDatasetMeta(i),o=this.getDatasetMeta(i)),o.type=r,o.indexAxis=n.indexAxis||Vn(r,this.options),o.order=n.order||0,o.index=i,o.label=""+n.label,o.visible=this.isDatasetVisible(i),o.controller)o.controller.updateIndex(i),o.controller.linkScales();else{const e=Hn.getController(r),{datasetElementType:n,dataElementType:s}=vt.datasets[r];Object.assign(e.prototype,{dataElementType:Hn.getElement(s),datasetElementType:n&&Hn.getElement(n)}),o.controller=new e(this,i),t.push(o.controller)}}return this._updateMetasets(),t}_resetElements(){J(this.data.datasets,((t,e)=>{this.getDatasetMeta(e).controller.reset()}),this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const e=this.config;e.update();const i=this._options=e.createResolver(e.chartOptionScopes(),this.getContext()),n=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),!1===this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0}))return;const o=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let r=0;for(let t=0,e=this.data.datasets.length;t<e;t++){const{controller:e}=this.getDatasetMeta(t),i=!n&&-1===o.indexOf(e);e.buildOrUpdateElements(i),r=Math.max(+e.getMaxOverflow(),r)}r=this._minPadding=i.layout.autoPadding?r:0,this._updateLayout(r),n||J(o,(t=>{t.reset()})),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(oo("z","_idx"));const{_active:s,_lastEvent:a}=this;a?this._eventHandler(a,!0):s.length&&this._updateHoverStyles(s,s,!0),this.render()}_updateScales(){J(this.scales,(t=>{oi.removeBox(this,t)})),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,e=new Set(Object.keys(this._listeners)),i=new Set(t.events);dt(e,i)&&!!this._responsiveListeners===t.responsive||(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,e=this._getUniformDataChanges()||[];for(const{method:i,start:n,count:o}of e){ho(t,n,"_removeElements"===i?-o:o)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const e=this.data.datasets.length,i=e=>new Set(t.filter((t=>t[0]===e)).map(((t,e)=>e+","+t.splice(1).join(",")))),n=i(0);for(let t=1;t<e;t++)if(!dt(n,i(t)))return;return Array.from(n).map((t=>t.split(","))).map((t=>({method:t[1],start:+t[2],count:+t[3]})))}_updateLayout(t){if(!1===this.notifyPlugins("beforeLayout",{cancelable:!0}))return;oi.update(this,this.width,this.height,t);const e=this.chartArea,i=e.width<=0||e.height<=0;this._layers=[],J(this.boxes,(t=>{i&&"chartArea"===t.position||(t.configure&&t.configure(),this._layers.push(...t._layers()))}),this),this._layers.forEach(((t,e)=>{t._idx=e})),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(!1!==this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})){for(let t=0,e=this.data.datasets.length;t<e;++t)this.getDatasetMeta(t).controller.configure();for(let e=0,i=this.data.datasets.length;e<i;++e)this._updateDataset(e,ut(t)?t({datasetIndex:e}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,e){const i=this.getDatasetMeta(t),n={meta:i,index:t,mode:e,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetUpdate",n)&&(i.controller._update(e),n.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",n))}render(){!1!==this.notifyPlugins("beforeRender",{cancelable:!0})&&(s.has(this)?this.attached&&!s.running(this)&&s.start(this):(this.draw(),ro({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:t,height:e}=this._resizeBeforeDraw;this._resize(t,e),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0)return;if(!1===this.notifyPlugins("beforeDraw",{cancelable:!0}))return;const e=this._layers;for(t=0;t<e.length&&e[t].z<=0;++t)e[t].draw(this.chartArea);for(this._drawDatasets();t<e.length;++t)e[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const e=this._sortedMetasets,i=[];let n,o;for(n=0,o=e.length;n<o;++n){const o=e[n];t&&!o.visible||i.push(o)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(!1===this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0}))return;const t=this.getSortedVisibleDatasetMetas();for(let e=t.length-1;e>=0;--e)this._drawDataset(t[e]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const e=this.ctx,i=t._clip,n=!i.disabled,o=this.chartArea,r={meta:t,index:t.index,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetDraw",r)&&(n&&Jt(e,{left:!1===i.left?0:o.left-i.left,right:!1===i.right?this.width:o.right+i.right,top:!1===i.top?0:o.top-i.top,bottom:!1===i.bottom?this.height:o.bottom+i.bottom}),t.controller.draw(),n&&te(e),r.cancelable=!1,this.notifyPlugins("afterDatasetDraw",r))}getElementsAtEventForMode(t,e,i,n){const o=Re.modes[e];return"function"==typeof o?o(this,t,i,n):[]}getDatasetMeta(t){const e=this.data.datasets[t],i=this._metasets;let n=i.filter((t=>t&&t._dataset===e)).pop();return n||(n={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:e&&e.order||0,index:t,_dataset:e,_parsed:[],_sorted:!1},i.push(n)),n}getContext(){return this.$context||(this.$context=Ve(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const e=this.data.datasets[t];if(!e)return!1;const i=this.getDatasetMeta(t);return"boolean"==typeof i.hidden?!i.hidden:!e.hidden}setDatasetVisibility(t,e){this.getDatasetMeta(t).hidden=!e}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,e,i){const n=i?"show":"hide",o=this.getDatasetMeta(t),r=o.controller._resolveAnimations(void 0,n);ht(e)?(o.data[e].hidden=!i,this.update()):(this.setDatasetVisibility(t,i),r.update(o,{visible:i}),this.update((e=>e.datasetIndex===t?n:void 0)))}hide(t,e){this._updateVisibility(t,e,!1)}show(t,e){this._updateVisibility(t,e,!0)}_destroyDatasetMeta(t){const e=this._metasets[t];e&&e.controller&&e.controller._destroy(),delete this._metasets[t]}_stop(){let t,e;for(this.stop(),s.remove(this),t=0,e=this.data.datasets.length;t<e;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:e}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),Zt(t,e),this.platform.releaseContext(e),this.canvas=null,this.ctx=null),this.notifyPlugins("destroy"),delete lo[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,e=this.platform,i=(i,n)=>{e.addEventListener(this,i,n),t[i]=n},n=(t,e,i)=>{t.offsetX=e,t.offsetY=i,this._eventHandler(t)};J(this.options.events,(t=>i(t,n)))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,e=this.platform,i=(i,n)=>{e.addEventListener(this,i,n),t[i]=n},n=(i,n)=>{t[i]&&(e.removeEventListener(this,i,n),delete t[i])},o=(t,e)=>{this.canvas&&this.resize(t,e)};let r;const s=()=>{n("attach",s),this.attached=!0,this.resize(),i("resize",o),i("detach",r)};r=()=>{this.attached=!1,n("resize",o),this._stop(),this._resize(0,0),i("attach",s)},e.isAttached(this.canvas)?s():r()}unbindEvents(){J(this._listeners,((t,e)=>{this.platform.removeEventListener(this,e,t)})),this._listeners={},J(this._responsiveListeners,((t,e)=>{this.platform.removeEventListener(this,e,t)})),this._responsiveListeners=void 0}updateHoverStyle(t,e,i){const n=i?"set":"remove";let o,r,s,a;for("dataset"===e&&(o=this.getDatasetMeta(t[0].datasetIndex),o.controller["_"+n+"DatasetHoverStyle"]()),s=0,a=t.length;s<a;++s){r=t[s];const e=r&&this.getDatasetMeta(r.datasetIndex).controller;e&&e[n+"HoverStyle"](r.element,r.datasetIndex,r.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const e=this._active||[],i=t.map((({datasetIndex:t,index:e})=>{const i=this.getDatasetMeta(t);if(!i)throw new Error("No dataset found at index "+t);return{datasetIndex:t,element:i.data[e],index:e}}));!tt(i,e)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,e))}notifyPlugins(t,e,i){return this._plugins.notify(this,t,e,i)}_updateHoverStyles(t,e,i){const n=this.options.hover,o=(t,e)=>t.filter((t=>!e.some((e=>t.datasetIndex===e.datasetIndex&&t.index===e.index)))),r=o(e,t),s=i?t:o(t,e);r.length&&this.updateHoverStyle(r,n.mode,!1),s.length&&n.mode&&this.updateHoverStyle(s,n.mode,!0)}_eventHandler(t,e){const i={event:t,replay:e,cancelable:!0,inChartArea:Qt(t,this.chartArea,this._minPadding)},n=e=>(e.options.events||this.options.events).includes(t.native.type);if(!1===this.notifyPlugins("beforeEvent",i,n))return;const o=this._handleEvent(t,e,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,n),(o||i.changed)&&this.render(),this}_handleEvent(t,e,i){const{_active:n=[],options:o}=this,r=e,s=this._getActiveElements(t,n,i,r),a=pt(t),l=function(t,e,i,n){return i&&"mouseout"!==t.type?n?e:t:null}(t,this._lastEvent,i,a);i&&(this._lastEvent=null,Q(o.onHover,[t,s,this],this),a&&Q(o.onClick,[t,s,this],this));const c=!tt(s,n);return(c||e)&&(this._active=s,this._updateHoverStyles(s,n,e)),this._lastEvent=l,c}_getActiveElements(t,e,i,n){if("mouseout"===t.type)return[];if(!i)return e;const o=this.options.hover;return this.getElementsAtEventForMode(t,o.mode,o,n)}}const po=()=>J(uo.instances,(t=>t._plugins.invalidate())),fo=!0;function mo(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}Object.defineProperties(uo,{defaults:{enumerable:fo,value:vt},instances:{enumerable:fo,value:lo},overrides:{enumerable:fo,value:ft},registry:{enumerable:fo,value:Hn},version:{enumerable:fo,value:"3.7.1"},getChart:{enumerable:fo,value:co},register:{enumerable:fo,value:(...t)=>{Hn.add(...t),po()}},unregister:{enumerable:fo,value:(...t)=>{Hn.remove(...t),po()}}});class go{constructor(t){this.options=t||{}}formats(){return mo()}parse(t,e){return mo()}format(t,e){return mo()}add(t,e,i){return mo()}diff(t,e,i){return mo()}startOf(t,e,i){return mo()}endOf(t,e){return mo()}}go.override=function(t){Object.assign(go.prototype,t)};var yo={_date:go};function vo(t){const e=t.iScale,i=function(t,e){if(!t._cache.$bar){const i=t.getMatchingVisibleMetas(e);let n=[];for(let e=0,o=i.length;e<o;e++)n=n.concat(i[e].controller.getAllParsedValues(t));t._cache.$bar=pe(n.sort(((t,e)=>t-e)))}return t._cache.$bar}(e,t.type);let n,o,r,s,a=e._length;const l=()=>{32767!==r&&-32768!==r&&(ht(s)&&(a=Math.min(a,Math.abs(r-s)||a)),s=r)};for(n=0,o=i.length;n<o;++n)r=e.getPixelForValue(i[n]),l();for(s=void 0,n=0,o=e.ticks.length;n<o;++n)r=e.getPixelForTick(n),l();return a}function bo(t,e,i,n){return V(t)?function(t,e,i,n){const o=i.parse(t[0],n),r=i.parse(t[1],n),s=Math.min(o,r),a=Math.max(o,r);let l=s,c=a;Math.abs(s)>Math.abs(a)&&(l=a,c=s),e[i.axis]=c,e._custom={barStart:l,barEnd:c,start:o,end:r,min:s,max:a}}(t,e,i,n):e[i.axis]=i.parse(t,n),e}function xo(t,e,i,n){const o=t.iScale,r=t.vScale,s=o.getLabels(),a=o===r,l=[];let c,h,u,d;for(c=i,h=i+n;c<h;++c)d=e[c],u={},u[o.axis]=a||o.parse(s[c],c),l.push(bo(d,u,r,c));return l}function $o(t){return t&&void 0!==t.barStart&&void 0!==t.barEnd}function wo(t,e,i,n){let o=e.borderSkipped;const r={};if(!o)return void(t.borderSkipped=r);const{start:s,end:a,reverse:l,top:c,bottom:h}=function(t){let e,i,n,o,r;return t.horizontal?(e=t.base>t.x,i="left",n="right"):(e=t.base<t.y,i="bottom",n="top"),e?(o="end",r="start"):(o="start",r="end"),{start:i,end:n,reverse:e,top:o,bottom:r}}(t);"middle"===o&&i&&(t.enableBorderRadius=!0,(i._top||0)===n?o=c:(i._bottom||0)===n?o=h:(r[_o(h,s,a,l)]=!0,o=c)),r[_o(o,s,a,l)]=!0,t.borderSkipped=r}function _o(t,e,i,n){var o,r,s;return n?(s=i,t=ko(t=(o=t)===(r=e)?s:o===s?r:o,i,e)):t=ko(t,e,i),t}function ko(t,e,i){return"start"===t?e:"end"===t?i:t}function So(t,{inflateAmount:e},i){t.inflateAmount="auto"===e?1===i?.33:0:e}class Co extends Tn{parsePrimitiveData(t,e,i,n){return xo(t,e,i,n)}parseArrayData(t,e,i,n){return xo(t,e,i,n)}parseObjectData(t,e,i,n){const{iScale:o,vScale:r}=t,{xAxisKey:s="x",yAxisKey:a="y"}=this._parsing,l="x"===o.axis?s:a,c="x"===r.axis?s:a,h=[];let u,d,p,f;for(u=i,d=i+n;u<d;++u)f=e[u],p={},p[o.axis]=o.parse(lt(f,l),u),h.push(bo(lt(f,c),p,r,u));return h}updateRangeFromParsed(t,e,i,n){super.updateRangeFromParsed(t,e,i,n);const o=i._custom;o&&e===this._cachedMeta.vScale&&(t.min=Math.min(t.min,o.min),t.max=Math.max(t.max,o.max))}getMaxOverflow(){return 0}getLabelAndValue(t){const e=this._cachedMeta,{iScale:i,vScale:n}=e,o=this.getParsed(t),r=o._custom,s=$o(r)?"["+r.start+", "+r.end+"]":""+n.getLabelForValue(o[n.axis]);return{label:""+i.getLabelForValue(o[i.axis]),value:s}}initialize(){this.enableOptionSharing=!0,super.initialize();this._cachedMeta.stack=this.getDataset().stack}update(t){const e=this._cachedMeta;this.updateElements(e.data,0,e.data.length,t)}updateElements(t,e,i,n){const o="reset"===n,{index:r,_cachedMeta:{vScale:s}}=this,a=s.getBasePixel(),l=s.isHorizontal(),c=this._getRuler(),h=this.resolveDataElementOptions(e,n),u=this.getSharedOptions(h),d=this.includeOptions(n,u);this.updateSharedOptions(u,n,h);for(let h=e;h<e+i;h++){const e=this.getParsed(h),i=o||Y(e[s.axis])?{base:a,head:a}:this._calculateBarValuePixels(h),p=this._calculateBarIndexPixels(h,c),f=(e._stacks||{})[s.axis],m={horizontal:l,base:i.base,enableBorderRadius:!f||$o(e._custom)||r===f._top||r===f._bottom,x:l?i.head:p.center,y:l?p.center:i.head,height:l?p.size:Math.abs(i.size),width:l?Math.abs(i.size):p.size};d&&(m.options=u||this.resolveDataElementOptions(h,t[h].active?"active":n));const g=m.options||t[h].options;wo(m,g,f,r),So(m,g,c.ratio),this.updateElement(t[h],h,m,n)}}_getStacks(t,e){const i=this._cachedMeta.iScale,n=i.getMatchingVisibleMetas(this._type),o=i.options.stacked,r=n.length,s=[];let a,l;for(a=0;a<r;++a)if(l=n[a],l.controller.options.grouped){if(void 0!==e){const t=l.controller.getParsed(e)[l.controller._cachedMeta.vScale.axis];if(Y(t)||isNaN(t))continue}if((!1===o||-1===s.indexOf(l.stack)||void 0===o&&void 0===l.stack)&&s.push(l.stack),l.index===t)break}return s.length||s.push(void 0),s}_getStackCount(t){return this._getStacks(void 0,t).length}_getStackIndex(t,e,i){const n=this._getStacks(t,i),o=void 0!==e?n.indexOf(e):-1;return-1===o?n.length-1:o}_getRuler(){const t=this.options,e=this._cachedMeta,i=e.iScale,n=[];let o,r;for(o=0,r=e.data.length;o<r;++o)n.push(i.getPixelForValue(this.getParsed(o)[i.axis],o));const s=t.barThickness;return{min:s||vo(e),pixels:n,start:i._startPixel,end:i._endPixel,stackCount:this._getStackCount(),scale:i,grouped:t.grouped,ratio:s?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){const{_cachedMeta:{vScale:e,_stacked:i},options:{base:n,minBarLength:o}}=this,r=n||0,s=this.getParsed(t),a=s._custom,l=$o(a);let c,h,u=s[e.axis],d=0,p=i?this.applyStack(e,s,i):u;p!==u&&(d=p-u,p=u),l&&(u=a.barStart,p=a.barEnd-a.barStart,0!==u&&Mt(u)!==Mt(a.barEnd)&&(d=0),d+=u);const f=Y(n)||l?d:n;let m=e.getPixelForValue(f);if(c=this.chart.getDataVisibility(t)?e.getPixelForValue(d+p):m,h=c-m,Math.abs(h)<o&&(h=function(t,e,i){return 0!==t?Mt(t):(e.isHorizontal()?1:-1)*(e.min>=i?1:-1)}(h,e,r)*o,u===r&&(m-=h/2),c=m+h),m===e.getPixelForValue(r)){const t=Mt(h)*e.getLineWidthForValue(r)/2;m+=t,h-=t}return{size:h,base:m,head:c,center:c+h/2}}_calculateBarIndexPixels(t,e){const i=e.scale,n=this.options,o=n.skipNull,r=G(n.maxBarThickness,1/0);let s,a;if(e.grouped){const i=o?this._getStackCount(t):e.stackCount,l="flex"===n.barThickness?function(t,e,i,n){const o=e.pixels,r=o[t];let s=t>0?o[t-1]:null,a=t<o.length-1?o[t+1]:null;const l=i.categoryPercentage;null===s&&(s=r-(null===a?e.end-e.start:a-r)),null===a&&(a=r+r-s);const c=r-(r-Math.min(s,a))/2*l;return{chunk:Math.abs(a-s)/2*l/n,ratio:i.barPercentage,start:c}}(t,e,n,i):function(t,e,i,n){const o=i.barThickness;let r,s;return Y(o)?(r=e.min*i.categoryPercentage,s=i.barPercentage):(r=o*n,s=1),{chunk:r/n,ratio:s,start:e.pixels[t]-r/2}}(t,e,n,i),c=this._getStackIndex(this.index,this._cachedMeta.stack,o?t:void 0);s=l.start+l.chunk*c+l.chunk/2,a=Math.min(r,l.chunk*l.ratio)}else s=i.getPixelForValue(this.getParsed(t)[i.axis],t),a=Math.min(r,e.min*e.ratio);return{base:s-a/2,head:s+a/2,center:s,size:a}}draw(){const t=this._cachedMeta,e=t.vScale,i=t.data,n=i.length;let o=0;for(;o<n;++o)null!==this.getParsed(o)[e.axis]&&i[o].draw(this._ctx)}}Co.id="bar",Co.defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}},Co.overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};class To extends Tn{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(t,e,i,n){const o=super.parsePrimitiveData(t,e,i,n);for(let t=0;t<o.length;t++)o[t]._custom=this.resolveDataElementOptions(t+i).radius;return o}parseArrayData(t,e,i,n){const o=super.parseArrayData(t,e,i,n);for(let t=0;t<o.length;t++){const n=e[i+t];o[t]._custom=G(n[2],this.resolveDataElementOptions(t+i).radius)}return o}parseObjectData(t,e,i,n){const o=super.parseObjectData(t,e,i,n);for(let t=0;t<o.length;t++){const n=e[i+t];o[t]._custom=G(n&&n.r&&+n.r,this.resolveDataElementOptions(t+i).radius)}return o}getMaxOverflow(){const t=this._cachedMeta.data;let e=0;for(let i=t.length-1;i>=0;--i)e=Math.max(e,t[i].size(this.resolveDataElementOptions(i))/2);return e>0&&e}getLabelAndValue(t){const e=this._cachedMeta,{xScale:i,yScale:n}=e,o=this.getParsed(t),r=i.getLabelForValue(o.x),s=n.getLabelForValue(o.y),a=o._custom;return{label:e.label,value:"("+r+", "+s+(a?", "+a:"")+")"}}update(t){const e=this._cachedMeta.data;this.updateElements(e,0,e.length,t)}updateElements(t,e,i,n){const o="reset"===n,{iScale:r,vScale:s}=this._cachedMeta,a=this.resolveDataElementOptions(e,n),l=this.getSharedOptions(a),c=this.includeOptions(n,l),h=r.axis,u=s.axis;for(let a=e;a<e+i;a++){const e=t[a],i=!o&&this.getParsed(a),l={},d=l[h]=o?r.getPixelForDecimal(.5):r.getPixelForValue(i[h]),p=l[u]=o?s.getBasePixel():s.getPixelForValue(i[u]);l.skip=isNaN(d)||isNaN(p),c&&(l.options=this.resolveDataElementOptions(a,e.active?"active":n),o&&(l.options.radius=0)),this.updateElement(e,a,l,n)}this.updateSharedOptions(l,n,a)}resolveDataElementOptions(t,e){const i=this.getParsed(t);let n=super.resolveDataElementOptions(t,e);n.$shared&&(n=Object.assign({},n,{$shared:!1}));const o=n.radius;return"active"!==e&&(n.radius=0),n.radius+=G(i&&i._custom,o),n}}To.id="bubble",To.defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}},To.overrides={scales:{x:{type:"linear"},y:{type:"linear"}},plugins:{tooltip:{callbacks:{title:()=>""}}}};class Mo extends Tn{constructor(t,e){super(t,e),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,e){const i=this.getDataset().data,n=this._cachedMeta;if(!1===this._parsing)n._parsed=i;else{let o,r,s=t=>+i[t];if(U(i[t])){const{key:t="value"}=this._parsing;s=e=>+lt(i[e],t)}for(o=t,r=t+e;o<r;++o)n._parsed[o]=s(o)}}_getRotation(){return Lt(this.options.rotation-90)}_getCircumference(){return Lt(this.options.circumference)}_getRotationExtents(){let t=xt,e=-xt;for(let i=0;i<this.chart.data.datasets.length;++i)if(this.chart.isDatasetVisible(i)){const n=this.chart.getDatasetMeta(i).controller,o=n._getRotation(),r=n._getCircumference();t=Math.min(t,o),e=Math.max(e,o+r)}return{rotation:t,circumference:e-t}}update(t){const e=this.chart,{chartArea:i}=e,n=this._cachedMeta,o=n.data,r=this.getMaxBorderWidth()+this.getMaxOffset(o)+this.options.spacing,s=Math.max((Math.min(i.width,i.height)-r)/2,0),a=Math.min(Z(this.options.cutout,s),1),l=this._getRingWeight(this.index),{circumference:c,rotation:h}=this._getRotationExtents(),{ratioX:u,ratioY:d,offsetX:p,offsetY:f}=function(t,e,i){let n=1,o=1,r=0,s=0;if(e<xt){const a=t,l=a+e,c=Math.cos(a),h=Math.sin(a),u=Math.cos(l),d=Math.sin(l),p=(t,e,n)=>Wt(t,a,l,!0)?1:Math.max(e,e*i,n,n*i),f=(t,e,n)=>Wt(t,a,l,!0)?-1:Math.min(e,e*i,n,n*i),m=p(0,c,u),g=p(kt,h,d),y=f(bt,c,u),v=f(bt+kt,h,d);n=(m-y)/2,o=(g-v)/2,r=-(m+y)/2,s=-(g+v)/2}return{ratioX:n,ratioY:o,offsetX:r,offsetY:s}}(h,c,a),m=(i.width-r)/u,g=(i.height-r)/d,y=Math.max(Math.min(m,g)/2,0),v=K(this.options.radius,y),b=(v-Math.max(v*a,0))/this._getVisibleDatasetWeightTotal();this.offsetX=p*v,this.offsetY=f*v,n.total=this.calculateTotal(),this.outerRadius=v-b*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-b*l,0),this.updateElements(o,0,o.length,t)}_circumference(t,e){const i=this.options,n=this._cachedMeta,o=this._getCircumference();return e&&i.animation.animateRotate||!this.chart.getDataVisibility(t)||null===n._parsed[t]||n.data[t].hidden?0:this.calculateCircumference(n._parsed[t]*o/xt)}updateElements(t,e,i,n){const o="reset"===n,r=this.chart,s=r.chartArea,a=r.options.animation,l=(s.left+s.right)/2,c=(s.top+s.bottom)/2,h=o&&a.animateScale,u=h?0:this.innerRadius,d=h?0:this.outerRadius,p=this.resolveDataElementOptions(e,n),f=this.getSharedOptions(p),m=this.includeOptions(n,f);let g,y=this._getRotation();for(g=0;g<e;++g)y+=this._circumference(g,o);for(g=e;g<e+i;++g){const e=this._circumference(g,o),i=t[g],r={x:l+this.offsetX,y:c+this.offsetY,startAngle:y,endAngle:y+e,circumference:e,outerRadius:d,innerRadius:u};m&&(r.options=f||this.resolveDataElementOptions(g,i.active?"active":n)),y+=e,this.updateElement(i,g,r,n)}this.updateSharedOptions(f,n,p)}calculateTotal(){const t=this._cachedMeta,e=t.data;let i,n=0;for(i=0;i<e.length;i++){const o=t._parsed[i];null===o||isNaN(o)||!this.chart.getDataVisibility(i)||e[i].hidden||(n+=Math.abs(o))}return n}calculateCircumference(t){const e=this._cachedMeta.total;return e>0&&!isNaN(t)?xt*(Math.abs(t)/e):0}getLabelAndValue(t){const e=this._cachedMeta,i=this.chart,n=i.data.labels||[],o=Di(e._parsed[t],i.options.locale);return{label:n[t]||"",value:o}}getMaxBorderWidth(t){let e=0;const i=this.chart;let n,o,r,s,a;if(!t)for(n=0,o=i.data.datasets.length;n<o;++n)if(i.isDatasetVisible(n)){r=i.getDatasetMeta(n),t=r.data,s=r.controller;break}if(!t)return 0;for(n=0,o=t.length;n<o;++n)a=s.resolveDataElementOptions(n),"inner"!==a.borderAlign&&(e=Math.max(e,a.borderWidth||0,a.hoverBorderWidth||0));return e}getMaxOffset(t){let e=0;for(let i=0,n=t.length;i<n;++i){const t=this.resolveDataElementOptions(i);e=Math.max(e,t.offset||0,t.hoverOffset||0)}return e}_getRingWeightOffset(t){let e=0;for(let i=0;i<t;++i)this.chart.isDatasetVisible(i)&&(e+=this._getRingWeight(i));return e}_getRingWeight(t){return Math.max(G(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}Mo.id="doughnut",Mo.defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"},Mo.descriptors={_scriptable:t=>"spacing"!==t,_indexable:t=>"spacing"!==t},Mo.overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const e=t.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:i}}=t.legend.options;return e.labels.map(((e,n)=>{const o=t.getDatasetMeta(0).controller.getStyle(n);return{text:e,fillStyle:o.backgroundColor,strokeStyle:o.borderColor,lineWidth:o.borderWidth,pointStyle:i,hidden:!t.getDataVisibility(n),index:n}}))}return[]}},onClick(t,e,i){i.chart.toggleDataVisibility(e.index),i.chart.update()}},tooltip:{callbacks:{title:()=>"",label(t){let e=t.label;const i=": "+t.formattedValue;return V(e)?(e=e.slice(),e[0]+=i):e+=i,e}}}}};class Po extends Tn{initialize(){this.enableOptionSharing=!0,super.initialize()}update(t){const e=this._cachedMeta,{dataset:i,data:n=[],_dataset:o}=e,r=this.chart._animationsDisabled;let{start:s,count:a}=function(t,e,i){const n=e.length;let o=0,r=n;if(t._sorted){const{iScale:s,_parsed:a}=t,l=s.axis,{min:c,max:h,minDefined:u,maxDefined:d}=s.getUserBounds();u&&(o=jt(Math.min(ae(a,s.axis,c).lo,i?n:ae(e,l,s.getPixelForValue(c)).lo),0,n-1)),r=d?jt(Math.max(ae(a,s.axis,h).hi+1,i?0:ae(e,l,s.getPixelForValue(h)).hi+1),o,n)-o:n-o}return{start:o,count:r}}(e,n,r);this._drawStart=s,this._drawCount=a,function(t){const{xScale:e,yScale:i,_scaleRanges:n}=t,o={xmin:e.min,xmax:e.max,ymin:i.min,ymax:i.max};if(!n)return t._scaleRanges=o,!0;const r=n.xmin!==e.min||n.xmax!==e.max||n.ymin!==i.min||n.ymax!==i.max;return Object.assign(n,o),r}(e)&&(s=0,a=n.length),i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!o._decimated,i.points=n;const l=this.resolveDatasetElementOptions(t);this.options.showLine||(l.borderWidth=0),l.segment=this.options.segment,this.updateElement(i,void 0,{animated:!r,options:l},t),this.updateElements(n,s,a,t)}updateElements(t,e,i,n){const o="reset"===n,{iScale:r,vScale:s,_stacked:a,_dataset:l}=this._cachedMeta,c=this.resolveDataElementOptions(e,n),h=this.getSharedOptions(c),u=this.includeOptions(n,h),d=r.axis,p=s.axis,{spanGaps:f,segment:m}=this.options,g=It(f)?f:Number.POSITIVE_INFINITY,y=this.chart._animationsDisabled||o||"none"===n;let v=e>0&&this.getParsed(e-1);for(let c=e;c<e+i;++c){const e=t[c],i=this.getParsed(c),f=y?e:{},b=Y(i[p]),x=f[d]=r.getPixelForValue(i[d],c),$=f[p]=o||b?s.getBasePixel():s.getPixelForValue(a?this.applyStack(s,i,a):i[p],c);f.skip=isNaN(x)||isNaN($)||b,f.stop=c>0&&i[d]-v[d]>g,m&&(f.parsed=i,f.raw=l.data[c]),u&&(f.options=h||this.resolveDataElementOptions(c,e.active?"active":n)),y||this.updateElement(e,c,f,n),v=i}this.updateSharedOptions(h,n,c)}getMaxOverflow(){const t=this._cachedMeta,e=t.dataset,i=e.options&&e.options.borderWidth||0,n=t.data||[];if(!n.length)return i;const o=n[0].size(this.resolveDataElementOptions(0)),r=n[n.length-1].size(this.resolveDataElementOptions(n.length-1));return Math.max(i,o,r)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}Po.id="line",Po.defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1},Po.overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};class Eo extends Tn{constructor(t,e){super(t,e),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(t){const e=this._cachedMeta,i=this.chart,n=i.data.labels||[],o=Di(e._parsed[t].r,i.options.locale);return{label:n[t]||"",value:o}}update(t){const e=this._cachedMeta.data;this._updateRadius(),this.updateElements(e,0,e.length,t)}_updateRadius(){const t=this.chart,e=t.chartArea,i=t.options,n=Math.min(e.right-e.left,e.bottom-e.top),o=Math.max(n/2,0),r=(o-Math.max(i.cutoutPercentage?o/100*i.cutoutPercentage:1,0))/t.getVisibleDatasetCount();this.outerRadius=o-r*this.index,this.innerRadius=this.outerRadius-r}updateElements(t,e,i,n){const o="reset"===n,r=this.chart,s=this.getDataset(),a=r.options.animation,l=this._cachedMeta.rScale,c=l.xCenter,h=l.yCenter,u=l.getIndexAngle(0)-.5*bt;let d,p=u;const f=360/this.countVisibleElements();for(d=0;d<e;++d)p+=this._computeAngle(d,n,f);for(d=e;d<e+i;d++){const e=t[d];let i=p,m=p+this._computeAngle(d,n,f),g=r.getDataVisibility(d)?l.getDistanceFromCenterForValue(s.data[d]):0;p=m,o&&(a.animateScale&&(g=0),a.animateRotate&&(i=m=u));const y={x:c,y:h,innerRadius:0,outerRadius:g,startAngle:i,endAngle:m,options:this.resolveDataElementOptions(d,e.active?"active":n)};this.updateElement(e,d,y,n)}}countVisibleElements(){const t=this.getDataset(),e=this._cachedMeta;let i=0;return e.data.forEach(((e,n)=>{!isNaN(t.data[n])&&this.chart.getDataVisibility(n)&&i++})),i}_computeAngle(t,e,i){return this.chart.getDataVisibility(t)?Lt(this.resolveDataElementOptions(t,e).angle||i):0}}Eo.id="polarArea",Eo.defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0},Eo.overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const e=t.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:i}}=t.legend.options;return e.labels.map(((e,n)=>{const o=t.getDatasetMeta(0).controller.getStyle(n);return{text:e,fillStyle:o.backgroundColor,strokeStyle:o.borderColor,lineWidth:o.borderWidth,pointStyle:i,hidden:!t.getDataVisibility(n),index:n}}))}return[]}},onClick(t,e,i){i.chart.toggleDataVisibility(e.index),i.chart.update()}},tooltip:{callbacks:{title:()=>"",label:t=>t.chart.data.labels[t.dataIndex]+": "+t.formattedValue}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}};class Io extends Mo{}Io.id="pie",Io.defaults={cutout:0,rotation:0,circumference:360,radius:"100%"};class Ao extends Tn{getLabelAndValue(t){const e=this._cachedMeta.vScale,i=this.getParsed(t);return{label:e.getLabels()[t],value:""+e.getLabelForValue(i[e.axis])}}update(t){const e=this._cachedMeta,i=e.dataset,n=e.data||[],o=e.iScale.getLabels();if(i.points=n,"resize"!==t){const e=this.resolveDatasetElementOptions(t);this.options.showLine||(e.borderWidth=0);const r={_loop:!0,_fullLoop:o.length===n.length,options:e};this.updateElement(i,void 0,r,t)}this.updateElements(n,0,n.length,t)}updateElements(t,e,i,n){const o=this.getDataset(),r=this._cachedMeta.rScale,s="reset"===n;for(let a=e;a<e+i;a++){const e=t[a],i=this.resolveDataElementOptions(a,e.active?"active":n),l=r.getPointPositionForValue(a,o.data[a]),c=s?r.xCenter:l.x,h=s?r.yCenter:l.y,u={x:c,y:h,angle:l.angle,skip:isNaN(c)||isNaN(h),options:i};this.updateElement(e,a,u,n)}}}Ao.id="radar",Ao.defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}},Ao.overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}};class Do extends Po{}Do.id="scatter",Do.defaults={showLine:!1,fill:!1},Do.overrides={interaction:{mode:"point"},plugins:{tooltip:{callbacks:{title:()=>"",label:t=>"("+t.label+", "+t.formattedValue+")"}}},scales:{x:{type:"linear"},y:{type:"linear"}}};var Ro=Object.freeze({__proto__:null,BarController:Co,BubbleController:To,DoughnutController:Mo,LineController:Po,PolarAreaController:Eo,PieController:Io,RadarController:Ao,ScatterController:Do});function Lo(t,e,i){const{startAngle:n,pixelMargin:o,x:r,y:s,outerRadius:a,innerRadius:l}=e;let c=o/a;t.beginPath(),t.arc(r,s,a,n-c,i+c),l>o?(c=o/l,t.arc(r,s,l,i+c,n-c,!0)):t.arc(r,s,o,i+kt,n-kt),t.closePath(),t.clip()}function Oo(t,e,i,n){const o=Fe(t.options.borderRadius,["outerStart","outerEnd","innerStart","innerEnd"]);const r=(i-e)/2,s=Math.min(r,n*e/2),a=t=>{const e=(i-Math.min(r,t))*n/2;return jt(t,0,Math.min(r,e))};return{outerStart:a(o.outerStart),outerEnd:a(o.outerEnd),innerStart:jt(o.innerStart,0,s),innerEnd:jt(o.innerEnd,0,s)}}function zo(t,e,i,n){return{x:i+t*Math.cos(e),y:n+t*Math.sin(e)}}function Fo(t,e,i,n,o){const{x:r,y:s,startAngle:a,pixelMargin:l,innerRadius:c}=e,h=Math.max(e.outerRadius+n+i-l,0),u=c>0?c+n+i+l:0;let d=0;const p=o-a;if(n){const t=((c>0?c-n:0)+(h>0?h-n:0))/2;d=(p-(0!==t?p*t/(t+n):p))/2}const f=(p-Math.max(.001,p*h-i/bt)/h)/2,m=a+f+d,g=o-f-d,{outerStart:y,outerEnd:v,innerStart:b,innerEnd:x}=Oo(e,u,h,g-m),$=h-y,w=h-v,_=m+y/$,k=g-v/w,S=u+b,C=u+x,T=m+b/S,M=g-x/C;if(t.beginPath(),t.arc(r,s,h,_,k),v>0){const e=zo(w,k,r,s);t.arc(e.x,e.y,v,k,g+kt)}const P=zo(C,g,r,s);if(t.lineTo(P.x,P.y),x>0){const e=zo(C,M,r,s);t.arc(e.x,e.y,x,g+kt,M+Math.PI)}if(t.arc(r,s,u,g-x/u,m+b/u,!0),b>0){const e=zo(S,T,r,s);t.arc(e.x,e.y,b,T+Math.PI,m-kt)}const E=zo($,m,r,s);if(t.lineTo(E.x,E.y),y>0){const e=zo($,_,r,s);t.arc(e.x,e.y,y,m-kt,_)}t.closePath()}function Bo(t,e,i,n,o){const{options:r}=e,{borderWidth:s,borderJoinStyle:a}=r,l="inner"===r.borderAlign;s&&(l?(t.lineWidth=2*s,t.lineJoin=a||"round"):(t.lineWidth=s,t.lineJoin=a||"bevel"),e.fullCircles&&function(t,e,i){const{x:n,y:o,startAngle:r,pixelMargin:s,fullCircles:a}=e,l=Math.max(e.outerRadius-s,0),c=e.innerRadius+s;let h;for(i&&Lo(t,e,r+xt),t.beginPath(),t.arc(n,o,c,r+xt,r,!0),h=0;h<a;++h)t.stroke();for(t.beginPath(),t.arc(n,o,l,r,r+xt),h=0;h<a;++h)t.stroke()}(t,e,l),l&&Lo(t,e,o),Fo(t,e,i,n,o),t.stroke())}class No extends Mn{constructor(t){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,t&&Object.assign(this,t)}inRange(t,e,i){const n=this.getProps(["x","y"],i),{angle:o,distance:r}=Ft(n,{x:t,y:e}),{startAngle:s,endAngle:a,innerRadius:l,outerRadius:c,circumference:h}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],i),u=this.options.spacing/2,d=G(h,a-s)>=xt||Wt(o,s,a),p=Vt(r,l+u,c+u);return d&&p}getCenterPoint(t){const{x:e,y:i,startAngle:n,endAngle:o,innerRadius:r,outerRadius:s}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius","circumference"],t),{offset:a,spacing:l}=this.options,c=(n+o)/2,h=(r+s+l+a)/2;return{x:e+Math.cos(c)*h,y:i+Math.sin(c)*h}}tooltipPosition(t){return this.getCenterPoint(t)}draw(t){const{options:e,circumference:i}=this,n=(e.offset||0)/2,o=(e.spacing||0)/2;if(this.pixelMargin="inner"===e.borderAlign?.33:0,this.fullCircles=i>xt?Math.floor(i/xt):0,0===i||this.innerRadius<0||this.outerRadius<0)return;t.save();let r=0;if(n){r=n/2;const e=(this.startAngle+this.endAngle)/2;t.translate(Math.cos(e)*r,Math.sin(e)*r),this.circumference>=bt&&(r=n)}t.fillStyle=e.backgroundColor,t.strokeStyle=e.borderColor;const s=function(t,e,i,n){const{fullCircles:o,startAngle:r,circumference:s}=e;let a=e.endAngle;if(o){Fo(t,e,i,n,r+xt);for(let e=0;e<o;++e)t.fill();isNaN(s)||(a=r+s%xt,s%xt==0&&(a+=xt))}return Fo(t,e,i,n,a),t.fill(),a}(t,this,r,o);Bo(t,this,r,o,s),t.restore()}}function Ho(t,e,i=e){t.lineCap=G(i.borderCapStyle,e.borderCapStyle),t.setLineDash(G(i.borderDash,e.borderDash)),t.lineDashOffset=G(i.borderDashOffset,e.borderDashOffset),t.lineJoin=G(i.borderJoinStyle,e.borderJoinStyle),t.lineWidth=G(i.borderWidth,e.borderWidth),t.strokeStyle=G(i.borderColor,e.borderColor)}function Wo(t,e,i){t.lineTo(i.x,i.y)}function jo(t,e,i={}){const n=t.length,{start:o=0,end:r=n-1}=i,{start:s,end:a}=e,l=Math.max(o,s),c=Math.min(r,a),h=o<s&&r<s||o>a&&r>a;return{count:n,start:l,loop:e.loop,ilen:c<l&&!h?n+c-l:c-l}}function Yo(t,e,i,n){const{points:o,options:r}=e,{count:s,start:a,loop:l,ilen:c}=jo(o,i,n),h=function(t){return t.stepped?ee:t.tension||"monotone"===t.cubicInterpolationMode?ie:Wo}(r);let u,d,p,{move:f=!0,reverse:m}=n||{};for(u=0;u<=c;++u)d=o[(a+(m?c-u:u))%s],d.skip||(f?(t.moveTo(d.x,d.y),f=!1):h(t,p,d,m,r.stepped),p=d);return l&&(d=o[(a+(m?c:0))%s],h(t,p,d,m,r.stepped)),!!l}function Vo(t,e,i,n){const o=e.points,{count:r,start:s,ilen:a}=jo(o,i,n),{move:l=!0,reverse:c}=n||{};let h,u,d,p,f,m,g=0,y=0;const v=t=>(s+(c?a-t:t))%r,b=()=>{p!==f&&(t.lineTo(g,f),t.lineTo(g,p),t.lineTo(g,m))};for(l&&(u=o[v(0)],t.moveTo(u.x,u.y)),h=0;h<=a;++h){if(u=o[v(h)],u.skip)continue;const e=u.x,i=u.y,n=0|e;n===d?(i<p?p=i:i>f&&(f=i),g=(y*g+e)/++y):(b(),t.lineTo(e,i),d=n,y=0,p=f=i),m=i}b()}function Uo(t){const e=t.options,i=e.borderDash&&e.borderDash.length;return!(t._decimated||t._loop||e.tension||"monotone"===e.cubicInterpolationMode||e.stepped||i)?Vo:Yo}No.id="arc",No.defaults={borderAlign:"center",borderColor:"#fff",borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0},No.defaultRoutes={backgroundColor:"backgroundColor"};const qo="function"==typeof Path2D;function Xo(t,e,i,n){qo&&!e.options.segment?function(t,e,i,n){let o=e._path;o||(o=e._path=new Path2D,e.path(o,i,n)&&o.closePath()),Ho(t,e.options),t.stroke(o)}(t,e,i,n):function(t,e,i,n){const{segments:o,options:r}=e,s=Uo(e);for(const a of o)Ho(t,r,a.style),t.beginPath(),s(t,e,a,{start:i,end:i+n-1})&&t.closePath(),t.stroke()}(t,e,i,n)}class Go extends Mn{constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,e){const i=this.options;if((i.tension||"monotone"===i.cubicInterpolationMode)&&!i.stepped&&!this._pointsUpdated){const n=i.spanGaps?this._loop:this._fullLoop;ki(this._points,i,t,n,e),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=Hi(this,this.options.segment))}first(){const t=this.segments,e=this.points;return t.length&&e[t[0].start]}last(){const t=this.segments,e=this.points,i=t.length;return i&&e[t[i-1].end]}interpolate(t,e){const i=this.options,n=t[e],o=this.points,r=Ni(this,{property:e,start:n,end:n});if(!r.length)return;const s=[],a=function(t){return t.stepped?Ei:t.tension||"monotone"===t.cubicInterpolationMode?Ii:Pi}(i);let l,c;for(l=0,c=r.length;l<c;++l){const{start:c,end:h}=r[l],u=o[c],d=o[h];if(u===d){s.push(u);continue}const p=a(u,d,Math.abs((n-u[e])/(d[e]-u[e])),i.stepped);p[e]=t[e],s.push(p)}return 1===s.length?s[0]:s}pathSegment(t,e,i){return Uo(this)(t,this,e,i)}path(t,e,i){const n=this.segments,o=Uo(this);let r=this._loop;e=e||0,i=i||this.points.length-e;for(const s of n)r&=o(t,this,s,{start:e,end:e+i-1});return!!r}draw(t,e,i,n){const o=this.options||{};(this.points||[]).length&&o.borderWidth&&(t.save(),Xo(t,this,i,n),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function Zo(t,e,i,n){const o=t.options,{[i]:r}=t.getProps([i],n);return Math.abs(e-r)<o.radius+o.hitRadius}Go.id="line",Go.defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0},Go.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"},Go.descriptors={_scriptable:!0,_indexable:t=>"borderDash"!==t&&"fill"!==t};class Ko extends Mn{constructor(t){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,t&&Object.assign(this,t)}inRange(t,e,i){const n=this.options,{x:o,y:r}=this.getProps(["x","y"],i);return Math.pow(t-o,2)+Math.pow(e-r,2)<Math.pow(n.hitRadius+n.radius,2)}inXRange(t,e){return Zo(this,t,"x",e)}inYRange(t,e){return Zo(this,t,"y",e)}getCenterPoint(t){const{x:e,y:i}=this.getProps(["x","y"],t);return{x:e,y:i}}size(t){let e=(t=t||this.options||{}).radius||0;e=Math.max(e,e&&t.hoverRadius||0);return 2*(e+(e&&t.borderWidth||0))}draw(t,e){const i=this.options;this.skip||i.radius<.1||!Qt(this,e,this.size(i)/2)||(t.strokeStyle=i.borderColor,t.lineWidth=i.borderWidth,t.fillStyle=i.backgroundColor,Kt(t,i,this.x,this.y))}getRange(){const t=this.options||{};return t.radius+t.hitRadius}}function Qo(t,e){const{x:i,y:n,base:o,width:r,height:s}=t.getProps(["x","y","base","width","height"],e);let a,l,c,h,u;return t.horizontal?(u=s/2,a=Math.min(i,o),l=Math.max(i,o),c=n-u,h=n+u):(u=r/2,a=i-u,l=i+u,c=Math.min(n,o),h=Math.max(n,o)),{left:a,top:c,right:l,bottom:h}}function Jo(t,e,i,n){return t?0:jt(e,i,n)}function tr(t){const e=Qo(t),i=e.right-e.left,n=e.bottom-e.top,o=function(t,e,i){const n=t.options.borderWidth,o=t.borderSkipped,r=Be(n);return{t:Jo(o.top,r.top,0,i),r:Jo(o.right,r.right,0,e),b:Jo(o.bottom,r.bottom,0,i),l:Jo(o.left,r.left,0,e)}}(t,i/2,n/2),r=function(t,e,i){const{enableBorderRadius:n}=t.getProps(["enableBorderRadius"]),o=t.options.borderRadius,r=Ne(o),s=Math.min(e,i),a=t.borderSkipped,l=n||U(o);return{topLeft:Jo(!l||a.top||a.left,r.topLeft,0,s),topRight:Jo(!l||a.top||a.right,r.topRight,0,s),bottomLeft:Jo(!l||a.bottom||a.left,r.bottomLeft,0,s),bottomRight:Jo(!l||a.bottom||a.right,r.bottomRight,0,s)}}(t,i/2,n/2);return{outer:{x:e.left,y:e.top,w:i,h:n,radius:r},inner:{x:e.left+o.l,y:e.top+o.t,w:i-o.l-o.r,h:n-o.t-o.b,radius:{topLeft:Math.max(0,r.topLeft-Math.max(o.t,o.l)),topRight:Math.max(0,r.topRight-Math.max(o.t,o.r)),bottomLeft:Math.max(0,r.bottomLeft-Math.max(o.b,o.l)),bottomRight:Math.max(0,r.bottomRight-Math.max(o.b,o.r))}}}}function er(t,e,i,n){const o=null===e,r=null===i,s=t&&!(o&&r)&&Qo(t,n);return s&&(o||Vt(e,s.left,s.right))&&(r||Vt(i,s.top,s.bottom))}function ir(t,e){t.rect(e.x,e.y,e.w,e.h)}function nr(t,e,i={}){const n=t.x!==i.x?-e:0,o=t.y!==i.y?-e:0,r=(t.x+t.w!==i.x+i.w?e:0)-n,s=(t.y+t.h!==i.y+i.h?e:0)-o;return{x:t.x+n,y:t.y+o,w:t.w+r,h:t.h+s,radius:t.radius}}Ko.id="point",Ko.defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0},Ko.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};class or extends Mn{constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:e,options:{borderColor:i,backgroundColor:n}}=this,{inner:o,outer:r}=tr(this),s=(a=r.radius).topLeft||a.topRight||a.bottomLeft||a.bottomRight?re:ir;var a;t.save(),r.w===o.w&&r.h===o.h||(t.beginPath(),s(t,nr(r,e,o)),t.clip(),s(t,nr(o,-e,r)),t.fillStyle=i,t.fill("evenodd")),t.beginPath(),s(t,nr(o,e)),t.fillStyle=n,t.fill(),t.restore()}inRange(t,e,i){return er(this,t,e,i)}inXRange(t,e){return er(this,t,null,e)}inYRange(t,e){return er(this,null,t,e)}getCenterPoint(t){const{x:e,y:i,base:n,horizontal:o}=this.getProps(["x","y","base","horizontal"],t);return{x:o?(e+n)/2:e,y:o?i:(i+n)/2}}getRange(t){return"x"===t?this.width/2:this.height/2}}or.id="bar",or.defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0},or.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};var rr=Object.freeze({__proto__:null,ArcElement:No,LineElement:Go,PointElement:Ko,BarElement:or});function sr(t){if(t._decimated){const e=t._data;delete t._decimated,delete t._data,Object.defineProperty(t,"data",{value:e})}}function ar(t){t.data.datasets.forEach((t=>{sr(t)}))}var lr={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(t,e,i)=>{if(!i.enabled)return void ar(t);const n=t.width;t.data.datasets.forEach(((e,o)=>{const{_data:r,indexAxis:s}=e,a=t.getDatasetMeta(o),l=r||e.data;if("y"===je([s,t.options.indexAxis]))return;if("line"!==a.type)return;const c=t.scales[a.xAxisID];if("linear"!==c.type&&"time"!==c.type)return;if(t.options.parsing)return;let{start:h,count:u}=function(t,e){const i=e.length;let n,o=0;const{iScale:r}=t,{min:s,max:a,minDefined:l,maxDefined:c}=r.getUserBounds();return l&&(o=jt(ae(e,r.axis,s).lo,0,i-1)),n=c?jt(ae(e,r.axis,a).hi+1,o,i)-o:i-o,{start:o,count:n}}(a,l);if(u<=(i.threshold||4*n))return void sr(e);let d;switch(Y(r)&&(e._data=l,delete e.data,Object.defineProperty(e,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(t){this._data=t}})),i.algorithm){case"lttb":d=function(t,e,i,n,o){const r=o.samples||n;if(r>=i)return t.slice(e,e+i);const s=[],a=(i-2)/(r-2);let l=0;const c=e+i-1;let h,u,d,p,f,m=e;for(s[l++]=t[m],h=0;h<r-2;h++){let n,o=0,r=0;const c=Math.floor((h+1)*a)+1+e,g=Math.min(Math.floor((h+2)*a)+1,i)+e,y=g-c;for(n=c;n<g;n++)o+=t[n].x,r+=t[n].y;o/=y,r/=y;const v=Math.floor(h*a)+1+e,b=Math.min(Math.floor((h+1)*a)+1,i)+e,{x:x,y:$}=t[m];for(d=p=-1,n=v;n<b;n++)p=.5*Math.abs((x-o)*(t[n].y-$)-(x-t[n].x)*(r-$)),p>d&&(d=p,u=t[n],f=n);s[l++]=u,m=f}return s[l++]=t[c],s}(l,h,u,n,i);break;case"min-max":d=function(t,e,i,n){let o,r,s,a,l,c,h,u,d,p,f=0,m=0;const g=[],y=e+i-1,v=t[e].x,b=t[y].x-v;for(o=e;o<e+i;++o){r=t[o],s=(r.x-v)/b*n,a=r.y;const e=0|s;if(e===l)a<d?(d=a,c=o):a>p&&(p=a,h=o),f=(m*f+r.x)/++m;else{const i=o-1;if(!Y(c)&&!Y(h)){const e=Math.min(c,h),n=Math.max(c,h);e!==u&&e!==i&&g.push({...t[e],x:f}),n!==u&&n!==i&&g.push({...t[n],x:f})}o>0&&i!==u&&g.push(t[i]),g.push(r),l=e,m=0,d=p=a,c=h=u=o}}return g}(l,h,u,n);break;default:throw new Error(`Unsupported decimation algorithm '${i.algorithm}'`)}e._decimated=d}))},destroy(t){ar(t)}};function cr(t,e,i){const n=function(t){const e=t.options,i=e.fill;let n=G(i&&i.target,i);return void 0===n&&(n=!!e.backgroundColor),!1!==n&&null!==n&&(!0===n?"origin":n)}(t);if(U(n))return!isNaN(n.value)&&n;let o=parseFloat(n);return q(o)&&Math.floor(o)===o?("-"!==n[0]&&"+"!==n[0]||(o=e+o),!(o===e||o<0||o>=i)&&o):["origin","start","end","stack","shape"].indexOf(n)>=0&&n}class hr{constructor(t){this.x=t.x,this.y=t.y,this.radius=t.radius}pathSegment(t,e,i){const{x:n,y:o,radius:r}=this;return e=e||{start:0,end:xt},t.arc(n,o,r,e.end,e.start,!0),!i.bounds}interpolate(t){const{x:e,y:i,radius:n}=this,o=t.angle;return{x:e+Math.cos(o)*n,y:i+Math.sin(o)*n,angle:o}}}function ur(t){return(t.scale||{}).getPointPositionForValue?function(t){const{scale:e,fill:i}=t,n=e.options,o=e.getLabels().length,r=[],s=n.reverse?e.max:e.min,a=n.reverse?e.min:e.max;let l,c,h;if(h="start"===i?s:"end"===i?a:U(i)?i.value:e.getBaseValue(),n.grid.circular)return c=e.getPointPositionForValue(0,s),new hr({x:c.x,y:c.y,radius:e.getDistanceFromCenterForValue(h)});for(l=0;l<o;++l)r.push(e.getPointPositionForValue(l,h));return r}(t):function(t){const{scale:e={},fill:i}=t;let n,o=null;return"start"===i?o=e.bottom:"end"===i?o=e.top:U(i)?o=e.getPixelForValue(i.value):e.getBasePixel&&(o=e.getBasePixel()),q(o)?(n=e.isHorizontal(),{x:n?o:null,y:n?null:o}):null}(t)}function dr(t,e,i){for(;e>t;e--){const t=i[e];if(!isNaN(t.x)&&!isNaN(t.y))break}return e}function pr(t,e,i){const n=[];for(let o=0;o<i.length;o++){const r=i[o],{first:s,last:a,point:l}=fr(r,e,"x");if(!(!l||s&&a))if(s)n.unshift(l);else if(t.push(l),!a)break}t.push(...n)}function fr(t,e,i){const n=t.interpolate(e,i);if(!n)return{};const o=n[i],r=t.segments,s=t.points;let a=!1,l=!1;for(let t=0;t<r.length;t++){const e=r[t],n=s[e.start][i],c=s[e.end][i];if(Vt(o,n,c)){a=o===n,l=o===c;break}}return{first:a,last:l,point:n}}function mr(t){const{chart:e,fill:i,line:n}=t;if(q(i))return function(t,e){const i=t.getDatasetMeta(e);return i&&t.isDatasetVisible(e)?i.dataset:null}(e,i);if("stack"===i)return function(t){const{scale:e,index:i,line:n}=t,o=[],r=n.segments,s=n.points,a=function(t,e){const i=[],n=t.getMatchingVisibleMetas("line");for(let t=0;t<n.length;t++){const o=n[t];if(o.index===e)break;o.hidden||i.unshift(o.dataset)}return i}(e,i);a.push(gr({x:null,y:e.bottom},n));for(let t=0;t<r.length;t++){const e=r[t];for(let t=e.start;t<=e.end;t++)pr(o,s[t],a)}return new Go({points:o,options:{}})}(t);if("shape"===i)return!0;const o=ur(t);return o instanceof hr?o:gr(o,n)}function gr(t,e){let i=[],n=!1;return V(t)?(n=!0,i=t):i=function(t,e){const{x:i=null,y:n=null}=t||{},o=e.points,r=[];return e.segments.forEach((({start:t,end:e})=>{e=dr(t,e,o);const s=o[t],a=o[e];null!==n?(r.push({x:s.x,y:n}),r.push({x:a.x,y:n})):null!==i&&(r.push({x:i,y:s.y}),r.push({x:i,y:a.y}))})),r}(t,e),i.length?new Go({points:i,options:{tension:0},_loop:n,_fullLoop:n}):null}function yr(t,e,i){let n=t[e].fill;const o=[e];let r;if(!i)return n;for(;!1!==n&&-1===o.indexOf(n);){if(!q(n))return n;if(r=t[n],!r)return!1;if(r.visible)return n;o.push(n),n=r.fill}return!1}function vr(t,e,i){const{segments:n,points:o}=e;let r=!0,s=!1;t.beginPath();for(const a of n){const{start:n,end:l}=a,c=o[n],h=o[dr(n,l,o)];r?(t.moveTo(c.x,c.y),r=!1):(t.lineTo(c.x,i),t.lineTo(c.x,c.y)),s=!!e.pathSegment(t,a,{move:s}),s?t.closePath():t.lineTo(h.x,i)}t.lineTo(e.first().x,i),t.closePath(),t.clip()}function br(t,e,i,n){if(n)return;let o=e[t],r=i[t];return"angle"===t&&(o=Ht(o),r=Ht(r)),{property:t,start:o,end:r}}function xr(t,e,i,n){return t&&e?n(t[i],e[i]):t?t[i]:e?e[i]:0}function $r(t,e,i){const{top:n,bottom:o}=e.chart.chartArea,{property:r,start:s,end:a}=i||{};"x"===r&&(t.beginPath(),t.rect(s,n,a-s,o-n),t.clip())}function wr(t,e,i,n){const o=e.interpolate(i,n);o&&t.lineTo(o.x,o.y)}function _r(t,e){const{line:i,target:n,property:o,color:r,scale:s}=e,a=function(t,e,i){const n=t.segments,o=t.points,r=e.points,s=[];for(const t of n){let{start:n,end:a}=t;a=dr(n,a,o);const l=br(i,o[n],o[a],t.loop);if(!e.segments){s.push({source:t,target:l,start:o[n],end:o[a]});continue}const c=Ni(e,l);for(const e of c){const n=br(i,r[e.start],r[e.end],e.loop),a=Bi(t,o,n);for(const t of a)s.push({source:t,target:e,start:{[i]:xr(l,n,"start",Math.max)},end:{[i]:xr(l,n,"end",Math.min)}})}}return s}(i,n,o);for(const{source:e,target:l,start:c,end:h}of a){const{style:{backgroundColor:a=r}={}}=e,u=!0!==n;t.save(),t.fillStyle=a,$r(t,s,u&&br(o,c,h)),t.beginPath();const d=!!i.pathSegment(t,e);let p;if(u){d?t.closePath():wr(t,n,h,o);const e=!!n.pathSegment(t,l,{move:d,reverse:!0});p=d&&e,p||wr(t,n,c,o)}t.closePath(),t.fill(p?"evenodd":"nonzero"),t.restore()}}function kr(t,e,i){const n=mr(e),{line:o,scale:r,axis:s}=e,a=o.options,l=a.fill,c=a.backgroundColor,{above:h=c,below:u=c}=l||{};n&&o.points.length&&(Jt(t,i),function(t,e){const{line:i,target:n,above:o,below:r,area:s,scale:a}=e,l=i._loop?"angle":e.axis;t.save(),"x"===l&&r!==o&&(vr(t,n,s.top),_r(t,{line:i,target:n,color:o,scale:a,property:l}),t.restore(),t.save(),vr(t,n,s.bottom)),_r(t,{line:i,target:n,color:r,scale:a,property:l}),t.restore()}(t,{line:o,target:n,above:h,below:u,area:i,scale:r,axis:s}),te(t))}var Sr={id:"filler",afterDatasetsUpdate(t,e,i){const n=(t.data.datasets||[]).length,o=[];let r,s,a,l;for(s=0;s<n;++s)r=t.getDatasetMeta(s),a=r.dataset,l=null,a&&a.options&&a instanceof Go&&(l={visible:t.isDatasetVisible(s),index:s,fill:cr(a,s,n),chart:t,axis:r.controller.options.indexAxis,scale:r.vScale,line:a}),r.$filler=l,o.push(l);for(s=0;s<n;++s)l=o[s],l&&!1!==l.fill&&(l.fill=yr(o,s,i.propagate))},beforeDraw(t,e,i){const n="beforeDraw"===i.drawTime,o=t.getSortedVisibleDatasetMetas(),r=t.chartArea;for(let e=o.length-1;e>=0;--e){const i=o[e].$filler;i&&(i.line.updateControlPoints(r,i.axis),n&&kr(t.ctx,i,r))}},beforeDatasetsDraw(t,e,i){if("beforeDatasetsDraw"!==i.drawTime)return;const n=t.getSortedVisibleDatasetMetas();for(let e=n.length-1;e>=0;--e){const i=n[e].$filler;i&&kr(t.ctx,i,t.chartArea)}},beforeDatasetDraw(t,e,i){const n=e.meta.$filler;n&&!1!==n.fill&&"beforeDatasetDraw"===i.drawTime&&kr(t.ctx,n,t.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const Cr=(t,e)=>{let{boxHeight:i=e,boxWidth:n=e}=t;return t.usePointStyle&&(i=Math.min(i,e),n=Math.min(n,e)),{boxWidth:n,boxHeight:i,itemHeight:Math.max(e,i)}};class Tr extends Mn{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e,i){this.maxWidth=t,this.maxHeight=e,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let e=Q(t.generateLabels,[this.chart],this)||[];t.filter&&(e=e.filter((e=>t.filter(e,this.chart.data)))),t.sort&&(e=e.sort(((e,i)=>t.sort(e,i,this.chart.data)))),this.options.reverse&&e.reverse(),this.legendItems=e}fit(){const{options:t,ctx:e}=this;if(!t.display)return void(this.width=this.height=0);const i=t.labels,n=We(i.font),o=n.size,r=this._computeTitleHeight(),{boxWidth:s,itemHeight:a}=Cr(i,o);let l,c;e.font=n.string,this.isHorizontal()?(l=this.maxWidth,c=this._fitRows(r,o,s,a)+10):(c=this.maxHeight,l=this._fitCols(r,o,s,a)+10),this.width=Math.min(l,t.maxWidth||this.maxWidth),this.height=Math.min(c,t.maxHeight||this.maxHeight)}_fitRows(t,e,i,n){const{ctx:o,maxWidth:r,options:{labels:{padding:s}}}=this,a=this.legendHitBoxes=[],l=this.lineWidths=[0],c=n+s;let h=t;o.textAlign="left",o.textBaseline="middle";let u=-1,d=-c;return this.legendItems.forEach(((t,p)=>{const f=i+e/2+o.measureText(t.text).width;(0===p||l[l.length-1]+f+2*s>r)&&(h+=c,l[l.length-(p>0?0:1)]=0,d+=c,u++),a[p]={left:0,top:d,row:u,width:f,height:n},l[l.length-1]+=f+s})),h}_fitCols(t,e,i,n){const{ctx:o,maxHeight:r,options:{labels:{padding:s}}}=this,a=this.legendHitBoxes=[],l=this.columnSizes=[],c=r-t;let h=s,u=0,d=0,p=0,f=0;return this.legendItems.forEach(((t,r)=>{const m=i+e/2+o.measureText(t.text).width;r>0&&d+n+2*s>c&&(h+=u+s,l.push({width:u,height:d}),p+=u+s,f++,u=d=0),a[r]={left:p,top:d,col:f,width:m,height:n},u=Math.max(u,m),d+=n+s})),h+=u,l.push({width:u,height:d}),h}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:e,options:{align:i,labels:{padding:n},rtl:r}}=this,s=Ri(r,this.left,this.width);if(this.isHorizontal()){let r=0,a=o(i,this.left+n,this.right-this.lineWidths[r]);for(const l of e)r!==l.row&&(r=l.row,a=o(i,this.left+n,this.right-this.lineWidths[r])),l.top+=this.top+t+n,l.left=s.leftForLtr(s.x(a),l.width),a+=l.width+n}else{let r=0,a=o(i,this.top+t+n,this.bottom-this.columnSizes[r].height);for(const l of e)l.col!==r&&(r=l.col,a=o(i,this.top+t+n,this.bottom-this.columnSizes[r].height)),l.top=a,l.left+=this.left+n,l.left=s.leftForLtr(s.x(l.left),l.width),a+=l.height+n}}isHorizontal(){return"top"===this.options.position||"bottom"===this.options.position}draw(){if(this.options.display){const t=this.ctx;Jt(t,this),this._draw(),te(t)}}_draw(){const{options:t,columnSizes:e,lineWidths:i,ctx:n}=this,{align:s,labels:a}=t,l=vt.color,c=Ri(t.rtl,this.left,this.width),h=We(a.font),{color:u,padding:d}=a,p=h.size,f=p/2;let m;this.drawTitle(),n.textAlign=c.textAlign("left"),n.textBaseline="middle",n.lineWidth=.5,n.font=h.string;const{boxWidth:g,boxHeight:y,itemHeight:v}=Cr(a,p),b=this.isHorizontal(),x=this._computeTitleHeight();m=b?{x:o(s,this.left+d,this.right-i[0]),y:this.top+d+x,line:0}:{x:this.left+d,y:o(s,this.top+x+d,this.bottom-e[0].height),line:0},Li(this.ctx,t.textDirection);const $=v+d;this.legendItems.forEach(((w,_)=>{n.strokeStyle=w.fontColor||u,n.fillStyle=w.fontColor||u;const k=n.measureText(w.text).width,S=c.textAlign(w.textAlign||(w.textAlign=a.textAlign)),C=g+f+k;let T=m.x,M=m.y;c.setWidth(this.width),b?_>0&&T+C+d>this.right&&(M=m.y+=$,m.line++,T=m.x=o(s,this.left+d,this.right-i[m.line])):_>0&&M+$>this.bottom&&(T=m.x=T+e[m.line].width+d,m.line++,M=m.y=o(s,this.top+x+d,this.bottom-e[m.line].height));!function(t,e,i){if(isNaN(g)||g<=0||isNaN(y)||y<0)return;n.save();const o=G(i.lineWidth,1);if(n.fillStyle=G(i.fillStyle,l),n.lineCap=G(i.lineCap,"butt"),n.lineDashOffset=G(i.lineDashOffset,0),n.lineJoin=G(i.lineJoin,"miter"),n.lineWidth=o,n.strokeStyle=G(i.strokeStyle,l),n.setLineDash(G(i.lineDash,[])),a.usePointStyle){const r={radius:g*Math.SQRT2/2,pointStyle:i.pointStyle,rotation:i.rotation,borderWidth:o},s=c.xPlus(t,g/2);Kt(n,r,s,e+f)}else{const r=e+Math.max((p-y)/2,0),s=c.leftForLtr(t,g),a=Ne(i.borderRadius);n.beginPath(),Object.values(a).some((t=>0!==t))?re(n,{x:s,y:r,w:g,h:y,radius:a}):n.rect(s,r,g,y),n.fill(),0!==o&&n.stroke()}n.restore()}(c.x(T),M,w),T=r(S,T+g+f,b?T+C:this.right,t.rtl),function(t,e,i){ne(n,i.text,t,e+v/2,h,{strikethrough:i.hidden,textAlign:c.textAlign(i.textAlign)})}(c.x(T),M,w),b?m.x+=C+d:m.y+=$})),Oi(this.ctx,t.textDirection)}drawTitle(){const t=this.options,e=t.title,i=We(e.font),r=He(e.padding);if(!e.display)return;const s=Ri(t.rtl,this.left,this.width),a=this.ctx,l=e.position,c=i.size/2,h=r.top+c;let u,d=this.left,p=this.width;if(this.isHorizontal())p=Math.max(...this.lineWidths),u=this.top+h,d=o(t.align,d,this.right-p);else{const e=this.columnSizes.reduce(((t,e)=>Math.max(t,e.height)),0);u=h+o(t.align,this.top,this.bottom-e-t.labels.padding-this._computeTitleHeight())}const f=o(l,d,d+p);a.textAlign=s.textAlign(n(l)),a.textBaseline="middle",a.strokeStyle=e.color,a.fillStyle=e.color,a.font=i.string,ne(a,e.text,f,u,i)}_computeTitleHeight(){const t=this.options.title,e=We(t.font),i=He(t.padding);return t.display?e.lineHeight+i.height:0}_getLegendItemAt(t,e){let i,n,o;if(Vt(t,this.left,this.right)&&Vt(e,this.top,this.bottom))for(o=this.legendHitBoxes,i=0;i<o.length;++i)if(n=o[i],Vt(t,n.left,n.left+n.width)&&Vt(e,n.top,n.top+n.height))return this.legendItems[i];return null}handleEvent(t){const e=this.options;if(!function(t,e){if("mousemove"===t&&(e.onHover||e.onLeave))return!0;if(e.onClick&&("click"===t||"mouseup"===t))return!0;return!1}(t.type,e))return;const i=this._getLegendItemAt(t.x,t.y);if("mousemove"===t.type){const r=this._hoveredItem,s=(o=i,null!==(n=r)&&null!==o&&n.datasetIndex===o.datasetIndex&&n.index===o.index);r&&!s&&Q(e.onLeave,[t,r,this],this),this._hoveredItem=i,i&&!s&&Q(e.onHover,[t,i,this],this)}else i&&Q(e.onClick,[t,i,this],this);var n,o}}var Mr={id:"legend",_element:Tr,start(t,e,i){const n=t.legend=new Tr({ctx:t.ctx,options:i,chart:t});oi.configure(t,n,i),oi.addBox(t,n)},stop(t){oi.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,i){const n=t.legend;oi.configure(t,n,i),n.options=i},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,i){const n=e.datasetIndex,o=i.chart;o.isDatasetVisible(n)?(o.hide(n),e.hidden=!0):(o.show(n),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:i,pointStyle:n,textAlign:o,color:r}}=t.legend.options;return t._getSortedDatasetMetas().map((t=>{const s=t.controller.getStyle(i?0:void 0),a=He(s.borderWidth);return{text:e[t.index].label,fillStyle:s.backgroundColor,fontColor:r,hidden:!t.visible,lineCap:s.borderCapStyle,lineDash:s.borderDash,lineDashOffset:s.borderDashOffset,lineJoin:s.borderJoinStyle,lineWidth:(a.width+a.height)/4,strokeStyle:s.borderColor,pointStyle:n||s.pointStyle,rotation:s.rotation,textAlign:o||s.textAlign,borderRadius:0,datasetIndex:t.index}}),this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class Pr extends Mn{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e){const i=this.options;if(this.left=0,this.top=0,!i.display)return void(this.width=this.height=this.right=this.bottom=0);this.width=this.right=t,this.height=this.bottom=e;const n=V(i.text)?i.text.length:1;this._padding=He(i.padding);const o=n*We(i.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=o:this.width=o}isHorizontal(){const t=this.options.position;return"top"===t||"bottom"===t}_drawArgs(t){const{top:e,left:i,bottom:n,right:r,options:s}=this,a=s.align;let l,c,h,u=0;return this.isHorizontal()?(c=o(a,i,r),h=e+t,l=r-i):("left"===s.position?(c=i+t,h=o(a,n,e),u=-.5*bt):(c=r-t,h=o(a,e,n),u=.5*bt),l=n-e),{titleX:c,titleY:h,maxWidth:l,rotation:u}}draw(){const t=this.ctx,e=this.options;if(!e.display)return;const i=We(e.font),o=i.lineHeight/2+this._padding.top,{titleX:r,titleY:s,maxWidth:a,rotation:l}=this._drawArgs(o);ne(t,e.text,0,0,i,{color:e.color,maxWidth:a,rotation:l,textAlign:n(e.align),textBaseline:"middle",translation:[r,s]})}}var Er={id:"title",_element:Pr,start(t,e,i){!function(t,e){const i=new Pr({ctx:t.ctx,options:e,chart:t});oi.configure(t,i,e),oi.addBox(t,i),t.titleBlock=i}(t,i)},stop(t){const e=t.titleBlock;oi.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,i){const n=t.titleBlock;oi.configure(t,n,i),n.options=i},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Ir=new WeakMap;var Ar={id:"subtitle",start(t,e,i){const n=new Pr({ctx:t.ctx,options:i,chart:t});oi.configure(t,n,i),oi.addBox(t,n),Ir.set(t,n)},stop(t){oi.removeBox(t,Ir.get(t)),Ir.delete(t)},beforeUpdate(t,e,i){const n=Ir.get(t);oi.configure(t,n,i),n.options=i},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Dr={average(t){if(!t.length)return!1;let e,i,n=0,o=0,r=0;for(e=0,i=t.length;e<i;++e){const i=t[e].element;if(i&&i.hasValue()){const t=i.tooltipPosition();n+=t.x,o+=t.y,++r}}return{x:n/r,y:o/r}},nearest(t,e){if(!t.length)return!1;let i,n,o,r=e.x,s=e.y,a=Number.POSITIVE_INFINITY;for(i=0,n=t.length;i<n;++i){const n=t[i].element;if(n&&n.hasValue()){const t=Bt(e,n.getCenterPoint());t<a&&(a=t,o=n)}}if(o){const t=o.tooltipPosition();r=t.x,s=t.y}return{x:r,y:s}}};function Rr(t,e){return e&&(V(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function Lr(t){return("string"==typeof t||t instanceof String)&&t.indexOf("\n")>-1?t.split("\n"):t}function Or(t,e){const{element:i,datasetIndex:n,index:o}=e,r=t.getDatasetMeta(n).controller,{label:s,value:a}=r.getLabelAndValue(o);return{chart:t,label:s,parsed:r.getParsed(o),raw:t.data.datasets[n].data[o],formattedValue:a,dataset:r.getDataset(),dataIndex:o,datasetIndex:n,element:i}}function zr(t,e){const i=t.chart.ctx,{body:n,footer:o,title:r}=t,{boxWidth:s,boxHeight:a}=e,l=We(e.bodyFont),c=We(e.titleFont),h=We(e.footerFont),u=r.length,d=o.length,p=n.length,f=He(e.padding);let m=f.height,g=0,y=n.reduce(((t,e)=>t+e.before.length+e.lines.length+e.after.length),0);if(y+=t.beforeBody.length+t.afterBody.length,u&&(m+=u*c.lineHeight+(u-1)*e.titleSpacing+e.titleMarginBottom),y){m+=p*(e.displayColors?Math.max(a,l.lineHeight):l.lineHeight)+(y-p)*l.lineHeight+(y-1)*e.bodySpacing}d&&(m+=e.footerMarginTop+d*h.lineHeight+(d-1)*e.footerSpacing);let v=0;const b=function(t){g=Math.max(g,i.measureText(t).width+v)};return i.save(),i.font=c.string,J(t.title,b),i.font=l.string,J(t.beforeBody.concat(t.afterBody),b),v=e.displayColors?s+2+e.boxPadding:0,J(n,(t=>{J(t.before,b),J(t.lines,b),J(t.after,b)})),v=0,i.font=h.string,J(t.footer,b),i.restore(),g+=f.width,{width:g,height:m}}function Fr(t,e,i,n){const{x:o,width:r}=i,{width:s,chartArea:{left:a,right:l}}=t;let c="center";return"center"===n?c=o<=(a+l)/2?"left":"right":o<=r/2?c="left":o>=s-r/2&&(c="right"),function(t,e,i,n){const{x:o,width:r}=n,s=i.caretSize+i.caretPadding;return"left"===t&&o+r+s>e.width||"right"===t&&o-r-s<0||void 0}(c,t,e,i)&&(c="center"),c}function Br(t,e,i){const n=i.yAlign||e.yAlign||function(t,e){const{y:i,height:n}=e;return i<n/2?"top":i>t.height-n/2?"bottom":"center"}(t,i);return{xAlign:i.xAlign||e.xAlign||Fr(t,e,i,n),yAlign:n}}function Nr(t,e,i,n){const{caretSize:o,caretPadding:r,cornerRadius:s}=t,{xAlign:a,yAlign:l}=i,c=o+r,{topLeft:h,topRight:u,bottomLeft:d,bottomRight:p}=Ne(s);let f=function(t,e){let{x:i,width:n}=t;return"right"===e?i-=n:"center"===e&&(i-=n/2),i}(e,a);const m=function(t,e,i){let{y:n,height:o}=t;return"top"===e?n+=i:n-="bottom"===e?o+i:o/2,n}(e,l,c);return"center"===l?"left"===a?f+=c:"right"===a&&(f-=c):"left"===a?f-=Math.max(h,d)+o:"right"===a&&(f+=Math.max(u,p)+o),{x:jt(f,0,n.width-e.width),y:jt(m,0,n.height-e.height)}}function Hr(t,e,i){const n=He(i.padding);return"center"===e?t.x+t.width/2:"right"===e?t.x+t.width-n.right:t.x+n.left}function Wr(t){return Rr([],Lr(t))}function jr(t,e){const i=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return i?t.override(i):t}class Yr extends Mn{constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart||t._chart,this._chart=this.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const e=this.chart,i=this.options.setContext(this.getContext()),n=i.enabled&&e.options.animation&&i.animations,o=new mn(this.chart,n);return n._cacheable&&(this._cachedAnimations=Object.freeze(o)),o}getContext(){return this.$context||(this.$context=(t=this.chart.getContext(),e=this,i=this._tooltipItems,Ve(t,{tooltip:e,tooltipItems:i,type:"tooltip"})));var t,e,i}getTitle(t,e){const{callbacks:i}=e,n=i.beforeTitle.apply(this,[t]),o=i.title.apply(this,[t]),r=i.afterTitle.apply(this,[t]);let s=[];return s=Rr(s,Lr(n)),s=Rr(s,Lr(o)),s=Rr(s,Lr(r)),s}getBeforeBody(t,e){return Wr(e.callbacks.beforeBody.apply(this,[t]))}getBody(t,e){const{callbacks:i}=e,n=[];return J(t,(t=>{const e={before:[],lines:[],after:[]},o=jr(i,t);Rr(e.before,Lr(o.beforeLabel.call(this,t))),Rr(e.lines,o.label.call(this,t)),Rr(e.after,Lr(o.afterLabel.call(this,t))),n.push(e)})),n}getAfterBody(t,e){return Wr(e.callbacks.afterBody.apply(this,[t]))}getFooter(t,e){const{callbacks:i}=e,n=i.beforeFooter.apply(this,[t]),o=i.footer.apply(this,[t]),r=i.afterFooter.apply(this,[t]);let s=[];return s=Rr(s,Lr(n)),s=Rr(s,Lr(o)),s=Rr(s,Lr(r)),s}_createItems(t){const e=this._active,i=this.chart.data,n=[],o=[],r=[];let s,a,l=[];for(s=0,a=e.length;s<a;++s)l.push(Or(this.chart,e[s]));return t.filter&&(l=l.filter(((e,n,o)=>t.filter(e,n,o,i)))),t.itemSort&&(l=l.sort(((e,n)=>t.itemSort(e,n,i)))),J(l,(e=>{const i=jr(t.callbacks,e);n.push(i.labelColor.call(this,e)),o.push(i.labelPointStyle.call(this,e)),r.push(i.labelTextColor.call(this,e))})),this.labelColors=n,this.labelPointStyles=o,this.labelTextColors=r,this.dataPoints=l,l}update(t,e){const i=this.options.setContext(this.getContext()),n=this._active;let o,r=[];if(n.length){const t=Dr[i.position].call(this,n,this._eventPosition);r=this._createItems(i),this.title=this.getTitle(r,i),this.beforeBody=this.getBeforeBody(r,i),this.body=this.getBody(r,i),this.afterBody=this.getAfterBody(r,i),this.footer=this.getFooter(r,i);const e=this._size=zr(this,i),s=Object.assign({},t,e),a=Br(this.chart,i,s),l=Nr(i,s,a,this.chart);this.xAlign=a.xAlign,this.yAlign=a.yAlign,o={opacity:1,x:l.x,y:l.y,width:e.width,height:e.height,caretX:t.x,caretY:t.y}}else 0!==this.opacity&&(o={opacity:0});this._tooltipItems=r,this.$context=void 0,o&&this._resolveAnimations().update(this,o),t&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:e})}drawCaret(t,e,i,n){const o=this.getCaretPosition(t,i,n);e.lineTo(o.x1,o.y1),e.lineTo(o.x2,o.y2),e.lineTo(o.x3,o.y3)}getCaretPosition(t,e,i){const{xAlign:n,yAlign:o}=this,{caretSize:r,cornerRadius:s}=i,{topLeft:a,topRight:l,bottomLeft:c,bottomRight:h}=Ne(s),{x:u,y:d}=t,{width:p,height:f}=e;let m,g,y,v,b,x;return"center"===o?(b=d+f/2,"left"===n?(m=u,g=m-r,v=b+r,x=b-r):(m=u+p,g=m+r,v=b-r,x=b+r),y=m):(g="left"===n?u+Math.max(a,c)+r:"right"===n?u+p-Math.max(l,h)-r:this.caretX,"top"===o?(v=d,b=v-r,m=g-r,y=g+r):(v=d+f,b=v+r,m=g+r,y=g-r),x=v),{x1:m,x2:g,x3:y,y1:v,y2:b,y3:x}}drawTitle(t,e,i){const n=this.title,o=n.length;let r,s,a;if(o){const l=Ri(i.rtl,this.x,this.width);for(t.x=Hr(this,i.titleAlign,i),e.textAlign=l.textAlign(i.titleAlign),e.textBaseline="middle",r=We(i.titleFont),s=i.titleSpacing,e.fillStyle=i.titleColor,e.font=r.string,a=0;a<o;++a)e.fillText(n[a],l.x(t.x),t.y+r.lineHeight/2),t.y+=r.lineHeight+s,a+1===o&&(t.y+=i.titleMarginBottom-s)}}_drawColorBox(t,e,i,n,o){const r=this.labelColors[i],s=this.labelPointStyles[i],{boxHeight:a,boxWidth:l,boxPadding:c}=o,h=We(o.bodyFont),u=Hr(this,"left",o),d=n.x(u),p=a<h.lineHeight?(h.lineHeight-a)/2:0,f=e.y+p;if(o.usePointStyle){const e={radius:Math.min(l,a)/2,pointStyle:s.pointStyle,rotation:s.rotation,borderWidth:1},i=n.leftForLtr(d,l)+l/2,c=f+a/2;t.strokeStyle=o.multiKeyBackground,t.fillStyle=o.multiKeyBackground,Kt(t,e,i,c),t.strokeStyle=r.borderColor,t.fillStyle=r.backgroundColor,Kt(t,e,i,c)}else{t.lineWidth=r.borderWidth||1,t.strokeStyle=r.borderColor,t.setLineDash(r.borderDash||[]),t.lineDashOffset=r.borderDashOffset||0;const e=n.leftForLtr(d,l-c),i=n.leftForLtr(n.xPlus(d,1),l-c-2),s=Ne(r.borderRadius);Object.values(s).some((t=>0!==t))?(t.beginPath(),t.fillStyle=o.multiKeyBackground,re(t,{x:e,y:f,w:l,h:a,radius:s}),t.fill(),t.stroke(),t.fillStyle=r.backgroundColor,t.beginPath(),re(t,{x:i,y:f+1,w:l-2,h:a-2,radius:s}),t.fill()):(t.fillStyle=o.multiKeyBackground,t.fillRect(e,f,l,a),t.strokeRect(e,f,l,a),t.fillStyle=r.backgroundColor,t.fillRect(i,f+1,l-2,a-2))}t.fillStyle=this.labelTextColors[i]}drawBody(t,e,i){const{body:n}=this,{bodySpacing:o,bodyAlign:r,displayColors:s,boxHeight:a,boxWidth:l,boxPadding:c}=i,h=We(i.bodyFont);let u=h.lineHeight,d=0;const p=Ri(i.rtl,this.x,this.width),f=function(i){e.fillText(i,p.x(t.x+d),t.y+u/2),t.y+=u+o},m=p.textAlign(r);let g,y,v,b,x,$,w;for(e.textAlign=r,e.textBaseline="middle",e.font=h.string,t.x=Hr(this,m,i),e.fillStyle=i.bodyColor,J(this.beforeBody,f),d=s&&"right"!==m?"center"===r?l/2+c:l+2+c:0,b=0,$=n.length;b<$;++b){for(g=n[b],y=this.labelTextColors[b],e.fillStyle=y,J(g.before,f),v=g.lines,s&&v.length&&(this._drawColorBox(e,t,b,p,i),u=Math.max(h.lineHeight,a)),x=0,w=v.length;x<w;++x)f(v[x]),u=h.lineHeight;J(g.after,f)}d=0,u=h.lineHeight,J(this.afterBody,f),t.y-=o}drawFooter(t,e,i){const n=this.footer,o=n.length;let r,s;if(o){const a=Ri(i.rtl,this.x,this.width);for(t.x=Hr(this,i.footerAlign,i),t.y+=i.footerMarginTop,e.textAlign=a.textAlign(i.footerAlign),e.textBaseline="middle",r=We(i.footerFont),e.fillStyle=i.footerColor,e.font=r.string,s=0;s<o;++s)e.fillText(n[s],a.x(t.x),t.y+r.lineHeight/2),t.y+=r.lineHeight+i.footerSpacing}}drawBackground(t,e,i,n){const{xAlign:o,yAlign:r}=this,{x:s,y:a}=t,{width:l,height:c}=i,{topLeft:h,topRight:u,bottomLeft:d,bottomRight:p}=Ne(n.cornerRadius);e.fillStyle=n.backgroundColor,e.strokeStyle=n.borderColor,e.lineWidth=n.borderWidth,e.beginPath(),e.moveTo(s+h,a),"top"===r&&this.drawCaret(t,e,i,n),e.lineTo(s+l-u,a),e.quadraticCurveTo(s+l,a,s+l,a+u),"center"===r&&"right"===o&&this.drawCaret(t,e,i,n),e.lineTo(s+l,a+c-p),e.quadraticCurveTo(s+l,a+c,s+l-p,a+c),"bottom"===r&&this.drawCaret(t,e,i,n),e.lineTo(s+d,a+c),e.quadraticCurveTo(s,a+c,s,a+c-d),"center"===r&&"left"===o&&this.drawCaret(t,e,i,n),e.lineTo(s,a+h),e.quadraticCurveTo(s,a,s+h,a),e.closePath(),e.fill(),n.borderWidth>0&&e.stroke()}_updateAnimationTarget(t){const e=this.chart,i=this.$animations,n=i&&i.x,o=i&&i.y;if(n||o){const i=Dr[t.position].call(this,this._active,this._eventPosition);if(!i)return;const r=this._size=zr(this,t),s=Object.assign({},i,this._size),a=Br(e,t,s),l=Nr(t,s,a,e);n._to===l.x&&o._to===l.y||(this.xAlign=a.xAlign,this.yAlign=a.yAlign,this.width=r.width,this.height=r.height,this.caretX=i.x,this.caretY=i.y,this._resolveAnimations().update(this,l))}}draw(t){const e=this.options.setContext(this.getContext());let i=this.opacity;if(!i)return;this._updateAnimationTarget(e);const n={width:this.width,height:this.height},o={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;const r=He(e.padding),s=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;e.enabled&&s&&(t.save(),t.globalAlpha=i,this.drawBackground(o,t,n,e),Li(t,e.textDirection),o.y+=r.top,this.drawTitle(o,t,e),this.drawBody(o,t,e),this.drawFooter(o,t,e),Oi(t,e.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,e){const i=this._active,n=t.map((({datasetIndex:t,index:e})=>{const i=this.chart.getDatasetMeta(t);if(!i)throw new Error("Cannot find a dataset at index "+t);return{datasetIndex:t,element:i.data[e],index:e}})),o=!tt(i,n),r=this._positionChanged(n,e);(o||r)&&(this._active=n,this._eventPosition=e,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,e,i=!0){if(e&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const n=this.options,o=this._active||[],r=this._getActiveElements(t,o,e,i),s=this._positionChanged(r,t),a=e||!tt(r,o)||s;return a&&(this._active=r,(n.enabled||n.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,e))),a}_getActiveElements(t,e,i,n){const o=this.options;if("mouseout"===t.type)return[];if(!n)return e;const r=this.chart.getElementsAtEventForMode(t,o.mode,o,i);return o.reverse&&r.reverse(),r}_positionChanged(t,e){const{caretX:i,caretY:n,options:o}=this,r=Dr[o.position].call(this,t,e);return!1!==r&&(i!==r.x||n!==r.y)}}Yr.positioners=Dr;var Vr={id:"tooltip",_element:Yr,positioners:Dr,afterInit(t,e,i){i&&(t.tooltip=new Yr({chart:t,options:i}))},beforeUpdate(t,e,i){t.tooltip&&t.tooltip.initialize(i)},reset(t,e,i){t.tooltip&&t.tooltip.initialize(i)},afterDraw(t){const e=t.tooltip,i={tooltip:e};!1!==t.notifyPlugins("beforeTooltipDraw",i)&&(e&&e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",i))},afterEvent(t,e){if(t.tooltip){const i=e.replay;t.tooltip.handleEvent(e.event,i,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:{beforeTitle:W,title(t){if(t.length>0){const e=t[0],i=e.chart.data.labels,n=i?i.length:0;if(this&&this.options&&"dataset"===this.options.mode)return e.dataset.label||"";if(e.label)return e.label;if(n>0&&e.dataIndex<n)return i[e.dataIndex]}return""},afterTitle:W,beforeBody:W,beforeLabel:W,label(t){if(this&&this.options&&"dataset"===this.options.mode)return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const i=t.formattedValue;return Y(i)||(e+=i),e},labelColor(t){const e=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:e.borderColor,backgroundColor:e.backgroundColor,borderWidth:e.borderWidth,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const e=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:e.pointStyle,rotation:e.rotation}},afterLabel:W,afterBody:W,beforeFooter:W,footer:W,afterFooter:W}},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>"filter"!==t&&"itemSort"!==t&&"external"!==t,_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},Ur=Object.freeze({__proto__:null,Decimation:lr,Filler:Sr,Legend:Mr,SubTitle:Ar,Title:Er,Tooltip:Vr});function qr(t,e,i,n){const o=t.indexOf(e);if(-1===o)return((t,e,i,n)=>("string"==typeof e?(i=t.push(e)-1,n.unshift({index:i,label:e})):isNaN(e)&&(i=null),i))(t,e,i,n);return o!==t.lastIndexOf(e)?i:o}class Xr extends Bn{constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const e=this._addedLabels;if(e.length){const t=this.getLabels();for(const{index:i,label:n}of e)t[i]===n&&t.splice(i,1);this._addedLabels=[]}super.init(t)}parse(t,e){if(Y(t))return null;const i=this.getLabels();return((t,e)=>null===t?null:jt(Math.round(t),0,e))(e=isFinite(e)&&i[e]===t?e:qr(i,t,G(e,t),this._addedLabels),i.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let{min:i,max:n}=this.getMinMax(!0);"ticks"===this.options.bounds&&(t||(i=0),e||(n=this.getLabels().length-1)),this.min=i,this.max=n}buildTicks(){const t=this.min,e=this.max,i=this.options.offset,n=[];let o=this.getLabels();o=0===t&&e===o.length-1?o:o.slice(t,e+1),this._valueRange=Math.max(o.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let i=t;i<=e;i++)n.push({value:i});return n}getLabelForValue(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return"number"!=typeof t&&(t=this.parse(t)),null===t?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}function Gr(t,e,{horizontal:i,minRotation:n}){const o=Lt(n),r=(i?Math.sin(o):Math.cos(o))||.001,s=.75*e*(""+t).length;return Math.min(e/r,s)}Xr.id="category",Xr.defaults={ticks:{callback:Xr.prototype.getLabelForValue}};class Zr extends Bn{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,e){return Y(t)||("number"==typeof t||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:e,maxDefined:i}=this.getUserBounds();let{min:n,max:o}=this;const r=t=>n=e?n:t,s=t=>o=i?o:t;if(t){const t=Mt(n),e=Mt(o);t<0&&e<0?s(0):t>0&&e>0&&r(0)}if(n===o){let e=1;(o>=Number.MAX_SAFE_INTEGER||n<=Number.MIN_SAFE_INTEGER)&&(e=Math.abs(.05*o)),s(o+e),t||r(n-e)}this.min=n,this.max=o}getTickLimit(){const t=this.options.ticks;let e,{maxTicksLimit:i,stepSize:n}=t;return n?(e=Math.ceil(this.max/n)-Math.floor(this.min/n)+1,e>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${n} would result generating up to ${e} ticks. Limiting to 1000.`),e=1e3)):(e=this.computeTickLimit(),i=i||11),i&&(e=Math.min(i,e)),e}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,e=t.ticks;let i=this.getTickLimit();i=Math.max(2,i);const n=function(t,e){const i=[],{bounds:n,step:o,min:r,max:s,precision:a,count:l,maxTicks:c,maxDigits:h,includeBounds:u}=t,d=o||1,p=c-1,{min:f,max:m}=e,g=!Y(r),y=!Y(s),v=!Y(l),b=(m-f)/(h+1);let x,$,w,_,k=Pt((m-f)/p/d)*d;if(k<1e-14&&!g&&!y)return[{value:f},{value:m}];_=Math.ceil(m/k)-Math.floor(f/k),_>p&&(k=Pt(_*k/p/d)*d),Y(a)||(x=Math.pow(10,a),k=Math.ceil(k*x)/x),"ticks"===n?($=Math.floor(f/k)*k,w=Math.ceil(m/k)*k):($=f,w=m),g&&y&&o&&Dt((s-r)/o,k/1e3)?(_=Math.round(Math.min((s-r)/k,c)),k=(s-r)/_,$=r,w=s):v?($=g?r:$,w=y?s:w,_=l-1,k=(w-$)/_):(_=(w-$)/k,_=At(_,Math.round(_),k/1e3)?Math.round(_):Math.ceil(_));const S=Math.max(zt(k),zt($));x=Math.pow(10,Y(a)?S:a),$=Math.round($*x)/x,w=Math.round(w*x)/x;let C=0;for(g&&(u&&$!==r?(i.push({value:r}),$<r&&C++,At(Math.round(($+C*k)*x)/x,r,Gr(r,b,t))&&C++):$<r&&C++);C<_;++C)i.push({value:Math.round(($+C*k)*x)/x});return y&&u&&w!==s?i.length&&At(i[i.length-1].value,s,Gr(s,b,t))?i[i.length-1].value=s:i.push({value:s}):y&&w!==s||i.push({value:w}),i}({maxTicks:i,bounds:t.bounds,min:t.min,max:t.max,precision:e.precision,step:e.stepSize,count:e.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:e.minRotation||0,includeBounds:!1!==e.includeBounds},this._range||this);return"ticks"===t.bounds&&Rt(n,this,"value"),t.reverse?(n.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),n}configure(){const t=this.ticks;let e=this.min,i=this.max;if(super.configure(),this.options.offset&&t.length){const n=(i-e)/Math.max(t.length-1,1)/2;e-=n,i+=n}this._startValue=e,this._endValue=i,this._valueRange=i-e}getLabelForValue(t){return Di(t,this.chart.options.locale,this.options.ticks.format)}}class Kr extends Zr{determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=q(t)?t:0,this.max=q(e)?e:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),e=t?this.width:this.height,i=Lt(this.options.ticks.minRotation),n=(t?Math.sin(i):Math.cos(i))||.001,o=this._resolveTickFontOptions(0);return Math.ceil(e/Math.min(40,o.lineHeight/n))}getPixelForValue(t){return null===t?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}function Qr(t){return 1===t/Math.pow(10,Math.floor(Tt(t)))}Kr.id="linear",Kr.defaults={ticks:{callback:En.formatters.numeric}};class Jr extends Bn{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(t,e){const i=Zr.prototype.parse.apply(this,[t,e]);if(0!==i)return q(i)&&i>0?i:null;this._zero=!0}determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=q(t)?Math.max(0,t):null,this.max=q(e)?Math.max(0,e):null,this.options.beginAtZero&&(this._zero=!0),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let i=this.min,n=this.max;const o=e=>i=t?i:e,r=t=>n=e?n:t,s=(t,e)=>Math.pow(10,Math.floor(Tt(t))+e);i===n&&(i<=0?(o(1),r(10)):(o(s(i,-1)),r(s(n,1)))),i<=0&&o(s(n,-1)),n<=0&&r(s(i,1)),this._zero&&this.min!==this._suggestedMin&&i===s(this.min,0)&&o(s(i,-1)),this.min=i,this.max=n}buildTicks(){const t=this.options,e=function(t,e){const i=Math.floor(Tt(e.max)),n=Math.ceil(e.max/Math.pow(10,i)),o=[];let r=X(t.min,Math.pow(10,Math.floor(Tt(e.min)))),s=Math.floor(Tt(r)),a=Math.floor(r/Math.pow(10,s)),l=s<0?Math.pow(10,Math.abs(s)):1;do{o.push({value:r,major:Qr(r)}),++a,10===a&&(a=1,++s,l=s>=0?1:l),r=Math.round(a*Math.pow(10,s)*l)/l}while(s<i||s===i&&a<n);const c=X(t.max,r);return o.push({value:c,major:Qr(r)}),o}({min:this._userMin,max:this._userMax},this);return"ticks"===t.bounds&&Rt(e,this,"value"),t.reverse?(e.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),e}getLabelForValue(t){return void 0===t?"0":Di(t,this.chart.options.locale,this.options.ticks.format)}configure(){const t=this.min;super.configure(),this._startValue=Tt(t),this._valueRange=Tt(this.max)-Tt(t)}getPixelForValue(t){return void 0!==t&&0!==t||(t=this.min),null===t||isNaN(t)?NaN:this.getPixelForDecimal(t===this.min?0:(Tt(t)-this._startValue)/this._valueRange)}getValueForPixel(t){const e=this.getDecimalForPixel(t);return Math.pow(10,this._startValue+e*this._valueRange)}}function ts(t){const e=t.ticks;if(e.display&&t.display){const t=He(e.backdropPadding);return G(e.font&&e.font.size,vt.font.size)+t.height}return 0}function es(t,e,i,n,o){return t===n||t===o?{start:e-i/2,end:e+i/2}:t<n||t>o?{start:e-i,end:e}:{start:e,end:e+i}}function is(t){const e={l:t.left+t._padding.left,r:t.right-t._padding.right,t:t.top+t._padding.top,b:t.bottom-t._padding.bottom},i=Object.assign({},e),n=[],o=[],r=t._pointLabels.length,s=t.options.pointLabels,a=s.centerPointLabels?bt/r:0;for(let u=0;u<r;u++){const r=s.setContext(t.getPointLabelContext(u));o[u]=r.padding;const d=t.getPointPosition(u,t.drawingArea+o[u],a),p=We(r.font),f=(l=t.ctx,c=p,h=V(h=t._pointLabels[u])?h:[h],{w:Xt(l,c.string,h),h:h.length*c.lineHeight});n[u]=f;const m=Ht(t.getIndexAngle(u)+a),g=Math.round(Ot(m));ns(i,e,m,es(g,d.x,f.w,0,180),es(g,d.y,f.h,90,270))}var l,c,h;t.setCenterPoint(e.l-i.l,i.r-e.r,e.t-i.t,i.b-e.b),t._pointLabelItems=function(t,e,i){const n=[],o=t._pointLabels.length,r=t.options,s=ts(r)/2,a=t.drawingArea,l=r.pointLabels.centerPointLabels?bt/o:0;for(let r=0;r<o;r++){const o=t.getPointPosition(r,a+s+i[r],l),c=Math.round(Ot(Ht(o.angle+kt))),h=e[r],u=ss(o.y,h.h,c),d=os(c),p=rs(o.x,h.w,d);n.push({x:o.x,y:u,textAlign:d,left:p,top:u,right:p+h.w,bottom:u+h.h})}return n}(t,n,o)}function ns(t,e,i,n,o){const r=Math.abs(Math.sin(i)),s=Math.abs(Math.cos(i));let a=0,l=0;n.start<e.l?(a=(e.l-n.start)/r,t.l=Math.min(t.l,e.l-a)):n.end>e.r&&(a=(n.end-e.r)/r,t.r=Math.max(t.r,e.r+a)),o.start<e.t?(l=(e.t-o.start)/s,t.t=Math.min(t.t,e.t-l)):o.end>e.b&&(l=(o.end-e.b)/s,t.b=Math.max(t.b,e.b+l))}function os(t){return 0===t||180===t?"center":t<180?"left":"right"}function rs(t,e,i){return"right"===i?t-=e:"center"===i&&(t-=e/2),t}function ss(t,e,i){return 90===i||270===i?t-=e/2:(i>270||i<90)&&(t-=e),t}function as(t,e,i,n){const{ctx:o}=t;if(i)o.arc(t.xCenter,t.yCenter,e,0,xt);else{let i=t.getPointPosition(0,e);o.moveTo(i.x,i.y);for(let r=1;r<n;r++)i=t.getPointPosition(r,e),o.lineTo(i.x,i.y)}}Jr.id="logarithmic",Jr.defaults={ticks:{callback:En.formatters.logarithmic,major:{enabled:!0}}};class ls extends Zr{constructor(t){super(t),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const t=this._padding=He(ts(this.options)/2),e=this.width=this.maxWidth-t.width,i=this.height=this.maxHeight-t.height;this.xCenter=Math.floor(this.left+e/2+t.left),this.yCenter=Math.floor(this.top+i/2+t.top),this.drawingArea=Math.floor(Math.min(e,i)/2)}determineDataLimits(){const{min:t,max:e}=this.getMinMax(!1);this.min=q(t)&&!isNaN(t)?t:0,this.max=q(e)&&!isNaN(e)?e:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/ts(this.options))}generateTickLabels(t){Zr.prototype.generateTickLabels.call(this,t),this._pointLabels=this.getLabels().map(((t,e)=>{const i=Q(this.options.pointLabels.callback,[t,e],this);return i||0===i?i:""})).filter(((t,e)=>this.chart.getDataVisibility(e)))}fit(){const t=this.options;t.display&&t.pointLabels.display?is(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(t,e,i,n){this.xCenter+=Math.floor((t-e)/2),this.yCenter+=Math.floor((i-n)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(t,e,i,n))}getIndexAngle(t){return Ht(t*(xt/(this._pointLabels.length||1))+Lt(this.options.startAngle||0))}getDistanceFromCenterForValue(t){if(Y(t))return NaN;const e=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-t)*e:(t-this.min)*e}getValueForDistanceFromCenter(t){if(Y(t))return NaN;const e=t/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-e:this.min+e}getPointLabelContext(t){const e=this._pointLabels||[];if(t>=0&&t<e.length){const i=e[t];return function(t,e,i){return Ve(t,{label:i,index:e,type:"pointLabel"})}(this.getContext(),t,i)}}getPointPosition(t,e,i=0){const n=this.getIndexAngle(t)-kt+i;return{x:Math.cos(n)*e+this.xCenter,y:Math.sin(n)*e+this.yCenter,angle:n}}getPointPositionForValue(t,e){return this.getPointPosition(t,this.getDistanceFromCenterForValue(e))}getBasePosition(t){return this.getPointPositionForValue(t||0,this.getBaseValue())}getPointLabelPosition(t){const{left:e,top:i,right:n,bottom:o}=this._pointLabelItems[t];return{left:e,top:i,right:n,bottom:o}}drawBackground(){const{backgroundColor:t,grid:{circular:e}}=this.options;if(t){const i=this.ctx;i.save(),i.beginPath(),as(this,this.getDistanceFromCenterForValue(this._endValue),e,this._pointLabels.length),i.closePath(),i.fillStyle=t,i.fill(),i.restore()}}drawGrid(){const t=this.ctx,e=this.options,{angleLines:i,grid:n}=e,o=this._pointLabels.length;let r,s,a;if(e.pointLabels.display&&function(t,e){const{ctx:i,options:{pointLabels:n}}=t;for(let o=e-1;o>=0;o--){const e=n.setContext(t.getPointLabelContext(o)),r=We(e.font),{x:s,y:a,textAlign:l,left:c,top:h,right:u,bottom:d}=t._pointLabelItems[o],{backdropColor:p}=e;if(!Y(p)){const t=He(e.backdropPadding);i.fillStyle=p,i.fillRect(c-t.left,h-t.top,u-c+t.width,d-h+t.height)}ne(i,t._pointLabels[o],s,a+r.lineHeight/2,r,{color:e.color,textAlign:l,textBaseline:"middle"})}}(this,o),n.display&&this.ticks.forEach(((t,e)=>{if(0!==e){s=this.getDistanceFromCenterForValue(t.value);!function(t,e,i,n){const o=t.ctx,r=e.circular,{color:s,lineWidth:a}=e;!r&&!n||!s||!a||i<0||(o.save(),o.strokeStyle=s,o.lineWidth=a,o.setLineDash(e.borderDash),o.lineDashOffset=e.borderDashOffset,o.beginPath(),as(t,i,r,n),o.closePath(),o.stroke(),o.restore())}(this,n.setContext(this.getContext(e-1)),s,o)}})),i.display){for(t.save(),r=o-1;r>=0;r--){const n=i.setContext(this.getPointLabelContext(r)),{color:o,lineWidth:l}=n;l&&o&&(t.lineWidth=l,t.strokeStyle=o,t.setLineDash(n.borderDash),t.lineDashOffset=n.borderDashOffset,s=this.getDistanceFromCenterForValue(e.ticks.reverse?this.min:this.max),a=this.getPointPosition(r,s),t.beginPath(),t.moveTo(this.xCenter,this.yCenter),t.lineTo(a.x,a.y),t.stroke())}t.restore()}}drawBorder(){}drawLabels(){const t=this.ctx,e=this.options,i=e.ticks;if(!i.display)return;const n=this.getIndexAngle(0);let o,r;t.save(),t.translate(this.xCenter,this.yCenter),t.rotate(n),t.textAlign="center",t.textBaseline="middle",this.ticks.forEach(((n,s)=>{if(0===s&&!e.reverse)return;const a=i.setContext(this.getContext(s)),l=We(a.font);if(o=this.getDistanceFromCenterForValue(this.ticks[s].value),a.showLabelBackdrop){t.font=l.string,r=t.measureText(n.label).width,t.fillStyle=a.backdropColor;const e=He(a.backdropPadding);t.fillRect(-r/2-e.left,-o-l.size/2-e.top,r+e.width,l.size+e.height)}ne(t,n.label,0,-o,l,{color:a.color})})),t.restore()}drawTitle(){}}ls.id="radialLinear",ls.defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:En.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback:t=>t,padding:5,centerPointLabels:!1}},ls.defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"},ls.descriptors={angleLines:{_fallback:"grid"}};const cs={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},hs=Object.keys(cs);function us(t,e){return t-e}function ds(t,e){if(Y(e))return null;const i=t._adapter,{parser:n,round:o,isoWeekday:r}=t._parseOpts;let s=e;return"function"==typeof n&&(s=n(s)),q(s)||(s="string"==typeof n?i.parse(s,n):i.parse(s)),null===s?null:(o&&(s="week"!==o||!It(r)&&!0!==r?i.startOf(s,o):i.startOf(s,"isoWeek",r)),+s)}function ps(t,e,i,n){const o=hs.length;for(let r=hs.indexOf(t);r<o-1;++r){const t=cs[hs[r]],o=t.steps?t.steps:Number.MAX_SAFE_INTEGER;if(t.common&&Math.ceil((i-e)/(o*t.size))<=n)return hs[r]}return hs[o-1]}function fs(t,e,i){if(i){if(i.length){const{lo:n,hi:o}=se(i,e);t[i[n]>=e?i[n]:i[o]]=!0}}else t[e]=!0}function ms(t,e,i){const n=[],o={},r=e.length;let s,a;for(s=0;s<r;++s)a=e[s],o[a]=s,n.push({value:a,major:!1});return 0!==r&&i?function(t,e,i,n){const o=t._adapter,r=+o.startOf(e[0].value,n),s=e[e.length-1].value;let a,l;for(a=r;a<=s;a=+o.add(a,1,n))l=i[a],l>=0&&(e[l].major=!0);return e}(t,n,o,i):n}class gs extends Bn{constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,e){const i=t.time||(t.time={}),n=this._adapter=new yo._date(t.adapters.date);rt(i.displayFormats,n.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(t),this._normalized=e.normalized}parse(t,e){return void 0===t?null:ds(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,e=this._adapter,i=t.time.unit||"day";let{min:n,max:o,minDefined:r,maxDefined:s}=this.getUserBounds();function a(t){r||isNaN(t.min)||(n=Math.min(n,t.min)),s||isNaN(t.max)||(o=Math.max(o,t.max))}r&&s||(a(this._getLabelBounds()),"ticks"===t.bounds&&"labels"===t.ticks.source||a(this.getMinMax(!1))),n=q(n)&&!isNaN(n)?n:+e.startOf(Date.now(),i),o=q(o)&&!isNaN(o)?o:+e.endOf(Date.now(),i)+1,this.min=Math.min(n,o-1),this.max=Math.max(n+1,o)}_getLabelBounds(){const t=this.getLabelTimestamps();let e=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return t.length&&(e=t[0],i=t[t.length-1]),{min:e,max:i}}buildTicks(){const t=this.options,e=t.time,i=t.ticks,n="labels"===i.source?this.getLabelTimestamps():this._generate();"ticks"===t.bounds&&n.length&&(this.min=this._userMin||n[0],this.max=this._userMax||n[n.length-1]);const o=this.min,r=ce(n,o,this.max);return this._unit=e.unit||(i.autoSkip?ps(e.minUnit,this.min,this.max,this._getLabelCapacity(o)):function(t,e,i,n,o){for(let r=hs.length-1;r>=hs.indexOf(i);r--){const i=hs[r];if(cs[i].common&&t._adapter.diff(o,n,i)>=e-1)return i}return hs[i?hs.indexOf(i):0]}(this,r.length,e.minUnit,this.min,this.max)),this._majorUnit=i.major.enabled&&"year"!==this._unit?function(t){for(let e=hs.indexOf(t)+1,i=hs.length;e<i;++e)if(cs[hs[e]].common)return hs[e]}(this._unit):void 0,this.initOffsets(n),t.reverse&&r.reverse(),ms(this,r,this._majorUnit)}initOffsets(t){let e,i,n=0,o=0;this.options.offset&&t.length&&(e=this.getDecimalForValue(t[0]),n=1===t.length?1-e:(this.getDecimalForValue(t[1])-e)/2,i=this.getDecimalForValue(t[t.length-1]),o=1===t.length?i:(i-this.getDecimalForValue(t[t.length-2]))/2);const r=t.length<3?.5:.25;n=jt(n,0,r),o=jt(o,0,r),this._offsets={start:n,end:o,factor:1/(n+1+o)}}_generate(){const t=this._adapter,e=this.min,i=this.max,n=this.options,o=n.time,r=o.unit||ps(o.minUnit,e,i,this._getLabelCapacity(e)),s=G(o.stepSize,1),a="week"===r&&o.isoWeekday,l=It(a)||!0===a,c={};let h,u,d=e;if(l&&(d=+t.startOf(d,"isoWeek",a)),d=+t.startOf(d,l?"day":r),t.diff(i,e,r)>1e5*s)throw new Error(e+" and "+i+" are too far apart with stepSize of "+s+" "+r);const p="data"===n.ticks.source&&this.getDataTimestamps();for(h=d,u=0;h<i;h=+t.add(h,s,r),u++)fs(c,h,p);return h!==i&&"ticks"!==n.bounds&&1!==u||fs(c,h,p),Object.keys(c).sort(((t,e)=>t-e)).map((t=>+t))}getLabelForValue(t){const e=this._adapter,i=this.options.time;return i.tooltipFormat?e.format(t,i.tooltipFormat):e.format(t,i.displayFormats.datetime)}_tickFormatFunction(t,e,i,n){const o=this.options,r=o.time.displayFormats,s=this._unit,a=this._majorUnit,l=s&&r[s],c=a&&r[a],h=i[e],u=a&&c&&h&&h.major,d=this._adapter.format(t,n||(u?c:l)),p=o.ticks.callback;return p?Q(p,[d,e,i],this):d}generateTickLabels(t){let e,i,n;for(e=0,i=t.length;e<i;++e)n=t[e],n.label=this._tickFormatFunction(n.value,e,t)}getDecimalForValue(t){return null===t?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const e=this._offsets,i=this.getDecimalForValue(t);return this.getPixelForDecimal((e.start+i)*e.factor)}getValueForPixel(t){const e=this._offsets,i=this.getDecimalForPixel(t)/e.factor-e.end;return this.min+i*(this.max-this.min)}_getLabelSize(t){const e=this.options.ticks,i=this.ctx.measureText(t).width,n=Lt(this.isHorizontal()?e.maxRotation:e.minRotation),o=Math.cos(n),r=Math.sin(n),s=this._resolveTickFontOptions(0).size;return{w:i*o+s*r,h:i*r+s*o}}_getLabelCapacity(t){const e=this.options.time,i=e.displayFormats,n=i[e.unit]||i.millisecond,o=this._tickFormatFunction(t,0,ms(this,[t],this._majorUnit),n),r=this._getLabelSize(o),s=Math.floor(this.isHorizontal()?this.width/r.w:this.height/r.h)-1;return s>0?s:1}getDataTimestamps(){let t,e,i=this._cache.data||[];if(i.length)return i;const n=this.getMatchingVisibleMetas();if(this._normalized&&n.length)return this._cache.data=n[0].controller.getAllParsedValues(this);for(t=0,e=n.length;t<e;++t)i=i.concat(n[t].controller.getAllParsedValues(this));return this._cache.data=this.normalize(i)}getLabelTimestamps(){const t=this._cache.labels||[];let e,i;if(t.length)return t;const n=this.getLabels();for(e=0,i=n.length;e<i;++e)t.push(ds(this,n[e]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return pe(t.sort(us))}}function ys(t,e,i){let n,o,r,s,a=0,l=t.length-1;i?(e>=t[a].pos&&e<=t[l].pos&&({lo:a,hi:l}=ae(t,"pos",e)),({pos:n,time:r}=t[a]),({pos:o,time:s}=t[l])):(e>=t[a].time&&e<=t[l].time&&({lo:a,hi:l}=ae(t,"time",e)),({time:n,pos:r}=t[a]),({time:o,pos:s}=t[l]));const c=o-n;return c?r+(s-r)*(e-n)/c:r}gs.id="time",gs.defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",major:{enabled:!1}}};class vs extends gs{constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),e=this._table=this.buildLookupTable(t);this._minPos=ys(e,this.min),this._tableRange=ys(e,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:e,max:i}=this,n=[],o=[];let r,s,a,l,c;for(r=0,s=t.length;r<s;++r)l=t[r],l>=e&&l<=i&&n.push(l);if(n.length<2)return[{time:e,pos:0},{time:i,pos:1}];for(r=0,s=n.length;r<s;++r)c=n[r+1],a=n[r-1],l=n[r],Math.round((c+a)/2)!==l&&o.push({time:l,pos:r/(s-1)});return o}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const e=this.getDataTimestamps(),i=this.getLabelTimestamps();return t=e.length&&i.length?this.normalize(e.concat(i)):e.length?e:i,t=this._cache.all=t,t}getDecimalForValue(t){return(ys(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const e=this._offsets,i=this.getDecimalForPixel(t)/e.factor-e.end;return ys(this._table,i*this._tableRange+this._minPos,!0)}}vs.id="timeseries",vs.defaults=gs.defaults;var bs=Object.freeze({__proto__:null,CategoryScale:Xr,LinearScale:Kr,LogarithmicScale:Jr,RadialLinearScale:ls,TimeScale:gs,TimeSeriesScale:vs});return uo.register(Ro,bs,rr,Ur),uo.helpers={...Vi},uo._adapters=yo,uo.Animation=pn,uo.Animations=mn,uo.animator=s,uo.controllers=Hn.controllers.items,uo.DatasetController=Tn,uo.Element=Mn,uo.elements=rr,uo.Interaction=Re,uo.layouts=oi,uo.platforms=hn,uo.Scale=Bn,uo.Ticks=En,Object.assign(uo,Ro,bs,rr,Ur,hn),uo.Chart=uo,"undefined"!=typeof window&&(window.Chart=uo),uo})),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.moment=e()}(this,(function(){"use strict";var t,e;function i(){return t.apply(null,arguments)}function n(t){return t instanceof Array||"[object Array]"===Object.prototype.toString.call(t)}function o(t){return null!=t&&"[object Object]"===Object.prototype.toString.call(t)}function r(t){return void 0===t}function s(t){return"number"==typeof t||"[object Number]"===Object.prototype.toString.call(t)}function a(t){return t instanceof Date||"[object Date]"===Object.prototype.toString.call(t)}function l(t,e){var i,n=[];for(i=0;i<t.length;++i)n.push(e(t[i],i));return n}function c(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function h(t,e){for(var i in e)c(e,i)&&(t[i]=e[i]);return c(e,"toString")&&(t.toString=e.toString),c(e,"valueOf")&&(t.valueOf=e.valueOf),t}function u(t,e,i,n){return ye(t,e,i,n,!0).utc()}function d(t){return null==t._pf&&(t._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],meridiem:null,rfc2822:!1,weekdayMismatch:!1}),t._pf}function p(t){if(null==t._isValid){var i=d(t),n=e.call(i.parsedDateParts,(function(t){return null!=t})),o=!isNaN(t._d.getTime())&&i.overflow<0&&!i.empty&&!i.invalidMonth&&!i.invalidWeekday&&!i.weekdayMismatch&&!i.nullInput&&!i.invalidFormat&&!i.userInvalidated&&(!i.meridiem||i.meridiem&&n);if(t._strict&&(o=o&&0===i.charsLeftOver&&0===i.unusedTokens.length&&void 0===i.bigHour),null!=Object.isFrozen&&Object.isFrozen(t))return o;t._isValid=o}return t._isValid}function f(t){var e=u(NaN);return null!=t?h(d(e),t):d(e).userInvalidated=!0,e}e=Array.prototype.some?Array.prototype.some:function(t){for(var e=Object(this),i=e.length>>>0,n=0;n<i;n++)if(n in e&&t.call(this,e[n],n,e))return!0;return!1};var m=i.momentProperties=[];function g(t,e){var i,n,o;if(r(e._isAMomentObject)||(t._isAMomentObject=e._isAMomentObject),r(e._i)||(t._i=e._i),r(e._f)||(t._f=e._f),r(e._l)||(t._l=e._l),r(e._strict)||(t._strict=e._strict),r(e._tzm)||(t._tzm=e._tzm),r(e._isUTC)||(t._isUTC=e._isUTC),r(e._offset)||(t._offset=e._offset),r(e._pf)||(t._pf=d(e)),r(e._locale)||(t._locale=e._locale),0<m.length)for(i=0;i<m.length;i++)r(o=e[n=m[i]])||(t[n]=o);return t}var y=!1;function v(t){g(this,t),this._d=new Date(null!=t._d?t._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),!1===y&&(y=!0,i.updateOffset(this),y=!1)}function b(t){return t instanceof v||null!=t&&null!=t._isAMomentObject}function x(t){return t<0?Math.ceil(t)||0:Math.floor(t)}function $(t){var e=+t,i=0;return 0!==e&&isFinite(e)&&(i=x(e)),i}function w(t,e,i){var n,o=Math.min(t.length,e.length),r=Math.abs(t.length-e.length),s=0;for(n=0;n<o;n++)(i&&t[n]!==e[n]||!i&&$(t[n])!==$(e[n]))&&s++;return s+r}function _(t){!1===i.suppressDeprecationWarnings&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+t)}function k(t,e){var n=!0;return h((function(){if(null!=i.deprecationHandler&&i.deprecationHandler(null,t),n){for(var o,r=[],s=0;s<arguments.length;s++){if(o="","object"==typeof arguments[s]){for(var a in o+="\n["+s+"] ",arguments[0])o+=a+": "+arguments[0][a]+", ";o=o.slice(0,-2)}else o=arguments[s];r.push(o)}_(t+"\nArguments: "+Array.prototype.slice.call(r).join("")+"\n"+(new Error).stack),n=!1}return e.apply(this,arguments)}),e)}var S,C={};function T(t,e){null!=i.deprecationHandler&&i.deprecationHandler(t,e),C[t]||(_(e),C[t]=!0)}function M(t){return t instanceof Function||"[object Function]"===Object.prototype.toString.call(t)}function P(t,e){var i,n=h({},t);for(i in e)c(e,i)&&(o(t[i])&&o(e[i])?(n[i]={},h(n[i],t[i]),h(n[i],e[i])):null!=e[i]?n[i]=e[i]:delete n[i]);for(i in t)c(t,i)&&!c(e,i)&&o(t[i])&&(n[i]=h({},n[i]));return n}function E(t){null!=t&&this.set(t)}i.suppressDeprecationWarnings=!1,i.deprecationHandler=null,S=Object.keys?Object.keys:function(t){var e,i=[];for(e in t)c(t,e)&&i.push(e);return i};var I={};function A(t,e){var i=t.toLowerCase();I[i]=I[i+"s"]=I[e]=t}function D(t){return"string"==typeof t?I[t]||I[t.toLowerCase()]:void 0}function R(t){var e,i,n={};for(i in t)c(t,i)&&(e=D(i))&&(n[e]=t[i]);return n}var L={};function O(t,e){L[t]=e}function z(t,e,i){var n=""+Math.abs(t),o=e-n.length;return(0<=t?i?"+":"":"-")+Math.pow(10,Math.max(0,o)).toString().substr(1)+n}var F=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,B=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,N={},H={};function W(t,e,i,n){var o=n;"string"==typeof n&&(o=function(){return this[n]()}),t&&(H[t]=o),e&&(H[e[0]]=function(){return z(o.apply(this,arguments),e[1],e[2])}),i&&(H[i]=function(){return this.localeData().ordinal(o.apply(this,arguments),t)})}function j(t,e){return t.isValid()?(e=Y(e,t.localeData()),N[e]=N[e]||function(t){var e,i,n,o=t.match(F);for(e=0,i=o.length;e<i;e++)H[o[e]]?o[e]=H[o[e]]:o[e]=(n=o[e]).match(/\[[\s\S]/)?n.replace(/^\[|\]$/g,""):n.replace(/\\/g,"");return function(e){var n,r="";for(n=0;n<i;n++)r+=M(o[n])?o[n].call(e,t):o[n];return r}}(e),N[e](t)):t.localeData().invalidDate()}function Y(t,e){var i=5;function n(t){return e.longDateFormat(t)||t}for(B.lastIndex=0;0<=i&&B.test(t);)t=t.replace(B,n),B.lastIndex=0,i-=1;return t}var V=/\d/,U=/\d\d/,q=/\d{3}/,X=/\d{4}/,G=/[+-]?\d{6}/,Z=/\d\d?/,K=/\d\d\d\d?/,Q=/\d\d\d\d\d\d?/,J=/\d{1,3}/,tt=/\d{1,4}/,et=/[+-]?\d{1,6}/,it=/\d+/,nt=/[+-]?\d+/,ot=/Z|[+-]\d\d:?\d\d/gi,rt=/Z|[+-]\d\d(?::?\d\d)?/gi,st=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,at={};function lt(t,e,i){at[t]=M(e)?e:function(t,n){return t&&i?i:e}}function ct(t,e){return c(at,t)?at[t](e._strict,e._locale):new RegExp(ht(t.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,(function(t,e,i,n,o){return e||i||n||o}))))}function ht(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}var ut={};function dt(t,e){var i,n=e;for("string"==typeof t&&(t=[t]),s(e)&&(n=function(t,i){i[e]=$(t)}),i=0;i<t.length;i++)ut[t[i]]=n}function pt(t,e){dt(t,(function(t,i,n,o){n._w=n._w||{},e(t,n._w,n,o)}))}function ft(t){return mt(t)?366:365}function mt(t){return t%4==0&&t%100!=0||t%400==0}W("Y",0,0,(function(){var t=this.year();return t<=9999?""+t:"+"+t})),W(0,["YY",2],0,(function(){return this.year()%100})),W(0,["YYYY",4],0,"year"),W(0,["YYYYY",5],0,"year"),W(0,["YYYYYY",6,!0],0,"year"),A("year","y"),O("year",1),lt("Y",nt),lt("YY",Z,U),lt("YYYY",tt,X),lt("YYYYY",et,G),lt("YYYYYY",et,G),dt(["YYYYY","YYYYYY"],0),dt("YYYY",(function(t,e){e[0]=2===t.length?i.parseTwoDigitYear(t):$(t)})),dt("YY",(function(t,e){e[0]=i.parseTwoDigitYear(t)})),dt("Y",(function(t,e){e[0]=parseInt(t,10)})),i.parseTwoDigitYear=function(t){return $(t)+(68<$(t)?1900:2e3)};var gt,yt=vt("FullYear",!0);function vt(t,e){return function(n){return null!=n?(xt(this,t,n),i.updateOffset(this,e),this):bt(this,t)}}function bt(t,e){return t.isValid()?t._d["get"+(t._isUTC?"UTC":"")+e]():NaN}function xt(t,e,i){t.isValid()&&!isNaN(i)&&("FullYear"===e&&mt(t.year())&&1===t.month()&&29===t.date()?t._d["set"+(t._isUTC?"UTC":"")+e](i,t.month(),$t(i,t.month())):t._d["set"+(t._isUTC?"UTC":"")+e](i))}function $t(t,e){if(isNaN(t)||isNaN(e))return NaN;var i=(e%12+12)%12;return t+=(e-i)/12,1===i?mt(t)?29:28:31-i%7%2}gt=Array.prototype.indexOf?Array.prototype.indexOf:function(t){var e;for(e=0;e<this.length;++e)if(this[e]===t)return e;return-1},W("M",["MM",2],"Mo",(function(){return this.month()+1})),W("MMM",0,0,(function(t){return this.localeData().monthsShort(this,t)})),W("MMMM",0,0,(function(t){return this.localeData().months(this,t)})),A("month","M"),O("month",8),lt("M",Z),lt("MM",Z,U),lt("MMM",(function(t,e){return e.monthsShortRegex(t)})),lt("MMMM",(function(t,e){return e.monthsRegex(t)})),dt(["M","MM"],(function(t,e){e[1]=$(t)-1})),dt(["MMM","MMMM"],(function(t,e,i,n){var o=i._locale.monthsParse(t,n,i._strict);null!=o?e[1]=o:d(i).invalidMonth=t}));var wt=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,_t="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),kt="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_");function St(t,e){var i;if(!t.isValid())return t;if("string"==typeof e)if(/^\d+$/.test(e))e=$(e);else if(!s(e=t.localeData().monthsParse(e)))return t;return i=Math.min(t.date(),$t(t.year(),e)),t._d["set"+(t._isUTC?"UTC":"")+"Month"](e,i),t}function Ct(t){return null!=t?(St(this,t),i.updateOffset(this,!0),this):bt(this,"Month")}var Tt=st,Mt=st;function Pt(){function t(t,e){return e.length-t.length}var e,i,n=[],o=[],r=[];for(e=0;e<12;e++)i=u([2e3,e]),n.push(this.monthsShort(i,"")),o.push(this.months(i,"")),r.push(this.months(i,"")),r.push(this.monthsShort(i,""));for(n.sort(t),o.sort(t),r.sort(t),e=0;e<12;e++)n[e]=ht(n[e]),o[e]=ht(o[e]);for(e=0;e<24;e++)r[e]=ht(r[e]);this._monthsRegex=new RegExp("^("+r.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+o.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+n.join("|")+")","i")}function Et(t){var e;if(t<100&&0<=t){var i=Array.prototype.slice.call(arguments);i[0]=t+400,e=new Date(Date.UTC.apply(null,i)),isFinite(e.getUTCFullYear())&&e.setUTCFullYear(t)}else e=new Date(Date.UTC.apply(null,arguments));return e}function It(t,e,i){var n=7+e-i;return-(7+Et(t,0,n).getUTCDay()-e)%7+n-1}function At(t,e,i,n,o){var r,s,a=1+7*(e-1)+(7+i-n)%7+It(t,n,o);return s=a<=0?ft(r=t-1)+a:a>ft(t)?(r=t+1,a-ft(t)):(r=t,a),{year:r,dayOfYear:s}}function Dt(t,e,i){var n,o,r=It(t.year(),e,i),s=Math.floor((t.dayOfYear()-r-1)/7)+1;return s<1?n=s+Rt(o=t.year()-1,e,i):s>Rt(t.year(),e,i)?(n=s-Rt(t.year(),e,i),o=t.year()+1):(o=t.year(),n=s),{week:n,year:o}}function Rt(t,e,i){var n=It(t,e,i),o=It(t+1,e,i);return(ft(t)-n+o)/7}function Lt(t,e){return t.slice(e,7).concat(t.slice(0,e))}W("w",["ww",2],"wo","week"),W("W",["WW",2],"Wo","isoWeek"),A("week","w"),A("isoWeek","W"),O("week",5),O("isoWeek",5),lt("w",Z),lt("ww",Z,U),lt("W",Z),lt("WW",Z,U),pt(["w","ww","W","WW"],(function(t,e,i,n){e[n.substr(0,1)]=$(t)})),W("d",0,"do","day"),W("dd",0,0,(function(t){return this.localeData().weekdaysMin(this,t)})),W("ddd",0,0,(function(t){return this.localeData().weekdaysShort(this,t)})),W("dddd",0,0,(function(t){return this.localeData().weekdays(this,t)})),W("e",0,0,"weekday"),W("E",0,0,"isoWeekday"),A("day","d"),A("weekday","e"),A("isoWeekday","E"),O("day",11),O("weekday",11),O("isoWeekday",11),lt("d",Z),lt("e",Z),lt("E",Z),lt("dd",(function(t,e){return e.weekdaysMinRegex(t)})),lt("ddd",(function(t,e){return e.weekdaysShortRegex(t)})),lt("dddd",(function(t,e){return e.weekdaysRegex(t)})),pt(["dd","ddd","dddd"],(function(t,e,i,n){var o=i._locale.weekdaysParse(t,n,i._strict);null!=o?e.d=o:d(i).invalidWeekday=t})),pt(["d","e","E"],(function(t,e,i,n){e[n]=$(t)}));var Ot="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),zt="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Ft="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),Bt=st,Nt=st,Ht=st;function Wt(){function t(t,e){return e.length-t.length}var e,i,n,o,r,s=[],a=[],l=[],c=[];for(e=0;e<7;e++)i=u([2e3,1]).day(e),n=this.weekdaysMin(i,""),o=this.weekdaysShort(i,""),r=this.weekdays(i,""),s.push(n),a.push(o),l.push(r),c.push(n),c.push(o),c.push(r);for(s.sort(t),a.sort(t),l.sort(t),c.sort(t),e=0;e<7;e++)a[e]=ht(a[e]),l[e]=ht(l[e]),c[e]=ht(c[e]);this._weekdaysRegex=new RegExp("^("+c.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+l.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+a.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+s.join("|")+")","i")}function jt(){return this.hours()%12||12}function Yt(t,e){W(t,0,0,(function(){return this.localeData().meridiem(this.hours(),this.minutes(),e)}))}function Vt(t,e){return e._meridiemParse}W("H",["HH",2],0,"hour"),W("h",["hh",2],0,jt),W("k",["kk",2],0,(function(){return this.hours()||24})),W("hmm",0,0,(function(){return""+jt.apply(this)+z(this.minutes(),2)})),W("hmmss",0,0,(function(){return""+jt.apply(this)+z(this.minutes(),2)+z(this.seconds(),2)})),W("Hmm",0,0,(function(){return""+this.hours()+z(this.minutes(),2)})),W("Hmmss",0,0,(function(){return""+this.hours()+z(this.minutes(),2)+z(this.seconds(),2)})),Yt("a",!0),Yt("A",!1),A("hour","h"),O("hour",13),lt("a",Vt),lt("A",Vt),lt("H",Z),lt("h",Z),lt("k",Z),lt("HH",Z,U),lt("hh",Z,U),lt("kk",Z,U),lt("hmm",K),lt("hmmss",Q),lt("Hmm",K),lt("Hmmss",Q),dt(["H","HH"],3),dt(["k","kk"],(function(t,e,i){var n=$(t);e[3]=24===n?0:n})),dt(["a","A"],(function(t,e,i){i._isPm=i._locale.isPM(t),i._meridiem=t})),dt(["h","hh"],(function(t,e,i){e[3]=$(t),d(i).bigHour=!0})),dt("hmm",(function(t,e,i){var n=t.length-2;e[3]=$(t.substr(0,n)),e[4]=$(t.substr(n)),d(i).bigHour=!0})),dt("hmmss",(function(t,e,i){var n=t.length-4,o=t.length-2;e[3]=$(t.substr(0,n)),e[4]=$(t.substr(n,2)),e[5]=$(t.substr(o)),d(i).bigHour=!0})),dt("Hmm",(function(t,e,i){var n=t.length-2;e[3]=$(t.substr(0,n)),e[4]=$(t.substr(n))})),dt("Hmmss",(function(t,e,i){var n=t.length-4,o=t.length-2;e[3]=$(t.substr(0,n)),e[4]=$(t.substr(n,2)),e[5]=$(t.substr(o))}));var Ut,qt=vt("Hours",!0),Xt={calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:/\d{1,2}/,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},months:_t,monthsShort:kt,week:{dow:0,doy:6},weekdays:Ot,weekdaysMin:Ft,weekdaysShort:zt,meridiemParse:/[ap]\.?m?\.?/i},Gt={},Zt={};function Kt(t){return t?t.toLowerCase().replace("_","-"):t}function Qt(t){var e=null;if(!Gt[t]&&"undefined"!=typeof module&&module&&module.exports)try{e=Ut._abbr,require("./locale/"+t),Jt(e)}catch(t){}return Gt[t]}function Jt(t,e){var i;return t&&((i=r(e)?ee(t):te(t,e))?Ut=i:"undefined"!=typeof console&&console.warn&&console.warn("Locale "+t+" not found. Did you forget to load it?")),Ut._abbr}function te(t,e){if(null===e)return delete Gt[t],null;var i,n=Xt;if(e.abbr=t,null!=Gt[t])T("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),n=Gt[t]._config;else if(null!=e.parentLocale)if(null!=Gt[e.parentLocale])n=Gt[e.parentLocale]._config;else{if(null==(i=Qt(e.parentLocale)))return Zt[e.parentLocale]||(Zt[e.parentLocale]=[]),Zt[e.parentLocale].push({name:t,config:e}),null;n=i._config}return Gt[t]=new E(P(n,e)),Zt[t]&&Zt[t].forEach((function(t){te(t.name,t.config)})),Jt(t),Gt[t]}function ee(t){var e;if(t&&t._locale&&t._locale._abbr&&(t=t._locale._abbr),!t)return Ut;if(!n(t)){if(e=Qt(t))return e;t=[t]}return function(t){for(var e,i,n,o,r=0;r<t.length;){for(e=(o=Kt(t[r]).split("-")).length,i=(i=Kt(t[r+1]))?i.split("-"):null;0<e;){if(n=Qt(o.slice(0,e).join("-")))return n;if(i&&i.length>=e&&w(o,i,!0)>=e-1)break;e--}r++}return Ut}(t)}function ie(t){var e,i=t._a;return i&&-2===d(t).overflow&&(e=i[1]<0||11<i[1]?1:i[2]<1||i[2]>$t(i[0],i[1])?2:i[3]<0||24<i[3]||24===i[3]&&(0!==i[4]||0!==i[5]||0!==i[6])?3:i[4]<0||59<i[4]?4:i[5]<0||59<i[5]?5:i[6]<0||999<i[6]?6:-1,d(t)._overflowDayOfYear&&(e<0||2<e)&&(e=2),d(t)._overflowWeeks&&-1===e&&(e=7),d(t)._overflowWeekday&&-1===e&&(e=8),d(t).overflow=e),t}function ne(t,e,i){return null!=t?t:null!=e?e:i}function oe(t){var e,n,o,r,s,a=[];if(!t._d){var l,c;for(l=t,c=new Date(i.now()),o=l._useUTC?[c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate()]:[c.getFullYear(),c.getMonth(),c.getDate()],t._w&&null==t._a[2]&&null==t._a[1]&&function(t){var e,i,n,o,r,s,a,l;if(null!=(e=t._w).GG||null!=e.W||null!=e.E)r=1,s=4,i=ne(e.GG,t._a[0],Dt(ve(),1,4).year),n=ne(e.W,1),((o=ne(e.E,1))<1||7<o)&&(l=!0);else{r=t._locale._week.dow,s=t._locale._week.doy;var c=Dt(ve(),r,s);i=ne(e.gg,t._a[0],c.year),n=ne(e.w,c.week),null!=e.d?((o=e.d)<0||6<o)&&(l=!0):null!=e.e?(o=e.e+r,(e.e<0||6<e.e)&&(l=!0)):o=r}n<1||n>Rt(i,r,s)?d(t)._overflowWeeks=!0:null!=l?d(t)._overflowWeekday=!0:(a=At(i,n,o,r,s),t._a[0]=a.year,t._dayOfYear=a.dayOfYear)}(t),null!=t._dayOfYear&&(s=ne(t._a[0],o[0]),(t._dayOfYear>ft(s)||0===t._dayOfYear)&&(d(t)._overflowDayOfYear=!0),n=Et(s,0,t._dayOfYear),t._a[1]=n.getUTCMonth(),t._a[2]=n.getUTCDate()),e=0;e<3&&null==t._a[e];++e)t._a[e]=a[e]=o[e];for(;e<7;e++)t._a[e]=a[e]=null==t._a[e]?2===e?1:0:t._a[e];24===t._a[3]&&0===t._a[4]&&0===t._a[5]&&0===t._a[6]&&(t._nextDay=!0,t._a[3]=0),t._d=(t._useUTC?Et:function(t,e,i,n,o,r,s){var a;return t<100&&0<=t?(a=new Date(t+400,e,i,n,o,r,s),isFinite(a.getFullYear())&&a.setFullYear(t)):a=new Date(t,e,i,n,o,r,s),a}).apply(null,a),r=t._useUTC?t._d.getUTCDay():t._d.getDay(),null!=t._tzm&&t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),t._nextDay&&(t._a[3]=24),t._w&&void 0!==t._w.d&&t._w.d!==r&&(d(t).weekdayMismatch=!0)}}var re=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,se=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,ae=/Z|[+-]\d\d(?::?\d\d)?/,le=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],ce=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],he=/^\/?Date\((\-?\d+)/i;function ue(t){var e,i,n,o,r,s,a=t._i,l=re.exec(a)||se.exec(a);if(l){for(d(t).iso=!0,e=0,i=le.length;e<i;e++)if(le[e][1].exec(l[1])){o=le[e][0],n=!1!==le[e][2];break}if(null==o)return void(t._isValid=!1);if(l[3]){for(e=0,i=ce.length;e<i;e++)if(ce[e][1].exec(l[3])){r=(l[2]||" ")+ce[e][0];break}if(null==r)return void(t._isValid=!1)}if(!n&&null!=r)return void(t._isValid=!1);if(l[4]){if(!ae.exec(l[4]))return void(t._isValid=!1);s="Z"}t._f=o+(r||"")+(s||""),me(t)}else t._isValid=!1}var de=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/;var pe={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function fe(t){var e,i,n,o=de.exec(t._i.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,""));if(o){var r=function(t,e,i,n,o,r){var s=[function(t){var e=parseInt(t,10);return e<=49?2e3+e:e<=999?1900+e:e}(t),kt.indexOf(e),parseInt(i,10),parseInt(n,10),parseInt(o,10)];return r&&s.push(parseInt(r,10)),s}(o[4],o[3],o[2],o[5],o[6],o[7]);if(i=r,n=t,(e=o[1])&&zt.indexOf(e)!==new Date(i[0],i[1],i[2]).getDay()&&(d(n).weekdayMismatch=!0,!(n._isValid=!1)))return;t._a=r,t._tzm=function(t,e,i){if(t)return pe[t];if(e)return 0;var n=parseInt(i,10),o=n%100;return(n-o)/100*60+o}(o[8],o[9],o[10]),t._d=Et.apply(null,t._a),t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),d(t).rfc2822=!0}else t._isValid=!1}function me(t){if(t._f!==i.ISO_8601)if(t._f!==i.RFC_2822){t._a=[],d(t).empty=!0;var e,n,o,r,s,a,l,h,u=""+t._i,p=u.length,f=0;for(o=Y(t._f,t._locale).match(F)||[],e=0;e<o.length;e++)r=o[e],(n=(u.match(ct(r,t))||[])[0])&&(0<(s=u.substr(0,u.indexOf(n))).length&&d(t).unusedInput.push(s),u=u.slice(u.indexOf(n)+n.length),f+=n.length),H[r]?(n?d(t).empty=!1:d(t).unusedTokens.push(r),a=r,h=t,null!=(l=n)&&c(ut,a)&&ut[a](l,h._a,h,a)):t._strict&&!n&&d(t).unusedTokens.push(r);d(t).charsLeftOver=p-f,0<u.length&&d(t).unusedInput.push(u),t._a[3]<=12&&!0===d(t).bigHour&&0<t._a[3]&&(d(t).bigHour=void 0),d(t).parsedDateParts=t._a.slice(0),d(t).meridiem=t._meridiem,t._a[3]=function(t,e,i){var n;return null==i?e:null!=t.meridiemHour?t.meridiemHour(e,i):(null!=t.isPM&&((n=t.isPM(i))&&e<12&&(e+=12),n||12!==e||(e=0)),e)}(t._locale,t._a[3],t._meridiem),oe(t),ie(t)}else fe(t);else ue(t)}function ge(t){var e,c,u,m,y=t._i,x=t._f;return t._locale=t._locale||ee(t._l),null===y||void 0===x&&""===y?f({nullInput:!0}):("string"==typeof y&&(t._i=y=t._locale.preparse(y)),b(y)?new v(ie(y)):(a(y)?t._d=y:n(x)?function(t){var e,i,n,o,r;if(0===t._f.length)return d(t).invalidFormat=!0,t._d=new Date(NaN);for(o=0;o<t._f.length;o++)r=0,e=g({},t),null!=t._useUTC&&(e._useUTC=t._useUTC),e._f=t._f[o],me(e),p(e)&&(r+=d(e).charsLeftOver,r+=10*d(e).unusedTokens.length,d(e).score=r,(null==n||r<n)&&(n=r,i=e));h(t,i||e)}(t):x?me(t):r(c=(e=t)._i)?e._d=new Date(i.now()):a(c)?e._d=new Date(c.valueOf()):"string"==typeof c?(u=e,null===(m=he.exec(u._i))?(ue(u),!1===u._isValid&&(delete u._isValid,fe(u),!1===u._isValid&&(delete u._isValid,i.createFromInputFallback(u)))):u._d=new Date(+m[1])):n(c)?(e._a=l(c.slice(0),(function(t){return parseInt(t,10)})),oe(e)):o(c)?function(t){if(!t._d){var e=R(t._i);t._a=l([e.year,e.month,e.day||e.date,e.hour,e.minute,e.second,e.millisecond],(function(t){return t&&parseInt(t,10)})),oe(t)}}(e):s(c)?e._d=new Date(c):i.createFromInputFallback(e),p(t)||(t._d=null),t))}function ye(t,e,i,r,s){var a,l={};return!0!==i&&!1!==i||(r=i,i=void 0),(o(t)&&function(t){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(t).length;var e;for(e in t)if(t.hasOwnProperty(e))return!1;return!0}(t)||n(t)&&0===t.length)&&(t=void 0),l._isAMomentObject=!0,l._useUTC=l._isUTC=s,l._l=i,l._i=t,l._f=e,l._strict=r,(a=new v(ie(ge(l))))._nextDay&&(a.add(1,"d"),a._nextDay=void 0),a}function ve(t,e,i,n){return ye(t,e,i,n,!1)}i.createFromInputFallback=k("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged and will be removed in an upcoming major release. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",(function(t){t._d=new Date(t._i+(t._useUTC?" UTC":""))})),i.ISO_8601=function(){},i.RFC_2822=function(){};var be=k("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var t=ve.apply(null,arguments);return this.isValid()&&t.isValid()?t<this?this:t:f()})),xe=k("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var t=ve.apply(null,arguments);return this.isValid()&&t.isValid()?this<t?this:t:f()}));function $e(t,e){var i,o;if(1===e.length&&n(e[0])&&(e=e[0]),!e.length)return ve();for(i=e[0],o=1;o<e.length;++o)e[o].isValid()&&!e[o][t](i)||(i=e[o]);return i}var we=["year","quarter","month","week","day","hour","minute","second","millisecond"];function _e(t){var e=R(t),i=e.year||0,n=e.quarter||0,o=e.month||0,r=e.week||e.isoWeek||0,s=e.day||0,a=e.hour||0,l=e.minute||0,c=e.second||0,h=e.millisecond||0;this._isValid=function(t){for(var e in t)if(-1===gt.call(we,e)||null!=t[e]&&isNaN(t[e]))return!1;for(var i=!1,n=0;n<we.length;++n)if(t[we[n]]){if(i)return!1;parseFloat(t[we[n]])!==$(t[we[n]])&&(i=!0)}return!0}(e),this._milliseconds=+h+1e3*c+6e4*l+1e3*a*60*60,this._days=+s+7*r,this._months=+o+3*n+12*i,this._data={},this._locale=ee(),this._bubble()}function ke(t){return t instanceof _e}function Se(t){return t<0?-1*Math.round(-1*t):Math.round(t)}function Ce(t,e){W(t,0,0,(function(){var t=this.utcOffset(),i="+";return t<0&&(t=-t,i="-"),i+z(~~(t/60),2)+e+z(~~t%60,2)}))}Ce("Z",":"),Ce("ZZ",""),lt("Z",rt),lt("ZZ",rt),dt(["Z","ZZ"],(function(t,e,i){i._useUTC=!0,i._tzm=Me(rt,t)}));var Te=/([\+\-]|\d\d)/gi;function Me(t,e){var i=(e||"").match(t);if(null===i)return null;var n=((i[i.length-1]||[])+"").match(Te)||["-",0,0],o=60*n[1]+$(n[2]);return 0===o?0:"+"===n[0]?o:-o}function Pe(t,e){var n,o;return e._isUTC?(n=e.clone(),o=(b(t)||a(t)?t.valueOf():ve(t).valueOf())-n.valueOf(),n._d.setTime(n._d.valueOf()+o),i.updateOffset(n,!1),n):ve(t).local()}function Ee(t){return 15*-Math.round(t._d.getTimezoneOffset()/15)}function Ie(){return!!this.isValid()&&this._isUTC&&0===this._offset}i.updateOffset=function(){};var Ae=/^(\-|\+)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)(\.\d*)?)?$/,De=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function Re(t,e){var i,n,o,r=t,a=null;return ke(t)?r={ms:t._milliseconds,d:t._days,M:t._months}:s(t)?(r={},e?r[e]=t:r.milliseconds=t):(a=Ae.exec(t))?(i="-"===a[1]?-1:1,r={y:0,d:$(a[2])*i,h:$(a[3])*i,m:$(a[4])*i,s:$(a[5])*i,ms:$(Se(1e3*a[6]))*i}):(a=De.exec(t))?(i="-"===a[1]?-1:1,r={y:Le(a[2],i),M:Le(a[3],i),w:Le(a[4],i),d:Le(a[5],i),h:Le(a[6],i),m:Le(a[7],i),s:Le(a[8],i)}):null==r?r={}:"object"==typeof r&&("from"in r||"to"in r)&&(o=function(t,e){var i;return t.isValid()&&e.isValid()?(e=Pe(e,t),t.isBefore(e)?i=Oe(t,e):((i=Oe(e,t)).milliseconds=-i.milliseconds,i.months=-i.months),i):{milliseconds:0,months:0}}(ve(r.from),ve(r.to)),(r={}).ms=o.milliseconds,r.M=o.months),n=new _e(r),ke(t)&&c(t,"_locale")&&(n._locale=t._locale),n}function Le(t,e){var i=t&&parseFloat(t.replace(",","."));return(isNaN(i)?0:i)*e}function Oe(t,e){var i={};return i.months=e.month()-t.month()+12*(e.year()-t.year()),t.clone().add(i.months,"M").isAfter(e)&&--i.months,i.milliseconds=+e-+t.clone().add(i.months,"M"),i}function ze(t,e){return function(i,n){var o;return null===n||isNaN(+n)||(T(e,"moment()."+e+"(period, number) is deprecated. Please use moment()."+e+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),o=i,i=n,n=o),Fe(this,Re(i="string"==typeof i?+i:i,n),t),this}}function Fe(t,e,n,o){var r=e._milliseconds,s=Se(e._days),a=Se(e._months);t.isValid()&&(o=null==o||o,a&&St(t,bt(t,"Month")+a*n),s&&xt(t,"Date",bt(t,"Date")+s*n),r&&t._d.setTime(t._d.valueOf()+r*n),o&&i.updateOffset(t,s||a))}Re.fn=_e.prototype,Re.invalid=function(){return Re(NaN)};var Be=ze(1,"add"),Ne=ze(-1,"subtract");function He(t,e){var i=12*(e.year()-t.year())+(e.month()-t.month()),n=t.clone().add(i,"months");return-(i+(e-n<0?(e-n)/(n-t.clone().add(i-1,"months")):(e-n)/(t.clone().add(i+1,"months")-n)))||0}function We(t){var e;return void 0===t?this._locale._abbr:(null!=(e=ee(t))&&(this._locale=e),this)}i.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",i.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var je=k("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",(function(t){return void 0===t?this.localeData():this.locale(t)}));function Ye(){return this._locale}var Ve=126227808e5;function Ue(t,e){return(t%e+e)%e}function qe(t,e,i){return t<100&&0<=t?new Date(t+400,e,i)-Ve:new Date(t,e,i).valueOf()}function Xe(t,e,i){return t<100&&0<=t?Date.UTC(t+400,e,i)-Ve:Date.UTC(t,e,i)}function Ge(t,e){W(0,[t,t.length],0,e)}function Ze(t,e,i,n,o){var r;return null==t?Dt(this,n,o).year:((r=Rt(t,n,o))<e&&(e=r),function(t,e,i,n,o){var r=At(t,e,i,n,o),s=Et(r.year,0,r.dayOfYear);return this.year(s.getUTCFullYear()),this.month(s.getUTCMonth()),this.date(s.getUTCDate()),this}.call(this,t,e,i,n,o))}W(0,["gg",2],0,(function(){return this.weekYear()%100})),W(0,["GG",2],0,(function(){return this.isoWeekYear()%100})),Ge("gggg","weekYear"),Ge("ggggg","weekYear"),Ge("GGGG","isoWeekYear"),Ge("GGGGG","isoWeekYear"),A("weekYear","gg"),A("isoWeekYear","GG"),O("weekYear",1),O("isoWeekYear",1),lt("G",nt),lt("g",nt),lt("GG",Z,U),lt("gg",Z,U),lt("GGGG",tt,X),lt("gggg",tt,X),lt("GGGGG",et,G),lt("ggggg",et,G),pt(["gggg","ggggg","GGGG","GGGGG"],(function(t,e,i,n){e[n.substr(0,2)]=$(t)})),pt(["gg","GG"],(function(t,e,n,o){e[o]=i.parseTwoDigitYear(t)})),W("Q",0,"Qo","quarter"),A("quarter","Q"),O("quarter",7),lt("Q",V),dt("Q",(function(t,e){e[1]=3*($(t)-1)})),W("D",["DD",2],"Do","date"),A("date","D"),O("date",9),lt("D",Z),lt("DD",Z,U),lt("Do",(function(t,e){return t?e._dayOfMonthOrdinalParse||e._ordinalParse:e._dayOfMonthOrdinalParseLenient})),dt(["D","DD"],2),dt("Do",(function(t,e){e[2]=$(t.match(Z)[0])}));var Ke=vt("Date",!0);W("DDD",["DDDD",3],"DDDo","dayOfYear"),A("dayOfYear","DDD"),O("dayOfYear",4),lt("DDD",J),lt("DDDD",q),dt(["DDD","DDDD"],(function(t,e,i){i._dayOfYear=$(t)})),W("m",["mm",2],0,"minute"),A("minute","m"),O("minute",14),lt("m",Z),lt("mm",Z,U),dt(["m","mm"],4);var Qe=vt("Minutes",!1);W("s",["ss",2],0,"second"),A("second","s"),O("second",15),lt("s",Z),lt("ss",Z,U),dt(["s","ss"],5);var Je,ti=vt("Seconds",!1);for(W("S",0,0,(function(){return~~(this.millisecond()/100)})),W(0,["SS",2],0,(function(){return~~(this.millisecond()/10)})),W(0,["SSS",3],0,"millisecond"),W(0,["SSSS",4],0,(function(){return 10*this.millisecond()})),W(0,["SSSSS",5],0,(function(){return 100*this.millisecond()})),W(0,["SSSSSS",6],0,(function(){return 1e3*this.millisecond()})),W(0,["SSSSSSS",7],0,(function(){return 1e4*this.millisecond()})),W(0,["SSSSSSSS",8],0,(function(){return 1e5*this.millisecond()})),W(0,["SSSSSSSSS",9],0,(function(){return 1e6*this.millisecond()})),A("millisecond","ms"),O("millisecond",16),lt("S",J,V),lt("SS",J,U),lt("SSS",J,q),Je="SSSS";Je.length<=9;Je+="S")lt(Je,it);function ei(t,e){e[6]=$(1e3*("0."+t))}for(Je="S";Je.length<=9;Je+="S")dt(Je,ei);var ii=vt("Milliseconds",!1);W("z",0,0,"zoneAbbr"),W("zz",0,0,"zoneName");var ni=v.prototype;function oi(t){return t}ni.add=Be,ni.calendar=function(t,e){var n=t||ve(),o=Pe(n,this).startOf("day"),r=i.calendarFormat(this,o)||"sameElse",s=e&&(M(e[r])?e[r].call(this,n):e[r]);return this.format(s||this.localeData().calendar(r,this,ve(n)))},ni.clone=function(){return new v(this)},ni.diff=function(t,e,i){var n,o,r;if(!this.isValid())return NaN;if(!(n=Pe(t,this)).isValid())return NaN;switch(o=6e4*(n.utcOffset()-this.utcOffset()),e=D(e)){case"year":r=He(this,n)/12;break;case"month":r=He(this,n);break;case"quarter":r=He(this,n)/3;break;case"second":r=(this-n)/1e3;break;case"minute":r=(this-n)/6e4;break;case"hour":r=(this-n)/36e5;break;case"day":r=(this-n-o)/864e5;break;case"week":r=(this-n-o)/6048e5;break;default:r=this-n}return i?r:x(r)},ni.endOf=function(t){var e;if(void 0===(t=D(t))||"millisecond"===t||!this.isValid())return this;var n=this._isUTC?Xe:qe;switch(t){case"year":e=n(this.year()+1,0,1)-1;break;case"quarter":e=n(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":e=n(this.year(),this.month()+1,1)-1;break;case"week":e=n(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":e=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":e=n(this.year(),this.month(),this.date()+1)-1;break;case"hour":e=this._d.valueOf(),e+=36e5-Ue(e+(this._isUTC?0:6e4*this.utcOffset()),36e5)-1;break;case"minute":e=this._d.valueOf(),e+=6e4-Ue(e,6e4)-1;break;case"second":e=this._d.valueOf(),e+=1e3-Ue(e,1e3)-1}return this._d.setTime(e),i.updateOffset(this,!0),this},ni.format=function(t){t||(t=this.isUtc()?i.defaultFormatUtc:i.defaultFormat);var e=j(this,t);return this.localeData().postformat(e)},ni.from=function(t,e){return this.isValid()&&(b(t)&&t.isValid()||ve(t).isValid())?Re({to:this,from:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()},ni.fromNow=function(t){return this.from(ve(),t)},ni.to=function(t,e){return this.isValid()&&(b(t)&&t.isValid()||ve(t).isValid())?Re({from:this,to:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()},ni.toNow=function(t){return this.to(ve(),t)},ni.get=function(t){return M(this[t=D(t)])?this[t]():this},ni.invalidAt=function(){return d(this).overflow},ni.isAfter=function(t,e){var i=b(t)?t:ve(t);return!(!this.isValid()||!i.isValid())&&("millisecond"===(e=D(e)||"millisecond")?this.valueOf()>i.valueOf():i.valueOf()<this.clone().startOf(e).valueOf())},ni.isBefore=function(t,e){var i=b(t)?t:ve(t);return!(!this.isValid()||!i.isValid())&&("millisecond"===(e=D(e)||"millisecond")?this.valueOf()<i.valueOf():this.clone().endOf(e).valueOf()<i.valueOf())},ni.isBetween=function(t,e,i,n){var o=b(t)?t:ve(t),r=b(e)?e:ve(e);return!!(this.isValid()&&o.isValid()&&r.isValid())&&("("===(n=n||"()")[0]?this.isAfter(o,i):!this.isBefore(o,i))&&(")"===n[1]?this.isBefore(r,i):!this.isAfter(r,i))},ni.isSame=function(t,e){var i,n=b(t)?t:ve(t);return!(!this.isValid()||!n.isValid())&&("millisecond"===(e=D(e)||"millisecond")?this.valueOf()===n.valueOf():(i=n.valueOf(),this.clone().startOf(e).valueOf()<=i&&i<=this.clone().endOf(e).valueOf()))},ni.isSameOrAfter=function(t,e){return this.isSame(t,e)||this.isAfter(t,e)},ni.isSameOrBefore=function(t,e){return this.isSame(t,e)||this.isBefore(t,e)},ni.isValid=function(){return p(this)},ni.lang=je,ni.locale=We,ni.localeData=Ye,ni.max=xe,ni.min=be,ni.parsingFlags=function(){return h({},d(this))},ni.set=function(t,e){if("object"==typeof t)for(var i=function(t){var e=[];for(var i in t)e.push({unit:i,priority:L[i]});return e.sort((function(t,e){return t.priority-e.priority})),e}(t=R(t)),n=0;n<i.length;n++)this[i[n].unit](t[i[n].unit]);else if(M(this[t=D(t)]))return this[t](e);return this},ni.startOf=function(t){var e;if(void 0===(t=D(t))||"millisecond"===t||!this.isValid())return this;var n=this._isUTC?Xe:qe;switch(t){case"year":e=n(this.year(),0,1);break;case"quarter":e=n(this.year(),this.month()-this.month()%3,1);break;case"month":e=n(this.year(),this.month(),1);break;case"week":e=n(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":e=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":e=n(this.year(),this.month(),this.date());break;case"hour":e=this._d.valueOf(),e-=Ue(e+(this._isUTC?0:6e4*this.utcOffset()),36e5);break;case"minute":e=this._d.valueOf(),e-=Ue(e,6e4);break;case"second":e=this._d.valueOf(),e-=Ue(e,1e3)}return this._d.setTime(e),i.updateOffset(this,!0),this},ni.subtract=Ne,ni.toArray=function(){var t=this;return[t.year(),t.month(),t.date(),t.hour(),t.minute(),t.second(),t.millisecond()]},ni.toObject=function(){var t=this;return{years:t.year(),months:t.month(),date:t.date(),hours:t.hours(),minutes:t.minutes(),seconds:t.seconds(),milliseconds:t.milliseconds()}},ni.toDate=function(){return new Date(this.valueOf())},ni.toISOString=function(t){if(!this.isValid())return null;var e=!0!==t,i=e?this.clone().utc():this;return i.year()<0||9999<i.year()?j(i,e?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):M(Date.prototype.toISOString)?e?this.toDate().toISOString():new Date(this.valueOf()+60*this.utcOffset()*1e3).toISOString().replace("Z",j(i,"Z")):j(i,e?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")},ni.inspect=function(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var t="moment",e="";this.isLocal()||(t=0===this.utcOffset()?"moment.utc":"moment.parseZone",e="Z");var i="["+t+'("]',n=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",o=e+'[")]';return this.format(i+n+"-MM-DD[T]HH:mm:ss.SSS"+o)},ni.toJSON=function(){return this.isValid()?this.toISOString():null},ni.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},ni.unix=function(){return Math.floor(this.valueOf()/1e3)},ni.valueOf=function(){return this._d.valueOf()-6e4*(this._offset||0)},ni.creationData=function(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}},ni.year=yt,ni.isLeapYear=function(){return mt(this.year())},ni.weekYear=function(t){return Ze.call(this,t,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)},ni.isoWeekYear=function(t){return Ze.call(this,t,this.isoWeek(),this.isoWeekday(),1,4)},ni.quarter=ni.quarters=function(t){return null==t?Math.ceil((this.month()+1)/3):this.month(3*(t-1)+this.month()%3)},ni.month=Ct,ni.daysInMonth=function(){return $t(this.year(),this.month())},ni.week=ni.weeks=function(t){var e=this.localeData().week(this);return null==t?e:this.add(7*(t-e),"d")},ni.isoWeek=ni.isoWeeks=function(t){var e=Dt(this,1,4).week;return null==t?e:this.add(7*(t-e),"d")},ni.weeksInYear=function(){var t=this.localeData()._week;return Rt(this.year(),t.dow,t.doy)},ni.isoWeeksInYear=function(){return Rt(this.year(),1,4)},ni.date=Ke,ni.day=ni.days=function(t){if(!this.isValid())return null!=t?this:NaN;var e,i,n=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=t?(e=t,i=this.localeData(),t="string"!=typeof e?e:isNaN(e)?"number"==typeof(e=i.weekdaysParse(e))?e:null:parseInt(e,10),this.add(t-n,"d")):n},ni.weekday=function(t){if(!this.isValid())return null!=t?this:NaN;var e=(this.day()+7-this.localeData()._week.dow)%7;return null==t?e:this.add(t-e,"d")},ni.isoWeekday=function(t){if(!this.isValid())return null!=t?this:NaN;if(null==t)return this.day()||7;var e,i,n=(e=t,i=this.localeData(),"string"==typeof e?i.weekdaysParse(e)%7||7:isNaN(e)?null:e);return this.day(this.day()%7?n:n-7)},ni.dayOfYear=function(t){var e=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==t?e:this.add(t-e,"d")},ni.hour=ni.hours=qt,ni.minute=ni.minutes=Qe,ni.second=ni.seconds=ti,ni.millisecond=ni.milliseconds=ii,ni.utcOffset=function(t,e,n){var o,r=this._offset||0;if(!this.isValid())return null!=t?this:NaN;if(null==t)return this._isUTC?r:Ee(this);if("string"==typeof t){if(null===(t=Me(rt,t)))return this}else Math.abs(t)<16&&!n&&(t*=60);return!this._isUTC&&e&&(o=Ee(this)),this._offset=t,this._isUTC=!0,null!=o&&this.add(o,"m"),r!==t&&(!e||this._changeInProgress?Fe(this,Re(t-r,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,i.updateOffset(this,!0),this._changeInProgress=null)),this},ni.utc=function(t){return this.utcOffset(0,t)},ni.local=function(t){return this._isUTC&&(this.utcOffset(0,t),this._isUTC=!1,t&&this.subtract(Ee(this),"m")),this},ni.parseZone=function(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"==typeof this._i){var t=Me(ot,this._i);null!=t?this.utcOffset(t):this.utcOffset(0,!0)}return this},ni.hasAlignedHourOffset=function(t){return!!this.isValid()&&(t=t?ve(t).utcOffset():0,(this.utcOffset()-t)%60==0)},ni.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},ni.isLocal=function(){return!!this.isValid()&&!this._isUTC},ni.isUtcOffset=function(){return!!this.isValid()&&this._isUTC},ni.isUtc=Ie,ni.isUTC=Ie,ni.zoneAbbr=function(){return this._isUTC?"UTC":""},ni.zoneName=function(){return this._isUTC?"Coordinated Universal Time":""},ni.dates=k("dates accessor is deprecated. Use date instead.",Ke),ni.months=k("months accessor is deprecated. Use month instead",Ct),ni.years=k("years accessor is deprecated. Use year instead",yt),ni.zone=k("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",(function(t,e){return null!=t?("string"!=typeof t&&(t=-t),this.utcOffset(t,e),this):-this.utcOffset()})),ni.isDSTShifted=k("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",(function(){if(!r(this._isDSTShifted))return this._isDSTShifted;var t={};if(g(t,this),(t=ge(t))._a){var e=t._isUTC?u(t._a):ve(t._a);this._isDSTShifted=this.isValid()&&0<w(t._a,e.toArray())}else this._isDSTShifted=!1;return this._isDSTShifted}));var ri=E.prototype;function si(t,e,i,n){var o=ee(),r=u().set(n,e);return o[i](r,t)}function ai(t,e,i){if(s(t)&&(e=t,t=void 0),t=t||"",null!=e)return si(t,e,i,"month");var n,o=[];for(n=0;n<12;n++)o[n]=si(t,n,i,"month");return o}function li(t,e,i,n){"boolean"==typeof t?s(e)&&(i=e,e=void 0):(e=t,t=!1,s(i=e)&&(i=e,e=void 0)),e=e||"";var o,r=ee(),a=t?r._week.dow:0;if(null!=i)return si(e,(i+a)%7,n,"day");var l=[];for(o=0;o<7;o++)l[o]=si(e,(o+a)%7,n,"day");return l}ri.calendar=function(t,e,i){var n=this._calendar[t]||this._calendar.sameElse;return M(n)?n.call(e,i):n},ri.longDateFormat=function(t){var e=this._longDateFormat[t],i=this._longDateFormat[t.toUpperCase()];return e||!i?e:(this._longDateFormat[t]=i.replace(/MMMM|MM|DD|dddd/g,(function(t){return t.slice(1)})),this._longDateFormat[t])},ri.invalidDate=function(){return this._invalidDate},ri.ordinal=function(t){return this._ordinal.replace("%d",t)},ri.preparse=oi,ri.postformat=oi,ri.relativeTime=function(t,e,i,n){var o=this._relativeTime[i];return M(o)?o(t,e,i,n):o.replace(/%d/i,t)},ri.pastFuture=function(t,e){var i=this._relativeTime[0<t?"future":"past"];return M(i)?i(e):i.replace(/%s/i,e)},ri.set=function(t){var e,i;for(i in t)M(e=t[i])?this[i]=e:this["_"+i]=e;this._config=t,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)},ri.months=function(t,e){return t?n(this._months)?this._months[t.month()]:this._months[(this._months.isFormat||wt).test(e)?"format":"standalone"][t.month()]:n(this._months)?this._months:this._months.standalone},ri.monthsShort=function(t,e){return t?n(this._monthsShort)?this._monthsShort[t.month()]:this._monthsShort[wt.test(e)?"format":"standalone"][t.month()]:n(this._monthsShort)?this._monthsShort:this._monthsShort.standalone},ri.monthsParse=function(t,e,i){var n,o,r;if(this._monthsParseExact)return function(t,e,i){var n,o,r,s=t.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],n=0;n<12;++n)r=u([2e3,n]),this._shortMonthsParse[n]=this.monthsShort(r,"").toLocaleLowerCase(),this._longMonthsParse[n]=this.months(r,"").toLocaleLowerCase();return i?"MMM"===e?-1!==(o=gt.call(this._shortMonthsParse,s))?o:null:-1!==(o=gt.call(this._longMonthsParse,s))?o:null:"MMM"===e?-1!==(o=gt.call(this._shortMonthsParse,s))||-1!==(o=gt.call(this._longMonthsParse,s))?o:null:-1!==(o=gt.call(this._longMonthsParse,s))||-1!==(o=gt.call(this._shortMonthsParse,s))?o:null}.call(this,t,e,i);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),n=0;n<12;n++){if(o=u([2e3,n]),i&&!this._longMonthsParse[n]&&(this._longMonthsParse[n]=new RegExp("^"+this.months(o,"").replace(".","")+"$","i"),this._shortMonthsParse[n]=new RegExp("^"+this.monthsShort(o,"").replace(".","")+"$","i")),i||this._monthsParse[n]||(r="^"+this.months(o,"")+"|^"+this.monthsShort(o,""),this._monthsParse[n]=new RegExp(r.replace(".",""),"i")),i&&"MMMM"===e&&this._longMonthsParse[n].test(t))return n;if(i&&"MMM"===e&&this._shortMonthsParse[n].test(t))return n;if(!i&&this._monthsParse[n].test(t))return n}},ri.monthsRegex=function(t){return this._monthsParseExact?(c(this,"_monthsRegex")||Pt.call(this),t?this._monthsStrictRegex:this._monthsRegex):(c(this,"_monthsRegex")||(this._monthsRegex=Mt),this._monthsStrictRegex&&t?this._monthsStrictRegex:this._monthsRegex)},ri.monthsShortRegex=function(t){return this._monthsParseExact?(c(this,"_monthsRegex")||Pt.call(this),t?this._monthsShortStrictRegex:this._monthsShortRegex):(c(this,"_monthsShortRegex")||(this._monthsShortRegex=Tt),this._monthsShortStrictRegex&&t?this._monthsShortStrictRegex:this._monthsShortRegex)},ri.week=function(t){return Dt(t,this._week.dow,this._week.doy).week},ri.firstDayOfYear=function(){return this._week.doy},ri.firstDayOfWeek=function(){return this._week.dow},ri.weekdays=function(t,e){var i=n(this._weekdays)?this._weekdays:this._weekdays[t&&!0!==t&&this._weekdays.isFormat.test(e)?"format":"standalone"];return!0===t?Lt(i,this._week.dow):t?i[t.day()]:i},ri.weekdaysMin=function(t){return!0===t?Lt(this._weekdaysMin,this._week.dow):t?this._weekdaysMin[t.day()]:this._weekdaysMin},ri.weekdaysShort=function(t){return!0===t?Lt(this._weekdaysShort,this._week.dow):t?this._weekdaysShort[t.day()]:this._weekdaysShort},ri.weekdaysParse=function(t,e,i){var n,o,r;if(this._weekdaysParseExact)return function(t,e,i){var n,o,r,s=t.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],n=0;n<7;++n)r=u([2e3,1]).day(n),this._minWeekdaysParse[n]=this.weekdaysMin(r,"").toLocaleLowerCase(),this._shortWeekdaysParse[n]=this.weekdaysShort(r,"").toLocaleLowerCase(),this._weekdaysParse[n]=this.weekdays(r,"").toLocaleLowerCase();return i?"dddd"===e?-1!==(o=gt.call(this._weekdaysParse,s))?o:null:"ddd"===e?-1!==(o=gt.call(this._shortWeekdaysParse,s))?o:null:-1!==(o=gt.call(this._minWeekdaysParse,s))?o:null:"dddd"===e?-1!==(o=gt.call(this._weekdaysParse,s))||-1!==(o=gt.call(this._shortWeekdaysParse,s))||-1!==(o=gt.call(this._minWeekdaysParse,s))?o:null:"ddd"===e?-1!==(o=gt.call(this._shortWeekdaysParse,s))||-1!==(o=gt.call(this._weekdaysParse,s))||-1!==(o=gt.call(this._minWeekdaysParse,s))?o:null:-1!==(o=gt.call(this._minWeekdaysParse,s))||-1!==(o=gt.call(this._weekdaysParse,s))||-1!==(o=gt.call(this._shortWeekdaysParse,s))?o:null}.call(this,t,e,i);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),n=0;n<7;n++){if(o=u([2e3,1]).day(n),i&&!this._fullWeekdaysParse[n]&&(this._fullWeekdaysParse[n]=new RegExp("^"+this.weekdays(o,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[n]=new RegExp("^"+this.weekdaysShort(o,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[n]=new RegExp("^"+this.weekdaysMin(o,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[n]||(r="^"+this.weekdays(o,"")+"|^"+this.weekdaysShort(o,"")+"|^"+this.weekdaysMin(o,""),this._weekdaysParse[n]=new RegExp(r.replace(".",""),"i")),i&&"dddd"===e&&this._fullWeekdaysParse[n].test(t))return n;if(i&&"ddd"===e&&this._shortWeekdaysParse[n].test(t))return n;if(i&&"dd"===e&&this._minWeekdaysParse[n].test(t))return n;if(!i&&this._weekdaysParse[n].test(t))return n}},ri.weekdaysRegex=function(t){return this._weekdaysParseExact?(c(this,"_weekdaysRegex")||Wt.call(this),t?this._weekdaysStrictRegex:this._weekdaysRegex):(c(this,"_weekdaysRegex")||(this._weekdaysRegex=Bt),this._weekdaysStrictRegex&&t?this._weekdaysStrictRegex:this._weekdaysRegex)},ri.weekdaysShortRegex=function(t){return this._weekdaysParseExact?(c(this,"_weekdaysRegex")||Wt.call(this),t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(c(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Nt),this._weekdaysShortStrictRegex&&t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)},ri.weekdaysMinRegex=function(t){return this._weekdaysParseExact?(c(this,"_weekdaysRegex")||Wt.call(this),t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(c(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Ht),this._weekdaysMinStrictRegex&&t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)},ri.isPM=function(t){return"p"===(t+"").toLowerCase().charAt(0)},ri.meridiem=function(t,e,i){return 11<t?i?"pm":"PM":i?"am":"AM"},Jt("en",{dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(t){var e=t%10;return t+(1===$(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th")}}),i.lang=k("moment.lang is deprecated. Use moment.locale instead.",Jt),i.langData=k("moment.langData is deprecated. Use moment.localeData instead.",ee);var ci=Math.abs;function hi(t,e,i,n){var o=Re(e,i);return t._milliseconds+=n*o._milliseconds,t._days+=n*o._days,t._months+=n*o._months,t._bubble()}function ui(t){return t<0?Math.floor(t):Math.ceil(t)}function di(t){return 4800*t/146097}function pi(t){return 146097*t/4800}function fi(t){return function(){return this.as(t)}}var mi=fi("ms"),gi=fi("s"),yi=fi("m"),vi=fi("h"),bi=fi("d"),xi=fi("w"),$i=fi("M"),wi=fi("Q"),_i=fi("y");function ki(t){return function(){return this.isValid()?this._data[t]:NaN}}var Si=ki("milliseconds"),Ci=ki("seconds"),Ti=ki("minutes"),Mi=ki("hours"),Pi=ki("days"),Ei=ki("months"),Ii=ki("years"),Ai=Math.round,Di={ss:44,s:45,m:45,h:22,d:26,M:11},Ri=Math.abs;function Li(t){return(0<t)-(t<0)||+t}function Oi(){if(!this.isValid())return this.localeData().invalidDate();var t,e,i=Ri(this._milliseconds)/1e3,n=Ri(this._days),o=Ri(this._months);e=x((t=x(i/60))/60),i%=60,t%=60;var r=x(o/12),s=o%=12,a=n,l=e,c=t,h=i?i.toFixed(3).replace(/\.?0+$/,""):"",u=this.asSeconds();if(!u)return"P0D";var d=u<0?"-":"",p=Li(this._months)!==Li(u)?"-":"",f=Li(this._days)!==Li(u)?"-":"",m=Li(this._milliseconds)!==Li(u)?"-":"";return d+"P"+(r?p+r+"Y":"")+(s?p+s+"M":"")+(a?f+a+"D":"")+(l||c||h?"T":"")+(l?m+l+"H":"")+(c?m+c+"M":"")+(h?m+h+"S":"")}var zi=_e.prototype;return zi.isValid=function(){return this._isValid},zi.abs=function(){var t=this._data;return this._milliseconds=ci(this._milliseconds),this._days=ci(this._days),this._months=ci(this._months),t.milliseconds=ci(t.milliseconds),t.seconds=ci(t.seconds),t.minutes=ci(t.minutes),t.hours=ci(t.hours),t.months=ci(t.months),t.years=ci(t.years),this},zi.add=function(t,e){return hi(this,t,e,1)},zi.subtract=function(t,e){return hi(this,t,e,-1)},zi.as=function(t){if(!this.isValid())return NaN;var e,i,n=this._milliseconds;if("month"===(t=D(t))||"quarter"===t||"year"===t)switch(e=this._days+n/864e5,i=this._months+di(e),t){case"month":return i;case"quarter":return i/3;case"year":return i/12}else switch(e=this._days+Math.round(pi(this._months)),t){case"week":return e/7+n/6048e5;case"day":return e+n/864e5;case"hour":return 24*e+n/36e5;case"minute":return 1440*e+n/6e4;case"second":return 86400*e+n/1e3;case"millisecond":return Math.floor(864e5*e)+n;default:throw new Error("Unknown unit "+t)}},zi.asMilliseconds=mi,zi.asSeconds=gi,zi.asMinutes=yi,zi.asHours=vi,zi.asDays=bi,zi.asWeeks=xi,zi.asMonths=$i,zi.asQuarters=wi,zi.asYears=_i,zi.valueOf=function(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*$(this._months/12):NaN},zi._bubble=function(){var t,e,i,n,o,r=this._milliseconds,s=this._days,a=this._months,l=this._data;return 0<=r&&0<=s&&0<=a||r<=0&&s<=0&&a<=0||(r+=864e5*ui(pi(a)+s),a=s=0),l.milliseconds=r%1e3,t=x(r/1e3),l.seconds=t%60,e=x(t/60),l.minutes=e%60,i=x(e/60),l.hours=i%24,a+=o=x(di(s+=x(i/24))),s-=ui(pi(o)),n=x(a/12),a%=12,l.days=s,l.months=a,l.years=n,this},zi.clone=function(){return Re(this)},zi.get=function(t){return t=D(t),this.isValid()?this[t+"s"]():NaN},zi.milliseconds=Si,zi.seconds=Ci,zi.minutes=Ti,zi.hours=Mi,zi.days=Pi,zi.weeks=function(){return x(this.days()/7)},zi.months=Ei,zi.years=Ii,zi.humanize=function(t){if(!this.isValid())return this.localeData().invalidDate();var e,i,n,o,r,s,a,l,c,h,u=this.localeData(),d=(e=!t,i=u,n=Re(this).abs(),o=Ai(n.as("s")),r=Ai(n.as("m")),s=Ai(n.as("h")),a=Ai(n.as("d")),l=Ai(n.as("M")),c=Ai(n.as("y")),(h=o<=Di.ss&&["s",o]||o<Di.s&&["ss",o]||r<=1&&["m"]||r<Di.m&&["mm",r]||s<=1&&["h"]||s<Di.h&&["hh",s]||a<=1&&["d"]||a<Di.d&&["dd",a]||l<=1&&["M"]||l<Di.M&&["MM",l]||c<=1&&["y"]||["yy",c])[2]=e,h[3]=0<+this,h[4]=i,function(t,e,i,n,o){return o.relativeTime(e||1,!!i,t,n)}.apply(null,h));return t&&(d=u.pastFuture(+this,d)),u.postformat(d)},zi.toISOString=Oi,zi.toString=Oi,zi.toJSON=Oi,zi.locale=We,zi.localeData=Ye,zi.toIsoString=k("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Oi),zi.lang=je,W("X",0,0,"unix"),W("x",0,0,"valueOf"),lt("x",nt),lt("X",/[+-]?\d+(\.\d{1,3})?/),dt("X",(function(t,e,i){i._d=new Date(1e3*parseFloat(t,10))})),dt("x",(function(t,e,i){i._d=new Date($(t))})),i.version="2.24.0",t=ve,i.fn=ni,i.min=function(){return $e("isBefore",[].slice.call(arguments,0))},i.max=function(){return $e("isAfter",[].slice.call(arguments,0))},i.now=function(){return Date.now?Date.now():+new Date},i.utc=u,i.unix=function(t){return ve(1e3*t)},i.months=function(t,e){return ai(t,e,"months")},i.isDate=a,i.locale=Jt,i.invalid=f,i.duration=Re,i.isMoment=b,i.weekdays=function(t,e,i){return li(t,e,i,"weekdays")},i.parseZone=function(){return ve.apply(null,arguments).parseZone()},i.localeData=ee,i.isDuration=ke,i.monthsShort=function(t,e){return ai(t,e,"monthsShort")},i.weekdaysMin=function(t,e,i){return li(t,e,i,"weekdaysMin")},i.defineLocale=te,i.updateLocale=function(t,e){if(null!=e){var i,n,o=Xt;null!=(n=Qt(t))&&(o=n._config),(i=new E(e=P(o,e))).parentLocale=Gt[t],Gt[t]=i,Jt(t)}else null!=Gt[t]&&(null!=Gt[t].parentLocale?Gt[t]=Gt[t].parentLocale:null!=Gt[t]&&delete Gt[t]);return Gt[t]},i.locales=function(){return S(Gt)},i.weekdaysShort=function(t,e,i){return li(t,e,i,"weekdaysShort")},i.normalizeUnits=D,i.relativeTimeRounding=function(t){return void 0===t?Ai:"function"==typeof t&&(Ai=t,!0)},i.relativeTimeThreshold=function(t,e){return void 0!==Di[t]&&(void 0===e?Di[t]:(Di[t]=e,"s"===t&&(Di.ss=e-1),!0))},i.calendarFormat=function(t,e){var i=t.diff(e,"days",!0);return i<-6?"sameElse":i<-1?"lastWeek":i<0?"lastDay":i<1?"sameDay":i<2?"nextDay":i<7?"nextWeek":"sameElse"},i.prototype=ni,i.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},i})),
/**
* @version: 3.1
* @author: Dan Grossman http://www.dangrossman.info/
* @copyright: Copyright (c) 2012-2019 Dan Grossman. All rights reserved.
* @license: Licensed under the MIT license. See http://www.opensource.org/licenses/mit-license.php
* @website: http://www.daterangepicker.com/
*/
function(t,e){if("function"==typeof define&&define.amd)define(["moment","jquery"],(function(t,i){return i.fn||(i.fn={}),"function"!=typeof t&&t.hasOwnProperty("default")&&(t=t.default),e(t,i)}));else if("object"==typeof module&&module.exports){var i="undefined"!=typeof window?window.jQuery:void 0;i||(i=require("jquery")).fn||(i.fn={});var n="undefined"!=typeof window&&void 0!==window.moment?window.moment:require("moment");module.exports=e(n,i)}else t.daterangepicker=e(t.moment,t.jQuery)}(this,(function(t,e){var i=function(i,n,o){if(this.parentEl="body",this.element=e(i),this.startDate=t().startOf("day"),this.endDate=t().endOf("day"),this.minDate=!1,this.maxDate=!1,this.maxSpan=!1,this.autoApply=!1,this.singleDatePicker=!1,this.showDropdowns=!1,this.minYear=t().subtract(100,"year").format("YYYY"),this.maxYear=t().add(100,"year").format("YYYY"),this.showWeekNumbers=!1,this.showISOWeekNumbers=!1,this.showCustomRangeLabel=!0,this.timePicker=!1,this.timePicker24Hour=!1,this.timePickerIncrement=1,this.timePickerSeconds=!1,this.linkedCalendars=!0,this.autoUpdateInput=!0,this.alwaysShowCalendars=!1,this.ranges={},this.opens="right",this.element.hasClass("pull-right")&&(this.opens="left"),this.drops="down",this.element.hasClass("dropup")&&(this.drops="up"),this.buttonClasses="btn btn-sm",this.applyButtonClasses="btn-primary",this.cancelButtonClasses="btn-default",this.locale={direction:"ltr",format:t.localeData().longDateFormat("L"),separator:" - ",applyLabel:"Apply",cancelLabel:"Cancel",weekLabel:"W",customRangeLabel:"Custom Range",daysOfWeek:t.weekdaysMin(),monthNames:t.monthsShort(),firstDay:t.localeData().firstDayOfWeek()},this.callback=function(){},this.isShowing=!1,this.leftCalendar={},this.rightCalendar={},"object"==typeof n&&null!==n||(n={}),"string"==typeof(n=e.extend(this.element.data(),n)).template||n.template instanceof e||(n.template='<div class="daterangepicker"><div class="ranges"></div><div class="drp-calendar left"><div class="calendar-table"></div><div class="calendar-time"></div></div><div class="drp-calendar right"><div class="calendar-table"></div><div class="calendar-time"></div></div><div class="drp-buttons"><span class="drp-selected"></span><button class="cancelBtn" type="button"></button><button class="applyBtn" disabled="disabled" type="button"></button> </div></div>'),this.parentEl=n.parentEl&&e(n.parentEl).length?e(n.parentEl):e(this.parentEl),this.container=e(n.template).appendTo(this.parentEl),"object"==typeof n.locale&&("string"==typeof n.locale.direction&&(this.locale.direction=n.locale.direction),"string"==typeof n.locale.format&&(this.locale.format=n.locale.format),"string"==typeof n.locale.separator&&(this.locale.separator=n.locale.separator),"object"==typeof n.locale.daysOfWeek&&(this.locale.daysOfWeek=n.locale.daysOfWeek.slice()),"object"==typeof n.locale.monthNames&&(this.locale.monthNames=n.locale.monthNames.slice()),"number"==typeof n.locale.firstDay&&(this.locale.firstDay=n.locale.firstDay),"string"==typeof n.locale.applyLabel&&(this.locale.applyLabel=n.locale.applyLabel),"string"==typeof n.locale.cancelLabel&&(this.locale.cancelLabel=n.locale.cancelLabel),"string"==typeof n.locale.weekLabel&&(this.locale.weekLabel=n.locale.weekLabel),"string"==typeof n.locale.customRangeLabel)){(p=document.createElement("textarea")).innerHTML=n.locale.customRangeLabel;var r=p.value;this.locale.customRangeLabel=r}if(this.container.addClass(this.locale.direction),"string"==typeof n.startDate&&(this.startDate=t(n.startDate,this.locale.format)),"string"==typeof n.endDate&&(this.endDate=t(n.endDate,this.locale.format)),"string"==typeof n.minDate&&(this.minDate=t(n.minDate,this.locale.format)),"string"==typeof n.maxDate&&(this.maxDate=t(n.maxDate,this.locale.format)),"object"==typeof n.startDate&&(this.startDate=t(n.startDate)),"object"==typeof n.endDate&&(this.endDate=t(n.endDate)),"object"==typeof n.minDate&&(this.minDate=t(n.minDate)),"object"==typeof n.maxDate&&(this.maxDate=t(n.maxDate)),this.minDate&&this.startDate.isBefore(this.minDate)&&(this.startDate=this.minDate.clone()),this.maxDate&&this.endDate.isAfter(this.maxDate)&&(this.endDate=this.maxDate.clone()),"string"==typeof n.applyButtonClasses&&(this.applyButtonClasses=n.applyButtonClasses),"string"==typeof n.applyClass&&(this.applyButtonClasses=n.applyClass),"string"==typeof n.cancelButtonClasses&&(this.cancelButtonClasses=n.cancelButtonClasses),"string"==typeof n.cancelClass&&(this.cancelButtonClasses=n.cancelClass),"object"==typeof n.maxSpan&&(this.maxSpan=n.maxSpan),"object"==typeof n.dateLimit&&(this.maxSpan=n.dateLimit),"string"==typeof n.opens&&(this.opens=n.opens),"string"==typeof n.drops&&(this.drops=n.drops),"boolean"==typeof n.showWeekNumbers&&(this.showWeekNumbers=n.showWeekNumbers),"boolean"==typeof n.showISOWeekNumbers&&(this.showISOWeekNumbers=n.showISOWeekNumbers),"string"==typeof n.buttonClasses&&(this.buttonClasses=n.buttonClasses),"object"==typeof n.buttonClasses&&(this.buttonClasses=n.buttonClasses.join(" ")),"boolean"==typeof n.showDropdowns&&(this.showDropdowns=n.showDropdowns),"number"==typeof n.minYear&&(this.minYear=n.minYear),"number"==typeof n.maxYear&&(this.maxYear=n.maxYear),"boolean"==typeof n.showCustomRangeLabel&&(this.showCustomRangeLabel=n.showCustomRangeLabel),"boolean"==typeof n.singleDatePicker&&(this.singleDatePicker=n.singleDatePicker,this.singleDatePicker&&(this.endDate=this.startDate.clone())),"boolean"==typeof n.timePicker&&(this.timePicker=n.timePicker),"boolean"==typeof n.timePickerSeconds&&(this.timePickerSeconds=n.timePickerSeconds),"number"==typeof n.timePickerIncrement&&(this.timePickerIncrement=n.timePickerIncrement),"boolean"==typeof n.timePicker24Hour&&(this.timePicker24Hour=n.timePicker24Hour),"boolean"==typeof n.autoApply&&(this.autoApply=n.autoApply),"boolean"==typeof n.autoUpdateInput&&(this.autoUpdateInput=n.autoUpdateInput),"boolean"==typeof n.linkedCalendars&&(this.linkedCalendars=n.linkedCalendars),"function"==typeof n.isInvalidDate&&(this.isInvalidDate=n.isInvalidDate),"function"==typeof n.isCustomDate&&(this.isCustomDate=n.isCustomDate),"boolean"==typeof n.alwaysShowCalendars&&(this.alwaysShowCalendars=n.alwaysShowCalendars),0!=this.locale.firstDay)for(var s=this.locale.firstDay;s>0;)this.locale.daysOfWeek.push(this.locale.daysOfWeek.shift()),s--;var a,l,c;if(void 0===n.startDate&&void 0===n.endDate&&e(this.element).is(":text")){var h=e(this.element).val(),u=h.split(this.locale.separator);a=l=null,2==u.length?(a=t(u[0],this.locale.format),l=t(u[1],this.locale.format)):this.singleDatePicker&&""!==h&&(a=t(h,this.locale.format),l=t(h,this.locale.format)),null!==a&&null!==l&&(this.setStartDate(a),this.setEndDate(l))}if("object"==typeof n.ranges){for(c in n.ranges){a="string"==typeof n.ranges[c][0]?t(n.ranges[c][0],this.locale.format):t(n.ranges[c][0]),l="string"==typeof n.ranges[c][1]?t(n.ranges[c][1],this.locale.format):t(n.ranges[c][1]),this.minDate&&a.isBefore(this.minDate)&&(a=this.minDate.clone());var d=this.maxDate;if(this.maxSpan&&d&&a.clone().add(this.maxSpan).isAfter(d)&&(d=a.clone().add(this.maxSpan)),d&&l.isAfter(d)&&(l=d.clone()),!(this.minDate&&l.isBefore(this.minDate,this.timepicker?"minute":"day")||d&&a.isAfter(d,this.timepicker?"minute":"day"))){var p;(p=document.createElement("textarea")).innerHTML=c;r=p.value;this.ranges[r]=[a,l]}}var f="<ul>";for(c in this.ranges)f+='<li data-range-key="'+c+'">'+c+"</li>";this.showCustomRangeLabel&&(f+='<li data-range-key="'+this.locale.customRangeLabel+'">'+this.locale.customRangeLabel+"</li>"),f+="</ul>",this.container.find(".ranges").prepend(f)}"function"==typeof o&&(this.callback=o),this.timePicker||(this.startDate=this.startDate.startOf("day"),this.endDate=this.endDate.endOf("day"),this.container.find(".calendar-time").hide()),this.timePicker&&this.autoApply&&(this.autoApply=!1),this.autoApply&&this.container.addClass("auto-apply"),"object"==typeof n.ranges&&this.container.addClass("show-ranges"),this.singleDatePicker&&(this.container.addClass("single"),this.container.find(".drp-calendar.left").addClass("single"),this.container.find(".drp-calendar.left").show(),this.container.find(".drp-calendar.right").hide(),!this.timePicker&&this.autoApply&&this.container.addClass("auto-apply")),(void 0===n.ranges&&!this.singleDatePicker||this.alwaysShowCalendars)&&this.container.addClass("show-calendar"),this.container.addClass("opens"+this.opens),this.container.find(".applyBtn, .cancelBtn").addClass(this.buttonClasses),this.applyButtonClasses.length&&this.container.find(".applyBtn").addClass(this.applyButtonClasses),this.cancelButtonClasses.length&&this.container.find(".cancelBtn").addClass(this.cancelButtonClasses),this.container.find(".applyBtn").html(this.locale.applyLabel),this.container.find(".cancelBtn").html(this.locale.cancelLabel),this.container.find(".drp-calendar").on("click.daterangepicker",".prev",e.proxy(this.clickPrev,this)).on("click.daterangepicker",".next",e.proxy(this.clickNext,this)).on("mousedown.daterangepicker","td.available",e.proxy(this.clickDate,this)).on("mouseenter.daterangepicker","td.available",e.proxy(this.hoverDate,this)).on("change.daterangepicker","select.yearselect",e.proxy(this.monthOrYearChanged,this)).on("change.daterangepicker","select.monthselect",e.proxy(this.monthOrYearChanged,this)).on("change.daterangepicker","select.hourselect,select.minuteselect,select.secondselect,select.ampmselect",e.proxy(this.timeChanged,this)),this.container.find(".ranges").on("click.daterangepicker","li",e.proxy(this.clickRange,this)),this.container.find(".drp-buttons").on("click.daterangepicker","button.applyBtn",e.proxy(this.clickApply,this)).on("click.daterangepicker","button.cancelBtn",e.proxy(this.clickCancel,this)),this.element.is("input")||this.element.is("button")?this.element.on({"click.daterangepicker":e.proxy(this.show,this),"focus.daterangepicker":e.proxy(this.show,this),"keyup.daterangepicker":e.proxy(this.elementChanged,this),"keydown.daterangepicker":e.proxy(this.keydown,this)}):(this.element.on("click.daterangepicker",e.proxy(this.toggle,this)),this.element.on("keydown.daterangepicker",e.proxy(this.toggle,this))),this.updateElement()};return i.prototype={constructor:i,setStartDate:function(e){"string"==typeof e&&(this.startDate=t(e,this.locale.format)),"object"==typeof e&&(this.startDate=t(e)),this.timePicker||(this.startDate=this.startDate.startOf("day")),this.timePicker&&this.timePickerIncrement&&this.startDate.minute(Math.round(this.startDate.minute()/this.timePickerIncrement)*this.timePickerIncrement),this.minDate&&this.startDate.isBefore(this.minDate)&&(this.startDate=this.minDate.clone(),this.timePicker&&this.timePickerIncrement&&this.startDate.minute(Math.round(this.startDate.minute()/this.timePickerIncrement)*this.timePickerIncrement)),this.maxDate&&this.startDate.isAfter(this.maxDate)&&(this.startDate=this.maxDate.clone(),this.timePicker&&this.timePickerIncrement&&this.startDate.minute(Math.floor(this.startDate.minute()/this.timePickerIncrement)*this.timePickerIncrement)),this.isShowing||this.updateElement(),this.updateMonthsInView()},setEndDate:function(e){"string"==typeof e&&(this.endDate=t(e,this.locale.format)),"object"==typeof e&&(this.endDate=t(e)),this.timePicker||(this.endDate=this.endDate.endOf("day")),this.timePicker&&this.timePickerIncrement&&this.endDate.minute(Math.round(this.endDate.minute()/this.timePickerIncrement)*this.timePickerIncrement),this.endDate.isBefore(this.startDate)&&(this.endDate=this.startDate.clone()),this.maxDate&&this.endDate.isAfter(this.maxDate)&&(this.endDate=this.maxDate.clone()),this.maxSpan&&this.startDate.clone().add(this.maxSpan).isBefore(this.endDate)&&(this.endDate=this.startDate.clone().add(this.maxSpan)),this.previousRightTime=this.endDate.clone(),this.container.find(".drp-selected").html(this.startDate.format(this.locale.format)+this.locale.separator+this.endDate.format(this.locale.format)),this.isShowing||this.updateElement(),this.updateMonthsInView()},isInvalidDate:function(){return!1},isCustomDate:function(){return!1},updateView:function(){this.timePicker&&(this.renderTimePicker("left"),this.renderTimePicker("right"),this.endDate?this.container.find(".right .calendar-time select").prop("disabled",!1).removeClass("disabled"):this.container.find(".right .calendar-time select").prop("disabled",!0).addClass("disabled")),this.endDate&&this.container.find(".drp-selected").html(this.startDate.format(this.locale.format)+this.locale.separator+this.endDate.format(this.locale.format)),this.updateMonthsInView(),this.updateCalendars(),this.updateFormInputs()},updateMonthsInView:function(){if(this.endDate){if(!this.singleDatePicker&&this.leftCalendar.month&&this.rightCalendar.month&&(this.startDate.format("YYYY-MM")==this.leftCalendar.month.format("YYYY-MM")||this.startDate.format("YYYY-MM")==this.rightCalendar.month.format("YYYY-MM"))&&(this.endDate.format("YYYY-MM")==this.leftCalendar.month.format("YYYY-MM")||this.endDate.format("YYYY-MM")==this.rightCalendar.month.format("YYYY-MM")))return;this.leftCalendar.month=this.startDate.clone().date(2),this.linkedCalendars||this.endDate.month()==this.startDate.month()&&this.endDate.year()==this.startDate.year()?this.rightCalendar.month=this.startDate.clone().date(2).add(1,"month"):this.rightCalendar.month=this.endDate.clone().date(2)}else this.leftCalendar.month.format("YYYY-MM")!=this.startDate.format("YYYY-MM")&&this.rightCalendar.month.format("YYYY-MM")!=this.startDate.format("YYYY-MM")&&(this.leftCalendar.month=this.startDate.clone().date(2),this.rightCalendar.month=this.startDate.clone().date(2).add(1,"month"));this.maxDate&&this.linkedCalendars&&!this.singleDatePicker&&this.rightCalendar.month>this.maxDate&&(this.rightCalendar.month=this.maxDate.clone().date(2),this.leftCalendar.month=this.maxDate.clone().date(2).subtract(1,"month"))},updateCalendars:function(){if(this.timePicker){var t,e,i,n;if(this.endDate){if(t=parseInt(this.container.find(".left .hourselect").val(),10),e=parseInt(this.container.find(".left .minuteselect").val(),10),isNaN(e)&&(e=parseInt(this.container.find(".left .minuteselect option:last").val(),10)),i=this.timePickerSeconds?parseInt(this.container.find(".left .secondselect").val(),10):0,!this.timePicker24Hour)"PM"===(n=this.container.find(".left .ampmselect").val())&&t<12&&(t+=12),"AM"===n&&12===t&&(t=0)}else if(t=parseInt(this.container.find(".right .hourselect").val(),10),e=parseInt(this.container.find(".right .minuteselect").val(),10),isNaN(e)&&(e=parseInt(this.container.find(".right .minuteselect option:last").val(),10)),i=this.timePickerSeconds?parseInt(this.container.find(".right .secondselect").val(),10):0,!this.timePicker24Hour)"PM"===(n=this.container.find(".right .ampmselect").val())&&t<12&&(t+=12),"AM"===n&&12===t&&(t=0);this.leftCalendar.month.hour(t).minute(e).second(i),this.rightCalendar.month.hour(t).minute(e).second(i)}this.renderCalendar("left"),this.renderCalendar("right"),this.container.find(".ranges li").removeClass("active"),null!=this.endDate&&this.calculateChosenLabel()},renderCalendar:function(i){var n,o=(n="left"==i?this.leftCalendar:this.rightCalendar).month.month(),r=n.month.year(),s=n.month.hour(),a=n.month.minute(),l=n.month.second(),c=t([r,o]).daysInMonth(),h=t([r,o,1]),u=t([r,o,c]),d=t(h).subtract(1,"month").month(),p=t(h).subtract(1,"month").year(),f=t([p,d]).daysInMonth(),m=h.day();(n=[]).firstDay=h,n.lastDay=u;for(var g=0;g<6;g++)n[g]=[];var y=f-m+this.locale.firstDay+1;y>f&&(y-=7),m==this.locale.firstDay&&(y=f-6);for(var v=t([p,d,y,12,a,l]),b=(g=0,0),x=0;g<42;g++,b++,v=t(v).add(24,"hour"))g>0&&b%7==0&&(b=0,x++),n[x][b]=v.clone().hour(s).minute(a).second(l),v.hour(12),this.minDate&&n[x][b].format("YYYY-MM-DD")==this.minDate.format("YYYY-MM-DD")&&n[x][b].isBefore(this.minDate)&&"left"==i&&(n[x][b]=this.minDate.clone()),this.maxDate&&n[x][b].format("YYYY-MM-DD")==this.maxDate.format("YYYY-MM-DD")&&n[x][b].isAfter(this.maxDate)&&"right"==i&&(n[x][b]=this.maxDate.clone());"left"==i?this.leftCalendar.calendar=n:this.rightCalendar.calendar=n;var $="left"==i?this.minDate:this.startDate,w=this.maxDate,_=("left"==i?this.startDate:this.endDate,this.locale.direction,'<table class="table-condensed">');_+="<thead>",_+="<tr>",(this.showWeekNumbers||this.showISOWeekNumbers)&&(_+="<th></th>"),$&&!$.isBefore(n.firstDay)||this.linkedCalendars&&"left"!=i?_+="<th></th>":_+='<th class="prev available"><span></span></th>';var k=this.locale.monthNames[n[1][1].month()]+n[1][1].format(" YYYY");if(this.showDropdowns){for(var S=n[1][1].month(),C=n[1][1].year(),T=w&&w.year()||this.maxYear,M=$&&$.year()||this.minYear,P=C==M,E=C==T,I='<select class="monthselect">',A=0;A<12;A++)(!P||$&&A>=$.month())&&(!E||w&&A<=w.month())?I+="<option value='"+A+"'"+(A===S?" selected='selected'":"")+">"+this.locale.monthNames[A]+"</option>":I+="<option value='"+A+"'"+(A===S?" selected='selected'":"")+" disabled='disabled'>"+this.locale.monthNames[A]+"</option>";I+="</select>";for(var D='<select class="yearselect">',R=M;R<=T;R++)D+='<option value="'+R+'"'+(R===C?' selected="selected"':"")+">"+R+"</option>";k=I+(D+="</select>")}if(_+='<th colspan="5" class="month">'+k+"</th>",w&&!w.isAfter(n.lastDay)||this.linkedCalendars&&"right"!=i&&!this.singleDatePicker?_+="<th></th>":_+='<th class="next available"><span></span></th>',_+="</tr>",_+="<tr>",(this.showWeekNumbers||this.showISOWeekNumbers)&&(_+='<th class="week">'+this.locale.weekLabel+"</th>"),e.each(this.locale.daysOfWeek,(function(t,e){_+="<th>"+e+"</th>"})),_+="</tr>",_+="</thead>",_+="<tbody>",null==this.endDate&&this.maxSpan){var L=this.startDate.clone().add(this.maxSpan).endOf("day");w&&!L.isBefore(w)||(w=L)}for(x=0;x<6;x++){_+="<tr>",this.showWeekNumbers?_+='<td class="week">'+n[x][0].week()+"</td>":this.showISOWeekNumbers&&(_+='<td class="week">'+n[x][0].isoWeek()+"</td>");for(b=0;b<7;b++){var O=[];n[x][b].isSame(new Date,"day")&&O.push("today"),n[x][b].isoWeekday()>5&&O.push("weekend"),n[x][b].month()!=n[1][1].month()&&O.push("off","ends"),this.minDate&&n[x][b].isBefore(this.minDate,"day")&&O.push("off","disabled"),w&&n[x][b].isAfter(w,"day")&&O.push("off","disabled"),this.isInvalidDate(n[x][b])&&O.push("off","disabled"),n[x][b].format("YYYY-MM-DD")==this.startDate.format("YYYY-MM-DD")&&O.push("active","start-date"),null!=this.endDate&&n[x][b].format("YYYY-MM-DD")==this.endDate.format("YYYY-MM-DD")&&O.push("active","end-date"),null!=this.endDate&&n[x][b]>this.startDate&&n[x][b]<this.endDate&&O.push("in-range");var z=this.isCustomDate(n[x][b]);!1!==z&&("string"==typeof z?O.push(z):Array.prototype.push.apply(O,z));var F="",B=!1;for(g=0;g<O.length;g++)F+=O[g]+" ","disabled"==O[g]&&(B=!0);B||(F+="available"),_+='<td class="'+F.replace(/^\s+|\s+$/g,"")+'" data-title="r'+x+"c"+b+'">'+n[x][b].date()+"</td>"}_+="</tr>"}_+="</tbody>",_+="</table>",this.container.find(".drp-calendar."+i+" .calendar-table").html(_)},renderTimePicker:function(t){if("right"!=t||this.endDate){var e,i,n,o=this.maxDate;if(!this.maxSpan||this.maxDate&&!this.startDate.clone().add(this.maxSpan).isBefore(this.maxDate)||(o=this.startDate.clone().add(this.maxSpan)),"left"==t)i=this.startDate.clone(),n=this.minDate;else if("right"==t){i=this.endDate.clone(),n=this.startDate;var r=this.container.find(".drp-calendar.right .calendar-time");if(""!=r.html()&&(i.hour(isNaN(i.hour())?r.find(".hourselect option:selected").val():i.hour()),i.minute(isNaN(i.minute())?r.find(".minuteselect option:selected").val():i.minute()),i.second(isNaN(i.second())?r.find(".secondselect option:selected").val():i.second()),!this.timePicker24Hour)){var s=r.find(".ampmselect option:selected").val();"PM"===s&&i.hour()<12&&i.hour(i.hour()+12),"AM"===s&&12===i.hour()&&i.hour(0)}i.isBefore(this.startDate)&&(i=this.startDate.clone()),o&&i.isAfter(o)&&(i=o.clone())}e='<select class="hourselect">';for(var a=this.timePicker24Hour?0:1,l=this.timePicker24Hour?23:12,c=a;c<=l;c++){var h=c;this.timePicker24Hour||(h=i.hour()>=12?12==c?12:c+12:12==c?0:c);var u=i.clone().hour(h),d=!1;n&&u.minute(59).isBefore(n)&&(d=!0),o&&u.minute(0).isAfter(o)&&(d=!0),h!=i.hour()||d?e+=d?'<option value="'+c+'" disabled="disabled" class="disabled">'+c+"</option>":'<option value="'+c+'">'+c+"</option>":e+='<option value="'+c+'" selected="selected">'+c+"</option>"}e+="</select> ",e+=': <select class="minuteselect">';for(c=0;c<60;c+=this.timePickerIncrement){var p=c<10?"0"+c:c;u=i.clone().minute(c),d=!1;n&&u.second(59).isBefore(n)&&(d=!0),o&&u.second(0).isAfter(o)&&(d=!0),i.minute()!=c||d?e+=d?'<option value="'+c+'" disabled="disabled" class="disabled">'+p+"</option>":'<option value="'+c+'">'+p+"</option>":e+='<option value="'+c+'" selected="selected">'+p+"</option>"}if(e+="</select> ",this.timePickerSeconds){e+=': <select class="secondselect">';for(c=0;c<60;c++){p=c<10?"0"+c:c,u=i.clone().second(c),d=!1;n&&u.isBefore(n)&&(d=!0),o&&u.isAfter(o)&&(d=!0),i.second()!=c||d?e+=d?'<option value="'+c+'" disabled="disabled" class="disabled">'+p+"</option>":'<option value="'+c+'">'+p+"</option>":e+='<option value="'+c+'" selected="selected">'+p+"</option>"}e+="</select> "}if(!this.timePicker24Hour){e+='<select class="ampmselect">';var f="",m="";n&&i.clone().hour(12).minute(0).second(0).isBefore(n)&&(f=' disabled="disabled" class="disabled"'),o&&i.clone().hour(0).minute(0).second(0).isAfter(o)&&(m=' disabled="disabled" class="disabled"'),i.hour()>=12?e+='<option value="AM"'+f+'>AM</option><option value="PM" selected="selected"'+m+">PM</option>":e+='<option value="AM" selected="selected"'+f+'>AM</option><option value="PM"'+m+">PM</option>",e+="</select>"}this.container.find(".drp-calendar."+t+" .calendar-time").html(e)}},updateFormInputs:function(){this.singleDatePicker||this.endDate&&(this.startDate.isBefore(this.endDate)||this.startDate.isSame(this.endDate))?this.container.find("button.applyBtn").prop("disabled",!1):this.container.find("button.applyBtn").prop("disabled",!0)},move:function(){var t,i={top:0,left:0},n=this.drops,o=e(window).width();switch(this.parentEl.is("body")||(i={top:this.parentEl.offset().top-this.parentEl.scrollTop(),left:this.parentEl.offset().left-this.parentEl.scrollLeft()},o=this.parentEl[0].clientWidth+this.parentEl.offset().left),n){case"auto":(t=this.element.offset().top+this.element.outerHeight()-i.top)+this.container.outerHeight()>=this.parentEl[0].scrollHeight&&(t=this.element.offset().top-this.container.outerHeight()-i.top,n="up");break;case"up":t=this.element.offset().top-this.container.outerHeight()-i.top;break;default:t=this.element.offset().top+this.element.outerHeight()-i.top}this.container.css({top:0,left:0,right:"auto"});var r=this.container.outerWidth();if(this.container.toggleClass("drop-up","up"==n),"left"==this.opens){var s=o-this.element.offset().left-this.element.outerWidth();r+s>e(window).width()?this.container.css({top:t,right:"auto",left:9}):this.container.css({top:t,right:s,left:"auto"})}else if("center"==this.opens){(a=this.element.offset().left-i.left+this.element.outerWidth()/2-r/2)<0?this.container.css({top:t,right:"auto",left:9}):a+r>e(window).width()?this.container.css({top:t,left:"auto",right:0}):this.container.css({top:t,left:a,right:"auto"})}else{var a;(a=this.element.offset().left-i.left)+r>e(window).width()?this.container.css({top:t,left:"auto",right:0}):this.container.css({top:t,left:a,right:"auto"})}},show:function(t){this.isShowing||(this._outsideClickProxy=e.proxy((function(t){this.outsideClick(t)}),this),e(document).on("mousedown.daterangepicker",this._outsideClickProxy).on("touchend.daterangepicker",this._outsideClickProxy).on("click.daterangepicker","[data-toggle=dropdown]",this._outsideClickProxy).on("focusin.daterangepicker",this._outsideClickProxy),e(window).on("resize.daterangepicker",e.proxy((function(t){this.move(t)}),this)),this.oldStartDate=this.startDate.clone(),this.oldEndDate=this.endDate.clone(),this.previousRightTime=this.endDate.clone(),this.updateView(),this.container.show(),this.move(),this.element.trigger("show.daterangepicker",this),this.isShowing=!0)},hide:function(t){this.isShowing&&(this.endDate||(this.startDate=this.oldStartDate.clone(),this.endDate=this.oldEndDate.clone()),this.startDate.isSame(this.oldStartDate)&&this.endDate.isSame(this.oldEndDate)||this.callback(this.startDate.clone(),this.endDate.clone(),this.chosenLabel),this.updateElement(),e(document).off(".daterangepicker"),e(window).off(".daterangepicker"),this.container.hide(),this.element.trigger("hide.daterangepicker",this),this.isShowing=!1)},toggle:function(t){this.isShowing?this.hide():this.show()},outsideClick:function(t){var i=e(t.target);"focusin"==t.type||i.closest(this.element).length||i.closest(this.container).length||i.closest(".calendar-table").length||(this.hide(),this.element.trigger("outsideClick.daterangepicker",this))},showCalendars:function(){this.container.addClass("show-calendar"),this.move(),this.element.trigger("showCalendar.daterangepicker",this)},hideCalendars:function(){this.container.removeClass("show-calendar"),this.element.trigger("hideCalendar.daterangepicker",this)},clickRange:function(t){var e=t.target.getAttribute("data-range-key");if(this.chosenLabel=e,e==this.locale.customRangeLabel)this.showCalendars();else{var i=this.ranges[e];this.startDate=i[0],this.endDate=i[1],this.timePicker||(this.startDate.startOf("day"),this.endDate.endOf("day")),this.alwaysShowCalendars||this.hideCalendars(),this.clickApply()}},clickPrev:function(t){e(t.target).parents(".drp-calendar").hasClass("left")?(this.leftCalendar.month.subtract(1,"month"),this.linkedCalendars&&this.rightCalendar.month.subtract(1,"month")):this.rightCalendar.month.subtract(1,"month"),this.updateCalendars()},clickNext:function(t){e(t.target).parents(".drp-calendar").hasClass("left")?this.leftCalendar.month.add(1,"month"):(this.rightCalendar.month.add(1,"month"),this.linkedCalendars&&this.leftCalendar.month.add(1,"month")),this.updateCalendars()},hoverDate:function(t){if(e(t.target).hasClass("available")){var i=e(t.target).attr("data-title"),n=i.substr(1,1),o=i.substr(3,1),r=e(t.target).parents(".drp-calendar").hasClass("left")?this.leftCalendar.calendar[n][o]:this.rightCalendar.calendar[n][o],s=this.leftCalendar,a=this.rightCalendar,l=this.startDate;this.endDate||this.container.find(".drp-calendar tbody td").each((function(t,i){if(!e(i).hasClass("week")){var n=e(i).attr("data-title"),o=n.substr(1,1),c=n.substr(3,1),h=e(i).parents(".drp-calendar").hasClass("left")?s.calendar[o][c]:a.calendar[o][c];h.isAfter(l)&&h.isBefore(r)||h.isSame(r,"day")?e(i).addClass("in-range"):e(i).removeClass("in-range")}}))}},clickDate:function(t){if(e(t.target).hasClass("available")){var i=e(t.target).attr("data-title"),n=i.substr(1,1),o=i.substr(3,1),r=e(t.target).parents(".drp-calendar").hasClass("left")?this.leftCalendar.calendar[n][o]:this.rightCalendar.calendar[n][o];if(this.endDate||r.isBefore(this.startDate,"day")){if(this.timePicker){var s=parseInt(this.container.find(".left .hourselect").val(),10);if(!this.timePicker24Hour)"PM"===(c=this.container.find(".left .ampmselect").val())&&s<12&&(s+=12),"AM"===c&&12===s&&(s=0);var a=parseInt(this.container.find(".left .minuteselect").val(),10);isNaN(a)&&(a=parseInt(this.container.find(".left .minuteselect option:last").val(),10));var l=this.timePickerSeconds?parseInt(this.container.find(".left .secondselect").val(),10):0;r=r.clone().hour(s).minute(a).second(l)}this.endDate=null,this.setStartDate(r.clone())}else if(!this.endDate&&r.isBefore(this.startDate))this.setEndDate(this.startDate.clone());else{if(this.timePicker){var c;s=parseInt(this.container.find(".right .hourselect").val(),10);if(!this.timePicker24Hour)"PM"===(c=this.container.find(".right .ampmselect").val())&&s<12&&(s+=12),"AM"===c&&12===s&&(s=0);a=parseInt(this.container.find(".right .minuteselect").val(),10);isNaN(a)&&(a=parseInt(this.container.find(".right .minuteselect option:last").val(),10));l=this.timePickerSeconds?parseInt(this.container.find(".right .secondselect").val(),10):0;r=r.clone().hour(s).minute(a).second(l)}this.setEndDate(r.clone()),this.autoApply&&(this.calculateChosenLabel(),this.clickApply())}this.singleDatePicker&&(this.setEndDate(this.startDate),!this.timePicker&&this.autoApply&&this.clickApply()),this.updateView(),t.stopPropagation()}},calculateChosenLabel:function(){var t=!0,e=0;for(var i in this.ranges){if(this.timePicker){var n=this.timePickerSeconds?"YYYY-MM-DD HH:mm:ss":"YYYY-MM-DD HH:mm";if(this.startDate.format(n)==this.ranges[i][0].format(n)&&this.endDate.format(n)==this.ranges[i][1].format(n)){t=!1,this.chosenLabel=this.container.find(".ranges li:eq("+e+")").addClass("active").attr("data-range-key");break}}else if(this.startDate.format("YYYY-MM-DD")==this.ranges[i][0].format("YYYY-MM-DD")&&this.endDate.format("YYYY-MM-DD")==this.ranges[i][1].format("YYYY-MM-DD")){t=!1,this.chosenLabel=this.container.find(".ranges li:eq("+e+")").addClass("active").attr("data-range-key");break}e++}t&&(this.showCustomRangeLabel?this.chosenLabel=this.container.find(".ranges li:last").addClass("active").attr("data-range-key"):this.chosenLabel=null,this.showCalendars())},clickApply:function(t){this.hide(),this.element.trigger("apply.daterangepicker",this)},clickCancel:function(t){this.startDate=this.oldStartDate,this.endDate=this.oldEndDate,this.hide(),this.element.trigger("cancel.daterangepicker",this)},monthOrYearChanged:function(t){var i=e(t.target).closest(".drp-calendar").hasClass("left"),n=i?"left":"right",o=this.container.find(".drp-calendar."+n),r=parseInt(o.find(".monthselect").val(),10),s=o.find(".yearselect").val();i||(s<this.startDate.year()||s==this.startDate.year()&&r<this.startDate.month())&&(r=this.startDate.month(),s=this.startDate.year()),this.minDate&&(s<this.minDate.year()||s==this.minDate.year()&&r<this.minDate.month())&&(r=this.minDate.month(),s=this.minDate.year()),this.maxDate&&(s>this.maxDate.year()||s==this.maxDate.year()&&r>this.maxDate.month())&&(r=this.maxDate.month(),s=this.maxDate.year()),i?(this.leftCalendar.month.month(r).year(s),this.linkedCalendars&&(this.rightCalendar.month=this.leftCalendar.month.clone().add(1,"month"))):(this.rightCalendar.month.month(r).year(s),this.linkedCalendars&&(this.leftCalendar.month=this.rightCalendar.month.clone().subtract(1,"month"))),this.updateCalendars()},timeChanged:function(t){var i=e(t.target).closest(".drp-calendar"),n=i.hasClass("left"),o=parseInt(i.find(".hourselect").val(),10),r=parseInt(i.find(".minuteselect").val(),10);isNaN(r)&&(r=parseInt(i.find(".minuteselect option:last").val(),10));var s=this.timePickerSeconds?parseInt(i.find(".secondselect").val(),10):0;if(!this.timePicker24Hour){var a=i.find(".ampmselect").val();"PM"===a&&o<12&&(o+=12),"AM"===a&&12===o&&(o=0)}if(n){var l=this.startDate.clone();l.hour(o),l.minute(r),l.second(s),this.setStartDate(l),this.singleDatePicker?this.endDate=this.startDate.clone():this.endDate&&this.endDate.format("YYYY-MM-DD")==l.format("YYYY-MM-DD")&&this.endDate.isBefore(l)&&this.setEndDate(l.clone())}else if(this.endDate){var c=this.endDate.clone();c.hour(o),c.minute(r),c.second(s),this.setEndDate(c)}this.updateCalendars(),this.updateFormInputs(),this.renderTimePicker("left"),this.renderTimePicker("right")},elementChanged:function(){if(this.element.is("input")&&this.element.val().length){var e=this.element.val().split(this.locale.separator),i=null,n=null;2===e.length&&(i=t(e[0],this.locale.format),n=t(e[1],this.locale.format)),(this.singleDatePicker||null===i||null===n)&&(n=i=t(this.element.val(),this.locale.format)),i.isValid()&&n.isValid()&&(this.setStartDate(i),this.setEndDate(n),this.updateView())}},keydown:function(t){9!==t.keyCode&&13!==t.keyCode||this.hide(),27===t.keyCode&&(t.preventDefault(),t.stopPropagation(),this.hide())},updateElement:function(){if(this.element.is("input")&&this.autoUpdateInput){var t=this.startDate.format(this.locale.format);this.singleDatePicker||(t+=this.locale.separator+this.endDate.format(this.locale.format)),t!==this.element.val()&&this.element.val(t).trigger("change")}},remove:function(){this.container.remove(),this.element.off(".daterangepicker"),this.element.removeData()}},e.fn.daterangepicker=function(t,n){var o=e.extend(!0,{},e.fn.daterangepicker.defaultOptions,t);return this.each((function(){var t=e(this);t.data("daterangepicker")&&t.data("daterangepicker").remove(),t.data("daterangepicker",new i(t,o,n))})),this},i})),function(){"use strict";var t=(t,e,i=[])=>{const n=document.createElement(t),o=Object.getOwnPropertyDescriptors(n.__proto__);for(const t in e)"style"===t?n.style.cssText=e[t]:o[t]&&o[t].set||/textContent|innerHTML/.test(t)||"function"==typeof e[t]?n[t]=e[t]:n.setAttribute(t,e[t]);return i.forEach((t=>n.appendChild(t))),n},e=t=>"string"==typeof t;let i=null;var n=()=>(null===i&&(i="undefined"!=typeof window&&void 0!==window.document),i),o=t=>t.charAt(0).toUpperCase()+t.slice(1),r=t=>t instanceof Blob,s=t=>/^image/.test(t.type);const a=async t=>new Promise((e=>{if("file"===t.kind)return e(t.getAsFile());t.getAsString(e)}));var l=(t,e={})=>{const i=t=>{t.preventDefault()},n=async i=>{i.preventDefault(),i.stopPropagation();try{const n=await(t=>new Promise(((e,i)=>{const{items:n}=t.dataTransfer;if(!n)return e([]);Promise.all(Array.from(n).map(a)).then((t=>{e(t.filter((t=>r(t)&&s(t)||/^http/.test(t))))})).catch(i)})))(i);t.dispatchEvent(new CustomEvent("dropfiles",{detail:{event:i,resources:n},...e}))}catch(t){}};return t.addEventListener("drop",n),t.addEventListener("dragover",i),{destroy(){t.removeEventListener("drop",n),t.removeEventListener("dragover",i)}}};const c={65505:"exif",65504:"jfif",65498:"sos"};var h=t=>{if(65496!==t.getUint16(0))return;const e=Object.keys(c).map((t=>parseInt(t,10))),i=t.byteLength;let n,o,r=2;for(;r<i&&255===t.getUint8(r);){if(n=t.getUint16(r),e.includes(n)){const e=c[n];o||(o={}),o[e]||(o[e]={offset:r,size:t.getUint16(r+2)})}if(65498===n)break;r+=2+t.getUint16(r+2)}return o},u=(t,e,i)=>{if(!t)return;const n=new DataView(t),o=h(n);if(!o||!o.exif)return;const r=((t,e)=>{if(65505!==t.getUint16(e))return;const i=t.getUint16(e+2);if(e+=4,1165519206!==t.getUint32(e))return;e+=6;const n=t.getUint16(e);if(18761!==n&&19789!==n)return;const o=18761===n;if(e+=2,42!==t.getUint16(e,o))return;e+=t.getUint32(e+2,o);const r=n=>{const r=[];let s=e;const a=e+i-16;for(;s<a;s+=12){const e=s;t.getUint16(e,o)===n&&r.push(e)}return r};return{read:e=>{const i=r(e);if(i.length)return t.getUint16(i[0]+8,o)},write:(e,i)=>{const n=r(e);return!!n.length&&(n.forEach((e=>t.setUint16(e+8,i,o))),!0)}}})(n,o.exif.offset);return r?void 0===i?r.read(e):r.write(e,i):void 0};const d="__pqina_webapi__";var p=t=>window[d]?window[d][t]:window[t],f=(...t)=>{};const m={ArrayBuffer:"readAsArrayBuffer"};var g=async(t,e=[0,t.size],i)=>await((t,e=f,i={})=>new Promise(((n,o)=>{const{dataFormat:r=m.ArrayBuffer}=i,s=new(p("FileReader"));s.onload=()=>n(s.result),s.onerror=o,s.onprogress=e,s[r](t)})))(t.slice(...e),i),y=async(t,e)=>{const i=await g(t,[0,131072],e);return u(i,274)||1};let v=null;var b=()=>new Promise((t=>{if(null===v){const e="data:image/jpg;base64,/9j/4AAQSkZJRgABAQEASABIAAD/4QA6RXhpZgAATU0AKgAAAAgAAwESAAMAAAABAAYAAAEoAAMAAAABAAIAAAITAAMAAAABAAEAAAAAAAD/2wBDAP//////////////////////////////////////////////////////////////////////////////////////wAALCAABAAIBASIA/8QAJgABAAAAAAAAAAAAAAAAAAAAAxABAAAAAAAAAAAAAAAAAAAAAP/aAAgBAQAAPwBH/9k=";let i=n()?new Image:{};return i.onload=()=>{v=1===i.naturalWidth,i=void 0,t(v)},void(i.src=e)}return t(v)})),x=t=>t.getContext("2d").getImageData(0,0,t.width,t.height);const $={1:()=>[1,0,0,1,0,0],2:t=>[-1,0,0,1,t,0],3:(t,e)=>[-1,0,0,-1,t,e],4:(t,e)=>[1,0,0,-1,0,e],5:()=>[0,1,1,0,0,0],6:(t,e)=>[0,1,-1,0,e,0],7:(t,e)=>[0,-1,-1,0,e,t],8:t=>[0,-1,1,0,0,t]};var w=t=>{t.width=1,t.height=1;const e=t.getContext("2d");e&&e.clearRect(0,0,1,1)},_=t=>"data"in t,k=async(e,i=1)=>{const[n,o]=await b()||i<5?[e.width,e.height]:[e.height,e.width],r=t("canvas",{width:n,height:o}),s=r.getContext("2d");if(_(e)&&!await b()&&i>1){const i=t("canvas",{width:e.width,height:e.height});i.getContext("2d").putImageData(e,0,0),e=i}return!await b()&&i>1&&s.transform.apply(s,((t,e,i=-1)=>(-1===i&&(i=1),$[i](t,e)))(e.width,e.height,i)),_(e)?s.putImageData(e,0,0):s.drawImage(e,0,0),e instanceof HTMLCanvasElement&&w(e),r},S=async(t,e=1)=>1===e||await b()?t:x(await k(t,e)),C=t=>"object"==typeof t;const T=t=>C(t)?M(t):t,M=t=>{let e;return Array.isArray(t)?(e=[],t.forEach(((t,i)=>{e[i]=T(t)}))):(e={},Object.keys(t).forEach((i=>{const n=t[i];e[i]=T(n)}))),e};var P=t=>"function"==typeof t,E=()=>"createImageBitmap"in window,I=t=>/svg/.test(t.type),A=()=>Math.random().toString(36).substr(2,9);const D=new Map;var R=(t,e,i)=>new Promise(((n,o)=>{const r=t.toString();let s=D.get(r);if(!s){const e=(t=>`function () {self.onmessage = function (message) {(${t.toString()}).apply(null, message.data.content.concat([function (err, response) {\n    response = response || {};\n    const transfer = 'data' in response ? [response.data.buffer] : 'width' in response ? [response] : [];\n    return self.postMessage({ id: message.data.id, content: response, error: err }, transfer);\n}]))}}`)(t),i=URL.createObjectURL((t=>new Blob(["(","function"==typeof t?t.toString():t,")()"],{type:"application/javascript"}))(e)),n=new Map,o=new Worker(i);s={url:i,worker:o,messages:n,terminationTimeout:void 0,terminate:()=>{clearTimeout(s.terminationTimeout),s.worker.terminate(),URL.revokeObjectURL(i),D.delete(r)}},o.onmessage=function(t){const{id:e,content:i,error:o}=t.data;if(clearTimeout(s.terminationTimeout),s.terminationTimeout=setTimeout((()=>{n.size>0||s.terminate()}),500),!n.has(e))return;const r=n.get(e);n.delete(e),null!=o?r.reject(o):r.resolve(i)},D.set(r,s)}const a=A();s.messages.set(a,{resolve:n,reject:o}),s.worker.postMessage({id:a,content:e},i)})),L=async(e,i)=>{let n;if(E()&&!I(e)&&"OffscreenCanvas"in window)try{n=await R(((t,e,i)=>{createImageBitmap(t).then((t=>{let n=t.width,o=t.height;const r=n*o;if(e&&r>e){const t=Math.sqrt(e)/Math.sqrt(r);n=Math.floor(n*t),o=Math.floor(o*t)}const s=new OffscreenCanvas(n,o),a=s.getContext("2d");a.drawImage(t,0,0,n,o);const l=a.getImageData(0,0,s.width,s.height);i(null,l)})).catch((t=>{i(t)}))}),[e,i])}catch(t){}if(!n||!n.width){const o=await(async(e,i)=>{const n=t("img",{src:URL.createObjectURL(e)}),o=await((e,i)=>new Promise(((n,o)=>{const r=()=>n(((e,{width:i,height:n,canvasMemoryLimit:o})=>{let r=i||e.naturalWidth,s=n||e.naturalHeight;r||s||(r=300,s=150);const a=r*s;if(o&&a>o){const t=Math.sqrt(o)/Math.sqrt(a);r=Math.floor(r*t),s=Math.floor(s*t)}const l=t("canvas");return l.width=r,l.height=s,l.getContext("2d").drawImage(e,0,0,r,s),l})(e,i));e.complete&&e.width?r():(e.onload=r,e.onerror=o)})))(n,{canvasMemoryLimit:i});return URL.revokeObjectURL(n.src),o})(e,i);n=x(o),w(o)}return n},O=(t,e,i)=>new Promise(((n,o)=>{try{t.toBlob((t=>{n(t)}),e,i)}catch(t){o(t)}})),z=async(t,e,i)=>{const n=await k(t),o=await O(n,e,i);return w(n),o},F=t=>(t.match(/\/([a-z]+)/)||[])[1],B=t=>t.substr(0,t.lastIndexOf("."))||t;const N=/avif|bmp|gif|jpg|jpeg|jpe|jif|jfif|png|svg|tiff|webp/;var H=t=>{return t&&(e=(i=t,i.split(".").pop()).toLowerCase(),N.test(e)?"image/"+(/jfif|jif|jpe|jpg/.test(e)?"jpeg":"svg"===e?"svg+xml":e):"");var e,i},W=(t,e,i)=>{const n=(new Date).getTime(),o=t.type.length&&!/null|text/.test(t.type),r=o?t.type:i,s=((t,e)=>{const i=H(t);if(i===e)return t;const n=F(e)||i;return`${B(t)}.${n}`})(e,r);try{return new(p("File"))([t],s,{lastModified:n,type:o?t.type:r})}catch(e){const i=o?t.slice():t.slice(0,t.size,r);return i.lastModified=n,i.name=s,i}},j=(t,e)=>t/e,Y=t=>t;const V=Math.PI,U=Math.PI/2,q=U/2;var X=t=>{const e=Math.abs(t)%Math.PI;return e>q&&e<Math.PI-q};const G=(t,e,i)=>i+(t-i)*e,Z=t=>({x:t.x+.5*t.width,y:t.y+.5*t.height,rx:.5*t.width,ry:.5*t.height}),K=()=>Q(0,0),Q=(t,e)=>({x:t,y:e}),J=t=>Q(t.x,t.y),tt=t=>Q(t.pageX,t.pageY),et=t=>Q(t.x,t.y),it=t=>(t.x=-t.x,t.y=-t.y,t),nt=(t,e,i=K())=>{const n=Math.cos(e),o=Math.sin(e),r=t.x-i.x,s=t.y-i.y;return t.x=i.x+n*r-o*s,t.y=i.y+o*r+n*s,t},ot=t=>Math.sqrt(t.x*t.x+t.y*t.y),rt=t=>{const e=Math.sqrt(t.x*t.x+t.y*t.y);return 0===e?K():(t.x/=e,t.y/=e,t)},st=(t,e)=>Math.atan2(e.y-t.y,e.x-t.x),at=(t,e)=>t.x===e.x&&t.y===e.y,lt=(t,e)=>(t.x=e(t.x),t.y=e(t.y),t),ct=(t,e)=>(t.x+=e.x,t.y+=e.y,t),ht=(t,e)=>(t.x-=e.x,t.y-=e.y,t),ut=(t,e)=>(t.x*=e,t.y*=e,t),dt=(t,e)=>t.x*e.x+t.y*e.y,pt=(t,e=K())=>{const i=t.x-e.x,n=t.y-e.y;return i*i+n*n},ft=(t,e=K())=>Math.sqrt(pt(t,e)),mt=(t,e,i)=>(t.x=G(t.x,e,i.x),t.y=G(t.y,e,i.y),t),gt=t=>{let e=0,i=0;return t.forEach((t=>{e+=t.x,i+=t.y})),Q(e/t.length,i/t.length)},yt=(t,e,i,n,o)=>(t.forEach((t=>{t.x=e?n-(t.x-n):t.x,t.y=i?o-(t.y-o):t.y})),t),vt=(t,e,i,n)=>{const o=Math.sin(e),r=Math.cos(e);return t.forEach((t=>{t.x-=i,t.y-=n;const e=t.x*r-t.y*o,s=t.x*o+t.y*r;t.x=i+e,t.y=n+s})),t},bt=(t,e)=>({width:t,height:e}),xt=t=>bt(t.width,t.height),$t=t=>bt(t.width,t.height),wt=t=>bt(t.width,t.height),_t=t=>bt(t[0],t[1]),kt=t=>{return/img/i.test(t.nodeName)?bt((e=t).naturalWidth,e.naturalHeight):$t(t);var e},St=(t,e)=>bt(t,e),Ct=(t,e,i=Y)=>i(t.width)===i(e.width)&&i(t.height)===i(e.height),Tt=(t,e)=>(t.width*=e,t.height*=e,t),Mt=t=>Q(.5*t.width,.5*t.height),Pt=(t,e)=>{const i=Math.abs(e),n=Math.cos(i),o=Math.sin(i),r=n*t.width+o*t.height,s=o*t.width+n*t.height;return t.width=r,t.height=s,t},Et=(t,e)=>t.width>=e.width&&t.height>=e.height,It=(t,e)=>(t.width=e(t.width),t.height=e(t.height),t),At=(t,e)=>({start:t,end:e}),Dt=t=>At(et(t.start),et(t.end)),Rt=(t,e)=>{if(0===e)return t;const i=Q(t.start.x-t.end.x,t.start.y-t.end.y),n=rt(i),o=ut(n,e);return t.start.x+=o.x,t.start.y+=o.y,t.end.x-=o.x,t.end.y-=o.y,t},Lt=[Q(-1,-1),Q(-1,1),Q(1,1),Q(1,-1)],Ot=(t,e,i,n)=>({x:t,y:e,width:i,height:n}),zt=t=>Ot(t.x,t.y,t.width,t.height),Ft=()=>Ot(0,0,0,0),Bt=t=>Ot(0,0,t.width,t.height),Nt=t=>Ot(t.x||0,t.y||0,t.width||0,t.height||0),Ht=t=>{let e=t[0].x,i=t[0].x,n=t[0].y,o=t[0].y;return t.forEach((t=>{e=Math.min(e,t.x),i=Math.max(i,t.x),n=Math.min(n,t.y),o=Math.max(o,t.y)})),Ot(e,n,i-e,o-n)},Wt=t=>Yt(t.x-t.rx,t.y-t.ry,2*t.rx,2*t.ry),jt=(t,e)=>Ot(t.x-.5*e.width,t.y-.5*e.height,e.width,e.height),Yt=(t,e,i,n)=>Ot(t,e,i,n),Vt=t=>Q(t.x+.5*t.width,t.y+.5*t.height),Ut=(t,e)=>(t.x+=e.x,t.y+=e.y,t),qt=(t,e,i)=>(i=i||Vt(t),t.x=e*(t.x-i.x)+i.x,t.y=e*(t.y-i.y)+i.y,t.width=e*t.width,t.height=e*t.height,t),Xt=(t,e)=>(t.x*=e,t.y*=e,t.width*=e,t.height*=e,t),Gt=(t,e)=>(t.x/=e,t.y/=e,t.width/=e,t.height/=e,t),Zt=(t,e,i=Y)=>i(t.x)===i(e.x)&&i(t.y)===i(e.y)&&i(t.width)===i(e.width)&&i(t.height)===i(e.height),Kt=t=>j(t.width,t.height),Qt=(t,e,i,n,o)=>(t.x=e,t.y=i,t.width=n,t.height=o,t),Jt=(t,e)=>(t.x=e.x,t.y=e.y,t.width=e.width,t.height=e.height,t),te=(t,e,i)=>(i||(i=Vt(t)),se(t).map((t=>nt(t,e,i)))),ee=(t,e)=>Ot(.5*t.width-.5*e.width,.5*t.height-.5*e.height,e.width,e.height),ie=(t,e)=>!(e.x<t.x||e.y<t.y||e.x>t.x+t.width||e.y>t.y+t.height),ne=(t,e,i=K())=>{if(0===t.width||0===t.height)return Ft();const n=Kt(t);e||(e=n);let o=t.width,r=t.height;return e>n?o=r*e:r=o/e,Ot(i.x+.5*(t.width-o),i.y+.5*(t.height-r),o,r)},oe=(t,e=Kt(t),i=K())=>{if(0===t.width||0===t.height)return Ft();let n=t.width,o=n/e;return o>t.height&&(o=t.height,n=o*e),Ot(i.x+.5*(t.width-n),i.y+.5*(t.height-o),n,o)},re=t=>[Math.min(t.y,t.y+t.height),Math.max(t.x,t.x+t.width),Math.max(t.y,t.y+t.height),Math.min(t.x,t.x+t.width)],se=t=>[Q(t.x,t.y),Q(t.x+t.width,t.y),Q(t.x+t.width,t.y+t.height),Q(t.x,t.y+t.height)],ae=(t,e)=>{if(t)return t.x=e(t.x),t.y=e(t.y),t.width=e(t.width),t.height=e(t.height),t},le=(t,e,i=Vt(t))=>se(t).map(((t,n)=>{const o=Lt[n];return Q(G(t.x,1+o.x*e.x,i.x),G(t.y,1+o.y*e.y,i.y))})),ce=t=>(t.x=0,t.y=0,t),he=t=>{const e=t[0],i=t[t.length-1];t=at(e,i)?t:[...t,e];const n=e.x,o=e.y;let r,s,a,l=0,c=0,h=0,u=0;const d=t.length;for(;c<d;c++)r=t[c],s=t[c+1>d-1?0:c+1],a=(r.y-o)*(s.x-n)-(s.y-o)*(r.x-n),l+=a,h+=(r.x+s.x-2*n)*a,u+=(r.y+s.y-2*o)*a;return a=3*l,Q(n+h/a,o+u/a)},ue=(t,e)=>de(t.start,t.end,e.start,e.end),de=(t,e,i,n)=>{const o=(n.y-i.y)*(e.x-t.x)-(n.x-i.x)*(e.y-t.y);if(0===o)return;const r=((n.x-i.x)*(t.y-i.y)-(n.y-i.y)*(t.x-i.x))/o,s=((e.x-t.x)*(t.y-i.y)-(e.y-t.y)*(t.x-i.x))/o;return r<0||r>1||s<0||s>1?void 0:Q(t.x+r*(e.x-t.x),t.y+r*(e.y-t.y))},pe=(t,e)=>{let i=0,n=0,o=!1;const r=e.length;for(i=0,n=r-1;i<r;n=i++)e[i].y>t.y!=e[n].y>t.y&&t.x<(e[n].x-e[i].x)*(t.y-e[i].y)/(e[n].y-e[i].y)+e[i].x&&(o=!o);return o},fe=t=>{const e=[];for(let i=0;i<t.length;i++){let n=i+1;n===t.length&&(n=0),e.push(At(et(t[i]),et(t[n])))}return e},me=(t,e,i,n=0,o=!1,r=!1,s=12)=>{const a=[];for(let n=0;n<s;n++)a.push(Q(t.x+e*Math.cos(n*(2*Math.PI)/s),t.y+i*Math.sin(n*(2*Math.PI)/s)));return(o||r)&&yt(a,o,r,t.x,t.y),n&&vt(a,n,t.x,t.y),a};var ge=(t,e)=>t instanceof HTMLElement&&(!e||new RegExp(`^${e}$`,"i").test(t.nodeName)),ye=t=>t instanceof File,ve=t=>t.split("/").pop().split(/\?|\#/).shift();const be=n()&&Node.prototype.replaceChildren?(t,e)=>t.replaceChildren(e):(t,e)=>{for(;t.lastChild;)t.removeChild(t.lastChild);void 0!==e&&t.append(e)},xe=n()&&t("div",{class:"PinturaMeasure",style:"pointer-events:none;left:0;top:0;width:0;height:0;contain:strict;overflow:hidden;position:absolute;"});let $e;var we=t=>(be(xe,t),xe.parentNode||document.body.append(xe),clearTimeout($e),$e=setTimeout((()=>{xe.remove()}),500),t);let _e=null;var ke=()=>(null===_e&&(_e=n()&&/^((?!chrome|android).)*safari/i.test(navigator.userAgent)),_e),Se=t=>new Promise(((e,i)=>{let n=!1;!t.parentNode&&ke()&&(n=!0,t.style.cssText="position:absolute;visibility:hidden;pointer-events:none;left:0;top:0;width:0;height:0;",we(t));const o=()=>{const i=t.naturalWidth,o=t.naturalHeight;i&&o&&(n&&t.remove(),clearInterval(r),e({width:i,height:o}))};t.onerror=t=>{clearInterval(r),i(t)};const r=setInterval(o,1);o()})),Ce=async t=>{let i,n=t;n.src||(n=new Image,n.src=e(t)?t:URL.createObjectURL(t));try{i=await Se(n)}finally{ye(t)&&URL.revokeObjectURL(n.src)}return i},Te=(t=0,e=!0)=>new(p("ProgressEvent"))("progress",{loaded:100*t,total:100,lengthComputable:e}),Me=(t,e,i=(t=>t))=>t.getAllResponseHeaders().indexOf(e)>=0?i(t.getResponseHeader(e)):void 0,Pe=t=>{if(!t)return null;const e=t.split(/filename=|filename\*=.+''/).splice(1).map((t=>t.trim().replace(/^["']|[;"']{0,2}$/g,""))).filter((t=>t.length));return e.length?decodeURI(e[e.length-1]):null};class Ee extends Error{constructor(t,e,i){super(t),this.name="EditorError",this.code=e,this.metadata=i}}var Ie=async(t,i)=>{if(ye(t)||(n=t)instanceof Blob&&!(n instanceof File))return t;if(e(t))return await((t,e)=>/^data:/.test(t)?(async(t,e="data-uri",i=f)=>{i(Te(0));const n=await fetch(t);i(Te(.33));const o=await n.blob();let r;s(o)||(r="image/"+(t.includes(",/9j/")?"jpeg":"png")),i(Te(.66));const a=W(o,e,r);return i(Te(1)),a})(t,void 0,e):((t,e)=>new Promise(((i,n)=>{const o=()=>n(new Ee("Error fetching image","URL_REQUEST",r)),r=new XMLHttpRequest;r.onprogress=e,r.onerror=o,r.onload=()=>{if(!r.response||r.status>=300||r.status<200)return o();const e=Me(r,"Content-Type"),n=Me(r,"Content-Disposition",Pe)||ve(t);i(W(r.response,n,e||H(n)))},r.open("GET",t),r.responseType="blob",r.send()})))(t,e))(t,i);if(ge(t,"canvas"))return await(async(t,e,i)=>{const n=await O(t,void 0,void 0);return W(n,"canvas")})(t);if(ge(t,"img"))return await(async t=>{try{const e=await Ce(t),i=await(t=>new Promise(((e,i)=>{if(t.complete)return e(t);t.onload=()=>e(t),t.onerror=i})))(t),n=document.createElement("canvas");n.width=e.width,n.height=e.height,n.getContext("2d").drawImage(i,0,0);const o=await O(n);return W(o,ve(i.src))}catch(t){throw t}})(t);throw new Ee("Invalid image source","invalid-image-source");var n};let Ae=null;var De=()=>(null===Ae&&(Ae=n()&&/^mac/i.test(navigator.platform)),Ae),Re=t=>n()?RegExp(t).test(window.navigator.userAgent):void 0;let Le=null;var Oe=()=>(null===Le&&(Le=n()&&(Re(/iPhone|iPad|iPod/)||De()&&navigator.maxTouchPoints>=1)),Le),ze=async(t,e=1)=>await b()||Oe()||e<5?t:St(t.height,t.width),Fe=t=>/jpeg/.test(t.type),Be=t=>{return"object"!=typeof(e=t)||e.constructor!=Object?t:JSON.stringify(t);var e},Ne=(t,e=0,i)=>(0===e||(t.translate(i.x,i.y),t.rotate(e),t.translate(-i.x,-i.y)),t),He=async(e,i={})=>{const{flipX:n,flipY:o,rotation:r,crop:s}=i,a=$t(e),l=n||o,c=!!r,h=s&&(s.x||s.y||s.width||s.height),u=h&&Zt(s,Bt(a)),d=h&&!u;if(!l&&!c&&!d)return e;let p,f=t("canvas",{width:e.width,height:e.height});if(f.getContext("2d").putImageData(e,0,0),l){const e=t("canvas",{width:f.width,height:f.height}).getContext("2d");((t,e,i)=>{t.scale(e,i)})(e,n?-1:1,o?-1:1),e.drawImage(f,n?-f.width:0,o?-f.height:0),e.restore(),w(f),f=e.canvas}if(c){const e=It(wt(Ht(te(Nt(f),r))),Math.floor),i=t("canvas",{width:s.width,height:s.height}).getContext("2d");((t,e,i)=>{t.translate(e,i)})(i,-s.x,-s.y),Ne(i,r,Mt(e)),i.drawImage(f,.5*(e.width-f.width),.5*(e.height-f.height)),i.restore(),w(f),f=i.canvas}else if(d)return p=f.getContext("2d").getImageData(s.x,s.y,s.width,s.height),w(f),p;return p=f.getContext("2d").getImageData(0,0,f.width,f.height),w(f),p},We=(t,e)=>{const{imageData:i,width:n,height:o}=t,r=i.width,s=i.height,a=Math.round(n),l=Math.round(o),c=i.data,h=new Uint8ClampedArray(a*l*4),u=r/a,d=s/l,p=Math.ceil(.5*u),f=Math.ceil(.5*d);for(let t=0;t<l;t++)for(let e=0;e<a;e++){const i=4*(e+t*a);let n=0,o=0,s=0,l=0,m=0,g=0,y=0;const v=(t+.5)*d;for(let i=Math.floor(t*d);i<(t+1)*d;i++){const t=Math.abs(v-(i+.5))/f,a=(e+.5)*u,h=t*t;for(let t=Math.floor(e*u);t<(e+1)*u;t++){let e=Math.abs(a-(t+.5))/p;const u=Math.sqrt(h+e*e);if(u<-1||u>1)continue;if(n=2*u*u*u-3*u*u+1,n<=0)continue;e=4*(t+i*r);const d=c[e+3];y+=n*d,s+=n,d<255&&(n=n*d/250),l+=n*c[e],m+=n*c[e+1],g+=n*c[e+2],o+=n}}h[i]=l/o,h[i+1]=m/o,h[i+2]=g/o,h[i+3]=y/s}e(null,{data:h,width:a,height:l})},je=e=>{if(e instanceof ImageData)return e;let i;try{i=new ImageData(e.width,e.height)}catch(n){i=t("canvas").getContext("2d").createImageData(e.width,e.height)}return i.data.set(e.data),i},Ye=async(t,e={},i)=>{const{width:n,height:o,fit:r,upscale:s}=e;if(!n&&!o)return t;let a=n,l=o;if(n?o||(l=n):a=o,"force"!==r){const e=a/t.width,i=l/t.height;let n=1;if("cover"===r?n=Math.max(e,i):"contain"===r&&(n=Math.min(e,i)),n>1&&!1===s)return t;a=Math.round(t.width*n),l=Math.round(t.height*n)}return a=Math.max(a,1),l=Math.max(l,1),t.width===a&&t.height===l?t:i?i(t,a,l):(t=await R(We,[{imageData:t,width:a,height:l}],[t.data.buffer]),je(t))},Ve=(t,e)=>{const{imageData:i,matrix:n}=t;if(!n)return e(null,i);const o=new Uint8ClampedArray(i.width*i.height*4),r=i.data,s=r.length,a=n[0],l=n[1],c=n[2],h=n[3],u=n[4],d=n[5],p=n[6],f=n[7],m=n[8],g=n[9],y=n[10],v=n[11],b=n[12],x=n[13],$=n[14],w=n[15],_=n[16],k=n[17],S=n[18],C=n[19];let T=0,M=0,P=0,E=0,I=0,A=0,D=0,R=0,L=0,O=0,z=0,F=0;for(;T<s;T+=4)M=r[T]/255,P=r[T+1]/255,E=r[T+2]/255,I=r[T+3]/255,A=M*a+P*l+E*c+I*h+u,D=M*d+P*p+E*f+I*m+g,R=M*y+P*v+E*b+I*x+$,L=M*w+P*_+E*k+I*S+C,O=Math.max(0,A*L)+(1-L),z=Math.max(0,D*L)+(1-L),F=Math.max(0,R*L)+(1-L),o[T]=255*Math.max(0,Math.min(1,O)),o[T+1]=255*Math.max(0,Math.min(1,z)),o[T+2]=255*Math.max(0,Math.min(1,F)),o[T+3]=255*I;e(null,{data:o,width:i.width,height:i.height})},Ue=(t,e)=>{const{imageData:i,matrix:n}=t;if(!n)return e(null,i);let o=n.reduce(((t,e)=>t+e));o=o<=0?1:o;const r=i.width,s=i.height,a=i.data;let l=0,c=0,h=0;const u=Math.round(Math.sqrt(n.length)),d=Math.floor(u/2);let p=0,f=0,m=0,g=0,y=0,v=0,b=0,x=0,$=0,w=0;const _=new Uint8ClampedArray(r*s*4);for(h=0;h<s;h++)for(c=0;c<r;c++){for(p=0,f=0,m=0,g=0,v=0;v<u;v++)for(y=0;y<u;y++)b=h+v-d,x=c+y-d,b<0&&(b=s-1),b>=s&&(b=0),x<0&&(x=r-1),x>=r&&(x=0),$=4*(b*r+x),w=n[v*u+y],p+=a[$]*w,f+=a[$+1]*w,m+=a[$+2]*w,g+=a[$+3]*w;_[l]=p/o,_[l+1]=f/o,_[l+2]=m/o,_[l+3]=g/o,l+=4}e(null,{data:_,width:r,height:s})},qe=(t,e)=>{let{imageData:i,strength:n}=t;if(!n)return e(null,i);const o=new Uint8ClampedArray(i.width*i.height*4),r=i.width,s=i.height,a=i.data,l=(t,e)=>(c=t-w,h=e-_,Math.sqrt(c*c+h*h));let c,h,u,d,p,f,m,g,y,v,b,x=0,$=0,w=.5*r,_=.5*s,k=l(0,0);for(n>0?(u=0,d=0,p=0):(n=Math.abs(n),u=1,d=1,p=1),$=0;$<s;$++)for(x=0;x<r;x++)S=4*(x+$*r),C=a,T=o,M=l(x,$)*n/k,f=C[S]/255,m=C[S+1]/255,g=C[S+2]/255,y=C[S+3]/255,v=1-M,b=v*y+M,T[S]=(v*y*f+M*u)/b*255,T[S+1]=(v*y*m+M*d)/b*255,T[S+2]=(v*y*g+M*p)/b*255,T[S+3]=255*b;var S,C,T,M;e(null,{data:o,width:i.width,height:i.height})},Xe=(t,e)=>{const{imageData:i,level:n,monochrome:o=!1}=t;if(!n)return e(null,i);const r=new Uint8ClampedArray(i.width*i.height*4),s=i.data,a=s.length;let l,c,h,u=0;const d=()=>255*(2*Math.random()-1)*n,p=o?()=>{const t=d();return[t,t,t]}:()=>[d(),d(),d()];for(;u<a;u+=4)[l,c,h]=p(),r[u]=s[u]+l,r[u+1]=s[u+1]+c,r[u+2]=s[u+2]+h,r[u+3]=s[u+3];e(null,{data:r,width:i.width,height:i.height})},Ge=(t,e)=>{const{imageData:i,level:n}=t;if(!n)return e(null,i);const o=new Uint8ClampedArray(i.width*i.height*4),r=i.data,s=r.length;let a,l,c,h=0;for(;h<s;h+=4)a=r[h]/255,l=r[h+1]/255,c=r[h+2]/255,o[h]=255*Math.pow(a,n),o[h+1]=255*Math.pow(l,n),o[h+2]=255*Math.pow(c,n),o[h+3]=r[h+3];e(null,{data:o,width:i.width,height:i.height})},Ze=async(t,e={})=>{const{colorMatrix:i,convolutionMatrix:n,gamma:o,noise:r,vignette:s}=e,a=[];if(n&&a.push([Ue,{matrix:n.clarity}]),o>0&&a.push([Ge,{level:1/o}]),i&&!(t=>{const e=t.length;let i;const n=e>=20?6:e>=16?5:3;for(let o=0;o<e;o++){if(i=t[o],1===i&&o%n!=0)return!1;if(0!==i&&1!==i)return!1}return!0})(i)&&a.push([Ve,{matrix:i}]),(r>0||r<0)&&a.push([Xe,{level:r}]),(s>0||s<0)&&a.push([qe,{strength:s}]),!a.length)return t;const l=(t,e)=>`(err, imageData) => {\n            (${t[e][0].toString()})(Object.assign({ imageData: imageData }, filterInstructions[${e}]), \n                ${t[e+1]?l(t,e+1):"done"})\n        }`,c=`function (options, done) {\n        const filterInstructions = options.filterInstructions;\n        const imageData = options.imageData;\n        (${l(a,0)})(null, imageData)\n    }`;return t=await R(c,[{imageData:t,filterInstructions:a.map((t=>t[1]))}],[t.data.buffer]),je(t)},Ke=t=>"number"==typeof t,Qe=t=>e(t)&&null!==t.match(/(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff]|[\u0023-\u0039]\ufe0f?\u20e3|\u3299|\u3297|\u303d|\u3030|\u24c2|\ud83c[\udd70-\udd71]|\ud83c[\udd7e-\udd7f]|\ud83c\udd8e|\ud83c[\udd91-\udd9a]|\ud83c[\udde6-\uddff]|\ud83c[\ude01-\ude02]|\ud83c\ude1a|\ud83c\ude2f|\ud83c[\ude32-\ude3a]|\ud83c[\ude50-\ude51]|\u203c|\u2049|[\u25aa-\u25ab]|\u25b6|\u25c0|[\u25fb-\u25fe]|\u00a9|\u00ae|\u2122|\u2139|\ud83c\udc04|[\u2600-\u26FF]|\u2b05|\u2b06|\u2b07|\u2b1b|\u2b1c|\u2b50|\u2b55|\u231a|\u231b|\u2328|\u23cf|[\u23e9-\u23f3]|[\u23f8-\u23fa]|\ud83c\udccf|\u2934|\u2935|[\u2190-\u21ff])/g),Je=(t,e)=>t.hasOwnProperty(e),ti=t=>Array.isArray(t);let ei=64,ii=102,ni=112,oi=!1;var ri=(t,e)=>(!oi&&n()&&(/^win/i.test(navigator.platform)&&(ii=103),(Oe()||De())&&(ei=63.5,ii=110,ni=123),oi=!0),`<svg${e?` aria-label="${e}"`:""} width="128" height="128" viewBox="0 0 128 128" preserveAspectRatio="xMinYMin meet" xmlns="http://www.w3.org/2000/svg"><text x="${ei}" y="${ii}" alignment-baseline="text-top" dominant-baseline="text-top" text-anchor="middle" font-size="${ni}px">${t}</text></svg>`),si=(t,e)=>t/e*100+"%",ai=t=>`rgba(${Math.round(255*t[0])}, ${Math.round(255*t[1])}, ${Math.round(255*t[2])}, ${Ke(t[3])?t[3]:1})`,li=t=>Object.values(t).join("_");const ci=async(e,i=0)=>{const n=t("canvas",{width:80,height:80}).getContext("2d");return await((t=0)=>new Promise((e=>{setTimeout(e,t)})))(i),n.drawImage(e,0,0,80,80),!((t=>!new Uint32Array(t.getImageData(0,0,t.canvas.width,t.canvas.height).data.buffer).some((t=>0!==t)))(n)&&i<=256)||await ci(e,i+16)},hi=new Map;var ui=t=>new Promise(((e,i)=>{const n=new FileReader;n.onerror=i,n.onload=()=>e(n.result),n.readAsDataURL(t)})),di=()=>{let t=[];return{sub:(e,i)=>(t.push({event:e,callback:i}),()=>t=t.filter((t=>t.event!==e||t.callback!==i))),pub:(e,i)=>{t.filter((t=>t.event===e)).forEach((t=>t.callback(i)))}}};const pi=32,fi=({color:t=[0,0,0],fontSize:e=16,fontFamily:i="sans-serif",fontVariant:n="normal",fontWeight:o="normal",fontStyle:r="normal",textAlign:s="left",lineHeight:a=20})=>`font-size:${e}px;font-style:${r};font-weight:${o};font-family:${i};font-variant:${n};line-height:${a}px;text-align:${s};color:${ai(t)};`,mi=t=>{const{width:e,height:i}=t,n=!e,o=n?"normal":"break-word",r=n?"nowrap":"pre-line";return`max-width:none;min-width:auto;width:${n?"auto":e+"px"};height:${i?i+"px":"auto"};margin-top:0;margin-bottom:0;padding-top:${(({fontSize:t=16,lineHeight:e=20}={})=>.5*Math.max(0,t-e))(t)}px;word-break:${o};word-wrap:normal;white-space:${r};overflow:visible;`},gi=new Map,yi=new Map,vi=(e="",i)=>{const{width:n=0,height:o=0}=i;if(n&&o)return St(n,o);const{fontSize:r,fontFamily:s,lineHeight:a,fontWeight:l,fontStyle:c,fontVariant:h}=i,u=li({text:e,fontFamily:s,fontWeight:l,fontStyle:c,fontVariant:h,fontSize:r,lineHeight:a,width:n});let d=yi.get(u);if(d)return d;const p=we(t("pre",{contenteditable:"true",spellcheck:"false",style:`pointer-events:none;visibility:hidden;position:absolute;${fi(i)};${mi(i)}"`,innerHTML:e},[t("span")])).getBoundingClientRect();return d=$t(p),d.height+=Math.max(0,r-a),yi.set(u,d),d},bi=new Map,xi=new Map,$i=t=>t.filter((t=>t instanceof CSSFontFaceRule)),wi=async(e,i=(()=>!0))=>{if(xi.has(e.href))return xi.get(e.href);let n;try{n=$i(Array.from(e.cssRules))}catch(o){const r=e.href;if(!i(r))return xi.set(r,[]),[];n=$i(await(async e=>{let i;try{i=await(t=>new Promise(((e,i)=>{let n=bi.get(t);n||(n=(t=>{const{sub:e,pub:i}=di();let n,o;return fetch(t).then((t=>t.text())).then((t=>{n=t,i("load",n)})).catch((t=>{o=t,i("error",o)})),{sub:(t,i)=>"load"===t&&n?i(n):"error"===t&&o?i(o):void e(t,i)}})(t),bi.set(t,n)),n.sub("load",e),n.sub("error",i)})))(e)}catch(t){return[]}const n=t("style",{innerHTML:i,id:A()});document.head.append(n);const o=Array.from(document.styleSheets).find((t=>t.ownerNode.id===n.id));return n.remove(),Array.from(o.cssRules)})(r)),xi.set(r,n)}return n},_i=(t,e)=>t.style.getPropertyValue(e),ki=(t,e)=>_i(t,"font-family").replace(/^"|"$/g,"")==e,Si=new Map,Ci=new Map;var Ti=async(t="",e)=>{if(!t.length)return;const{imageWidth:i=300,imageHeight:n=150,paddingLeft:o=pi,paddingRight:r=pi,fontFamily:s,pixelRatio:a=1,willRequestResource:l}=e,c=(i+o+r)*a,h=n*a,u=fi(e),d=mi(e),p=await(async(t,e)=>{if(Si.get(t))return;let i=Ci.get(t);if(!i){const o=await(async(t,e)=>{const i=((t,e)=>{const i=[];for(const n of t)ki(n,e)&&i.push(n);return i})(await(async t=>{const e=Array.from(document.styleSheets).map((e=>wi(e,t))),i=await Promise.all(e),n=[];return i.forEach((t=>n.push(...t))),n})(e),t);return i.length?i.map((t=>{const e=t.parentStyleSheet.href&&new URL(t.parentStyleSheet.href),i=e?e.origin+(t=>t.pathname.split("/").slice(0,-1).join("/"))(e)+"/":"",n=t.style.getPropertyValue("src").match(/url\("?(.*?)"?\)/)[1],o=Array.from(t.style).filter((t=>"src"!=t)).reduce(((e,i)=>e+(i+":")+_i(t,i)+";"),"");return[/^http/.test(n)?n:i+n,o]})):[]})(t,e);if(!o.length)return void Si.set(t,!0);const r=[];for(const[t,e]of o){const i=await fetch(t).then((t=>t.blob())),o=!(n=i.type)||/woff2/.test(n)?"woff2":/woff/.test(n)?"woff":/ttf|truetype/.test(n)?"truetype":/otf|opentype/.test(n)?"opentype":/svg/.test(n)?"svg":"woff2",s=await ui(i);r.push(`@font-face { src:url(${s}) format('${o}');${e};font-display:block; }`)}i=r.join(""),Ci.set(t,i)}var n;return i})(s,l);return((t,{safariCacheKey:e="*"}={})=>new Promise(((i,n)=>{const o=new Image;o.onerror=n,o.onload=()=>{if(!ke()||!t.includes("@font-face")||hi.has(e))return i(o);ci(o).then((()=>{hi.set(e,!0),i(o)}))},o.src="data:image/svg+xml,"+t})))(`<svg xmlns="http://www.w3.org/2000/svg" width="${c}" height="${h}" viewBox="0 0 ${c} ${h}"><foreignObject x="0" y="0" width="${c}" height="${h}"><div xmlns="http://www.w3.org/1999/xhtml" style="transform-origin:0 0;transform:scale(${a})">${p?`<style>${p}</style>`:""}<pre contenteditable="true" spellcheck="false" style="position:absolute;padding-right:${r}px;padding-left:${o}px;${u};${d}">${t.replace(/&/g,"&amp;").replace(/#/g,"%23").replace(/<br>/g,"<br/>").replace(/\n/g,"<br/>")}</pre></div></foreignObject></svg>`,{safariCacheKey:s})},Mi=(t,e=12)=>parseFloat(t.toFixed(e));const Pi=t=>{const e={...t};return M(e)},Ei=(t,i={})=>{const n=Kt(t);let o,r;const s=i.width||i.rx,a=i.height||i.ry;if(s&&a)return xt(i);if(s||a){o=parseFloat(s||Number.MAX_SAFE_INTEGER),r=parseFloat(a||Number.MAX_SAFE_INTEGER);const t=Math.min(o,r);e(s)||e(a)?(o=t+"%",r=t*n+"%"):(o=t,r=t)}else{const t=10;o=t+"%",r=t*n+"%"}return{[(i.width?"width":i.rx?"rx":void 0)||"width"]:o,[(i.width?"height":i.rx?"ry":void 0)||"height"]:r}},Ii=(t,e={})=>{return{width:void 0,height:void 0,...e,aspectRatio:1,backgroundImage:(i=ri(t),"data:image/svg+xml,"+i.replace("<","%3C").replace(">","%3E"))};var i},Ai=(t,i={})=>({backgroundColor:[0,0,0,0],...Ni(i)?{}:{width:void 0,height:void 0,aspectRatio:void 0},...i,backgroundImage:e(t)?t:r(t)?URL.createObjectURL(t):t}),Di=(t,i)=>{let n;if(e(t)||r(t)){const e={...Ei(i),backgroundSize:"contain"};n=Qe(t)?Ii(t,e):Ai(t,e)}else if(t.src){const e=Ei(i,t.shape||t),o={...t.shape,...e};if(t.width&&t.height&&!Je(o,"aspectRatio")){const t=xn(e,"width",i),n=xn(e,"height",i);o.aspectRatio=j(t,n)}o.backgroundSize||t.shape||t.width&&t.height||(o.backgroundSize="contain"),n=Qe(t.src)?Ii(t.src,o):Ai(t.src,o)}else t.shape&&(n=Pi(t.shape));return Je(n,"backgroundImage")&&(Je(n,"backgroundColor")||(n.backgroundColor=[0,0,0,0]),Je(n,"disableStyle")||(n.disableStyle=["backgroundColor","strokeColor","strokeWidth"]),Je(n,"disableFlip")||(n.disableFlip=!0)),i?vn(n,i):n},Ri=t=>Q(t.x1,t.y1),Li=t=>Q(t.x2,t.y2),Oi=t=>Je(t,"text"),zi=t=>Oi(t)&&!(Ki(t)||Je(t,"width")),Fi=t=>Oi(t)&&(Ki(t)||Je(t,"width")),Bi=t=>!Oi(t)&&Qi(t),Ni=t=>Je(t,"rx"),Hi=t=>Je(t,"x1")&&!Wi(t),Wi=t=>Je(t,"x3"),ji=t=>Je(t,"points"),Yi=t=>Oi(t)&&t.isEditing,Vi=t=>!Je(t,"opacity")||t.opacity>0,Ui=t=>t.isSelected,qi=t=>t.isEditing,Xi=t=>t._isDraft,Gi=t=>Je(t,"width")&&Je(t,"height"),Zi=t=>{const e=Je(t,"right"),i=Je(t,"bottom");return e||i},Ki=t=>(Je(t,"x")||Je(t,"left"))&&Je(t,"right")||(Je(t,"y")||Je(t,"top"))&&Je(t,"bottom"),Qi=t=>Gi(t)||Ki(t),Ji=t=>(t._isDraft=!0,t),tn=(t,e)=>!(!0===t.disableStyle||ti(t.disableStyle)&&e&&t.disableStyle.includes(e)),en=t=>!0!==t.disableSelect&&!Wi(t),nn=t=>!0!==t.disableRemove,on=(t,e)=>!!Oi(t)&&!0!==t.disableInput&&(P(t.disableInput)?t.disableInput(null!=e?e:t.text):e||!0),rn=(t,e)=>!(!0===t.disableTextLayout||ti(t.disableTextLayout)&&e&&t.disableTextLayout.includes(e)),sn=t=>!0!==t.disableManipulate&&!Xi(t)&&!Zi(t),an=t=>sn(t)&&!0!==t.disableMove,ln=t=>(delete t.left,delete t.right,delete t.top,delete t.bottom,t),cn=t=>(delete t.rotation,t),hn=t=>(t.strokeWidth=t.strokeWidth||1,t.strokeColor=t.strokeColor||[0,0,0],t),un=t=>(t.backgroundColor=t.backgroundColor?t.backgroundColor:t.strokeWidth||t.backgroundImage?void 0:[0,0,0],t),dn=t=>((t=>{e(t.id)||(t.id=A()),Je(t,"rotation")||(t.rotation=0),Je(t,"opacity")||(t.opacity=1),Je(t,"disableErase")||(t.disableErase=!0)})(t),Oi(t)?(t=>{t.fontSize=t.fontSize||"4%",t.fontFamily=t.fontFamily||"sans-serif",t.fontWeight=t.fontWeight||"normal",t.fontStyle=t.fontStyle||"normal",t.fontVariant=t.fontVariant||"normal",t.lineHeight=t.lineHeight||"120%",t.color=t.color||[0,0,0],zi(t)?(t=>{delete t.textAlign,ln(t)})(t):(t=>{t.textAlign=t.textAlign||"left"})(t)})(t):Bi(t)?(t=>{t.cornerRadius=t.cornerRadius||0,t.strokeWidth=t.strokeWidth||0,t.strokeColor=t.strokeColor||[0,0,0],un(t)})(t):ji(t)?(t=>{hn(t),cn(t),ln(t)})(t):Hi(t)?(t=>{hn(t),t.lineStart=t.lineStart||void 0,t.lineEnd=t.lineEnd||void 0,cn(t),ln(t)})(t):Ni(t)?(t=>{t.strokeWidth=t.strokeWidth||0,t.strokeColor=t.strokeColor||[0,0,0],un(t)})(t):Wi(t)&&(t=>{t.strokeWidth=t.strokeWidth||0,t.strokeColor=t.strokeColor||[0,0,0],un(t),ln(t)})(t),t),pn=t=>Oi(t)?"text":Bi(t)?"rectangle":ji(t)?"path":Hi(t)?"line":Ni(t)?"ellipse":Wi(t)?"triangle":void 0,fn=(t,e)=>parseFloat(t)/100*e,mn=new RegExp(/^x|left|right|^width|rx|fontSize|cornerRadius|strokeWidth/,"i"),gn=new RegExp(/^y|top|bottom|^height|ry/,"i"),yn=(t,i)=>{Object.entries(t).map((([e,n])=>{t[e]=((t,e,{width:i,height:n})=>{if(Array.isArray(e))return e.map((t=>(C(t)&&yn(t,{width:i,height:n}),t)));if("string"!=typeof e)return e;if(!e.endsWith("%"))return e;const o=parseFloat(e)/100;return mn.test(t)?Mi(i*o,6):gn.test(t)?Mi(n*o,6):e})(e,n,i)}));const n=t.lineHeight;e(n)&&(t.lineHeight=Math.round(t.fontSize*(parseFloat(n)/100)))},vn=(t,e)=>(yn(t,e),Sn(t,e),t),bn=(t,e)=>{let i;return/^x|width|rx|fontSize|strokeWidth|cornerRadius/.test(t)?i=e.width:/^y|height|ry/.test(t)&&(i=e.height),i},xn=(t,i,n)=>e(t[i])?fn(t[i],bn(i,n)):t[i],$n=(t,e,i)=>e.reduce(((e,n)=>{const o=xn(t,n,i);return e[n]=o,e}),{}),wn=(t,i,n)=>(Object.keys(i).forEach((o=>((t,i,n,o)=>{if(!e(t[i]))return t[i]=n,t;const r=bn(i,o);return t[i]=void 0===r?n:si(n,r),t})(t,o,i[o],n))),t),_n=(t,e)=>{const i=t.filter((t=>t.x<0||t.y<0||t.x1<0||t.y1<0)).reduce(((t,e)=>{const[i,n,o,r]=(t=>{const e=Ft(),i=t.strokeWidth||0;if(Bi(t))e.x=t.x-.5*i,e.y=t.y-.5*i,e.width=t.width+i,e.height=t.height+i;else if(Hi(t)){const{x1:n,y1:o,x2:r,y2:s}=t,a=Math.abs(Math.min(n,r)),l=Math.abs(Math.max(n,r)),c=Math.abs(Math.min(o,s)),h=Math.abs(Math.min(o,s));e.x=a+.5*i,e.y=l+.5*i,e.width=l-a+i,e.height=h-c+i}else Ni(t)&&(e.x=t.x-t.rx+.5*i,e.y=t.y-t.ry+.5*i,e.width=2*t.rx+i,e.height=2*t.ry+i);return e&&Je(t,"rotation")&&te(e,t.rotation),re(e)})(e);return t.top=Math.min(i,t.top),t.left=Math.min(r,t.left),t.bottom=Math.max(o,t.bottom),t.right=Math.max(n,t.right),t}),{top:0,right:0,bottom:0,left:0});return i.right>0&&(i.right-=e.width),i.bottom>0&&(i.bottom-=e.height),i},kn=(t,e,i)=>{const n=Pi(t);return vn(n,e),i(n)},Sn=(t,i)=>{if(Je(t,"left")&&(t.x=t.left),Je(t,"right")&&!e(t.right)){const e=i.width-t.right;Je(t,"left")?(t.x=t.left,t.width=Math.max(0,e-t.left)):Je(t,"width")&&(t.x=e-t.width)}if(Je(t,"top")&&(t.y=t.top),Je(t,"bottom")&&!e(t.bottom)){const e=i.height-t.bottom;Je(t,"top")?(t.y=t.top,t.height=Math.max(0,e-t.top)):Je(t,"height")&&(t.y=e-t.height)}return t},Cn=(t,e)=>(ji(t)&&t.points.filter((t=>Ke(t.x))).forEach((t=>{t.x*=e,t.y*=e})),Wi(t)&&Ke(t.x1)&&(t.x1*=e,t.y1*=e,t.x2*=e,t.y2*=e,t.x3*=e,t.y3*=e),Hi(t)&&Ke(t.x1)&&(t.x1*=e,t.y1*=e,t.x2*=e,t.y2*=e),Ke(t.x)&&Ke(t.y)&&(t.x*=e,t.y*=e),Ke(t.width)&&Ke(t.height)&&(t.width*=e,t.height*=e),Ke(t.rx)&&Ke(t.ry)&&(t.rx*=e,t.ry*=e),(t=>Ke(t.strokeWidth)&&t.strokeWidth>0)(t)&&(t.strokeWidth*=e),Oi(t)&&(t._scale=e,Ke(t.fontSize)&&(t.fontSize*=e),Ke(t.lineHeight)&&(t.lineHeight*=e),Ke(t.width)&&!Ke(t.height)&&(t.width*=e)),Je(t,"cornerRadius")&&Ke(t.cornerRadius)&&(t.cornerRadius*=e),t);var Tn=t=>/canvas/i.test(t.nodeName),Mn=(t,i)=>new Promise(((n,o)=>{let r=t,s=!1;const a=()=>{s||(s=!0,P(i)&&Promise.resolve().then((()=>i(St(r.naturalWidth,r.naturalHeight)))))};if(r.src||(r=new Image,e(t)&&new URL(t,location.href).origin!==location.origin&&(r.crossOrigin="anonymous"),r.src=e(t)?t:URL.createObjectURL(t)),r.complete)return a(),n(r);P(i)&&Se(r).then(a).catch(o),r.onload=()=>{a(),n(r)},r.onerror=o}));const Pn=new Map([]),En=(t,e={})=>new Promise(((i,n)=>{const{onMetadata:o=f,onLoad:r=i,onError:s=n,onComplete:a=f}=e;let l=Pn.get(t);if(l||(l={loading:!1,complete:!1,error:!1,image:void 0,size:void 0,bus:di()},Pn.set(t,l)),l.bus.sub("meta",o),l.bus.sub("load",r),l.bus.sub("error",s),l.bus.sub("complete",a),Tn(t)){const e=t,i=e.cloneNode();l.complete=!0,l.image=i,l.size=kt(e)}if(l.complete)return l.bus.pub("meta",{size:l.size}),l.error?l.bus.pub("error",l.error):l.bus.pub("load",l.image),l.bus.pub("complete"),void(l.bus=di());l.loading||(l.loading=!0,Mn(t,(t=>{l.size=t,l.bus.pub("meta",{size:t})})).then((t=>{l.image=t,l.bus.pub("load",t)})).catch((t=>{l.error=t,l.bus.pub("error",t)})).finally((()=>{l.complete=!0,l.loading=!1,l.bus.pub("complete"),l.bus=di()})))})),In=(t,e,i,n)=>t.drawImage(e,i.x,i.x,i.width,i.height,n.x,n.y,n.width,n.height);var An=async(t,e,i,n,o=In)=>{t.save(),t.clip(),await o(t,e,i,n),t.restore()};const Dn=(t,e,i,n)=>{let o=Yt(0,0,i.width,i.height);const r=zt(t);if(n)o=ae(Ht(n),Mi),o.x*=i.width,o.width*=i.width,o.y*=i.height,o.height*=i.height;else if("contain"===e){const e=oe(t,Kt(o));r.width=e.width,r.height=e.height,r.x+=e.x,r.y+=e.y}else"cover"===e&&(o=oe(Yt(0,0,o.width,o.height),Kt(r)));return{srcRect:o,destRect:r}},Rn=(t,e)=>(e.cornerRadius>0?((t,e,i,n,o,r)=>{n<2*r&&(r=n/2),o<2*r&&(r=o/2),t.beginPath(),t.moveTo(e+r,i),t.arcTo(e+n,i,e+n,i+o,r),t.arcTo(e+n,i+o,e,i+o,r),t.arcTo(e,i+o,e,i,r),t.arcTo(e,i,e+n,i,r),t.closePath()})(t,e.x,e.y,e.width,e.height,e.cornerRadius):t.rect(e.x,e.y,e.width,e.height),t),Ln=(t,e)=>(e.backgroundColor&&t.fill(),t),On=(t,e)=>(e.strokeWidth&&t.stroke(),t);var zn=async(t,e,i={})=>new Promise((async(n,o)=>{const{drawImage:r}=i;if(t.lineWidth=e.strokeWidth?e.strokeWidth:1,t.strokeStyle=e.strokeColor?ai(e.strokeColor):"none",t.fillStyle=e.backgroundColor?ai(e.backgroundColor):"none",t.globalAlpha=e.opacity,e.backgroundImage){let i;try{i=Tn(e.backgroundImage)?e.backgroundImage:await En(e.backgroundImage)}catch(t){o(t)}Rn(t,e),Ln(t,e);const{srcRect:s,destRect:a}=Dn(e,e.backgroundSize,kt(i),e.backgroundCorners);await An(t,i,s,a,r),On(t,e),n([])}else Rn(t,e),Ln(t,e),On(t,e),n([])})),Fn=async(t,e,i={})=>new Promise((async(n,o)=>{const{drawImage:r}=i;if(t.lineWidth=e.strokeWidth||1,t.strokeStyle=e.strokeColor?ai(e.strokeColor):"none",t.fillStyle=e.backgroundColor?ai(e.backgroundColor):"none",t.globalAlpha=e.opacity,t.ellipse(e.x,e.y,e.rx,e.ry,0,0,2*Math.PI),e.backgroundColor&&t.fill(),e.backgroundImage){let i;try{i=await En(e.backgroundImage)}catch(t){o(t)}const s=Yt(e.x-e.rx,e.y-e.ry,2*e.rx,2*e.ry),{srcRect:a,destRect:l}=Dn(s,e.backgroundSize,kt(i));await An(t,i,a,l,r),e.strokeWidth&&t.stroke(),n([])}else e.strokeWidth&&t.stroke(),n([])})),Bn=async(t,e,i)=>{const n=e.width&&e.height?$t(e):vi(e.text,e),o={x:e.x,y:e.y,width:n.width,height:n.height};if(zn(t,{...e,...o,options:i}),!e.text.length)return[];const{willRequestResource:r}=i,s=await Ti(e.text,{...e,...o,imageWidth:o.width,imageHeight:o.height,willRequestResource:r});return t.drawImage(s,e.x-pi,e.y,s.width,s.height),[]},Nn=async(t,e)=>new Promise((async i=>{t.lineWidth=e.strokeWidth||1,t.strokeStyle=e.strokeColor?ai(e.strokeColor):"none",t.globalAlpha=e.opacity;let n=Ri(e),o=Li(e);t.moveTo(n.x,n.y),t.lineTo(o.x,o.y),e.strokeWidth&&t.stroke(),i([])})),Hn=async(t,e)=>new Promise(((i,n)=>{t.lineWidth=e.strokeWidth||1,t.strokeStyle=e.strokeColor?ai(e.strokeColor):"none",t.fillStyle=e.backgroundColor?ai(e.backgroundColor):"none",t.globalAlpha=e.opacity;const{points:o}=e;e.pathClose&&t.beginPath(),t.moveTo(o[0].x,o[0].y);const r=o.length;for(let e=1;e<r;e++)t.lineTo(o[e].x,o[e].y);e.pathClose&&t.closePath(),e.strokeWidth&&t.stroke(),e.backgroundColor&&t.fill(),i([])}));const Wn=async(t,e,i)=>{const n=(t=>{if(Bi(t))return Q(t.x+.5*t.width,t.y+.5*t.height);if(Ni(t))return Q(t.x,t.y);if(Fi(t)){const e=t.height||vi(t.text,t).height;return Q(t.x+.5*t.width,t.y+.5*e)}if(zi(t)){const e=vi(t.text,t);return Q(t.x+.5*e.width,t.y+.5*e.height)}return ji(t)?gt(t.points):Hi(t)?gt([Ri(t),Li(t)]):void 0})(e);let o;return Ne(t,e.rotation,n),((t,e,i,n)=>{(e||i)&&(t.translate(n.x,n.y),t.scale(e?-1:1,i?-1:1),t.translate(-n.x,-n.y))})(t,e.flipX,e.flipY,n),Bi(e)?o=zn:Ni(e)?o=Fn:Hi(e)?o=Nn:ji(e)?o=Hn:Oi(e)&&(o=Bn),o?[e,...await jn(t,await o(t,e,i),i)]:[]};var jn=async(t,e,i)=>{let n=[];for(const o of e)t.save(),t.beginPath(),n=[...n,...await Wn(t,o,i)],t.restore();return n},Yn=async(e,i={})=>{const{shapes:n=[],contextBounds:o=e,transform:r=f,drawImage:s,willRequestResource:a,canvasMemoryLimit:l,computeShape:c=Y,preprocessShape:h=Y}=i;if(!n.length)return e;const u=t("canvas");u.width=o.width,u.height=o.height;const d=u.getContext("2d");d.putImageData(e,o.x||0,o.y||0);const p=n.map(Pi).map(c).map(h).flat();r(d),await jn(d,p,{drawImage:s,canvasMemoryLimit:l,willRequestResource:a});const m=d.getImageData(0,0,u.width,u.height);return w(u),m},Vn=async(e,i={})=>{const{backgroundColor:n}=i;if(!n||n&&0===n[3])return e;const o=t("canvas");o.width=e.width,o.height=e.height;const r=o.getContext("2d");r.putImageData(e,0,0),r.globalCompositeOperation="destination-over",r.fillStyle=ai(n),r.fillRect(0,0,o.width,o.height);const s=r.getImageData(0,0,o.width,o.height);return w(o),s},Un=t=>t.length?t.reduce(((t,e)=>((t,e)=>{const i=new Array(20);return i[0]=t[0]*e[0]+t[1]*e[5]+t[2]*e[10]+t[3]*e[15],i[1]=t[0]*e[1]+t[1]*e[6]+t[2]*e[11]+t[3]*e[16],i[2]=t[0]*e[2]+t[1]*e[7]+t[2]*e[12]+t[3]*e[17],i[3]=t[0]*e[3]+t[1]*e[8]+t[2]*e[13]+t[3]*e[18],i[4]=t[0]*e[4]+t[1]*e[9]+t[2]*e[14]+t[3]*e[19]+t[4],i[5]=t[5]*e[0]+t[6]*e[5]+t[7]*e[10]+t[8]*e[15],i[6]=t[5]*e[1]+t[6]*e[6]+t[7]*e[11]+t[8]*e[16],i[7]=t[5]*e[2]+t[6]*e[7]+t[7]*e[12]+t[8]*e[17],i[8]=t[5]*e[3]+t[6]*e[8]+t[7]*e[13]+t[8]*e[18],i[9]=t[5]*e[4]+t[6]*e[9]+t[7]*e[14]+t[8]*e[19]+t[9],i[10]=t[10]*e[0]+t[11]*e[5]+t[12]*e[10]+t[13]*e[15],i[11]=t[10]*e[1]+t[11]*e[6]+t[12]*e[11]+t[13]*e[16],i[12]=t[10]*e[2]+t[11]*e[7]+t[12]*e[12]+t[13]*e[17],i[13]=t[10]*e[3]+t[11]*e[8]+t[12]*e[13]+t[13]*e[18],i[14]=t[10]*e[4]+t[11]*e[9]+t[12]*e[14]+t[13]*e[19]+t[14],i[15]=t[15]*e[0]+t[16]*e[5]+t[17]*e[10]+t[18]*e[15],i[16]=t[15]*e[1]+t[16]*e[6]+t[17]*e[11]+t[18]*e[16],i[17]=t[15]*e[2]+t[16]*e[7]+t[17]*e[12]+t[18]*e[17],i[18]=t[15]*e[3]+t[16]*e[8]+t[17]*e[13]+t[18]*e[18],i[19]=t[15]*e[4]+t[16]*e[9]+t[17]*e[14]+t[18]*e[19]+t[19],i})([...t],e)),t.shift()):[],qn=(t,e)=>{const i=t.width*t.height,n=e.reduce(((t,e)=>(e.width>t.width&&e.height>t.height&&(t.width=e.width,t.height=e.height),t)),{width:0,height:0}),o=n.width*n.height;return((t,e=2)=>Math.round(t*e)/e)(Math.max(.5,.5+(1-o/i)/2),5)};function Xn(){}const Gn=t=>t;function Zn(t,e){for(const i in e)t[i]=e[i];return t}function Kn(t){return t()}function Qn(){return Object.create(null)}function Jn(t){t.forEach(Kn)}function to(t){return"function"==typeof t}function eo(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function io(t,...e){if(null==t)return Xn;const i=t.subscribe(...e);return i.unsubscribe?()=>i.unsubscribe():i}function no(t){let e;return io(t,(t=>e=t))(),e}function oo(t,e,i){t.$$.on_destroy.push(io(e,i))}function ro(t,e,i,n){if(t){const o=so(t,e,i,n);return t[0](o)}}function so(t,e,i,n){return t[1]&&n?Zn(i.ctx.slice(),t[1](n(e))):i.ctx}function ao(t,e,i,n,o,r,s){const a=function(t,e,i,n){if(t[2]&&n){const o=t[2](n(i));if(void 0===e.dirty)return o;if("object"==typeof o){const t=[],i=Math.max(e.dirty.length,o.length);for(let n=0;n<i;n+=1)t[n]=e.dirty[n]|o[n];return t}return e.dirty|o}return e.dirty}(e,n,o,r);if(a){const o=so(e,i,n,s);t.p(o,a)}}function lo(t){const e={};for(const i in t)"$"!==i[0]&&(e[i]=t[i]);return e}function co(t,e){const i={};e=new Set(e);for(const n in t)e.has(n)||"$"===n[0]||(i[n]=t[n]);return i}function ho(t,e,i=e){return t.set(i),e}function uo(t){return t&&to(t.destroy)?t.destroy:Xn}const po="undefined"!=typeof window;let fo=po?()=>window.performance.now():()=>Date.now(),mo=po?t=>requestAnimationFrame(t):Xn;const go=new Set;function yo(t){go.forEach((e=>{e.c(t)||(go.delete(e),e.f())})),0!==go.size&&mo(yo)}function vo(t){let e;return 0===go.size&&mo(yo),{promise:new Promise((i=>{go.add(e={c:t,f:i})})),abort(){go.delete(e)}}}function bo(t,e){t.appendChild(e)}function xo(t,e,i){t.insertBefore(e,i||null)}function $o(t){t.parentNode.removeChild(t)}function wo(t){return document.createElement(t)}function _o(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function ko(t){return document.createTextNode(t)}function So(){return ko(" ")}function Co(){return ko("")}function To(t,e,i,n){return t.addEventListener(e,i,n),()=>t.removeEventListener(e,i,n)}function Mo(t){return function(e){return e.preventDefault(),t.call(this,e)}}function Po(t){return function(e){return e.stopPropagation(),t.call(this,e)}}function Eo(t,e,i){null==i?t.removeAttribute(e):t.getAttribute(e)!==i&&t.setAttribute(e,i)}function Io(t,e){const i=Object.getOwnPropertyDescriptors(t.__proto__);for(const n in e)null==e[n]?t.removeAttribute(n):"style"===n?t.style.cssText=e[n]:"__value"===n?t.value=t[n]=e[n]:i[n]&&i[n].set?t[n]=e[n]:Eo(t,n,e[n])}function Ao(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function Do(t,e){t.value=null==e?"":e}function Ro(t,e){const i=document.createEvent("CustomEvent");return i.initCustomEvent(t,!1,!1,e),i}class Lo{constructor(t=null){this.a=t,this.e=this.n=null}m(t,e,i=null){this.e||(this.e=wo(e.nodeName),this.t=e,this.h(t)),this.i(i)}h(t){this.e.innerHTML=t,this.n=Array.from(this.e.childNodes)}i(t){for(let e=0;e<this.n.length;e+=1)xo(this.t,this.n[e],t)}p(t){this.d(),this.h(t),this.i(this.a)}d(){this.n.forEach($o)}}const Oo=new Set;let zo,Fo=0;function Bo(t,e,i,n,o,r,s,a=0){const l=16.666/n;let c="{\n";for(let t=0;t<=1;t+=l){const n=e+(i-e)*r(t);c+=100*t+`%{${s(n,1-n)}}\n`}const h=c+`100% {${s(i,1-i)}}\n}`,u=`__svelte_${function(t){let e=5381,i=t.length;for(;i--;)e=(e<<5)-e^t.charCodeAt(i);return e>>>0}(h)}_${a}`,d=t.ownerDocument;Oo.add(d);const p=d.__svelte_stylesheet||(d.__svelte_stylesheet=d.head.appendChild(wo("style")).sheet),f=d.__svelte_rules||(d.__svelte_rules={});f[u]||(f[u]=!0,p.insertRule(`@keyframes ${u} ${h}`,p.cssRules.length));const m=t.style.animation||"";return t.style.animation=`${m?m+", ":""}${u} ${n}ms linear ${o}ms 1 both`,Fo+=1,u}function No(t){zo=t}function Ho(){if(!zo)throw new Error("Function called outside component initialization");return zo}function Wo(t){Ho().$$.on_mount.push(t)}function jo(t){Ho().$$.after_update.push(t)}function Yo(t){Ho().$$.on_destroy.push(t)}function Vo(){const t=Ho();return(e,i)=>{const n=t.$$.callbacks[e];if(n){const o=Ro(e,i);n.slice().forEach((e=>{e.call(t,o)}))}}}function Uo(t,e){Ho().$$.context.set(t,e)}function qo(t){return Ho().$$.context.get(t)}function Xo(t,e){const i=t.$$.callbacks[e.type];i&&i.slice().forEach((t=>t(e)))}const Go=[],Zo=[],Ko=[],Qo=[],Jo=Promise.resolve();let tr=!1;function er(){tr||(tr=!0,Jo.then(ar))}function ir(){return er(),Jo}function nr(t){Ko.push(t)}function or(t){Qo.push(t)}let rr=!1;const sr=new Set;function ar(){if(!rr){rr=!0;do{for(let t=0;t<Go.length;t+=1){const e=Go[t];No(e),lr(e.$$)}for(No(null),Go.length=0;Zo.length;)Zo.pop()();for(let t=0;t<Ko.length;t+=1){const e=Ko[t];sr.has(e)||(sr.add(e),e())}Ko.length=0}while(Go.length);for(;Qo.length;)Qo.pop()();tr=!1,rr=!1,sr.clear()}}function lr(t){if(null!==t.fragment){t.update(),Jn(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(nr)}}let cr;function hr(t,e,i){t.dispatchEvent(Ro(`${e?"intro":"outro"}${i}`))}const ur=new Set;let dr;function pr(){dr={r:0,c:[],p:dr}}function fr(){dr.r||Jn(dr.c),dr=dr.p}function mr(t,e){t&&t.i&&(ur.delete(t),t.i(e))}function gr(t,e,i,n){if(t&&t.o){if(ur.has(t))return;ur.add(t),dr.c.push((()=>{ur.delete(t),n&&(i&&t.d(1),n())})),t.o(e)}}const yr={duration:0};function vr(t,e,i,n){let o=e(t,i),r=n?0:1,s=null,a=null,l=null;function c(){l&&function(t,e){const i=(t.style.animation||"").split(", "),n=i.filter(e?t=>t.indexOf(e)<0:t=>-1===t.indexOf("__svelte")),o=i.length-n.length;o&&(t.style.animation=n.join(", "),Fo-=o,Fo||mo((()=>{Fo||(Oo.forEach((t=>{const e=t.__svelte_stylesheet;let i=e.cssRules.length;for(;i--;)e.deleteRule(i);t.__svelte_rules={}})),Oo.clear())})))}(t,l)}function h(t,e){const i=t.b-r;return e*=Math.abs(i),{a:r,b:t.b,d:i,duration:e,start:t.start,end:t.start+e,group:t.group}}function u(e){const{delay:i=0,duration:n=300,easing:u=Gn,tick:d=Xn,css:p}=o||yr,f={start:fo()+i,b:e};e||(f.group=dr,dr.r+=1),s||a?a=f:(p&&(c(),l=Bo(t,r,e,n,i,u,p)),e&&d(0,1),s=h(f,n),nr((()=>hr(t,e,"start"))),vo((e=>{if(a&&e>a.start&&(s=h(a,n),a=null,hr(t,s.b,"start"),p&&(c(),l=Bo(t,r,s.b,s.duration,0,u,o.css))),s)if(e>=s.end)d(r=s.b,1-r),hr(t,s.b,"end"),a||(s.b?c():--s.group.r||Jn(s.group.c)),s=null;else if(e>=s.start){const t=e-s.start;r=s.a+s.d*u(t/s.duration),d(r,1-r)}return!(!s&&!a)})))}return{run(t){to(o)?(cr||(cr=Promise.resolve(),cr.then((()=>{cr=null}))),cr).then((()=>{o=o(),u(t)})):u(t)},end(){c(),s=a=null}}}const br="undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:global;function xr(t,e){t.d(1),e.delete(t.key)}function $r(t,e){gr(t,1,1,(()=>{e.delete(t.key)}))}function wr(t,e,i,n,o,r,s,a,l,c,h,u){let d=t.length,p=r.length,f=d;const m={};for(;f--;)m[t[f].key]=f;const g=[],y=new Map,v=new Map;for(f=p;f--;){const t=u(o,r,f),a=i(t);let l=s.get(a);l?n&&l.p(t,e):(l=c(a,t),l.c()),y.set(a,g[f]=l),a in m&&v.set(a,Math.abs(f-m[a]))}const b=new Set,x=new Set;function $(t){mr(t,1),t.m(a,h),s.set(t.key,t),h=t.first,p--}for(;d&&p;){const e=g[p-1],i=t[d-1],n=e.key,o=i.key;e===i?(h=e.first,d--,p--):y.has(o)?!s.has(n)||b.has(n)?$(e):x.has(o)?d--:v.get(n)>v.get(o)?(x.add(n),$(e)):(b.add(o),d--):(l(i,s),d--)}for(;d--;){const e=t[d];y.has(e.key)||l(e,s)}for(;p;)$(g[p-1]);return g}function _r(t,e){const i={},n={},o={$$scope:1};let r=t.length;for(;r--;){const s=t[r],a=e[r];if(a){for(const t in s)t in a||(n[t]=1);for(const t in a)o[t]||(i[t]=a[t],o[t]=1);t[r]=a}else for(const t in s)o[t]=1}for(const t in n)t in i||(i[t]=void 0);return i}function kr(t){return"object"==typeof t&&null!==t?t:{}}function Sr(t,e,i){const n=t.$$.props[e];void 0!==n&&(t.$$.bound[n]=i,i(t.$$.ctx[n]))}function Cr(t){t&&t.c()}function Tr(t,e,i,n){const{fragment:o,on_mount:r,on_destroy:s,after_update:a}=t.$$;o&&o.m(e,i),n||nr((()=>{const e=r.map(Kn).filter(to);s?s.push(...e):Jn(e),t.$$.on_mount=[]})),a.forEach(nr)}function Mr(t,e){const i=t.$$;null!==i.fragment&&(Jn(i.on_destroy),i.fragment&&i.fragment.d(e),i.on_destroy=i.fragment=null,i.ctx=[])}function Pr(t,e,i,n,o,r,s=[-1]){const a=zo;No(t);const l=t.$$={fragment:null,ctx:null,props:r,update:Xn,not_equal:o,bound:Qn(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(a?a.$$.context:e.context||[]),callbacks:Qn(),dirty:s,skip_bound:!1};let c=!1;if(l.ctx=i?i(t,e.props||{},((e,i,...n)=>{const r=n.length?n[0]:i;return l.ctx&&o(l.ctx[e],l.ctx[e]=r)&&(!l.skip_bound&&l.bound[e]&&l.bound[e](r),c&&function(t,e){-1===t.$$.dirty[0]&&(Go.push(t),er(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}(t,e)),i})):[],l.update(),c=!0,Jn(l.before_update),l.fragment=!!n&&n(l.ctx),e.target){if(e.hydrate){const t=function(t){return Array.from(t.childNodes)}(e.target);l.fragment&&l.fragment.l(t),t.forEach($o)}else l.fragment&&l.fragment.c();e.intro&&mr(t.$$.fragment),Tr(t,e.target,e.anchor,e.customElement),ar()}No(a)}class Er{$destroy(){Mr(this,1),this.$destroy=Xn}$on(t,e){const i=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return i.push(e),()=>{const t=i.indexOf(e);-1!==t&&i.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const Ir=[];function Ar(t,e){return{subscribe:Dr(t,e).subscribe}}function Dr(t,e=Xn){let i;const n=[];function o(e){if(eo(t,e)&&(t=e,i)){const e=!Ir.length;for(let e=0;e<n.length;e+=1){const i=n[e];i[1](),Ir.push(i,t)}if(e){for(let t=0;t<Ir.length;t+=2)Ir[t][0](Ir[t+1]);Ir.length=0}}}return{set:o,update:function(e){o(e(t))},subscribe:function(r,s=Xn){const a=[r,s];return n.push(a),1===n.length&&(i=e(o)||Xn),r(t),()=>{const t=n.indexOf(a);-1!==t&&n.splice(t,1),0===n.length&&(i(),i=null)}}}}function Rr(t,e,i){const n=!Array.isArray(t),o=n?[t]:t,r=e.length<2;return Ar(i,(t=>{let i=!1;const s=[];let a=0,l=Xn;const c=()=>{if(a)return;l();const i=e(n?s[0]:s,t);r?t(i):l=to(i)?i:Xn},h=o.map(((t,e)=>io(t,(t=>{s[e]=t,a&=~(1<<e),i&&c()}),(()=>{a|=1<<e}))));return i=!0,c(),function(){Jn(h),l()}}))}var Lr=t=>t.reduce(((t,e)=>Object.assign(t,e)),{});const Or=t=>({updateValue:t}),zr=t=>({defaultValue:t}),Fr=t=>({store:(e,i)=>Rr(...t(i))}),Br=t=>({store:(e,i)=>{const[n,o,r=(()=>!1)]=t(i);let s,a=!0;return Rr(n,((t,e)=>{o(t,(t=>{!a&&r(s,t)||(s=t,a=!1,e(t))}))}))}}),Nr=t=>({store:(e,i)=>{const[n,o={},r]=t(i);let s=[];const a={},l=t=>n(t,a),c=t=>{(s.length||t.length)&&(s=t,h())},h=()=>{const t=s.map(l);r&&t.sort(r),s=[...t],d(t)};Object.entries(o).map((([t,e])=>e.subscribe((e=>{a[t]=e,e&&h()}))));const{subscribe:u,set:d}=Dr(e||[]);return{set:c,update:t=>c(t(s)),subscribe:u}}});var Hr=t=>{const e={},i={};return t.forEach((([t,...n])=>{const o=Lr(n),r=e[t]=((t,e,i)=>{const{store:n=(t=>Dr(t)),defaultValue:o=f,updateValue:r}=i,s=n(o(),e,t),{subscribe:a,update:l=f}=s;let c;const h=t=>{let e=!0;c&&c(),c=a((i=>{if(e)return e=!1;t(i),c(),c=void 0}))},u=r?r(t):Y;return s.set=t=>l((e=>u(t,e,h))),s.defaultValue=o,s})(i,e,o),s={get:()=>no(r),set:r.set};Object.defineProperty(i,t,s)})),{stores:e,accessors:i}},Wr=[["src"],["imageReader"],["imageWriter"],["imageScrambler"],["images",zr((()=>[]))],["shapePreprocessor"],["willRequestResource"]],jr=t=>t.charAt(0).toUpperCase()+t.slice(1),Yr=(t,e)=>{Object.keys(e).forEach((i=>{const n=P(e[i])?{value:e[i],writable:!1}:e[i];Object.defineProperty(t,i,n)}))};const Vr=(t,e)=>{let i,n,o,r,s,a,l,c,h,u;const d=e.length;for(i=0;i<d;i++)if(n=e[i],o=e[i+1>d-1?0:i+1],r=n.x-t.x,s=n.y-t.y,a=o.x-t.x,l=o.y-t.y,c=r-a,h=s-l,u=c*s-h*r,u<-1e-5)return!1;return!0},Ur=1e4;var qr=(t,e)=>{const i=fe(e),n=K();se(t).forEach((t=>{ct(t,n),Vr(t,e)||i.forEach((e=>{const i=Math.atan2(e.start.y-e.end.y,e.start.x-e.end.x),o=Math.sin(Math.PI-i)*Ur,r=Math.cos(Math.PI-i)*Ur,s=Q(t.x+o,t.y+r),a=Rt(Dt(e),Ur),l=ue(At(t,s),a);l&&ct(n,ht(et(l),t))}))}));const o=zt(t);return ct(o,n),!!se(o).every((t=>Vr(t,e)))&&(Jt(t,o),!0)},Xr=(t,e)=>{const i=se(t),n=fe(e).map((t=>Rt(t,5))),o=Vt(t),r=[];i.forEach((t=>{const e=((t,e)=>{const i=Q(t.start.x-t.end.x,t.start.y-t.end.y),n=rt(i),o=ut(n,e);return t.end.x+=o.x,t.end.y+=o.y,t})(At(et(o),et(t)),1e6);let i=!1;n.map(Dt).forEach((t=>{const n=ue(e,t);n&&!i&&(r.push(n),i=!0)}))}));const s=ft(r[0],r[2])<ft(r[1],r[3])?[r[0],r[2]]:[r[1],r[3]],a=Ht(s);return a.width<t.width&&(Jt(t,a),!0)},Gr=(t,e,i={x:0,y:0})=>{const n=Bt(t),o=Vt(n),r=le(n,i,o).map((t=>nt(t,e,o))),s=Ht(r);return r.map((t=>ht(t,s)))},Zr=(t,e=0,i=Kt(t))=>{let n,o;if(0!==e){const r=Math.atan2(1,i),s=Math.sign(e)*e,a=s%Math.PI,l=s%U;let c,h;h=a>q&&a<U+q?l>q?s:U-l:l>q?U-l:s,c=Math.min(Math.abs(t.height/Math.sin(r+h)),Math.abs(t.width/Math.cos(r-h))),n=Math.cos(r)*c,o=n/i}else n=t.width,o=n/i,o>t.height&&(o=t.height,n=o*i);return St(n,o)},Kr=(t,e,i)=>{const n=Bt(t),o=Vt(n),r=te(n,i,o),s=Vt(ce(Ht(r))),a=Vt(e),l=nt(a,-i,s),c=ht(l,s),h=lt(ct(o,c),Mi);return Yt(h.x-.5*e.width,h.y-.5*e.height,e.width,e.height)},Qr=(t,e,i)=>Math.max(e,Math.min(t,i));const Jr=["cropLimitToImage","cropMinSize","cropMaxSize","cropAspectRatio","flipX","flipY","rotation","crop","colorMatrix","convolutionMatrix","gamma","vignette","redaction","annotation","decoration","frame","backgroundColor","targetSize","metadata"],ts=t=>ti(t)?t.map(ts):C(t)?{...t}:t,es=t=>t.map((t=>Object.entries(t).reduce(((t,[e,i])=>(e.startsWith("_")||(t[e]=i),t)),{})));var is=(t,e)=>{if(t.length!==e.length)return!1;for(let i=0;i<t.length;i++)if(t[i]!==e[i])return!1;return!0};const ns=-q,os=q,rs=(t,e,i)=>{const n=lt(Vt(t),(t=>Mi(t,8))),o=Bt(e),r=Vt(o),s=te(o,i,r),a=lt(Mt(Ht(s)),(t=>Mi(t,8))),l=Math.abs(a.x-n.x),c=Math.abs(a.y-n.y);return l<1&&c<1},ss=(t,e)=>{const{context:i,props:n}=e;return t._isFormatted||((t=dn(t))._isFormatted=!0,Object.assign(t,n)),t._isDraft||!Ki(t)||t._context&&Zt(i,t._context)||(Sn(t,i),t._context={...i}),t};var as=[["file"],["size"],["loadState"],["processState"],["aspectRatio",Fr((({size:t})=>[t,t=>t?Kt(t):void 0]))],["perspectiveX",zr((()=>0))],["perspectiveY",zr((()=>0))],["perspective",Fr((({perspectiveX:t,perspectiveY:e})=>[[t,e],([t,e])=>({x:t,y:e})]))],["rotation",zr((()=>0)),Or((t=>(e,i,n)=>{if(e===i)return e;const{loadState:o,size:r,rotationRange:s,cropMinSize:a,cropMaxSize:l,crop:c,perspective:h,cropLimitToImage:u,cropOrigin:d}=t;if(!c||!o||!o.beforeComplete)return e;const p=((t,e,i)=>{const n=Zr(e,i,Kt(t));return Ct(It(n,Math.round),It(xt(t),Math.round))})(c,r,i),f=rs(c,r,i),m=((t,e,i,n,o,r,s,a,l,c)=>{const h=xt(l),u=xt(c);s&&(u.width=Math.min(c.width,o.width),u.height=Math.min(c.height,o.height));let d=!1;const p=(e,i)=>{const l=Kr(o,n,e),c=Bt(o),f=Vt(c),m=le(c,r,f),g=ht(et(f),he(m)),y=nt(Vt(l),i,f),v=ht(et(f),y);m.forEach((t=>nt(t,i,f)));const b=Ht(m),x=he(m),$=ct(ht(ht(x,v),b),g),w=Yt($.x-.5*l.width,$.y-.5*l.height,l.width,l.height);if(a&&qt(w,a.width/w.width),s){const t=Gr(o,i,r);Xr(w,t)}const _=Mi(Math.min(w.width/h.width,w.height/h.height),8),k=Mi(Math.max(w.width/u.width,w.height/u.height),8);return(_<1||k>1)&&Mi(Math.abs(i-e))===Mi(Math.PI/2)&&!d?(d=!0,p(t,t+Math.sign(i-e)*Math.PI)):{rotation:i,crop:ae(w,(t=>Mi(t,8)))}},f=Math.sign(e)*Math.round(Math.abs(e)/U)*U,m=Qr(e,f+i[0],f+i[1]);return p(t,m)})(i,e,s,c,r,h,u,d,a,l);if(p&&f){const t=Zr(r,e,Kt(m.crop));m.crop.x+=.5*m.crop.width,m.crop.y+=.5*m.crop.height,m.crop.x-=.5*t.width,m.crop.y-=.5*t.height,m.crop.width=t.width,m.crop.height=t.height}return n((()=>{t.crop=ae(m.crop,(t=>Mi(t,8)))})),m.rotation}))],["flipX",zr((()=>!1))],["flipY",zr((()=>!1))],["flip",Fr((({flipX:t,flipY:e})=>[[t,e],([t,e])=>({x:t,y:e})]))],["isRotatedSideways",Br((({rotation:t})=>[[t],([t],e)=>e(X(t)),(t,e)=>t!==e]))],["crop",Or((t=>(e,i=e)=>{const{loadState:n,size:o,cropMinSize:r,cropMaxSize:s,cropLimitToImage:a,cropAspectRatio:l,rotation:c,perspective:h}=t;if(!e&&!i||!n||!n.beforeComplete)return e;e||(e=Bt(Zr(o,c,l||Kt(o))));const u=((t,e,i,n,o,r,s,a)=>{const l=xt(s),c=xt(a),h=Mi(Math.max(e.width/c.width,e.height/c.height)),u=Mi(Math.min(e.width/l.width,e.height/l.height)),d=zt(e);if(u<1||h>1){const i=Vt(t),n=Vt(e),o=u<1?u:h,r=(n.x+i.x)/2,s=(n.y+i.y)/2,a=d.width/o,l=d.height/o;Qt(d,r-.5*a,s-.5*l,a,l)}return r?(((t,e,i=0,n=K(),o)=>{if(Ke(i)&&0!==i||n.x||n.y){const o=Kt(t),r=Gr(e,i,n),s=Zr(e,i,o);if(!(t.width<s.width&&t.height<s.height)){const e=.5*t.width-.5*s.width,i=.5*t.height-.5*s.height;t.width>s.width&&(t.width=s.width,t.x+=e),t.height>s.height&&(t.height=s.height,t.y+=i)}qr(t,r),Xr(t,r)&&qr(t,r)}else{const i=Kt(t);t.width=Math.min(t.width,e.width),t.height=Math.min(t.height,e.height),t.x=Math.max(t.x,0),t.x+t.width>e.width&&(t.x-=t.x+t.width-e.width),t.y=Math.max(t.y,0),t.y+t.height>e.height&&(t.y-=t.y+t.height-e.height);const n=Vt(t),r=oe(t,i);r.width=Math.max(o.width,r.width),r.height=Math.max(o.height,r.height),r.x=n.x-.5*r.width,r.y=n.y-.5*r.height,Jt(t,r)}})(d,i,n,o,l),{crop:d}):{crop:d}})(i,e,o,c,h,a,r,s);return ae(u.crop,(t=>Mi(t,8)))}))],["cropAspectRatio",Or((t=>(e,i)=>{const{loadState:n,crop:o,size:r,rotation:s,cropLimitToImage:a}=t,l=(t=>{if(t){if(/:/.test(t)){const[e,i]=t.split(":");return e/i}return parseFloat(t)}})(e);if(!l)return;if(!o||!n||!n.beforeComplete)return l;const c=i?Math.abs(e-i):1;if(rs(o,r,s)&&a&&c>=.1){const i=((t,e)=>{const i=t.width,n=t.height;return X(e)&&(t.width=n,t.height=i),t})(xt(r),s);t.crop=ae(oe(Bt(i),e),Mi)}else{const e={width:o.height*l,height:o.height},i=.5*(o.width-e.width),n=.5*(o.height-e.height);t.crop=ae(Yt(o.x+i,o.y+n,e.width,e.height),Mi)}return l}))],["cropOrigin"],["cropMinSize",zr((()=>({width:1,height:1})))],["cropMaxSize",zr((()=>({width:32768,height:32768})))],["cropLimitToImage",zr((()=>!0)),Or((t=>(e,i,n)=>{const{crop:o}=t;return o?(!i&&e&&n((()=>t.crop=zt(t.crop))),e):e}))],["cropSize",Br((({crop:t})=>[[t],([t],e)=>{t&&e(St(t.width,t.height))},(t,e)=>Ct(t,e)]))],["cropRectAspectRatio",Fr((({cropSize:t})=>[[t],([t],e)=>{t&&e(Mi(Kt(t),5))}]))],["cropRange",Br((({size:t,rotation:e,cropRectAspectRatio:i,cropMinSize:n,cropMaxSize:o,cropLimitToImage:r})=>[[t,e,i,n,o,r],([t,e,i,n,o,r],s)=>{t&&s(((t,e,i,n,o,r)=>{const s=xt(n),a=xt(o);return r?[s,It(Zr(t,e,i),Math.round)]:[s,a]})(t,e,i,n,o,r))},(t,e)=>is(t,e)]))],["rotationRange",Br((({size:t,isRotatedSideways:e,cropMinSize:i,cropSize:n,cropLimitToImage:o})=>[[t,e,i,n,o],([t,e,i,n,o],r)=>{t&&n&&r(((t,e,i,n,o)=>{if(!o)return[ns,os];const r=Math.max(i.width/n.width,i.height/n.height),s=St(n.width*r,n.height*r),a=(l=s,Math.sqrt(l.width*l.width+l.height*l.height));var l;if(a<Math.min(t.width,t.height))return[ns,os];const c=e?t.height:t.width,h=e?t.width:t.height,u=Math.acos(s.height/a),d=u-Math.acos(h/a),p=Math.asin(c/a)-u;if(Number.isNaN(d)&&Number.isNaN(p))return[ns,os];const f=Number.isNaN(d)?p:Number.isNaN(p)?d:Math.min(d,p);return[Math.max(-f,ns),Math.min(f,os)]})(t,e,i,n,o))},(t,e)=>is(t,e)]))],["backgroundColor",Or((()=>t=>((t=[0,0,0,0],e=1)=>4===t.length?t:[...t,e])(t)))],["targetSize"],["colorMatrix"],["convolutionMatrix"],["gamma"],["noise"],["vignette"],["redaction",Nr((({size:t})=>[ss,{context:t}]))],["annotation",Nr((({size:t})=>[ss,{context:t}]))],["decoration",Nr((({crop:t})=>[ss,{context:t}]))],["frame",Or((()=>t=>{if(!t)return;const i={frameStyle:void 0,x:0,y:0,width:"100%",height:"100%",disableStyle:["backgroundColor","strokeColor","strokeWidth"]};return e(t)?i.frameStyle=t:Object.assign(i,t),i}))],["metadata"],["state",{store:(t,e,i)=>{const n=Jr.map((t=>e[t]));let o=!1;const r=Dr({}),{subscribe:s}=Rr([...n,r],((t,e)=>{if(o)return;const i=Jr.reduce(((e,i,n)=>(e[i]=ts(t[n]),e)),{});i.crop&&ae(i.crop,Math.round),i.redaction=i.redaction&&es(i.redaction),i.annotation=i.annotation&&es(i.annotation),i.decoration=i.decoration&&es(i.decoration),e(i)})),a=t=>{t&&(o=!0,i.cropOrigin=void 0,Jr.filter((e=>Je(t,e))).forEach((e=>{i[e]=ts(t[e])})),o=!1,r.set({}))};return{set:a,update:t=>a(t(null)),subscribe:s}}}]],ls=async(t,e,i={},n)=>{const{ontaskstart:o,ontaskprogress:r,ontaskend:s,token:a}=n;let l=!1;a.cancel=()=>{l=!0};for(const[n,a]of e.entries()){if(l)return;const[e,c]=a;o(n,c);try{t=await e(t,{...i},(t=>r(n,c,t)))}catch(t){throw l=!0,t}s(n,c)}return t};const cs=["loadstart","loadabort","loaderror","loadprogress","load","processstart","processabort","processerror","processprogress","process"],hs=["flip","cropOrigin","isRotatedSideways","perspective","perspectiveX","perspectiveY","cropRange"],us=as.map((([t])=>t)).filter((t=>!hs.includes(t))),ds=t=>"image"+jr(t),ps=t=>Je(t,"crop");var fs=()=>{const{stores:t,accessors:i}=Hr(Wr),{sub:n,pub:o}=di(),s=()=>i.images?i.images[0]:{};let a={};const l={};us.forEach((t=>{Object.defineProperty(i,ds(t),{get:()=>{const e=s();if(e)return e.accessors[t]},set:e=>{a[ds(t)]=e,l[ds(t)]=e;const i=s();i&&(i.accessors[t]=e)}})}));const c=()=>i.images&&i.images[0],h=t.src.subscribe((t=>{if(!t)return i.images=[];i.imageReader&&(i.images.length&&(a={}),d(t))})),u=t.imageReader.subscribe((t=>{t&&(i.images.length||i.src&&d(i.src))})),d=t=>{Promise.resolve().then((()=>m(t,a))).catch((()=>{}))};let p;const m=(t,e={})=>new Promise(((n,r)=>{let s=c();const h=!(!1===e.cropLimitToImage||!1===e.imageCropLimitToImage||!1===l.imageCropLmitedToImage),u=e.cropMinSize||e.imageCropMinSize||l.imageCropMinSize,d=h?u:s&&s.accessors.cropMinSize;s&&y(),s=(({minSize:t={width:1,height:1}}={})=>{const{stores:e,accessors:i}=Hr(as),{pub:n,sub:o}=di(),r=(t,e)=>{const o=()=>i[t]||{},r=e=>i[t]={...o(),...e,timeStamp:Date.now()},s=()=>o().error,a=t=>{s()||(r({error:t}),n(e+"error",{...o()}))};return{start(){n(e+"start")},onabort(){r({abort:!0}),n(e+"abort",{...o()})},ontaskstart(t,i){s()||(r({index:t,task:i,taskProgress:void 0,taskLengthComputable:void 0}),n(e+"taskstart",{...o()}))},ontaskprogress(t,i,a){s()||(r({index:t,task:i,taskProgress:a.loaded/a.total,taskLengthComputable:a.lengthComputable}),n(e+"taskprogress",{...o()}),n(e+"progress",{...o()}))},ontaskend(t,i){s()||(r({index:t,task:i}),n(e+"taskend",{...o()}))},ontaskerror(t){a(t)},error(t){a(t)},beforeComplete(t){s()||(r({beforeComplete:!0}),n("before"+e,t))},complete(t){s()||(r({complete:!0}),n(e,t))}}};return Yr(i,{read:(e,{reader:n})=>{if(!n)return;Object.assign(i,{file:void 0,size:void 0,loadState:void 0});let o={cancel:f},s=!1;const a=r("loadState","load"),l={token:o,...a},c={src:e,size:void 0,dest:void 0},h={};return Promise.resolve().then((async()=>{try{if(a.start(),s)return a.onabort();const e=await ls(c,n,h,l);if(s)return a.onabort();const{size:r,dest:u}=e||{};if(!r||!r.width||!r.height)throw new Ee("Image size missing","IMAGE_SIZE_MISSING",e);if(r.width<t.width||r.height<t.height)throw new Ee("Image too small","IMAGE_TOO_SMALL",{...e,minWidth:t.width,minHeight:t.height});Object.assign(i,{size:r,file:u}),a.beforeComplete(e),a.complete(e)}catch(t){a.error(t)}finally{o=void 0}})),()=>{s=!0,o&&o.cancel(),a.onabort()}},write:(t,e)=>{if(!i.loadState.complete)return;i.processState=void 0;const n=r("processState","process"),o={src:i.file,imageState:i.state,dest:void 0};if(!t)return n.start(),void n.complete(o);let s={cancel:f},a=!1;const l=e,c={token:s,...n};return Promise.resolve().then((async()=>{try{if(n.start(),a)return n.onabort();const e=await ls(o,t,l,c);n.complete(e)}catch(t){n.error(t)}finally{s=void 0}})),()=>{a=!0,s&&s.cancel()}},on:o}),{accessors:i,stores:e}})({minSize:d}),cs.map((t=>{return s.accessors.on(t,(e=t,t=>o(e,t)));var e}));const m=()=>{a={},g.forEach((t=>t()))},g=[];g.push(s.accessors.on("loaderror",(t=>{m(),r(t)}))),g.push(s.accessors.on("loadabort",(()=>{m(),r({name:"AbortError"})}))),g.push(s.accessors.on("load",(t=>{p=void 0,m(),n(t)}))),g.push(s.accessors.on("beforeload",(()=>((t,e)=>{if(ps(e))return void(i.imageState=e);if(!e.imageCrop){const i=t.accessors.size,n=e.imageRotation||0,o=Bt(Pt(xt(i),n)),r=e.imageCropAspectRatio||(e.imageCropLimitToImage?Kt(i):Kt(o)),s=oe(o,r);e.imageCropLimitToImage||(s.x=(i.width-s.width)/2,s.y=(i.height-s.height)/2),e.imageCrop=s}const n=["imageCropLimitToImage","imageCrop","imageCropAspectRatio","imageRotation"];n.filter((t=>Je(e,t))).forEach((t=>{i[t]=e[t],delete e[t]}));const o=Object.keys(e).filter((t=>!n.includes(t))).reduce(((t,i)=>(t[i]=e[i],t)),{});Object.assign(i,o)})(s,e)))),i.images=[s],e.imageReader&&(i.imageReader=e.imageReader),e.imageWriter&&(i.imageWriter=e.imageWriter),p=s.accessors.read(t,{reader:i.imageReader})}));let g;const y=()=>{const t=c();t&&(p&&p(),t.accessors.loadState=void 0,i.images=[])};return Object.defineProperty(i,"stores",{get:()=>t}),Yr(i,{on:n,loadImage:m,abortLoadImage:()=>{p&&p(),i.images=[]},editImage:(t,e)=>new Promise(((n,o)=>{m(t,e).then((()=>{const{images:t}=i,e=t[0],r=()=>{s(),a()},s=e.accessors.on("processerror",(t=>{r(),o(t)})),a=e.accessors.on("process",(t=>{r(),n(t)}))})).catch(o)})),removeImage:y,processImage:(t,n)=>new Promise(((o,s)=>{try{const a=[],l=()=>{g=void 0,a.forEach((t=>t()))};(async()=>{(t=>e(t)||r(t)||ge(t))(t)?await m(t,n):t&&(ps(t)?i.imageState=t:Object.assign(i,t));const h=c();if(!h)return s("no image");a.push(h.accessors.on("processerror",(t=>{l(),s(t)}))),a.push(h.accessors.on("processabort",(()=>{l(),s({name:"AbortError"})}))),a.push(h.accessors.on("process",(t=>{l(),o(t)}))),g=h.accessors.write(i.imageWriter,{shapePreprocessor:i.shapePreprocessor||Y,imageScrambler:i.imageScrambler,willRequestResource:i.willRequestResource})})()}catch(t){s(t)}})),abortProcessImage:()=>{const t=c();t&&(g&&g(),t.accessors.processState=void 0)},destroy:()=>{h(),u()}}),i},ms=()=>{if(!ke())return 1/0;const t=/15_/.test(navigator.userAgent);return Oe()?t?14745600:16777216:t?16777216:1/0},gs=(t,e)=>Object.keys(t).filter((t=>!e.includes(t))).reduce(((e,i)=>(e[i]=t[i],e)),{});const ys=({imageDataResizer:t,canvasMemoryLimit:e}={})=>async(i,n,o,r)=>{o.width=Math.max(o.width,1),o.height=Math.max(o.height,1),r.width=Math.max(r.width,1),r.height=Math.max(r.height,1);const{dest:s}=await((t,e)=>{const{processImage:i}=fs();return i(t,e)})(n,{imageReader:js(),imageWriter:Ys({format:"canvas",targetSize:{...r,upscale:!0},imageDataResizer:t,canvasMemoryLimit:e}),imageCrop:o});i.drawImage(s,r.x,r.y,r.width,r.height),w(s)},vs=(t,e=((...t)=>t),i)=>async(n,o,r)=>{r(Te(0,!1));let s=!1;const a=await t(...e(n,o,(t=>{s=!0,r(t)})));return i&&i(n,a),s||r(Te(1,!1)),n},bs=({srcProp:t="src",destProp:e="dest"}={})=>[vs(Ie,((e,i,n)=>[e[t],n]),((t,i)=>t[e]=i)),"any-to-file"],xs=({srcProp:t="src",destProp:e="size"}={})=>[vs(Ce,(e=>[e[t]]),((t,i)=>t[e]=i)),"read-image-size"],$s=({srcSize:t="size",srcOrientation:e="orientation",destSize:i="size"}={})=>[vs(ze,(i=>[i[t],i[e]]),((t,e)=>t[i]=e)),"image-size-match-orientation"],ws=({srcProp:t="src",destProp:e="head"}={})=>[vs(((t,e)=>Fe(t)?g(t,e):void 0),(e=>[e[t],[0,131072],onprogress]),((t,i)=>t[e]=i)),"read-image-head"],_s=({srcProp:t="head",destProp:e="orientation"}={})=>[vs(u,(e=>[e[t],274]),((t,i=1)=>t[e]=i)),"read-exif-orientation-tag"],ks=({srcProp:t="head"}={})=>[vs(u,(e=>[e[t],274,1])),"clear-exif-orientation-tag"],Ss=({srcImageSize:t="size",srcCanvasSize:e="imageData",srcImageState:i="imageState",destImageSize:n="size",destScalar:o="scalar"}={})=>[vs(((t,e)=>[Math.min(e.width/t.width,e.height/t.height),$t(e)]),(n=>[n[t],n[e],n[i]]),((t,[e,i])=>{t[o]=e,t[n]=i})),"calculate-canvas-scalar"],Cs=({srcProp:t="src",destProp:e="imageData",canvasMemoryLimit:i})=>[vs(L,(e=>[e[t],i]),((t,i)=>t[e]=i)),"blob-to-image-data"],Ts=({srcImageData:t="imageData",srcOrientation:e="orientation"}={})=>[vs(S,(i=>[i[t],i[e]]),((t,e)=>t.imageData=e)),"image-data-match-orientation"],Ms=({srcImageData:t="imageData",srcImageState:e="imageState"}={})=>[vs(Vn,(i=>[i[t],{backgroundColor:i[e].backgroundColor}]),((t,e)=>t.imageData=e)),"image-data-fill"],Ps=({srcImageData:t="imageData",srcImageState:e="imageState",destScalar:i="scalar"}={})=>[vs(He,(n=>{const o=n[i];let{crop:r}=n[e];return r&&1!==o&&(r=qt(zt(r),o,K())),[n[t],{crop:r,rotation:n[e].rotation,flipX:n[e].flipX,flipY:n[e].flipY}]}),((t,e)=>t.imageData=e)),"image-data-crop"],Es=({targetSize:t={width:void 0,height:void 0,fit:void 0,upscale:void 0},imageDataResizer:e,srcProp:i="imageData",srcImageState:n="imageState",destImageScaledSize:o="imageScaledSize"})=>[vs(Ye,(o=>{const r=Math.min(t.width||Number.MAX_SAFE_INTEGER,o[n].targetSize&&o[n].targetSize.width||Number.MAX_SAFE_INTEGER),s=Math.min(t.height||Number.MAX_SAFE_INTEGER,o[n].targetSize&&o[n].targetSize.height||Number.MAX_SAFE_INTEGER);return[o[i],{width:r,height:s,fit:t.fit||"contain",upscale:(a=o[n],!!(a.targetSize&&a.targetSize.width||a.targetSize&&a.targetSize.height)||t.upscale||!1)},e];var a}),((t,e)=>{Ct(t.imageData,e)||(t[o]=$t(e)),t.imageData=e})),"image-data-resize"],Is=({srcImageData:t="imageData",srcImageState:e="imageState",destImageData:i="imageData"}={})=>[vs(Ze,(i=>{const{colorMatrix:n}=i[e],o=n&&Object.keys(n).map((t=>n[t])).filter(Boolean);return[i[t],{colorMatrix:o&&Un(o),convolutionMatrix:i[e].convolutionMatrix,gamma:i[e].gamma,noise:i[e].noise,vignette:i[e].vignette}]}),((t,e)=>t[i]=e)),"image-data-filter"],As=({srcImageData:e="imageData",srcImageState:i="imageState",destImageData:n="imageData",destScalar:o="scalar"}={})=>[vs((async(e,i,n,o,r)=>{if(!i)return e;let s;try{const t={dataSizeScalar:qn(e,o)};n&&n[3]>0&&(t.backgroundColor=[...n]),s=await i(e,t)}catch(t){}const a=t("canvas");a.width=e.width,a.height=e.height;const l=a.getContext("2d");l.putImageData(e,0,0);const c=new Path2D;o.forEach((t=>{const e=Yt(t.x,t.y,t.width,t.height);Xt(e,r);const i=te(zt(e),t.rotation),n=new Path2D;i.forEach(((t,e)=>{if(0===e)return n.moveTo(t.x,t.y);n.lineTo(t.x,t.y)})),c.addPath(n)})),l.clip(c,"nonzero"),l.imageSmoothingEnabled=!1,l.drawImage(s,0,0,a.width,a.height),w(s);const h=l.getImageData(0,0,a.width,a.height);return w(a),h}),((t,{imageScrambler:n})=>[t[e],n,t[i].backgroundColor,t[i].redaction,t[o]]),((t,e)=>t[n]=e)),"image-data-redact"],Ds=({srcImageData:t="imageData",srcSize:e="size",srcImageState:i="imageState",destImageData:n="imageData",destImageScaledSize:o="imageScaledSize",destScalar:r="scalar",imageDataResizer:s,canvasMemoryLimit:a}={})=>[vs(Yn,((n,{shapePreprocessor:l,willRequestResource:c})=>{const{annotation:h}=n[i];if(!h.length)return[n[t]];const u=n[r],{crop:d}=n[i],p=n[e];let f=u;const m=n[o];m&&(f=Math.min(m.width/d.width,m.height/d.height));const g={width:p.width/u,height:p.height/u};return[n[t],{shapes:h,computeShape:t=>(t=vn(t,g),t=gs(t,["left","right","top","bottom"]),Cn(t,f)),transform:t=>{const s=n[e],{rotation:a=0,flipX:l,flipY:c}=n[i],h=n[r],{crop:u=Bt(s)}=n[i],d=n[o],p=d?Math.min(d.width/u.width,d.height/u.height):1,f={width:s.width/h*p,height:s.height/h*p},m=((t,e)=>{const i=Bt(t),n=Vt(i),o=te(i,e,n);return ce(Ht(o))})(f,a),g=m.width,y=m.height,v=.5*f.width-.5*g,b=.5*f.height-.5*y,x=Mt(f);t.translate(-v,-b),t.translate(-u.x*p,-u.y*p),t.translate(x.x,x.y),t.rotate(a),t.translate(-x.x,-x.y),t.scale(l?-1:1,c?-1:1),t.translate(l?-f.width:0,c?-f.height:0),t.rect(0,0,f.width,f.height),t.clip()},drawImage:ys({imageDataResizer:s,canvasMemoryLimit:a}),preprocessShape:t=>l(t,{isPreview:!1}),canvasMemoryLimit:a,willRequestResource:c}]}),((t,e)=>t[n]=e)),"image-data-annotate"],Rs=({srcImageData:t="imageData",srcImageState:e="imageState",destImageData:i="imageData",destImageScaledSize:n="imageScaledSize",imageDataResizer:o,canvasMemoryLimit:r,destScalar:s="scalar"}={})=>[vs(Yn,((i,{shapePreprocessor:a,willRequestResource:l})=>{const{decoration:c}=i[e];if(!c.length)return[i[t]];let h=i[s];const{crop:u}=i[e],d=i[n];if(d){const t=Math.min(d.width/u.width,d.height/u.height);h=t}return[i[t],{shapes:c,drawImage:ys({imageDataResizer:o,canvasMemoryLimit:r}),computeShape:t=>(t=vn(t,u),t=gs(t,["left","right","top","bottom"]),Cn(t,h)),preprocessShape:t=>a(t,{isPreview:!1}),canvasMemoryLimit:r,willRequestResource:l}]}),((t,e)=>t[i]=e)),"image-data-decorate"],Ls=({srcImageData:t="imageData",srcImageState:e="imageState",destImageData:i="imageData",destImageScaledSize:n="imageScaledSize",imageDataResizer:o,canvasMemoryLimit:r,destScalar:s="scalar"}={})=>[vs(Yn,((i,{shapePreprocessor:a,willRequestResource:l})=>{const c=i[e].frame;if(!c)return[i[t]];const h=i[s];let{crop:u}=i[e];u&&1!==h&&(u=qt(zt(u),h,K()));const d={...u},p=_n(kn(c,d,a),d);d.x=Math.abs(p.left),d.y=Math.abs(p.top),d.width+=Math.abs(p.left)+Math.abs(p.right),d.height+=Math.abs(p.top)+Math.abs(p.bottom);const f=i[n],m=f?Math.min(f.width/u.width,f.height/u.height):1;return Xt(d,m),d.x=Math.floor(d.x),d.y=Math.floor(d.y),d.width=Math.floor(d.width),d.height=Math.floor(d.height),[i[t],{shapes:[c],contextBounds:d,computeShape:e=>vn(e,i[t]),transform:t=>{t.translate(d.x,d.y)},drawImage:ys({imageDataResizer:o,canvasMemoryLimit:r}),preprocessShape:t=>a(t,{isPreview:!1}),canvasMemoryLimit:r,willRequestResource:l}]}),((t,e)=>t[i]=e)),"image-data-frame"],Os=({mimeType:t,quality:e,srcImageData:i="imageData",srcFile:n="src",destBlob:o="blob"}={})=>[vs(z,(o=>[o[i],t||H(o[n].name)||o[n].type,e]),((t,e)=>t[o]=e)),"image-data-to-blob"],zs=({srcImageData:t="imageData",srcOrientation:e="orientation",destCanvas:i="dest"}={})=>[vs(k,(i=>[i[t],i[e]]),((t,e)=>t[i]=e)),"image-data-to-canvas"],Fs=async(t,e)=>{if(!Fe(t)||!e)return t;const i=new DataView(e),n=h(i);if(!n||!n.exif)return t;const{exif:o}=n;return((t,e,i=[0,t.size])=>e?new Blob([e,t.slice(...i)],{type:t.type}):t)(t,e.slice(0,o.offset+o.size+2),[20])},Bs=(t="blob",e="head",i="blob")=>[vs(Fs,(i=>[i[t],i[e]]),((t,e)=>t[i]=e)),"blob-write-image-head"],Ns=({renameFile:t,srcBlob:e="blob",srcFile:i="src",destFile:n="dest",defaultFilename:o}={})=>[vs(W,(n=>[n[e],t?t(n[i]):n[i].name||`${o}.${F(n[e].type)}`]),((t,e)=>t[n]=e)),"blob-to-file"],Hs=({url:t="./",dataset:e=(t=>[["dest",t.dest,t.dest.name],["imageState",t.imageState]]),destStore:i="store"})=>[vs((async(e,i)=>await((t,e,i)=>new Promise(((n,o)=>{const{token:r={},beforeSend:s=f,onprogress:a=f}=i;r.cancel=()=>l.abort();const l=new XMLHttpRequest;l.upload.onprogress=a,l.onload=()=>l.status>=200&&l.status<300?n(l):o(l),l.onerror=()=>o(l),l.ontimeout=()=>o(l),l.open("POST",encodeURI(t)),s(l),l.send(e instanceof FormData?e:e.reduce(((t,e)=>(t.append(...e.map(Be)),t)),new FormData))})))(t,e,{onprogress:i})),((t,i,n)=>[e(t),n]),((t,e)=>t[i]=e)),"store"],Ws=t=>[vs((e=>t&&t.length?(Object.keys(e).forEach((i=>{t.includes(i)||delete e[i]})),e):e)),"prop-filter"],js=(t={})=>{const{orientImage:e=!0,outputProps:i=["src","dest","size"],preprocessImageFile:n}=t;return[bs(),n&&[vs(n,((t,e,i)=>[t.dest,e,i]),((t,e)=>t.dest=e)),"preprocess-image-file"],xs({srcProp:"dest"}),e&&ws({srcProp:"dest"}),e&&_s(),e&&$s(),Ws(i)].filter(Boolean)},Ys=(t={})=>{const{canvasMemoryLimit:i=ms(),orientImage:n=!0,copyImageHead:o=!0,mimeType:r,quality:s,renameFile:a,targetSize:l,imageDataResizer:c,store:h,format:u="file",outputProps:d=["src","dest","imageState","store"],preprocessImageSource:p,preprocessImageState:f,postprocessImageData:m,postprocessImageBlob:g}=t;return[p&&[vs(p,((t,e,i)=>[t.src,e,i,t.imageState]),((t,e)=>t.src=e)),"preprocess-image-source"],(n||o)&&ws(),n&&_s(),xs(),f&&[vs(f,((t,e,i)=>[t.imageState,e,i]),((t,e)=>t.imageState=e)),"preprocess-image-state"],Cs({canvasMemoryLimit:i}),n&&$s(),n&&Ts(),Ss(),As(),Ps(),Es({imageDataResizer:c,targetSize:l}),Is(),Ms(),Ds({imageDataResizer:c,canvasMemoryLimit:i}),Rs({imageDataResizer:c,canvasMemoryLimit:i}),Ls({imageDataResizer:c,canvasMemoryLimit:i}),m&&[vs(m,((t,e,i)=>[t.imageData,e,i]),((t,e)=>t.imageData=e)),"postprocess-image-data"],"file"===u?Os({mimeType:r,quality:s}):"canvas"===u?zs():[t=>(t.dest=t.imageData,t)],"file"===u&&n&&ks(),"file"===u&&o&&Bs(),g&&[vs(g,(({blob:t,imageData:e,src:i},n,o)=>[{blob:t,imageData:e,src:i},n,o]),((t,e)=>t.blob=e)),"postprocess-image-file"],"file"===u&&Ns({defaultFilename:"image",renameFile:a}),"file"===u?h&&(e(h)?Hs({url:h}):P(h)?[h,"store"]:Hs(h)):P(h)&&[h,"store"],Ws(d)].filter(Boolean)};var Vs=(t,e)=>{const{imageData:i,amount:n=1}=t,o=Math.round(2*Math.max(1,n)),r=Math.round(.5*o),s=i.width,a=i.height,l=new Uint8ClampedArray(s*a*4),c=i.data;let h,u,d,p,f,m=0,g=0,y=0;const v=s*a*4-4;for(d=0;d<a;d++)for(h=crypto.getRandomValues(new Uint8ClampedArray(a)),u=0;u<s;u++)p=h[d]/255,g=0,y=0,p<.5&&(g=4*(-r+Math.round(Math.random()*o))),p>.5&&(y=(-r+Math.round(Math.random()*o))*(4*s)),f=Math.min(Math.max(0,m+g+y),v),l[m]=c[f],l[m+1]=c[f+1],l[m+2]=c[f+2],l[m+3]=c[f+3],m+=4;e(null,{data:l,width:i.width,height:i.height})};const Us=[.0625,.125,.0625,.125,.25,.125,.0625,.125,.0625];function qs(t){return Math.sqrt(1- --t*t)}function Xs(t){return"[object Date]"===Object.prototype.toString.call(t)}function Gs(t,e){if(t===e||t!=t)return()=>t;const i=typeof t;if(i!==typeof e||Array.isArray(t)!==Array.isArray(e))throw new Error("Cannot interpolate values of different type");if(Array.isArray(t)){const i=e.map(((e,i)=>Gs(t[i],e)));return t=>i.map((e=>e(t)))}if("object"===i){if(!t||!e)throw new Error("Object cannot be null");if(Xs(t)&&Xs(e)){t=t.getTime();const i=(e=e.getTime())-t;return e=>new Date(t+e*i)}const i=Object.keys(e),n={};return i.forEach((i=>{n[i]=Gs(t[i],e[i])})),t=>{const e={};return i.forEach((i=>{e[i]=n[i](t)})),e}}if("number"===i){const i=e-t;return e=>t+e*i}throw new Error(`Cannot interpolate ${i} values`)}function Zs(t,e={}){const i=Dr(t);let n,o=t;function r(r,s){if(null==t)return i.set(t=r),Promise.resolve();o=r;let a=n,l=!1,{delay:c=0,duration:h=400,easing:u=Gn,interpolate:d=Gs}=Zn(Zn({},e),s);if(0===h)return a&&(a.abort(),a=null),i.set(t=o),Promise.resolve();const p=fo()+c;let f;return n=vo((e=>{if(e<p)return!0;l||(f=d(t,r),"function"==typeof h&&(h=h(t,r)),l=!0),a&&(a.abort(),a=null);const n=e-p;return n>h?(i.set(t=r),!1):(i.set(t=f(u(n/h))),!0)})),n.promise}return{set:r,update:(e,i)=>r(e(o,t),i),subscribe:i.subscribe}}function Ks(t,e,i,n){if("number"==typeof i){const o=n-i,r=(i-e)/(t.dt||1/60),s=(r+(t.opts.stiffness*o-t.opts.damping*r)*t.inv_mass)*t.dt;return Math.abs(s)<t.opts.precision&&Math.abs(o)<t.opts.precision?n:(t.settled=!1,i+s)}if(ti(i))return i.map(((o,r)=>Ks(t,e[r],i[r],n[r])));if("object"==typeof i){const o={};for(const r in i)o[r]=Ks(t,e[r],i[r],n[r]);return o}throw new Error(`Cannot spring ${typeof i} values`)}function Qs(t,e={}){const i=Dr(t),{stiffness:n=.15,damping:o=.8,precision:r=.01}=e;let s,a,l,c=t,h=t,u=1,d=0,p=!1;function f(e,n={}){h=e;const o=l={};if(null==t||n.hard||m.stiffness>=1&&m.damping>=1)return p=!0,s=null,c=e,i.set(t=h),Promise.resolve();if(n.soft){const t=!0===n.soft?.5:+n.soft;d=1/(60*t),u=0}if(!a){s=null,p=!1;const e={inv_mass:void 0,opts:m,settled:!0,dt:void 0};a=vo((n=>{if(null===s&&(s=n),p)return p=!1,a=null,!1;u=Math.min(u+d,1),e.inv_mass=u,e.opts=m,e.settled=!0,e.dt=60*(n-s)/1e3;const o=Ks(e,c,t,h);return s=n,c=t,i.set(t=o),e.settled&&(a=null),!e.settled}))}return new Promise((t=>{a.promise.then((()=>{o===l&&t()}))}))}const m={set:f,update:(e,i)=>f(e(h,t),i),subscribe:i.subscribe,stiffness:n,damping:o,precision:r};return m}var Js=Ar(!1,(t=>{const e=window.matchMedia("(prefers-reduced-motion:reduce)");t(e.matches),e.onchange=()=>t(e.matches)}));const ta=Ft(),ea=(t,e,i,n,o)=>{t.rect||(t.rect=Ft());const r=t.rect;Qt(ta,e,i,n,o),Zt(r,ta)||(Jt(r,ta),t.dispatchEvent(new CustomEvent("measure",{detail:r})))},ia=Math.round,na=t=>{const e=t.getBoundingClientRect();ea(t,ia(e.x),ia(e.y),ia(e.width),ia(e.height))},oa=t=>ea(t,t.offsetLeft,t.offsetTop,t.offsetWidth,t.offsetHeight),ra=[];let sa,aa=null;function la(){ra.length?(ra.forEach((t=>t.measure(t))),aa=requestAnimationFrame(la)):aa=null}let ca=0;var ha=(t,e={})=>{const{observePosition:i=!1,observeViewRect:n=!1,once:o=!1,disabled:r=!1}=e;if(!r)return!("ResizeObserver"in window)||i||n?(t.measure=n?na:oa,ra.push(t),aa||(aa=requestAnimationFrame(la)),t.measure(t),{destroy(){const e=ra.indexOf(t);ra.splice(e,1),delete t.measure}}):(sa||(sa=new ResizeObserver((t=>{t.forEach((t=>oa(t.target)))}))),sa.observe(t),oa(t),o?sa.unobserve(t):ca++,{destroy(){o||(sa.unobserve(t),ca--,0===ca&&(sa.disconnect(),sa=void 0))}})},ua=t=>{let e=!1;const i={pointerdown:()=>{e=!1},keydown:()=>{e=!0},keyup:()=>{e=!1},focus:t=>{e&&(t.target.dataset.focusVisible="")},blur:t=>{delete t.target.dataset.focusVisible}};return Object.keys(i).forEach((e=>t.addEventListener(e,i[e],!0))),{destroy(){Object.keys(i).forEach((e=>t.removeEventListener(e,i[e],!0)))}}};let da=null;var pa=()=>{if(null===da)if("WebGL2RenderingContext"in window){let e;try{e=t("canvas"),da=!!e.getContext("webgl2")}catch(t){da=!1}e&&w(e),e=void 0}else da=!1;return da},fa=(t,e)=>pa()?t.getContext("webgl2",e):t.getContext("webgl",e)||t.getContext("experimental-webgl",e);let ma=null;var ga=()=>{if(null===ma)if(n()){const e=t("canvas");ma=!fa(e,{failIfMajorPerformanceCaveat:!0}),w(e)}else ma=!1;return ma},ya=t=>0==(t&t-1),va=(t,e={},i="",n="")=>Object.keys(e).filter((t=>!C(e[t]))).reduce(((t,o)=>t.replace(new RegExp(i+o+n),e[o])),t);const ba={head:"#version 300 es\n\nin vec4 aPosition;uniform mat4 uMatrix;",text:"\nin vec2 aTexCoord;out vec2 vTexCoord;",matrix:"\ngl_Position=uMatrix*vec4(aPosition.x,aPosition.y,0,1);"},xa={head:"#version 300 es\nprecision highp float;\n\nout vec4 fragColor;",mask:"\nuniform float uMaskFeather[8];uniform float uMaskBounds[4];uniform float uMaskOpacity;float mask(float x,float y,float bounds[4],float opacity){return 1.0-(1.0-(smoothstep(bounds[3],bounds[3]+1.0,x)*(1.0-smoothstep(bounds[1]-1.0,bounds[1],x))*(1.0-step(bounds[0],y))*step(bounds[2],y)))*(1.0-opacity);}",init:"\nfloat a=1.0;vec4 fillColor=uColor;vec4 textureColor=texture(uTexture,vTexCoord);textureColor*=(1.0-step(1.0,vTexCoord.y))*step(0.0,vTexCoord.y)*(1.0-step(1.0,vTexCoord.x))*step(0.0,vTexCoord.x);",colorize:"\nif(uTextureColor.a!=0.0&&textureColor.a>0.0){vec3 colorFlattened=textureColor.rgb/textureColor.a;if(colorFlattened.r>=.9999&&colorFlattened.g==0.0&&colorFlattened.b>=.9999){textureColor.rgb=uTextureColor.rgb*textureColor.a;}textureColor*=uTextureColor.a;}",maskapply:"\nfloat m=mask(gl_FragCoord.x,gl_FragCoord.y,uMaskBounds,uMaskOpacity);",maskfeatherapply:"\nfloat leftFeatherOpacity=step(uMaskFeather[1],gl_FragCoord.x)*uMaskFeather[0]+((1.0-uMaskFeather[0])*smoothstep(uMaskFeather[1],uMaskFeather[3],gl_FragCoord.x));float rightFeatherOpacity=(1.0-step(uMaskFeather[7],gl_FragCoord.x))*uMaskFeather[4]+((1.0-uMaskFeather[4])*smoothstep(uMaskFeather[7],uMaskFeather[5],gl_FragCoord.x));a*=leftFeatherOpacity*rightFeatherOpacity;",edgeaa:"\nvec2 scaledPoint=vec2(vRectCoord.x*uSize.x,vRectCoord.y*uSize.y);a*=smoothstep(0.0,1.0,uSize.x-scaledPoint.x);a*=smoothstep(0.0,1.0,uSize.y-scaledPoint.y);a*=smoothstep(0.0,1.0,scaledPoint.x);a*=smoothstep(0.0,1.0,scaledPoint.y);",cornerradius:"\nvec2 s=(uSize-2.0)*.5;vec2 r=(vRectCoord*uSize);vec2 p=r-(uSize*.5);float cornerRadius=uCornerRadius[0];bool left=r.x<s.x;bool top=r.y<s.x;if(!left&&top){cornerRadius=uCornerRadius[1];}if(!left&&!top){cornerRadius=uCornerRadius[3];}if(left&&!top){cornerRadius=uCornerRadius[2];}a*=1.0-clamp(length(max(abs(p)-(s-cornerRadius),0.0))-cornerRadius,0.0,1.0);",fragcolor:"\nif(m<=0.0)discard;fillColor.a*=a;fillColor.rgb*=fillColor.a;fillColor.rgb*=m;fillColor.rgb+=(1.0-m)*(uCanvasColor.rgb*fillColor.a);textureColor*=uTextureOpacity;textureColor.a*=a;textureColor.rgb*=m*a;textureColor.rgb+=(1.0-m)*(uCanvasColor.rgb*textureColor.a);fragColor=textureColor+(fillColor*(1.0-textureColor.a));"},$a=(t,e,i)=>{const n=t.createShader(i),o=((t,e,i)=>(e=va(e,i===t.VERTEX_SHADER?ba:xa,"##").trim(),pa()?e:(e=(e=e.replace(/#version.+/gm,"").trim()).replace(/^\/\/\#/gm,"#"),i===t.VERTEX_SHADER&&(e=e.replace(/in /gm,"attribute ").replace(/out /g,"varying ")),i===t.FRAGMENT_SHADER&&(e=e.replace(/in /gm,"varying ").replace(/out.*?;/gm,"").replace(/texture\(/g,"texture2D(").replace(/fragColor/g,"gl_FragColor")),""+e)))(t,e,i);return t.shaderSource(n,o),t.compileShader(n),t.getShaderParameter(n,t.COMPILE_STATUS)||console.error(t.getShaderInfoLog(n)),n},wa=(t,e,i,n,o)=>{const r=$a(t,e,t.VERTEX_SHADER),s=$a(t,i,t.FRAGMENT_SHADER),a=t.createProgram();t.attachShader(a,r),t.attachShader(a,s),t.linkProgram(a);const l={};return n.forEach((e=>{l[e]=t.getAttribLocation(a,e)})),o.forEach((e=>{l[e]=t.getUniformLocation(a,e)})),{program:a,locations:l,destroy(){t.detachShader(a,r),t.detachShader(a,s),t.deleteShader(r),t.deleteShader(s),t.deleteProgram(a)}}},_a=t=>!!pa()||ya(t.width)&&ya(t.height),ka=(t,e=1)=>t?[t[0],t[1],t[2],Ke(t[3])?e*t[3]:e]:[0,0,0,0],Sa=()=>{const t=new Float32Array(16);return t[0]=1,t[5]=1,t[10]=1,t[15]=1,t},Ca=(t,e,i,n,o,r,s)=>{const a=1/(e-i),l=1/(n-o),c=1/(r-s);t[0]=-2*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(e+i)*a,t[13]=(o+n)*l,t[14]=(s+r)*c,t[15]=1},Ta=(t,e,i,n)=>{t[12]=t[0]*e+t[4]*i+t[8]*n+t[12],t[13]=t[1]*e+t[5]*i+t[9]*n+t[13],t[14]=t[2]*e+t[6]*i+t[10]*n+t[14],t[15]=t[3]*e+t[7]*i+t[11]*n+t[15]},Ma=(t,e)=>{t[0]*=e,t[1]*=e,t[2]*=e,t[3]*=e,t[4]*=e,t[5]*=e,t[6]*=e,t[7]*=e,t[8]*=e,t[9]*=e,t[10]*=e,t[11]*=e},Pa=(t,e)=>{const i=Math.sin(e),n=Math.cos(e),o=t[4],r=t[5],s=t[6],a=t[7],l=t[8],c=t[9],h=t[10],u=t[11];t[4]=o*n+l*i,t[5]=r*n+c*i,t[6]=s*n+h*i,t[7]=a*n+u*i,t[8]=l*n-o*i,t[9]=c*n-r*i,t[10]=h*n-s*i,t[11]=u*n-a*i},Ea=(t,e)=>{const i=Math.sin(e),n=Math.cos(e),o=t[0],r=t[1],s=t[2],a=t[3],l=t[8],c=t[9],h=t[10],u=t[11];t[0]=o*n-l*i,t[1]=r*n-c*i,t[2]=s*n-h*i,t[3]=a*n-u*i,t[8]=o*i+l*n,t[9]=r*i+c*n,t[10]=s*i+h*n,t[11]=a*i+u*n},Ia=(t,e)=>{const i=Math.sin(e),n=Math.cos(e),o=t[0],r=t[1],s=t[2],a=t[3],l=t[4],c=t[5],h=t[6],u=t[7];t[0]=o*n+l*i,t[1]=r*n+c*i,t[2]=s*n+h*i,t[3]=a*n+u*i,t[4]=l*n-o*i,t[5]=c*n-r*i,t[6]=h*n-s*i,t[7]=u*n-a*i},Aa=(t,e,i,n,o)=>{const r=rt(Q(n.x-i.x,n.y-i.y)),s=rt(Q(o.x-n.x,o.y-n.y)),a=rt(Q(r.x+s.x,r.y+s.y)),l=Q(-a.y,a.x),c=Q(-r.y,r.x),h=Math.min(1/dt(l,c),5);t[e]=n.x,t[e+1]=n.y,t[e+2]=l.x*h,t[e+3]=l.y*h,t[e+4]=-1,t[e+5]=n.x,t[e+6]=n.y,t[e+7]=l.x*h,t[e+8]=l.y*h,t[e+9]=1},Da=t=>{const e=new Float32Array(8);return e[0]=t[3].x,e[1]=t[3].y,e[2]=t[0].x,e[3]=t[0].y,e[4]=t[2].x,e[5]=t[2].y,e[6]=t[1].x,e[7]=t[1].y,e},Ra=(t,e=0,i,n)=>{const o=se(t),r=t.x+.5*t.width,s=t.y+.5*t.height;return(i||n)&&yt(o,i,n,r,s),0!==e&&vt(o,e,r,s),o},La=(t,e,i,n,o)=>{const r=Math.min(20,Math.max(4,Math.round(n/2)));let s=0,a=0,l=0,c=0,h=0;for(;h<r;h++)s=h/r,a=o*U+s*U,l=n*Math.cos(a),c=n*Math.sin(a),t.push(Q(e+l,i+c))};let Oa=null;var za=()=>{if(null!==Oa)return Oa;let e=t("canvas");const i=fa(e);return Oa=i?i.getParameter(i.MAX_TEXTURE_SIZE):void 0,w(e),e=void 0,Oa};let Fa=null;const Ba=new Float32Array([0,1,0,0,1,1,1,0]),Na=[0,0,0,0,1,0,0,0,0],Ha=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],Wa=[0,0,0,0],ja=[0,0,0,0],Ya=(t,e,i,n,o)=>{if(!i||!n)return Ba;const r=n.x/i.width,s=n.y/i.height;let a=t/i.width/o,l=e/i.height/o;return a-=r,l-=s,new Float32Array([-r,l,-r,-s,a,l,a,-s])};var Va=t=>{const e={width:0,height:0},i={width:0,height:0},n=za()||1024;let o,r;const s=Sa(),a=Sa();let l,c,h,u,d,p,f,m,g,y=0,v=0,b=0;const x=new Map([]),$=()=>{S.stencilOp(S.KEEP,S.KEEP,S.KEEP),S.stencilFunc(S.ALWAYS,1,255),S.stencilMask(255)},_=30*Math.PI/180,k=Math.tan(_/2),S=fa(t,{antialias:!1,alpha:!1,premultipliedAlpha:!0,stencil:!0});if(!S)return;S.getExtension("OES_standard_derivatives"),S.disable(S.DEPTH_TEST),S.enable(S.STENCIL_TEST),S.enable(S.BLEND),S.blendFunc(S.ONE,S.ONE_MINUS_SRC_ALPHA),S.pixelStorei(S.UNPACK_PREMULTIPLY_ALPHA_WEBGL,(null===Fa&&(Fa=Re(/Firefox/)),!Fa)),$();const C=S.createTexture();S.bindTexture(S.TEXTURE_2D,C),S.texImage2D(S.TEXTURE_2D,0,S.RGBA,1,1,0,S.RGBA,S.UNSIGNED_BYTE,new Uint8Array(Wa)),x.set(0,C);const T=S.createTexture();x.set(2,T);const M=S.createFramebuffer(),P=S.createTexture();x.set(1,P);const E=S.createFramebuffer(),I=wa(S,"\n##head\n##text\nvoid main(){vTexCoord=aTexCoord;gl_Position=uMatrix*aPosition;}","\n##head\nin vec2 vTexCoord;uniform sampler2D uTexture;uniform sampler2D uTextureOverlay;uniform sampler2D uTextureBlend;uniform vec2 uTextureSize;uniform float uOpacity;uniform vec4 uFillColor;uniform vec4 uOverlayColor;uniform mat4 uColorMatrix;uniform vec4 uColorOffset;uniform float uClarityKernel[9];uniform float uClarityKernelWeight;uniform float uColorGamma;uniform float uColorVignette;uniform float uMaskClip;uniform float uMaskOpacity;uniform float uMaskBounds[4];uniform float uMaskCornerRadius[4];uniform float uMaskFeather[8];vec4 applyGamma(vec4 c,float g){c.r=pow(c.r,g);c.g=pow(c.g,g);c.b=pow(c.b,g);return c;}vec4 applyColorMatrix(vec4 c,mat4 m,vec4 o){vec4 cM=(c*m)+o;cM*=cM.a;return cM;}vec4 applyConvolutionMatrix(vec4 c,float k0,float k1,float k2,float k3,float k4,float k5,float k6,float k7,float k8,float w){vec2 pixel=vec2(1)/uTextureSize;vec4 colorSum=texture(uTexture,vTexCoord-pixel)*k0+texture(uTexture,vTexCoord+pixel*vec2(0.0,-1.0))*k1+texture(uTexture,vTexCoord+pixel*vec2(1.0,-1.0))*k2+texture(uTexture,vTexCoord+pixel*vec2(-1.0,0.0))*k3+texture(uTexture,vTexCoord)*k4+texture(uTexture,vTexCoord+pixel*vec2(1.0,0.0))*k5+texture(uTexture,vTexCoord+pixel*vec2(-1.0,1.0))*k6+texture(uTexture,vTexCoord+pixel*vec2(0.0,1.0))*k7+texture(uTexture,vTexCoord+pixel)*k8;vec4 color=vec4((colorSum/w).rgb,c.a);color.rgb=clamp(color.rgb,0.0,1.0);return color;}vec4 applyVignette(vec4 c,vec2 pos,vec2 center,float v){float d=distance(pos,center)/length(center);float f=1.0-(d*abs(v));if(v>0.0){c.rgb*=f;}else if(v<0.0){c.rgb+=(1.0-f)*(1.0-c.rgb);}return c;}vec4 blendPremultipliedAlpha(vec4 back,vec4 front){return front+(back*(1.0-front.a));}void main(){float x=gl_FragCoord.x;float y=gl_FragCoord.y;float a=1.0;float maskTop=uMaskBounds[0];float maskRight=uMaskBounds[1];float maskBottom=uMaskBounds[2];float maskLeft=uMaskBounds[3];float leftFeatherOpacity=step(uMaskFeather[1],x)*uMaskFeather[0]+((1.0-uMaskFeather[0])*smoothstep(uMaskFeather[1],uMaskFeather[3],x));float rightFeatherOpacity=(1.0-step(uMaskFeather[7],x))*uMaskFeather[4]+((1.0-uMaskFeather[4])*smoothstep(uMaskFeather[7],uMaskFeather[5],x));a*=leftFeatherOpacity*rightFeatherOpacity;float overlayColorAlpha=(smoothstep(maskLeft,maskLeft+1.0,x)*(1.0-smoothstep(maskRight-1.0,maskRight,x))*(1.0-step(maskTop,y))*step(maskBottom,y));if(uOverlayColor.a==0.0){a*=overlayColorAlpha;}vec2 offset=vec2(maskLeft,maskBottom);vec2 size=vec2(maskRight-maskLeft,maskTop-maskBottom)*.5;vec2 center=offset.xy+size.xy;int pixelX=int(step(center.x,x));int pixelY=int(step(y,center.y));float cornerRadius=0.0;if(pixelX==0&&pixelY==0)cornerRadius=uMaskCornerRadius[0];if(pixelX==1&&pixelY==0)cornerRadius=uMaskCornerRadius[1];if(pixelX==0&&pixelY==1)cornerRadius=uMaskCornerRadius[2];if(pixelX==1&&pixelY==1)cornerRadius=uMaskCornerRadius[3];float cornerOffset=sign(cornerRadius)*length(max(abs(gl_FragCoord.xy-size-offset)-size+cornerRadius,0.0))-cornerRadius;float cornerOpacity=1.0-smoothstep(0.0,1.0,cornerOffset);a*=cornerOpacity;vec2 scaledPoint=vec2(vTexCoord.x*uTextureSize.x,vTexCoord.y*uTextureSize.y);a*=smoothstep(0.0,1.0,uTextureSize.x-scaledPoint.x);a*=smoothstep(0.0,1.0,uTextureSize.y-scaledPoint.y);a*=smoothstep(0.0,1.0,scaledPoint.x);a*=smoothstep(0.0,1.0,scaledPoint.y);vec4 color=texture(uTexture,vTexCoord);color=blendPremultipliedAlpha(color,texture(uTextureBlend,vTexCoord));if(uClarityKernelWeight!=-1.0){color=applyConvolutionMatrix(color,uClarityKernel[0],uClarityKernel[1],uClarityKernel[2],uClarityKernel[3],uClarityKernel[4],uClarityKernel[5],uClarityKernel[6],uClarityKernel[7],uClarityKernel[8],uClarityKernelWeight);}color=applyGamma(color,uColorGamma);color=applyColorMatrix(color,uColorMatrix,uColorOffset);color=blendPremultipliedAlpha(uFillColor,color);color*=a;if(uColorVignette!=0.0){vec2 pos=gl_FragCoord.xy-offset;color=applyVignette(color,pos,center-offset,uColorVignette);}color=blendPremultipliedAlpha(color,texture(uTextureOverlay,vTexCoord));vec4 overlayColor=uOverlayColor*(1.0-overlayColorAlpha);overlayColor.rgb*=overlayColor.a;color=blendPremultipliedAlpha(color,overlayColor);if(uOverlayColor.a>0.0&&color.a<1.0&&uFillColor.a>0.0){color=blendPremultipliedAlpha(uFillColor,overlayColor);}color*=uOpacity;fragColor=color;}",["aPosition","aTexCoord"],["uMatrix","uTexture","uTextureBlend","uTextureOverlay","uTextureSize","uColorGamma","uColorVignette","uColorOffset","uColorMatrix","uClarityKernel","uClarityKernelWeight","uOpacity","uMaskOpacity","uMaskBounds","uMaskCornerRadius","uMaskFeather","uFillColor","uOverlayColor"]),A=S.createBuffer(),D=S.createBuffer();S.bindBuffer(S.ARRAY_BUFFER,D),S.bufferData(S.ARRAY_BUFFER,Ba,S.STATIC_DRAW);const R=wa(S,"#version 300 es\n\nin vec4 aPosition;in vec2 aNormal;in float aMiter;out vec2 vNormal;out float vMiter;out float vWidth;uniform float uWidth;uniform mat4 uMatrix;void main(){vMiter=aMiter;vNormal=aNormal;vWidth=(uWidth*.5)+1.0;gl_Position=uMatrix*vec4(aPosition.x+(aNormal.x*vWidth*aMiter),aPosition.y+(aNormal.y*vWidth*aMiter),0,1);}","\n##head\n##mask\nin vec2 vNormal;in float vMiter;in float vWidth;uniform float uWidth;uniform vec4 uColor;uniform vec4 uCanvasColor;void main(){vec4 fillColor=uColor;float m=mask(gl_FragCoord.x,gl_FragCoord.y,uMaskBounds,uMaskOpacity);if(m<=0.0)discard;fillColor.a*=clamp(smoothstep(vWidth-.5,vWidth-1.0,abs(vMiter)*vWidth),0.0,1.0);fillColor.rgb*=fillColor.a;fillColor.rgb*=m;fillColor.rgb+=(1.0-m)*(uCanvasColor.rgb*fillColor.a);fragColor=fillColor;}",["aPosition","aNormal","aMiter"],["uColor","uCanvasColor","uMatrix","uWidth","uMaskBounds","uMaskOpacity"]),L=S.createBuffer(),O=(t,e,i,n=!1)=>{const{program:o,locations:r}=R;S.useProgram(o),S.enableVertexAttribArray(r.aPosition),S.enableVertexAttribArray(r.aNormal),S.enableVertexAttribArray(r.aMiter);const s=((t,e)=>{let i,n,o,r=0;const s=t.length,a=new Float32Array(10*(e?s+1:s)),l=t[0],c=t[s-1];for(r=0;r<s;r++)i=t[r-1],n=t[r],o=t[r+1],i||(i=e?c:Q(n.x+(n.x-o.x),n.y+(n.y-o.y))),o||(o=e?l:Q(n.x+(n.x-i.x),n.y+(n.y-i.y))),Aa(a,10*r,i,n,o);return e&&Aa(a,10*s,c,l,t[1]),a})(t,n),a=5*Float32Array.BYTES_PER_ELEMENT,c=2*Float32Array.BYTES_PER_ELEMENT,h=4*Float32Array.BYTES_PER_ELEMENT;S.uniform1f(r.uWidth,e),S.uniform4fv(r.uColor,i),S.uniformMatrix4fv(r.uMatrix,!1,l),S.uniform4f(r.uCanvasColor,y,v,b,1),S.uniform1fv(r.uMaskBounds,f),S.uniform1f(r.uMaskOpacity,p),S.bindBuffer(S.ARRAY_BUFFER,L),S.bufferData(S.ARRAY_BUFFER,s,S.STATIC_DRAW),S.vertexAttribPointer(r.aPosition,2,S.FLOAT,!1,a,0),S.vertexAttribPointer(r.aNormal,2,S.FLOAT,!1,a,c),S.vertexAttribPointer(r.aMiter,1,S.FLOAT,!1,a,h),S.drawArrays(S.TRIANGLE_STRIP,0,s.length/5),S.disableVertexAttribArray(r.aPosition),S.disableVertexAttribArray(r.aNormal),S.disableVertexAttribArray(r.aMiter)},z=wa(S,"\n##head\nvoid main(){\n##matrix\n}","\n##head\n##mask\nuniform vec4 uColor;uniform vec4 uCanvasColor;void main(){vec4 fillColor=uColor;\n##maskapply\nfillColor.rgb*=fillColor.a;fillColor.rgb*=m;fillColor.rgb+=(1.0-m)*(uCanvasColor.rgb*fillColor.a);fragColor=fillColor;}",["aPosition"],["uColor","uCanvasColor","uMatrix","uMaskBounds","uMaskOpacity"]),F=S.createBuffer(),B=wa(S,"\n##head\n##text\nin vec2 aRectCoord;out vec2 vRectCoord;void main(){vTexCoord=aTexCoord;vRectCoord=aRectCoord;\n##matrix\n}","\n##head\n##mask\nin vec2 vTexCoord;in vec2 vRectCoord;uniform sampler2D uTexture;uniform vec4 uTextureColor;uniform float uTextureOpacity;uniform vec4 uColor;uniform float uCornerRadius[4];uniform vec2 uSize;uniform vec2 uPosition;uniform vec4 uCanvasColor;uniform int uInverted;void main(){\n##init\n##colorize\n##edgeaa\n##cornerradius\n##maskfeatherapply\nif(uInverted==1)a=1.0-a;\n##maskapply\n##fragcolor\n}",["aPosition","aTexCoord","aRectCoord"],["uTexture","uColor","uMatrix","uCanvasColor","uTextureColor","uTextureOpacity","uPosition","uSize","uMaskBounds","uMaskOpacity","uMaskFeather","uCornerRadius","uInverted"]),N=S.createBuffer(),H=S.createBuffer(),W=S.createBuffer(),Y=wa(S,"\n##head\n##text\nout vec2 vTexCoordDouble;void main(){vTexCoordDouble=vec2(aTexCoord.x*2.0-1.0,aTexCoord.y*2.0-1.0);vTexCoord=aTexCoord;\n##matrix\n}","\n##head\n##mask\nin vec2 vTexCoord;in vec2 vTexCoordDouble;uniform sampler2D uTexture;uniform float uTextureOpacity;uniform vec2 uRadius;uniform vec4 uColor;uniform int uInverted;uniform vec4 uCanvasColor;void main(){\n##init\nfloat ar=uRadius.x/uRadius.y;vec2 rAA=vec2(uRadius.x-1.0,uRadius.y-(1.0/ar));vec2 scaledPointSq=vec2((vTexCoordDouble.x*uRadius.x)*(vTexCoordDouble.x*uRadius.x),(vTexCoordDouble.y*uRadius.y)*(vTexCoordDouble.y*uRadius.y));float p=(scaledPointSq.x/(uRadius.x*uRadius.x))+(scaledPointSq.y/(uRadius.y*uRadius.y));float pAA=(scaledPointSq.x/(rAA.x*rAA.x))+(scaledPointSq.y/(rAA.y*rAA.y));a=smoothstep(1.0,p/pAA,p);if(uInverted==1)a=1.0-a;\n##maskapply\n##fragcolor\n}",["aPosition","aTexCoord"],["uTexture","uTextureOpacity","uColor","uCanvasColor","uMatrix","uRadius","uInverted","uMaskBounds","uMaskOpacity"]),V=S.createBuffer(),U=S.createBuffer(),q=new Map,X={2:{width:0,height:0},1:{width:0,height:0}},G=(t,i,o,s=1)=>{const c=Math.min(Math.min(4096,n)/o.width,Math.min(4096,n)/o.height,s),h=Math.floor(c*o.width),u=Math.floor(c*o.height);Ct(o,X[t])?S.bindFramebuffer(S.FRAMEBUFFER,i):(S.bindTexture(S.TEXTURE_2D,x.get(t)),S.texImage2D(S.TEXTURE_2D,0,S.RGBA,h,u,0,S.RGBA,S.UNSIGNED_BYTE,null),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_MIN_FILTER,S.LINEAR),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_WRAP_S,S.CLAMP_TO_EDGE),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_WRAP_T,S.CLAMP_TO_EDGE),S.bindFramebuffer(S.FRAMEBUFFER,i),S.framebufferTexture2D(S.FRAMEBUFFER,S.COLOR_ATTACHMENT0,S.TEXTURE_2D,x.get(t),0),X[t]=o);const d=o.width*r,p=o.height*r;var f;Ca(a,0,d,p,0,-1,1),Ta(a,0,p,0),(f=a)[0]*=1,f[1]*=1,f[2]*=1,f[3]*=1,((t,e)=>{t[4]*=-1,t[5]*=-1,t[6]*=-1,t[7]*=-1})(a),l=a,S.viewport(0,0,h,u),S.colorMask(!0,!0,!0,!0),S.clearColor(0,0,0,0),S.clear(S.COLOR_BUFFER_BIT),g=[1,0,1,0,1,Math.max(e.width,o.width),1,Math.max(e.width,o.width)]},Z=(t,e=!1)=>{const{src:i}=q.get(t);i instanceof HTMLCanvasElement&&(e||i.dataset.retain||w(i)),q.delete(t),S.deleteTexture(t)};return{drawPath:(t,e,i,n,o)=>{t.length<2||O(t.map((t=>({x:t.x*r,y:t.y*r}))),e*r,ka(i,o),n)},drawTriangle:(t,e=0,i=!1,n=!1,o,s)=>{if(!o)return;const a=t.map((t=>({x:t.x*r,y:t.y*r}))),c=he(a);(i||n)&&yt(a,i,n,c.x,c.y),vt(a,e,c.x,c.y),((t,e)=>{const{program:i,locations:n}=z;S.useProgram(i),S.enableVertexAttribArray(n.aPosition),S.uniform4fv(n.uColor,e),S.uniformMatrix4fv(n.uMatrix,!1,l),S.uniform1fv(n.uMaskBounds,f),S.uniform1f(n.uMaskOpacity,p),S.uniform4f(n.uCanvasColor,y,v,b,1),S.bindBuffer(S.ARRAY_BUFFER,F),S.bufferData(S.ARRAY_BUFFER,t,S.STATIC_DRAW),S.vertexAttribPointer(n.aPosition,2,S.FLOAT,!1,0,0),S.drawArrays(S.TRIANGLE_STRIP,0,t.length/2),S.disableVertexAttribArray(n.aPosition)})((t=>{const e=new Float32Array(6);return e[0]=t[0].x,e[1]=t[0].y,e[2]=t[1].x,e[3]=t[1].y,e[4]=t[2].x,e[5]=t[2].y,e})(a),ka(o,s))},drawRect:(t,e=0,i=!1,n=!1,o,s,a,c,h,u,d,m,x,$,w,_)=>{const k=Xt(zt(t),r),T=o.map((e=>((t,e)=>Math.floor(Qr(t,0,Math.min(.5*(e.width-1),.5*(e.height-1)))))(e||0,t))).map((t=>t*r));if(s||a){const t=zt(k);t.x-=.5,t.y-=.5,t.width+=1,t.height+=1;const o=Ra(t,e,i,n),d=Da(o);let m;w&&(m=ka(w),0===m[3]&&(m[3]=.001)),((t,e,i,n,o,s=C,a=1,c=Wa,h=Ba,u=g,d)=>{const{program:m,locations:x}=B;S.useProgram(m),S.enableVertexAttribArray(x.aPosition),S.enableVertexAttribArray(x.aTexCoord),S.enableVertexAttribArray(x.aRectCoord),S.uniform4fv(x.uColor,o),S.uniform2fv(x.uSize,[e,i]),S.uniform2fv(x.uPosition,[t[2],t[3]]),S.uniform1i(x.uInverted,d?1:0),S.uniform1fv(x.uCornerRadius,n),S.uniform4f(x.uCanvasColor,y,v,b,1),S.uniform1fv(x.uMaskFeather,u.map(((t,e)=>e%2==0?t:t*r))),S.uniform1fv(x.uMaskBounds,f),S.uniform1f(x.uMaskOpacity,p),S.uniformMatrix4fv(x.uMatrix,!1,l),S.uniform1i(x.uTexture,4),S.uniform4fv(x.uTextureColor,c),S.uniform1f(x.uTextureOpacity,a),S.activeTexture(S.TEXTURE0+4),S.bindTexture(S.TEXTURE_2D,s),S.bindBuffer(S.ARRAY_BUFFER,H),S.bufferData(S.ARRAY_BUFFER,h,S.STATIC_DRAW),S.vertexAttribPointer(x.aTexCoord,2,S.FLOAT,!1,0,0),S.bindBuffer(S.ARRAY_BUFFER,W),S.bufferData(S.ARRAY_BUFFER,Ba,S.STATIC_DRAW),S.vertexAttribPointer(x.aRectCoord,2,S.FLOAT,!1,0,0),S.bindBuffer(S.ARRAY_BUFFER,N),S.bufferData(S.ARRAY_BUFFER,t,S.STATIC_DRAW),S.vertexAttribPointer(x.aPosition,2,S.FLOAT,!1,0,0),S.drawArrays(S.TRIANGLE_STRIP,0,t.length/2),S.disableVertexAttribArray(x.aPosition),S.disableVertexAttribArray(x.aTexCoord),S.disableVertexAttribArray(x.aRectCoord)})(d,t.width,t.height,T,ka(s,x),a,x,m,u?new Float32Array(u):Ya(t.width,t.height,c,h,r),$,_)}d&&(d=Math.min(d,k.width,k.height),O(((t,e,i,n,o,r,s,a)=>{const l=[];if(r.every((t=>0===t)))l.push(Q(t,e),Q(t+i,e),Q(t+i,e+n),Q(t,e+n));else{const[o,s,a,c]=r,h=t,u=t+i,d=e,p=e+n;l.push(Q(h+o,d)),La(l,u-s,d+s,s,-1),l.push(Q(u,d+s)),La(l,u-c,p-c,c,0),l.push(Q(u-c,p)),La(l,h+a,p-a,a,1),l.push(Q(h,p-a)),La(l,h+o,d+o,o,2)}return(s||a)&&yt(l,s,a,t+.5*i,e+.5*n),o&&vt(l,o,t+.5*i,e+.5*n),l})(k.x,k.y,k.width,k.height,e,T,i,n),d*r,ka(m,x),!0))},drawEllipse:(t,e,i,n,o,s,a,c,h,u,d,m,g,x,$)=>{const w=Xt(Yt(t.x-e,t.y-i,2*e,2*i),r);if(a||c){const t=zt(w);t.x-=.5,t.y-=.5,t.width+=1,t.height+=1;const e=Ra(t,n,o,s);((t,e,i,n,o=C,r=Ba,s=1,a=!1)=>{const{program:c,locations:h}=Y;S.useProgram(c),S.enableVertexAttribArray(h.aPosition),S.enableVertexAttribArray(h.aTexCoord),S.uniformMatrix4fv(h.uMatrix,!1,l),S.uniform2fv(h.uRadius,[.5*e,.5*i]),S.uniform1i(h.uInverted,a?1:0),S.uniform4fv(h.uColor,n),S.uniform4f(h.uCanvasColor,y,v,b,1),S.uniform1fv(h.uMaskBounds,f),S.uniform1f(h.uMaskOpacity,p),S.uniform1i(h.uTexture,4),S.uniform1f(h.uTextureOpacity,s),S.activeTexture(S.TEXTURE0+4),S.bindTexture(S.TEXTURE_2D,o),S.bindBuffer(S.ARRAY_BUFFER,U),S.bufferData(S.ARRAY_BUFFER,r,S.STATIC_DRAW),S.vertexAttribPointer(h.aTexCoord,2,S.FLOAT,!1,0,0),S.bindBuffer(S.ARRAY_BUFFER,V),S.bufferData(S.ARRAY_BUFFER,t,S.STATIC_DRAW),S.vertexAttribPointer(h.aPosition,2,S.FLOAT,!1,0,0),S.drawArrays(S.TRIANGLE_STRIP,0,t.length/2),S.disableVertexAttribArray(h.aPosition),S.disableVertexAttribArray(h.aTexCoord)})(Da(e),t.width,t.height,ka(a,x),c,d?new Float32Array(d):Ya(t.width,t.height,h,u,r),x,$)}m&&O(((t,e,i,n,o,r,s)=>{const a=.5*Math.abs(i),l=.5*Math.abs(n),c=Math.abs(i)+Math.abs(n),h=Math.max(20,Math.round(c/6));return me(Q(t+a,e+l),a,l,o,r,s,h)})(w.x,w.y,w.width,w.height,n,o,s),m*r,ka(g,x),!0)},drawImage:(t,i,n,s,a,l,c,h,u,d,g=Ha,y=1,v,b=1,$=0,w=m,C=ja,T=Wa,M=Wa,P=!1,E=!1)=>{const R=i.width*r,L=i.height*r,O=-.5*R,z=.5*L,F=.5*R,B=-.5*L,N=new Float32Array([O,B,0,O,z,0,F,B,0,F,z,0]);S.bindBuffer(S.ARRAY_BUFFER,A),S.bufferData(S.ARRAY_BUFFER,N,S.STATIC_DRAW);const H=i.height/2/k*(e.height/i.height)*-1;a*=r,l*=r,n*=r,s*=r;const{program:W,locations:j}=I,Y=Sa();((t,e,i,n,o)=>{const r=1/Math.tan(e/2),s=1/(1-o);t[0]=r/i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(o+1)*s,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*o*1*s,t[15]=0})(Y,_,o,0,2*-H),Ta(Y,a,-l,H),Ta(Y,n,-s,0),Ia(Y,-u),Ma(Y,d),Ta(Y,-n,s,0),Ea(Y,h),Pa(Y,c),S.useProgram(W),S.enableVertexAttribArray(j.aPosition),S.enableVertexAttribArray(j.aTexCoord),S.uniform1i(j.uTexture,3),S.uniform2f(j.uTextureSize,i.width,i.height),S.activeTexture(S.TEXTURE0+3),S.bindTexture(S.TEXTURE_2D,t);const V=E?1:0,U=x.get(V);S.uniform1i(j.uTextureBlend,V),S.activeTexture(S.TEXTURE0+V),S.bindTexture(S.TEXTURE_2D,U);const q=P?2:0,X=x.get(q);let G;S.uniform1i(j.uTextureOverlay,q),S.activeTexture(S.TEXTURE0+q),S.bindTexture(S.TEXTURE_2D,X),S.bindBuffer(S.ARRAY_BUFFER,A),S.vertexAttribPointer(j.aPosition,3,S.FLOAT,!1,0,0),S.bindBuffer(S.ARRAY_BUFFER,D),S.vertexAttribPointer(j.aTexCoord,2,S.FLOAT,!1,0,0),S.uniformMatrix4fv(j.uMatrix,!1,Y),S.uniform4fv(j.uOverlayColor,M),S.uniform4fv(j.uFillColor,T),!v||is(v,Na)?(v=Na,G=-1):(G=v.reduce(((t,e)=>t+e),0),G=G<=0?1:G),S.uniform1fv(j.uClarityKernel,v),S.uniform1f(j.uClarityKernelWeight,G),S.uniform1f(j.uColorGamma,1/b),S.uniform1f(j.uColorVignette,$),S.uniform4f(j.uColorOffset,g[4],g[9],g[14],g[19]),S.uniformMatrix4fv(j.uColorMatrix,!1,[g[0],g[1],g[2],g[3],g[5],g[6],g[7],g[8],g[10],g[11],g[12],g[13],g[15],g[16],g[17],g[18]]),S.uniform1f(j.uOpacity,y),S.uniform1f(j.uMaskOpacity,p),S.uniform1fv(j.uMaskBounds,f),S.uniform1fv(j.uMaskCornerRadius,C.map((t=>t*r))),S.uniform1fv(j.uMaskFeather,w.map(((t,e)=>e%2==0?t:t*r))),S.drawArrays(S.TRIANGLE_STRIP,0,4),S.disableVertexAttribArray(j.aPosition),S.disableVertexAttribArray(j.aTexCoord)},textureFilterNearest:S.NEAREST,textureFilterLinear:S.LINEAR,textureCreate:()=>S.createTexture(),textureUpdate:(t,e,i)=>(q.set(t,{src:e,options:i}),((t,e,i,n)=>(t.bindTexture(t.TEXTURE_2D,e),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,i),((t,e,i)=>{t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,_a(e)?t.LINEAR_MIPMAP_LINEAR:t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,i.filter),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),_a(e)&&t.generateMipmap(t.TEXTURE_2D)})(t,i,n),t.bindTexture(t.TEXTURE_2D,null),e))(S,t,e,i)),textureGetSize:t=>{const{src:e,options:i}=q.get(t),n=$t(e);return i.scalar?It(n,(t=>t/i.scalar)):n},textureDelete:Z,enablePreviewStencil:()=>{S.stencilOp(S.KEEP,S.KEEP,S.REPLACE),S.stencilFunc(S.ALWAYS,1,255),S.stencilMask(255)},applyPreviewStencil:()=>{S.stencilFunc(S.EQUAL,1,255),S.stencilMask(0)},disablePreviewStencil:$,setCanvasColor(t){y=t[0],v=t[1],b=t[2],S.clear(S.COLOR_BUFFER_BIT)},resetCanvasMatrix:()=>{Ca(s,0,e.width,e.height,0,-1,1)},updateCanvasMatrix(t,i,n,o,a){const l=t.width,c=t.height,h=e.width*(.5/r),u=e.height*(.5/r),d={x:h+(n.x+i.x),y:u+(n.y+i.y)},p={x:d.x-i.x,y:d.y-i.y},f=.5*l,m=.5*c;nt(p,a.z,d),mt(p,o,d),Ta(s,(p.x-f)*r,(p.y-m)*r,0),Ta(s,f*r,m*r,0),Ia(s,a.z);const g=a.x>Math.PI/2;Pa(s,g?Math.PI:0);const y=a.y>Math.PI/2;Ea(s,y?Math.PI:0),Ma(s,o),Ta(s,-f*r,-m*r,0)},drawToCanvas(){S.bindFramebuffer(S.FRAMEBUFFER,null),l=s,S.viewport(0,0,S.drawingBufferWidth,S.drawingBufferHeight),S.colorMask(!0,!0,!0,!1),S.clearColor(y,v,b,1),S.clear(S.COLOR_BUFFER_BIT),g=[1,0,1,0,1,e.width,1,e.width]},drawToImageBlendBuffer(t,e){G(1,E,t,e)},drawToImageOverlayBuffer(t,e){G(2,M,t,e)},enableMask(t,i){const n=t.x*r,o=t.y*r,s=t.width*r,a=t.height*r;d=n,h=d+s,c=e.height-o,u=e.height-(o+a),p=1-i,f=[c,h,u,d]},disableMask(){d=0,h=e.width,c=e.height,u=0,p=1,f=[c,h,u,d]},resize:(n,a,l)=>{r=l,i.width=n,i.height=a,e.width=n*r,e.height=a*r,o=j(e.width,e.height),t.width=e.width,t.height=e.height,Ca(s,0,e.width,e.height,0,-1,1),m=[1,0,1,0,1,i.width,1,i.width]},release(){Array.from(q.keys()).forEach((t=>Z(t,!0))),q.clear(),x.forEach((t=>{S.deleteTexture(t)})),x.clear(),I.destroy(),R.destroy(),z.destroy(),B.destroy(),Y.destroy(),t.width=1,t.height=1,t=void 0}}};function Ua(t){let e,i,n,o;return{c(){e=wo("div"),i=wo("canvas"),Eo(i,"class","svelte-1whddvm"),Eo(e,"class","PinturaCanvas svelte-1whddvm")},m(r,s){xo(r,e,s),bo(e,i),t[27](i),n||(o=[To(i,"measure",t[28]),uo(ha.call(null,i))],n=!0)},p:Xn,i:Xn,o:Xn,d(i){i&&$o(e),t[27](null),n=!1,Jn(o)}}}function qa(i,n,o){let r,s,a,l,c,h,u;const d=(t,e)=>{const[i,n,o]=t,[r,s,a,l]=e;return[r*l+i*(1-l),s*l+n*(1-l),a*l+o*(1-l),1]},p=Vo();let m,{animate:g}=n,{maskRect:y}=n,{maskOpacity:v=1}=n,{maskFrameOpacity:b=.95}=n,{pixelRatio:x=1}=n,{textPixelRatio:$=x}=n,{backgroundColor:w}=n,{willRender:k=Y}=n,{didRender:S=Y}=n,{willRequestResource:C=(()=>!0)}=n,{loadImageData:T=Y}=n,{images:M=[]}=n,{interfaceImages:P=[]}=n,E=null,I=null,A=null;const D=(t,e)=>t.set(e,{hard:!g}),R={precision:1e-4*.01},L=Zs(void 0,{duration:250});oo(i,L,(t=>o(23,a=t)));const O=Qs(1,R);oo(i,O,(t=>o(24,l=t)));const z=Qs(1,R);oo(i,z,(t=>o(38,u=t)));const F=Dr();oo(i,F,(t=>o(36,c=t)));const B=Dr();oo(i,B,(t=>o(37,h=t)));const N=()=>requestAnimationFrame((()=>{et=!0,s()})),H=new Map([]),W=new Map([]),V=(t,i)=>{if(!H.has(t)){H.set(t,t);const n="pixelated"===i?E.textureFilterNearest:E.textureFilterLinear;if(!e(t)&&("close"in t||_(t)||Tn(t))){const e=E.textureCreate();E.textureUpdate(e,t,{filter:n}),H.set(t,e)}else T(t).then((e=>{const i=E.textureCreate();E.textureUpdate(i,e,{filter:n}),H.set(t,i),N()})).catch((t=>{console.error(t)}))}return H.get(t)},U=e=>{if(!e.text.length)return void W.delete(e.id);let{text:i,textAlign:n,fontFamily:o,fontSize:r,fontWeight:s,fontVariant:a,fontStyle:l,lineHeight:c,width:h,height:u}=e;const{lastCharPosition:d,textSize:p}=((e="",i)=>{const{width:n=0,height:o="auto",fontSize:r,fontFamily:s,lineHeight:a,fontWeight:l,fontStyle:c,fontVariant:h}=i,u=li({text:e,fontFamily:s,fontWeight:l,fontStyle:c,fontVariant:h,fontSize:r,lineHeight:a,width:n,height:o});let d=gi.get(u);if(d)return d;const p=t("span"),f=we(t("pre",{contenteditable:"true",spellcheck:"false",style:`pointer-events:none;visibility:hidden;position:absolute;left:0;top:0;${fi({fontFamily:s,fontWeight:l,fontStyle:c,fontVariant:h,fontSize:r,lineHeight:a})};${mi(i)}"`,innerHTML:e},[p])),m=f.getBoundingClientRect(),g=p.getBoundingClientRect();return d={textSize:$t(m),lastCharPosition:lt(J(g),Math.round)},gi.set(u,d),f.remove(),d})(i,e),f=li({text:i,textAlign:n,fontFamily:o,fontSize:r,fontWeight:s,fontVariant:a,fontStyle:l,lineHeight:c,height:u?Math.min(d.y,Math.ceil(u/c)*c):"auto",xOffset:d.x,yOffset:d.y});if(!H.has(f)){H.set(f,i);const t=h&&Math.round(h),d=u&&Math.round(u),m=Math.ceil(p.width),g=Math.ceil(p.height/c)*c;if(0===m||0===g)return;const y=za(),v=Math.min(1,(y-pi*$*2)/(m*$),y/(g*$));Ti(i,{fontSize:r,fontFamily:o,fontWeight:s,fontVariant:a,fontStyle:l,textAlign:n,lineHeight:c,width:t,height:d,imageWidth:m,imageHeight:g,pixelRatio:$*v,willRequestResource:C,color:[1,0,1]}).then((t=>{const i=E.textureCreate();E.textureUpdate(i,t,{filter:E.textureFilterLinear,scalar:v}),H.set(f,i),W.set(e.id,i),N()})).catch(console.error)}const m=H.get(f);return q(m)?m:W.get(e.id)},q=t=>t instanceof WebGLTexture,X=({data:t,size:e,origin:i,translation:n,rotation:o,scale:r,colorMatrix:s,opacity:l,convolutionMatrix:c,gamma:h,vignette:u,maskFeather:p,maskCornerRadius:f,backgroundColor:m,overlayColor:g,enableOverlay:y,enableBlend:v})=>{m&&m[3]<1&&m[3]>0&&(m=d(a,m));const b=V(t);return E.drawImage(b,e,i.x,i.y,n.x,n.y,o.x,o.y,o.z,r,s,Qr(l,0,1),c,h,u,p,f,m,g,y,v),b},G=([t,e,i,n])=>[n.x,n.y,t.x,t.y,i.x,i.y,e.x,e.y],Z=K(),tt=(t=[],i)=>t.map((t=>{let i=!t._isLoading&&(t=>{let i;if(t.backgroundImage)i=V(t.backgroundImage,t.backgroundImageRendering);else if(e(t.text)){if(t.width&&t.width<1||t.height&&t.height<1)return;i=U(t)}return i})(t),n=q(i)?i:void 0;const o=t._scale||1,r=t._translate||Z,s=t.strokeWidth&&t.strokeWidth*o;if(ti(t.points)){const e=t.points.map((t=>Q(t.x*o+r.x,t.y*o+r.y)));3===e.length&&t.backgroundColor?E.drawTriangle(e,t.rotation,t.flipX,t.flipY,t.backgroundColor,s,t.strokeColor,t.opacity):E.drawPath(e,s,t.strokeColor,t.pathClose,t.opacity)}else if(Ke(t.rx)&&Ke(t.ry)){let e=t.x,i=t.y;e*=o,i*=o,e+=r.x,i+=r.y,E.drawEllipse(Q(e,i),t.rx*o,t.ry*o,t.rotation,t.flipX,t.flipY,t.backgroundColor,n,void 0,void 0,t.backgroundCorners&&G(t.backgroundCorners),s,t.strokeColor,t.opacity,t.inverted)}else if(e(t.text)&&n||t.width){const e=n&&E.textureGetSize(n);let i,a,l,c,h=[t.cornerRadius,t.cornerRadius,t.cornerRadius,t.cornerRadius].map((t=>t*o));if(i=t.width?Nt(t):{x:t.x,y:t.y,...e},o&&r&&(i.x*=o,i.y*=o,i.x+=r.x,i.y+=r.y,i.width*=o,i.height*=o),e)if(t.backgroundImage&&t.backgroundSize){const n=j(e.width,e.height);if("contain"===t.backgroundSize){const t=oe(i,n,i);a=wt(t),l=Q(.5*(i.width-a.width),.5*(i.height-a.height))}else if("cover"===t.backgroundSize){const t=ne(i,n,i);a=wt(t),l=Q(t.x,t.y),l=Q(.5*(i.width-a.width),.5*(i.height-a.height))}else a=t.backgroundSize,l=t.backgroundPosition}else if(t.text){const n={width:e.width/$,height:e.height/$};l=Q(0,0),a={width:n.width*o,height:n.height*o},t.backgroundColor&&E.drawRect({...i,height:i.height||e.height*o},t.rotation,t.flipX,t.flipY,h,t.backgroundColor,void 0,void 0,void 0,void 0,s,t.strokeColor,t.opacity,void 0,void 0,t.inverted),t.backgroundColor=void 0,i.x-=pi*o,c=t.color,t.width?(i.height=i.height||n.height*o,i.width+=2*pi*o,"center"===t.textAlign?l.x=.5*(i.width-a.width):"right"===t.textAlign&&(l.x=i.width-a.width)):(i.width=n.width*o,i.height=n.height*o),t._prerender&&(c[3]=0)}E.drawRect(i,t.rotation,t.flipX,t.flipY,h,t.backgroundColor,n,a,l,t.backgroundCorners&&G(t.backgroundCorners),s,t.strokeColor,t.opacity,void 0,c,t.inverted)}return i})).filter(Boolean);let et=!1,it=!0,nt=!1;const ot=[],rt=[],st=[],at=()=>{st.length=0;const t=M[0],{blendShapes:e,blendShapesDirty:i,annotationShapes:n,annotationShapesDirty:o,interfaceShapes:r,decorationShapes:s,frameShapes:p}=k({opacity:t.opacity,rotation:t.rotation,scale:t.scale,images:M,size:St(I,A),backgroundColor:[...a],selectionRect:c}),f=[...a],m=c,g=Qr(l,0,1),y=h,v=Math.abs(t.rotation.x/Math.PI*2-1),b=Math.abs(t.rotation.y/Math.PI*2-1),x=v<.99||b<.99,w=t.size,_=t.backgroundColor,C=e.length>0,T=n.length>0,D=_[3]>0;if(g<1&&D){const t=f[0],e=f[1],i=f[2],n=1-g,o=_[0]*n,r=_[1]*n,s=_[2]*n,a=1-n;f[0]=o+t*a,f[1]=r+e*a,f[2]=s+i*a,f[3]=1}if(E.setCanvasColor(f),C&&i?(E.disableMask(),E.drawToImageBlendBuffer(w),ot.length=0,ot.push(...tt(e))):C||(ot.length=0),st.push(...ot),it&&(E.drawToImageOverlayBuffer(w,$),it=!1),x?(T&&(o||et)||!nt?(E.disableMask(),E.drawToImageOverlayBuffer(w,$),rt.length=0,rt.push(...tt(n))):T||(rt.length=0),nt=!0):nt=!1,E.drawToCanvas(),E.enableMask(m,g),D&&E.drawRect(m,0,!1,!1,[0,0,0,0],d(a,_)),E.enablePreviewStencil(),st.push(...[...M].reverse().map((t=>X({...t,enableOverlay:x&&T,enableBlend:C,mask:m,maskOpacity:g,overlayColor:y})))),x||(E.applyPreviewStencil(),E.resetCanvasMatrix(),E.updateCanvasMatrix(w,t.origin,t.translation,t.scale,t.rotation),rt.length=0,rt.push(...tt(n)),E.disablePreviewStencil()),st.push(...rt),E.resetCanvasMatrix(),E.enableMask(m,1),st.push(...tt(s)),p.length){const t=p.filter((t=>!t.expandsCanvas)),e=p.filter((t=>t.expandsCanvas));t.length&&st.push(...tt(t)),e.length&&(E.enableMask({x:m.x+.5,y:m.y+.5,width:m.width-1,height:m.height-1},u),st.push(...tt(e)))}E.disableMask(),st.push(...tt(r)),P.forEach((t=>{E.enableMask(t.mask,t.maskOpacity),t.backgroundColor&&E.drawRect(t.mask,0,!1,!1,t.maskCornerRadius,t.backgroundColor,void 0,void 0,void 0,void 0,void 0,t.opacity,t.maskFeather),X({...t,translation:{x:t.translation.x+t.offset.x-.5*I,y:t.translation.y+t.offset.y-.5*A}})})),E.disableMask(),(t=>{H.forEach(((e,i)=>{!t.find((t=>t===e))&&q(e)&&(Array.from(W.values()).includes(e)||(H.delete(i),E.textureDelete(e)))}))})(st),S(),et=!1};let ct=Date.now();const ht=()=>{const t=Date.now();t-ct<48||(ct=t,at())};return jo((()=>s())),Wo((()=>o(22,E=Va(m)))),Yo((()=>{E&&(E.release(),o(22,E=void 0),o(2,m=void 0))})),i.$$set=t=>{"animate"in t&&o(9,g=t.animate),"maskRect"in t&&o(10,y=t.maskRect),"maskOpacity"in t&&o(11,v=t.maskOpacity),"maskFrameOpacity"in t&&o(12,b=t.maskFrameOpacity),"pixelRatio"in t&&o(13,x=t.pixelRatio),"textPixelRatio"in t&&o(14,$=t.textPixelRatio),"backgroundColor"in t&&o(15,w=t.backgroundColor),"willRender"in t&&o(16,k=t.willRender),"didRender"in t&&o(17,S=t.didRender),"willRequestResource"in t&&o(18,C=t.willRequestResource),"loadImageData"in t&&o(19,T=t.loadImageData),"images"in t&&o(20,M=t.images),"interfaceImages"in t&&o(21,P=t.interfaceImages)},i.$$.update=()=>{32768&i.$$.dirty[0]&&w&&D(L,w),2048&i.$$.dirty[0]&&D(O,Ke(v)?v:1),4096&i.$$.dirty[0]&&D(z,Ke(b)?b:1),1024&i.$$.dirty[0]&&y&&F.set(y),25165824&i.$$.dirty[0]&&a&&B.set([a[0],a[1],a[2],Qr(l,0,1)]),5242883&i.$$.dirty[0]&&o(26,r=!!(E&&I&&A&&M.length)),4202499&i.$$.dirty[0]&&I&&A&&E&&E.resize(I,A,x),67108864&i.$$.dirty[0]&&o(25,s=r?ga()?ht:at:f),100663296&i.$$.dirty[0]&&r&&s&&s()},[I,A,m,p,L,O,z,F,B,g,y,v,b,x,$,w,k,S,C,T,M,P,E,a,l,s,r,function(t){Zo[t?"unshift":"push"]((()=>{m=t,o(2,m)}))},t=>{o(0,I=t.detail.width),o(1,A=t.detail.height),p("measure",{width:I,height:A})}]}class Xa extends Er{constructor(t){super(),Pr(this,t,qa,Ua,eo,{animate:9,maskRect:10,maskOpacity:11,maskFrameOpacity:12,pixelRatio:13,textPixelRatio:14,backgroundColor:15,willRender:16,didRender:17,willRequestResource:18,loadImageData:19,images:20,interfaceImages:21},[-1,-1])}}var Ga=(t,e=Boolean,i=" ")=>t.filter(e).join(i);function Za(t,e,i){const n=t.slice();return n[17]=e[i],n}const Ka=t=>({tab:4&t}),Qa=t=>({tab:t[17]});function Ja(t){let e,i,n,o=[],r=new Map,s=t[2];const a=t=>t[17].id;for(let e=0;e<s.length;e+=1){let i=Za(t,s,e),n=a(i);r.set(n,o[e]=tl(n,i))}return{c(){e=wo("ul");for(let t=0;t<o.length;t+=1)o[t].c();Eo(e,"class",i=Ga(["PinturaTabList",t[0]])),Eo(e,"role","tablist"),Eo(e,"data-layout",t[1])},m(i,r){xo(i,e,r);for(let t=0;t<o.length;t+=1)o[t].m(e,null);t[14](e),n=!0},p(t,l){1124&l&&(s=t[2],pr(),o=wr(o,l,a,1,t,s,r,e,$r,tl,null,Za),fr()),(!n||1&l&&i!==(i=Ga(["PinturaTabList",t[0]])))&&Eo(e,"class",i),(!n||2&l)&&Eo(e,"data-layout",t[1])},i(t){if(!n){for(let t=0;t<s.length;t+=1)mr(o[t]);n=!0}},o(t){for(let t=0;t<o.length;t+=1)gr(o[t]);n=!1},d(i){i&&$o(e);for(let t=0;t<o.length;t+=1)o[t].d();t[14](null)}}}function tl(t,e){let i,n,o,r,s,a,l,c,h,u;const d=e[11].default,p=ro(d,e,e[10],Qa);function f(...t){return e[12](e[17],...t)}function m(...t){return e[13](e[17],...t)}return{key:t,first:null,c(){i=wo("li"),n=wo("button"),p&&p.c(),r=So(),n.disabled=o=e[17].disabled,Eo(i,"role","tab"),Eo(i,"aria-controls",s=e[17].href.substr(1)),Eo(i,"id",a=e[17].tabId),Eo(i,"aria-selected",l=e[17].selected),this.first=i},m(t,e){xo(t,i,e),bo(i,n),p&&p.m(n,null),bo(i,r),c=!0,h||(u=[To(n,"keydown",f),To(n,"click",m)],h=!0)},p(t,r){e=t,p&&p.p&&1028&r&&ao(p,d,e,e[10],r,Ka,Qa),(!c||4&r&&o!==(o=e[17].disabled))&&(n.disabled=o),(!c||4&r&&s!==(s=e[17].href.substr(1)))&&Eo(i,"aria-controls",s),(!c||4&r&&a!==(a=e[17].tabId))&&Eo(i,"id",a),(!c||4&r&&l!==(l=e[17].selected))&&Eo(i,"aria-selected",l)},i(t){c||(mr(p,t),c=!0)},o(t){gr(p,t),c=!1},d(t){t&&$o(i),p&&p.d(t),h=!1,Jn(u)}}}function el(t){let e,i,n=t[4]&&Ja(t);return{c(){n&&n.c(),e=Co()},m(t,o){n&&n.m(t,o),xo(t,e,o),i=!0},p(t,[i]){t[4]?n?(n.p(t,i),16&i&&mr(n,1)):(n=Ja(t),n.c(),mr(n,1),n.m(e.parentNode,e)):n&&(pr(),gr(n,1,1,(()=>{n=null})),fr())},i(t){i||(mr(n),i=!0)},o(t){gr(n),i=!1},d(t){n&&n.d(t),t&&$o(e)}}}function il(t,e,i){let n,o,r,{$$slots:s={},$$scope:a}=e,{class:l}=e,{name:c}=e,{selected:h}=e,{tabs:u=[]}=e,{layout:d}=e;const p=Vo(),f=t=>{const e=r.querySelectorAll('[role="tab"] button')[t];e&&e.focus()},m=(t,e)=>{t.preventDefault(),t.stopPropagation(),p("select",e)},g=({key:t},e)=>{if(!/arrow/i.test(t))return;const i=u.findIndex((t=>t.id===e));return/right|down/i.test(t)?f(i<u.length-1?i+1:0):/left|up/i.test(t)?f(i>0?i-1:u.length-1):void 0};return t.$$set=t=>{"class"in t&&i(0,l=t.class),"name"in t&&i(7,c=t.name),"selected"in t&&i(8,h=t.selected),"tabs"in t&&i(9,u=t.tabs),"layout"in t&&i(1,d=t.layout),"$$scope"in t&&i(10,a=t.$$scope)},t.$$.update=()=>{896&t.$$.dirty&&i(2,n=u.map((t=>{const e=t.id===h;return{...t,tabId:`tab-${c}-${t.id}`,href:`#panel-${c}-${t.id}`,selected:e}}))),4&t.$$.dirty&&i(4,o=n.length>1)},[l,d,n,r,o,m,g,c,h,u,a,s,(t,e)=>g(e,t.id),(t,e)=>m(e,t.id),function(t){Zo[t?"unshift":"push"]((()=>{r=t,i(3,r)}))}]}class nl extends Er{constructor(t){super(),Pr(this,t,il,el,eo,{class:0,name:7,selected:8,tabs:9,layout:1})}}const ol=t=>({panel:16&t}),rl=t=>({panel:t[4][0].id,panelIsActive:!0});function sl(t,e,i){const n=t.slice();return n[14]=e[i].id,n[15]=e[i].shouldDraw,n[16]=e[i].panelId,n[17]=e[i].tabindex,n[18]=e[i].labelledBy,n[19]=e[i].isActive,n[20]=e[i].hidden,n[3]=e[i].visible,n}const al=t=>({panel:16&t,panelIsActive:16&t}),ll=t=>({panel:t[14],panelIsActive:t[19]});function cl(t){let e,i,n,o,r,s;const a=t[11].default,l=ro(a,t,t[10],rl);return{c(){e=wo("div"),i=wo("div"),l&&l.c(),Eo(i,"class",n=Ga([t[1]])),Eo(e,"class",t[0]),Eo(e,"style",t[2])},m(n,a){xo(n,e,a),bo(e,i),l&&l.m(i,null),o=!0,r||(s=[To(e,"measure",t[13]),uo(ha.call(null,e))],r=!0)},p(t,r){l&&l.p&&1040&r&&ao(l,a,t,t[10],r,ol,rl),(!o||2&r&&n!==(n=Ga([t[1]])))&&Eo(i,"class",n),(!o||1&r)&&Eo(e,"class",t[0]),(!o||4&r)&&Eo(e,"style",t[2])},i(t){o||(mr(l,t),o=!0)},o(t){gr(l,t),o=!1},d(t){t&&$o(e),l&&l.d(t),r=!1,Jn(s)}}}function hl(t){let e,i,n,o,r,s=[],a=new Map,l=t[4];const c=t=>t[14];for(let e=0;e<l.length;e+=1){let i=sl(t,l,e),n=c(i);a.set(n,s[e]=dl(n,i))}return{c(){e=wo("div");for(let t=0;t<s.length;t+=1)s[t].c();Eo(e,"class",i=Ga(["PinturaTabPanels",t[0]])),Eo(e,"style",t[2])},m(i,a){xo(i,e,a);for(let t=0;t<s.length;t+=1)s[t].m(e,null);n=!0,o||(r=[To(e,"measure",t[12]),uo(ha.call(null,e,{observePosition:!0}))],o=!0)},p(t,o){1042&o&&(l=t[4],pr(),s=wr(s,o,c,1,t,l,a,e,$r,dl,null,sl),fr()),(!n||1&o&&i!==(i=Ga(["PinturaTabPanels",t[0]])))&&Eo(e,"class",i),(!n||4&o)&&Eo(e,"style",t[2])},i(t){if(!n){for(let t=0;t<l.length;t+=1)mr(s[t]);n=!0}},o(t){for(let t=0;t<s.length;t+=1)gr(s[t]);n=!1},d(t){t&&$o(e);for(let t=0;t<s.length;t+=1)s[t].d();o=!1,Jn(r)}}}function ul(t){let e;const i=t[11].default,n=ro(i,t,t[10],ll);return{c(){n&&n.c()},m(t,i){n&&n.m(t,i),e=!0},p(t,e){n&&n.p&&1040&e&&ao(n,i,t,t[10],e,al,ll)},i(t){e||(mr(n,t),e=!0)},o(t){gr(n,t),e=!1},d(t){n&&n.d(t)}}}function dl(t,e){let i,n,o,r,s,a,l,c,h,u=e[15]&&ul(e);return{key:t,first:null,c(){i=wo("div"),u&&u.c(),n=So(),Eo(i,"class",o=Ga(["PinturaTabPanel",e[1]])),i.hidden=r=e[20],Eo(i,"id",s=e[16]),Eo(i,"tabindex",a=e[17]),Eo(i,"aria-labelledby",l=e[18]),Eo(i,"data-inert",c=!e[3]),this.first=i},m(t,e){xo(t,i,e),u&&u.m(i,null),bo(i,n),h=!0},p(t,d){(e=t)[15]?u?(u.p(e,d),16&d&&mr(u,1)):(u=ul(e),u.c(),mr(u,1),u.m(i,n)):u&&(pr(),gr(u,1,1,(()=>{u=null})),fr()),(!h||2&d&&o!==(o=Ga(["PinturaTabPanel",e[1]])))&&Eo(i,"class",o),(!h||16&d&&r!==(r=e[20]))&&(i.hidden=r),(!h||16&d&&s!==(s=e[16]))&&Eo(i,"id",s),(!h||16&d&&a!==(a=e[17]))&&Eo(i,"tabindex",a),(!h||16&d&&l!==(l=e[18]))&&Eo(i,"aria-labelledby",l),(!h||16&d&&c!==(c=!e[3]))&&Eo(i,"data-inert",c)},i(t){h||(mr(u),h=!0)},o(t){gr(u),h=!1},d(t){t&&$o(i),u&&u.d()}}}function pl(t){let e,i,n,o;const r=[hl,cl],s=[];function a(t,e){return t[5]?0:1}return e=a(t),i=s[e]=r[e](t),{c(){i.c(),n=Co()},m(t,i){s[e].m(t,i),xo(t,n,i),o=!0},p(t,[o]){let l=e;e=a(t),e===l?s[e].p(t,o):(pr(),gr(s[l],1,1,(()=>{s[l]=null})),fr(),i=s[e],i?i.p(t,o):(i=s[e]=r[e](t),i.c()),mr(i,1),i.m(n.parentNode,n))},i(t){o||(mr(i),o=!0)},o(t){gr(i),o=!1},d(t){s[e].d(t),t&&$o(n)}}}function fl(t,e,i){let n,o,{$$slots:r={},$$scope:s}=e,{class:a}=e,{name:l}=e,{selected:c}=e,{panelClass:h}=e,{panels:u=[]}=e,{visible:d}=e,{style:p}=e;const f={};return t.$$set=t=>{"class"in t&&i(0,a=t.class),"name"in t&&i(6,l=t.name),"selected"in t&&i(7,c=t.selected),"panelClass"in t&&i(1,h=t.panelClass),"panels"in t&&i(8,u=t.panels),"visible"in t&&i(3,d=t.visible),"style"in t&&i(2,p=t.style),"$$scope"in t&&i(10,s=t.$$scope)},t.$$.update=()=>{968&t.$$.dirty&&i(4,n=u.map((t=>{const e=t===c;e&&i(9,f[t]=!0,f);const n=!d||-1!==d.indexOf(t);return{id:t,panelId:`panel-${l}-${t}`,labelledBy:`tab-${l}-${t}`,isActive:e,hidden:!e,visible:n,tabindex:e?0:-1,shouldDraw:e||f[t]}}))),16&t.$$.dirty&&i(5,o=n.length>1)},[a,h,p,d,n,o,l,c,u,f,s,r,function(e){Xo(t,e)},function(e){Xo(t,e)}]}class ml extends Er{constructor(t){super(),Pr(this,t,fl,pl,eo,{class:0,name:6,selected:7,panelClass:1,panels:8,visible:3,style:2})}}var gl=t=>{const e=Object.getOwnPropertyDescriptors(t.prototype);return Object.keys(e).filter((t=>!!e[t].get))};function yl(t){let e,i,n,o,r;const s=[t[7]];function a(e){t[19](e)}var l=t[11];function c(t){let e={};for(let t=0;t<s.length;t+=1)e=Zn(e,s[t]);return void 0!==t[5]&&(e.name=t[5]),{props:e}}return l&&(i=new l(c(t)),Zo.push((()=>Sr(i,"name",a))),t[20](i),i.$on("measure",t[21])),{c(){e=wo("div"),i&&Cr(i.$$.fragment),Eo(e,"data-util",t[5]),Eo(e,"class",o=Ga(["PinturaUtilPanel",t[2]])),Eo(e,"style",t[6])},m(t,n){xo(t,e,n),i&&Tr(i,e,null),r=!0},p(t,[h]){const u=128&h?_r(s,[kr(t[7])]):{};if(!n&&32&h&&(n=!0,u.name=t[5],or((()=>n=!1))),l!==(l=t[11])){if(i){pr();const t=i;gr(t.$$.fragment,1,0,(()=>{Mr(t,1)})),fr()}l?(i=new l(c(t)),Zo.push((()=>Sr(i,"name",a))),t[20](i),i.$on("measure",t[21]),Cr(i.$$.fragment),mr(i.$$.fragment,1),Tr(i,e,null)):i=null}else l&&i.$set(u);(!r||32&h)&&Eo(e,"data-util",t[5]),(!r||4&h&&o!==(o=Ga(["PinturaUtilPanel",t[2]])))&&Eo(e,"class",o),(!r||64&h)&&Eo(e,"style",t[6])},i(t){r||(i&&mr(i.$$.fragment,t),r=!0)},o(t){i&&gr(i.$$.fragment,t),r=!1},d(n){n&&$o(e),t[20](null),i&&Mr(i)}}}function vl(t,e,i){let n,o,r,s;const a=Vo();let l,{isActive:c=!0}=e,{isAnimated:h=!0}=e,{stores:u}=e,{content:d}=e,{component:p}=e,{locale:f}=e,{class:m}=e;const g=Qs(0),y=Rr(g,(t=>Qr(t,0,1)));oo(t,y,(t=>i(18,r=t)));let v=!c;const b=Dr(c);oo(t,b,(t=>i(22,s=t)));const x={isActive:Rr(b,(async(t,e)=>{if(!t)return e(t);await ir(),e(t)})),isActiveFraction:Rr(y,(t=>t)),isVisible:Rr(y,(t=>t>0))},$=d.view,w=gl($),_=Object.keys(d.props||{}).reduce(((t,e)=>w.includes(e)?(t[e]=d.props[e],t):t),{}),k=Object.keys(x).reduce(((t,e)=>w.includes(e)?(t[e]=x[e],t):t),{});let S,C=!1;return Wo((()=>{i(4,C=!0)})),t.$$set=t=>{"isActive"in t&&i(1,c=t.isActive),"isAnimated"in t&&i(12,h=t.isAnimated),"stores"in t&&i(13,u=t.stores),"content"in t&&i(14,d=t.content),"component"in t&&i(0,p=t.component),"locale"in t&&i(15,f=t.locale),"class"in t&&i(2,m=t.class)},t.$$.update=()=>{11&t.$$.dirty&&l&&c&&p&&a("measure",l),4098&t.$$.dirty&&g.set(c?1:0,{hard:!h}),393216&t.$$.dirty&&(r<=0&&!v?i(17,v=!0):r>0&&v&&i(17,v=!1)),131088&t.$$.dirty&&C&&a(v?"hide":"show"),262144&t.$$.dirty&&a("fade",r),262144&t.$$.dirty&&i(6,n=r<1?"opacity: "+r:void 0),2&t.$$.dirty&&ho(b,s=c,s),40960&t.$$.dirty&&i(7,o={..._,...k,stores:u,locale:f})},[p,c,m,l,C,S,n,o,a,y,b,$,h,u,d,f,g,v,r,function(t){S=t,i(5,S)},function(t){Zo[t?"unshift":"push"]((()=>{p=t,i(0,p)}))},t=>{C&&c&&(i(3,l=t.detail),a("measure",{...l}))}]}class bl extends Er{constructor(t){super(),Pr(this,t,vl,yl,eo,{isActive:1,isAnimated:12,stores:13,content:14,component:0,locale:15,class:2,opacity:16})}get opacity(){return this.$$.ctx[16]}}function xl(t){let e,i,n;const o=t[5].default,r=ro(o,t,t[4],null);return{c(){e=_o("svg"),r&&r.c(),Eo(e,"class",t[3]),Eo(e,"style",t[2]),Eo(e,"width",t[0]),Eo(e,"height",t[1]),Eo(e,"viewBox",i="0 0 "+t[0]+"\n    "+t[1]),Eo(e,"xmlns","http://www.w3.org/2000/svg"),Eo(e,"aria-hidden","true"),Eo(e,"focusable","false"),Eo(e,"stroke-linecap","round"),Eo(e,"stroke-linejoin","round")},m(t,i){xo(t,e,i),r&&r.m(e,null),n=!0},p(t,[s]){r&&r.p&&16&s&&ao(r,o,t,t[4],s,null,null),(!n||8&s)&&Eo(e,"class",t[3]),(!n||4&s)&&Eo(e,"style",t[2]),(!n||1&s)&&Eo(e,"width",t[0]),(!n||2&s)&&Eo(e,"height",t[1]),(!n||3&s&&i!==(i="0 0 "+t[0]+"\n    "+t[1]))&&Eo(e,"viewBox",i)},i(t){n||(mr(r,t),n=!0)},o(t){gr(r,t),n=!1},d(t){t&&$o(e),r&&r.d(t)}}}function $l(t,e,i){let{$$slots:n={},$$scope:o}=e,{width:r=24}=e,{height:s=24}=e,{style:a}=e,{class:l}=e;return t.$$set=t=>{"width"in t&&i(0,r=t.width),"height"in t&&i(1,s=t.height),"style"in t&&i(2,a=t.style),"class"in t&&i(3,l=t.class),"$$scope"in t&&i(4,o=t.$$scope)},[r,s,a,l,o,n]}class wl extends Er{constructor(t){super(),Pr(this,t,$l,xl,eo,{width:0,height:1,style:2,class:3})}}var _l=(t,e)=>e===t.target||e.contains(t.target);function kl(t){let e,i;return e=new wl({props:{class:"PinturaButtonIcon",$$slots:{default:[Sl]},$$scope:{ctx:t}}}),{c(){Cr(e.$$.fragment)},m(t,n){Tr(e,t,n),i=!0},p(t,i){const n={};134217730&i&&(n.$$scope={dirty:i,ctx:t}),e.$set(n)},i(t){i||(mr(e.$$.fragment,t),i=!0)},o(t){gr(e.$$.fragment,t),i=!1},d(t){Mr(e,t)}}}function Sl(t){let e;return{c(){e=_o("g")},m(i,n){xo(i,e,n),e.innerHTML=t[1]},p(t,i){2&i&&(e.innerHTML=t[1])},d(t){t&&$o(e)}}}function Cl(t){let e,i;return{c(){e=wo("span"),i=ko(t[0]),Eo(e,"class",t[12])},m(t,n){xo(t,e,n),bo(e,i)},p(t,n){1&n&&Ao(i,t[0]),4096&n&&Eo(e,"class",t[12])},d(t){t&&$o(e)}}}function Tl(t){let e,i,n,o;const r=t[25].default,s=ro(r,t,t[27],null),a=s||function(t){let e,i,n,o=t[1]&&kl(t),r=t[0]&&Cl(t);return{c(){e=wo("span"),o&&o.c(),i=So(),r&&r.c(),Eo(e,"class",t[10])},m(t,s){xo(t,e,s),o&&o.m(e,null),bo(e,i),r&&r.m(e,null),n=!0},p(t,s){t[1]?o?(o.p(t,s),2&s&&mr(o,1)):(o=kl(t),o.c(),mr(o,1),o.m(e,i)):o&&(pr(),gr(o,1,1,(()=>{o=null})),fr()),t[0]?r?r.p(t,s):(r=Cl(t),r.c(),r.m(e,null)):r&&(r.d(1),r=null),(!n||1024&s)&&Eo(e,"class",t[10])},i(t){n||(mr(o),n=!0)},o(t){gr(o),n=!1},d(t){t&&$o(e),o&&o.d(),r&&r.d()}}}(t);return{c(){e=wo("button"),a&&a.c(),Eo(e,"type",t[4]),Eo(e,"style",t[2]),e.disabled=t[3],Eo(e,"class",t[11]),Eo(e,"title",t[0])},m(r,s){xo(r,e,s),a&&a.m(e,null),t[26](e),i=!0,n||(o=[To(e,"keydown",(function(){to(t[6])&&t[6].apply(this,arguments)})),To(e,"click",(function(){to(t[5])&&t[5].apply(this,arguments)})),To(e,"pointerdown",(function(){to(t[9])&&t[9].apply(this,arguments)})),uo(t[7].call(null,e))],n=!0)},p(n,[o]){t=n,s?s.p&&134217728&o&&ao(s,r,t,t[27],o,null,null):a&&a.p&&5123&o&&a.p(t,o),(!i||16&o)&&Eo(e,"type",t[4]),(!i||4&o)&&Eo(e,"style",t[2]),(!i||8&o)&&(e.disabled=t[3]),(!i||2048&o)&&Eo(e,"class",t[11]),(!i||1&o)&&Eo(e,"title",t[0])},i(t){i||(mr(a,t),i=!0)},o(t){gr(a,t),i=!1},d(i){i&&$o(e),a&&a.d(i),t[26](null),n=!1,Jn(o)}}}function Ml(t,e,i){let n,o,r,s,a,l,{$$slots:c={},$$scope:h}=e,{class:u}=e,{label:d}=e,{labelClass:p}=e,{innerClass:f}=e,{hideLabel:m=!1}=e,{icon:g}=e,{style:y}=e,{disabled:v}=e,{type:b="button"}=e,{onclick:x}=e,{onkeydown:$}=e,{onhold:w}=e,{action:_=(()=>{})}=e,{holdThreshold:k=500}=e,{holdSpeedUpFactor:S=.5}=e,{holdSpeedMin:C=20}=e;const T=t=>{i(23,l=setTimeout((()=>{w(),T(Math.max(t*S,C))}),t))};let M;return t.$$set=t=>{"class"in t&&i(13,u=t.class),"label"in t&&i(0,d=t.label),"labelClass"in t&&i(14,p=t.labelClass),"innerClass"in t&&i(15,f=t.innerClass),"hideLabel"in t&&i(16,m=t.hideLabel),"icon"in t&&i(1,g=t.icon),"style"in t&&i(2,y=t.style),"disabled"in t&&i(3,v=t.disabled),"type"in t&&i(4,b=t.type),"onclick"in t&&i(5,x=t.onclick),"onkeydown"in t&&i(6,$=t.onkeydown),"onhold"in t&&i(17,w=t.onhold),"action"in t&&i(7,_=t.action),"holdThreshold"in t&&i(18,k=t.holdThreshold),"holdSpeedUpFactor"in t&&i(19,S=t.holdSpeedUpFactor),"holdSpeedMin"in t&&i(20,C=t.holdSpeedMin),"$$scope"in t&&i(27,h=t.$$scope)},t.$$.update=()=>{25296896&t.$$.dirty&&i(24,o=w?()=>{l&&(clearTimeout(l),i(23,l=void 0),document.documentElement.removeEventListener("pointerup",o))}:Xn),17170432&t.$$.dirty&&i(9,n=w?()=>{document.documentElement.addEventListener("pointerup",o),T(k)}:Xn),32768&t.$$.dirty&&i(10,r=Ga(["PinturaButtonInner",f])),73728&t.$$.dirty&&i(11,s=Ga(["PinturaButton",m&&"PinturaButtonIconOnly",u])),81920&t.$$.dirty&&i(12,a=Ga([m?"implicit":"PinturaButtonLabel",p]))},[d,g,y,v,b,x,$,_,M,n,r,s,a,u,p,f,m,w,k,S,C,t=>_l(t,M),()=>M,l,o,c,function(t){Zo[t?"unshift":"push"]((()=>{M=t,i(8,M)}))},h]}class Pl extends Er{constructor(t){super(),Pr(this,t,Ml,Tl,eo,{class:13,label:0,labelClass:14,innerClass:15,hideLabel:16,icon:1,style:2,disabled:3,type:4,onclick:5,onkeydown:6,onhold:17,action:7,holdThreshold:18,holdSpeedUpFactor:19,holdSpeedMin:20,isEventTarget:21,getElement:22})}get isEventTarget(){return this.$$.ctx[21]}get getElement(){return this.$$.ctx[22]}}var El=(t,e)=>{const i=t.findIndex(e);if(i>=0)return t.splice(i,1)},Il=(t,e={})=>{const{inertia:i=!1,shouldStartInteraction:n=(()=>!0),pinch:o=!1,multiTouch:r,getEventPosition:s=(t=>Q(t.clientX,t.clientY))}=e;function a(e,i){t.dispatchEvent(new CustomEvent(e,{detail:i}))}function l(){b&&b(),b=void 0}const c=[],h=t=>0===t.timeStamp?Date.now():t.timeStamp,u=()=>{const t=et(c[0].position);if(c[1]){const e=.5*(c[1].position.x-t.x),i=.5*(c[1].position.y-t.y);t.x+=e,t.y+=i}return t},d=t=>{t.origin.x=t.position.x,t.origin.y=t.position.y,t.translation.x=0,t.translation.y=0},p=t=>{const e=(t=>c.findIndex((e=>e.event.pointerId===t.pointerId)))(t);if(!(e<0))return c[e]},f=()=>1===c.length,m=()=>2===c.length;let g,y,v,b,x,$,w,_,k,S=0;function C(e){if(!m()&&!(t=>Ke(t.button)&&0!==t.button)(e)&&n(e,t))if(l(),(t=>{const e=h(t),i={timeStamp:e,timeStampInitial:e,position:s(t),origin:s(t),velocity:K(),translation:K(),interactionState:void 0,event:t};c.push(i),i.interactionState=(t=>{const e=gt(t.map((t=>t.position)));return{center:e,distance:((t,e)=>t.reduce(((t,i)=>t+ft(e,i.position)),0)/t.length)(t,e),velocity:gt(t.map((t=>t.velocity))),translation:gt(t.map((t=>t.translation)))}})(c)})(e),f())document.documentElement.addEventListener("pointermove",M),document.documentElement.addEventListener("pointerup",P),document.documentElement.addEventListener("pointercancel",P),_=!1,w=1,$=K(),x=void 0,a("interactionstart",{origin:et(p(e).origin)});else if(o)_=!0,x=ft(c[0].position,c[1].position),$.x+=c[0].translation.x,$.y+=c[0].translation.y,d(c[0]);else if(!1===r)return c.length=0,document.documentElement.removeEventListener("pointermove",M),document.documentElement.removeEventListener("pointerup",P),document.documentElement.removeEventListener("pointercancel",P),a("interactioncancel")}t.addEventListener("pointerdown",C);let T=Date.now();function M(t){t.preventDefault(),(t=>{const e=p(t);if(!e)return;const i=h(t),n=s(t),o=Math.max(1,i-e.timeStamp);e.velocity.x=(n.x-e.position.x)/o,e.velocity.y=(n.y-e.position.y)/o,e.translation.x=n.x-e.origin.x,e.translation.y=n.y-e.origin.y,e.timeStamp=i,e.position.x=n.x,e.position.y=n.y,e.event=t})(t);const e=et(c[0].translation);let i=w;o&&m()&&(i*=ft(c[0].position,c[1].position)/x,ct(e,c[1].translation)),e.x+=$.x,e.y+=$.y;const n=Date.now();n-T<16||(T=n,a("interactionupdate",{position:u(),translation:e,scalar:o?i:void 0,isMultiTouching:m()}))}function P(t){if(!p(t))return;const e=u(),n=(t=>{const e=El(c,(e=>e.event.pointerId===t.pointerId));if(e)return e[0]})(t);if(o&&f()){const t=ft(c[0].position,n.position);w*=t/x,$.x+=c[0].translation.x+n.translation.x,$.y+=c[0].translation.y+n.translation.y,d(c[0])}let r=!1,s=!1;if(!_&&n){const t=performance.now(),e=t-n.timeStampInitial,i=pt(n.translation);r=i<64&&e<300,s=!!(k&&r&&t-S<700&&pt(k,n.position)<128),r&&(k=et(n.position),S=t)}if(c.length>0)return;document.documentElement.removeEventListener("pointermove",M),document.documentElement.removeEventListener("pointerup",P),document.documentElement.removeEventListener("pointercancel",P);const l=et(n.translation),h=et(n.velocity);let m=!1;a("interactionrelease",{isTap:r,isDoubleTap:s,position:e,translation:l,scalar:w,preventInertia:()=>m=!0});const C=ft(h);if(m||!i||C<.25)return I(l,{isTap:r,isDoubleTap:s});y=et(e),v=et(l),g=Zs(et(l),{easing:qs,duration:80*C}),g.set({x:l.x+50*h.x,y:l.y+50*h.y}).then((()=>{b&&I(no(g),{isTap:r,isDoubleTap:s})})),b=g.subscribe(E)}function E(t){t&&a("interactionupdate",{position:Q(y.x+(t.x-v.x),y.y+(t.y-v.y)),translation:t,scalar:o?w:void 0})}function I(t,e){l(),a("interactionend",{...e,translation:t,scalar:o?w:void 0})}return{destroy(){l(),t.removeEventListener("pointerdown",C)}}},Al=(t,e={})=>{const{direction:i,shiftMultiplier:n=10,bubbles:o=!1,stopKeydownPropagation:r=!0}=e,s="horizontal"===i,a="vertical"===i,l=e=>{const{key:i}=e,l=e.shiftKey,c=/up|down/i.test(i),h=/left|right/i.test(i);if(!h&&!c)return;if(s&&c)return;if(a&&h)return;const u=l?n:1;r&&e.stopPropagation(),t.dispatchEvent(new CustomEvent("nudge",{bubbles:o,detail:Q((/left/i.test(i)?-1:/right/i.test(i)?1:0)*u,(/up/i.test(i)?-1:/down/i.test(i)?1:0)*u)}))};return t.addEventListener("keydown",l),{destroy(){t.removeEventListener("keydown",l)}}};function Dl(t,e){return e*Math.sign(t)*Math.log10(1+Math.abs(t)/e)}const Rl=(t,e,i)=>{if(!e)return zt(t);const n=t.x+Dl(e.x-t.x,i),o=t.x+t.width+Dl(e.x+e.width-(t.x+t.width),i),r=t.y+Dl(e.y-t.y,i);return{x:n,y:r,width:o-n,height:t.y+t.height+Dl(e.y+e.height-(t.y+t.height),i)-r}};var Ll=(t,e)=>{if(t)return/em/.test(t)?16*parseInt(t,10):/px/.test(t)?parseInt(t,10):void 0},Ol=t=>{let e=t.detail||0;const{deltaX:i,deltaY:n,wheelDelta:o,wheelDeltaX:r,wheelDeltaY:s}=t;return Ke(r)&&Math.abs(r)>Math.abs(s)?e=r/-120:Ke(i)&&Math.abs(i)>Math.abs(n)?e=i/20:(o||s)&&(e=(o||s)/-120),e||(e=n/20),e},zl={Up:38,Down:40,Left:37,Right:39};function Fl(t){let e,i,n,o,r,s,a;const l=t[37].default,c=ro(l,t,t[36],null);return{c(){e=wo("div"),i=wo("div"),c&&c.c(),Eo(i,"style",t[6]),Eo(e,"class",n=Ga(["PinturaScrollable",t[0]])),Eo(e,"style",t[4]),Eo(e,"data-direction",t[1]),Eo(e,"data-state",t[5])},m(n,l){xo(n,e,l),bo(e,i),c&&c.m(i,null),t[39](e),r=!0,s||(a=[To(i,"interactionstart",t[9]),To(i,"interactionupdate",t[11]),To(i,"interactionend",t[12]),To(i,"interactionrelease",t[10]),uo(Il.call(null,i,{inertia:!0})),To(i,"measure",t[38]),uo(ha.call(null,i)),To(e,"wheel",t[14],{passive:!1}),To(e,"scroll",t[16]),To(e,"focusin",t[15]),To(e,"nudge",t[17]),To(e,"measure",t[13]),uo(ha.call(null,e,{observePosition:!0})),uo(o=Al.call(null,e,{direction:"x"===t[1]?"horizontal":"vertical",stopKeydownPropagation:!1}))],s=!0)},p(t,s){c&&c.p&&32&s[1]&&ao(c,l,t,t[36],s,null,null),(!r||64&s[0])&&Eo(i,"style",t[6]),(!r||1&s[0]&&n!==(n=Ga(["PinturaScrollable",t[0]])))&&Eo(e,"class",n),(!r||16&s[0])&&Eo(e,"style",t[4]),(!r||2&s[0])&&Eo(e,"data-direction",t[1]),(!r||32&s[0])&&Eo(e,"data-state",t[5]),o&&to(o.update)&&2&s[0]&&o.update.call(null,{direction:"x"===t[1]?"horizontal":"vertical",stopKeydownPropagation:!1})},i(t){r||(mr(c,t),r=!0)},o(t){gr(c,t),r=!1},d(i){i&&$o(e),c&&c.d(i),t[39](null),s=!1,Jn(a)}}}function Bl(t,e,i){let n,o,r,s,a,l,c,h,u,{$$slots:d={},$$scope:p}=e;const m=Vo(),g=Object.values(zl),y=qo("keysPressed");oo(t,y,(t=>i(46,u=t)));let v,b,x,$,w="idle",_=Qs(0);oo(t,_,(t=>i(34,h=t)));let k,{class:S}=e,{scrollBlockInteractionDist:C=5}=e,{scrollStep:T=10}=e,{scrollFocusMargin:M=64}=e,{scrollDirection:P="x"}=e,{scrollAutoCancel:E=!1}=e,{elasticity:I=0}=e,{onscroll:A=f}=e,{maskFeatherSize:D}=e,{maskFeatherStartOpacity:R}=e,{maskFeatherEndOpacity:L}=e,{scroll:O}=e,z="",F=!0;const B=_.subscribe((t=>{const e=K();e[P]=t,A(e)})),N=t=>Math.max(Math.min(0,t),x[n]-b[n]);let H,W,j;const Y=(t,e={})=>{const{elastic:n=!1,animate:o=!1}=e;Math.abs(t)>C&&"idle"===w&&!$&&i(28,w="scrolling");const r=N(t),s=n&&I&&!$?r+Dl(t-r,I):r;let a=!0;o?a=!1:F||(a=!$),F=!1,_.set(s,{hard:a}).then((t=>{$&&(F=!0)}))};return Yo((()=>{B()})),t.$$set=t=>{"class"in t&&i(0,S=t.class),"scrollBlockInteractionDist"in t&&i(21,C=t.scrollBlockInteractionDist),"scrollStep"in t&&i(22,T=t.scrollStep),"scrollFocusMargin"in t&&i(23,M=t.scrollFocusMargin),"scrollDirection"in t&&i(1,P=t.scrollDirection),"scrollAutoCancel"in t&&i(24,E=t.scrollAutoCancel),"elasticity"in t&&i(25,I=t.elasticity),"onscroll"in t&&i(26,A=t.onscroll),"maskFeatherSize"in t&&i(20,D=t.maskFeatherSize),"maskFeatherStartOpacity"in t&&i(18,R=t.maskFeatherStartOpacity),"maskFeatherEndOpacity"in t&&i(19,L=t.maskFeatherEndOpacity),"scroll"in t&&i(27,O=t.scroll),"$$scope"in t&&i(36,p=t.$$scope)},t.$$.update=()=>{if(2&t.$$.dirty[0]&&i(30,n="x"===P?"width":"height"),2&t.$$.dirty[0]&&i(31,o=P.toUpperCase()),8&t.$$.dirty[0]&&i(32,r=k&&getComputedStyle(k)),8&t.$$.dirty[0]|2&t.$$.dirty[1]&&i(33,s=r&&Ll(r.getPropertyValue("--scrollable-feather-size"))),1611399172&t.$$.dirty[0]|12&t.$$.dirty[1]&&null!=h&&x&&null!=s&&b){const t=-1*h/s,e=-(x[n]-b[n]-h)/s;i(18,R=Qr(1-t,0,1)),i(19,L=Qr(1-e,0,1)),i(20,D=s),i(4,z=`--scrollable-feather-start-opacity: ${R};--scrollable-feather-end-opacity: ${L}`)}134217736&t.$$.dirty[0]&&k&&void 0!==O&&(Ke(O)?Y(O):Y(O.scrollOffset,O)),1610612740&t.$$.dirty[0]&&i(35,a=x&&b?b[n]>x[n]:void 0),268435456&t.$$.dirty[0]|16&t.$$.dirty[1]&&i(5,l=Ga([w,a?"overflows":void 0])),25&t.$$.dirty[1]&&i(6,c=a?`transform: translate${o}(${h}px)`:void 0)},[S,P,b,k,z,l,c,y,_,()=>{a&&(W=!1,H=!0,j=Q(0,0),$=!1,i(28,w="idle"),v=no(_))},({detail:t})=>{a&&($=!0,i(28,w="idle"))},({detail:t})=>{a&&(W||H&&(H=!1,pt(t.translation)<.1)||(!E||"x"!==P||(t=>{const e=lt(Q(t.x-j.x,t.y-j.y),Math.abs);j=et(t);const i=pt(e),n=e.x-e.y;return!(i>1&&n<-.5)})(t.translation)?Y(v+t.translation[P],{elastic:!0}):W=!0))},({detail:t})=>{if(!a)return;if(W)return;const e=v+t.translation[P],i=N(e);F=!1,_.set(i).then((t=>{$&&(F=!0)}))},({detail:t})=>{i(29,x=t),m("measure",{x:t.x,y:t.y,width:t.width,height:t.height})},t=>{if(!a)return;t.preventDefault(),t.stopPropagation();const e=Ol(t),i=no(_);Y(i+e*T,{animate:!0})},t=>{if(!a)return;if(!$)return;if(u.some((t=>g.includes(t))))return;let e=t.target;t.target.classList.contains("implicit")&&(e=e.parentNode);const i=e["x"===P?"offsetLeft":"offsetTop"],o=i+e["x"===P?"offsetWidth":"offsetHeight"],r=no(_),s=M+D;r+i<s?Y(-i+s):r+o>x[n]-s&&Y(x[n]-o-s,{animate:!0})},()=>{i(3,k["x"===P?"scrollLeft":"scrollTop"]=0,k)},({detail:t})=>{const e=-2*t[P],i=no(_);Y(i+e*T,{animate:!0})},R,L,D,C,T,M,E,I,A,O,w,x,n,o,r,s,h,a,p,d,t=>i(2,b=t.detail),function(t){Zo[t?"unshift":"push"]((()=>{k=t,i(3,k)}))}]}class Nl extends Er{constructor(t){super(),Pr(this,t,Bl,Fl,eo,{class:0,scrollBlockInteractionDist:21,scrollStep:22,scrollFocusMargin:23,scrollDirection:1,scrollAutoCancel:24,elasticity:25,onscroll:26,maskFeatherSize:20,maskFeatherStartOpacity:18,maskFeatherEndOpacity:19,scroll:27},[-1,-1])}}function Hl(t,{delay:e=0,duration:i=400,easing:n=Gn}={}){const o=+getComputedStyle(t).opacity;return{delay:e,duration:i,easing:n,css:t=>"opacity: "+t*o}}function Wl(t){let e,i,n,o,r,s;return{c(){e=wo("span"),i=ko(t[0]),Eo(e,"class","PinturaStatusMessage")},m(n,a){xo(n,e,a),bo(e,i),o=!0,r||(s=[To(e,"measure",(function(){to(t[1])&&t[1].apply(this,arguments)})),uo(ha.call(null,e))],r=!0)},p(e,[n]){t=e,(!o||1&n)&&Ao(i,t[0])},i(t){o||(nr((()=>{n||(n=vr(e,Hl,{},!0)),n.run(1)})),o=!0)},o(t){n||(n=vr(e,Hl,{},!1)),n.run(0),o=!1},d(t){t&&$o(e),t&&n&&n.end(),r=!1,Jn(s)}}}function jl(t,e,i){let{text:n}=e,{onmeasure:o=f}=e;return t.$$set=t=>{"text"in t&&i(0,n=t.text),"onmeasure"in t&&i(1,o=t.onmeasure)},[n,o]}class Yl extends Er{constructor(t){super(),Pr(this,t,jl,Wl,eo,{text:0,onmeasure:1})}}function Vl(t){let e,i,n,o,r,s,a,l;return{c(){e=wo("span"),i=_o("svg"),n=_o("g"),o=_o("circle"),r=_o("circle"),s=So(),a=wo("span"),l=ko(t[0]),Eo(o,"class","PinturaProgressIndicatorBar"),Eo(o,"r","8.5"),Eo(o,"cx","10"),Eo(o,"cy","10"),Eo(o,"stroke-linecap","round"),Eo(o,"opacity",".25"),Eo(r,"class","PinturaProgressIndicatorFill"),Eo(r,"r","8.5"),Eo(r,"stroke-dasharray",t[1]),Eo(r,"cx","10"),Eo(r,"cy","10"),Eo(r,"transform","rotate(-90) translate(-20)"),Eo(n,"fill","none"),Eo(n,"stroke","currentColor"),Eo(n,"stroke-width","2.5"),Eo(n,"stroke-linecap","round"),Eo(n,"opacity",t[2]),Eo(i,"width","20"),Eo(i,"height","20"),Eo(i,"viewBox","0 0 20 20"),Eo(i,"xmlns","http://www.w3.org/2000/svg"),Eo(i,"aria-hidden","true"),Eo(i,"focusable","false"),Eo(a,"class","implicit"),Eo(e,"class","PinturaProgressIndicator"),Eo(e,"data-status",t[3])},m(t,c){xo(t,e,c),bo(e,i),bo(i,n),bo(n,o),bo(n,r),bo(e,s),bo(e,a),bo(a,l)},p(t,[i]){2&i&&Eo(r,"stroke-dasharray",t[1]),4&i&&Eo(n,"opacity",t[2]),1&i&&Ao(l,t[0]),8&i&&Eo(e,"data-status",t[3])},i:Xn,o:Xn,d(t){t&&$o(e)}}}function Ul(t,e,i){let n,o,r,s,a;const l=Vo();let{progress:c}=e,{min:h=0}=e,{max:u=100}=e,{labelBusy:d="Busy"}=e;const p=Qs(0,{precision:.01}),f=Rr([p],(t=>Qr(t,h,u)));oo(t,f,(t=>i(9,a=t)));const m=f.subscribe((t=>{1===c&&Math.round(t)>=100&&l("complete")}));return Yo((()=>{m()})),t.$$set=t=>{"progress"in t&&i(5,c=t.progress),"min"in t&&i(6,h=t.min),"max"in t&&i(7,u=t.max),"labelBusy"in t&&i(8,d=t.labelBusy)},t.$$.update=()=>{32&t.$$.dirty&&c&&c!==1/0&&p.set(100*c),800&t.$$.dirty&&i(0,n=c===1/0?d:Math.round(a)+"%"),544&t.$$.dirty&&i(1,o=c===1/0?"26.5 53":a/100*53+" 53"),544&t.$$.dirty&&i(2,r=Math.min(1,c===1/0?1:a/10)),32&t.$$.dirty&&i(3,s=c===1/0?"busy":"loading")},[n,o,r,s,f,c,h,u,d,a]}class ql extends Er{constructor(t){super(),Pr(this,t,Ul,Vl,eo,{progress:5,min:6,max:7,labelBusy:8})}}function Xl(t){let e,i,n;const o=t[5].default,r=ro(o,t,t[4],null);return{c(){e=wo("span"),r&&r.c(),Eo(e,"class",i="PinturaStatusAside "+t[0]),Eo(e,"style",t[1])},m(t,i){xo(t,e,i),r&&r.m(e,null),n=!0},p(t,[s]){r&&r.p&&16&s&&ao(r,o,t,t[4],s,null,null),(!n||1&s&&i!==(i="PinturaStatusAside "+t[0]))&&Eo(e,"class",i),(!n||2&s)&&Eo(e,"style",t[1])},i(t){n||(mr(r,t),n=!0)},o(t){gr(r,t),n=!1},d(t){t&&$o(e),r&&r.d(t)}}}function Gl(t,e,i){let n,{$$slots:o={},$$scope:r}=e,{offset:s=0}=e,{opacity:a=0}=e,{class:l}=e;return t.$$set=t=>{"offset"in t&&i(2,s=t.offset),"opacity"in t&&i(3,a=t.opacity),"class"in t&&i(0,l=t.class),"$$scope"in t&&i(4,r=t.$$scope)},t.$$.update=()=>{12&t.$$.dirty&&i(1,n=`transform:translateX(${s}px);opacity:${a}`)},[l,n,s,a,r,o]}class Zl extends Er{constructor(t){super(),Pr(this,t,Gl,Xl,eo,{offset:2,opacity:3,class:0})}}function Kl(t){let e,i,n;const o=t[3].default,r=ro(o,t,t[2],null);let s=[{for:i="_"},t[1]],a={};for(let t=0;t<s.length;t+=1)a=Zn(a,s[t]);return{c(){e=wo("label"),r&&r.c(),Io(e,a)},m(t,i){xo(t,e,i),r&&r.m(e,null),n=!0},p(t,i){r&&r.p&&4&i&&ao(r,o,t,t[2],i,null,null),Io(e,a=_r(s,[{for:"_"},2&i&&t[1]]))},i(t){n||(mr(r,t),n=!0)},o(t){gr(r,t),n=!1},d(t){t&&$o(e),r&&r.d(t)}}}function Ql(t){let e,i;const n=t[3].default,o=ro(n,t,t[2],null);let r=[t[1]],s={};for(let t=0;t<r.length;t+=1)s=Zn(s,r[t]);return{c(){e=wo("div"),o&&o.c(),Io(e,s)},m(t,n){xo(t,e,n),o&&o.m(e,null),i=!0},p(t,i){o&&o.p&&4&i&&ao(o,n,t,t[2],i,null,null),Io(e,s=_r(r,[2&i&&t[1]]))},i(t){i||(mr(o,t),i=!0)},o(t){gr(o,t),i=!1},d(t){t&&$o(e),o&&o.d(t)}}}function Jl(t){let e,i;const n=t[3].default,o=ro(n,t,t[2],null);let r=[t[1]],s={};for(let t=0;t<r.length;t+=1)s=Zn(s,r[t]);return{c(){e=wo("div"),o&&o.c(),Io(e,s)},m(t,n){xo(t,e,n),o&&o.m(e,null),i=!0},p(t,i){o&&o.p&&4&i&&ao(o,n,t,t[2],i,null,null),Io(e,s=_r(r,[2&i&&t[1]]))},i(t){i||(mr(o,t),i=!0)},o(t){gr(o,t),i=!1},d(t){t&&$o(e),o&&o.d(t)}}}function tc(t){let e,i,n,o;const r=[Jl,Ql,Kl],s=[];function a(t,e){return"div"===t[0]?0:"span"===t[0]?1:"label"===t[0]?2:-1}return~(e=a(t))&&(i=s[e]=r[e](t)),{c(){i&&i.c(),n=Co()},m(t,i){~e&&s[e].m(t,i),xo(t,n,i),o=!0},p(t,[o]){let l=e;e=a(t),e===l?~e&&s[e].p(t,o):(i&&(pr(),gr(s[l],1,1,(()=>{s[l]=null})),fr()),~e?(i=s[e],i?i.p(t,o):(i=s[e]=r[e](t),i.c()),mr(i,1),i.m(n.parentNode,n)):i=null)},i(t){o||(mr(i),o=!0)},o(t){gr(i),o=!1},d(t){~e&&s[e].d(t),t&&$o(n)}}}function ec(t,e,i){let{$$slots:n={},$$scope:o}=e,{name:r="div"}=e,{attributes:s={}}=e;return t.$$set=t=>{"name"in t&&i(0,r=t.name),"attributes"in t&&i(1,s=t.attributes),"$$scope"in t&&i(2,o=t.$$scope)},[r,s,o,n]}class ic extends Er{constructor(t){super(),Pr(this,t,ec,tc,eo,{name:0,attributes:1})}}var nc=()=>n()&&window.devicePixelRatio||1;let oc=null;var rc=t=>(null===oc&&(oc=1===nc()?Math.round:t=>t),oc(t)),sc=(t,e={})=>{if(t){if(e.preventScroll&&ke()){const e=document.body.scrollTop;return t.focus(),void(document.body.scrollTop=e)}t.focus(e)}};const ac=t=>({}),lc=t=>({}),cc=t=>({}),hc=t=>({});function uc(t){let e,i;const n=[t[10]];let o={$$slots:{default:[pc]},$$scope:{ctx:t}};for(let t=0;t<n.length;t+=1)o=Zn(o,n[t]);return e=new Pl({props:o}),t[37](e),{c(){Cr(e.$$.fragment)},m(t,n){Tr(e,t,n),i=!0},p(t,i){const o=1024&i[0]?_r(n,[kr(t[10])]):{};512&i[1]&&(o.$$scope={dirty:i,ctx:t}),e.$set(o)},i(t){i||(mr(e.$$.fragment,t),i=!0)},o(t){gr(e.$$.fragment,t),i=!1},d(i){t[37](null),Mr(e,i)}}}function dc(t){let e,i;const n=[t[10]];let o={};for(let t=0;t<n.length;t+=1)o=Zn(o,n[t]);return e=new Pl({props:o}),t[36](e),{c(){Cr(e.$$.fragment)},m(t,n){Tr(e,t,n),i=!0},p(t,i){const o=1024&i[0]?_r(n,[kr(t[10])]):{};e.$set(o)},i(t){i||(mr(e.$$.fragment,t),i=!0)},o(t){gr(e.$$.fragment,t),i=!1},d(i){t[36](null),Mr(e,i)}}}function pc(t){let e;const i=t[35].label,n=ro(i,t,t[40],hc);return{c(){n&&n.c()},m(t,i){n&&n.m(t,i),e=!0},p(t,e){n&&n.p&&512&e[1]&&ao(n,i,t,t[40],e,cc,hc)},i(t){e||(mr(n,t),e=!0)},o(t){gr(n,t),e=!1},d(t){n&&n.d(t)}}}function fc(t){let e,i,n,o,r,s,a;const l=t[35].details,c=ro(l,t,t[40],lc);return{c(){e=wo("div"),c&&c.c(),i=So(),n=wo("span"),Eo(n,"class","PinturaPanelTip"),Eo(n,"style",t[7]),Eo(e,"class",o=Ga(["PinturaPanel",t[1]])),Eo(e,"tabindex","-1"),Eo(e,"style",t[6])},m(o,l){xo(o,e,l),c&&c.m(e,null),bo(e,i),bo(e,n),t[38](e),r=!0,s||(a=[To(e,"keydown",t[16]),To(e,"measure",t[39]),uo(ha.call(null,e))],s=!0)},p(t,i){c&&c.p&&512&i[1]&&ao(c,l,t,t[40],i,ac,lc),(!r||128&i[0])&&Eo(n,"style",t[7]),(!r||2&i[0]&&o!==(o=Ga(["PinturaPanel",t[1]])))&&Eo(e,"class",o),(!r||64&i[0])&&Eo(e,"style",t[6])},i(t){r||(mr(c,t),r=!0)},o(t){gr(c,t),r=!1},d(i){i&&$o(e),c&&c.d(i),t[38](null),s=!1,Jn(a)}}}function mc(t){let e,i,n,o,r,s,a,l,c;const h=[dc,uc],u=[];function d(t,e){return t[0]?0:1}i=d(t),n=u[i]=h[i](t);let p=t[5]&&fc(t);return{c(){e=So(),n.c(),o=So(),p&&p.c(),r=So(),s=Co()},m(n,h){xo(n,e,h),u[i].m(n,h),xo(n,o,h),p&&p.m(n,h),xo(n,r,h),xo(n,s,h),a=!0,l||(c=[To(document.body,"pointerdown",(function(){to(t[8])&&t[8].apply(this,arguments)})),To(document.body,"pointerup",(function(){to(t[9])&&t[9].apply(this,arguments)}))],l=!0)},p(e,s){let a=i;i=d(t=e),i===a?u[i].p(t,s):(pr(),gr(u[a],1,1,(()=>{u[a]=null})),fr(),n=u[i],n?n.p(t,s):(n=u[i]=h[i](t),n.c()),mr(n,1),n.m(o.parentNode,o)),t[5]?p?(p.p(t,s),32&s[0]&&mr(p,1)):(p=fc(t),p.c(),mr(p,1),p.m(r.parentNode,r)):p&&(pr(),gr(p,1,1,(()=>{p=null})),fr())},i(t){a||(mr(n),mr(p),mr(!1),a=!0)},o(t){gr(n),gr(p),gr(!1),a=!1},d(t){t&&$o(e),u[i].d(t),t&&$o(o),p&&p.d(t),t&&$o(r),t&&$o(s),l=!1,Jn(c)}}}let gc=12;function yc(t,e,i){let n,o,r,s,a,l,c,h,u,d,p,f,m,g,y,v,b,{$$slots:x={},$$scope:$}=e,{buttonClass:w}=e,{buttonLabel:_}=e,{panelClass:k}=e,{isActive:S=!1}=e,{onshow:C=(({panel:t})=>sc(t,{preventScroll:!0}))}=e;const T=qo("rootPortal");oo(t,T,(t=>i(34,b=t)));const M=qo("rootRect");let P,E,I;oo(t,M,(t=>i(27,g=t)));const A=()=>i(20,I=n&&n.getBoundingClientRect());let D=K(),R=Qs(0);oo(t,R,(t=>i(29,v=t)));let L=K();const O=Dr({x:0,y:0});oo(t,O,(t=>i(28,y=t)));const z=Qs(-5,{stiffness:.1,damping:.35,precision:.001});oo(t,z,(t=>i(26,m=t)));const F=t=>_l(t,b)||E.isEventTarget(t);let B,N,H=!1;const W=t=>{S||A(),i(24,N=t),i(17,S=!S)},j=t=>{/down/i.test(t.key)&&(i(17,S=!0),i(24,N=t))};return Yo((()=>{if(!b)return;if(!B)return;const t=B;ir().then((()=>{t.parentNode&&t.remove()}))})),t.$$set=t=>{"buttonClass"in t&&i(18,w=t.buttonClass),"buttonLabel"in t&&i(0,_=t.buttonLabel),"panelClass"in t&&i(1,k=t.panelClass),"isActive"in t&&i(17,S=t.isActive),"onshow"in t&&i(19,C=t.onshow),"$$scope"in t&&i(40,$=t.$$scope)},t.$$.update=()=>{if(8&t.$$.dirty[0]&&(n=E&&E.getElement()),8519680&t.$$.dirty[0]&&i(9,p=S?t=>{H&&(i(23,H=!1),F(t)||i(17,S=!1))}:void 0),131072&t.$$.dirty[0]&&R.set(S?1:0),131072&t.$$.dirty[0]&&z.set(S?0:-5),67108864&t.$$.dirty[0]&&i(25,o=1-m/-5),134348800&t.$$.dirty[0]&&g&&S&&A(),135397380&t.$$.dirty[0]&&g&&P&&I&&S){let t=I.x-g.x+.5*I.width-.5*P.width,e=I.y-g.y+I.height;const n=gc,o=gc,r=g.width-gc,s=g.height-gc,a=t,l=e,c=a+P.width,h=l+P.height;a<n&&(i(22,L.x=a-n,L),t=n),c>r&&(i(22,L.x=c-r,L),t=r-P.width),h>s?(i(21,D.y=-1,D),o<e-P.height-I.height?(i(22,L.y=0,L),e-=P.height+I.height):(i(22,L.y=e-(h-s),L),e-=h-s)):i(21,D.y=1,D),ho(O,y=lt(Q(t,e),rc),y)}536870912&t.$$.dirty[0]&&i(5,r=v>0),536870912&t.$$.dirty[0]&&i(30,s=v<1),337641472&t.$$.dirty[0]&&i(31,a=`translateX(${Math.round(y.x)+D.x*gc}px) translateY(${Math.round(y.y)+D.y*gc+D.y*m}px)`),1610612736&t.$$.dirty[0]|1&t.$$.dirty[1]&&i(6,l=s?`opacity: ${v}; pointer-events: ${v<1?"none":"all"}; transform: ${a};`:"transform: "+a),33554432&t.$$.dirty[0]&&i(32,c=.5+.5*o),33554432&t.$$.dirty[0]&&i(33,h=o),274726916&t.$$.dirty[0]|6&t.$$.dirty[1]&&i(7,u=y&&P&&`opacity:${h};transform:scaleX(${c})rotate(45deg);top:${D.y<0?L.y+P.height:0}px;left:${L.x+.5*P.width}px`),131072&t.$$.dirty[0]&&i(8,d=S?t=>{F(t)||i(23,H=!0)}:void 0),48&t.$$.dirty[0]|8&t.$$.dirty[1]&&r&&b&&B&&B.parentNode!==b&&b.append(B),131072&t.$$.dirty[0]&&(S||i(24,N=void 0)),17301552&t.$$.dirty[0]&&r&&B&&C({e:N,panel:B}),262145&t.$$.dirty[0]&&i(10,f={label:_,class:Ga(["PinturaPanelButton",w]),onkeydown:j,onclick:W})},[_,k,P,E,B,r,l,u,d,p,f,T,M,R,O,z,t=>{/esc/i.test(t.key)&&(i(17,S=!1),n.focus())},S,w,C,I,D,L,H,N,o,m,g,y,v,s,a,c,h,b,x,function(t){Zo[t?"unshift":"push"]((()=>{E=t,i(3,E)}))},function(t){Zo[t?"unshift":"push"]((()=>{E=t,i(3,E)}))},function(t){Zo[t?"unshift":"push"]((()=>{B=t,i(4,B)}))},t=>i(2,P=$t(t.detail)),$]}class vc extends Er{constructor(t){super(),Pr(this,t,yc,mc,eo,{buttonClass:18,buttonLabel:0,panelClass:1,isActive:17,onshow:19},[-1,-1])}}function bc(t){let e,i,n,o,r,s,a,l;const c=t[15].default,h=ro(c,t,t[14],null);return{c(){e=wo("li"),i=wo("input"),n=So(),o=wo("label"),h&&h.c(),Eo(i,"type","radio"),Eo(i,"class","implicit"),Eo(i,"id",t[7]),Eo(i,"name",t[0]),i.value=t[3],i.disabled=t[6],i.hidden=t[5],i.checked=t[4],Eo(o,"for",t[7]),Eo(o,"title",t[2]),Eo(e,"class",r=Ga(["PinturaRadioGroupOption",t[1]])),Eo(e,"data-hidden",t[5]),Eo(e,"data-disabled",t[6]),Eo(e,"data-selected",t[4])},m(r,c){xo(r,e,c),bo(e,i),bo(e,n),bo(e,o),h&&h.m(o,null),s=!0,a||(l=[To(i,"change",Po(t[16])),To(i,"keydown",t[9]),To(i,"click",t[10])],a=!0)},p(t,[n]){(!s||128&n)&&Eo(i,"id",t[7]),(!s||1&n)&&Eo(i,"name",t[0]),(!s||8&n)&&(i.value=t[3]),(!s||64&n)&&(i.disabled=t[6]),(!s||32&n)&&(i.hidden=t[5]),(!s||16&n)&&(i.checked=t[4]),h&&h.p&&16384&n&&ao(h,c,t,t[14],n,null,null),(!s||128&n)&&Eo(o,"for",t[7]),(!s||4&n)&&Eo(o,"title",t[2]),(!s||2&n&&r!==(r=Ga(["PinturaRadioGroupOption",t[1]])))&&Eo(e,"class",r),(!s||32&n)&&Eo(e,"data-hidden",t[5]),(!s||64&n)&&Eo(e,"data-disabled",t[6]),(!s||16&n)&&Eo(e,"data-selected",t[4])},i(t){s||(mr(h,t),s=!0)},o(t){gr(h,t),s=!1},d(t){t&&$o(e),h&&h.d(t),a=!1,Jn(l)}}}function xc(t,e,i){let n,o,{$$slots:r={},$$scope:s}=e,{name:a}=e,{class:l}=e,{label:c}=e,{id:h}=e,{value:u}=e,{checked:d}=e,{onkeydown:p}=e,{onclick:f}=e,{hidden:m=!1}=e,{disabled:g=!1}=e;const y=Object.values(zl),v=qo("keysPressed");return oo(t,v,(t=>i(17,o=t))),t.$$set=t=>{"name"in t&&i(0,a=t.name),"class"in t&&i(1,l=t.class),"label"in t&&i(2,c=t.label),"id"in t&&i(11,h=t.id),"value"in t&&i(3,u=t.value),"checked"in t&&i(4,d=t.checked),"onkeydown"in t&&i(12,p=t.onkeydown),"onclick"in t&&i(13,f=t.onclick),"hidden"in t&&i(5,m=t.hidden),"disabled"in t&&i(6,g=t.disabled),"$$scope"in t&&i(14,s=t.$$scope)},t.$$.update=()=>{2049&t.$$.dirty&&i(7,n=`${a}-${h}`)},[a,l,c,u,d,m,g,n,v,t=>{p(t)},t=>{o.some((t=>y.includes(t)))||f(t)},h,p,f,s,r,function(e){Xo(t,e)}]}class $c extends Er{constructor(t){super(),Pr(this,t,xc,bc,eo,{name:0,class:1,label:2,id:11,value:3,checked:4,onkeydown:12,onclick:13,hidden:5,disabled:6})}}var wc=(t=[])=>t.reduce(((t,e)=>(ti(e)?ti(e[1]):e.options)?t.concat(ti(e)?e[1]:e.options):(t.push(e),t)),[]);const _c=(t,e,i)=>{let n;return ti(t)?n={id:e,value:t[0],label:t[1],...t[2]||{}}:(n=t,n.id=null!=n.id?n.id:e),i?i(n):n};var kc=(t,e,i)=>P(t)?t(e,i):t;const Sc=(t,e)=>t.map((([t,i,n])=>{if(ti(i))return[kc(t,e),Sc(i,e)];{const o=[t,kc(i,e)];if(n){let t={...n};n.icon&&(t.icon=kc(n.icon,e)),o.push(t)}return o}}));var Cc=(t,e)=>Sc(t,e),Tc=(t,e)=>Array.isArray(t)&&Array.isArray(e)?is(t,e):t===e;function Mc(t,e,i){const n=t.slice();return n[27]=e[i],n}const Pc=t=>({option:2048&t[0]}),Ec=t=>({option:t[27]});function Ic(t,e,i){const n=t.slice();return n[27]=e[i],n}const Ac=t=>({option:2048&t[0]}),Dc=t=>({option:t[27]}),Rc=t=>({option:2048&t[0]}),Lc=t=>({option:t[27]});function Oc(t){let e,i,n,o,r,s=[],a=new Map,l=t[1]&&zc(t),c=t[11];const h=t=>t[27].id;for(let e=0;e<c.length;e+=1){let i=Mc(t,c,e),n=h(i);a.set(n,s[e]=Gc(n,i))}return{c(){e=wo("fieldset"),l&&l.c(),i=So(),n=wo("ul");for(let t=0;t<s.length;t+=1)s[t].c();Eo(n,"class","PinturaRadioGroupOptions"),Eo(e,"class",o=Ga(["PinturaRadioGroup",t[3]])),Eo(e,"data-layout",t[5]),Eo(e,"title",t[7])},m(t,o){xo(t,e,o),l&&l.m(e,null),bo(e,i),bo(e,n);for(let t=0;t<s.length;t+=1)s[t].m(n,null);r=!0},p(t,u){t[1]?l?l.p(t,u):(l=zc(t),l.c(),l.m(e,i)):l&&(l.d(1),l=null),8420177&u[0]&&(c=t[11],pr(),s=wr(s,u,h,1,t,c,a,n,$r,Gc,null,Mc),fr()),(!r||8&u[0]&&o!==(o=Ga(["PinturaRadioGroup",t[3]])))&&Eo(e,"class",o),(!r||32&u[0])&&Eo(e,"data-layout",t[5]),(!r||128&u[0])&&Eo(e,"title",t[7])},i(t){if(!r){for(let t=0;t<c.length;t+=1)mr(s[t]);r=!0}},o(t){for(let t=0;t<s.length;t+=1)gr(s[t]);r=!1},d(t){t&&$o(e),l&&l.d();for(let t=0;t<s.length;t+=1)s[t].d()}}}function zc(t){let e,i,n;return{c(){e=wo("legend"),i=ko(t[1]),Eo(e,"class",n=t[2]&&"implicit")},m(t,n){xo(t,e,n),bo(e,i)},p(t,o){2&o[0]&&Ao(i,t[1]),4&o[0]&&n!==(n=t[2]&&"implicit")&&Eo(e,"class",n)},d(t){t&&$o(e)}}}function Fc(t){let e,i;return e=new $c({props:{name:t[4],label:t[27].label,id:t[27].id,value:t[27].value,disabled:t[27].disabled,hidden:t[27].hidden,class:t[8],checked:t[12](t[27])===t[0],onkeydown:t[13](t[27]),onclick:t[14](t[27]),$$slots:{default:[jc]},$$scope:{ctx:t}}}),{c(){Cr(e.$$.fragment)},m(t,n){Tr(e,t,n),i=!0},p(t,i){const n={};16&i[0]&&(n.name=t[4]),2048&i[0]&&(n.label=t[27].label),2048&i[0]&&(n.id=t[27].id),2048&i[0]&&(n.value=t[27].value),2048&i[0]&&(n.disabled=t[27].disabled),2048&i[0]&&(n.hidden=t[27].hidden),256&i[0]&&(n.class=t[8]),2049&i[0]&&(n.checked=t[12](t[27])===t[0]),2048&i[0]&&(n.onkeydown=t[13](t[27])),2048&i[0]&&(n.onclick=t[14](t[27])),8390720&i[0]&&(n.$$scope={dirty:i,ctx:t}),e.$set(n)},i(t){i||(mr(e.$$.fragment,t),i=!0)},o(t){gr(e.$$.fragment,t),i=!1},d(t){Mr(e,t)}}}function Bc(t){let e,i,n,o,r,s,a=[],l=new Map;const c=t[22].group,h=ro(c,t,t[23],Lc),u=h||function(t){let e,i,n=t[27].label+"";return{c(){e=wo("span"),i=ko(n),Eo(e,"class","PinturaRadioGroupOptionGroupLabel")},m(t,n){xo(t,e,n),bo(e,i)},p(t,e){2048&e[0]&&n!==(n=t[27].label+"")&&Ao(i,n)},d(t){t&&$o(e)}}}(t);let d=t[27].options;const p=t=>t[27].id;for(let e=0;e<d.length;e+=1){let i=Ic(t,d,e),n=p(i);l.set(n,a[e]=Xc(n,i))}return{c(){e=wo("li"),u&&u.c(),i=So(),n=wo("ul");for(let t=0;t<a.length;t+=1)a[t].c();o=So(),Eo(n,"class","PinturaRadioGroupOptions"),Eo(e,"class",r=Ga(["PinturaRadioGroupOptionGroup",t[9]]))},m(t,r){xo(t,e,r),u&&u.m(e,null),bo(e,i),bo(e,n);for(let t=0;t<a.length;t+=1)a[t].m(n,null);bo(e,o),s=!0},p(t,i){h?h.p&&8390656&i[0]&&ao(h,c,t,t[23],i,Rc,Lc):u&&u.p&&2048&i[0]&&u.p(t,i),8419665&i[0]&&(d=t[27].options,pr(),a=wr(a,i,p,1,t,d,l,n,$r,Xc,null,Ic),fr()),(!s||512&i[0]&&r!==(r=Ga(["PinturaRadioGroupOptionGroup",t[9]])))&&Eo(e,"class",r)},i(t){if(!s){mr(u,t);for(let t=0;t<d.length;t+=1)mr(a[t]);s=!0}},o(t){gr(u,t);for(let t=0;t<a.length;t+=1)gr(a[t]);s=!1},d(t){t&&$o(e),u&&u.d(t);for(let t=0;t<a.length;t+=1)a[t].d()}}}function Nc(t){let e,i;return e=new wl({props:{$$slots:{default:[Hc]},$$scope:{ctx:t}}}),{c(){Cr(e.$$.fragment)},m(t,n){Tr(e,t,n),i=!0},p(t,i){const n={};8390656&i[0]&&(n.$$scope={dirty:i,ctx:t}),e.$set(n)},i(t){i||(mr(e.$$.fragment,t),i=!0)},o(t){gr(e.$$.fragment,t),i=!1},d(t){Mr(e,t)}}}function Hc(t){let e,i=t[27].icon+"";return{c(){e=_o("g")},m(t,n){xo(t,e,n),e.innerHTML=i},p(t,n){2048&n[0]&&i!==(i=t[27].icon+"")&&(e.innerHTML=i)},d(t){t&&$o(e)}}}function Wc(t){let e,i,n=t[27].label+"";return{c(){e=wo("span"),i=ko(n),Eo(e,"class",t[6])},m(t,n){xo(t,e,n),bo(e,i)},p(t,o){2048&o[0]&&n!==(n=t[27].label+"")&&Ao(i,n),64&o[0]&&Eo(e,"class",t[6])},d(t){t&&$o(e)}}}function jc(t){let e;const i=t[22].option,n=ro(i,t,t[23],Ec),o=n||function(t){let e,i,n,o=t[27].icon&&Nc(t),r=!t[27].hideLabel&&Wc(t);return{c(){o&&o.c(),e=So(),r&&r.c(),i=So()},m(t,s){o&&o.m(t,s),xo(t,e,s),r&&r.m(t,s),xo(t,i,s),n=!0},p(t,n){t[27].icon?o?(o.p(t,n),2048&n[0]&&mr(o,1)):(o=Nc(t),o.c(),mr(o,1),o.m(e.parentNode,e)):o&&(pr(),gr(o,1,1,(()=>{o=null})),fr()),t[27].hideLabel?r&&(r.d(1),r=null):r?r.p(t,n):(r=Wc(t),r.c(),r.m(i.parentNode,i))},i(t){n||(mr(o),n=!0)},o(t){gr(o),n=!1},d(t){o&&o.d(t),t&&$o(e),r&&r.d(t),t&&$o(i)}}}(t);return{c(){o&&o.c()},m(t,i){o&&o.m(t,i),e=!0},p(t,e){n?n.p&&8390656&e[0]&&ao(n,i,t,t[23],e,Pc,Ec):o&&o.p&&2112&e[0]&&o.p(t,e)},i(t){e||(mr(o,t),e=!0)},o(t){gr(o,t),e=!1},d(t){o&&o.d(t)}}}function Yc(t){let e,i;return e=new wl({props:{$$slots:{default:[Vc]},$$scope:{ctx:t}}}),{c(){Cr(e.$$.fragment)},m(t,n){Tr(e,t,n),i=!0},p(t,i){const n={};8390656&i[0]&&(n.$$scope={dirty:i,ctx:t}),e.$set(n)},i(t){i||(mr(e.$$.fragment,t),i=!0)},o(t){gr(e.$$.fragment,t),i=!1},d(t){Mr(e,t)}}}function Vc(t){let e,i=t[27].icon+"";return{c(){e=_o("g")},m(t,n){xo(t,e,n),e.innerHTML=i},p(t,n){2048&n[0]&&i!==(i=t[27].icon+"")&&(e.innerHTML=i)},d(t){t&&$o(e)}}}function Uc(t){let e,i,n=t[27].label+"";return{c(){e=wo("span"),i=ko(n),Eo(e,"class",t[6])},m(t,n){xo(t,e,n),bo(e,i)},p(t,o){2048&o[0]&&n!==(n=t[27].label+"")&&Ao(i,n),64&o[0]&&Eo(e,"class",t[6])},d(t){t&&$o(e)}}}function qc(t){let e;const i=t[22].option,n=ro(i,t,t[23],Dc),o=n||function(t){let e,i,n,o=t[27].icon&&Yc(t),r=!t[27].hideLabel&&Uc(t);return{c(){o&&o.c(),e=So(),r&&r.c(),i=So()},m(t,s){o&&o.m(t,s),xo(t,e,s),r&&r.m(t,s),xo(t,i,s),n=!0},p(t,n){t[27].icon?o?(o.p(t,n),2048&n[0]&&mr(o,1)):(o=Yc(t),o.c(),mr(o,1),o.m(e.parentNode,e)):o&&(pr(),gr(o,1,1,(()=>{o=null})),fr()),t[27].hideLabel?r&&(r.d(1),r=null):r?r.p(t,n):(r=Uc(t),r.c(),r.m(i.parentNode,i))},i(t){n||(mr(o),n=!0)},o(t){gr(o),n=!1},d(t){o&&o.d(t),t&&$o(e),r&&r.d(t),t&&$o(i)}}}(t);return{c(){o&&o.c()},m(t,i){o&&o.m(t,i),e=!0},p(t,e){n?n.p&&8390656&e[0]&&ao(n,i,t,t[23],e,Ac,Dc):o&&o.p&&2112&e[0]&&o.p(t,e)},i(t){e||(mr(o,t),e=!0)},o(t){gr(o,t),e=!1},d(t){o&&o.d(t)}}}function Xc(t,e){let i,n,o;return n=new $c({props:{name:e[4],label:e[27].label,id:e[27].id,value:e[27].value,disabled:e[27].disabled,hidden:e[27].hidden,class:e[8],checked:e[12](e[27])===e[0],onkeydown:e[13](e[27]),onclick:e[14](e[27]),$$slots:{default:[qc]},$$scope:{ctx:e}}}),{key:t,first:null,c(){i=Co(),Cr(n.$$.fragment),this.first=i},m(t,e){xo(t,i,e),Tr(n,t,e),o=!0},p(t,i){e=t;const o={};16&i[0]&&(o.name=e[4]),2048&i[0]&&(o.label=e[27].label),2048&i[0]&&(o.id=e[27].id),2048&i[0]&&(o.value=e[27].value),2048&i[0]&&(o.disabled=e[27].disabled),2048&i[0]&&(o.hidden=e[27].hidden),256&i[0]&&(o.class=e[8]),2049&i[0]&&(o.checked=e[12](e[27])===e[0]),2048&i[0]&&(o.onkeydown=e[13](e[27])),2048&i[0]&&(o.onclick=e[14](e[27])),8390720&i[0]&&(o.$$scope={dirty:i,ctx:e}),n.$set(o)},i(t){o||(mr(n.$$.fragment,t),o=!0)},o(t){gr(n.$$.fragment,t),o=!1},d(t){t&&$o(i),Mr(n,t)}}}function Gc(t,e){let i,n,o,r,s;const a=[Bc,Fc],l=[];function c(t,e){return t[27].options?0:1}return n=c(e),o=l[n]=a[n](e),{key:t,first:null,c(){i=Co(),o.c(),r=Co(),this.first=i},m(t,e){xo(t,i,e),l[n].m(t,e),xo(t,r,e),s=!0},p(t,i){let s=n;n=c(e=t),n===s?l[n].p(e,i):(pr(),gr(l[s],1,1,(()=>{l[s]=null})),fr(),o=l[n],o?o.p(e,i):(o=l[n]=a[n](e),o.c()),mr(o,1),o.m(r.parentNode,r))},i(t){s||(mr(o),s=!0)},o(t){gr(o),s=!1},d(t){t&&$o(i),l[n].d(t),t&&$o(r)}}}function Zc(t){let e,i,n,o=t[10].length&&Oc(t);return{c(){o&&o.c(),e=So(),i=Co()},m(t,r){o&&o.m(t,r),xo(t,e,r),xo(t,i,r),n=!0},p(t,i){t[10].length?o?(o.p(t,i),1024&i[0]&&mr(o,1)):(o=Oc(t),o.c(),mr(o,1),o.m(e.parentNode,e)):o&&(pr(),gr(o,1,1,(()=>{o=null})),fr())},i(t){n||(mr(o),mr(!1),n=!0)},o(t){gr(o),gr(!1),n=!1},d(t){o&&o.d(t),t&&$o(e),t&&$o(i)}}}function Kc(t,e,i){let n,o,r,{$$slots:s={},$$scope:a}=e;const l=Vo();let{label:c}=e,{hideLabel:h=!0}=e,{class:u}=e,{name:d="radio-group-"+A()}=e,{selectedIndex:p=-1}=e,{options:f=[]}=e,{onchange:m}=e,{layout:g}=e,{optionMapper:y}=e,{optionFilter:v}=e,{value:b}=e,{optionLabelClass:x}=e,{title:$}=e,{locale:w}=e,{optionClass:_}=e,{optionGroupClass:k}=e;const S=t=>r.findIndex((e=>e.id===t.id)),C=(t,e)=>{i(0,p=S(t));const n={index:p,...t};((t,...e)=>{t&&t(...e)})(m,n,e),l("change",n)};return t.$$set=t=>{"label"in t&&i(1,c=t.label),"hideLabel"in t&&i(2,h=t.hideLabel),"class"in t&&i(3,u=t.class),"name"in t&&i(4,d=t.name),"selectedIndex"in t&&i(0,p=t.selectedIndex),"options"in t&&i(15,f=t.options),"onchange"in t&&i(16,m=t.onchange),"layout"in t&&i(5,g=t.layout),"optionMapper"in t&&i(17,y=t.optionMapper),"optionFilter"in t&&i(18,v=t.optionFilter),"value"in t&&i(19,b=t.value),"optionLabelClass"in t&&i(6,x=t.optionLabelClass),"title"in t&&i(7,$=t.title),"locale"in t&&i(20,w=t.locale),"optionClass"in t&&i(8,_=t.optionClass),"optionGroupClass"in t&&i(9,k=t.optionGroupClass),"$$scope"in t&&i(23,a=t.$$scope)},t.$$.update=()=>{1343488&t.$$.dirty[0]&&i(10,n=Cc(v?f.filter(v):f,w)),132096&t.$$.dirty[0]&&i(11,o=((t=[],e)=>{let i=0;return t.map((t=>(i++,ti(t)?ti(t[1])?{id:i,label:t[0],options:t[1].map((t=>_c(t,++i,e)))}:_c(t,i,e):t.options?{id:t.id||i,label:t.label,options:t.options.map((t=>_c(t,++i,e)))}:_c(t,i,e))))})(n,y)),2048&t.$$.dirty[0]&&i(21,r=wc(o)),2654209&t.$$.dirty[0]&&p<0&&(i(0,p=r.findIndex((t=>Tc(t.value,b)))),p<0&&i(0,p=(t=>t.findIndex((t=>void 0===t[0])))(f)))},[p,c,h,u,d,g,x,$,_,k,n,o,S,t=>e=>{var i;i=e.key,/enter| /i.test(i)&&C(t,e)},t=>e=>{C(t,e)},f,m,y,v,b,w,r,s,a]}class Qc extends Er{constructor(t){super(),Pr(this,t,Kc,Zc,eo,{label:1,hideLabel:2,class:3,name:4,selectedIndex:0,options:15,onchange:16,layout:5,optionMapper:17,optionFilter:18,value:19,optionLabelClass:6,title:7,locale:20,optionClass:8,optionGroupClass:9},[-1,-1])}}const Jc=t=>({}),th=t=>({});function eh(t){let e,i;return e=new wl({props:{class:"PinturaButtonIcon",$$slots:{default:[ih]},$$scope:{ctx:t}}}),{c(){Cr(e.$$.fragment)},m(t,n){Tr(e,t,n),i=!0},p(t,i){const n={};268435520&i&&(n.$$scope={dirty:i,ctx:t}),e.$set(n)},i(t){i||(mr(e.$$.fragment,t),i=!0)},o(t){gr(e.$$.fragment,t),i=!1},d(t){Mr(e,t)}}}function ih(t){let e;return{c(){e=_o("g")},m(i,n){xo(i,e,n),e.innerHTML=t[6]},p(t,i){64&i&&(e.innerHTML=t[6])},d(t){t&&$o(e)}}}function nh(t){let e,i,n,o,r,s,a,l,c=(t[2]||t[18])+"",h=t[6]&&eh(t);return{c(){e=wo("span"),h&&h.c(),i=So(),n=wo("span"),o=ko(c),Eo(n,"class",r=Ga(["PinturaButtonLabel",t[3],t[5]&&"implicit"])),Eo(e,"slot","label"),Eo(e,"title",s=kc(t[1],t[15])),Eo(e,"class",a=Ga(["PinturaButtonInner",t[4]]))},m(t,r){xo(t,e,r),h&&h.m(e,null),bo(e,i),bo(e,n),bo(n,o),l=!0},p(t,u){t[6]?h?(h.p(t,u),64&u&&mr(h,1)):(h=eh(t),h.c(),mr(h,1),h.m(e,i)):h&&(pr(),gr(h,1,1,(()=>{h=null})),fr()),(!l||262148&u)&&c!==(c=(t[2]||t[18])+"")&&Ao(o,c),(!l||40&u&&r!==(r=Ga(["PinturaButtonLabel",t[3],t[5]&&"implicit"])))&&Eo(n,"class",r),(!l||32770&u&&s!==(s=kc(t[1],t[15])))&&Eo(e,"title",s),(!l||16&u&&a!==(a=Ga(["PinturaButtonInner",t[4]])))&&Eo(e,"class",a)},i(t){l||(mr(h),l=!0)},o(t){gr(h),l=!1},d(t){t&&$o(e),h&&h.d()}}}function oh(t){let e,i,n=t[30].label+"";return{c(){e=wo("span"),i=ko(n),Eo(e,"slot","group")},m(t,n){xo(t,e,n),bo(e,i)},p(t,e){1073741824&e&&n!==(n=t[30].label+"")&&Ao(i,n)},d(t){t&&$o(e)}}}function rh(t){let e,i;return e=new wl({props:{style:P(t[13])?t[13](t[30].value):t[13],$$slots:{default:[sh]},$$scope:{ctx:t}}}),{c(){Cr(e.$$.fragment)},m(t,n){Tr(e,t,n),i=!0},p(t,i){const n={};1073750016&i&&(n.style=P(t[13])?t[13](t[30].value):t[13]),1342177280&i&&(n.$$scope={dirty:i,ctx:t}),e.$set(n)},i(t){i||(mr(e.$$.fragment,t),i=!0)},o(t){gr(e.$$.fragment,t),i=!1},d(t){Mr(e,t)}}}function sh(t){let e,i=t[30].icon+"";return{c(){e=_o("g")},m(t,n){xo(t,e,n),e.innerHTML=i},p(t,n){1073741824&n&&i!==(i=t[30].icon+"")&&(e.innerHTML=i)},d(t){t&&$o(e)}}}function ah(t){let e,i,n=t[30].sublabel+"";return{c(){e=wo("span"),i=ko(n),Eo(e,"class","PinturaDropdownOptionSublabel")},m(t,n){xo(t,e,n),bo(e,i)},p(t,e){1073741824&e&&n!==(n=t[30].sublabel+"")&&Ao(i,n)},d(t){t&&$o(e)}}}function lh(t){let e,i,n,o,r,s,a,l,c=t[30].label+"",h=t[30].icon&&rh(t),u=t[30].sublabel&&ah(t);return{c(){e=wo("span"),h&&h.c(),i=So(),n=wo("span"),o=ko(c),r=So(),u&&u.c(),Eo(n,"style",s=P(t[14])?t[14](t[30].value):t[14]),Eo(n,"class",a=Ga(["PinturaDropdownOptionLabel",t[10]])),Eo(e,"slot","option")},m(t,s){xo(t,e,s),h&&h.m(e,null),bo(e,i),bo(e,n),bo(n,o),bo(n,r),u&&u.m(n,null),l=!0},p(t,r){t[30].icon?h?(h.p(t,r),1073741824&r&&mr(h,1)):(h=rh(t),h.c(),mr(h,1),h.m(e,i)):h&&(pr(),gr(h,1,1,(()=>{h=null})),fr()),(!l||1073741824&r)&&c!==(c=t[30].label+"")&&Ao(o,c),t[30].sublabel?u?u.p(t,r):(u=ah(t),u.c(),u.m(n,null)):u&&(u.d(1),u=null),(!l||1073758208&r&&s!==(s=P(t[14])?t[14](t[30].value):t[14]))&&Eo(n,"style",s),(!l||1024&r&&a!==(a=Ga(["PinturaDropdownOptionLabel",t[10]])))&&Eo(n,"class",a)},i(t){l||(mr(h),l=!0)},o(t){gr(h),l=!1},d(t){t&&$o(e),h&&h.d(),u&&u.d()}}}function ch(t){let e,i,n,o,r,s;const a=t[26].controls,l=ro(a,t,t[28],th);return n=new Qc({props:{class:"PinturaOptionsList PinturaScrollableContent",name:t[7],value:t[9],selectedIndex:t[8],optionFilter:t[11],optionMapper:t[12],optionLabelClass:Ga(["PinturaDropdownOptionLabel",t[10]]),optionGroupClass:"PinturaListOptionGroup",optionClass:"PinturaListOption",options:t[16],onchange:t[19],$$slots:{option:[lh,({option:t})=>({30:t}),({option:t})=>t?1073741824:0],group:[oh,({option:t})=>({30:t}),({option:t})=>t?1073741824:0]},$$scope:{ctx:t}}}),{c(){e=wo("div"),l&&l.c(),i=So(),Cr(n.$$.fragment),Eo(e,"slot","details"),Eo(e,"class","PinturaOptionsListWrapper")},m(a,c){xo(a,e,c),l&&l.m(e,null),bo(e,i),Tr(n,e,null),o=!0,r||(s=To(e,"keydown",t[21]),r=!0)},p(t,e){l&&l.p&&268435456&e&&ao(l,a,t,t[28],e,Jc,th);const i={};128&e&&(i.name=t[7]),512&e&&(i.value=t[9]),256&e&&(i.selectedIndex=t[8]),2048&e&&(i.optionFilter=t[11]),4096&e&&(i.optionMapper=t[12]),1024&e&&(i.optionLabelClass=Ga(["PinturaDropdownOptionLabel",t[10]])),65536&e&&(i.options=t[16]),1342202880&e&&(i.$$scope={dirty:e,ctx:t}),n.$set(i)},i(t){o||(mr(l,t),mr(n.$$.fragment,t),o=!0)},o(t){gr(l,t),gr(n.$$.fragment,t),o=!1},d(t){t&&$o(e),l&&l.d(t),Mr(n),r=!1,s()}}}function hh(t){let e,i,n;function o(e){t[27](e)}let r={onshow:t[20],buttonClass:Ga(["PinturaDropdownButton",t[0],t[5]&&"PinturaDropdownIconOnly"]),$$slots:{details:[ch],label:[nh]},$$scope:{ctx:t}};return void 0!==t[17]&&(r.isActive=t[17]),e=new vc({props:r}),Zo.push((()=>Sr(e,"isActive",o))),{c(){Cr(e.$$.fragment)},m(t,i){Tr(e,t,i),n=!0},p(t,[n]){const o={};33&n&&(o.buttonClass=Ga(["PinturaDropdownButton",t[0],t[5]&&"PinturaDropdownIconOnly"])),268828670&n&&(o.$$scope={dirty:n,ctx:t}),!i&&131072&n&&(i=!0,o.isActive=t[17],or((()=>i=!1))),e.$set(o)},i(t){n||(mr(e.$$.fragment,t),n=!0)},o(t){gr(e.$$.fragment,t),n=!1},d(t){Mr(e,t)}}}function uh(t,e,i){let n,o,r,{$$slots:s={},$$scope:a}=e,{class:l}=e,{title:c}=e,{label:h}=e,{labelClass:u}=e,{innerClass:d}=e,{hideLabel:p=!1}=e,{icon:m}=e,{name:g}=e,{options:y=[]}=e,{selectedIndex:v=-1}=e,{value:b}=e,{optionLabelClass:x}=e,{optionFilter:$}=e,{optionMapper:w}=e,{optionIconStyle:_}=e,{optionLabelStyle:k}=e,{locale:S}=e,{onchange:C=f}=e,{onload:T=f}=e,{ondestroy:M=f}=e;return Wo((()=>T({options:y}))),Yo((()=>M({options:y}))),t.$$set=t=>{"class"in t&&i(0,l=t.class),"title"in t&&i(1,c=t.title),"label"in t&&i(2,h=t.label),"labelClass"in t&&i(3,u=t.labelClass),"innerClass"in t&&i(4,d=t.innerClass),"hideLabel"in t&&i(5,p=t.hideLabel),"icon"in t&&i(6,m=t.icon),"name"in t&&i(7,g=t.name),"options"in t&&i(22,y=t.options),"selectedIndex"in t&&i(8,v=t.selectedIndex),"value"in t&&i(9,b=t.value),"optionLabelClass"in t&&i(10,x=t.optionLabelClass),"optionFilter"in t&&i(11,$=t.optionFilter),"optionMapper"in t&&i(12,w=t.optionMapper),"optionIconStyle"in t&&i(13,_=t.optionIconStyle),"optionLabelStyle"in t&&i(14,k=t.optionLabelStyle),"locale"in t&&i(15,S=t.locale),"onchange"in t&&i(23,C=t.onchange),"onload"in t&&i(24,T=t.onload),"ondestroy"in t&&i(25,M=t.ondestroy),"$$scope"in t&&i(28,a=t.$$scope)},t.$$.update=()=>{4227072&t.$$.dirty&&i(16,n=S?Cc(y,S):y),66048&t.$$.dirty&&i(18,o=n.reduce(((t,e)=>{if(t)return t;const i=Array.isArray(e)?e:[e,e],[n,o]=i;return Tc(n,b)?o:void 0}),void 0)||(t=>{const e=t.find((t=>void 0===t[0]));if(e)return e[1]})(n)||b)},[l,c,h,u,d,p,m,g,v,b,x,$,w,_,k,S,n,r,o,t=>{i(18,o=t.value),C(t),i(17,r=!1)},({e:t,panel:e})=>{if(t&&t.key&&/up|down/i.test(t.key))return sc(e.querySelector("input:not([disabled])"));sc(e.querySelector("fieldset"))},t=>{/tab/i.test(t.key)&&t.preventDefault()},y,C,T,M,s,function(t){r=t,i(17,r)},a]}class dh extends Er{constructor(t){super(),Pr(this,t,uh,hh,eo,{class:0,title:1,label:2,labelClass:3,innerClass:4,hideLabel:5,icon:6,name:7,options:22,selectedIndex:8,value:9,optionLabelClass:10,optionFilter:11,optionMapper:12,optionIconStyle:13,optionLabelStyle:14,locale:15,onchange:23,onload:24,ondestroy:25})}}function ph(t){let e;return{c(){e=wo("div"),Eo(e,"slot","details")},m(i,n){xo(i,e,n),t[8](e)},p:Xn,d(i){i&&$o(e),t[8](null)}}}function fh(t){let e,i,n;function o(e){t[9](e)}let r={buttonLabel:t[0],buttonClass:t[1],$$slots:{details:[ph]},$$scope:{ctx:t}};return void 0!==t[3]&&(r.isActive=t[3]),e=new vc({props:r}),Zo.push((()=>Sr(e,"isActive",o))),{c(){Cr(e.$$.fragment)},m(t,i){Tr(e,t,i),n=!0},p(t,[n]){const o={};1&n&&(o.buttonLabel=t[0]),2&n&&(o.buttonClass=t[1]),1028&n&&(o.$$scope={dirty:n,ctx:t}),!i&&8&n&&(i=!0,o.isActive=t[3],or((()=>i=!1))),e.$set(o)},i(t){n||(mr(e.$$.fragment,t),n=!0)},o(t){gr(e.$$.fragment,t),n=!1},d(t){Mr(e,t)}}}function mh(t,e,i){let n,{buttonLabel:o}=e,{buttonClass:r}=e,{root:s}=e,{ondestroy:a=f}=e,l=!1;return Yo(a),t.$$set=t=>{"buttonLabel"in t&&i(0,o=t.buttonLabel),"buttonClass"in t&&i(1,r=t.buttonClass),"root"in t&&i(4,s=t.root),"ondestroy"in t&&i(5,a=t.ondestroy)},t.$$.update=()=>{20&t.$$.dirty&&n&&s&&n.firstChild!==s&&(n.hasChildNodes()?n.replaceChild(s,n.firstChild):n.append(s))},[o,r,n,l,s,a,()=>i(3,l=!1),()=>i(3,l=!0),function(t){Zo[t?"unshift":"push"]((()=>{n=t,i(2,n)}))},function(t){l=t,i(3,l)}]}class gh extends Er{constructor(t){super(),Pr(this,t,mh,fh,eo,{buttonLabel:0,buttonClass:1,root:4,ondestroy:5,hide:6,show:7})}get hide(){return this.$$.ctx[6]}get show(){return this.$$.ctx[7]}}var yh=(t,e,i)=>(t-e)/(i-e);function vh(t){let e;return{c(){e=_o("path"),Eo(e,"d","M8 12 h8 M12 8 v8")},m(t,i){xo(t,e,i)},d(t){t&&$o(e)}}}function bh(t){let e;return{c(){e=_o("path"),Eo(e,"d","M9 12 h6")},m(t,i){xo(t,e,i)},d(t){t&&$o(e)}}}function xh(t){let e,i,n,o,r,s,a,l,c,h,u,d,p,f,m,g,y,v;return u=new wl({props:{$$slots:{default:[vh]},$$scope:{ctx:t}}}),f=new wl({props:{$$slots:{default:[bh]},$$scope:{ctx:t}}}),{c(){e=wo("div"),i=wo("div"),n=wo("input"),o=So(),r=wo("div"),s=So(),a=wo("div"),l=wo("div"),c=So(),h=wo("button"),Cr(u.$$.fragment),d=So(),p=wo("button"),Cr(f.$$.fragment),Eo(n,"type","range"),Eo(n,"id",t[3]),Eo(n,"min",t[0]),Eo(n,"max",t[1]),Eo(n,"step",t[2]),n.value=t[8],Eo(r,"class","PinturaSliderTrack"),Eo(r,"style",t[4]),Eo(l,"class","PinturaSliderKnob"),Eo(l,"style",t[5]),Eo(a,"class","PinturaSliderKnobController"),Eo(a,"style",t[10]),Eo(i,"class","PinturaSliderControl"),Eo(h,"type","button"),Eo(h,"aria-label","Increase"),Eo(p,"type","button"),Eo(p,"aria-label","Decrease"),Eo(e,"class",m=Ga(["PinturaSlider",t[7]])),Eo(e,"data-direction",t[6])},m(m,b){xo(m,e,b),bo(e,i),bo(i,n),t[23](n),bo(i,o),bo(i,r),bo(i,s),bo(i,a),bo(a,l),bo(e,c),bo(e,h),Tr(u,h,null),bo(e,d),bo(e,p),Tr(f,p,null),g=!0,y||(v=[To(n,"pointerdown",t[13]),To(n,"input",t[11]),To(n,"nudge",t[12]),uo(Al.call(null,n)),To(h,"pointerdown",t[14](1)),To(p,"pointerdown",t[14](-1))],y=!0)},p(t,i){(!g||8&i[0])&&Eo(n,"id",t[3]),(!g||1&i[0])&&Eo(n,"min",t[0]),(!g||2&i[0])&&Eo(n,"max",t[1]),(!g||4&i[0])&&Eo(n,"step",t[2]),(!g||256&i[0])&&(n.value=t[8]),(!g||16&i[0])&&Eo(r,"style",t[4]),(!g||32&i[0])&&Eo(l,"style",t[5]),(!g||1024&i[0])&&Eo(a,"style",t[10]);const o={};2048&i[1]&&(o.$$scope={dirty:i,ctx:t}),u.$set(o);const s={};2048&i[1]&&(s.$$scope={dirty:i,ctx:t}),f.$set(s),(!g||128&i[0]&&m!==(m=Ga(["PinturaSlider",t[7]])))&&Eo(e,"class",m),(!g||64&i[0])&&Eo(e,"data-direction",t[6])},i(t){g||(mr(u.$$.fragment,t),mr(f.$$.fragment,t),g=!0)},o(t){gr(u.$$.fragment,t),gr(f.$$.fragment,t),g=!1},d(i){i&&$o(e),t[23](null),Mr(u),Mr(f),y=!1,Jn(v)}}}function $h(t,e,i){let n,o,r,s,a,l,c,h,u,d,p,f,m,g,{min:y=0}=e,{max:v=100}=e,{step:b=1}=e,{id:x}=e,{value:$=0}=e,{trackStyle:w}=e,{knobStyle:_}=e,{onchange:k}=e,{onrelease:S=Xn}=e,{direction:C="x"}=e,{getValue:T=Y}=e,{setValue:M=Y}=e,{class:P}=e;const E=t=>M(((t,e)=>(e=1/e,Math.round(t*e)/e))(Qr(t,y,v),b)),I=(t,e,n={})=>{const{released:r=!1}=n;i(15,$=E(y+t/e*o)),$!==g&&(g=$,k($),r&&S($))};let A;const D=t=>{const e=t[h]-m;I(f+e,p)},R=t=>{p=void 0,document.documentElement.removeEventListener("pointermove",D),document.documentElement.removeEventListener("pointerup",R),k($),S($)},L=()=>{i(15,$=E(n+z*b)),k($)};let O,z=1,F=!1;const B=t=>{clearTimeout(O),F||L(),S($),document.removeEventListener("pointerup",B)};return t.$$set=t=>{"min"in t&&i(0,y=t.min),"max"in t&&i(1,v=t.max),"step"in t&&i(2,b=t.step),"id"in t&&i(3,x=t.id),"value"in t&&i(15,$=t.value),"trackStyle"in t&&i(4,w=t.trackStyle),"knobStyle"in t&&i(5,_=t.knobStyle),"onchange"in t&&i(16,k=t.onchange),"onrelease"in t&&i(17,S=t.onrelease),"direction"in t&&i(6,C=t.direction),"getValue"in t&&i(18,T=t.getValue),"setValue"in t&&i(19,M=t.setValue),"class"in t&&i(7,P=t.class)},t.$$.update=()=>{294912&t.$$.dirty[0]&&i(8,n=void 0!==$?T($):0),3&t.$$.dirty[0]&&(o=v-y),259&t.$$.dirty[0]&&i(20,r=100*yh(n,y,v)),64&t.$$.dirty[0]&&i(21,s=C.toUpperCase()),64&t.$$.dirty[0]&&i(22,a="x"===C?"Width":"Height"),4194304&t.$$.dirty[0]&&(l="offset"+a),2097152&t.$$.dirty[0]&&(c="offset"+s),2097152&t.$$.dirty[0]&&(h="page"+s),3145728&t.$$.dirty[0]&&i(10,u=`transform: translate${s}(${r}%)`)},[y,v,b,x,w,_,C,P,n,d,u,t=>{p||(i(15,$=M(parseFloat(t.target.value))),$!==g&&(g=$,k($)))},t=>{const e=d[l];I(n/o*e+t.detail[C],e),clearTimeout(A),A=setTimeout((()=>{S($)}),250)},t=>{t.stopPropagation(),clearTimeout(A),p=d[l],f=t[c],m=t[h],I(f,p),document.documentElement.addEventListener("pointermove",D),document.documentElement.addEventListener("pointerup",R)},t=>e=>{clearTimeout(A),z=t,F=!1,O=setInterval((()=>{F=!0,L()}),100),document.addEventListener("pointercancel",B),document.addEventListener("pointerup",B)},$,k,S,T,M,r,s,a,function(t){Zo[t?"unshift":"push"]((()=>{d=t,i(9,d)}))}]}class wh extends Er{constructor(t){super(),Pr(this,t,$h,xh,eo,{min:0,max:1,step:2,id:3,value:15,trackStyle:4,knobStyle:5,onchange:16,onrelease:17,direction:6,getValue:18,setValue:19,class:7},[-1,-1])}}function _h(t){let e,i;return e=new wl({props:{class:"PinturaButtonIcon",$$slots:{default:[kh]},$$scope:{ctx:t}}}),{c(){Cr(e.$$.fragment)},m(t,n){Tr(e,t,n),i=!0},p(t,i){const n={};524292&i&&(n.$$scope={dirty:i,ctx:t}),e.$set(n)},i(t){i||(mr(e.$$.fragment,t),i=!0)},o(t){gr(e.$$.fragment,t),i=!1},d(t){Mr(e,t)}}}function kh(t){let e;return{c(){e=_o("g")},m(i,n){xo(i,e,n),e.innerHTML=t[2]},p(t,i){4&i&&(e.innerHTML=t[2])},d(t){t&&$o(e)}}}function Sh(t){let e,i,n,o,r,s,a,l,c=t[2]&&_h(t);return{c(){e=wo("span"),c&&c.c(),i=So(),n=wo("span"),o=ko(t[8]),Eo(n,"class",r=Ga(["PinturaButtonLabel",t[3],t[5]&&"implicit"])),Eo(e,"slot","label"),Eo(e,"title",s=kc(t[1],t[6])),Eo(e,"class",a=Ga(["PinturaButtonInner",t[4]]))},m(t,r){xo(t,e,r),c&&c.m(e,null),bo(e,i),bo(e,n),bo(n,o),l=!0},p(t,h){t[2]?c?(c.p(t,h),4&h&&mr(c,1)):(c=_h(t),c.c(),mr(c,1),c.m(e,i)):c&&(pr(),gr(c,1,1,(()=>{c=null})),fr()),(!l||256&h)&&Ao(o,t[8]),(!l||40&h&&r!==(r=Ga(["PinturaButtonLabel",t[3],t[5]&&"implicit"])))&&Eo(n,"class",r),(!l||66&h&&s!==(s=kc(t[1],t[6])))&&Eo(e,"title",s),(!l||16&h&&a!==(a=Ga(["PinturaButtonInner",t[4]])))&&Eo(e,"class",a)},i(t){l||(mr(c),l=!0)},o(t){gr(c),l=!1},d(t){t&&$o(e),c&&c.d()}}}function Ch(t){let e,i,n,o,r;const s=[t[11],{value:t[7]},{onchange:t[10]}];let a={};for(let t=0;t<s.length;t+=1)a=Zn(a,s[t]);return i=new wh({props:a}),{c(){e=wo("div"),Cr(i.$$.fragment),Eo(e,"slot","details")},m(s,a){xo(s,e,a),Tr(i,e,null),n=!0,o||(r=To(e,"keydown",t[9]),o=!0)},p(t,e){const n=3200&e?_r(s,[2048&e&&kr(t[11]),128&e&&{value:t[7]},1024&e&&{onchange:t[10]}]):{};i.$set(n)},i(t){n||(mr(i.$$.fragment,t),n=!0)},o(t){gr(i.$$.fragment,t),n=!1},d(t){t&&$o(e),Mr(i),o=!1,r()}}}function Th(t){let e,i;return e=new vc({props:{panelClass:"PinturaSliderPanel",buttonClass:Ga(["PinturaSliderButton",t[0],t[5]&&"PinturaSliderIconOnly"]),$$slots:{details:[Ch],label:[Sh]},$$scope:{ctx:t}}}),{c(){Cr(e.$$.fragment)},m(t,n){Tr(e,t,n),i=!0},p(t,[i]){const n={};33&i&&(n.buttonClass=Ga(["PinturaSliderButton",t[0],t[5]&&"PinturaSliderIconOnly"])),526846&i&&(n.$$scope={dirty:i,ctx:t}),e.$set(n)},i(t){i||(mr(e.$$.fragment,t),i=!0)},o(t){gr(e.$$.fragment,t),i=!1},d(t){Mr(e,t)}}}function Mh(t,e,i){const n=["class","title","label","icon","labelClass","innerClass","hideLabel","locale","value","onchange"];let o=co(e,n),{class:r}=e,{title:s}=e,{label:a=Math.round}=e,{icon:l}=e,{labelClass:c}=e,{innerClass:h}=e,{hideLabel:u=!1}=e,{locale:d}=e,{value:p}=e,{onchange:m=f}=e;const{min:g,max:y,getValue:v=Y}=o;let b;const x=t=>i(8,b=(t=>P(a)?a(v(t),g,y):a)(t));return t.$$set=t=>{e=Zn(Zn({},e),lo(t)),i(11,o=co(e,n)),"class"in t&&i(0,r=t.class),"title"in t&&i(1,s=t.title),"label"in t&&i(12,a=t.label),"icon"in t&&i(2,l=t.icon),"labelClass"in t&&i(3,c=t.labelClass),"innerClass"in t&&i(4,h=t.innerClass),"hideLabel"in t&&i(5,u=t.hideLabel),"locale"in t&&i(6,d=t.locale),"value"in t&&i(7,p=t.value),"onchange"in t&&i(13,m=t.onchange)},t.$$.update=()=>{128&t.$$.dirty&&x(p)},[r,s,l,c,h,u,d,p,b,t=>{/tab/i.test(t.key)&&t.preventDefault()},t=>{x(t),m(t)},o,a,m]}class Ph extends Er{constructor(t){super(),Pr(this,t,Mh,Th,eo,{class:0,title:1,label:12,icon:2,labelClass:3,innerClass:4,hideLabel:5,locale:6,value:7,onchange:13})}}function Eh(t,e,i){const n=t.slice();return n[7]=e[i][0],n[8]=e[i][1],n[9]=e[i][2],n[0]=e[i][3],n}function Ih(t){let e,i,n;const o=[t[9]];var r=t[1][t[7]]||t[7];function s(t){let e={};for(let t=0;t<o.length;t+=1)e=Zn(e,o[t]);return{props:e}}return r&&(e=new r(s())),{c(){e&&Cr(e.$$.fragment),i=Co()},m(t,o){e&&Tr(e,t,o),xo(t,i,o),n=!0},p(t,n){const a=1&n?_r(o,[kr(t[9])]):{};if(r!==(r=t[1][t[7]]||t[7])){if(e){pr();const t=e;gr(t.$$.fragment,1,0,(()=>{Mr(t,1)})),fr()}r?(e=new r(s()),Cr(e.$$.fragment),mr(e.$$.fragment,1),Tr(e,i.parentNode,i)):e=null}else r&&e.$set(a)},i(t){n||(e&&mr(e.$$.fragment,t),n=!0)},o(t){e&&gr(e.$$.fragment,t),n=!1},d(t){t&&$o(i),e&&Mr(e,t)}}}function Ah(t){let e,i;return e=new ic({props:{name:t[7],attributes:t[2](t[9]),$$slots:{default:[Oh]},$$scope:{ctx:t}}}),{c(){Cr(e.$$.fragment)},m(t,n){Tr(e,t,n),i=!0},p(t,i){const n={};1&i&&(n.name=t[7]),1&i&&(n.attributes=t[2](t[9])),4097&i&&(n.$$scope={dirty:i,ctx:t}),e.$set(n)},i(t){i||(mr(e.$$.fragment,t),i=!0)},o(t){gr(e.$$.fragment,t),i=!1},d(t){Mr(e,t)}}}function Dh(t){let e,i,n=t[9].innerHTML+"";return{c(){i=Co(),e=new Lo(i)},m(t,o){e.m(n,t,o),xo(t,i,o)},p(t,i){1&i&&n!==(n=t[9].innerHTML+"")&&e.p(n)},i:Xn,o:Xn,d(t){t&&$o(i),t&&e.d()}}}function Rh(t){let e,i=t[9].textContent+"";return{c(){e=ko(i)},m(t,i){xo(t,e,i)},p(t,n){1&n&&i!==(i=t[9].textContent+"")&&Ao(e,i)},i:Xn,o:Xn,d(t){t&&$o(e)}}}function Lh(t){let e,i;return e=new Nh({props:{items:t[0],discardEmptyItems:!0}}),{c(){Cr(e.$$.fragment)},m(t,n){Tr(e,t,n),i=!0},p(t,i){const n={};1&i&&(n.items=t[0]),e.$set(n)},i(t){i||(mr(e.$$.fragment,t),i=!0)},o(t){gr(e.$$.fragment,t),i=!1},d(t){Mr(e,t)}}}function Oh(t){let e,i,n,o;const r=[Lh,Rh,Dh],s=[];function a(t,e){return t[0]&&t[0].length?0:t[9].textContent?1:t[9].innerHTML?2:-1}return~(e=a(t))&&(i=s[e]=r[e](t)),{c(){i&&i.c(),n=So()},m(t,i){~e&&s[e].m(t,i),xo(t,n,i),o=!0},p(t,o){let l=e;e=a(t),e===l?~e&&s[e].p(t,o):(i&&(pr(),gr(s[l],1,1,(()=>{s[l]=null})),fr()),~e?(i=s[e],i?i.p(t,o):(i=s[e]=r[e](t),i.c()),mr(i,1),i.m(n.parentNode,n)):i=null)},i(t){o||(mr(i),o=!0)},o(t){gr(i),o=!1},d(t){~e&&s[e].d(t),t&&$o(n)}}}function zh(t,e){let i,n,o,r,s,a;const l=[Ah,Ih],c=[];function h(t,e){return 1&e&&(n=!t[3](t[7])),n?0:1}return o=h(e,-1),r=c[o]=l[o](e),{key:t,first:null,c(){i=Co(),r.c(),s=Co(),this.first=i},m(t,e){xo(t,i,e),c[o].m(t,e),xo(t,s,e),a=!0},p(t,i){let n=o;o=h(e=t,i),o===n?c[o].p(e,i):(pr(),gr(c[n],1,1,(()=>{c[n]=null})),fr(),r=c[o],r?r.p(e,i):(r=c[o]=l[o](e),r.c()),mr(r,1),r.m(s.parentNode,s))},i(t){a||(mr(r),a=!0)},o(t){gr(r),a=!1},d(t){t&&$o(i),c[o].d(t),t&&$o(s)}}}function Fh(t){let e,i,n=[],o=new Map,r=t[0];const s=t=>t[8];for(let e=0;e<r.length;e+=1){let i=Eh(t,r,e),a=s(i);o.set(a,n[e]=zh(a,i))}return{c(){for(let t=0;t<n.length;t+=1)n[t].c();e=Co()},m(t,o){for(let e=0;e<n.length;e+=1)n[e].m(t,o);xo(t,e,o),i=!0},p(t,[i]){15&i&&(r=t[0],pr(),n=wr(n,i,s,1,t,r,o,e.parentNode,$r,zh,e,Eh),fr())},i(t){if(!i){for(let t=0;t<r.length;t+=1)mr(n[t]);i=!0}},o(t){for(let t=0;t<n.length;t+=1)gr(n[t]);i=!1},d(t){for(let e=0;e<n.length;e+=1)n[e].d(t);t&&$o(e)}}}function Bh(t,i,n){let o,{items:r}=i,{discardEmptyItems:s=!0}=i;const a={Button:Pl,Dropdown:dh,Panel:gh,Slider:Ph},l=t=>!e(t)||!!a[t],c=t=>{if(!t)return!1;const[e,,i,n=[]]=t;return!!l(e)||n.some(c)||i.textContent||i.innerHTML};return t.$$set=t=>{"items"in t&&n(4,r=t.items),"discardEmptyItems"in t&&n(5,s=t.discardEmptyItems)},t.$$.update=()=>{48&t.$$.dirty&&n(0,o=(r&&s?r.filter(c):r)||[])},[o,a,(t={})=>{const{textContent:e,innerHTML:i,...n}=t;return n},l,r,s]}class Nh extends Er{constructor(t){super(),Pr(this,t,Bh,Fh,eo,{items:4,discardEmptyItems:5})}}const Hh=["aspectRatio","isRotatedSideways","flip","cropSize"],Wh=as.map((([t])=>t)).filter((t=>!Hh.includes(t)));var jh=(t,e)=>new CustomEvent("ping",{detail:{type:t,data:e},cancelable:!0,bubbles:!0}),Yh=t=>(t=>/textarea/i.test(t.nodeName))(t)||(t=>/date|email|number|search|text|url/.test(t.type))(t)||t.isContentEditable,Vh=(t,e)=>(e?va(t,e):t).replace(/([a-z])([A-Z])/g,"$1-$2").replace(/\s+/g,"-").toLowerCase(),Uh=(t,e=Y)=>{const{subscribe:i,set:n}=Dr(void 0);return{subscribe:i,destroy:((t,e)=>{const i=matchMedia(t);return i.addListener(e),e(i),{get matches(){return i.matches},destroy:()=>i.removeListener(e)}})(t,(({matches:t})=>n(e(t)))).destroy}},qh=(t,e,i)=>new Promise(((o,r)=>{(async()=>{const s=await e.read(t),a=t=>L(t,i).then((t=>e.apply(t,s))).then(o).catch(r);if(I(t)||!E()||ke()||Oe())return a(t);let l;try{l=await R(((t,e)=>createImageBitmap(t).then((t=>e(null,t))).catch(e)),[t])}catch(t){}l&&l.width?await b()?n()&&window.chrome&&s>1?o(await(async t=>x(await k(t)))(l)):o(l):o(e.apply(l,s)):a(t)})()})),Xh=(e,i)=>new Promise((async n=>{if(e.width<i.width&&e.height<i.height)return n(e);const o=Math.min(i.width/e.width,i.height/e.height),r=o*e.width,s=o*e.height,a=t("canvas",{width:r,height:s}),l=a.getContext("2d"),c=_(e)?await k(e):e;l.drawImage(c,0,0,r,s),n(x(a))}));let Gh=null;var Zh=()=>{if(null===Gh){let e=t("canvas");Gh=!!fa(e),w(e),e=void 0}return Gh};const Kh=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],Qh={precision:1e-4},Jh={precision:.01*Qh.precision};var tu=t=>t[0]<.25&&t[1]<.25&&t[2]<.25,eu=()=>new Promise((e=>{const i=t("input",{style:"position:absolute;visibility:hidden;width:0;height:0;",type:"file",accept:"image/*"}),n=()=>{const[t]=i.files;i.parentNode&&i.remove(),i.removeEventListener("change",n),e(t)};i.addEventListener("change",n),Oe()&&document.body.append(i),i.click()})),iu=t=>{try{return t()}catch(t){console.error(t)}};const{window:nu}=br;function ou(t){let e,i,n,o=t[29]&&ru(t),r=t[30]&&fu(t);return{c(){o&&o.c(),e=So(),r&&r.c(),i=Co()},m(t,s){o&&o.m(t,s),xo(t,e,s),r&&r.m(t,s),xo(t,i,s),n=!0},p(t,n){t[29]?o?(o.p(t,n),536870912&n[0]&&mr(o,1)):(o=ru(t),o.c(),mr(o,1),o.m(e.parentNode,e)):o&&(pr(),gr(o,1,1,(()=>{o=null})),fr()),t[30]?r?(r.p(t,n),1073741824&n[0]&&mr(r,1)):(r=fu(t),r.c(),mr(r,1),r.m(i.parentNode,i)):r&&(pr(),gr(r,1,1,(()=>{r=null})),fr())},i(t){n||(mr(o),mr(r),n=!0)},o(t){gr(o),gr(r),n=!1},d(t){o&&o.d(t),t&&$o(e),r&&r.d(t),t&&$o(i)}}}function ru(t){let e,i,n,o,r,s;const a=[au,su],l=[];function c(t,e){return t[26]?0:t[14]?1:-1}return~(n=c(t))&&(o=l[n]=a[n](t)),{c(){e=wo("div"),i=wo("p"),o&&o.c(),Eo(i,"style",t[48]),Eo(e,"class","PinturaStatus"),Eo(e,"style",r="opacity: "+t[28])},m(t,o){xo(t,e,o),bo(e,i),~n&&l[n].m(i,null),s=!0},p(t,h){let u=n;n=c(t),n===u?~n&&l[n].p(t,h):(o&&(pr(),gr(l[u],1,1,(()=>{l[u]=null})),fr()),~n?(o=l[n],o?o.p(t,h):(o=l[n]=a[n](t),o.c()),mr(o,1),o.m(i,null)):o=null),(!s||131072&h[1])&&Eo(i,"style",t[48]),(!s||268435456&h[0]&&r!==(r="opacity: "+t[28]))&&Eo(e,"style",r)},i(t){s||(mr(o),s=!0)},o(t){gr(o),s=!1},d(t){t&&$o(e),~n&&l[n].d()}}}function su(t){let e,i,n,o;e=new Yl({props:{text:t[14].text||"",onmeasure:t[131]}});let r=t[14].aside&&lu(t);return{c(){Cr(e.$$.fragment),i=So(),r&&r.c(),n=Co()},m(t,s){Tr(e,t,s),xo(t,i,s),r&&r.m(t,s),xo(t,n,s),o=!0},p(t,i){const o={};16384&i[0]&&(o.text=t[14].text||""),e.$set(o),t[14].aside?r?(r.p(t,i),16384&i[0]&&mr(r,1)):(r=lu(t),r.c(),mr(r,1),r.m(n.parentNode,n)):r&&(pr(),gr(r,1,1,(()=>{r=null})),fr())},i(t){o||(mr(e.$$.fragment,t),mr(r),o=!0)},o(t){gr(e.$$.fragment,t),gr(r),o=!1},d(t){Mr(e,t),t&&$o(i),r&&r.d(t),t&&$o(n)}}}function au(t){let e,i,n,o;return e=new Yl({props:{text:t[26],onmeasure:t[131]}}),n=new Zl({props:{class:"PinturaStatusIcon",offset:t[52],opacity:t[53],$$slots:{default:[pu]},$$scope:{ctx:t}}}),{c(){Cr(e.$$.fragment),i=So(),Cr(n.$$.fragment)},m(t,r){Tr(e,t,r),xo(t,i,r),Tr(n,t,r),o=!0},p(t,i){const o={};67108864&i[0]&&(o.text=t[26]),e.$set(o);const r={};2097152&i[1]&&(r.offset=t[52]),4194304&i[1]&&(r.opacity=t[53]),4&i[0]|268435456&i[12]&&(r.$$scope={dirty:i,ctx:t}),n.$set(r)},i(t){o||(mr(e.$$.fragment,t),mr(n.$$.fragment,t),o=!0)},o(t){gr(e.$$.fragment,t),gr(n.$$.fragment,t),o=!1},d(t){Mr(e,t),t&&$o(i),Mr(n,t)}}}function lu(t){let e,i;return e=new Zl({props:{class:"PinturaStatusButton",offset:t[52],opacity:t[53],$$slots:{default:[uu]},$$scope:{ctx:t}}}),{c(){Cr(e.$$.fragment)},m(t,n){Tr(e,t,n),i=!0},p(t,i){const n={};2097152&i[1]&&(n.offset=t[52]),4194304&i[1]&&(n.opacity=t[53]),16384&i[0]|268435456&i[12]&&(n.$$scope={dirty:i,ctx:t}),e.$set(n)},i(t){i||(mr(e.$$.fragment,t),i=!0)},o(t){gr(e.$$.fragment,t),i=!1},d(t){Mr(e,t)}}}function cu(t){let e,i;return e=new ql({props:{progress:t[14].progressIndicator.progress}}),{c(){Cr(e.$$.fragment)},m(t,n){Tr(e,t,n),i=!0},p(t,i){const n={};16384&i[0]&&(n.progress=t[14].progressIndicator.progress),e.$set(n)},i(t){i||(mr(e.$$.fragment,t),i=!0)},o(t){gr(e.$$.fragment,t),i=!1},d(t){Mr(e,t)}}}function hu(t){let e,i;const n=[t[14].closeButton,{hideLabel:!0}];let o={};for(let t=0;t<n.length;t+=1)o=Zn(o,n[t]);return e=new Pl({props:o}),{c(){Cr(e.$$.fragment)},m(t,n){Tr(e,t,n),i=!0},p(t,i){const o=16384&i[0]?_r(n,[kr(t[14].closeButton),n[1]]):{};e.$set(o)},i(t){i||(mr(e.$$.fragment,t),i=!0)},o(t){gr(e.$$.fragment,t),i=!1},d(t){Mr(e,t)}}}function uu(t){let e,i,n,o=t[14].progressIndicator.visible&&cu(t),r=t[14].closeButton&&t[14].text&&hu(t);return{c(){o&&o.c(),e=So(),r&&r.c(),i=Co()},m(t,s){o&&o.m(t,s),xo(t,e,s),r&&r.m(t,s),xo(t,i,s),n=!0},p(t,n){t[14].progressIndicator.visible?o?(o.p(t,n),16384&n[0]&&mr(o,1)):(o=cu(t),o.c(),mr(o,1),o.m(e.parentNode,e)):o&&(pr(),gr(o,1,1,(()=>{o=null})),fr()),t[14].closeButton&&t[14].text?r?(r.p(t,n),16384&n[0]&&mr(r,1)):(r=hu(t),r.c(),mr(r,1),r.m(i.parentNode,i)):r&&(pr(),gr(r,1,1,(()=>{r=null})),fr())},i(t){n||(mr(o),mr(r),n=!0)},o(t){gr(o),gr(r),n=!1},d(t){o&&o.d(t),t&&$o(e),r&&r.d(t),t&&$o(i)}}}function du(t){let e,i=t[2].iconSupportError+"";return{c(){e=_o("g")},m(t,n){xo(t,e,n),e.innerHTML=i},p(t,n){4&n[0]&&i!==(i=t[2].iconSupportError+"")&&(e.innerHTML=i)},d(t){t&&$o(e)}}}function pu(t){let e,i;return e=new wl({props:{$$slots:{default:[du]},$$scope:{ctx:t}}}),{c(){Cr(e.$$.fragment)},m(t,n){Tr(e,t,n),i=!0},p(t,i){const n={};4&i[0]|268435456&i[12]&&(n.$$scope={dirty:i,ctx:t}),e.$set(n)},i(t){i||(mr(e.$$.fragment,t),i=!0)},o(t){gr(e.$$.fragment,t),i=!1},d(t){Mr(e,t)}}}function fu(t){let e,i,n,o,r,s,a,l,c,h=t[6]&&mu(t),u=t[19]&&t[17]&&gu(t);const d=[$u,xu],p=[];function f(t,e){return t[19]?0:1}return n=f(t),o=p[n]=d[n](t),s=new Xa({props:{animate:t[39],pixelRatio:t[56],textPixelRatio:t[7],backgroundColor:t[22],maskRect:t[21],maskOpacity:t[47]?t[47].maskOpacity:1,maskFrameOpacity:.95,images:t[25],interfaceImages:t[57],loadImageData:t[9],willRequestResource:t[58],willRender:t[287],didRender:t[288]}}),{c(){h&&h.c(),e=So(),u&&u.c(),i=So(),o.c(),r=So(),Cr(s.$$.fragment),a=So(),l=wo("div"),Eo(l,"class","PinturaRootPortal")},m(o,d){h&&h.m(o,d),xo(o,e,d),u&&u.m(o,d),xo(o,i,d),p[n].m(o,d),xo(o,r,d),Tr(s,o,d),xo(o,a,d),xo(o,l,d),t[289](l),c=!0},p(t,a){t[6]?h?(h.p(t,a),64&a[0]&&mr(h,1)):(h=mu(t),h.c(),mr(h,1),h.m(e.parentNode,e)):h&&(pr(),gr(h,1,1,(()=>{h=null})),fr()),t[19]&&t[17]?u?(u.p(t,a),655360&a[0]&&mr(u,1)):(u=gu(t),u.c(),mr(u,1),u.m(i.parentNode,i)):u&&(pr(),gr(u,1,1,(()=>{u=null})),fr());let l=n;n=f(t),n===l?p[n].p(t,a):(pr(),gr(p[l],1,1,(()=>{p[l]=null})),fr(),o=p[n],o?o.p(t,a):(o=p[n]=d[n](t),o.c()),mr(o,1),o.m(r.parentNode,r));const c={};256&a[1]&&(c.animate=t[39]),33554432&a[1]&&(c.pixelRatio=t[56]),128&a[0]&&(c.textPixelRatio=t[7]),4194304&a[0]&&(c.backgroundColor=t[22]),2097152&a[0]&&(c.maskRect=t[21]),65536&a[1]&&(c.maskOpacity=t[47]?t[47].maskOpacity:1),33554432&a[0]&&(c.images=t[25]),67108864&a[1]&&(c.interfaceImages=t[57]),512&a[0]&&(c.loadImageData=t[9]),134217728&a[1]&&(c.willRequestResource=t[58]),32800&a[0]|268435463&a[1]&&(c.willRender=t[287]),240&a[1]&&(c.didRender=t[288]),s.$set(c)},i(t){c||(mr(h),mr(u),mr(o),mr(s.$$.fragment,t),c=!0)},o(t){gr(h),gr(u),gr(o),gr(s.$$.fragment,t),c=!1},d(o){h&&h.d(o),o&&$o(e),u&&u.d(o),o&&$o(i),p[n].d(o),o&&$o(r),Mr(s,o),o&&$o(a),o&&$o(l),t[289](null)}}}function mu(t){let e,i,n,o,r;return i=new Nh({props:{items:t[49]}}),{c(){e=wo("div"),Cr(i.$$.fragment),Eo(e,"class","PinturaNav PinturaNavTools")},m(s,a){xo(s,e,a),Tr(i,e,null),n=!0,o||(r=[To(e,"measure",t[272]),uo(ha.call(null,e))],o=!0)},p(t,e){const n={};262144&e[1]&&(n.items=t[49]),i.$set(n)},i(t){n||(mr(i.$$.fragment,t),n=!0)},o(t){gr(i.$$.fragment,t),n=!1},d(t){t&&$o(e),Mr(i),o=!1,Jn(r)}}}function gu(t){let e,i,n;return i=new Nl({props:{elasticity:t[4]*Cu,scrollDirection:t[45]?"y":"x",$$slots:{default:[bu]},$$scope:{ctx:t}}}),{c(){e=wo("div"),Cr(i.$$.fragment),Eo(e,"class","PinturaNav PinturaNavMain")},m(t,o){xo(t,e,o),Tr(i,e,null),n=!0},p(t,e){const n={};16&e[0]&&(n.elasticity=t[4]*Cu),16384&e[1]&&(n.scrollDirection=t[45]?"y":"x"),1048576&e[0]|3072&e[1]|268435456&e[12]&&(n.$$scope={dirty:e,ctx:t}),i.$set(n)},i(t){n||(mr(i.$$.fragment,t),n=!0)},o(t){gr(i.$$.fragment,t),n=!1},d(t){t&&$o(e),Mr(i)}}}function yu(t){let e,i=t[399].icon+"";return{c(){e=_o("g")},m(t,n){xo(t,e,n),e.innerHTML=i},p(t,n){134217728&n[12]&&i!==(i=t[399].icon+"")&&(e.innerHTML=i)},d(t){t&&$o(e)}}}function vu(t){let e,i,n,o,r,s=t[399].label+"";return e=new wl({props:{$$slots:{default:[yu]},$$scope:{ctx:t}}}),{c(){Cr(e.$$.fragment),i=So(),n=wo("span"),o=ko(s)},m(t,s){Tr(e,t,s),xo(t,i,s),xo(t,n,s),bo(n,o),r=!0},p(t,i){const n={};402653184&i[12]&&(n.$$scope={dirty:i,ctx:t}),e.$set(n),(!r||134217728&i[12])&&s!==(s=t[399].label+"")&&Ao(o,s)},i(t){r||(mr(e.$$.fragment,t),r=!0)},o(t){gr(e.$$.fragment,t),r=!1},d(t){Mr(e,t),t&&$o(i),t&&$o(n)}}}function bu(t){let e,i;const n=[t[41],{tabs:t[42]}];let o={$$slots:{default:[vu,({tab:t})=>({399:t}),({tab:t})=>[0,0,0,0,0,0,0,0,0,0,0,0,t?134217728:0]]},$$scope:{ctx:t}};for(let t=0;t<n.length;t+=1)o=Zn(o,n[t]);return e=new nl({props:o}),e.$on("select",t[273]),{c(){Cr(e.$$.fragment)},m(t,n){Tr(e,t,n),i=!0},p(t,i){const o=3072&i[1]?_r(n,[1024&i[1]&&kr(t[41]),2048&i[1]&&{tabs:t[42]}]):{};402653184&i[12]&&(o.$$scope={dirty:i,ctx:t}),e.$set(o)},i(t){i||(mr(e.$$.fragment,t),i=!0)},o(t){gr(e.$$.fragment,t),i=!1},d(t){Mr(e,t)}}}function xu(t){let e,i,n;function o(e){t[282](e)}let r={class:"PinturaMain",content:{...t[23].find(t[281]),props:t[8][t[20]]},locale:t[2],isAnimated:t[39],stores:t[121]};return void 0!==t[0][t[20]]&&(r.component=t[0][t[20]]),e=new bl({props:r}),Zo.push((()=>Sr(e,"component",o))),e.$on("measure",t[283]),e.$on("show",t[284]),e.$on("hide",t[285]),e.$on("fade",t[286]),{c(){Cr(e.$$.fragment)},m(t,i){Tr(e,t,i),n=!0},p(t,n){const o={};9437440&n[0]&&(o.content={...t[23].find(t[281]),props:t[8][t[20]]}),4&n[0]&&(o.locale=t[2]),256&n[1]&&(o.isAnimated=t[39]),!i&&1048577&n[0]&&(i=!0,o.component=t[0][t[20]],or((()=>i=!1))),e.$set(o)},i(t){n||(mr(e.$$.fragment,t),n=!0)},o(t){gr(e.$$.fragment,t),n=!1},d(t){Mr(e,t)}}}function $u(t){let e,i;const n=[{class:"PinturaMain"},{visible:t[34]},t[41],{panels:t[43]}];let o={$$slots:{default:[wu,({panel:t,panelIsActive:e})=>({397:t,398:e}),({panel:t,panelIsActive:e})=>[0,0,0,0,0,0,0,0,0,0,0,0,(t?33554432:0)|(e?67108864:0)]]},$$scope:{ctx:t}};for(let t=0;t<n.length;t+=1)o=Zn(o,n[t]);return e=new ml({props:o}),e.$on("measure",t[280]),{c(){Cr(e.$$.fragment)},m(t,n){Tr(e,t,n),i=!0},p(t,i){const o=5128&i[1]?_r(n,[n[0],8&i[1]&&{visible:t[34]},1024&i[1]&&kr(t[41]),4096&i[1]&&{panels:t[43]}]):{};25166085&i[0]|16777480&i[1]|369098752&i[12]&&(o.$$scope={dirty:i,ctx:t}),e.$set(o)},i(t){i||(mr(e.$$.fragment,t),i=!0)},o(t){gr(e.$$.fragment,t),i=!1},d(t){Mr(e,t)}}}function wu(t){let e,i,n;function o(...e){return t[274](t[397],...e)}function r(e){t[275](e,t[397])}let s={content:{...t[23].find(o),props:t[8][t[397]]},locale:t[2],isActive:t[398],isAnimated:t[39],stores:t[121]};return void 0!==t[0][t[397]]&&(s.component=t[0][t[397]]),e=new bl({props:s}),Zo.push((()=>Sr(e,"component",r))),e.$on("measure",t[276]),e.$on("show",(function(){return t[277](t[397])})),e.$on("hide",(function(){return t[278](t[397])})),e.$on("fade",(function(...e){return t[279](t[397],...e)})),{c(){Cr(e.$$.fragment)},m(t,i){Tr(e,t,i),n=!0},p(n,r){t=n;const s={};8388864&r[0]|33554432&r[12]&&(s.content={...t[23].find(o),props:t[8][t[397]]}),4&r[0]&&(s.locale=t[2]),67108864&r[12]&&(s.isActive=t[398]),256&r[1]&&(s.isAnimated=t[39]),!i&&1&r[0]|33554432&r[12]&&(i=!0,s.component=t[0][t[397]],or((()=>i=!1))),e.$set(s)},i(t){n||(mr(e.$$.fragment,t),n=!0)},o(t){gr(e.$$.fragment,t),n=!1},d(t){Mr(e,t)}}}function _u(t){let e,i;return{c(){e=wo("span"),Eo(e,"class","PinturaEditorOverlay"),Eo(e,"style",i="opacity:"+t[60])},m(t,i){xo(t,e,i)},p(t,n){536870912&n[1]&&i!==(i="opacity:"+t[60])&&Eo(e,"style",i)},d(t){t&&$o(e)}}}function ku(t){let e,i,n,o,r;nr(t[271]);let s=t[50]&&ou(t),a=t[60]>0&&_u(t);return{c(){e=wo("div"),s&&s.c(),i=So(),a&&a.c(),Eo(e,"id",t[3]),Eo(e,"class",t[44]),Eo(e,"data-env",t[46])},m(c,h){xo(c,e,h),s&&s.m(e,null),bo(e,i),a&&a.m(e,null),t[290](e),n=!0,o||(r=[To(nu,"keydown",t[137]),To(nu,"keyup",t[138]),To(nu,"blur",t[139]),To(nu,"paste",t[143]),To(nu,"resize",t[271]),To(e,"ping",(function(){to(t[51])&&t[51].apply(this,arguments)})),To(e,"contextmenu",t[140]),To(e,"touchstart",t[132],{passive:!1}),To(e,"touchmove",t[133]),To(e,"pointermove",t[134]),To(e,"transitionend",t[122]),To(e,"dropfiles",t[141]),To(e,"measure",t[291]),To(e,"click",(function(){to(t[27]?t[142]:f)&&(t[27]?t[142]:f).apply(this,arguments)})),uo(ha.call(null,e,{observeViewRect:!0})),uo(ua.call(null,e)),uo(l.call(null,e))],o=!0)},p(o,r){(t=o)[50]?s?(s.p(t,r),524288&r[1]&&mr(s,1)):(s=ou(t),s.c(),mr(s,1),s.m(e,i)):s&&(pr(),gr(s,1,1,(()=>{s=null})),fr()),t[60]>0?a?a.p(t,r):(a=_u(t),a.c(),a.m(e,null)):a&&(a.d(1),a=null),(!n||8&r[0])&&Eo(e,"id",t[3]),(!n||8192&r[1])&&Eo(e,"class",t[44]),(!n||32768&r[1])&&Eo(e,"data-env",t[46])},i(t){n||(mr(s),n=!0)},o(t){gr(s),n=!1},d(i){i&&$o(e),s&&s.d(),a&&a.d(),t[290](null),o=!1,Jn(r)}}}const Su="stage-overlay",Cu=10;function Tu(i,n,o){let s,a,l,c,h,u,d,p,m,g,y,v,b,$,_,k,S,C,T,M,P,E,I,D,R,L,O,z,F,B,N,H,W,j,V,U,q,X,G,Z,tt,nt,ot,rt,st,at,lt,ut,dt,pt,ft,mt,gt,yt,vt,bt,xt,$t,wt,_t,kt,Ct,Tt,Mt,Pt,Et,It,At,Dt,Rt,Lt,Ot,Nt,Ht,Wt,jt,Qt,Jt,ie,ne,re,se,le,he,ue,de,pe,fe,me,ye,ve,be,xe,$e,we,_e,ke,Se,Ce,Te,Me,Pe,Ee,Ie,Ae,De,Re,Le,ze,Fe,Be,Ne,He,We,je,Ye,Ve,Ue,qe,Xe,Ge,Ze,Qe,Je,ti,ei,ii,ni,oi,ri,si,ai,li,ci,hi,ui,pi,fi,mi,gi,yi,vi,bi,xi,$i,wi=Xn,_i=Xn;oo(i,Js,(t=>o(210,Ae=t))),i.$$.on_destroy.push((()=>wi())),i.$$.on_destroy.push((()=>_i()));const ki=di(),Si=Vo();let{class:Ci}=n,{layout:Ti}=n,{stores:Ei}=n,{locale:Ii}=n,{id:Ai}=n,{util:Di}=n,{utils:Ri}=n,{animations:Li="auto"}=n,{disabled:Fi=!1}=n,{status:Bi}=n,{previewUpscale:Ni=!1}=n,{elasticityMultiplier:ji=10}=n,{willRevert:Yi=(()=>Promise.resolve(!0))}=n,{willProcessImage:Ui=(()=>Promise.resolve(!0))}=n,{willRenderCanvas:qi=Y}=n,{willRenderToolbar:Xi=Y}=n,{willSetHistoryInitialState:Gi=Y}=n,{enableButtonExport:Zi=!0}=n,{enableButtonRevert:Ki=!0}=n,{enableNavigateHistory:Qi=!0}=n,{enableToolbar:Ji=!0}=n,{enableUtils:tn=!0}=n,{enableButtonClose:en=!1}=n,{enableDropImage:nn=!1}=n,{enablePasteImage:on=!1}=n,{enableBrowseImage:rn=!1}=n,{previewImageDataMaxSize:sn}=n,{previewImageTextPixelRatio:an}=n,{layoutDirectionPreference:ln="auto"}=n,{layoutHorizontalUtilsPreference:cn="left"}=n,{layoutVerticalUtilsPreference:hn="bottom"}=n,{imagePreviewSrc:un}=n,{imageOrienter:dn={read:()=>1,apply:t=>t}}=n,{pluginComponents:pn}=n,{pluginOptions:fn={}}=n;const mn=ki.sub,gn={};let{root:yn}=n,bn=[];const xn=Qs();oo(i,xn,(t=>o(60,$i=t)));const $n=za()||1024,wn=St($n,$n),Sn=ms();let{imageSourceToImageData:Cn=(t=>e(t)?fetch(t).then((t=>{if(200!==t.status)throw`${t.status} (${t.statusText})`;return t.blob()})).then((t=>qh(t,dn,Sn))).then((t=>Xh(t,l))):ge(t)?new Promise((e=>e(x(t)))):qh(t,dn,Sn).then((t=>Xh(t,l))))}=n;const Mn=(()=>{let t,e;const i=Wh.reduce(((t,i)=>(t[i]=function(t,e,i){let n=[];return{set:e,update:i,publish:t=>{n.forEach((e=>e(t)))},subscribe:e=>(n.push(e),t(e),()=>{n=n.filter((t=>t!==e))})}}((t=>{if(!e)return t();e.stores[i].subscribe(t)()}),(t=>{e&&e.stores[i].set(t)}),(t=>{e&&e.stores[i].update(t)})),t)),{});return{update:n=>{if(e=n,t&&(t.forEach((t=>t())),t=void 0),!n)return i.file.publish(void 0),void i.loadState.publish(void 0);t=Wh.map((t=>n.stores[t].subscribe((e=>{i[t].publish(e)}))))},stores:i,destroy:()=>{t&&t.forEach((t=>t()))}}})(),{file:Pn,size:En,loadState:In,processState:An,cropAspectRatio:Dn,cropLimitToImage:Rn,crop:Ln,cropMinSize:On,cropMaxSize:zn,cropRange:Fn,cropOrigin:Bn,cropRectAspectRatio:Nn,rotation:Hn,rotationRange:Wn,targetSize:jn,flipX:Yn,flipY:Vn,backgroundColor:Gn,colorMatrix:Zn,convolutionMatrix:Kn,gamma:Qn,vignette:Jn,noise:to,decoration:eo,annotation:ro,redaction:so,frame:ao,state:lo}=Mn.stores;oo(i,Pn,(t=>o(204,Pe=t))),oo(i,En,(t=>o(192,ve=t))),oo(i,In,(t=>o(186,Jt=t))),oo(i,An,(t=>o(249,Xe=t))),oo(i,Dn,(t=>o(304,jt=t))),oo(i,Ln,(t=>o(187,ie=t))),oo(i,Gn,(t=>o(270,ri=t))),oo(i,eo,(t=>o(32,hi=t))),oo(i,ro,(t=>o(31,ci=t))),oo(i,so,(t=>o(267,ni=t))),oo(i,ao,(t=>o(33,ui=t))),oo(i,lo,(t=>o(314,Re=t)));const{images:co,shapePreprocessor:uo,imageScrambler:po,willRequestResource:fo}=Ei;oo(i,co,(t=>o(183,Nt=t))),oo(i,uo,(t=>o(184,Ht=t))),oo(i,po,(t=>o(269,oi=t))),oo(i,fo,(t=>o(58,bi=t)));const mo=lo.subscribe((t=>ki.pub("update",t))),go=Dr(),yo=Dr([0,0,0]);oo(i,yo,(t=>o(22,_e=t)));const vo=Dr([1,1,1]);oo(i,vo,(t=>o(316,si=t)));const bo=Qs();oo(i,bo,(t=>o(317,ai=t)));const xo=Dr(),$o=Dr();oo(i,$o,(t=>o(18,Wt=t)));const wo=Dr();oo(i,wo,(t=>o(185,Qt=t)));const _o=Dr(Ft());oo(i,_o,(t=>o(40,Le=t)));const ko=Dr(Ft());oo(i,ko,(t=>o(54,mi=t)));const So=Dr();oo(i,So,(t=>o(55,gi=t)));const Co=Uh("(pointer: fine)",(t=>t?"pointer-fine":"pointer-coarse"));oo(i,Co,(t=>o(235,He=t)));const To=Uh("(hover: hover)",(t=>t?"pointer-hover":"pointer-no-hover"));oo(i,To,(t=>o(236,We=t)));const Mo=Dr(!1);oo(i,Mo,(t=>o(188,re=t)));const Po=Ar(void 0,(t=>{const e=Qs(0),i=[Mo.subscribe((t=>{e.set(t?1:0)})),e.subscribe(t)];return()=>i.forEach((t=>t()))}));oo(i,Po,(t=>o(318,li=t)));const Eo=Dr(Ni);oo(i,Eo,(t=>o(190,le=t)));const Io=Dr();oo(i,Io,(t=>o(306,se=t)));const Ao=Dr();oo(i,Ao,(t=>o(305,ne=t)));const Do=Ar(void 0,(t=>{const e=Qs(void 0,{precision:1e-4}),i=[Ln.subscribe((()=>{if(!ie)return;const t=void 0===ne||re,i=Rl(ie,ne,5*ji);e.set(i,{hard:t})})),e.subscribe(t)];return()=>i.forEach((t=>t()))})),Ro=Dr();oo(i,Ro,(t=>o(309,de=t)));const Lo=Dr();oo(i,Lo,(t=>o(313,xe=t)));const Oo=Dr(void 0);oo(i,Oo,(t=>o(310,fe=t)));let zo={left:0,right:0,top:0,bottom:0};const Fo=Rr([ao,Ro],(([t,e],i)=>{e||i(zo);const n=Wo(e,t);Mi(zo.top,4)===Mi(n.top,4)&&Mi(zo.bottom,4)===Mi(n.bottom,4)&&Mi(zo.right,4)===Mi(n.right,4)&&Mi(zo.left,4)===Mi(n.left,4)||(zo=n,i(n))})),Bo=Rr([Fo],(([t],e)=>{e(Object.values(t).some((t=>t>0)))})),No=Rr([So,_o,ko],(([t,e,i],n)=>{if(!t)return n(void 0);let o=0;1!==_.length||s||(o=i.y+i.height),n(Yt(t.x+e.x,t.y+e.y+o,t.width,t.height))}));oo(i,No,(t=>o(191,me=t)));const Ho=Rr([No,Ln],(([t,e],i)=>{if(!t||!e||se||ne)return;const n=Math.min(t.width/e.width,t.height/e.height);i(le?n:Math.min(1,n))}));oo(i,Ho,(t=>o(311,ye=t)));const Wo=(t,e)=>{if(!e||!t)return{top:0,right:0,bottom:0,left:0};const i=kn(e,t,c),n=_n(i,t);return{top:Math.abs(n.top),right:Math.abs(n.right),bottom:Math.abs(n.bottom),left:Math.abs(n.left)}},jo=Dr(void 0),qo=Rr([Ln,No],(([t,e])=>{if(e&&t)return Math.min(e.width/t.width,e.height/t.height)})),Xo=Rr([jo,Ln,Ro],(([t,e,i])=>t&&e&&i?Math.min(e.width/i.width,e.height/i.height)*t:1));oo(i,Xo,(t=>o(307,he=t)));const Go=Dr(K());oo(i,Go,(t=>o(308,ue=t)));const Ko=Dr({scalar:he,translation:ue}),Qo=()=>{Ko.set({scalar:void 0,translation:K()})},Jo=Ar(void 0,(t=>{const e=Qs(void 0,{precision:1e-4}),i=()=>{if(!de)return;const t=re||!pe,i=Rl(de,fe,1*ji);i.width<0&&(i.width=0,i.x=de.x),i.height<0&&(i.height=0,i.y=de.y),Ut(i,me),Ut(i,ue),qt(i,he),e.set(i,{hard:t})},n=[No.subscribe(i),Ro.subscribe(i),Xo.subscribe(i),Go.subscribe(i),ao.subscribe(i),e.subscribe(t)];return()=>n.forEach((t=>t()))}));let tr;oo(i,Jo,(t=>o(21,$e=t)));const er=t=>{if(s&&tr&&Zt(tr,t))return;tr=t;const e=ie.width<=t.width&&ie.height<=t.height?ee(t,Xt(zt(ie),ye||1)):oe(t,Kt(ie||ve));Ro.set(e)};let ir=!1;const nr=Ho.subscribe((t=>{!ir&&void 0!==t&&ie&&(er(me),ir=!0)})),or=No.subscribe((t=>{t&&void 0!==ye&&ie&&er(t)}));let rr;const sr=Lo.subscribe((t=>{if(!t)return rr=void 0,void ho(Io,se=void 0,se);rr=be;const e=zt(ie);Io.set(e)})),ar=Ro.subscribe((t=>{if(!t||!xe)return;const e=(i=zt(t),n=xe,i.x-=n.x,i.y-=n.y,i.width-=n.width,i.height-=n.height,i);var i,n;Gt(e,rr);const o=((t,e)=>(t.x+=e.x,t.y+=e.y,t.width+=e.width,t.height+=e.height,t))(zt(se),e);Ln.set(o)})),lr=Ln.subscribe((t=>{if(re||xe||ne)return;if(!t||!de)return;const e=Kt(de),i=Kt(t);if(Mi(e,6)===Mi(i,6))return;const n=Math.min(me.width/ie.width,me.height/ie.height),o=St(t.width*n,t.height*n),r=.5*(de.width-o.width),s=.5*(de.height-o.height),a=Yt(de.x+r,de.y+s,o.width,o.height);Ro.set(a)})),cr=Rr([Ho,Ln,Ro],(([t,e,i],n)=>{if(!t||!e||!i)return;const o=i.width/e.width,r=i.height/e.height;n(Math.max(o,r)/t)})),hr=Rr([Ho,cr],(([t,e],i)=>{e&&i(t*e)}));oo(i,hr,(t=>o(312,be=t)));const ur=Qs(.075,{stiffness:.03,damping:.4,precision:.001}),dr=Rr([bo,yo,ur,Jo,Xo,ao,Bo,Fo],(([t,e,i,n,o,r,a,l],c)=>{if(!n||s)return c([]);let{x:h,y:u,width:d,height:p}=n;h+=.5,u+=.5,d-=.5,p-=.5;const f=[];if(a){f.push({x:h,y:u,width:d-.5,height:p-.5,strokeWidth:1,strokeColor:e,opacity:.85}),i>.1&&f.push({x:h,y:u,width:d-.5,height:p-.5,strokeWidth:1,strokeColor:t,opacity:i});let{left:n,right:r,top:s,bottom:a}=l;return n*=o,r*=o,s*=o,a*=o,void c([...f,{x:h-n,y:u-r,width:d+n+r,height:p+s+a,strokeWidth:1,strokeColor:t,opacity:.05}])}const m=tu(t),g=r&&r.frameColor&&tu(r.frameColor);if(m&&g||!m&&!m){const t=m?[1,1,1,.3]:[0,0,0,.075];f.push({x:h,y:u,width:d,height:p,strokeWidth:3.5,strokeColor:t,opacity:i})}c([...f,{x:h,y:u,width:d,height:p,strokeWidth:1,strokeColor:t,opacity:i}])})),pr=Dr([]);oo(i,pr,(t=>o(203,Me=t)));const fr=Rr([dr,pr],(([t,e],i)=>{i([...t,...e])}));oo(i,fr,(t=>o(59,xi=t)));const mr=Qs(0,{precision:.001});oo(i,mr,(t=>o(195,ke=t)));const gr=Qs();oo(i,gr,(t=>o(194,we=t)));const yr=Qs();oo(i,yr,(t=>o(197,Se=t)));const vr=Qs();oo(i,vr,(t=>o(199,Ce=t)));const br=Qs();oo(i,br,(t=>o(201,Te=t)));const xr=Dr(!1);oo(i,xr,(t=>o(246,qe=t)));const $r=Dr();let wr;oo(i,$r,(t=>o(206,Ie=t)));const _r=Rr([xr,$r],(([e,i],n)=>{if(e&&i){if(wr&&(wr.cancel(),o(177,wr=void 0)),Tn(i))return n((e=>{const i=t("canvas",{width:e.width,height:e.height});return i.getContext("2d").drawImage(e,0,0),i})(i));var r,s;o(177,wr={cancel:f}),(r=i,s=wr,new Promise(((t,e)=>{const i=qr.length?0:250;let n,o=!1;s.cancel=()=>o=!0;const a=Date.now();Cn(r).then((e=>{const r=Date.now()-a;clearTimeout(n),n=setTimeout((()=>{o||t(e)}),Math.max(0,i-r))})).catch(e)}))).then(n).catch((t=>{ho(In,Jt.error=t,Jt)})).finally((()=>{o(177,wr=void 0)}))}else n(void 0)}));wi(),wi=io(_r,(t=>o(205,Ee=t)));let{imagePreviewCurrent:kr}=n;const Sr=Dr({});oo(i,Sr,(t=>o(238,Ye=t)));const Cr=Dr([]);oo(i,Cr,(t=>o(57,vi=t)));const Tr=Rr([No,wo,En,Do,Ro,hr,Hn,Yn,Vn,Xo,Go],(([t,e,i,n,o,r,s,a,l,c,h],u)=>{t&&o&&u(((t,e,i,n,o,r,s,a,l,c,h)=>{if(!(t&&e&&i&&n&&a))return;a*=r;const u=ce(zt(e)),d=Vt(u),p=Vt(t),f=Bt(i),m=Vt(f),g=Kr(i,n,l),y=Vt(g),v=ht(et(m),y),b=ht(et(p),d);v.x+=b.x,v.y+=b.y;const x=it(et(v));x.x+=b.x,x.y+=b.y;const $=Vt(Ut(Ut(zt(o),s),t)),w=ht($,p);return ct(v,w),{origin:x,translation:v,rotation:{x:h?Math.PI:0,y:c?Math.PI:0,z:l},scale:a}})(t,e,i,n,o,c,h,r,s,a,l))}));oo(i,Tr,(t=>o(237,je=t)));const Mr=Rr([Zn,Kn,Qn,Jn,to],(([t,e,i,n,o],r)=>{const s=t&&Object.keys(t).map((e=>t[e])).filter(Boolean);r({gamma:i||void 0,vignette:n||void 0,noise:o||void 0,convolutionMatrix:e||void 0,colorMatrix:s&&s.length&&Un(s)})}));let Pr,Er;const Ir=(()=>{if(!Oe())return!1;const t=navigator.userAgent.match(/OS (\d+)_(\d+)_?(\d+)?/i)||[],[,e,i]=t.map((t=>parseInt(t,10)||0));return e>13||13===e&&i>=4})(),Lr=Dr({});oo(i,Lr,(t=>o(234,Ne=t)));const Or=nc(),zr=Ar(Or,(t=>{const e=()=>t(nc()),i=matchMedia(`(resolution: ${Or}dppx)`);return i.addListener(e),()=>i.removeListener(e)}));oo(i,zr,(t=>o(56,yi=t)));const Fr=Dr();oo(i,Fr,(t=>o(39,pe=t)));const Br=Dr();oo(i,Br,(t=>o(211,De=t)));const Nr=((t,e)=>{const{sub:i,pub:n}=di(),o=[],r=Dr(0),s=[],a=()=>s.forEach((t=>t({index:no(r),length:o.length}))),l={get index(){return no(r)},set index(t){t=Number.isInteger(t)?t:0,t=Qr(t,0,o.length-1),r.set(t),e(o[l.index]),a()},get state(){return o[o.length-1]},length:()=>o.length,undo(){const t=l.index--;return n("undo",t),t},redo(){const t=l.index++;return n("redo",l.index),t},revert(){o.length=1,l.index=0,n("revert")},write(i){i&&e({...t(),...i});const n=t(),s=o[o.length-1];JSON.stringify(n)!==JSON.stringify(s)&&(o.length=l.index+1,o.push(n),r.set(o.length-1),a())},set(t={}){o.length=0,l.index=0;const e=Array.isArray(t)?t:[t];o.push(...e),l.index=o.length-1},get:()=>[...o],subscribe:t=>(s.push(t),t({index:l.index,length:o.length}),()=>s.splice(s.indexOf(t),1)),on:i};return l})((()=>Re),(t=>{ho(lo,Re=t,Re),_o.set(Le)}));_i(),_i=io(Nr,(t=>o(213,ze=t)));const Hr=()=>{const t={x:0,y:0,...ve},e=ae(oe(t,Re.cropAspectRatio),Math.round),i=Gi({...Re,rotation:0,crop:e},Re),n=[i];JSON.stringify(i)!==JSON.stringify(Re)&&n.push({...Re}),Nr.set(n)},Wr=In.subscribe((t=>{t&&t.complete&&Hr()})),jr=()=>Yi().then((t=>t&&Nr.revert())),Yr=Dr(!1);oo(i,Yr,(t=>o(215,Fe=t)));const Vr=()=>{ho(Yr,Fe=!0,Fe),Ui().then((t=>{if(!t)return void ho(Yr,Fe=!1,Fe);let e;e=ls.subscribe((t=>{1===t&&(e&&e(),Si("processImage"))}))}))},Ur=An.subscribe((t=>{if(!t)return;ho(Yr,Fe=!0,Fe);const{complete:e,abort:i}=t;(e||i)&&ho(Yr,Fe=!1,Fe)})),qr=(()=>{const t=[],e=[],i=[],n=()=>{e.forEach((t=>t(i)))},o=e=>{e.unsub=e.subscribe((o=>((e,o)=>{const r=t.indexOf(e);r<0||(i[r]=o,n())})(e,o))),n()};return{get length(){return t.length},clear:()=>{t.forEach((t=>t.unsub())),t.length=0,i.length=0},unshift:e=>{t.unshift(e),o(e)},get:e=>t[e],push:e=>{t.push(e),o(e)},remove:e=>{e.unsub();const n=t.indexOf(e);t.splice(n,1),i.splice(n,1)},forEach:e=>t.forEach(e),filter:e=>t.filter(e),subscribe:t=>(e.push(t),()=>{e.splice(e.indexOf(t),1)})}})();oo(i,qr,(t=>o(25,Ue=t)));const Xr=Ar(void 0,(t=>qr.subscribe((e=>{const{origin:i,translation:n,rotation:o,scale:r}=e[0];t({origin:i,translation:n,rotation:o,scale:r})})))),Gr=Dr();oo(i,Gr,(t=>o(230,Be=t)));const Zr=Dr(),Jr={...Ei,imageFile:Pn,imageSize:En,imageBackgroundColor:Gn,imageCropAspectRatio:Dn,imageCropMinSize:On,imageCropMaxSize:zn,imageCropLimitToImage:Rn,imageCropRect:Ln,imageCropRectOrigin:Bn,imageCropRectSnapshot:Io,imageCropRectAspectRatio:Nn,imageCropRange:Fn,imageRotation:Hn,imageRotationRange:Wn,imageFlipX:Yn,imageFlipY:Vn,imageOutputSize:jn,imageColorMatrix:Zn,imageConvolutionMatrix:Kn,imageGamma:Qn,imageVignette:Jn,imageNoise:to,imageDecoration:eo,imageAnnotation:ro,imageRedaction:so,imageFrame:ao,imagePreview:_r,imagePreviewSource:$r,imageTransforms:Tr,imagePreviewModifiers:Sr,history:Nr,animation:Fr,pixelRatio:zr,elasticityMultiplier:ji,scrollElasticity:Cu,rangeInputElasticity:5,pointerAccuracy:Co,pointerHoverable:To,env:Lr,rootRect:wo,stageRect:No,stageScalar:Ho,framePadded:Bo,presentationScalar:hr,imagePreviewUpscale:Zr,utilRect:So,rootBackgroundColor:yo,rootForegroundColor:vo,rootLineColor:bo,rootColorSecondary:xo,imageOutlineOpacity:ur,utilTools:Gr,imageSelectionPan:Go,imageSelectionZoom:jo,imageSelectionStageFitScalar:qo,imageSelectionStoredState:Ko,imageOverlayMarkup:pr,interfaceImages:Cr,isInteracting:Mo,isInteractingFraction:Po,imageCropRectIntent:Ao,imageCropRectPresentation:Do,imageSelectionRect:Ro,imageSelectionRectIntent:Oo,imageSelectionRectPresentation:Jo,imageSelectionRectSnapshot:Lo,imageScalar:cr,imageTransformsInterpolated:Xr};delete Jr.image;const ts="util-"+A();let es=[],is=Oe();const ns=(t,e)=>{const i=(t=>(t=>(t=t.trim(),/^rgba/.test(t)?t.substr(5).split(",").map(parseFloat).map(((t,e)=>t/(3===e?1:255))):/^rgb/.test(t)?t.substr(4).split(",").map(parseFloat).map((t=>t/255)):/^#/.test(t)?(t=>{const[,e,i,n]=t.split("");t=4===t.length?`#${e}${e}${i}${i}${n}${n}`:t;const[,o,r,s]=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return[o,r,s].map((t=>parseInt(t,16)/255))})(t):/[0-9]{1,3}\s?,\s?[0-9]{1,3}\s?,\s?[0-9]{1,3}/.test(t)?t.split(",").map((t=>parseInt(t,10))).map((t=>t/255)):void 0))(tt.getPropertyValue(t)))(t);i&&0!==i[3]&&(i.length=3,e.set(i))},os=()=>{ns("color",vo),ns("background-color",yo),ns("outline-color",bo),ns("--color-secondary",xo)},rs=Rr([Tr,Mr,Gn],(([t,e,i])=>t&&{...t,...e,backgroundColor:i}));oo(i,rs,(t=>o(240,Ve=t)));const ss=t=>{qr.forEach(((e,i)=>{const n=0===i?1:0;e.set({...t,opacity:n,resize:1},pe)}))};let as;const ls=Zs(void 0,{duration:500});let cs;oo(i,ls,(t=>o(28,Ze=t)));const hs=Dr(!1);let us;oo(i,hs,(t=>o(258,Ge=t)));const ds=Qs(void 0,{stiffness:.1,damping:.7,precision:.25});oo(i,ds,(t=>o(52,pi=t)));const ps=Qs(0,{stiffness:.1,precision:.05});oo(i,ps,(t=>o(53,fi=t)));const fs=Qs(0,{stiffness:.02,damping:.5,precision:.25});oo(i,fs,(t=>o(262,Je=t)));const gs=Qs(void 0,{stiffness:.02,damping:.5,precision:.25});oo(i,gs,(t=>o(260,Qe=t)));const ys=Qs(void 0,{stiffness:.02,damping:.5,precision:.25});let vs;oo(i,ys,(t=>o(263,ti=t)));const bs=()=>{Si("abortLoadImage")},xs=()=>{Si("abortProcessImage"),ho(Yr,Fe=!1,Fe)},$s=t=>t.preventDefault(),ws=Ir?t=>{const e=t.touches?t.touches[0]:t;e.pageX>10&&e.pageX<Pr-10||$s(t)}:f,_s=Oe()?$s:f,ks=Oe()?$s:f,Ss=Dr({});oo(i,Ss,(t=>o(264,ei=t)));const Cs=Dr([]);oo(i,Cs,(t=>o(315,ii=t))),Uo("keysPressed",Cs);const Ts=t=>{!t||r(t)&&!(t=>/^image/.test(t.type)&&!/svg/.test(t.type))(t)||!r(t)&&!/^http/.test(t)||Si("loadImage",t)},Ms=t=>{t&&Ts(t)};let Ps,Es,Is=[];const As=Dr();Uo("rootPortal",As),Uo("rootRect",wo);const Ds=()=>({foregroundColor:[...si],lineColor:[...ai],utilVisibility:{...M},isInteracting:re,isInteractingFraction:li,rootRect:zt(Qt),stageRect:zt(me),annotationShapesDirty:Vs,decorationShapesDirty:Us,frameShapesDirty:qs,blendShapesDirty:Xs}),Rs=(t,e,i)=>vn(t,St(e.width/i,e.height/i)),Ls=(t,e,i)=>(t._translate=J(e),t._scale=i,t),Os=t=>{const e=[];return t.forEach((t=>e.push(zs(t)))),e.filter(Boolean)},zs=t=>Hi(t)?(t.points=[Q(t.x1,t.y1),Q(t.x2,t.y2)],t):Wi(t)?(t.points=[Q(t.x1,t.y1),Q(t.x2,t.y2),Q(t.x3,t.y3)],t):(t=>Oi(t)&&!t.text.length)(t)?(zi(t)&&(t.width=5,t.height=t.lineHeight),t.strokeWidth=1,t.strokeColor=[1,1,1,.5],t.backgroundColor=[0,0,0,.1],t):t;let Fs,Bs=[],Ns=[],Hs=[],Ws=[],js={};const Ys=(t,e,i,n,o,r)=>{const{annotationShapesDirty:s,decorationShapesDirty:a,frameShapesDirty:l,blendShapesDirty:h,selectionRect:u,scale:d}=t,p=Fs!==d||!Zt(js,u);p&&(Fs=d,js=u),(s||i!==ci)&&(Bs=Os(i.filter(Vi).map(Pi).sort(((t,e)=>t.alwaysOnTop?1:e.alwaysOnTop?-1:0)).map((t=>vn(t,ve))).map(c).flat())),h&&(Ns=e.filter(Vi).map((t=>vn(t,ve)))),(a||n!==hi||p)&&(Hs=Os(n.filter(Vi).map(Pi).sort(((t,e)=>t.alwaysOnTop?1:e.alwaysOnTop?-1:0)).map((t=>Rs(t,u,d))).map(c).flat().map((t=>Ls(t,u,d))))),(l||r!==ui||p)&&(Ws=r?Os([r].map(Pi).map((t=>Rs(t,u,d))).map(c).flat().map((t=>Ls(t,u,d)))):[]);const f=Os(o.filter(Vi));return{blendShapesDirty:h,blendShapes:Ns,annotationShapesDirty:s,annotationShapes:Bs,decorationShapesDirty:a,decorationShapes:Hs,frameShapesDirty:l,frameShapes:Ws,interfaceShapes:f}};let Vs=!0,Us=!0,qs=!0,Xs=!0;return Yo((()=>{mo(),or(),nr(),sr(),ar(),lr(),Wr(),Ur(),Co.destroy(),To.destroy(),Mn.destroy(),qr.clear(),o(147,kr=void 0),o(178,as=void 0),Bs.length=0,Ns.length=0,Hs.length=0,Ws.length=0})),i.$$set=t=>{"class"in t&&o(148,Ci=t.class),"layout"in t&&o(149,Ti=t.layout),"stores"in t&&o(150,Ei=t.stores),"locale"in t&&o(2,Ii=t.locale),"id"in t&&o(3,Ai=t.id),"util"in t&&o(151,Di=t.util),"utils"in t&&o(152,Ri=t.utils),"animations"in t&&o(153,Li=t.animations),"disabled"in t&&o(154,Fi=t.disabled),"status"in t&&o(146,Bi=t.status),"previewUpscale"in t&&o(155,Ni=t.previewUpscale),"elasticityMultiplier"in t&&o(4,ji=t.elasticityMultiplier),"willRevert"in t&&o(156,Yi=t.willRevert),"willProcessImage"in t&&o(157,Ui=t.willProcessImage),"willRenderCanvas"in t&&o(5,qi=t.willRenderCanvas),"willRenderToolbar"in t&&o(158,Xi=t.willRenderToolbar),"willSetHistoryInitialState"in t&&o(159,Gi=t.willSetHistoryInitialState),"enableButtonExport"in t&&o(160,Zi=t.enableButtonExport),"enableButtonRevert"in t&&o(161,Ki=t.enableButtonRevert),"enableNavigateHistory"in t&&o(162,Qi=t.enableNavigateHistory),"enableToolbar"in t&&o(6,Ji=t.enableToolbar),"enableUtils"in t&&o(163,tn=t.enableUtils),"enableButtonClose"in t&&o(164,en=t.enableButtonClose),"enableDropImage"in t&&o(165,nn=t.enableDropImage),"enablePasteImage"in t&&o(166,on=t.enablePasteImage),"enableBrowseImage"in t&&o(167,rn=t.enableBrowseImage),"previewImageDataMaxSize"in t&&o(168,sn=t.previewImageDataMaxSize),"previewImageTextPixelRatio"in t&&o(7,an=t.previewImageTextPixelRatio),"layoutDirectionPreference"in t&&o(169,ln=t.layoutDirectionPreference),"layoutHorizontalUtilsPreference"in t&&o(170,cn=t.layoutHorizontalUtilsPreference),"layoutVerticalUtilsPreference"in t&&o(171,hn=t.layoutVerticalUtilsPreference),"imagePreviewSrc"in t&&o(172,un=t.imagePreviewSrc),"imageOrienter"in t&&o(173,dn=t.imageOrienter),"pluginComponents"in t&&o(174,pn=t.pluginComponents),"pluginOptions"in t&&o(8,fn=t.pluginOptions),"root"in t&&o(1,yn=t.root),"imageSourceToImageData"in t&&o(9,Cn=t.imageSourceToImageData),"imagePreviewCurrent"in t&&o(147,kr=t.imagePreviewCurrent)},i.$$.update=()=>{if(33554432&i.$$.dirty[4]&&o(182,s="overlay"===Ti),134217984&i.$$.dirty[5]&&o(17,a=tn&&!s),257&i.$$.dirty[0]&&fn&&Object.entries(fn).forEach((([t,e])=>{Object.entries(e).forEach((([e,i])=>{gn[t]&&o(0,gn[t][e]=i,gn)}))})),1&i.$$.dirty[0]|524288&i.$$.dirty[5]){let t=!1;pn.forEach((([e])=>{gn[e]||(o(0,gn[e]={},gn),t=!0)})),t&&o(176,bn=[...pn])}var t,n,r,f;if(1073741824&i.$$.dirty[4]&&xn.set(Fi?1:0),8192&i.$$.dirty[5]&&(l=sn?(t=sn,n=wn,St(Math.min(t.width,n.width),Math.min(t.height,n.height))):wn),268435456&i.$$.dirty[5]&&Mn.update(Nt[0]),536870912&i.$$.dirty[5]&&(c=Ht?t=>Ht(t,{isPreview:!0}):Y),262144&i.$$.dirty[0]&&Wt&&wo.set(Yt(Wt.x,Wt.y,Wt.width,Wt.height)),1207959552&i.$$.dirty[5]|1&i.$$.dirty[6]&&Qt&&s&&Jt&&Jt.complete&&(()=>{const t=jt,e=Kt(Qt);t&&t===e||(Dn.set(Kt(Qt)),Hr())})(),4&i.$$.dirty[0]|268435456&i.$$.dirty[4]|2097152&i.$$.dirty[5]&&o(189,_=Ii&&bn.length?Ri||bn.map((([t])=>t)):[]),8&i.$$.dirty[6]&&o(19,D=_.length>1),524288&i.$$.dirty[0]&&(D||_o.set(Ft())),64&i.$$.dirty[0]&&(Ji||ko.set(Ft())),134217729&i.$$.dirty[5]&&Eo.set(Ni||s),2&i.$$.dirty[6]&&ie&&Qo(),2097152&i.$$.dirty[5]|8&i.$$.dirty[6]&&o(216,k=bn.filter((([t])=>_.includes(t)))),1073741824&i.$$.dirty[6]&&o(217,S=k.length),134217728&i.$$.dirty[4]|8&i.$$.dirty[6]|1&i.$$.dirty[7]&&o(20,T=Di&&"string"==typeof Di&&_.includes(Di)?Di:S>0?_[0]:void 0),1048576&i.$$.dirty[0]&&T&&ur.set(.075),2097152&i.$$.dirty[0]|32&i.$$.dirty[6]&&$e){let t=$e.x-me.x,e=me.x+me.width-($e.x+$e.width),i=$e.y-me.y,n=me.y+me.height-($e.y+$e.height),o=Math.min(t,i,e,n);mr.set(o>0?0:Math.min(.85,Math.abs(o/64)))}if(32&i.$$.dirty[6]&&me&&gr.set({x:0,y:me.y,width:me.x<64?0:me.x,height:me.height}),1073741824&i.$$.dirty[5]|32&i.$$.dirty[6]&&me&&yr.set({x:0,y:0,width:Qt.width,height:me.y}),1073741824&i.$$.dirty[5]|32&i.$$.dirty[6]&&me){let t=me.x+me.width,e=Qt.width-(me.x+me.width);e<64&&(t+=e,e=0),vr.set({x:t,y:me.y,width:e,height:me.height})}if(1073741824&i.$$.dirty[5]|32&i.$$.dirty[6]&&me&&br.set({x:0,y:me.y+me.height,width:Qt.width,height:Qt.height-(me.y+me.height)}),4194304&i.$$.dirty[0]|768&i.$$.dirty[6]&&o(193,h=we&&{id:Su,backgroundColor:_e,opacity:ke,...we}),4194304&i.$$.dirty[0]|2560&i.$$.dirty[6]&&o(196,u=Se&&{id:Su,backgroundColor:_e,opacity:ke,...Se}),4194304&i.$$.dirty[0]|8704&i.$$.dirty[6]&&o(198,d=Ce&&{id:Su,backgroundColor:_e,opacity:ke,...Ce}),4194304&i.$$.dirty[0]|33280&i.$$.dirty[6]&&o(200,p=Te&&{id:Su,backgroundColor:_e,opacity:ke,...Te}),21632&i.$$.dirty[6]&&o(202,m=[u,d,p,h].filter(Boolean)),196608&i.$$.dirty[6]&&m&&Me){const t=Me.filter((t=>t.id!==Su));pr.set([...t,...m])}if(131072&i.$$.dirty[5]|262144&i.$$.dirty[6]&&$r.set(un||Pe||void 0),2&i.$$.dirty[0]|8388608&i.$$.dirty[4]|524288&i.$$.dirty[6]&&(o(147,kr=Ee),Ee&&yn.dispatchEvent(jh("loadpreview",kr))),1048576&i.$$.dirty[6]&&Ie&&(Go.set(K()),jo.set(void 0),Qo(),Cr.set([])),2097156&i.$$.dirty[6]&&o(208,y=!re&&g),16777216&i.$$.dirty[6]&&o(209,v=!Ae),536870912&i.$$.dirty[4]|12582912&i.$$.dirty[6]&&ho(Fr,pe="always"===Li?y:"never"!==Li&&y&&v,pe),536870912&i.$$.dirty[4]|10485760&i.$$.dirty[6]&&ho(Br,De="always"===Li?g:"never"!==Li&&g&&v,De),134217728&i.$$.dirty[6]&&o(212,b=ze.index>0),134217728&i.$$.dirty[6]&&o(214,$=ze.index<ze.length-1),16&i.$$.dirty[6]&&Zr.set(le),4&i.$$.dirty[0]|1073741832&i.$$.dirty[6]&&o(23,C=_.map((t=>{const e=k.find((([e])=>t===e));if(e)return{id:t,view:e[1],tabIcon:Ii[t+"Icon"],tabLabel:Ii[t+"Label"]}})).filter(Boolean)||[]),1048576&i.$$.dirty[0]&&go.set(T),25165824&i.$$.dirty[0]&&o(24,M=C.reduce(((t,e)=>(t[e.id]=M&&M[e.id]||0,t)),{})),1048576&i.$$.dirty[0]&&o(41,P={name:ts,selected:T}),8388608&i.$$.dirty[0]&&o(42,E=C.map((t=>({id:t.id,icon:t.tabIcon,label:t.tabLabel})))),8388608&i.$$.dirty[0]&&o(43,I=C.map((t=>t.id))),16777216&i.$$.dirty[4]&&o(44,R=Ga(["PinturaRoot","PinturaRootComponent",Ci])),1073741824&i.$$.dirty[5]&&o(218,L=Qt&&(Qt.width>1e3?"wide":Qt.width<600?"narrow":void 0)),1073741824&i.$$.dirty[5]&&o(219,O=Qt&&(Qt.width<=320||Qt.height<=460)),1073741824&i.$$.dirty[5]&&o(220,z=Qt&&(Qt.height>1e3?"tall":Qt.height<600?"short":void 0)),2&i.$$.dirty[0]&&o(221,F=yn&&yn.parentNode&&yn.parentNode.classList.contains("PinturaModal")),4096&i.$$.dirty[0]|1073741824&i.$$.dirty[5]|16&i.$$.dirty[7]&&o(222,B=F&&Qt&&Pr>Qt.width),8192&i.$$.dirty[0]|1073741824&i.$$.dirty[5]|16&i.$$.dirty[7]&&o(223,N=F&&Qt&&Er>Qt.height),96&i.$$.dirty[7]&&o(224,H=B&&N),2&i.$$.dirty[7]&&o(225,W="narrow"===L),1073758208&i.$$.dirty[5]&&o(226,(r=Qt,f=ln,j=Qt?"auto"===f?r.width>r.height?"landscape":"portrait":"horizontal"===f?r.width<500?"portrait":"landscape":"vertical"===f?r.height<400?"landscape":"portrait":void 0:"landscape")),512&i.$$.dirty[7]&&o(45,V="landscape"===j),264&i.$$.dirty[7]&&o(227,U=W||"short"===z),4096&i.$$.dirty[0]|1073741824&i.$$.dirty[5]&&o(228,q=is&&Qt&&Pr===Qt.width&&!Ir),8192&i.$$.dirty[7]&&o(229,X=Be&&Be.length),32768&i.$$.dirty[5]&&o(231,G="has-navigation-preference-"+cn),65536&i.$$.dirty[5]&&o(232,Z="has-navigation-preference-"+hn),2&i.$$.dirty[0]&&o(233,tt=yn&&getComputedStyle(yn)),65536&i.$$.dirty[7]&&tt&&os(),655424&i.$$.dirty[0]|1107296256&i.$$.dirty[4]|33554432&i.$$.dirty[6]|970494&i.$$.dirty[7]&&Lr.set({...Ne,layoutMode:Ti,orientation:j,horizontalSpace:L,verticalSpace:z,navigationHorizontalPreference:G,navigationVerticalPreference:Z,isModal:F,isDisabled:Fi,isCentered:H,isCenteredHorizontally:B,isCenteredVertically:N,isAnimated:De,pointerAccuracy:He,pointerHoverable:We,isCompact:U,hasSwipeNavigation:q,hasLimitedSpace:O,hasToolbar:Ji,hasNavigation:D&&a,isIOS:is}),131072&i.$$.dirty[7]&&o(46,nt=Object.entries(Ne).map((([t,e])=>/^is|has/.test(t)?e?Vh(t):void 0:e)).filter(Boolean).join(" ")),1048576&i.$$.dirty[0]&&T&&Gr.set([]),3145728&i.$$.dirty[7]&&o(47,ot=je&&Object.entries(Ye).filter((([,t])=>null!=t)).reduce(((t,[,e])=>({...t,...e})),{})),1&i.$$.dirty[6]&&o(239,lt=Jt&&"any-to-file"===Jt.task),4194304&i.$$.dirty[7]&&lt&&qr&&qr.clear(),8388608&i.$$.dirty[7]&&o(241,rt=!!Ve&&!!Ve.translation),8388608&i.$$.dirty[5]|524288&i.$$.dirty[6]|16777216&i.$$.dirty[7]&&rt&&Ee&&Ee!==as&&(o(178,as=Ee),(()=>{const t=qr.length?void 0:{resize:1.05},e=((t,e,i={})=>{const{resize:n=1,opacity:o=0}=i,r={opacity:[Qs(o,{...Qh,stiffness:.1}),Y],resize:[Qs(n,{...Qh,stiffness:.1}),Y],translation:[Qs(void 0,Qh),Y],rotation:[Qs(void 0,Jh),Y],origin:[Qs(void 0,Qh),Y],scale:[Qs(void 0,Jh),Y],gamma:[Qs(void 0,Jh),t=>t||1],vignette:[Qs(void 0,Jh),t=>t||0],colorMatrix:[Qs([...Kh],Qh),t=>t||[...Kh]],convolutionMatrix:[Dr(void 0),t=>t&&t.clarity||void 0],backgroundColor:[Qs(void 0,Qh),Y]},s=Object.entries(r).map((([t,e])=>[t,e[0]])),a=s.map((([,t])=>t)),l=Object.entries(r).reduce(((t,[e,i])=>{const[n,o]=i;return t[e]=(t,e)=>n.set(o(t),e),t}),{});let c;const h=Rr(a,(i=>(c=i.reduce(((t,e,i)=>(t[s[i][0]]=e,t)),{}),c.data=t,c.size=e,c.scale*=i[1],c)));return h.get=()=>c,h.set=(t,e)=>{const i={hard:!e};Object.entries(t).forEach((([t,e])=>{l[t]&&l[t](e,i)}))},h})(Ee,ve,t);qr.unshift(e),ss(Ve)})()),25165824&i.$$.dirty[7]&&rt&&ss(Ve),33554432&i.$$.dirty[0]&&Ue&&Ue.length>1){let t=[];qr.forEach(((e,i)=>{0!==i&&e.get().opacity<=0&&t.push(e)})),t.forEach((t=>qr.remove(t)))}if(4&i.$$.dirty[0]|33554432&i.$$.dirty[7]&&o(26,at=Ii&&st.length&&Ii.labelSupportError(st)),1&i.$$.dirty[6]&&o(243,ut=Jt&&!!Jt.error),1&i.$$.dirty[6]&&o(27,dt=!Jt||!Jt.complete&&void 0===Jt.task),1&i.$$.dirty[6]&&o(244,pt=Jt&&(Jt.taskLengthComputable?Jt.taskProgress:1/0)),4194304&i.$$.dirty[7]&&lt&&ho(xr,qe=!1,qe),16777216&i.$$.dirty[5]|1&i.$$.dirty[6]&&Jt&&Jt.complete){const t=500;clearTimeout(cs),o(179,cs=setTimeout((()=>{ho(xr,qe=!0,qe)}),t))}if(134217728&i.$$.dirty[0]|1&i.$$.dirty[6]|603979776&i.$$.dirty[7]&&o(245,ft=Jt&&!ut&&!dt&&!qe),4194304&i.$$.dirty[5]|1572864&i.$$.dirty[6]&&o(247,mt=!(!Ie||Ee&&!wr)),536870912&i.$$.dirty[6]|2&i.$$.dirty[8]&&o(248,gt=Fe||Xe&&void 0!==Xe.progress&&!Xe.complete),134217728&i.$$.dirty[0]|1&i.$$.dirty[6]&&o(250,yt=Jt&&!(Jt.error||dt)),4&i.$$.dirty[0]|1&i.$$.dirty[6]&&o(251,vt=Ii&&(Jt?!Jt.complete||Jt.error?va(Ii.statusLabelLoadImage(Jt),Jt.error&&Jt.error.metadata,"{","}"):Ii.statusLabelLoadImage({progress:1/0,task:"blob-to-bitmap"}):Ii.statusLabelLoadImage(Jt))),4&i.$$.dirty[0]|2&i.$$.dirty[8]&&o(252,bt=Xe&&Ii&&Ii.statusLabelProcessImage(Xe)),2&i.$$.dirty[8]&&o(253,xt=Xe&&(Xe.taskLengthComputable?Xe.taskProgress:1/0)),2&i.$$.dirty[8]&&o(254,$t=Xe&&!Xe.error),2&i.$$.dirty[8]&&o(255,wt=Xe&&Xe.error),134217732&i.$$.dirty[0]|4194304&i.$$.dirty[4]|1543503872&i.$$.dirty[7]|253&i.$$.dirty[8])if(Bi){let t,i,n,r,s;e(Bi)&&(t=Bi),Ke(Bi)?i=Bi:Array.isArray(Bi)&&([t,i,s]=Bi,!1===i&&(r=!0),Ke(i)&&(n=!0)),o(14,us=(t||i)&&{text:t,aside:r||n,progressIndicator:{visible:n,progress:i},closeButton:r&&{label:Ii.statusLabelButtonClose,icon:Ii.statusIconButtonClose,onclick:s||(()=>o(146,Bi=void 0))}})}else o(14,us=Ii&&dt||ut||ft||mt?{text:vt,aside:ut||yt,progressIndicator:{visible:yt,progress:pt},closeButton:ut&&{label:Ii.statusLabelButtonClose,icon:Ii.statusIconButtonClose,onclick:bs}}:Ii&&gt&&bt?{text:bt,aside:wt||$t,progressIndicator:{visible:$t,progress:xt},closeButton:wt&&{label:Ii.statusLabelButtonClose,icon:Ii.statusIconButtonClose,onclick:xs}}:void 0);if(4194304&i.$$.dirty[4]&&o(256,_t=void 0!==Bi),16&i.$$.dirty[7]|2&i.$$.dirty[8]&&F&&Xe&&Xe.complete&&(hs.set(!0),setTimeout((()=>hs.set(!1)),100)),201326592&i.$$.dirty[0]|1409286144&i.$$.dirty[7]|1281&i.$$.dirty[8]&&o(257,kt=Ge||at||dt||ut||ft||mt||gt||_t),512&i.$$.dirty[8]&&ho(ls,Ze=kt?1:0,Ze),268435456&i.$$.dirty[0]&&o(29,Ct=Ze>0),16384&i.$$.dirty[0]&&o(259,Tt=!(!us||!us.aside)),536887296&i.$$.dirty[0]|33554432&i.$$.dirty[5]|6144&i.$$.dirty[8]&&Ct&&us)if(clearTimeout(vs),Tt){const t=!!us.error;ps.set(1),ds.set(Qe,{hard:t}),o(180,vs=setTimeout((()=>{fs.set(16)}),1))}else ps.set(0),o(180,vs=setTimeout((()=>{fs.set(0)}),1));if(536870912&i.$$.dirty[0]&&(Ct||(ys.set(void 0,{hard:!0}),ds.set(void 0,{hard:!0}),fs.set(0,{hard:!0}))),16384&i.$$.dirty[8]&&o(261,Mt=.5*Je),40960&i.$$.dirty[8]&&o(48,Pt=`transform: translateX(${ti-Mt}px)`),4&i.$$.dirty[0]|744&i.$$.dirty[5]|335544320&i.$$.dirty[6]|143616&i.$$.dirty[7]|65536&i.$$.dirty[8]&&o(49,Et=Ii&&ei&&iu((()=>Xi([["div","alpha",{class:"PinturaNavGroup"},[["div","alpha-set",{class:"PinturaNavSet"},[en&&["Button","close",{label:Ii.labelClose,icon:Ii.iconButtonClose,onclick:()=>Si("close"),hideLabel:!0}],Ki&&["Button","revert",{label:Ii.labelButtonRevert,icon:Ii.iconButtonRevert,disabled:!b,onclick:jr,hideLabel:!0}]]]]],["div","beta",{class:"PinturaNavGroup PinturaNavGroupFloat"},[Qi&&["div","history",{class:"PinturaNavSet"},[["Button","undo",{label:Ii.labelButtonUndo,icon:Ii.iconButtonUndo,disabled:!b,onclick:Nr.undo,hideLabel:!0}],["Button","redo",{label:Ii.labelButtonRedo,icon:Ii.iconButtonRedo,disabled:!$,onclick:Nr.redo,hideLabel:!0}]]],X&&["div","plugin-tools",{class:"PinturaNavSet"},Be.filter(Boolean).map((([t,e,i])=>[t,e,{...i}]))]]],["div","gamma",{class:"PinturaNavGroup"},[Zi&&["Button","export",{label:Ii.labelButtonExport,icon:W&&Ii.iconButtonExport,class:"PinturaButtonExport",onclick:Vr,hideLabel:W}]]]],{...Ne},(()=>Ss.set({})))))),262144&i.$$.dirty[0]&&o(265,It=Wt&&Wt.width>0&&Wt.height>0),4&i.$$.dirty[0]|1&i.$$.dirty[7]|131072&i.$$.dirty[8]&&o(50,At=It&&Ii&&S),524288&i.$$.dirty[8]&&o(266,Dt=ni&&!!ni.length),64&i.$$.dirty[6]|786432&i.$$.dirty[8]&&o(268,Rt=Dt&&qn(ve,ni)),524288&i.$$.dirty[6]|7602176&i.$$.dirty[8]&&Dt&&((t,e,i,n)=>{if(!e)return;const r={dataSizeScalar:i};n&&n[3]>0&&(r.backgroundColor=[...n]),e(t,r).then((t=>{Ps&&w(Ps),o(181,Ps=t)}))})(Ee,oi,Rt,ri),67108864&i.$$.dirty[5]|64&i.$$.dirty[6]|524288&i.$$.dirty[8]&&ni&&Ps&&ve){const{width:t,height:e}=ve;o(15,Is=ni.map((i=>{const n=Yt(i.x,i.y,i.width,i.height),o=te(zt(n),i.rotation).map((i=>Q(i.x/t,i.y/e)));return{...i,id:"redaction",flipX:!1,flipY:!1,cornerRadius:0,strokeWidth:0,strokeColor:void 0,backgroundColor:[0,0,0],backgroundImage:Ps,backgroundImageRendering:"pixelated",backgroundCorners:o}})))}65536&i.$$.dirty[0]&&Es&&As.set(Es),67108864&i.$$.dirty[0]|524288&i.$$.dirty[6]&&o(30,Ot=Ee&&!at),1073741826&i.$$.dirty[0]&&Ot&&yn.dispatchEvent(jh("ready")),1&i.$$.dirty[1]&&o(35,Vs=!0),2&i.$$.dirty[1]&&o(36,Us=!0),4&i.$$.dirty[1]&&o(37,qs=!0),32768&i.$$.dirty[0]&&o(38,Xs=!0)},o(207,g=!ga()),o(242,st=[!Zh()&&"WebGL"].filter(Boolean)),o(51,Lt=((t,e=!0)=>i=>{"ping"===i.type&&(e&&i.stopPropagation(),t(i.detail.type,i.detail.data))})(ki.pub)),[gn,yn,Ii,Ai,ji,qi,Ji,an,fn,Cn,_r,Nr,Pr,Er,us,Is,Es,a,Wt,D,T,$e,_e,C,M,Ue,at,dt,Ze,Ct,Ot,ci,hi,ui,es,Vs,Us,qs,Xs,pe,Le,P,E,I,R,V,nt,ot,Pt,Et,At,Lt,pi,fi,mi,gi,yi,vi,bi,xi,$i,xn,Pn,En,In,An,Dn,Ln,Gn,eo,ro,so,ao,lo,co,uo,po,fo,yo,vo,bo,$o,wo,_o,ko,So,Co,To,Mo,Po,Eo,Io,Ao,Ro,Lo,Oo,No,Ho,Xo,Go,Jo,hr,pr,fr,mr,gr,yr,vr,br,xr,$r,Sr,Cr,Tr,Lr,zr,Fr,Br,Yr,qr,Gr,Jr,({target:t,propertyName:e})=>{t===yn&&/background|outline/.test(e)&&os()},rs,ls,hs,ds,ps,fs,gs,ys,t=>{const e=!(!us||!us.closeButton);gs.set(t.detail.width,{hard:e}),ys.set(Math.round(.5*-t.detail.width),{hard:e})},ws,_s,ks,Ss,Cs,t=>{const{keyCode:e,metaKey:i,ctrlKey:n,shiftKey:o}=t;if(9===e&&Fi)return void t.preventDefault();if(t.target&&32===e&&yn.contains(t.target)&&!Yh(t.target)&&t.preventDefault(),90===e&&(i||n))return void(o&&i?Nr.redo():Nr.undo());if(89===e&&n)return void Nr.redo();if(229===e)return;if(i||n)return;const r=new Set([...ii,e]);Cs.set(Array.from(r))},({keyCode:t})=>{Cs.set(ii.filter((e=>e!==t)))},()=>{Cs.set([])},t=>{Yh(t.target)||t.preventDefault()},t=>{nn&&Ts(t.detail.resources[0])},()=>{rn&&eu().then(Ms)},t=>{if(!on)return;const e=Qr((Pr-Math.abs(Qt.x))/Qt.width,0,1),i=Qr((Er-Math.abs(Qt.y))/Qt.height,0,1);e<.75&&i<.75||Ts((t.clipboardData||window.clipboardData).files[0])},Ds,Ys,Bi,kr,Ci,Ti,Ei,Di,Ri,Li,Fi,Ni,Yi,Ui,Xi,Gi,Zi,Ki,Qi,tn,en,nn,on,rn,sn,ln,cn,hn,un,dn,pn,mn,bn,wr,as,cs,vs,Ps,s,Nt,Ht,Qt,Jt,ie,re,_,le,me,ve,h,we,ke,u,Se,d,Ce,p,Te,m,Me,Pe,Ee,Ie,g,y,v,Ae,De,b,ze,$,Fe,k,S,L,O,z,F,B,N,H,W,j,U,q,X,Be,G,Z,tt,Ne,He,We,je,Ye,lt,Ve,rt,st,ut,pt,ft,qe,mt,gt,Xe,yt,vt,bt,xt,$t,wt,_t,kt,Ge,Tt,Qe,Mt,Je,ti,ei,It,Dt,ni,Rt,oi,ri,function(){o(12,Pr=nu.innerWidth),o(13,Er=nu.innerHeight)},t=>ho(ko,mi=t.detail,mi),({detail:t})=>o(20,T=t),(t,e)=>e.id===t,function(t,e){i.$$.not_equal(gn[e],t)&&(gn[e]=t,o(0,gn),o(8,fn),o(174,pn))},t=>ho(So,gi=t.detail,gi),t=>o(34,es=es.concat(t)),t=>o(34,es=es.filter((e=>e!==t))),(t,{detail:e})=>o(24,M[t]=e,M),t=>ho(_o,Le=t.detail,Le),t=>t.id===T,function(t){i.$$.not_equal(gn[T],t)&&(gn[T]=t,o(0,gn),o(8,fn),o(174,pn))},t=>ho(So,gi=t.detail,gi),()=>o(34,es=es.concat(T)),()=>o(34,es=es.filter((t=>t!==T))),({detail:t})=>o(24,M[T]=t,M),t=>{const e={...t,...Ds()},{annotationShapes:i,decorationShapes:n,interfaceShapes:o,frameShapes:r}=qi({annotationShapes:ci,decorationShapes:hi,interfaceShapes:xi,frameShapes:ui},e);return Ys(e,Is,i,n,o,r)},()=>{o(35,Vs=!1),o(36,Us=!1),o(37,qs=!1),o(38,Xs=!1)},function(t){Zo[t?"unshift":"push"]((()=>{Es=t,o(16,Es)}))},function(t){Zo[t?"unshift":"push"]((()=>{yn=t,o(1,yn)}))},t=>ho($o,Wt=t.detail,Wt)]}class Mu extends Er{constructor(t){super(),Pr(this,t,Tu,ku,eo,{class:148,layout:149,stores:150,locale:2,id:3,util:151,utils:152,animations:153,disabled:154,status:146,previewUpscale:155,elasticityMultiplier:4,willRevert:156,willProcessImage:157,willRenderCanvas:5,willRenderToolbar:158,willSetHistoryInitialState:159,enableButtonExport:160,enableButtonRevert:161,enableNavigateHistory:162,enableToolbar:6,enableUtils:163,enableButtonClose:164,enableDropImage:165,enablePasteImage:166,enableBrowseImage:167,previewImageDataMaxSize:168,previewImageTextPixelRatio:7,layoutDirectionPreference:169,layoutHorizontalUtilsPreference:170,layoutVerticalUtilsPreference:171,imagePreviewSrc:172,imageOrienter:173,pluginComponents:174,pluginOptions:8,sub:175,pluginInterface:0,root:1,imageSourceToImageData:9,imagePreview:10,imagePreviewCurrent:147,history:11},[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1])}get class(){return this.$$.ctx[148]}set class(t){this.$set({class:t}),ar()}get layout(){return this.$$.ctx[149]}set layout(t){this.$set({layout:t}),ar()}get stores(){return this.$$.ctx[150]}set stores(t){this.$set({stores:t}),ar()}get locale(){return this.$$.ctx[2]}set locale(t){this.$set({locale:t}),ar()}get id(){return this.$$.ctx[3]}set id(t){this.$set({id:t}),ar()}get util(){return this.$$.ctx[151]}set util(t){this.$set({util:t}),ar()}get utils(){return this.$$.ctx[152]}set utils(t){this.$set({utils:t}),ar()}get animations(){return this.$$.ctx[153]}set animations(t){this.$set({animations:t}),ar()}get disabled(){return this.$$.ctx[154]}set disabled(t){this.$set({disabled:t}),ar()}get status(){return this.$$.ctx[146]}set status(t){this.$set({status:t}),ar()}get previewUpscale(){return this.$$.ctx[155]}set previewUpscale(t){this.$set({previewUpscale:t}),ar()}get elasticityMultiplier(){return this.$$.ctx[4]}set elasticityMultiplier(t){this.$set({elasticityMultiplier:t}),ar()}get willRevert(){return this.$$.ctx[156]}set willRevert(t){this.$set({willRevert:t}),ar()}get willProcessImage(){return this.$$.ctx[157]}set willProcessImage(t){this.$set({willProcessImage:t}),ar()}get willRenderCanvas(){return this.$$.ctx[5]}set willRenderCanvas(t){this.$set({willRenderCanvas:t}),ar()}get willRenderToolbar(){return this.$$.ctx[158]}set willRenderToolbar(t){this.$set({willRenderToolbar:t}),ar()}get willSetHistoryInitialState(){return this.$$.ctx[159]}set willSetHistoryInitialState(t){this.$set({willSetHistoryInitialState:t}),ar()}get enableButtonExport(){return this.$$.ctx[160]}set enableButtonExport(t){this.$set({enableButtonExport:t}),ar()}get enableButtonRevert(){return this.$$.ctx[161]}set enableButtonRevert(t){this.$set({enableButtonRevert:t}),ar()}get enableNavigateHistory(){return this.$$.ctx[162]}set enableNavigateHistory(t){this.$set({enableNavigateHistory:t}),ar()}get enableToolbar(){return this.$$.ctx[6]}set enableToolbar(t){this.$set({enableToolbar:t}),ar()}get enableUtils(){return this.$$.ctx[163]}set enableUtils(t){this.$set({enableUtils:t}),ar()}get enableButtonClose(){return this.$$.ctx[164]}set enableButtonClose(t){this.$set({enableButtonClose:t}),ar()}get enableDropImage(){return this.$$.ctx[165]}set enableDropImage(t){this.$set({enableDropImage:t}),ar()}get enablePasteImage(){return this.$$.ctx[166]}set enablePasteImage(t){this.$set({enablePasteImage:t}),ar()}get enableBrowseImage(){return this.$$.ctx[167]}set enableBrowseImage(t){this.$set({enableBrowseImage:t}),ar()}get previewImageDataMaxSize(){return this.$$.ctx[168]}set previewImageDataMaxSize(t){this.$set({previewImageDataMaxSize:t}),ar()}get previewImageTextPixelRatio(){return this.$$.ctx[7]}set previewImageTextPixelRatio(t){this.$set({previewImageTextPixelRatio:t}),ar()}get layoutDirectionPreference(){return this.$$.ctx[169]}set layoutDirectionPreference(t){this.$set({layoutDirectionPreference:t}),ar()}get layoutHorizontalUtilsPreference(){return this.$$.ctx[170]}set layoutHorizontalUtilsPreference(t){this.$set({layoutHorizontalUtilsPreference:t}),ar()}get layoutVerticalUtilsPreference(){return this.$$.ctx[171]}set layoutVerticalUtilsPreference(t){this.$set({layoutVerticalUtilsPreference:t}),ar()}get imagePreviewSrc(){return this.$$.ctx[172]}set imagePreviewSrc(t){this.$set({imagePreviewSrc:t}),ar()}get imageOrienter(){return this.$$.ctx[173]}set imageOrienter(t){this.$set({imageOrienter:t}),ar()}get pluginComponents(){return this.$$.ctx[174]}set pluginComponents(t){this.$set({pluginComponents:t}),ar()}get pluginOptions(){return this.$$.ctx[8]}set pluginOptions(t){this.$set({pluginOptions:t}),ar()}get sub(){return this.$$.ctx[175]}get pluginInterface(){return this.$$.ctx[0]}get root(){return this.$$.ctx[1]}set root(t){this.$set({root:t}),ar()}get imageSourceToImageData(){return this.$$.ctx[9]}set imageSourceToImageData(t){this.$set({imageSourceToImageData:t}),ar()}get imagePreview(){return this.$$.ctx[10]}get imagePreviewCurrent(){return this.$$.ctx[147]}set imagePreviewCurrent(t){this.$set({imagePreviewCurrent:t}),ar()}get history(){return this.$$.ctx[11]}}const Pu=["klass","stores","isVisible","isActive","isActiveFraction","locale"],Eu=["history","klass","stores","navButtons","pluginComponents","pluginInterface","pluginOptions","sub","imagePreviewSrc","imagePreview","imagePreviewCurrent"];let Iu;const Au=new Set([]),Du={},Ru=new Map;var Lu=[...cs,"init","undo","redo","update","revert","destroy","show","hide","close","ready","loadpreview","selectshape","updateshape","addshape","removeshape","selectstyle"];const Ou=t=>!(t=>e(t[0]))(t),zu=t=>t[1],Fu=t=>t[3]||[],Bu=(t,e)=>Ou(e)?e.find((e=>zu(e)===t))?e:e.find((e=>Bu(t,Fu(e)))):Bu(t,Fu(e));var Nu=t=>Math.round(100*t),Hu={finetuneControlConfiguration:{gamma:{base:1,min:.15,max:4,getLabel:t=>Nu(t<1?(t-.15)/.85-1:(t-1)/3),getStore:({imageGamma:t})=>t},brightness:{base:0,min:-.25,max:.25,getLabel:t=>Nu(t/.25),getStore:({imageColorMatrix:t})=>t,getValue:t=>{if(t.brightness)return t.brightness[4]},setValue:(t,e)=>t.update((t=>({...t,brightness:[1,0,0,0,e,0,1,0,0,e,0,0,1,0,e,0,0,0,1,0]})))},contrast:{base:1,min:.5,max:1.5,getLabel:t=>Nu(2*(t-.5)-1),getStore:({imageColorMatrix:t})=>t,getValue:t=>{if(t.contrast)return t.contrast[0]},setValue:(t,e)=>t.update((t=>({...t,contrast:[e,0,0,0,.5*(1-e),0,e,0,0,.5*(1-e),0,0,e,0,.5*(1-e),0,0,0,1,0]})))},saturation:{base:1,min:0,max:2,getLabel:t=>Nu(t-1),getStore:({imageColorMatrix:t})=>t,getValue:t=>{if(t.saturation)return(t.saturation[0]-.213)/.787},setValue:(t,e)=>t.update((t=>({...t,saturation:[.213+.787*e,.715-.715*e,.072-.072*e,0,0,.213-.213*e,.715+.285*e,.072-.072*e,0,0,.213-.213*e,.715-.715*e,.072+.928*e,0,0,0,0,0,1,0]})))},exposure:{base:1,min:.5,max:1.5,getLabel:t=>Nu(2*(t-.5)-1),getStore:({imageColorMatrix:t})=>t,getValue:t=>{if(t.exposure)return t.exposure[0]},setValue:(t,e)=>t.update((t=>({...t,exposure:[e,0,0,0,0,0,e,0,0,0,0,0,e,0,0,0,0,0,1,0]})))},temperature:{base:0,min:-1,max:1,getStore:({imageColorMatrix:t})=>t,getValue:t=>{if(!t.temperature)return;const e=t.temperature[0];return e>=1?(e-1)/.1:(1-e)/-.15},setValue:(t,e)=>t.update((t=>({...t,temperature:e>0?[1+.1*e,0,0,0,0,0,1,0,0,0,0,0,1+.1*-e,0,0,0,0,0,1,0]:[1+.15*e,0,0,0,0,0,1+.05*e,0,0,0,0,0,1+.15*-e,0,0,0,0,0,1,0]})))},clarity:{base:0,min:-1,max:1,getStore:({imageConvolutionMatrix:t})=>t,getValue:t=>{if(t.clarity)return 0===t.clarity[0]?t.clarity[1]/-1:t.clarity[1]/-2},setValue:(t,e)=>{t.update((t=>({...t,clarity:e>=0?[0,-1*e,0,-1*e,1+4*e,-1*e,0,-1*e,0]:[-1*e,-2*e,-1*e,-2*e,1+-3*e,-2*e,-1*e,-2*e,-1*e]})))}},vignette:{base:0,min:-1,max:1,getStore:({imageVignette:t})=>t}},finetuneOptions:[["brightness",t=>t.finetuneLabelBrightness],["contrast",t=>t.finetuneLabelContrast],["saturation",t=>t.finetuneLabelSaturation],["exposure",t=>t.finetuneLabelExposure],["temperature",t=>t.finetuneLabelTemperature],["gamma",t=>t.finetuneLabelGamma],!ga()&&["clarity",t=>t.finetuneLabelClarity],["vignette",t=>t.finetuneLabelVignette]].filter(Boolean)},Wu=(t,e,i)=>{let n,o,r;const s=Math.floor(6*t),a=6*t-s,l=i*(1-e),c=i*(1-a*e),h=i*(1-(1-a)*e);switch(s%6){case 0:n=i,o=h,r=l;break;case 1:n=c,o=i,r=l;break;case 2:n=l,o=i,r=h;break;case 3:n=l,o=c,r=i;break;case 4:n=h,o=l,r=i;break;case 5:n=i,o=l,r=c}return[n,o,r]};function ju(t){let e,i,n;return{c(){e=wo("div"),i=wo("span"),Eo(e,"class","PinturaColorPreview"),Eo(e,"title",t[0]),Eo(e,"style",n="--color:"+t[1])},m(t,n){xo(t,e,n),bo(e,i)},p(t,[i]){1&i&&Eo(e,"title",t[0]),2&i&&n!==(n="--color:"+t[1])&&Eo(e,"style",n)},i:Xn,o:Xn,d(t){t&&$o(e)}}}function Yu(t,e,i){let n,{color:o}=e,{title:r}=e;return t.$$set=t=>{"color"in t&&i(2,o=t.color),"title"in t&&i(0,r=t.title)},t.$$.update=()=>{4&t.$$.dirty&&i(1,n=o?ai(o):"transparent")},[r,n,o]}class Vu extends Er{constructor(t){super(),Pr(this,t,Yu,ju,eo,{color:2,title:0})}}function Uu(t){let e,i;return{c(){e=wo("span"),i=ko(t[0])},m(t,n){xo(t,e,n),bo(e,i)},p(t,e){1&e[0]&&Ao(i,t[0])},d(t){t&&$o(e)}}}function qu(t){let e,i,n,o;i=new Vu({props:{color:t[4],title:kc(t[8],t[10])}});let r=!t[9]&&Uu(t);return{c(){e=wo("span"),Cr(i.$$.fragment),n=So(),r&&r.c(),Eo(e,"slot","label"),Eo(e,"class","PinturaButtonLabel")},m(t,s){xo(t,e,s),Tr(i,e,null),bo(e,n),r&&r.m(e,null),o=!0},p(t,n){const o={};16&n[0]&&(o.color=t[4]),1280&n[0]&&(o.title=kc(t[8],t[10])),i.$set(o),t[9]?r&&(r.d(1),r=null):r?r.p(t,n):(r=Uu(t),r.c(),r.m(e,null))},i(t){o||(mr(i.$$.fragment,t),o=!0)},o(t){gr(i.$$.fragment,t),o=!1},d(t){t&&$o(e),Mr(i),r&&r.d()}}}function Xu(t){let e,i,n,o,r,s,a,l,c,h,u,d,p;c=new wh({props:{class:"PinturaHuePicker",knobStyle:"background-color:"+t[19],onchange:t[24],value:t[14],min:0,max:1,step:.01}});let f=t[11]&&Gu(t);return{c(){e=wo("div"),i=wo("div"),n=wo("div"),o=wo("div"),l=So(),Cr(c.$$.fragment),h=So(),f&&f.c(),Eo(o,"role","button"),Eo(o,"aria-label","Saturation slider"),Eo(o,"class","PinturaPickerKnob"),Eo(o,"tabindex","0"),Eo(o,"style",r=`background-color:${t[18]};`),Eo(n,"class","PinturaPickerKnobController"),Eo(n,"style",s=`transform:translate(${t[21]}%,${t[22]}%)`),Eo(i,"class","PinturaSaturationPicker"),Eo(i,"style",a="background-color: "+t[19]),Eo(e,"class","PinturaPicker")},m(r,s){xo(r,e,s),bo(e,i),bo(i,n),bo(n,o),t[31](i),bo(e,l),Tr(c,e,null),bo(e,h),f&&f.m(e,null),u=!0,d||(p=[To(o,"nudge",t[27]),uo(Al.call(null,o)),To(i,"pointerdown",t[26])],d=!0)},p(t,l){(!u||262144&l[0]&&r!==(r=`background-color:${t[18]};`))&&Eo(o,"style",r),(!u||6291456&l[0]&&s!==(s=`transform:translate(${t[21]}%,${t[22]}%)`))&&Eo(n,"style",s),(!u||524288&l[0]&&a!==(a="background-color: "+t[19]))&&Eo(i,"style",a);const h={};524288&l[0]&&(h.knobStyle="background-color:"+t[19]),16384&l[0]&&(h.value=t[14]),c.$set(h),t[11]?f?(f.p(t,l),2048&l[0]&&mr(f,1)):(f=Gu(t),f.c(),mr(f,1),f.m(e,null)):f&&(pr(),gr(f,1,1,(()=>{f=null})),fr())},i(t){u||(mr(c.$$.fragment,t),mr(f),u=!0)},o(t){gr(c.$$.fragment,t),gr(f),u=!1},d(i){i&&$o(e),t[31](null),Mr(c),f&&f.d(),d=!1,Jn(p)}}}function Gu(t){let e,i;return e=new wh({props:{class:"PinturaOpacityPicker",knobStyle:"background-color: "+t[16],trackStyle:`background-image: linear-gradient(to right, ${t[17]}, ${t[18]})`,onchange:t[25],value:t[15],min:0,max:1,step:.01}}),{c(){Cr(e.$$.fragment)},m(t,n){Tr(e,t,n),i=!0},p(t,i){const n={};65536&i[0]&&(n.knobStyle="background-color: "+t[16]),393216&i[0]&&(n.trackStyle=`background-image: linear-gradient(to right, ${t[17]}, ${t[18]})`),32768&i[0]&&(n.value=t[15]),e.$set(n)},i(t){i||(mr(e.$$.fragment,t),i=!0)},o(t){gr(e.$$.fragment,t),i=!1},d(t){Mr(e,t)}}}function Zu(t){let e,i;return e=new Qc({props:{label:"Presets",class:Ga(["PinturaColorPresets",t[9]?"PinturaColorPresetsGrid":"PinturaColorPresetsList"]),hideLabel:!1,name:t[1],value:t[4],optionGroupClass:"PinturaListOptionGroup",optionClass:"PinturaListOption",options:t[2].map(t[32]),selectedIndex:t[3],optionMapper:t[7],optionLabelClass:t[6],onchange:t[33],$$slots:{option:[Ju,({option:t})=>({44:t}),({option:t})=>[0,t?8192:0]],group:[Ku,({option:t})=>({44:t}),({option:t})=>[0,t?8192:0]]},$$scope:{ctx:t}}}),{c(){Cr(e.$$.fragment)},m(t,n){Tr(e,t,n),i=!0},p(t,i){const n={};512&i[0]&&(n.class=Ga(["PinturaColorPresets",t[9]?"PinturaColorPresetsGrid":"PinturaColorPresetsList"])),2&i[0]&&(n.name=t[1]),16&i[0]&&(n.value=t[4]),1028&i[0]&&(n.options=t[2].map(t[32])),8&i[0]&&(n.selectedIndex=t[3]),128&i[0]&&(n.optionMapper=t[7]),64&i[0]&&(n.optionLabelClass=t[6]),512&i[0]|24576&i[1]&&(n.$$scope={dirty:i,ctx:t}),e.$set(n)},i(t){i||(mr(e.$$.fragment,t),i=!0)},o(t){gr(e.$$.fragment,t),i=!1},d(t){Mr(e,t)}}}function Ku(t){let e,i,n=t[44].label+"";return{c(){e=wo("span"),i=ko(n),Eo(e,"slot","group")},m(t,n){xo(t,e,n),bo(e,i)},p(t,e){8192&e[1]&&n!==(n=t[44].label+"")&&Ao(i,n)},d(t){t&&$o(e)}}}function Qu(t){let e,i,n=t[44].label+"";return{c(){e=wo("span"),i=ko(n),Eo(e,"class","PinturaButtonLabel")},m(t,n){xo(t,e,n),bo(e,i)},p(t,e){8192&e[1]&&n!==(n=t[44].label+"")&&Ao(i,n)},d(t){t&&$o(e)}}}function Ju(t){let e,i,n,o;i=new Vu({props:{title:t[44].label,color:t[44].value}});let r=!t[9]&&Qu(t);return{c(){e=wo("span"),Cr(i.$$.fragment),n=So(),r&&r.c(),Eo(e,"slot","option")},m(t,s){xo(t,e,s),Tr(i,e,null),bo(e,n),r&&r.m(e,null),o=!0},p(t,n){const o={};8192&n[1]&&(o.title=t[44].label),8192&n[1]&&(o.color=t[44].value),i.$set(o),t[9]?r&&(r.d(1),r=null):r?r.p(t,n):(r=Qu(t),r.c(),r.m(e,null))},i(t){o||(mr(i.$$.fragment,t),o=!0)},o(t){gr(i.$$.fragment,t),o=!1},d(t){t&&$o(e),Mr(i),r&&r.d()}}}function td(t){let e,i,n,o=t[13]&&Xu(t),r=t[12]&&Zu(t);return{c(){e=wo("div"),o&&o.c(),i=So(),r&&r.c(),Eo(e,"slot","details"),Eo(e,"class","PinturaColorPickerPanel")},m(t,s){xo(t,e,s),o&&o.m(e,null),bo(e,i),r&&r.m(e,null),n=!0},p(t,n){t[13]?o?(o.p(t,n),8192&n[0]&&mr(o,1)):(o=Xu(t),o.c(),mr(o,1),o.m(e,i)):o&&(pr(),gr(o,1,1,(()=>{o=null})),fr()),t[12]?r?(r.p(t,n),4096&n[0]&&mr(r,1)):(r=Zu(t),r.c(),mr(r,1),r.m(e,null)):r&&(pr(),gr(r,1,1,(()=>{r=null})),fr())},i(t){n||(mr(o),mr(r),n=!0)},o(t){gr(o),gr(r),n=!1},d(t){t&&$o(e),o&&o.d(),r&&r.d()}}}function ed(t){let e,i;return e=new vc({props:{buttonClass:Ga(["PinturaColorPickerButton",t[5]]),$$slots:{details:[td],label:[qu]},$$scope:{ctx:t}}}),{c(){Cr(e.$$.fragment)},m(t,n){Tr(e,t,n),i=!0},p(t,i){const n={};32&i[0]&&(n.buttonClass=Ga(["PinturaColorPickerButton",t[5]])),8388575&i[0]|16384&i[1]&&(n.$$scope={dirty:i,ctx:t}),e.$set(n)},i(t){i||(mr(e.$$.fragment,t),i=!0)},o(t){gr(e.$$.fragment,t),i=!1},d(t){Mr(e,t)}}}function id(t,e,i){let n,o,r,s,a,l,c,h,u,d,p,{label:f}=e,{name:m}=e,{options:g=[]}=e,{selectedIndex:y=-1}=e,{value:v}=e,{buttonClass:b}=e,{optionLabelClass:x}=e,{optionMapper:$}=e,{onchange:w}=e,{title:_}=e,{hidePresetLabel:k=!0}=e,{locale:S}=e,{enableOpacity:C=!0}=e,{enablePresets:T=!0}=e,{enablePicker:M=!0}=e;const E=(t,e)=>{if(c=[t[0],t[1],t[2]],e){let e=((t,e,i)=>{let n=Math.max(t,e,i),o=n-Math.min(t,e,i),r=o&&(n==t?(e-i)/o:n==e?2+(i-t)/o:4+(t-e)/o);return[60*(r<0?r+6:r)/360,n&&o/n,n]})(...c);i(14,r=e[0]),i(29,s=e[1]),i(30,a=e[2]),i(15,l=Ke(t[3])?t[3]:1)}i(16,h=ai(t)),i(17,u=ai([...c,0])),i(18,d=ai([...c,1])),i(19,p=ai(Wu(r,1,1)))};v&&E(v,!0);const I=()=>{const t=[...Wu(r,s,a),l];E(t),w(t)},A=t=>{const e=3===t.length?[...t,1]:t;E(e,!0),w(e)},D=(t,e)=>{const n=Qr(t.x/e.width,0,1);var o;o=1-Qr(t.y/e.height,0,1),i(29,s=n),i(30,a=o),0===l&&i(15,l=1),I()};let R,L,O,z;const F=t=>{const e=ht(tt(t),z);D(ct(et(O),e),L)},B=t=>{L=void 0,document.documentElement.removeEventListener("pointermove",F),document.documentElement.removeEventListener("pointerup",B)};return t.$$set=t=>{"label"in t&&i(0,f=t.label),"name"in t&&i(1,m=t.name),"options"in t&&i(2,g=t.options),"selectedIndex"in t&&i(3,y=t.selectedIndex),"value"in t&&i(4,v=t.value),"buttonClass"in t&&i(5,b=t.buttonClass),"optionLabelClass"in t&&i(6,x=t.optionLabelClass),"optionMapper"in t&&i(7,$=t.optionMapper),"onchange"in t&&i(28,w=t.onchange),"title"in t&&i(8,_=t.title),"hidePresetLabel"in t&&i(9,k=t.hidePresetLabel),"locale"in t&&i(10,S=t.locale),"enableOpacity"in t&&i(11,C=t.enableOpacity),"enablePresets"in t&&i(12,T=t.enablePresets),"enablePicker"in t&&i(13,M=t.enablePicker)},t.$$.update=()=>{536870912&t.$$.dirty[0]&&i(21,n=100*s),1073741824&t.$$.dirty[0]&&i(22,o=100-100*a)},[f,m,g,y,v,b,x,$,_,k,S,C,T,M,r,l,h,u,d,p,R,n,o,A,t=>{i(14,r=t),0===l&&i(15,l=1),I()},t=>{i(15,l=t),I()},t=>{t.stopPropagation(),L=St(R.offsetWidth,R.offsetHeight),O=(t=>Q(t.offsetX,t.offsetY))(t),z=tt(t),D(O,L),document.documentElement.addEventListener("pointermove",F),document.documentElement.addEventListener("pointerup",B)},t=>{L=St(R.offsetWidth,R.offsetHeight);const e=n/100*L.width,i=o/100*L.height;D({x:e+t.detail.x,y:i+t.detail.y},L)},w,s,a,function(t){Zo[t?"unshift":"push"]((()=>{R=t,i(20,R)}))},([t,e])=>[t,P(e)?e(S):e],t=>A(t.value)]}class nd extends Er{constructor(t){super(),Pr(this,t,id,ed,eo,{label:0,name:1,options:2,selectedIndex:3,value:4,buttonClass:5,optionLabelClass:6,optionMapper:7,onchange:28,title:8,hidePresetLabel:9,locale:10,enableOpacity:11,enablePresets:12,enablePicker:13},[-1,-1])}}let od=null;var rd=()=>{if(null===od)if(n())try{od=!1===document.fonts.check("16px TestNonExistingFont")}catch(t){od=!1}else od=!1;return od};const sd=(t,e)=>i=>i[e?`${e}${o(t)}`:t],ad=t=>[t,""+t],ld=(t,e)=>i=>[t[i],sd(i,e)],cd=[1,.2549,.2118],hd=[1,1,1,0],ud={path:()=>({points:[],disableErase:!1}),eraser:()=>({eraseRadius:0}),line:()=>({x1:0,y1:0,x2:0,y2:0,disableErase:!1}),rectangle:()=>({x:0,y:0,width:0,height:0}),ellipse:()=>({x:0,y:0,rx:0,ry:0}),text:()=>({x:0,y:0,text:"Text"})},dd=(t,e={},i={position:"relative"})=>{if(ud[t])return[{...ud[t](),...e},i]},pd=(t,e,i)=>[t,e||sd(t,"shapeLabelTool"),{icon:sd(t,"shapeIconTool"),...i}],fd=()=>({transparent:[1,1,1,0],white:[1,1,1],silver:[.8667,.8667,.8667],gray:[.6667,.6667,.6667],black:[0,0,0],navy:[0,.1216,.2471],blue:[0,.4549,.851],aqua:[.498,.8588,1],teal:[.2235,.8,.8],olive:[.2392,.6,.4392],green:[.1804,.8,.251],yellow:[1,.8627,0],orange:[1,.5216,.1059],red:[1,.2549,.2118],maroon:[.5216,.0784,.2941],fuchsia:[.9412,.0706,.7451],purple:[.6941,.051,.7882]}),md=()=>({extraSmall:"2%",small:"4%",mediumSmall:"8%",medium:"10%",mediumLarge:"15%",large:"20%",extraLarge:"25%"}),gd=()=>({extraSmall:"40%",small:"60%",mediumSmall:"100%",medium:"120%",mediumLarge:"140%",large:"180%",extraLarge:"220%"}),yd=()=>({extraSmall:"0.25%",small:"0.5%",mediumSmall:"1%",medium:"1.75%",mediumLarge:"2.5%",large:"3.5%",extraLarge:"5%"}),vd=()=>["bar","arrow","arrowSolid","circle","circleSolid","square","squareSolid"],bd=()=>[["Helvetica, Arial, Verdana, 'Droid Sans', sans-serif","Sans Serif"],["'Arial Black', 'Avenir-Black', 'Arial Bold'","Black"],["'Arial Narrow', 'Futura-CondensedMedium'","Narrow"],["'Trebuchet MS'","Humanist"],["Georgia, 'Avenir-Black', 'Times New Roman', 'Droid Serif', serif","Serif"],["Palatino","Old-Style"],["'Times New Roman', 'TimesNewRomanPSMT'","Transitional"],["Menlo, Monaco, 'Lucida Console', monospace","Monospaced"],["'Courier New', monospace","Slab Serif"]],xd=()=>["left","center","right"],$d=()=>[["normal","bold"],["italic","normal"],["italic","bold"]],wd=t=>Object.keys(t).map(ld(t,"shapeTitleColor")),_d=t=>Object.keys(t).map(ld(t,"labelSize")),kd=t=>Object.keys(t).map(ld(t,"labelSize")),Sd=t=>Object.keys(t).map(ld(t,"labelSize")),Cd=t=>[...t],Td=t=>t.map((t=>[t,e=>e["shapeLabelFontStyle"+t.filter((t=>"normal"!==t)).map(o).join("")]])),Md=t=>t.map((t=>[Vh(t),e=>e["shapeTitleLineDecoration"+o(t)],{icon:e=>e["shapeIconLineDecoration"+o(t)]}])),Pd=t=>t.map((t=>[t,e=>e["shapeTitleTextAlign"+o(t)],{hideLabel:!0,icon:e=>e["shapeIconTextAlign"+o(t)]}])),Ed=(t,e)=>{const{defaultKey:i,defaultValue:n,defaultOptions:o}=e||{},r=[];return i&&(r[0]=[n,t=>t[i],{...o}]),[...r,...t]},Id=t=>t.split(",").map((t=>t.trim())).some((t=>document.fonts.check("16px "+t))),Ad=(t,e={})=>[nd,{title:t=>t.labelColor,options:Ed(t),...e}],Dd=(t={})=>[Ph,{...t}],Rd=(t,e={})=>[nd,{title:t=>t.shapeTitleBackgroundColor,options:Ed(t),...e}],Ld=(t,i={})=>[nd,{title:t=>t.shapeTitleStrokeColor,options:Ed(t),buttonClass:"PinturaColorPickerButtonStroke",onchange:(t,n)=>{const o=n.strokeWidth;(Ke(o)||e(o)?parseFloat(o):0)>0||(n.strokeWidth=i&&i.defaultStrokeWidth||"0.5%")},...i}],Od=(t,e,i)=>[dh,{title:t=>t[e],options:Ed(t,{defaultKey:"labelNone",defaultOptions:{icon:'<g stroke="currentColor" stroke-linecap="round" stroke-width=".125em"><path d="M5,12 H14"/></g>'}}),optionIconStyle:i}],zd=t=>Od(t,"shapeTitleLineStart","transform: scaleX(-1)"),Fd=t=>Od(t,"shapeTitleLineEnd"),Bd=t=>[nd,{title:t=>t.shapeTitleTextColor,options:Ed(t)}],Nd=t=>[dh,{title:t=>t.shapeTitleFontStyle,optionLabelStyle:t=>t&&`font-style:${t[0]};font-weight:${t[1]}`,options:Ed(t,{defaultKey:"shapeLabelFontStyleNormal"})}],Hd=t=>{let e;return t.find((([t])=>"4%"===t))||(e={defaultKey:"labelAuto",defaultValue:"4%"}),[dh,{title:t=>t.shapeTitleFontSize,options:Ed(t,e)}]},Wd=t=>[Qc,{title:t=>t.shapeTitleTextAlign,options:Ed(t)}],jd=t=>{let e;return t.find((([t])=>"120%"===t))||(e={defaultKey:"labelAuto",defaultValue:"120%"}),[dh,{title:t=>t.shapeTitleLineHeight,options:Ed(t,e)}]};function Yd(t){let e,i,n,o;const r=t[3].default,s=ro(r,t,t[2],null);return{c(){e=wo("div"),s&&s.c(),Eo(e,"class",t[0])},m(r,a){xo(r,e,a),s&&s.m(e,null),i=!0,n||(o=[To(e,"measure",t[1]),uo(ha.call(null,e))],n=!0)},p(t,[n]){s&&s.p&&4&n&&ao(s,r,t,t[2],n,null,null),(!i||1&n)&&Eo(e,"class",t[0])},i(t){i||(mr(s,t),i=!0)},o(t){gr(s,t),i=!1},d(t){t&&$o(e),s&&s.d(t),n=!1,Jn(o)}}}function Vd(t,e,i){let{$$slots:n={},$$scope:o}=e;const r=Vo();let{class:s=null}=e;return t.$$set=t=>{"class"in t&&i(0,s=t.class),"$$scope"in t&&i(2,o=t.$$scope)},[s,({detail:t})=>r("measure",t),o,n]}class Ud extends Er{constructor(t){super(),Pr(this,t,Vd,Yd,eo,{class:0})}}const qd=t=>({}),Xd=t=>({}),Gd=t=>({}),Zd=t=>({}),Kd=t=>({}),Qd=t=>({});function Jd(t){let e,i;const n=t[4].header,o=ro(n,t,t[3],Qd);return{c(){e=wo("div"),o&&o.c(),Eo(e,"class","PinturaUtilHeader")},m(t,n){xo(t,e,n),o&&o.m(e,null),i=!0},p(t,e){o&&o.p&&8&e&&ao(o,n,t,t[3],e,Kd,Qd)},i(t){i||(mr(o,t),i=!0)},o(t){gr(o,t),i=!1},d(t){t&&$o(e),o&&o.d(t)}}}function tp(t){let e,i;const n=t[4].footer,o=ro(n,t,t[3],Xd);return{c(){e=wo("div"),o&&o.c(),Eo(e,"class","PinturaUtilFooter")},m(t,n){xo(t,e,n),o&&o.m(e,null),i=!0},p(t,e){o&&o.p&&8&e&&ao(o,n,t,t[3],e,qd,Xd)},i(t){i||(mr(o,t),i=!0)},o(t){gr(o,t),i=!1},d(t){t&&$o(e),o&&o.d(t)}}}function ep(t){let e,i,n,o,r,s,a=t[1]&&Jd(t);const l=t[4].main,c=ro(l,t,t[3],Zd),h=c||function(t){let e,i;return e=new Ud({props:{class:"PinturaStage"}}),e.$on("measure",t[5]),{c(){Cr(e.$$.fragment)},m(t,n){Tr(e,t,n),i=!0},p:Xn,i(t){i||(mr(e.$$.fragment,t),i=!0)},o(t){gr(e.$$.fragment,t),i=!1},d(t){Mr(e,t)}}}(t);let u=t[2]&&tp(t);return{c(){a&&a.c(),e=So(),i=wo("div"),h&&h.c(),n=So(),u&&u.c(),o=So(),r=Co(),Eo(i,"class","PinturaUtilMain")},m(l,c){a&&a.m(l,c),xo(l,e,c),xo(l,i,c),h&&h.m(i,null),t[6](i),xo(l,n,c),u&&u.m(l,c),xo(l,o,c),xo(l,r,c),s=!0},p(t,[i]){t[1]?a?(a.p(t,i),2&i&&mr(a,1)):(a=Jd(t),a.c(),mr(a,1),a.m(e.parentNode,e)):a&&(pr(),gr(a,1,1,(()=>{a=null})),fr()),c&&c.p&&8&i&&ao(c,l,t,t[3],i,Gd,Zd),t[2]?u?(u.p(t,i),4&i&&mr(u,1)):(u=tp(t),u.c(),mr(u,1),u.m(o.parentNode,o)):u&&(pr(),gr(u,1,1,(()=>{u=null})),fr())},i(t){s||(mr(a),mr(h,t),mr(u),mr(!1),s=!0)},o(t){gr(a),gr(h,t),gr(u),gr(!1),s=!1},d(s){a&&a.d(s),s&&$o(e),s&&$o(i),h&&h.d(s),t[6](null),s&&$o(n),u&&u.d(s),s&&$o(o),s&&$o(r)}}}function ip(t,e,i){let{$$slots:n={},$$scope:o}=e,{hasHeader:r=!!e.$$slots.header}=e,{hasFooter:s=!!e.$$slots.footer}=e,{root:a}=e;return t.$$set=t=>{i(7,e=Zn(Zn({},e),lo(t))),"hasHeader"in t&&i(1,r=t.hasHeader),"hasFooter"in t&&i(2,s=t.hasFooter),"root"in t&&i(0,a=t.root),"$$scope"in t&&i(3,o=t.$$scope)},e=lo(e),[a,r,s,o,n,function(e){Xo(t,e)},function(t){Zo[t?"unshift":"push"]((()=>{a=t,i(0,a)}))}]}class np extends Er{constructor(t){super(),Pr(this,t,ip,ep,eo,{hasHeader:1,hasFooter:2,root:0})}}function op(t){let e,i;return{c(){e=wo("div"),Eo(e,"class","PinturaRangeInputMeter"),Eo(e,"style",i=`transform: translateX(${t[8].x-t[9].x}px) translateY(${t[8].y-t[9].y}px)`)},m(i,n){xo(i,e,n),e.innerHTML=t[6]},p(t,n){64&n[0]&&(e.innerHTML=t[6]),256&n[0]&&i!==(i=`transform: translateX(${t[8].x-t[9].x}px) translateY(${t[8].y-t[9].y}px)`)&&Eo(e,"style",i)},d(t){t&&$o(e)}}}function rp(t){let e,i,n,o,r,s,a,l,c,h,u,d=t[8]&&op(t);return{c(){e=wo("div"),i=wo("span"),n=ko(t[3]),o=So(),r=wo("button"),s=ko(t[1]),l=So(),c=wo("div"),d&&d.c(),Eo(i,"class","PinturaRangeInputValue"),Eo(r,"class","PinturaRangeInputReset"),Eo(r,"type","button"),r.disabled=a=t[0]===t[2],Eo(c,"class","PinturaRangeInputInner"),Eo(c,"style",t[7]),Eo(c,"data-value-limited",t[5]),Eo(e,"class","PinturaRangeInput"),Eo(e,"tabindex","0")},m(a,p){xo(a,e,p),bo(e,i),bo(i,n),bo(e,o),bo(e,r),bo(r,s),bo(e,l),bo(e,c),d&&d.m(c,null),h||(u=[To(r,"click",t[14]),To(c,"interactionstart",t[10]),To(c,"interactionupdate",t[12]),To(c,"interactionend",t[13]),To(c,"interactionrelease",t[11]),uo(Il.call(null,c,{inertia:!0})),To(c,"measure",t[32]),uo(ha.call(null,c)),To(e,"wheel",t[16],{passive:!1}),To(e,"nudge",t[17]),uo(Al.call(null,e,{direction:"horizontal"}))],h=!0)},p(t,e){8&e[0]&&Ao(n,t[3]),2&e[0]&&Ao(s,t[1]),5&e[0]&&a!==(a=t[0]===t[2])&&(r.disabled=a),t[8]?d?d.p(t,e):(d=op(t),d.c(),d.m(c,null)):d&&(d.d(1),d=null),128&e[0]&&Eo(c,"style",t[7]),32&e[0]&&Eo(c,"data-value-limited",t[5])},i:Xn,o:Xn,d(t){t&&$o(e),d&&d.d(),h=!1,Jn(u)}}}function sp(t,e,i){let n,o,r,s,a,l,c,h,{labelReset:u="Reset"}=e,{direction:d="x"}=e,{min:p=0}=e,{max:m=1}=e,{base:g=p}=e,{value:y=0}=e,{valueLabel:v=0}=e,{valueMin:b}=e,{valueMax:x}=e,{oninputstart:$=f}=e,{oninputmove:w=f}=e,{oninputend:_=f}=e,{elasticity:k=0}=e;const S=(t,e,i)=>Math.ceil((t-i)/e)*e+i;let C,T,M;const P={x:2,y:0},E=(t,e,i)=>`M ${t-i} ${e} a ${i} ${i} 0 1 0 0 -1`;let I,A,D=!1,R={snap:!1,elastic:!1};const L=(t,e,i)=>{const n=t[d]+e[d],o=Qr(n,I[1][d],I[0][d]),r=k?o+Dl(n-o,k):o,s=i.elastic?r:o,a=Q(0,0);return a[d]=s,O.set(a,{hard:i.snap}),Qr(F(a,d),p,m)},O=Qs();oo(t,O,(t=>i(8,h=t)));const z=(t,e)=>{const i=.5*(C[e]-s[e])-(yh(t,p,m)*s[e]-.5*s[e]);return{x:"x"===e?i:0,y:"y"===e?i:0}},F=(t,e)=>{const i=-(t[e]-.5*C[e])/s[e];return p+i*n},B=O.subscribe((t=>{t&&A&&w(Qr(F(t,d),p,m))})),N=t=>{const e=[z(null!=b?b:p,d),z(null!=x?x:m,d)],i={x:"x"===d?h.x+t:0,y:"y"===d?h.y+t:0},n=Qr(i[d],e[1][d],e[0][d]),o={...h,[d]:n};ho(O,h=o,h);const r=Qr(F(o,d),p,m);$(),w(r),_(r)};return Yo((()=>{B()})),t.$$set=t=>{"labelReset"in t&&i(1,u=t.labelReset),"direction"in t&&i(18,d=t.direction),"min"in t&&i(19,p=t.min),"max"in t&&i(20,m=t.max),"base"in t&&i(2,g=t.base),"value"in t&&i(0,y=t.value),"valueLabel"in t&&i(3,v=t.valueLabel),"valueMin"in t&&i(21,b=t.valueMin),"valueMax"in t&&i(22,x=t.valueMax),"oninputstart"in t&&i(23,$=t.oninputstart),"oninputmove"in t&&i(24,w=t.oninputmove),"oninputend"in t&&i(25,_=t.oninputend),"elasticity"in t&&i(26,k=t.elasticity)},t.$$.update=()=>{if(1572864&t.$$.dirty[0]&&i(28,n=m-p),2621440&t.$$.dirty[0]&&i(29,o=null!=b?Math.max(b,p):p),5242880&t.$$.dirty[0]&&i(30,r=null!=x?Math.min(x,m):m),1572868&t.$$.dirty[0]&&i(31,a=yh(g,p,m)),16&t.$$.dirty[0]|1&t.$$.dirty[1]&&C){const t=.5*C.y;let e,n=40*a,o="",r=C.y,s="";for(let i=0;i<=40;i++){const r=P.x+10*i,a=t;o+=E(r,a,i%5==0?2:.75)+" ",e=r+P.x,i===n&&(s=`<path d="M${r} ${a-4} l2 3 l-2 -1 l-2 1 z"/>`)}i(6,T=`<svg width="${e}" height="${r}" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 ${e} ${r}" aria-hidden="true" focusable="false">\n        ${s}\n        <rect rx="4" ry="4" y="${t-4}"" height="8"/>\n        <path fill-rule="evenodd" d="${o.trim()}"/></svg>`),i(27,M={x:e-2*P.x,y:r})}134217744&t.$$.dirty[0]&&(s=C&&M),1612185600&t.$$.dirty[0]&&i(5,l=o!==p||r!==m),1610612768&t.$$.dirty[0]&&i(7,c=l?function(t,e){const i=yh(t,p,m),n=yh(e,p,m);return`--range-mask-from:${100*Mi(S(i,.025,0)-.0125)}%;--range-mask-to:${100*Mi(S(n,.025,0)-.0125)}%`}(o,r):""),268697617&t.$$.dirty[0]&&n&&C&&C.x&&C.y&&O.set(z(y,d))},[y,u,g,v,C,l,T,c,h,P,()=>{D=!1,A=no(O),I=[z(null!=b?b:p,d),z(null!=x?x:m,d)],$()},()=>{D=!0},({detail:t})=>{R.snap=!D,R.elastic=!D,L(A,t.translation,R)},({detail:t})=>{R.snap=!1,R.elastic=!1;const e=L(A,t.translation,R);if(A=void 0,I=void 0,Math.abs(e-g)<.01)return _(g);_(e)},()=>{i(0,y=Qr(g,o,r)),$(),_(y)},O,t=>{t.preventDefault(),t.stopPropagation();const e=8*Ol(t);N(e)},({detail:t})=>{N(8*t[d])},d,p,m,b,x,$,w,_,k,M,n,o,r,a,t=>i(4,C=(t=>Q(t.width,t.height))(t.detail))]}class ap extends Er{constructor(t){super(),Pr(this,t,sp,rp,eo,{labelReset:1,direction:18,min:19,max:20,base:2,value:0,valueLabel:3,valueMin:21,valueMax:22,oninputstart:23,oninputmove:24,oninputend:25,elasticity:26},[-1,-1])}}function lp(t){let e,i,n,o,r;const s=t[7].default,a=ro(s,t,t[6],null);return{c(){e=wo("div"),i=wo("div"),a&&a.c(),Eo(i,"class","PinturaToolbarInner"),Eo(e,"class","PinturaToolbar"),Eo(e,"data-layout",t[1]),Eo(e,"data-overflow",t[0])},m(s,l){xo(s,e,l),bo(e,i),a&&a.m(i,null),n=!0,o||(r=[To(i,"measure",t[3]),uo(ha.call(null,i)),To(e,"measure",t[2]),uo(ha.call(null,e))],o=!0)},p(t,[i]){a&&a.p&&64&i&&ao(a,s,t,t[6],i,null,null),(!n||2&i)&&Eo(e,"data-layout",t[1]),(!n||1&i)&&Eo(e,"data-overflow",t[0])},i(t){n||(mr(a,t),n=!0)},o(t){gr(a,t),n=!1},d(t){t&&$o(e),a&&a.d(t),o=!1,Jn(r)}}}function cp(t,e,i){let n,o,{$$slots:r={},$$scope:s}=e,a=0,l=0,c=0;const h=()=>{i(0,o="compact"===n&&a>c?"overflow":void 0)};return t.$$set=t=>{"$$scope"in t&&i(6,s=t.$$scope)},t.$$.update=()=>{48&t.$$.dirty&&i(1,n=l>c?"compact":"default")},[o,n,({detail:t})=>{const{width:e}=t;i(5,c=e),h()},({detail:t})=>{const{width:e}=t;e>l&&i(4,l=e),a=e,o||h()},l,c,s,r]}class hp extends Er{constructor(t){super(),Pr(this,t,cp,lp,eo,{})}}const up={Top:"t",Right:"r",Bottom:"b",Left:"l",TopLeft:"tl",TopRight:"tr",BottomRight:"br",BottomLeft:"bl"},{Top:dp,Right:pp,Bottom:fp,Left:mp,TopLeft:gp,TopRight:yp,BottomRight:vp,BottomLeft:bp}=up;var xp={[dp]:t=>({x:t.x,y:t.y}),[yp]:t=>({x:t.x+t.width,y:t.y}),[pp]:t=>({x:t.x+t.width,y:t.y}),[vp]:t=>({x:t.x+t.width,y:t.y+t.height}),[fp]:t=>({x:t.x,y:t.y+t.height}),[bp]:t=>({x:t.x,y:t.y+t.height}),[mp]:t=>({x:t.x,y:t.y}),[gp]:t=>({x:t.x,y:t.y})};function $p(t,e,i){const n=t.slice();return n[12]=e[i].key,n[13]=e[i].translate,n[14]=e[i].scale,n[15]=e[i].type,n[16]=e[i].opacity,n}function wp(t,e){let i,n,o,r,s,a,l,c;return{key:t,first:null,c(){i=wo("div"),Eo(i,"role","button"),Eo(i,"aria-label",n=`Drag ${e[15]} ${e[12]}`),Eo(i,"tabindex",o="edge"===e[15]?-1:0),Eo(i,"class","PinturaRectManipulator"),Eo(i,"data-direction",r=e[12]),Eo(i,"data-shape",s="edge"===e[15]?"edge":""+e[0]),Eo(i,"style",a=`transform: translate3d(${e[13].x}px, ${e[13].y}px, 0) scale(${e[14].x}, ${e[14].y}); opacity: ${e[16]}`),this.first=i},m(t,n){xo(t,i,n),l||(c=[To(i,"nudge",(function(){to(e[5](e[12]))&&e[5](e[12]).apply(this,arguments)})),uo(Al.call(null,i)),To(i,"interactionstart",(function(){to(e[4]("resizestart",e[12]))&&e[4]("resizestart",e[12]).apply(this,arguments)})),To(i,"interactionupdate",(function(){to(e[4]("resizemove",e[12]))&&e[4]("resizemove",e[12]).apply(this,arguments)})),To(i,"interactionend",(function(){to(e[4]("resizeend",e[12]))&&e[4]("resizeend",e[12]).apply(this,arguments)})),uo(Il.call(null,i))],l=!0)},p(t,l){e=t,2&l&&n!==(n=`Drag ${e[15]} ${e[12]}`)&&Eo(i,"aria-label",n),2&l&&o!==(o="edge"===e[15]?-1:0)&&Eo(i,"tabindex",o),2&l&&r!==(r=e[12])&&Eo(i,"data-direction",r),3&l&&s!==(s="edge"===e[15]?"edge":""+e[0])&&Eo(i,"data-shape",s),2&l&&a!==(a=`transform: translate3d(${e[13].x}px, ${e[13].y}px, 0) scale(${e[14].x}, ${e[14].y}); opacity: ${e[16]}`)&&Eo(i,"style",a)},d(t){t&&$o(i),l=!1,Jn(c)}}}function _p(t){let e,i=[],n=new Map,o=t[1];const r=t=>t[12];for(let e=0;e<o.length;e+=1){let s=$p(t,o,e),a=r(s);n.set(a,i[e]=wp(a,s))}return{c(){for(let t=0;t<i.length;t+=1)i[t].c();e=Co()},m(t,n){for(let e=0;e<i.length;e+=1)i[e].m(t,n);xo(t,e,n)},p(t,[s]){51&s&&(o=t[1],i=wr(i,s,r,1,t,o,n,e.parentNode,xr,wp,e,$p))},i:Xn,o:Xn,d(t){for(let e=0;e<i.length;e+=1)i[e].d(t);t&&$o(e)}}}function kp(t,e,i){let n,o,r,{rect:s=null}=e,{visible:a=!1}=e,{style:l}=e;const c=Qs(void 0,{precision:1e-4,stiffness:.2,damping:.4});oo(t,c,(t=>i(8,o=t)));const h=Qs(0,{precision:.001});let u;oo(t,h,(t=>i(9,r=t)));const d=Vo();return t.$$set=t=>{"rect"in t&&i(6,s=t.rect),"visible"in t&&i(7,a=t.visible),"style"in t&&i(0,l=t.style)},t.$$.update=()=>{128&t.$$.dirty&&c.set(a?1:.5),128&t.$$.dirty&&h.set(a?1:0),832&t.$$.dirty&&i(1,n=Object.keys(up).map(((t,e)=>{const i=up[t],n=xp[i](s),a=1===i.length?"edge":"corner",l="corner"===a;return{key:i,type:a,scale:{x:/^(t|b)$/.test(i)?s.width:l?Qr(o,.5,1.25):1,y:/^(r|l)$/.test(i)?s.height:l?Qr(o,.5,1.25):1},translate:{x:n.x,y:n.y},opacity:r}})))},[l,n,c,h,(t,e)=>({detail:i})=>{u&&e!==u||"resizestart"!==t&&void 0===u||("resizestart"===t&&(u=e),"resizeend"===t&&(u=void 0),d(t,{direction:e,translation:i&&i.translation}))},t=>({detail:e})=>{d("resizestart",{direction:t,translation:{x:0,y:0}}),d("resizemove",{direction:t,translation:e}),d("resizeend",{direction:t,translation:{x:0,y:0}})},s,a,o,r]}class Sp extends Er{constructor(t){super(),Pr(this,t,kp,_p,eo,{rect:6,visible:7,style:0})}}var Cp=t=>{function e(e,i){t.dispatchEvent(new CustomEvent(e,{detail:i}))}const i=i=>{i.preventDefault(),t.addEventListener("gesturechange",n),t.addEventListener("gestureend",o),e("gesturedown")},n=t=>{t.preventDefault(),e("gestureupdate",t.scale)},o=t=>{e("gestureup",t.scale),t.preventDefault(),r()},r=()=>{t.removeEventListener("gesturechange",n),t.removeEventListener("gestureend",o)};return t.addEventListener("gesturestart",i),{destroy:()=>{r(),t.removeEventListener("gesturestart",i)}}},Tp=t=>Q(t.clientX,t.clientY),Mp=(t,e,i)=>{const n=Tp(t);return ht(ht(n,e),i)},Pp={[dp]:fp,[pp]:mp,[fp]:dp,[mp]:pp,[gp]:vp,[yp]:bp,[vp]:gp,[bp]:yp},Ep={[dp]:[.5,0],[pp]:[1,.5],[fp]:[.5,1],[mp]:[0,.5],[gp]:[0,0],[yp]:[1,0],[vp]:[1,1],[bp]:[0,1]},Ip=t=>{const e=t===mp||t===pp,i=t===dp||t===fp;return[t===pp||t===yp||t===vp,t===mp||t===bp||t===gp,t===dp||t===yp||t===gp,t===fp||t===vp||t===bp,e,i,e||i]};const Ap=(t,e,i,n)=>{const{aspectRatio:o,minSize:r,maxSize:s}=n,a=e===pp||e===yp||e===vp,l=e===mp||e===bp||e===gp,c=e===dp||e===yp||e===gp,h=e===fp||e===vp||e===bp,u=e===mp||e===pp,d=e===dp||e===fp,p=zt(i);a?(p.x=t.x,p.width-=t.x):l&&(p.width=t.x),h?(p.y=t.y,p.height-=t.y):c&&(p.height=t.y);const f=((t,e)=>Ot(0,0,t,e))(Math.min(p.width,s.width),Math.min(p.height,s.height));if(o)if(u){const e=Math.min(t.y,i.height-t.y);f.height=Math.min(2*e,f.height)}else if(d){const e=Math.min(t.x,i.width-t.x);f.width=Math.min(2*e,f.width)}const m=o?wt(oe(f,o)):f,g=o?wt(ne(Bt(r),o)):r;let y,v,b,x;a?y=t.x:l&&(v=t.x),h?b=t.y:c&&(x=t.y),a?v=y+g.width:l&&(y=v-g.width),h?x=b+g.height:c&&(b=x-g.height),u?(b=t.y-.5*g.height,x=t.y+.5*g.height):d&&(y=t.x-.5*g.width,v=t.x+.5*g.width);const $=Ht([Q(y,b),Q(v,x)]);return a?v=y+m.width:l&&(y=v-m.width),h?x=b+m.height:c&&(b=x-m.height),u?(b=t.y-.5*m.height,x=t.y+.5*m.height):d&&(y=t.x-.5*m.width,v=t.x+.5*m.width),{inner:$,outer:Ht([Q(y,b),Q(v,x)])}};var Dp=(t,e,i={})=>{const{target:n,translate:o}=e,{aspectRatio:r}=i,s=Ep[Pp[n]],a=ct(zt(t),Q(s[0]*t.width,s[1]*t.height)),l=Ep[n],c=ct(zt(t),Q(l[0]*t.width,l[1]*t.height)),[h,u,d,p,f,m,g]=Ip(n);let y=o.x,v=o.y;f?v=0:m&&(y=0);let[b,x,$,w]=re(t);if(h?w=a.x:u&&(x=a.x),p?b=a.y:d&&($=a.y),h?x=c.x+y:u&&(w=c.x+y),p?$=c.y+v:d&&(b=c.y+v),r)if(g){let t=x-w,e=$-b;f?(e=t/r,b=a.y-.5*e,$=a.y+.5*e):m&&(t=e*r,w=a.x-.5*t,x=a.x+.5*t)}else{const t=Q(c.x+y-a.x,c.y+v-a.y);n===yp?(t.x=Math.max(0,t.x),t.y=Math.min(0,t.y)):n===vp?(t.x=Math.max(0,t.x),t.y=Math.max(0,t.y)):n===bp?(t.x=Math.min(0,t.x),t.y=Math.max(0,t.y)):n===gp&&(t.x=Math.min(0,t.x),t.y=Math.min(0,t.y));const e=ot(t),i=Q(r,1),o=ut(rt(i),e);n===yp?(x=a.x+o.x,b=a.y-o.y):n===vp?(x=a.x+o.x,$=a.y+o.y):n===bp?(w=a.x-o.x,$=a.y+o.y):n===gp&&(w=a.x-o.x,b=a.y-o.y)}return Yt(w,b,x-w,$-b)},Rp=t=>180*t/Math.PI;function Lp(t){let e,i,n;return i=new ap({props:{elasticity:t[5],min:t[7],max:t[8],value:t[12],valueMin:t[0],valueMax:t[1],labelReset:t[6],base:t[11],valueLabel:Math.round(Rp(t[12]))+"В°",oninputstart:t[2],oninputmove:t[14],oninputend:t[15]}}),{c(){e=wo("div"),Cr(i.$$.fragment),Eo(e,"class","PinturaImageRotator")},m(t,o){xo(t,e,o),Tr(i,e,null),n=!0},p(t,[e]){const n={};32&e&&(n.elasticity=t[5]),128&e&&(n.min=t[7]),256&e&&(n.max=t[8]),4096&e&&(n.value=t[12]),1&e&&(n.valueMin=t[0]),2&e&&(n.valueMax=t[1]),64&e&&(n.labelReset=t[6]),2048&e&&(n.base=t[11]),4096&e&&(n.valueLabel=Math.round(Rp(t[12]))+"В°"),4&e&&(n.oninputstart=t[2]),1544&e&&(n.oninputmove=t[14]),1552&e&&(n.oninputend=t[15]),i.$set(n)},i(t){n||(mr(i.$$.fragment,t),n=!0)},o(t){gr(i.$$.fragment,t),n=!1},d(t){t&&$o(e),Mr(i)}}}function Op(t,e,i){let n,o,r,s,a,l;const c=Math.PI/2,h=Math.PI/4;let{rotation:u}=e,{valueMin:d}=e,{valueMax:p}=e,{oninputstart:m=f}=e,{oninputmove:g=f}=e,{oninputend:y=f}=e,{elasticity:v=0}=e,{labelReset:b}=e;return t.$$set=t=>{"rotation"in t&&i(13,u=t.rotation),"valueMin"in t&&i(0,d=t.valueMin),"valueMax"in t&&i(1,p=t.valueMax),"oninputstart"in t&&i(2,m=t.oninputstart),"oninputmove"in t&&i(3,g=t.oninputmove),"oninputend"in t&&i(4,y=t.oninputend),"elasticity"in t&&i(5,v=t.elasticity),"labelReset"in t&&i(6,b=t.labelReset)},t.$$.update=()=>{384&t.$$.dirty&&i(11,r=n+.5*(o-n)),8192&t.$$.dirty&&i(9,s=Math.sign(u)),8192&t.$$.dirty&&i(10,a=Math.round(Math.abs(u)/c)*c),9728&t.$$.dirty&&i(12,l=u-s*a)},i(7,n=1e-9-h),i(8,o=h-1e-9),[d,p,m,g,y,v,b,n,o,s,a,r,l,u,t=>g(s*a+t),t=>y(s*a+t)]}class zp extends Er{constructor(t){super(),Pr(this,t,Op,Lp,eo,{rotation:13,valueMin:0,valueMax:1,oninputstart:2,oninputmove:3,oninputend:4,elasticity:5,labelReset:6})}}function Fp(t){let e,i,n,o,r;return{c(){e=wo("div"),i=wo("p"),n=ko(t[0]),o=ko(" Г— "),r=ko(t[1]),Eo(e,"class","PinturaImageInfo")},m(t,s){xo(t,e,s),bo(e,i),bo(i,n),bo(i,o),bo(i,r)},p(t,[e]){1&e&&Ao(n,t[0]),2&e&&Ao(r,t[1])},i:Xn,o:Xn,d(t){t&&$o(e)}}}function Bp(t,e,i){let{width:n}=e,{height:o}=e;return t.$$set=t=>{"width"in t&&i(0,n=t.width),"height"in t&&i(1,o=t.height)},[n,o]}class Np extends Er{constructor(t){super(),Pr(this,t,Bp,Fp,eo,{width:0,height:1})}}function Hp(t){let e,i;return e=new Qc({props:{class:"PinturaPresetListFilter",layout:"row",options:t[9],selectedIndex:t[7],onchange:t[10]}}),{c(){Cr(e.$$.fragment)},m(t,n){Tr(e,t,n),i=!0},p(t,i){const n={};512&i&&(n.options=t[9]),128&i&&(n.selectedIndex=t[7]),e.$set(n)},i(t){i||(mr(e.$$.fragment,t),i=!0)},o(t){gr(e.$$.fragment,t),i=!1},d(t){Mr(e,t)}}}function Wp(t){let e,i;return e=new dh({props:{icon:t[0],label:t[1],labelClass:t[2],hideLabel:t[3],options:t[8],selectedIndex:t[4],onchange:t[5],optionMapper:t[6],$$slots:{controls:[Hp]},$$scope:{ctx:t}}}),{c(){Cr(e.$$.fragment)},m(t,n){Tr(e,t,n),i=!0},p(t,[i]){const n={};1&i&&(n.icon=t[0]),2&i&&(n.label=t[1]),4&i&&(n.labelClass=t[2]),8&i&&(n.hideLabel=t[3]),256&i&&(n.options=t[8]),16&i&&(n.selectedIndex=t[4]),32&i&&(n.onchange=t[5]),64&i&&(n.optionMapper=t[6]),262784&i&&(n.$$scope={dirty:i,ctx:t}),e.$set(n)},i(t){i||(mr(e.$$.fragment,t),i=!0)},o(t){gr(e.$$.fragment,t),i=!1},d(t){Mr(e,t)}}}const jp='fill="none" stroke="currentColor"';function Yp(t,i,n){let o,r,s,{icon:a}=i,{label:l}=i,{labelClass:c}=i,{hideLabel:h}=i,{options:u}=i,{selectedIndex:d}=i,{onchange:p}=i,{optionMapper:m}=i,{filter:g="landscape"}=i,{onfilterchange:y=f}=i;const v=(t,e,i,n,o)=>`\n    <rect ${jp} x="${t}" y="${e}" width="${i}" height="${n}" rx="${o}"/>`,b=(t,e)=>`<path ${jp} d="M${t} ${e} l2 2 l3 -4"/>`;return t.$$set=t=>{"icon"in t&&n(0,a=t.icon),"label"in t&&n(1,l=t.label),"labelClass"in t&&n(2,c=t.labelClass),"hideLabel"in t&&n(3,h=t.hideLabel),"options"in t&&n(12,u=t.options),"selectedIndex"in t&&n(4,d=t.selectedIndex),"onchange"in t&&n(5,p=t.onchange),"optionMapper"in t&&n(6,m=t.optionMapper),"filter"in t&&n(11,g=t.filter),"onfilterchange"in t&&n(13,y=t.onfilterchange)},t.$$.update=()=>{6144&t.$$.dirty&&n(8,o=((t,i)=>(t||[]).map((t=>e(t[0])?(t[1]=t[1].map(i),t):i(t))))(u,(t=>e=>{const[i,n,o={}]=e;return Ke(i)&&(o.hidden="landscape"===t?i<1:i>1),[i,n,o]})(g))),2048&t.$$.dirty&&n(7,r="landscape"===g?0:1),128&t.$$.dirty&&n(9,s=[["landscape","Landscape",{hideLabel:!0,icon:v(2,6,19,12,2)+(0===r?b(9,12):"")}],["portrait","Portrait",{hideLabel:!0,icon:v(5,3,13,18,2)+(1===r?b(9,12):"")}]])},[a,l,c,h,d,p,m,r,o,s,t=>{n(11,g=t.value),y(t.value)},g,u,y]}class Vp extends Er{constructor(t){super(),Pr(this,t,Yp,Wp,eo,{icon:0,label:1,labelClass:2,hideLabel:3,options:12,selectedIndex:4,onchange:5,optionMapper:6,filter:11,onfilterchange:13})}}function Up(t){let e,i;return e=new Nh({props:{items:t[8]}}),{c(){Cr(e.$$.fragment)},m(t,n){Tr(e,t,n),i=!0},p(t,i){const n={};256&i[0]&&(n.items=t[8]),e.$set(n)},i(t){i||(mr(e.$$.fragment,t),i=!0)},o(t){gr(e.$$.fragment,t),i=!1},d(t){Mr(e,t)}}}function qp(t){let e,i,n;return i=new hp({props:{$$slots:{default:[Up]},$$scope:{ctx:t}}}),{c(){e=wo("div"),Cr(i.$$.fragment),Eo(e,"slot","header")},m(t,o){xo(t,e,o),Tr(i,e,null),n=!0},p(t,e){const n={};256&e[0]|131072&e[6]&&(n.$$scope={dirty:e,ctx:t}),i.$set(n)},i(t){n||(mr(i.$$.fragment,t),n=!0)},o(t){gr(i.$$.fragment,t),n=!1},d(t){t&&$o(e),Mr(i)}}}function Xp(t){let e,i;return e=new Pl({props:{onclick:t[83],label:t[3].cropLabelButtonRecenter,icon:t[3].cropIconButtonRecenter,class:"PinturaButtonCenter",disabled:!t[10],hideLabel:!0,style:`opacity: ${t[27]}; transform: translate3d(${t[28].x}px, ${t[28].y}px, 0)`}}),{c(){Cr(e.$$.fragment)},m(t,n){Tr(e,t,n),i=!0},p(t,i){const n={};8&i[0]&&(n.label=t[3].cropLabelButtonRecenter),8&i[0]&&(n.icon=t[3].cropIconButtonRecenter),1024&i[0]&&(n.disabled=!t[10]),402653184&i[0]&&(n.style=`opacity: ${t[27]}; transform: translate3d(${t[28].x}px, ${t[28].y}px, 0)`),e.$set(n)},i(t){i||(mr(e.$$.fragment,t),i=!0)},o(t){gr(e.$$.fragment,t),i=!1},d(t){Mr(e,t)}}}function Gp(t){let e,i;return e=new Sp({props:{rect:t[11],visible:t[9],style:t[1]}}),e.$on("resizestart",t[63]),e.$on("resizemove",t[64]),e.$on("resizeend",t[65]),{c(){Cr(e.$$.fragment)},m(t,n){Tr(e,t,n),i=!0},p(t,i){const n={};2048&i[0]&&(n.rect=t[11]),512&i[0]&&(n.visible=t[9]),2&i[0]&&(n.style=t[1]),e.$set(n)},i(t){i||(mr(e.$$.fragment,t),i=!0)},o(t){gr(e.$$.fragment,t),i=!1},d(t){Mr(e,t)}}}function Zp(t){let e,i;return e=new Np({props:{width:Math.round(t[6].width),height:Math.round(t[6].height)}}),{c(){Cr(e.$$.fragment)},m(t,n){Tr(e,t,n),i=!0},p(t,i){const n={};64&i[0]&&(n.width=Math.round(t[6].width)),64&i[0]&&(n.height=Math.round(t[6].height)),e.$set(n)},i(t){i||(mr(e.$$.fragment,t),i=!0)},o(t){gr(e.$$.fragment,t),i=!1},d(t){Mr(e,t)}}}function Kp(t){let e,i,n,o,r,s,a,l,c=t[17]&&t[18]&&Xp(t),h=t[17]&&Gp(t),u=t[16]&&Zp(t);return{c(){e=wo("div"),i=wo("div"),c&&c.c(),n=So(),h&&h.c(),r=So(),u&&u.c(),Eo(i,"class","PinturaStage"),Eo(e,"slot","main")},m(d,p){xo(d,e,p),bo(e,i),c&&c.m(i,null),bo(i,n),h&&h.m(i,null),t[155](i),bo(e,r),u&&u.m(e,null),s=!0,a||(l=[To(i,"measure",t[153]),uo(ha.call(null,i)),To(i,"wheel",(function(){to(t[2]&&t[82])&&(t[2]&&t[82]).apply(this,arguments)}),{passive:!1}),To(i,"interactionstart",t[69]),To(i,"interactionupdate",t[70]),To(i,"interactionrelease",t[72]),To(i,"interactionend",t[71]),uo(o=Il.call(null,i,{drag:!0,pinch:t[2],inertia:!0,shouldStartInteraction:lf,getEventPosition:t[156]})),To(i,"gesturedown",t[79]),To(i,"gestureupdate",t[80]),To(i,"gestureup",t[81]),uo(Cp.call(null,i))],a=!0)},p(r,s){(t=r)[17]&&t[18]?c?(c.p(t,s),393216&s[0]&&mr(c,1)):(c=Xp(t),c.c(),mr(c,1),c.m(i,n)):c&&(pr(),gr(c,1,1,(()=>{c=null})),fr()),t[17]?h?(h.p(t,s),131072&s[0]&&mr(h,1)):(h=Gp(t),h.c(),mr(h,1),h.m(i,null)):h&&(pr(),gr(h,1,1,(()=>{h=null})),fr()),o&&to(o.update)&&32772&s[0]&&o.update.call(null,{drag:!0,pinch:t[2],inertia:!0,shouldStartInteraction:lf,getEventPosition:t[156]}),t[16]?u?(u.p(t,s),65536&s[0]&&mr(u,1)):(u=Zp(t),u.c(),mr(u,1),u.m(e,null)):u&&(pr(),gr(u,1,1,(()=>{u=null})),fr())},i(t){s||(mr(c),mr(h),mr(u),s=!0)},o(t){gr(c),gr(h),gr(u),s=!1},d(i){i&&$o(e),c&&c.d(),h&&h.d(),t[155](null),u&&u.d(),a=!1,Jn(l)}}}function Qp(t){let e,i,n,o;const r=[{class:"PinturaControlList"},{tabs:t[12]},t[21]];let s={$$slots:{default:[Jp,({tab:t})=>({202:t}),({tab:t})=>[0,0,0,0,0,0,t?65536:0]]},$$scope:{ctx:t}};for(let t=0;t<r.length;t+=1)s=Zn(s,r[t]);e=new nl({props:s}),e.$on("select",t[154]);const a=[{class:"PinturaControlPanels"},{panelClass:"PinturaControlPanel"},{panels:t[22]},t[21]];let l={$$slots:{default:[nf,({panel:t})=>({201:t}),({panel:t})=>[0,0,0,0,0,0,t?32768:0]]},$$scope:{ctx:t}};for(let t=0;t<a.length;t+=1)l=Zn(l,a[t]);return n=new ml({props:l}),{c(){Cr(e.$$.fragment),i=So(),Cr(n.$$.fragment)},m(t,r){Tr(e,t,r),xo(t,i,r),Tr(n,t,r),o=!0},p(t,i){const o=2101248&i[0]?_r(r,[r[0],4096&i[0]&&{tabs:t[12]},2097152&i[0]&&kr(t[21])]):{};196608&i[6]&&(o.$$scope={dirty:i,ctx:t}),e.$set(o);const s=6291456&i[0]?_r(a,[a[0],a[1],4194304&i[0]&&{panels:t[22]},2097152&i[0]&&kr(t[21])]):{};117457032&i[0]|163840&i[6]&&(s.$$scope={dirty:i,ctx:t}),n.$set(s)},i(t){o||(mr(e.$$.fragment,t),mr(n.$$.fragment,t),o=!0)},o(t){gr(e.$$.fragment,t),gr(n.$$.fragment,t),o=!1},d(t){Mr(e,t),t&&$o(i),Mr(n,t)}}}function Jp(t){let e,i,n=t[202].label+"";return{c(){e=wo("span"),i=ko(n)},m(t,n){xo(t,e,n),bo(e,i)},p(t,e){65536&e[6]&&n!==(n=t[202].label+"")&&Ao(i,n)},d(t){t&&$o(e)}}}function tf(t){let e,i;return e=new ap({props:{elasticity:t[36]*t[37],base:af,min:t[14],max:sf,valueMin:t[25][0],valueMax:t[25][1],value:t[26],labelReset:t[3].labelReset,valueLabel:Math.round(100*t[26])+"%",oninputstart:t[76],oninputmove:t[77],oninputend:t[78]}}),{c(){Cr(e.$$.fragment)},m(t,n){Tr(e,t,n),i=!0},p(t,i){const n={};16384&i[0]&&(n.min=t[14]),33554432&i[0]&&(n.valueMin=t[25][0]),33554432&i[0]&&(n.valueMax=t[25][1]),67108864&i[0]&&(n.value=t[26]),8&i[0]&&(n.labelReset=t[3].labelReset),67108864&i[0]&&(n.valueLabel=Math.round(100*t[26])+"%"),e.$set(n)},i(t){i||(mr(e.$$.fragment,t),i=!0)},o(t){gr(e.$$.fragment,t),i=!1},d(t){Mr(e,t)}}}function ef(t){let e,i;return e=new zp({props:{elasticity:t[36]*t[37],rotation:t[7],labelReset:t[3].labelReset,valueMin:t[24][0],valueMax:t[24][1],oninputstart:t[66],oninputmove:t[67],oninputend:t[68]}}),{c(){Cr(e.$$.fragment)},m(t,n){Tr(e,t,n),i=!0},p(t,i){const n={};128&i[0]&&(n.rotation=t[7]),8&i[0]&&(n.labelReset=t[3].labelReset),16777216&i[0]&&(n.valueMin=t[24][0]),16777216&i[0]&&(n.valueMax=t[24][1]),e.$set(n)},i(t){i||(mr(e.$$.fragment,t),i=!0)},o(t){gr(e.$$.fragment,t),i=!1},d(t){Mr(e,t)}}}function nf(t){let e,i,n,o;const r=[ef,tf],s=[];function a(t,e){return t[201]===t[88]+"-rotation"?0:t[201]===t[88]+"-zoom"?1:-1}return~(e=a(t))&&(i=s[e]=r[e](t)),{c(){i&&i.c(),n=Co()},m(t,i){~e&&s[e].m(t,i),xo(t,n,i),o=!0},p(t,o){let l=e;e=a(t),e===l?~e&&s[e].p(t,o):(i&&(pr(),gr(s[l],1,1,(()=>{s[l]=null})),fr()),~e?(i=s[e],i?i.p(t,o):(i=s[e]=r[e](t),i.c()),mr(i,1),i.m(n.parentNode,n)):i=null)},i(t){o||(mr(i),o=!0)},o(t){gr(i),o=!1},d(t){~e&&s[e].d(t),t&&$o(n)}}}function of(t){let e,i,n=t[20]&&Qp(t);return{c(){e=wo("div"),n&&n.c(),Eo(e,"slot","footer"),Eo(e,"style",t[23])},m(t,o){xo(t,e,o),n&&n.m(e,null),i=!0},p(t,o){t[20]?n?(n.p(t,o),1048576&o[0]&&mr(n,1)):(n=Qp(t),n.c(),mr(n,1),n.m(e,null)):n&&(pr(),gr(n,1,1,(()=>{n=null})),fr()),(!i||8388608&o[0])&&Eo(e,"style",t[23])},i(t){i||(mr(n),i=!0)},o(t){gr(n),i=!1},d(t){t&&$o(e),n&&n.d()}}}function rf(t){let e,i,n;function o(e){t[157](e)}let r={hasHeader:t[19],$$slots:{footer:[of],main:[Kp],header:[qp]},$$scope:{ctx:t}};return void 0!==t[13]&&(r.root=t[13]),e=new np({props:r}),Zo.push((()=>Sr(e,"root",o))),e.$on("measure",t[158]),{c(){Cr(e.$$.fragment)},m(t,i){Tr(e,t,i),n=!0},p(t,n){const o={};524288&n[0]&&(o.hasHeader=t[19]),536338430&n[0]|131072&n[6]&&(o.$$scope={dirty:n,ctx:t}),!i&&8192&n[0]&&(i=!0,o.root=t[13],or((()=>i=!1))),e.$set(o)},i(t){n||(mr(e.$$.fragment,t),n=!0)},o(t){gr(e.$$.fragment,t),n=!1},d(t){Mr(e,t)}}}const sf=1,af=0,lf=(t,e)=>t.target===e;function cf(t,e,i){let n,o,r,s,a,l,c,h,u,d,p,f,m,g,y,v,b,x,$,w,_,k,S,C,T,M,P,E,I,D,R,L,O,z,F,B,N,H,W,V,q,G,Z,K,J,tt,nt,st,lt,dt,pt,ft,mt,gt,yt,vt,bt,$t,kt,Ct,At,Dt,Rt,Lt,Ot,Ft,Nt,Ht,Wt=Xn,Xt=()=>(Wt(),Wt=io(Qt,(t=>i(9,G=t))),Qt);t.$$.on_destroy.push((()=>Wt()));let{isActive:Qt}=e;Xt();let{stores:Jt}=e,{cropImageSelectionCornerStyle:te="circle"}=e,{cropWillRenderImageSelectionGuides:se=((t,e)=>{const i="rotate"==t;return{rows:i?5:3,cols:i?5:3,opacity:.25*e}})}=e,{cropAutoCenterImageSelectionTimeout:le}=e,{cropEnableZoomMatchImageAspectRatio:ce=!0}=e,{cropEnableRotateMatchImageAspectRatio:he="never"}=e,{cropEnableRotationInput:ue=!0}=e,{cropEnableZoom:de=!0}=e,{cropEnableZoomInput:pe=!0}=e,{cropEnableZoomAutoHide:fe=!0}=e,{cropEnableImageSelection:me=!0}=e,{cropEnableInfoIndicator:ge=!1}=e,{cropEnableZoomTowardsWheelPosition:ye=!0}=e,{cropEnableLimitWheelInputToCropSelection:ve=!0}=e,{cropEnableCenterImageSelection:be=!0}=e,{cropEnableButtonRotateLeft:xe=!0}=e,{cropEnableButtonRotateRight:$e=!1}=e,{cropEnableButtonFlipHorizontal:we=!0}=e,{cropEnableButtonFlipVertical:_e=!1}=e,{cropSelectPresetOptions:ke}=e,{cropEnableSelectPreset:Se=!0}=e,{cropEnableFilterMatchAspectRatio:Ce=!0}=e,{cropSelectPresetFilter:Te=!1}=e,{cropEnableButtonToggleCropLimit:Me=!1}=e,{cropWillRenderTools:Pe=Y}=e,{cropActiveTransformTool:Ee="rotation"}=e,{cropMinimizeToolbar:Ie="auto"}=e,{locale:Ae={}}=e,De="idle";const Re=Dr();oo(t,Re,(t=>i(118,I=t)));const Le=()=>void 0===E,Oe=t=>1/t,ze=t=>{Ce&&Te!==t&&(i(90,Te=t),E&&1!==E&&Fe()&&ho(vi,E=Oe(E),E))},Fe=()=>{if(1===E||!n)return!1;const t=Oe(E);return!!wc(I).find((([e])=>e===t))},Be=(t,e,i)=>X(i)?e.width===Math.round(t.height)||e.height===Math.round(t.width):e.width===Math.round(t.width)||e.height===Math.round(t.height),Ne=t=>{if("never"!==he&&(Le()||"always"===he&&Fe())&&((t,e,i)=>{const n=It(Pt(xt(e),i),(t=>Math.abs(Math.round(t)))),o=Mt(n),r=Vt(t);return at(o,r)})(D,R,L)&&Be(D,R,L)){ho(ri,L+=t,L);const e=X(L),i=e?R.height:R.width,n=e?R.width:R.height;ho(fi,D=Yt(0,0,i,n),D),Le()||ho(vi,E=j(i,n),E)}else ho(ri,L+=t,L)},{history:He,env:We,isInteracting:je,isInteractingFraction:Ye,rootRect:Ve,stageRect:Ue,utilRect:qe,rootLineColor:Xe,animation:Ge,elasticityMultiplier:Ze,rangeInputElasticity:Ke,presentationScalar:Qe,utilTools:Je,imagePreviewModifiers:ei,imageOutlineOpacity:ii,imageFlipX:ni,imageFlipY:oi,imageRotation:ri,imageRotationRange:si,imageOutputSize:ai,imageSelectionRect:li,imageSelectionRectSnapshot:ci,imageSelectionRectIntent:hi,imageSelectionRectPresentation:ui,imageCropRectIntent:di,imageCropRectOrigin:pi,imageCropRect:fi,imageCropMinSize:mi,imageCropMaxSize:gi,imageCropRange:yi,imageCropAspectRatio:vi,imageCropRectAspectRatio:bi,imageCropLimitToImage:xi,imageSize:$i,imageScalar:wi,imageOverlayMarkup:_i,framePadded:ki}=Jt;oo(t,We,(t=>i(128,V=t))),oo(t,je,(t=>i(130,Z=t))),oo(t,Ve,(t=>i(15,mt=t))),oo(t,Ue,(t=>i(135,gt=t))),oo(t,qe,(t=>i(134,lt=t))),oo(t,Ge,(t=>i(151,Dt=t))),oo(t,Qe,(t=>i(133,tt=t))),oo(t,Je,(t=>i(169,q=t))),oo(t,ei,(t=>i(146,kt=t))),oo(t,ni,(t=>i(122,F=t))),oo(t,oi,(t=>i(121,z=t))),oo(t,ri,(t=>i(7,L=t))),oo(t,si,(t=>i(24,Lt=t))),oo(t,ai,(t=>i(168,N=t))),oo(t,li,(t=>i(132,J=t))),oo(t,ci,(t=>i(131,K=t))),oo(t,hi,(t=>i(171,st=t))),oo(t,ui,(t=>i(138,vt=t))),oo(t,di,(t=>i(173,pt=t))),oo(t,pi,(t=>i(172,dt=t))),oo(t,fi,(t=>i(6,D=t))),oo(t,mi,(t=>i(126,H=t))),oo(t,gi,(t=>i(170,nt=t))),oo(t,yi,(t=>i(174,ft=t))),oo(t,vi,(t=>i(167,E=t))),oo(t,xi,(t=>i(127,W=t))),oo(t,$i,(t=>i(119,R=t))),oo(t,wi,(t=>i(144,bt=t))),oo(t,_i,(t=>i(176,Ct=t))),oo(t,ki,(t=>i(145,$t=t)));const Si=Dr({});let Ci,Ti,Pi;oo(t,Si,(t=>i(120,O=t)));const Ei=(t,e)=>{const i={target:t,translate:e};let n,o=Dp(K,i,{aspectRatio:E});const r=wt(Gt(zt(o),tt));if(Gr(R,L),r.width<H.width||r.height<H.height){const i=e.y<0,o=e.x>0,s=e.x<0,a=e.y>0,l="t"===t&&i||"r"===t&&o||"b"===t&&a||"l"===t&&s||"tr"===t&&(o||i)||"tl"===t&&(s||i)||"br"===t&&(o||a)||"bl"===t&&(s||a),c=Kt(r),h=Zr(R,L,c);if(l&&(h.width<H.width||h.height<H.height)){if(0!==L){const t=Math.sign(L),e=Math.round(Math.abs(L)/U)*U,i=L-t*e,n=e/U%2==1,o=n?R.height:R.width,s=n?R.width:R.height,a=Math.abs(i),l=Math.sin(a),c=Math.cos(a);if(r.width<H.width){r.width=H.width;const t=o-(c*r.width+l*r.height),e=s-(l*r.width+c*r.height);t<e?r.height=(o-c*r.width)/l:e<t&&(r.height=(s-l*r.width)/c)}if(r.height<H.height){r.height=H.height;const t=o-(c*r.width+l*r.height),e=s-(l*r.width+c*r.height);t<e?r.width=(o-l*r.height)/c:e<t&&(r.width=(s-c*r.height)/l)}}else r.width<H.width&&(r.width=H.width,r.height=R.height),r.height<H.height&&(r.height=H.height,r.width=R.width);n=Kt(r)}}return n&&(o=Dp(K,i,{aspectRatio:n||E})),{boundsLimited:((t,e,i,n={})=>{const{target:o,translate:r}=e,{aspectRatio:s,minSize:a,maxSize:l}=n,c=Ep[Pp[o]],h=ct(Q(t.x,t.y),Q(c[0]*t.width,c[1]*t.height)),u=Ep[o],d=ct(zt(t),Q(u[0]*t.width,u[1]*t.height)),[p,f,m,g,y,v,b]=Ip(o);let x=r.x,$=r.y;y?$=0:v&&(x=0);const w=Ap(h,o,i,{aspectRatio:s,minSize:a,maxSize:l});let[_,k,S,C]=re(t);if(p?C=h.x:f&&(k=h.x),g?_=h.y:m&&(S=h.y),p){const t=w.inner.x+w.inner.width,e=w.outer.x+w.outer.width;k=Qr(d.x+x,t,e)}else if(f){const t=w.outer.x,e=w.inner.x;C=Qr(d.x+x,t,e)}if(g){const t=w.inner.y+w.inner.height,e=w.outer.y+w.outer.height;S=Qr(d.y+$,t,e)}else if(m){const t=w.outer.y,e=w.inner.y;_=Qr(d.y+$,t,e)}if(s)if(b){let t=k-C,e=S-_;y?(e=t/s,_=h.y-.5*e,S=h.y+.5*e):v&&(t=e*s,C=h.x-.5*t,k=h.x+.5*t)}else{const t=Q(d.x+x-h.x,d.y+$-h.y);o===yp?(t.x=Math.max(0,t.x),t.y=Math.min(0,t.y)):o===vp?(t.x=Math.max(0,t.x),t.y=Math.max(0,t.y)):o===bp?(t.x=Math.min(0,t.x),t.y=Math.max(0,t.y)):o===gp&&(t.x=Math.min(0,t.x),t.y=Math.min(0,t.y));const e=ot(t),i=ot(Q(w.inner.width,w.inner.height)),n=ot(Q(w.outer.width,w.outer.height)),r=Qr(e,i,n),a=Q(s,1),l=ut(rt(a),r);o===yp?(k=h.x+l.x,_=h.y-l.y):o===vp?(k=h.x+l.x,S=h.y+l.y):o===bp?(C=h.x-l.x,S=h.y+l.y):o===gp&&(C=h.x-l.x,_=h.y-l.y)}return Yt(C,_,k-C,S-_)})(K,i,lt,{aspectRatio:E||n,minSize:Ti,maxSize:Pi}),boundsIntent:o}};let Ii,Ai;const Di=({translation:t,scalar:e})=>{const i=Math.min(J.width/D.width,J.height/D.height),n=ut(et(t),1/i);let o;if(Ai){const e=ht(et(Ai),t);Ai=t,o=Ut(zt(D),e)}else o=Ut(zt(Ii),it(et(n))),void 0!==e&&qt(o,1/e);ho(di,pt=o,pt),ho(fi,D=o,D)},Ri=Rr([yi,fi],(([t,e],i)=>{if(!e)return;const[n,o]=t,r=Kt(e);i([wt(ae(ne(n,r),Mi)),wt(ae(oe(o,r),Mi))])}));oo(t,Ri,(t=>i(175,yt=t)));const Li=Rr([$i,xi,mi,gi,yi,ri],(([t,e,i,n,o,r],s)=>{if(!t)return;const a=o[0],l=o[1];let c,h;e?(c=((t,e,i)=>X(i)?1-1/Math.min(t.height/e.width,t.width/e.height):1-1/Math.min(t.width/e.width,t.height/e.height))(t,l,r),h=Math.min(a.width/i.width,a.height/i.height)):(h=1,c=-1),s([Mi(c),Mi(h)])}));oo(t,Li,(t=>i(25,Ot=t)));const Oi=Rr([$i,fi,yi,ri],(([t,e,i,n],o)=>{if(!t||!e)return o(0);let r;const s=i[0],a=i[1],l=e.width,c=e.height,h=Kt(e),u=X(n)?St(t.height,t.width):t,d=oe(u,h);if(l<=d.width||c<=d.height){const t=d.width-s.width,e=d.height-s.height;r=0===t||0===e?1:1-Math.min((l-s.width)/t,(c-s.height)/e)}else{const t=a.width-d.width,e=a.height-d.height,i=oe({width:t,height:e},h);r=-Math.min((l-d.width)/i.width,(c-d.height)/i.height)}o(r)}));oo(t,Oi,(t=>i(26,Ft=t)));const zi=t=>{const e=Kt(Ii);let i,n,o;const r=X(L)?St(R.height,R.width):R,s=oe(r,e);if(t>=0){const r=s.width-ft[0].width,a=s.height-ft[0].height;i=s.width-r*t,n=s.height-a*t,o=ne({width:i,height:n},e)}else{const r=ft[1].width-s.width,a=ft[1].height-s.height;i=s.width+r*-t,n=s.height+a*-t,o=oe({width:i,height:n},e)}i=o.width,n=o.height;const a=Ii.x+.5*Ii.width-.5*i,l=Ii.y+.5*Ii.height-.5*n;ho(fi,D={x:a,y:l,width:i,height:n},D)};let Fi;const Bi=t=>{const e=qt(zt(Fi),1/t);ho(di,pt=e,pt),ho(fi,D=e,D)};let Ni;const Hi=Vo(),Wi=()=>{Hi("measure",zt(lt))};let ji;const Yi=Qs(0,{precision:1e-4});oo(t,Yi,(t=>i(27,Nt=t)));const Vi=Qs();oo(t,Vi,(t=>i(28,Ht=t)));const Ui=Rr([vi,ai,Re],(([t,e,i],o)=>{if(!n)return;const r=wc(i),s=[...r].map((t=>t[0])).sort(((t,e)=>ti(t[0])&&!ti(e[0])?1:-1)).find((i=>{if(ti(i)&&e){const[n,o]=i,r=e.width===n&&e.height===o,s=t===j(n,o);return r&&s}return i===t}));o(r.map((t=>t[0])).findIndex((t=>ti(t)?is(t,s):t===s)))}));oo(t,Ui,(t=>i(124,B=t)));const qi=(t,e)=>{if(!n||-1===t||void 0===t)return;const i=wc(e)[t][0];return i?ti(i)?j(i[0],i[1]):i:void 0},Xi=Rr([Xe,ui,Ye],(([t,e,i],n)=>{const{rows:o,cols:r,opacity:s}=se(De,i);if(!e||s<=0)return n([]);const{x:a,y:l,width:c,height:h}=e,u=c/r,d=h/o,p=[];for(let e=1;e<=o-1;e++){const i=l+d*e;p.push({id:"image-selection-guide-row-"+e,points:[Q(a,i),Q(a+c,i)],opacity:s,strokeWidth:1,strokeColor:t})}for(let e=1;e<=r-1;e++){const i=a+u*e;p.push({id:"image-selection-guide-col-"+e,points:[Q(i,l),Q(i,l+h)],opacity:s,strokeWidth:1,strokeColor:t})}n(p)}));oo(t,Xi,(t=>i(147,At=t)));const Gi="crop-"+A();let Zi,Ki,Qi=Gi+"-"+(ue?Ee:"zoom"),Ji=Qi;const tn=Qs(Dt?20:0);return oo(t,tn,(t=>i(152,Rt=t))),t.$$set=t=>{"isActive"in t&&Xt(i(0,Qt=t.isActive)),"stores"in t&&i(92,Jt=t.stores),"cropImageSelectionCornerStyle"in t&&i(1,te=t.cropImageSelectionCornerStyle),"cropWillRenderImageSelectionGuides"in t&&i(93,se=t.cropWillRenderImageSelectionGuides),"cropAutoCenterImageSelectionTimeout"in t&&i(94,le=t.cropAutoCenterImageSelectionTimeout),"cropEnableZoomMatchImageAspectRatio"in t&&i(95,ce=t.cropEnableZoomMatchImageAspectRatio),"cropEnableRotateMatchImageAspectRatio"in t&&i(96,he=t.cropEnableRotateMatchImageAspectRatio),"cropEnableRotationInput"in t&&i(97,ue=t.cropEnableRotationInput),"cropEnableZoom"in t&&i(2,de=t.cropEnableZoom),"cropEnableZoomInput"in t&&i(98,pe=t.cropEnableZoomInput),"cropEnableZoomAutoHide"in t&&i(99,fe=t.cropEnableZoomAutoHide),"cropEnableImageSelection"in t&&i(100,me=t.cropEnableImageSelection),"cropEnableInfoIndicator"in t&&i(101,ge=t.cropEnableInfoIndicator),"cropEnableZoomTowardsWheelPosition"in t&&i(102,ye=t.cropEnableZoomTowardsWheelPosition),"cropEnableLimitWheelInputToCropSelection"in t&&i(103,ve=t.cropEnableLimitWheelInputToCropSelection),"cropEnableCenterImageSelection"in t&&i(104,be=t.cropEnableCenterImageSelection),"cropEnableButtonRotateLeft"in t&&i(105,xe=t.cropEnableButtonRotateLeft),"cropEnableButtonRotateRight"in t&&i(106,$e=t.cropEnableButtonRotateRight),"cropEnableButtonFlipHorizontal"in t&&i(107,we=t.cropEnableButtonFlipHorizontal),"cropEnableButtonFlipVertical"in t&&i(108,_e=t.cropEnableButtonFlipVertical),"cropSelectPresetOptions"in t&&i(109,ke=t.cropSelectPresetOptions),"cropEnableSelectPreset"in t&&i(110,Se=t.cropEnableSelectPreset),"cropEnableFilterMatchAspectRatio"in t&&i(111,Ce=t.cropEnableFilterMatchAspectRatio),"cropSelectPresetFilter"in t&&i(90,Te=t.cropSelectPresetFilter),"cropEnableButtonToggleCropLimit"in t&&i(112,Me=t.cropEnableButtonToggleCropLimit),"cropWillRenderTools"in t&&i(113,Pe=t.cropWillRenderTools),"cropActiveTransformTool"in t&&i(114,Ee=t.cropActiveTransformTool),"cropMinimizeToolbar"in t&&i(115,Ie=t.cropMinimizeToolbar),"locale"in t&&i(3,Ae=t.locale)},t.$$.update=()=>{65536&t.$$.dirty[3]&&i(117,n=ke&&Array.isArray(ke)&&ke.length),16842752&t.$$.dirty[3]&&Re.set(n?ke:[]),16&t.$$.dirty[4]&&i(129,p="overlay"===V.layoutMode),131072&t.$$.dirty[3]|32&t.$$.dirty[4]&&i(123,$=Se&&!p),1280&t.$$.dirty[4]&&i(139,l=lt&&J&&ee(lt,J)),33024&t.$$.dirty[4]&&i(140,c=!(!J||!l)),98560&t.$$.dirty[4]&&i(125,h=c&&Zt(J,l,(t=>Mi(t,5)))),136&t.$$.dirty[0]|268435456&t.$$.dirty[2]|2132340736&t.$$.dirty[3]|31&t.$$.dirty[4]&&i(8,o=O&&Pe([xe&&["Button","rotate-left",{label:Ae.cropLabelButtonRotateLeft,labelClass:"PinturaToolbarContentWide",icon:Ae.cropIconButtonRotateLeft,onclick:()=>{Ne(-Math.PI/2),He.write()}}],$e&&["Button","rotate-right",{label:Ae.cropLabelButtonRotateRight,labelClass:"PinturaToolbarContentWide",icon:Ae.cropIconButtonRotateRight,onclick:()=>{Ne(Math.PI/2),He.write()}}],we&&["Button","flip-horizontal",{label:Ae.cropLabelButtonFlipHorizontal,labelClass:"PinturaToolbarContentWide",icon:Ae.cropIconButtonFlipHorizontal,onclick:()=>{X(L)?ho(oi,z=!z,z):ho(ni,F=!F,F),He.write()}}],_e&&["Button","flip-vertical",{label:Ae.cropLabelButtonFlipVertical,labelClass:"PinturaToolbarContentWide",icon:Ae.cropIconButtonFlipVertical,onclick:()=>{X(L)?ho(ni,F=!F,F):ho(oi,z=!z,z),He.write()}}],$&&n&&[!1===Te?"Dropdown":Vp,"select-preset",{icon:kc(Ae.cropIconSelectPreset,Ae,qi(B,I)),label:Ae.cropLabelSelectPreset,labelClass:"PinturaToolbarContentWide",options:I,filter:Te,onfilterchange:ze,selectedIndex:B,onchange:({value:t})=>{ti(t)?(ho(vi,E=j(t[0],t[1]),E),ho(ai,N=_t(t),N)):ho(vi,E=t,E),h&&Wi(),He.write()},optionMapper:t=>{let e=!1;const i=ti(t.value)?t.value[0]/t.value[1]:t.value;if(i){const t=Zr(R,L,i);e=t.width<H.width||t.height<H.height}return t.icon=((t,e={})=>{const{width:i=24,height:n=24,bounds:o=16,radius:r=3}=e;let s,a,l,c,h=ti(t)?j(t[0],t[1]):t,u=!!h;return h=u?h:1,l=h>1?o:h*o,c=l/h,s=Math.round(.5*(i-l)),a=Math.round(.5*(n-c)),`<rect fill="${u?"currentColor":"none"}" stroke="${u?"none":"currentColor"}" stroke-width="${i/16}" stroke-dasharray="${[i/12,i/6].join(" ")}" x="${s}" y="${a}" width="${l}" height="${c}" rx="${r}"/>`})(t.value,{bounds:14}),{...t,disabled:e}}}],Me&&["Dropdown","select-crop-limit",{icon:kc(Ae.cropIconCropBoundary,Ae,W),label:Ae.cropLabelCropBoundary,labelClass:"PinturaToolbarContentWide",onchange:({value:t})=>{ho(xi,W=t,W),He.write()},options:[[!0,Ae.cropLabelCropBoundaryEdge,{icon:kc(Ae.cropIconCropBoundary,Ae,!0)}],[!1,Ae.cropLabelCropBoundaryNone,{icon:kc(Ae.cropIconCropBoundary,Ae,!1)}]]}]].filter(Boolean),V,(()=>Si.set({}))).filter(Boolean)),768&t.$$.dirty[0]|4194304&t.$$.dirty[3]|48&t.$$.dirty[4]&&ho(Je,q=G&&("always"===Ie||"short"===V.verticalSpace||p)?o.map((([t,e,i])=>Array.isArray(i)?[t,e,i]:[t,e,{...i,hideLabel:!0}])):[],q),512&t.$$.dirty[0]&&G&&ii.set(1),8&t.$$.dirty[4]&&i(14,r=W?0:-1),3072&t.$$.dirty[4]&&i(136,s=lt&&Q(-(gt.x-lt.x),-(gt.y-lt.y))),20480&t.$$.dirty[4]&&i(137,a=vt&&Q(rc(vt.x+.5*vt.width+s.x),rc(vt.y+.5*vt.height+s.y))),128&t.$$.dirty[4]&&i(141,u=null!=K),33792&t.$$.dirty[4]&&i(142,d=lt&&l&&(l.height===lt.height||l.width===lt.width)),1311232&t.$$.dirty[4]&&i(143,f=!d&&tt<1&&bt<1),720898&t.$$.dirty[4]&&i(10,m=c&&!u&&(!h||f)),64&t.$$.dirty[0]|256&t.$$.dirty[3]|32&t.$$.dirty[4]&&i(16,g=ge&&!!D&&!p),20480&t.$$.dirty[4]&&i(11,b=vt&&s&&{x:vt.x+s.x,y:vt.y+s.y,width:vt.width,height:vt.height}),2048&t.$$.dirty[0]|128&t.$$.dirty[3]|32&t.$$.dirty[4]&&i(17,y=me&&!!b&&!p),2050&t.$$.dirty[3]|8192&t.$$.dirty[4]&&i(18,v=be&&!!a&&!le),1024&t.$$.dirty[0]|8388610&t.$$.dirty[3]|64&t.$$.dirty[4]&&m&&le&&!Z&&(clearTimeout(ji),i(116,ji=setTimeout(Wi,le))),8388608&t.$$.dirty[3]|64&t.$$.dirty[4]&&Z&&clearTimeout(ji),1024&t.$$.dirty[0]&&Yi.set(m?1:0),8192&t.$$.dirty[4]&&Vi.set(a),512&t.$$.dirty[0]|6291456&t.$$.dirty[4]&&(G&&!$t?ho(ei,kt.crop={maskOpacity:.85,maskMarkupOpacity:.85},kt):delete kt.crop),8388608&t.$$.dirty[4]&&At&&(()=>{const t=Ct.filter((t=>!/^image\-selection\-guide/.test(t.id)));ho(_i,Ct=G?[...t,...At]:t,Ct)})(),16&t.$$.dirty[4]&&i(148,x="short"!==V.verticalSpace),4194304&t.$$.dirty[3]|16777248&t.$$.dirty[4]&&i(19,w=x&&!p&&"always"!==Ie),4&t.$$.dirty[0]|32&t.$$.dirty[3]&&i(149,_=de&&pe),64&t.$$.dirty[3]|50331648&t.$$.dirty[4]&&i(150,k=fe?x&&_:_),16&t.$$.dirty[3]|67108864&t.$$.dirty[4]&&i(20,S=ue||k),67108864&t.$$.dirty[4]&&(k||i(4,Ji=Qi)),16&t.$$.dirty[0]&&i(21,C={name:Gi,selected:Ji}),8&t.$$.dirty[0]|16&t.$$.dirty[3]|67108864&t.$$.dirty[4]&&i(12,T=[ue&&{id:Gi+"-rotation",label:Ae.cropLabelTabRotation},k&&{id:Gi+"-zoom",label:Ae.cropLabelTabZoom}].filter(Boolean)),4096&t.$$.dirty[0]&&i(22,M=T.map((t=>t.id))),32&t.$$.dirty[0]|32&t.$$.dirty[4]&&Zi&&!Zi.children.length&&p&&Zi.dispatchEvent(new CustomEvent("measure",{detail:Zi.rect})),512&t.$$.dirty[0]|134217728&t.$$.dirty[4]&&Dt&&tn.set(G?0:20),268435456&t.$$.dirty[4]&&i(23,P=Rt?`transform: translateY(${Rt}px)`:void 0)},[Qt,te,de,Ae,Ji,Zi,D,L,o,G,m,b,T,Ki,r,mt,g,y,v,w,S,C,M,P,Lt,Ot,Ft,Nt,Ht,Re,We,je,Ve,Ue,qe,Ge,Ze,Ke,Qe,Je,ei,ni,oi,ri,si,ai,li,ci,hi,ui,di,pi,fi,mi,gi,yi,vi,xi,$i,wi,_i,ki,Si,()=>{De="select",ho(je,Z=!0,Z),ho(ci,K=zt(J),K),Ci=tt,Ti=Tt(xt(H),Ci),Pi=Tt(xt(nt),Ci)},({detail:t})=>{const{boundsLimited:e,boundsIntent:i}=Ei(t.direction,t.translation);ho(hi,st=i,st),ho(li,J=e,J)},({detail:t})=>{const{boundsLimited:e}=Ei(t.direction,t.translation);ho(je,Z=!1,Z),ho(hi,st=void 0,st),ot(t.translation)&&(ho(li,J=e,J),He.write()),ho(ci,K=void 0,K),De=void 0},()=>{De="rotate",ho(je,Z=!0,Z),ho(pi,dt=zt(D),dt)},t=>{ho(ri,L=t,L)},t=>{ho(je,Z=!1,Z),ho(ri,L=t,L),He.write(),ho(pi,dt=void 0,dt)},()=>{De="pan",Ai=void 0,ho(je,Z=!0,Z),Ii=zt(D)},({detail:t})=>Di(t),({detail:t})=>{ho(je,Z=!1,Z),(ot(t.translation)>0||0!==t.scalar)&&(Di(t),He.write()),ho(di,pt=void 0,pt),Ii=void 0},({detail:t})=>{Ai=t.translation,ho(je,Z=!1,Z)},Ri,Li,Oi,()=>{De="zoom",ho(je,Z=!0,Z),Ii=zt(D)},t=>{zi(t)},t=>{zi(t),He.write(),ho(je,Z=!1,Z),Ii=void 0},()=>{De="zoom",Ii||(Fi=zt(D),ho(je,Z=!0,Z))},({detail:t})=>{Fi&&Bi(t)},({detail:t})=>{Fi&&(ho(je,Z=!1,Z),Bi(t),ho(di,pt=void 0,pt),Fi=void 0,He.write())},t=>{const e=Mp(t,mt,gt);if(ve&&!ie(J,e))return;De="zoom",ho(je,Z=!0,Z),t.preventDefault(),t.stopPropagation();const i=Ol(t),n=1+i/100,o=zt(D),r=1===Math.min(D.width/H.width,D.height/H.height);if(ce&&W){const t=Be(D,R,L);if(Le()&&t&&i>0&&h){ho(je,Z=!1,Z);const t=X(L)?Bt({height:R.width,width:R.height}):Bt(R);if(Zt(o,t))return;if(clearTimeout(Ni),Zt(He.state.crop,t))return;return ho(fi,D=t,D),void He.write()}}let s=Vt(D);if(ye&&i<0&&!r){const t=ht(et(e),J),i=Math.min(J.width/D.width,J.height/D.height),n=qt(zt(J),1.1);s=ie(n,e)?ct(zt(D),ut(t,1/i)):s}let a=qt(zt(D),n,s);Et(yt[1],a)||(a=jt(Vt(a),yt[1])),Et(a,yt[0])||(a=jt(Vt(a),yt[0])),Zt(o,a,Mi)?ho(je,Z=!1,Z):(ho(fi,D=ae(a,(t=>Mi(t,5))),D),ho(je,Z=!1,Z),clearTimeout(Ni),Ni=setTimeout((()=>{He.write()}),500))},Wi,Yi,Vi,Ui,Xi,Gi,tn,Te,"crop",Jt,se,le,ce,he,ue,pe,fe,me,ge,ye,ve,be,xe,$e,we,_e,ke,Se,Ce,Me,Pe,Ee,Ie,ji,n,I,R,O,z,F,$,B,h,H,W,V,p,Z,K,J,tt,lt,gt,s,a,vt,l,c,u,d,f,bt,$t,kt,At,x,_,k,Dt,Rt,function(e){Xo(t,e)},({detail:t})=>i(4,Ji=t),function(t){Zo[t?"unshift":"push"]((()=>{Zi=t,i(5,Zi)}))},t=>Tp(t),function(t){Ki=t,i(13,Ki)},function(e){Xo(t,e)}]}var hf={util:["crop",class extends Er{constructor(t){super(),Pr(this,t,cf,rf,eo,{name:91,isActive:0,stores:92,cropImageSelectionCornerStyle:1,cropWillRenderImageSelectionGuides:93,cropAutoCenterImageSelectionTimeout:94,cropEnableZoomMatchImageAspectRatio:95,cropEnableRotateMatchImageAspectRatio:96,cropEnableRotationInput:97,cropEnableZoom:2,cropEnableZoomInput:98,cropEnableZoomAutoHide:99,cropEnableImageSelection:100,cropEnableInfoIndicator:101,cropEnableZoomTowardsWheelPosition:102,cropEnableLimitWheelInputToCropSelection:103,cropEnableCenterImageSelection:104,cropEnableButtonRotateLeft:105,cropEnableButtonRotateRight:106,cropEnableButtonFlipHorizontal:107,cropEnableButtonFlipVertical:108,cropSelectPresetOptions:109,cropEnableSelectPreset:110,cropEnableFilterMatchAspectRatio:111,cropSelectPresetFilter:90,cropEnableButtonToggleCropLimit:112,cropWillRenderTools:113,cropActiveTransformTool:114,cropMinimizeToolbar:115,locale:3},[-1,-1,-1,-1,-1,-1,-1])}get name(){return this.$$.ctx[91]}get isActive(){return this.$$.ctx[0]}set isActive(t){this.$set({isActive:t}),ar()}get stores(){return this.$$.ctx[92]}set stores(t){this.$set({stores:t}),ar()}get cropImageSelectionCornerStyle(){return this.$$.ctx[1]}set cropImageSelectionCornerStyle(t){this.$set({cropImageSelectionCornerStyle:t}),ar()}get cropWillRenderImageSelectionGuides(){return this.$$.ctx[93]}set cropWillRenderImageSelectionGuides(t){this.$set({cropWillRenderImageSelectionGuides:t}),ar()}get cropAutoCenterImageSelectionTimeout(){return this.$$.ctx[94]}set cropAutoCenterImageSelectionTimeout(t){this.$set({cropAutoCenterImageSelectionTimeout:t}),ar()}get cropEnableZoomMatchImageAspectRatio(){return this.$$.ctx[95]}set cropEnableZoomMatchImageAspectRatio(t){this.$set({cropEnableZoomMatchImageAspectRatio:t}),ar()}get cropEnableRotateMatchImageAspectRatio(){return this.$$.ctx[96]}set cropEnableRotateMatchImageAspectRatio(t){this.$set({cropEnableRotateMatchImageAspectRatio:t}),ar()}get cropEnableRotationInput(){return this.$$.ctx[97]}set cropEnableRotationInput(t){this.$set({cropEnableRotationInput:t}),ar()}get cropEnableZoom(){return this.$$.ctx[2]}set cropEnableZoom(t){this.$set({cropEnableZoom:t}),ar()}get cropEnableZoomInput(){return this.$$.ctx[98]}set cropEnableZoomInput(t){this.$set({cropEnableZoomInput:t}),ar()}get cropEnableZoomAutoHide(){return this.$$.ctx[99]}set cropEnableZoomAutoHide(t){this.$set({cropEnableZoomAutoHide:t}),ar()}get cropEnableImageSelection(){return this.$$.ctx[100]}set cropEnableImageSelection(t){this.$set({cropEnableImageSelection:t}),ar()}get cropEnableInfoIndicator(){return this.$$.ctx[101]}set cropEnableInfoIndicator(t){this.$set({cropEnableInfoIndicator:t}),ar()}get cropEnableZoomTowardsWheelPosition(){return this.$$.ctx[102]}set cropEnableZoomTowardsWheelPosition(t){this.$set({cropEnableZoomTowardsWheelPosition:t}),ar()}get cropEnableLimitWheelInputToCropSelection(){return this.$$.ctx[103]}set cropEnableLimitWheelInputToCropSelection(t){this.$set({cropEnableLimitWheelInputToCropSelection:t}),ar()}get cropEnableCenterImageSelection(){return this.$$.ctx[104]}set cropEnableCenterImageSelection(t){this.$set({cropEnableCenterImageSelection:t}),ar()}get cropEnableButtonRotateLeft(){return this.$$.ctx[105]}set cropEnableButtonRotateLeft(t){this.$set({cropEnableButtonRotateLeft:t}),ar()}get cropEnableButtonRotateRight(){return this.$$.ctx[106]}set cropEnableButtonRotateRight(t){this.$set({cropEnableButtonRotateRight:t}),ar()}get cropEnableButtonFlipHorizontal(){return this.$$.ctx[107]}set cropEnableButtonFlipHorizontal(t){this.$set({cropEnableButtonFlipHorizontal:t}),ar()}get cropEnableButtonFlipVertical(){return this.$$.ctx[108]}set cropEnableButtonFlipVertical(t){this.$set({cropEnableButtonFlipVertical:t}),ar()}get cropSelectPresetOptions(){return this.$$.ctx[109]}set cropSelectPresetOptions(t){this.$set({cropSelectPresetOptions:t}),ar()}get cropEnableSelectPreset(){return this.$$.ctx[110]}set cropEnableSelectPreset(t){this.$set({cropEnableSelectPreset:t}),ar()}get cropEnableFilterMatchAspectRatio(){return this.$$.ctx[111]}set cropEnableFilterMatchAspectRatio(t){this.$set({cropEnableFilterMatchAspectRatio:t}),ar()}get cropSelectPresetFilter(){return this.$$.ctx[90]}set cropSelectPresetFilter(t){this.$set({cropSelectPresetFilter:t}),ar()}get cropEnableButtonToggleCropLimit(){return this.$$.ctx[112]}set cropEnableButtonToggleCropLimit(t){this.$set({cropEnableButtonToggleCropLimit:t}),ar()}get cropWillRenderTools(){return this.$$.ctx[113]}set cropWillRenderTools(t){this.$set({cropWillRenderTools:t}),ar()}get cropActiveTransformTool(){return this.$$.ctx[114]}set cropActiveTransformTool(t){this.$set({cropActiveTransformTool:t}),ar()}get cropMinimizeToolbar(){return this.$$.ctx[115]}set cropMinimizeToolbar(t){this.$set({cropMinimizeToolbar:t}),ar()}get locale(){return this.$$.ctx[3]}set locale(t){this.$set({locale:t}),ar()}}]};function uf(t){let e,i,n,o,r,s,a,l=t[68],c=(P(t[68].label)?t[68].label(t[2]):t[68].label)+"";function h(...e){return t[48](t[68],...e)}const u=()=>t[49](i,l),d=()=>t[49](null,l);return{c(){e=wo("div"),i=wo("div"),n=So(),o=wo("span"),r=ko(c),Eo(i,"class",mf),Eo(e,"slot","option"),Eo(e,"class","PinturaFilterOption")},m(t,l){xo(t,e,l),bo(e,i),u(),bo(e,n),bo(e,o),bo(o,r),s||(a=[To(i,"measure",h),uo(ha.call(null,i))],s=!0)},p(e,i){l!==(t=e)[68]&&(d(),l=t[68],u()),4&i[0]|64&i[2]&&c!==(c=(P(t[68].label)?t[68].label(t[2]):t[68].label)+"")&&Ao(r,c)},d(t){t&&$o(e),d(),s=!1,Jn(a)}}}function df(t){let e,i;return e=new Qc({props:{locale:t[2],layout:"row",options:t[3],selectedIndex:t[10],onchange:t[29],$$slots:{option:[uf,({option:t})=>({68:t}),({option:t})=>[0,0,t?64:0]]},$$scope:{ctx:t}}}),{c(){Cr(e.$$.fragment)},m(t,n){Tr(e,t,n),i=!0},p(t,i){const n={};4&i[0]&&(n.locale=t[2]),8&i[0]&&(n.options=t[3]),1024&i[0]&&(n.selectedIndex=t[10]),516&i[0]|192&i[2]&&(n.$$scope={dirty:i,ctx:t}),e.$set(n)},i(t){i||(mr(e.$$.fragment,t),i=!0)},o(t){gr(e.$$.fragment,t),i=!1},d(t){Mr(e,t)}}}function pf(t){let e,i,n,o,r,s,a,l;function c(e){t[51](e)}function h(e){t[52](e)}function u(e){t[53](e)}let d={elasticity:t[15]*t[16],onscroll:t[50],$$slots:{default:[df]},$$scope:{ctx:t}};return void 0!==t[4]&&(d.maskFeatherStartOpacity=t[4]),void 0!==t[5]&&(d.maskFeatherEndOpacity=t[5]),void 0!==t[6]&&(d.maskFeatherSize=t[6]),i=new Nl({props:d}),Zo.push((()=>Sr(i,"maskFeatherStartOpacity",c))),Zo.push((()=>Sr(i,"maskFeatherEndOpacity",h))),Zo.push((()=>Sr(i,"maskFeatherSize",u))),i.$on("measure",t[54]),{c(){e=wo("div"),Cr(i.$$.fragment),Eo(e,"slot","footer"),Eo(e,"style",t[11])},m(n,o){xo(n,e,o),Tr(i,e,null),s=!0,a||(l=To(e,"transitionend",t[27]),a=!0)},p(t,a){const l={};128&a[0]&&(l.onscroll=t[50]),1548&a[0]|128&a[2]&&(l.$$scope={dirty:a,ctx:t}),!n&&16&a[0]&&(n=!0,l.maskFeatherStartOpacity=t[4],or((()=>n=!1))),!o&&32&a[0]&&(o=!0,l.maskFeatherEndOpacity=t[5],or((()=>o=!1))),!r&&64&a[0]&&(r=!0,l.maskFeatherSize=t[6],or((()=>r=!1))),i.$set(l),(!s||2048&a[0])&&Eo(e,"style",t[11])},i(t){s||(mr(i.$$.fragment,t),s=!0)},o(t){gr(i.$$.fragment,t),s=!1},d(t){t&&$o(e),Mr(i),a=!1,l()}}}function ff(t){let e,i;return e=new np({props:{$$slots:{footer:[pf]},$$scope:{ctx:t}}}),e.$on("measure",t[55]),{c(){Cr(e.$$.fragment)},m(t,n){Tr(e,t,n),i=!0},p(t,i){const n={};4092&i[0]|128&i[2]&&(n.$$scope={dirty:i,ctx:t}),e.$set(n)},i(t){i||(mr(e.$$.fragment,t),i=!0)},o(t){gr(e.$$.fragment,t),i=!1},d(t){Mr(e,t)}}}let mf="PinturaFilterPreview";function gf(t,e,i){let n,o,r,s,a,l,c,h,u,d,p,f,m,g,y,v,b,x,$=Xn,w=()=>($(),$=io(S,(t=>i(40,u=t))),S),_=Xn,k=()=>(_(),_=io(C,(t=>i(45,v=t))),C);t.$$.on_destroy.push((()=>$())),t.$$.on_destroy.push((()=>_()));let{isActive:S}=e;w();let{isActiveFraction:C}=e;k();let{stores:T}=e,{locale:M}=e,{filterFunctions:E}=e,{filterOptions:I}=e;const{history:A,interfaceImages:D,stageRect:R,utilRect:L,animation:O,elasticityMultiplier:z,scrollElasticity:F,imageSize:B,imagePreview:N,imageCropRect:H,imageRotation:W,imageFlipX:j,imageFlipY:Y,imageBackgroundColor:V,imageGamma:U,imageColorMatrix:q}=T;oo(t,R,(t=>i(42,p=t))),oo(t,L,(t=>i(41,d=t))),oo(t,O,(t=>i(39,h=t))),oo(t,B,(t=>i(57,g=t))),oo(t,N,(t=>i(44,m=t))),oo(t,V,(t=>i(58,y=t))),oo(t,U,(t=>i(43,f=t))),oo(t,q,(t=>i(36,s=t)));const X=Dr({});oo(t,X,(t=>i(37,a=t)));const G=(t,e)=>ho(X,a[t.value]=e,a),Z=Rr(X,(t=>{if(!t[void 0])return;const e=t[void 0];return l&&Ct(l,e)?l:xt(e)}));oo(t,Z,(t=>i(56,l=t)));const K=Rr([S,Z,H,B,W,j,Y],(([t,e,i,n,o,r,s],a)=>{if(!t||!e||!n)return c;const l=Bt(n),h=Vt(l),u=Kr(n,i,o),d=Vt(u),p=ht(et(h),d),f=it(et(p)),m=Math.max(e.width/i.width,e.height/i.height);a({origin:f,translation:p,rotation:{x:s?Math.PI:0,y:r?Math.PI:0,z:o},scale:m})}));oo(t,K,(t=>i(38,c=t)));const J=Qs(h?20:0);let tt;oo(t,J,(t=>i(46,b=t)));const nt={};let ot,rt,st,at,lt,ct={x:0,y:0};const ut=Dr([]);oo(t,ut,(t=>i(47,x=t)));const dt=t=>{const e={...t,data:m,size:g,offset:{...t.offset},mask:{...t.mask},backgroundColor:y};return e.opacity=v,e.offset.y+=b,e.mask.y+=b,e};return Yo((()=>{D.set([])})),t.$$set=t=>{"isActive"in t&&w(i(0,S=t.isActive)),"isActiveFraction"in t&&k(i(1,C=t.isActiveFraction)),"stores"in t&&i(31,T=t.stores),"locale"in t&&i(2,M=t.locale),"filterFunctions"in t&&i(32,E=t.filterFunctions),"filterOptions"in t&&i(3,I=t.filterOptions)},t.$$.update=()=>{if(8&t.$$.dirty[0]&&i(35,n=wc(I)),48&t.$$.dirty[1]&&i(10,o=((t,e)=>{if(!t||!t.filter||!e)return 0;const i=t.filter;return e.findIndex((([t])=>{if(!E[t])return!1;const e=E[t]();return is(e,i)}))})(s,n)),768&t.$$.dirty[1]&&h&&J.set(u?0:20),3584&t.$$.dirty[1]&&u&&d&&p){const t=p.y+p.height+d.y;i(34,lt={x:p.x-d.x,y:t})}if(496&t.$$.dirty[0]|4350&t.$$.dirty[1]&&c&&lt&&ct&&at&&tt){const t=lt.x+at.x+ct.x,e=lt.y,i=at.x+lt.x,o=i+at.width;ut.set(n.map((([n],r)=>{const l=a[n],h=ct.x+l.x,u=h+l.width;if(u<0||h>at.width)return!1;const d=t+l.x,p=e+l.y,m=(t=>({origin:et(t.origin),translation:et(t.translation),rotation:{...t.rotation},scale:t.scale}))(c);m.offset=Q(.5*l.width+d,.5*l.height+p),m.maskOpacity=1,m.mask=Yt(d+0,p,l.width+0,l.height),m.maskFeather=[1,0,1,0,1,o,1,o],h<st&&ot<1&&(m.maskFeather[0]=ot,m.maskFeather[1]=i,m.maskFeather[2]=1,m.maskFeather[3]=i+st),u>at.width-st&&rt<1&&(m.maskFeather[4]=rt,m.maskFeather[5]=o-st,m.maskFeather[6]=1,m.maskFeather[7]=o),m.maskCornerRadius=tt[n];let g=s&&Object.keys(s).filter((t=>"filter"!=t)).map((t=>s[t]))||[];return P(E[n])&&g.push(E[n]()),m.colorMatrix=g.length?Un(g):void 0,m.gamma=f,m})).filter(Boolean))}122880&t.$$.dirty[1]&&(v>0&&x?D.set(x.map(dt)):D.set([])),32768&t.$$.dirty[1]&&i(11,r=b?`transform: translateY(${b}px)`:void 0)},[S,C,M,I,ot,rt,st,ct,at,nt,o,r,R,L,O,z,F,B,N,V,U,q,X,G,Z,K,J,t=>{t.target.className===mf&&i(33,tt=Object.keys(nt).reduce(((t,e)=>{const i=nt[e],n=getComputedStyle(i),o=["top-left","top-right","bottom-left","bottom-right"].map((t=>n.getPropertyValue(`border-${t}-radius`))).map(Ll).map((t=>1.25*t));return t[e]=o,t}),{}))},ut,({value:t})=>{ho(q,s={...s,filter:P(E[t])?E[t]():void 0},s),A.write()},"filter",T,E,tt,lt,n,s,a,c,h,u,d,p,f,m,v,b,x,(t,e)=>G(t,e.detail),function(t,e){Zo[t?"unshift":"push"]((()=>{nt[e.value]=t,i(9,nt)}))},t=>i(7,ct=t),function(t){ot=t,i(4,ot)},function(t){rt=t,i(5,rt)},function(t){st=t,i(6,st)},t=>i(8,at=t.detail),function(e){Xo(t,e)}]}var yf={util:["filter",class extends Er{constructor(t){super(),Pr(this,t,gf,ff,eo,{name:30,isActive:0,isActiveFraction:1,stores:31,locale:2,filterFunctions:32,filterOptions:3},[-1,-1,-1])}get name(){return this.$$.ctx[30]}get isActive(){return this.$$.ctx[0]}set isActive(t){this.$set({isActive:t}),ar()}get isActiveFraction(){return this.$$.ctx[1]}set isActiveFraction(t){this.$set({isActiveFraction:t}),ar()}get stores(){return this.$$.ctx[31]}set stores(t){this.$set({stores:t}),ar()}get locale(){return this.$$.ctx[2]}set locale(t){this.$set({locale:t}),ar()}get filterFunctions(){return this.$$.ctx[32]}set filterFunctions(t){this.$set({filterFunctions:t}),ar()}get filterOptions(){return this.$$.ctx[3]}set filterOptions(t){this.$set({filterOptions:t}),ar()}}]};function vf(t){let e,i,n=t[37].label+"";return{c(){e=wo("span"),i=ko(n)},m(t,n){xo(t,e,n),bo(e,i)},p(t,e){64&e[1]&&n!==(n=t[37].label+"")&&Ao(i,n)},d(t){t&&$o(e)}}}function bf(t){let e,i;const n=[{class:"PinturaControlList"},{tabs:t[1]},t[3]];let o={$$slots:{default:[vf,({tab:t})=>({37:t}),({tab:t})=>[0,t?64:0]]},$$scope:{ctx:t}};for(let t=0;t<n.length;t+=1)o=Zn(o,n[t]);return e=new nl({props:o}),e.$on("select",t[22]),{c(){Cr(e.$$.fragment)},m(t,n){Tr(e,t,n),i=!0},p(t,i){const o=10&i[0]?_r(n,[n[0],2&i[0]&&{tabs:t[1]},8&i[0]&&kr(t[3])]):{};192&i[1]&&(o.$$scope={dirty:i,ctx:t}),e.$set(o)},i(t){i||(mr(e.$$.fragment,t),i=!0)},o(t){gr(e.$$.fragment,t),i=!1},d(t){Mr(e,t)}}}function xf(t){let e,i;const n=[t[5][t[36]]];let o={};for(let t=0;t<n.length;t+=1)o=Zn(o,n[t]);return e=new ap({props:o}),{c(){Cr(e.$$.fragment)},m(t,n){Tr(e,t,n),i=!0},p(t,i){const o=32&i[0]|32&i[1]?_r(n,[kr(t[5][t[36]])]):{};e.$set(o)},i(t){i||(mr(e.$$.fragment,t),i=!0)},o(t){gr(e.$$.fragment,t),i=!1},d(t){Mr(e,t)}}}function $f(t){let e,i,n,o,r;i=new Nl({props:{elasticity:t[9]*t[8],class:"PinturaControlListScroller",$$slots:{default:[bf]},$$scope:{ctx:t}}});const s=[{class:"PinturaControlPanels"},{panelClass:"PinturaControlPanel"},{panels:t[4]},t[3]];let a={$$slots:{default:[xf,({panel:t})=>({36:t}),({panel:t})=>[0,t?32:0]]},$$scope:{ctx:t}};for(let t=0;t<s.length;t+=1)a=Zn(a,s[t]);return o=new ml({props:a}),{c(){e=wo("div"),Cr(i.$$.fragment),n=So(),Cr(o.$$.fragment),Eo(e,"slot","footer"),Eo(e,"style",t[6])},m(t,s){xo(t,e,s),Tr(i,e,null),bo(e,n),Tr(o,e,null),r=!0},p(t,n){const a={};14&n[0]|128&n[1]&&(a.$$scope={dirty:n,ctx:t}),i.$set(a);const l=24&n[0]?_r(s,[s[0],s[1],16&n[0]&&{panels:t[4]},8&n[0]&&kr(t[3])]):{};32&n[0]|160&n[1]&&(l.$$scope={dirty:n,ctx:t}),o.$set(l),(!r||64&n[0])&&Eo(e,"style",t[6])},i(t){r||(mr(i.$$.fragment,t),mr(o.$$.fragment,t),r=!0)},o(t){gr(i.$$.fragment,t),gr(o.$$.fragment,t),r=!1},d(t){t&&$o(e),Mr(i),Mr(o)}}}function wf(t){let e,i;return e=new np({props:{$$slots:{footer:[$f]},$$scope:{ctx:t}}}),e.$on("measure",t[23]),{c(){Cr(e.$$.fragment)},m(t,n){Tr(e,t,n),i=!0},p(t,i){const n={};126&i[0]|128&i[1]&&(n.$$scope={dirty:i,ctx:t}),e.$set(n)},i(t){i||(mr(e.$$.fragment,t),i=!0)},o(t){gr(e.$$.fragment,t),i=!1},d(t){Mr(e,t)}}}function _f(t,e,i){let n,o,r,s,a,l,c,h,u,d,p=Xn,f=()=>(p(),p=io(g,(t=>i(20,u=t))),g);t.$$.on_destroy.push((()=>p()));let{stores:m}=e,{isActive:g}=e;f();let{locale:y={}}=e,{finetuneControlConfiguration:v}=e,{finetuneOptions:b}=e;const{history:x,animation:$,scrollElasticity:w,elasticityMultiplier:_,rangeInputElasticity:k,imageColorMatrix:S,imageConvolutionMatrix:C,imageGamma:T,imageVignette:M,imageNoise:E}=m;oo(t,$,(t=>i(19,h=t)));const I={imageColorMatrix:S,imageConvolutionMatrix:C,imageGamma:T,imageVignette:M,imageNoise:E},D="finetune-"+A(),R=Dr({});oo(t,R,(t=>i(18,c=t)));const L=Dr({});oo(t,L,(t=>i(5,l=t)));let O=[];const z=Qs(h?20:0);return oo(t,z,(t=>i(21,d=t))),t.$$set=t=>{"stores"in t&&i(14,m=t.stores),"isActive"in t&&f(i(0,g=t.isActive)),"locale"in t&&i(15,y=t.locale),"finetuneControlConfiguration"in t&&i(16,v=t.finetuneControlConfiguration),"finetuneOptions"in t&&i(17,b=t.finetuneOptions)},t.$$.update=()=>{var e;163840&t.$$.dirty[0]&&i(1,n=b?b.map((([t,e])=>({id:t,label:P(e)?e(y):e}))):[]),2&t.$$.dirty[0]&&i(2,o=n.length&&n[0].id),4&t.$$.dirty[0]&&i(3,r={name:D,selected:o}),2&t.$$.dirty[0]&&i(4,s=n.map((t=>t.id))),65536&t.$$.dirty[0]&&v&&(e=v,O&&O.forEach((t=>t())),O=s.map((t=>{const{getStore:i,getValue:n=Y}=e[t];return i(I).subscribe((e=>{const i=null!=e?n(e):e;ho(R,c={...c,[t]:i},c)}))}))),327680&t.$$.dirty[0]&&v&&c&&ho(L,l=Object.keys(c).reduce(((t,e)=>{const{base:i,min:n,max:o,getLabel:r,getStore:s,setValue:a=((t,e)=>t.set(e))}=v[e],l=s(I),h=null!=c[e]?c[e]:i;return t[e]={base:i,min:n,max:o,value:h,valueLabel:r?r(h,n,o,o-n):Math.round(100*h),oninputmove:t=>{a(l,t)},oninputend:t=>{a(l,t),x.write()},elasticity:_*k,labelReset:y.labelReset},t}),{}),l),1572864&t.$$.dirty[0]&&h&&z.set(u?0:20),2097152&t.$$.dirty[0]&&i(6,a=d?`transform: translateY(${d}px)`:void 0)},[g,n,o,r,s,l,a,$,w,_,R,L,z,"finetune",m,y,v,b,c,h,u,d,({detail:t})=>i(2,o=t),function(e){Xo(t,e)}]}var kf={util:["finetune",class extends Er{constructor(t){super(),Pr(this,t,_f,wf,eo,{name:13,stores:14,isActive:0,locale:15,finetuneControlConfiguration:16,finetuneOptions:17},[-1,-1])}get name(){return this.$$.ctx[13]}get stores(){return this.$$.ctx[14]}set stores(t){this.$set({stores:t}),ar()}get isActive(){return this.$$.ctx[0]}set isActive(t){this.$set({isActive:t}),ar()}get locale(){return this.$$.ctx[15]}set locale(t){this.$set({locale:t}),ar()}get finetuneControlConfiguration(){return this.$$.ctx[16]}set finetuneControlConfiguration(t){this.$set({finetuneControlConfiguration:t}),ar()}get finetuneOptions(){return this.$$.ctx[17]}set finetuneOptions(t){this.$set({finetuneOptions:t}),ar()}}]};function Sf(t,e,i){const n=t.slice();return n[47]=e[i].key,n[48]=e[i].index,n[49]=e[i].translate,n[50]=e[i].scale,n[14]=e[i].rotate,n[51]=e[i].dir,n[52]=e[i].center,n[53]=e[i].type,n}function Cf(t){let e,i;return{c(){e=wo("div"),Eo(e,"class","PinturaShapeManipulator"),Eo(e,"data-control","point"),Eo(e,"style",i=`pointer-events:none;transform: translate3d(${t[52].x}px, ${t[52].y}px, 0) scale(${t[5]}, ${t[5]}); opacity: ${t[6]}`)},m(t,i){xo(t,e,i)},p(t,n){104&n[0]&&i!==(i=`pointer-events:none;transform: translate3d(${t[52].x}px, ${t[52].y}px, 0) scale(${t[5]}, ${t[5]}); opacity: ${t[6]}`)&&Eo(e,"style",i)},d(t){t&&$o(e)}}}function Tf(t,e){let i,n,o,r,s,a,l,c,h;function u(...t){return e[18](e[48],...t)}let d="edge"===e[53]&&"both"!==e[2]&&Cf(e);return{key:t,first:null,c(){i=wo("div"),a=So(),d&&d.c(),l=Co(),Eo(i,"role","button"),Eo(i,"aria-label",n=`Drag ${e[53]} ${e[47]}`),Eo(i,"tabindex",o="edge"===e[53]?-1:0),Eo(i,"class","PinturaShapeManipulator"),Eo(i,"data-control",r=e[53]),Eo(i,"style",s=`cursor: ${e[51]?e[51]+"-resize":"move"}; transform: translate3d(${e[49].x}px, ${e[49].y}px, 0)${"edge"===e[53]?` rotate(${e[14]}rad)`:""} scale(${"point"===e[53]?e[5]:e[50].x}, ${"point"===e[53]?e[5]:e[50].y}); opacity: ${e[6]}`),this.first=i},m(t,n){xo(t,i,n),xo(t,a,n),d&&d.m(t,n),xo(t,l,n),c||(h=[To(i,"keydown",e[7]),To(i,"keyup",e[8]),To(i,"nudge",u),uo(Al.call(null,i)),To(i,"interactionstart",(function(){to(e[11]("start",e[48]))&&e[11]("start",e[48]).apply(this,arguments)})),To(i,"interactionupdate",(function(){to(e[11]("move",e[48]))&&e[11]("move",e[48]).apply(this,arguments)})),To(i,"interactionend",(function(){to(e[11]("end",e[48]))&&e[11]("end",e[48]).apply(this,arguments)})),uo(Il.call(null,i))],c=!0)},p(t,a){e=t,8&a[0]&&n!==(n=`Drag ${e[53]} ${e[47]}`)&&Eo(i,"aria-label",n),8&a[0]&&o!==(o="edge"===e[53]?-1:0)&&Eo(i,"tabindex",o),8&a[0]&&r!==(r=e[53])&&Eo(i,"data-control",r),104&a[0]&&s!==(s=`cursor: ${e[51]?e[51]+"-resize":"move"}; transform: translate3d(${e[49].x}px, ${e[49].y}px, 0)${"edge"===e[53]?` rotate(${e[14]}rad)`:""} scale(${"point"===e[53]?e[5]:e[50].x}, ${"point"===e[53]?e[5]:e[50].y}); opacity: ${e[6]}`)&&Eo(i,"style",s),"edge"===e[53]&&"both"!==e[2]?d?d.p(e,a):(d=Cf(e),d.c(),d.m(l.parentNode,l)):d&&(d.d(1),d=null)},d(t){t&&$o(i),t&&$o(a),d&&d.d(t),t&&$o(l),c=!1,Jn(h)}}}function Mf(t){let e,i,n,o;return{c(){e=wo("div"),Eo(e,"role","button"),Eo(e,"aria-label","Drag rotator"),Eo(e,"tabindex","0"),Eo(e,"class","PinturaShapeManipulator"),Eo(e,"data-control","rotate"),Eo(e,"style",i=`transform: translate3d(${t[0].x}px, ${t[0].y}px, 0) scale(${t[5]}, ${t[5]}); opacity: ${t[6]}`)},m(i,r){xo(i,e,r),n||(o=[To(e,"keydown",t[7]),To(e,"keyup",t[8]),To(e,"nudge",t[13]),uo(Al.call(null,e)),To(e,"interactionstart",t[14]("start")),To(e,"interactionupdate",t[14]("move")),To(e,"interactionend",t[14]("end")),uo(Il.call(null,e))],n=!0)},p(t,n){97&n[0]&&i!==(i=`transform: translate3d(${t[0].x}px, ${t[0].y}px, 0) scale(${t[5]}, ${t[5]}); opacity: ${t[6]}`)&&Eo(e,"style",i)},d(t){t&&$o(e),n=!1,Jn(o)}}}function Pf(t){let e,i,n=[],o=new Map,r=t[3];const s=t=>t[47];for(let e=0;e<r.length;e+=1){let i=Sf(t,r,e),a=s(i);o.set(a,n[e]=Tf(a,i))}let a=t[1]&&t[4]&&Mf(t);return{c(){for(let t=0;t<n.length;t+=1)n[t].c();e=So(),a&&a.c(),i=Co()},m(t,o){for(let e=0;e<n.length;e+=1)n[e].m(t,o);xo(t,e,o),a&&a.m(t,o),xo(t,i,o)},p(t,l){6636&l[0]&&(r=t[3],n=wr(n,l,s,1,t,r,o,e.parentNode,xr,Tf,e,Sf)),t[1]&&t[4]?a?a.p(t,l):(a=Mf(t),a.c(),a.m(i.parentNode,i)):a&&(a.d(1),a=null)},i:Xn,o:Xn,d(t){for(let e=0;e<n.length;e+=1)n[e].d(t);t&&$o(e),a&&a.d(t),t&&$o(i)}}}function Ef(t,i,n){let o,r,s,a,l;const c=Vo(),h=.5*q,u=U-h,d=U+h,p=-U,f=p-h,m=p+h,g=V-h,y=-V+h,v=h,b=-h,x=U-q,$=x-h,w=x+h,_=V-q,k=_-h,S=_+h,C=p-q,T=C+h,M=C-h,P=p+q,E=P+h,I=P-h;let{points:A=[]}=i,{rotatorPoint:D}=i,{visible:R=!1}=i,{enableResizing:L=!0}=i,{enableRotating:O=!0}=i,z=!1;const F=Qs(.5,{precision:1e-4,stiffness:.3,damping:.7});oo(t,F,(t=>n(5,a=t)));const B=Qs(0,{precision:.001,stiffness:.3,damping:.7});oo(t,B,(t=>n(6,l=t)));const N=t=>{let e="";return(t<=d&&t>=u||t>=f&&t<=m)&&(e="ns"),(t<=y||t>=g||t>=b&&t<=v)&&(e="ew"),(t>=k&&t<=S||t<=E&&t>=I)&&(e="nesw"),(t>=$&&t<=w||t<=T&&t>=M)&&(e="nwse"),e},H=(t,e)=>{c("resizestart",{indexes:t,translation:K()}),c("resizemove",{indexes:t,translation:e}),c("resizeend",{indexes:t,translation:K()})};return t.$$set=t=>{"points"in t&&n(15,A=t.points),"rotatorPoint"in t&&n(0,D=t.rotatorPoint),"visible"in t&&n(16,R=t.visible),"enableResizing"in t&&n(17,L=t.enableResizing),"enableRotating"in t&&n(1,O=t.enableRotating)},t.$$.update=()=>{65536&t.$$.dirty[0]&&F.set(R?1:.5),65536&t.$$.dirty[0]&&B.set(R?1:0),131072&t.$$.dirty[0]&&n(2,o=!!L&&(e(L)?L:"both")),32772&t.$$.dirty[0]&&n(3,r=o&&((t,e)=>{let i=0;const n=gt(t),o=[],r=t.length,s=2===r,a="both"!==e;for(;i<r;i++){const l=t[i-1]||t[t.length-1],c=t[i],h=t[i+1]||t[0],u=Math.atan2(h.y-c.y,h.x-c.x);if(!a){const t=rt(Q(l.x-c.x,l.y-c.y)),e=rt(Q(h.x-c.x,h.y-c.y)),n=Q(t.x+e.x,t.y+e.y);o.push({index:[i],key:"point-"+i,type:"point",scale:{x:1,y:1},translate:{x:c.x,y:c.y},angle:void 0,rotate:s?0:u,center:c,dir:s?void 0:N(Math.atan2(n.y,n.x))})}if(s)continue;const d=Q(c.x+.5*(h.x-c.x),c.y+.5*(h.y-c.y));"horizontal"===e&&i%2==0||"vertical"===e&&i%2!=0||o.push({index:[i,i+1===r?0:i+1],key:"edge-"+i,type:"edge",scale:{x:ft(c,h),y:1},translate:{x:c.x,y:c.y},angle:u,rotate:u,center:d,dir:N(Math.atan2(n.y-d.y,n.x-d.x))})}return o})(A,o)||[]),32768&t.$$.dirty[0]&&n(4,s=A.length>2)},[D,O,o,r,s,a,l,t=>z=t.shiftKey,t=>z=!1,F,B,(t,e)=>({detail:i})=>{const n=i&&i.translation?i.translation:Q(0,0);c("resize"+t,{...i,indexes:e,translation:n,shiftKey:z})},H,({detail:t})=>{c("rotatestart",{translation:K()}),c("rotatemove",{translation:t}),c("rotateend",{translation:K()})},t=>({detail:e})=>{const i=e&&e.translation?e.translation:Q(0,0);c("rotate"+t,{translation:i,shiftKey:z})},A,R,L,(t,{detail:e})=>H(t,e)]}class If extends Er{constructor(t){super(),Pr(this,t,Ef,Pf,eo,{points:15,rotatorPoint:0,visible:16,enableResizing:17,enableRotating:1},[-1,-1])}}var Af=(t,e)=>{const i=Tp(t);return ht(i,e)};let Df=null,Rf=null;var Lf=t=>{if(null===Rf&&(Rf=n()&&"visualViewport"in window),!Rf)return!1;const e=visualViewport.height,i=()=>{t(visualViewport.height<e?"visible":"hidden")};return visualViewport.addEventListener("resize",i),()=>visualViewport.removeEventListener("resize",i)};function Of(t){let e,i,n,o,r,s,a,l,c,h;n=new Pl({props:{onclick:t[1],label:t[5],icon:t[7],hideLabel:!t[6]}});const u=t[20].default,d=ro(u,t,t[19],null);return a=new Pl({props:{onclick:t[0],label:t[2],icon:t[4],hideLabel:!t[3],class:"PinturaInputFormButtonConfirm"}}),{c(){e=wo("div"),i=wo("div"),Cr(n.$$.fragment),o=So(),r=wo("div"),d&&d.c(),s=So(),Cr(a.$$.fragment),Eo(r,"class","PinturaInputFormFields"),Eo(i,"class","PinturaInputFormInner"),Eo(e,"class","PinturaInputForm"),Eo(e,"style",t[9])},m(u,p){xo(u,e,p),bo(e,i),Tr(n,i,null),bo(i,o),bo(i,r),d&&d.m(r,null),bo(i,s),Tr(a,i,null),t[21](e),l=!0,c||(h=[To(e,"focusin",t[10]),To(e,"focusout",t[11]),To(e,"measure",t[12]),uo(ha.call(null,e))],c=!0)},p(t,i){const o={};2&i[0]&&(o.onclick=t[1]),32&i[0]&&(o.label=t[5]),128&i[0]&&(o.icon=t[7]),64&i[0]&&(o.hideLabel=!t[6]),n.$set(o),d&&d.p&&524288&i[0]&&ao(d,u,t,t[19],i,null,null);const r={};1&i[0]&&(r.onclick=t[0]),4&i[0]&&(r.label=t[2]),16&i[0]&&(r.icon=t[4]),8&i[0]&&(r.hideLabel=!t[3]),a.$set(r),(!l||512&i[0])&&Eo(e,"style",t[9])},i(t){l||(mr(n.$$.fragment,t),mr(d,t),mr(a.$$.fragment,t),l=!0)},o(t){gr(n.$$.fragment,t),gr(d,t),gr(a.$$.fragment,t),l=!1},d(i){i&&$o(e),Mr(n),d&&d.d(i),Mr(a),t[21](null),c=!1,Jn(h)}}}function zf(t,e,i){let n,o,r,s,a,l,{$$slots:c={},$$scope:h}=e,{onconfirm:u}=e,{oncancel:d}=e,{autoFocus:p=!0}=e,{autoPositionCursor:f=!0}=e,{labelConfirm:m}=e,{labelConfirmShow:g=!0}=e,{iconConfirm:y}=e,{labelCancel:v}=e,{labelCancelShow:b=!1}=e,{iconCancel:x}=e,{panelOffset:$=K()}=e,w=!1,_="",k=0;const S=()=>{const t=s.querySelector("input, textarea");t.focus(),k>=1||t.select()},C=()=>{w=!0,M||!Oe()&&(null===Df&&(Df=Re(/Android/)),!Df)||i(16,_="top:1em;bottom:auto;"),Oe()&&(t=>{let e;t.addEventListener("touchstart",(t=>e=t.touches[0].screenY)),t.addEventListener("touchmove",(t=>{const i=t.touches[0].screenY,n=t.target;/textarea/i.test(n.nodeName)?(i>e?0==n.scrollTop&&t.preventDefault():i<e?n.scrollTop+n.offsetHeight==n.scrollHeight&&t.preventDefault():t.preventDefault(),e=i):t.preventDefault()}))})(s),i(17,k=1)};let T;const M=Lf((t=>{o?"hidden"!==t||w?(clearTimeout(l),l=void 0,i(16,_=`top:${visualViewport.height-a-$.y}px`),"visible"===t?(i(8,s.dataset.layout="stick",s),S(),C()):(w=!1,i(17,k=0))):S():i(16,_="top: 4.5em; bottom: auto")}));return Wo((()=>{p&&S()})),Yo((()=>{M&&M()})),t.$$set=t=>{"onconfirm"in t&&i(0,u=t.onconfirm),"oncancel"in t&&i(1,d=t.oncancel),"autoFocus"in t&&i(13,p=t.autoFocus),"autoPositionCursor"in t&&i(14,f=t.autoPositionCursor),"labelConfirm"in t&&i(2,m=t.labelConfirm),"labelConfirmShow"in t&&i(3,g=t.labelConfirmShow),"iconConfirm"in t&&i(4,y=t.iconConfirm),"labelCancel"in t&&i(5,v=t.labelCancel),"labelCancelShow"in t&&i(6,b=t.labelCancelShow),"iconCancel"in t&&i(7,x=t.iconCancel),"panelOffset"in t&&i(15,$=t.panelOffset),"$$scope"in t&&i(19,h=t.$$scope)},t.$$.update=()=>{256&t.$$.dirty[0]&&i(18,n=s&&getComputedStyle(s)),262144&t.$$.dirty[0]&&(o=n&&"1"===n.getPropertyValue("--editor-modal")),196608&t.$$.dirty[0]&&i(9,r=`opacity:${k};${_}`)},[u,d,m,g,y,v,b,x,s,r,t=>{var e;(t=>/textarea/i.test(t))(t.target)&&(T=Date.now(),f&&((e=t.target).selectionStart=e.selectionEnd=e.value.length),clearTimeout(l),l=setTimeout(C,200))},t=>{Date.now()-T>50||(t.stopPropagation(),S())},({detail:t})=>{a=t.height},p,f,$,_,k,n,h,c,function(t){Zo[t?"unshift":"push"]((()=>{s=t,i(8,s)}))}]}class Ff extends Er{constructor(t){super(),Pr(this,t,zf,Of,eo,{onconfirm:0,oncancel:1,autoFocus:13,autoPositionCursor:14,labelConfirm:2,labelConfirmShow:3,iconConfirm:4,labelCancel:5,labelCancelShow:6,iconCancel:7,panelOffset:15},[-1,-1])}}var Bf=t=>document.createTextNode(t);function Nf(t){let e,i,n,o;return{c(){e=wo("pre"),Eo(e,"class","PinturaContentEditable"),Eo(e,"data-wrap-content",i=t[3]?"wrap":"nowrap"),Eo(e,"contenteditable",""),Eo(e,"spellcheck",t[0]),Eo(e,"autocorrect",t[1]),Eo(e,"autocapitalize",t[2]),Eo(e,"style",t[4])},m(i,r){xo(i,e,r),t[20](e),n||(o=[To(e,"input",t[9]),To(e,"paste",t[10]),To(e,"keydown",t[7]),To(e,"keyup",t[8]),To(e,"blur",t[6])],n=!0)},p(t,n){8&n[0]&&i!==(i=t[3]?"wrap":"nowrap")&&Eo(e,"data-wrap-content",i),1&n[0]&&Eo(e,"spellcheck",t[0]),2&n[0]&&Eo(e,"autocorrect",t[1]),4&n[0]&&Eo(e,"autocapitalize",t[2]),16&n[0]&&Eo(e,"style",t[4])},i:Xn,o:Xn,d(i){i&&$o(e),t[20](null),n=!1,Jn(o)}}}function Hf(e,i,o){let r,{spellcheck:s="false"}=i,{autocorrect:a="off"}=i,{autocapitalize:l="off"}=i,{wrapLines:c=!0}=i,{textStyles:h=!1}=i,{formatInput:u=Y}=i,{formatPaste:d=Y}=i,{style:p}=i,{innerHTML:m}=i,{oninput:g=f}=i;const y=()=>{if(!b)return;const t=document.createRange();t.selectNodeContents(b);const e=window.getSelection();e.removeAllRanges(),e.addRange(t)},v=Vo();let b;n()&&document.execCommand("defaultParagraphSeparator",!1,"br");const x=t=>t.replace(/<\/?(?:i|b|em|strong)>/,""),$=()=>{o(11,m=b.innerHTML),v("input",m),g(m),requestAnimationFrame((()=>b&&b.scrollTo(0,0)))},w=()=>{S(b);const t=h?b.innerHTML:x(b.innerHTML);o(5,b.innerHTML=u(t),b),C(b),$()},_=e=>{const i=t("span");return i.dataset.bookmark=e,i},k=(t,e,i)=>{const n=_(i);if(t.nodeType===Node.TEXT_NODE){const o=t.textContent;if("start"===i){const i=Bf(o.substr(0,e)),r=Bf(o.substr(e));t.replaceWith(i,n,r)}else{const i=Bf(o.substr(0,e)),r=Bf(o.substr(e));t.replaceWith(i,n,r)}}else t.nodeType===Node.ELEMENT_NODE&&t.insertBefore(n,t.childNodes[e])},S=t=>{const e=window.getSelection();if(!e.getRangeAt||!e.rangeCount)return;const i=e.getRangeAt(0),{startOffset:n,endOffset:o,startContainer:r,endContainer:s}=i;if(t.contains(i.startContainer)&&t.contains(i.endContainer))if(r.nodeType===Node.TEXT_NODE&&r===s){const t=r.textContent,e=t.substr(0,n),i=_("start"),s=o-n>0?t.substr(n,o):"",a=_("end"),l=t.substr(o);r.replaceWith(e,i,s,a,l)}else k(r,n,"start"),k(s,o+(r===s?1:0),"end")},C=t=>{const e=T(t,"start"),i=T(t,"end");if(!e||!i)return;const n=document.createRange();n.setStart(e,0),n.setEnd(i,0);const o=window.getSelection();o.removeAllRanges(),o.addRange(n),e.remove(),i.remove()},T=(t,e)=>{const i=t.children;for(let t=0;t<i.length;t++){const n=i[t];if(n.dataset.bookmark===e)return n;if(n.children.length){const t=T(n,e);if(t)return t}}};return e.$$set=t=>{"spellcheck"in t&&o(0,s=t.spellcheck),"autocorrect"in t&&o(1,a=t.autocorrect),"autocapitalize"in t&&o(2,l=t.autocapitalize),"wrapLines"in t&&o(3,c=t.wrapLines),"textStyles"in t&&o(12,h=t.textStyles),"formatInput"in t&&o(13,u=t.formatInput),"formatPaste"in t&&o(14,d=t.formatPaste),"style"in t&&o(4,p=t.style),"innerHTML"in t&&o(11,m=t.innerHTML),"oninput"in t&&o(15,g=t.oninput)},e.$$.update=()=>{var t;32&e.$$.dirty[0]&&o(19,r=!!b),526336&e.$$.dirty[0]&&r&&m&&(t=m)!==b.innerHTML&&(o(5,b.innerHTML=t,b),b===document.activeElement&&y())},[s,a,l,c,p,b,()=>v("blur"),t=>{if(13!==t.keyCode)return;const e=(t=>{const e=window.getSelection().getRangeAt(0),i=e.cloneRange();return i.selectNodeContents(t),i.setEnd(e.endContainer,e.endOffset),i.toString().length})(b)===b.textContent.length?"<br><br>":"<br>";c&&document.execCommand("insertHTML",!1,e),t.preventDefault()},()=>{},t=>{const{inputType:e}=t;"insertCompositionText"!==e&&"deleteCompositionText"!==e&&w()},t=>{t.preventDefault();const e=t.clipboardData.getData("text/plain"),i=h?e:x(e),n=d(i);if(!n.length)return;const o=window.getSelection().getRangeAt(0);o.deleteContents(),o.insertNode(document.createTextNode(n)),$()},m,h,u,d,g,()=>w(),()=>{b&&b.focus()},y,r,function(t){Zo[t?"unshift":"push"]((()=>{b=t,o(5,b)}))}]}class Wf extends Er{constructor(t){super(),Pr(this,t,Hf,Nf,eo,{spellcheck:0,autocorrect:1,autocapitalize:2,wrapLines:3,textStyles:12,formatInput:13,formatPaste:14,style:4,innerHTML:11,oninput:15,confirm:16,focus:17,select:18},[-1,-1])}get spellcheck(){return this.$$.ctx[0]}set spellcheck(t){this.$set({spellcheck:t}),ar()}get autocorrect(){return this.$$.ctx[1]}set autocorrect(t){this.$set({autocorrect:t}),ar()}get autocapitalize(){return this.$$.ctx[2]}set autocapitalize(t){this.$set({autocapitalize:t}),ar()}get wrapLines(){return this.$$.ctx[3]}set wrapLines(t){this.$set({wrapLines:t}),ar()}get textStyles(){return this.$$.ctx[12]}set textStyles(t){this.$set({textStyles:t}),ar()}get formatInput(){return this.$$.ctx[13]}set formatInput(t){this.$set({formatInput:t}),ar()}get formatPaste(){return this.$$.ctx[14]}set formatPaste(t){this.$set({formatPaste:t}),ar()}get style(){return this.$$.ctx[4]}set style(t){this.$set({style:t}),ar()}get innerHTML(){return this.$$.ctx[11]}set innerHTML(t){this.$set({innerHTML:t}),ar()}get oninput(){return this.$$.ctx[15]}set oninput(t){this.$set({oninput:t}),ar()}get confirm(){return this.$$.ctx[16]}get focus(){return this.$$.ctx[17]}get select(){return this.$$.ctx[18]}}function jf(t,e,i){const n=t.slice();return n[202]=e[i],n[204]=i,n}function Yf(t,e){let i,n,o,r,s,a,l,c,h,u,d,p=e[202].name+"";function f(...t){return e[136](e[204],...t)}return o=new Vu({props:{color:e[202].color}}),{key:t,first:null,c(){i=wo("li"),n=wo("button"),Cr(o.$$.fragment),r=So(),s=wo("span"),a=ko(p),c=So(),Eo(n,"class","PinturaShapeListItem"),Eo(n,"type","button"),Eo(n,"aria-label",l="Select shape "+e[202].name),this.first=i},m(t,e){xo(t,i,e),bo(i,n),Tr(o,n,null),bo(n,r),bo(n,s),bo(s,a),bo(i,c),h=!0,u||(d=To(n,"click",f),u=!0)},p(t,i){e=t;const r={};8388608&i[0]&&(r.color=e[202].color),o.$set(r),(!h||8388608&i[0])&&p!==(p=e[202].name+"")&&Ao(a,p),(!h||8388608&i[0]&&l!==(l="Select shape "+e[202].name))&&Eo(n,"aria-label",l)},i(t){h||(mr(o.$$.fragment,t),h=!0)},o(t){gr(o.$$.fragment,t),h=!1},d(t){t&&$o(i),Mr(o),u=!1,d()}}}function Vf(t){let e,i;return e=new If({props:{visible:!0,points:t[12],rotatorPoint:t[17],enableResizing:t[16],enableRotating:t[10]}}),e.$on("resizestart",t[30]),e.$on("resizemove",t[31]),e.$on("resizeend",t[32]),e.$on("rotatestart",t[33]),e.$on("rotatemove",t[34]),e.$on("rotateend",t[35]),{c(){Cr(e.$$.fragment)},m(t,n){Tr(e,t,n),i=!0},p(t,i){const n={};4096&i[0]&&(n.points=t[12]),131072&i[0]&&(n.rotatorPoint=t[17]),65536&i[0]&&(n.enableResizing=t[16]),1024&i[0]&&(n.enableRotating=t[10]),e.$set(n)},i(t){i||(mr(e.$$.fragment,t),i=!0)},o(t){gr(e.$$.fragment,t),i=!1},d(t){Mr(e,t)}}}function Uf(t){let e,i,n,o;const r=[Xf,qf],s=[];function a(t,e){return"modal"===t[4]?0:"inline"===t[4]?1:-1}return~(e=a(t))&&(i=s[e]=r[e](t)),{c(){i&&i.c(),n=Co()},m(t,i){~e&&s[e].m(t,i),xo(t,n,i),o=!0},p(t,o){let l=e;e=a(t),e===l?~e&&s[e].p(t,o):(i&&(pr(),gr(s[l],1,1,(()=>{s[l]=null})),fr()),~e?(i=s[e],i?i.p(t,o):(i=s[e]=r[e](t),i.c()),mr(i,1),i.m(n.parentNode,n)):i=null)},i(t){o||(mr(i),o=!0)},o(t){gr(i),o=!1},d(t){~e&&s[e].d(t),t&&$o(n)}}}function qf(t){let e,i,n,o={formatInput:t[37],wrapLines:!!t[9].width,style:t[19]};return i=new Wf({props:o}),t[139](i),i.$on("input",t[38]),i.$on("keyup",t[41]),{c(){e=wo("div"),Cr(i.$$.fragment),Eo(e,"class","PinturaInlineInput"),Eo(e,"style",t[20])},m(t,o){xo(t,e,o),Tr(i,e,null),n=!0},p(t,o){const r={};512&o[0]&&(r.wrapLines=!!t[9].width),524288&o[0]&&(r.style=t[19]),i.$set(r),(!n||1048576&o[0])&&Eo(e,"style",t[20])},i(t){n||(mr(i.$$.fragment,t),n=!0)},o(t){gr(i.$$.fragment,t),n=!1},d(n){n&&$o(e),t[139](null),Mr(i)}}}function Xf(t){let e,i;return e=new Ff({props:{panelOffset:t[2],onconfirm:t[42],oncancel:t[43],labelCancel:t[5].shapeLabelInputCancel,iconCancel:t[5].shapeIconInputCancel,labelConfirm:t[5].shapeLabelInputConfirm,iconConfirm:t[5].shapeIconInputConfirm,$$slots:{default:[Gf]},$$scope:{ctx:t}}}),{c(){Cr(e.$$.fragment)},m(t,n){Tr(e,t,n),i=!0},p(t,i){const n={};4&i[0]&&(n.panelOffset=t[2]),32&i[0]&&(n.labelCancel=t[5].shapeLabelInputCancel),32&i[0]&&(n.iconCancel=t[5].shapeIconInputCancel),32&i[0]&&(n.labelConfirm=t[5].shapeLabelInputConfirm),32&i[0]&&(n.iconConfirm=t[5].shapeIconInputConfirm),786560&i[0]|524288&i[6]&&(n.$$scope={dirty:i,ctx:t}),e.$set(n)},i(t){i||(mr(e.$$.fragment,t),i=!0)},o(t){gr(e.$$.fragment,t),i=!1},d(t){Mr(e,t)}}}function Gf(t){let e,i,n;return{c(){e=wo("textarea"),Eo(e,"spellcheck","false"),Eo(e,"autocorrect","off"),Eo(e,"autocapitalize","off"),Eo(e,"style",t[19])},m(o,r){xo(o,e,r),t[137](e),Do(e,t[18]),i||(n=[To(e,"keydown",t[40]),To(e,"keypress",t[39]),To(e,"keyup",t[41]),To(e,"input",t[38]),To(e,"input",t[138])],i=!0)},p(t,i){524288&i[0]&&Eo(e,"style",t[19]),262144&i[0]&&Do(e,t[18])},d(o){o&&$o(e),t[137](null),i=!1,Jn(n)}}}function Zf(t){let e,i,n,o,r;return i=new Nh({props:{items:t[22]}}),{c(){e=wo("div"),Cr(i.$$.fragment),Eo(e,"class","PinturaShapeControls"),Eo(e,"style",t[21])},m(s,a){xo(s,e,a),Tr(i,e,null),n=!0,o||(r=[To(e,"measure",t[140]),uo(ha.call(null,e))],o=!0)},p(t,o){const r={};4194304&o[0]&&(r.items=t[22]),i.$set(r),(!n||2097152&o[0])&&Eo(e,"style",t[21])},i(t){n||(mr(i.$$.fragment,t),n=!0)},o(t){gr(i.$$.fragment,t),n=!1},d(t){t&&$o(e),Mr(i),o=!1,Jn(r)}}}function Kf(t){let e,i,n,o,r,s,a,l,c,h,u=[],d=new Map,p=t[23];const m=t=>t[202].id;for(let e=0;e<p.length;e+=1){let i=jf(t,p,e),n=m(i);d.set(n,u[e]=Yf(n,i))}let g=t[11]&&Vf(t),y=t[13]&&Uf(t),v=t[14]>0&&Zf(t);return{c(){e=wo("div"),i=wo("nav"),n=wo("ul");for(let t=0;t<u.length;t+=1)u[t].c();o=So(),g&&g.c(),r=So(),y&&y.c(),s=So(),v&&v.c(),Eo(i,"class","PinturaShapeList"),Eo(i,"data-visible",t[15]),Eo(e,"class","PinturaShapeEditor"),Eo(e,"tabindex","0")},m(d,p){xo(d,e,p),bo(e,i),bo(i,n);for(let t=0;t<u.length;t+=1)u[t].m(n,null);bo(e,o),g&&g.m(e,null),bo(e,r),y&&y.m(e,null),bo(e,s),v&&v.m(e,null),l=!0,c||(h=[To(i,"focusin",t[46]),To(i,"focusout",t[47]),To(e,"keydown",(function(){to(t[1]?f:t[36])&&(t[1]?f:t[36]).apply(this,arguments)})),To(e,"nudge",(function(){to(t[1]?f:t[45])&&(t[1]?f:t[45]).apply(this,arguments)})),To(e,"measure",t[135]),To(e,"pointermove",(function(){to(t[1]?f:t[48])&&(t[1]?f:t[48]).apply(this,arguments)})),To(e,"interactionstart",(function(){to(t[1]?f:t[25])&&(t[1]?f:t[25]).apply(this,arguments)})),To(e,"interactionupdate",(function(){to(t[1]?f:t[27])&&(t[1]?f:t[27]).apply(this,arguments)})),To(e,"interactioncancel",(function(){to(t[1]?f:t[26])&&(t[1]?f:t[26]).apply(this,arguments)})),To(e,"interactionrelease",(function(){to(t[1]?f:t[28])&&(t[1]?f:t[28]).apply(this,arguments)})),To(e,"interactionend",(function(){to(t[1]?f:t[29])&&(t[1]?f:t[29]).apply(this,arguments)})),uo(ha.call(null,e)),uo(Al.call(null,e)),uo(a=Il.call(null,e,{drag:!0,inertia:!0,multiTouch:!1,shouldStartInteraction:Jf,getEventPosition:t[141]}))],c=!0)},p(o,c){t=o,8388673&c[0]&&(p=t[23],pr(),u=wr(u,c,m,1,t,p,d,n,$r,Yf,null,jf),fr()),(!l||32768&c[0])&&Eo(i,"data-visible",t[15]),t[11]?g?(g.p(t,c),2048&c[0]&&mr(g,1)):(g=Vf(t),g.c(),mr(g,1),g.m(e,r)):g&&(pr(),gr(g,1,1,(()=>{g=null})),fr()),t[13]?y?(y.p(t,c),8192&c[0]&&mr(y,1)):(y=Uf(t),y.c(),mr(y,1),y.m(e,s)):y&&(pr(),gr(y,1,1,(()=>{y=null})),fr()),t[14]>0?v?(v.p(t,c),16384&c[0]&&mr(v,1)):(v=Zf(t),v.c(),mr(v,1),v.m(e,null)):v&&(pr(),gr(v,1,1,(()=>{v=null})),fr()),a&&to(a.update)&&8&c[0]&&a.update.call(null,{drag:!0,inertia:!0,multiTouch:!1,shouldStartInteraction:Jf,getEventPosition:t[141]})},i(t){if(!l){for(let t=0;t<p.length;t+=1)mr(u[t]);mr(g),mr(y),mr(v),l=!0}},o(t){for(let t=0;t<u.length;t+=1)gr(u[t]);gr(g),gr(y),gr(v),l=!1},d(t){t&&$o(e);for(let t=0;t<u.length;t+=1)u[t].d();g&&g.d(),y&&y.d(),v&&v.d(),c=!1,Jn(h)}}}const Qf="markup-hover",Jf=(t,e)=>t.target===e;function tm(t,i,n){let o,r,s,a,l,c,h,u,d,p,m,g,y,v,b,x,$,w,_,k,S,C,T,M,P,E,I,D,R,L,O,z,F,B,N,H,W,j,{uid:V=A()}=i,{ui:U}=i,{disabled:q=!1}=i,{markup:X}=i,{offset:G}=i,{contextRotation:J=0}=i,{contextFlipX:tt=!1}=i,{contextFlipY:it=!1}=i,{contextZoom:ot=1}=i,{active:mt=!1}=i,{opacity:bt=1}=i,{parentRect:xt}=i,{rootRect:wt}=i,{utilRect:_t}=i,{hoverColor:kt}=i,{textInputMode:Ct="inline"}=i,{oninteractionstart:Tt=f}=i,{oninteractionupdate:Mt=f}=i,{oninteractionrelease:Pt=f}=i,{oninteractionend:Et=f}=i,{oninteractioncancel:It=f}=i,{onaddshape:Dt=f}=i,{onupdateshape:Lt=f}=i,{onselectshape:Ot=f}=i,{onremoveshape:zt=f}=i,{ontapshape:Ft=f}=i,{onhovershape:Bt=f}=i,{onhovercanvas:jt=f}=i,{beforeSelectShape:Ut=(()=>!0)}=i,{beforeDeselectShape:qt=(()=>!0)}=i,{beforeRemoveShape:Xt=(()=>!0)}=i,{beforeUpdateShape:Gt=((t,e)=>e)}=i,{willRenderShapeControls:Zt=Y}=i,{mapEditorPointToImagePoint:Kt}=i,{mapImagePointToEditorPoint:Qt}=i,{eraseRadius:Jt}=i,{selectRadius:ee}=i,{enableButtonFlipVertical:ie=!1}=i,{enableTapToAddText:ne=!0}=i,{locale:ae}=i;const le=(t,e,i)=>{let n=Gt({...t},e,{...i});wn(t,n,i)},ce=(t,e,i,n)=>{const o=Q(t.x-i.x,t.y-i.y),r=Q(n.x-i.x,n.y-i.y),s=dt(r,r);let a=dt(o,r)/s;a=a<0?0:a,a=a>1?1:a;const l=Q(r.x*a+i.x-t.x,r.y*a+i.y-t.y);return dt(l,l)<=e*e},he=(t,e,i)=>{const n=i.length;for(let o=0;o<n-1;o++)if(ce(t,e,i[o],i[o+1]))return!0;return!1},ue=(t,e,i)=>!!pe(t,i)||!!he(t,e,i)||ce(t,e,i[0],i[i.length-1]),fe=(t,e,i,n,o)=>ue(t,e,te(i,n,o||Vt(i))),ge=qo("keysPressed");oo(t,ge,(t=>n(151,W=t)));const ye=(t,e,i)=>0===t||e&&i?t:e||i?-t:t,ve=(t,e)=>{const i=Qt(t);return Kt(ct(i,e))},be=(t,e,i)=>{if(Hi(t)){const n=ve(Ri(e),i),o=ve(Li(e),i);le(t,{x1:n.x,y1:n.y,x2:o.x,y2:o.y},xt)}else if(Bi(t)||Oi(t)||Ni(t)){const n=ve(e,i);le(t,n,xt)}Me()},xe={0:1,1:0,2:3,3:2},$e={0:3,1:2,2:1,3:0};let we;const _e=()=>{if(X.length)return X.find(Xi)},ke=()=>{if(X.length)return X.findIndex(Xi)},Se=(t,e=!0)=>{if(!_e())return Ji(t),Pe(t,e)},Ce=()=>{const t=_e();if(t)return t._isDraft=!1,Me(),t},Te=()=>{_e()&&(X.splice(ke(),1),Me())},Me=()=>n(0,X),Pe=(t,e=!0)=>(X.push(t),e&&Me(),t),Ee=(t,e=[],i=!0)=>{e.forEach((e=>delete t[e])),i&&Me()},Ie=(t,e,i=!0)=>{t=Object.assign(t,e),i&&Me()},Ae=(t,e,i,n=!0)=>{t[e]=i,n&&Me()},De=(t,e=!0)=>{X.forEach((e=>Ie(e,t,!1))),e&&Me()},Re=()=>[...X].reverse().find(Ui),Le=()=>!!Re(),Oe=t=>{if(!Xt(t))return!1;n(0,X=X.filter((e=>e!==t))),zt(t)},ze=()=>{const t=Re();if(!t)return;const e=X.filter((t=>nn(t)&&en(t))),i=e.findIndex((e=>e===t));if(!1===Oe(t))return;if(Fe=t,e.length-1<=0)return Be();const n=i-1<0?e.length-1:i-1;He(e[n])};let Fe;const Be=()=>{Object.keys(bi).forEach((t=>bi[t]={})),Fe=Ne(),De({isSelected:!1,isEditing:!1,_prerender:!1})},Ne=()=>X.find(Ui),He=(t,e=!0)=>{if(Xi(t))return;const i=Ne()||Fe,n=Ui(t);Fe=void 0,Ut(i,t)&&(Be(),(t=>{t.isSelected=!0})(t),!n&&Ot(t),e&&Me())},We=t=>{di&&t.isEditing&&di.confirm&&di.confirm(),Ie(t,{isSelected:!1,isEditing:!1,_prerender:!1})},je=t=>{Ie(t,{isSelected:!0,isEditing:!0,_prerender:"inline"===Ct})},Ye=t=>{Ie(t,{isSelected:!0,isEditing:!1,_prerender:!1})},Ve=t=>{if(!t.length)return[];const e=t.filter(Xt);return n(0,X=X.filter((t=>!e.includes(t)))),e},Ue=t=>{const e=vi(t.text,t);return Yt(t.x,t.y,t.width?Math.min(t.width,e.width):e.width,t.height?Math.min(t.height,e.height):e.height)},qe=t=>{if(Gi(t))return Nt(t);if(Ni(t))return Wt(t);const e=Ue(t);return e.width=Math.max(10,t.width||e.width),e},Xe=(t,e=0,i=(()=>!0))=>[...X].reverse().filter(i).map((t=>({shape:t,priority:1}))).filter((i=>{const{shape:n}=i,o=vn(Pi(n),xt),r=e+(o.strokeWidth||0);if(Bi(o))return fe(t,r,o,n.rotation);if(Oi(o)){const e=qe(o),s=fe(t,r,e,n.rotation);let a=!1;if(s&&!Ui(n)){const s=Ue(o);"right"!==n.textAlign||n.flipX||(s.x=e.x+e.width-s.width),"center"===n.textAlign&&(s.x=e.x+.5*e.width-.5*s.width),a=fe(t,r,s,n.rotation,Vt(e)),a||(i.priority=-1)}return s}return Ni(o)?((t,e,i,n,o,r)=>{const s=me(Q(i.x,i.y),i.rx,i.ry,n,o,r,12);return ue(t,e,s)})(t,r,o,n.rotation,n.flipX,n.flipY):Hi(o)?ce(t,Math.max(16,r),Ri(o),Li(o)):!!ji(o)&&he(t,Math.max(16,r),o.points)})).sort(((t,e)=>t.priority<e.priority?1:t.priority>e.priority?-1:0)).map((t=>t.shape)),Ge=(t,e,i,n=0)=>{const o=Math.abs(n),r=At(e,i),s=Rt(r,o),a=(({start:t,end:e},i)=>{if(0===i)return[Q(t.x,t.y),Q(t.x,t.y),Q(e.x,e.y),Q(e.x,e.y)];const n=Math.atan2(e.y-t.y,e.x-t.x),o=Math.sin(n)*i,r=Math.cos(n)*i;return[Q(o+t.x,-r+t.y),Q(-o+t.x,r+t.y),Q(-o+e.x,r+e.y),Q(o+e.x,-r+e.y)]})(s,o);return t.filter((t=>{const e=vn(Pi(t),xt);if(Hi(e)||ji(e)){const t=e.points?[...e.points]:[Ri(e),Li(e)];return!!((t,e)=>{const i=e.length,n=[];for(let o=0;o<i-1;o++){const i=de(t.start,t.end,e[o],e[o+1]);i&&n.push(i)}return n.length?n:void 0})(s,t)}return((t,e)=>!!t.find((t=>pe(t,e)))||!!e.find((e=>pe(e,t))))(a,((t,e=12)=>{if(Bi(t))return te(t,t.rotation,Vt(t));if(Oi(t)){const e=qe(t);return te(e,t.rotation,Vt(e))}return Ni(t)?me(Q(t.x,t.y),t.rx,t.ry,t.rotation,t.flipX,t.flipY,e):[]})(e))}))};let Ze,Ke,Qe,ti,ei,ii=!1;const ni=()=>{clearTimeout(Ze),Ze=void 0,n(111,ii=!1)},oi=t=>{let e;if(Bi(t)){if(t.width<5&&t.height<5)return;const i=Vt(t);e=se(t),(t.flipX||t.flipY)&&yt(e,t.flipX,t.flipY,i.x,i.y),e=vt(e,t.rotation,i.x,i.y)}else if(Ni(t)){const i=t;e=se(Wt(t)),(t.flipX||t.flipY)&&yt(e,t.flipX,t.flipY,i.x,i.y),e=vt(e,t.rotation,i.x,i.y)}else if(Hi(t))e=[Ri(t),Li(t)];else if(ji(t))e=[...t.points];else if(Oi(t)){if(t.width<5&&t.height<5)return;const i=qe(t);i.width=Math.max(10,i.width);const n=Vt(i);e=se(i),(t.flipX||t.flipY)&&yt(e,t.flipX,t.flipY,n.x,n.y),e=vt(e,t.rotation,n.x,n.y)}return e},ri=t=>{const e=oi(t);let i,n;return t.flipY?(i=gt([e[0],e[1]]),n=rt(Q(e[1].x-e[2].x,e[1].y-e[2].y))):(i=gt([e[2],e[3]]),n=rt(Q(e[2].x-e[1].x,e[2].y-e[1].y))),ut(n,20/ot),{origin:i,dir:n}},li=()=>{const t=U.filter((t=>t.id!==Qf));t.length!==U.length&&n(49,U=t)};let ci;const hi="markup-manipulator-segment-"+V,ui=()=>{n(49,U=U.filter((t=>t.id!==hi)))};let di;const pi=()=>{const t=(t=>{let e;return e=void 0===t.value?t.innerHTML.split("<br>").join("\n").replace(/&nbsp;/g,String.fromCharCode(160)).replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">"):t.value,zi(o)?(t=>{const e=t.split(/[\n\r]/g);return e.length>1?e.map((t=>t.trim())).filter((t=>t.length)).join(" "):e[0]})(e):e})(di),i=on(o,t),n=!0===i?t:i;let r=w.x,a=w.y;if(!o.height){const t=te({...k},o.rotation),e=vi(n,s),i=te({x:r,y:a,...e},o.rotation),[l,,c]=t,[h,,u]=i;let d=l,p=h;o.flipX&&(d=c,p=u);const f=ht(et(d),p);r+=f.x,a+=f.y}Ie(o,{x:e($.x)?si(r,xt.width):r,y:e($.y)?si(a,xt.height):a,text:n})},fi=()=>{let t=Xi(o);Xi(o)&&Ce(),pi(),Ye(o),t?Dt(o):Lt(o)},mi=()=>{Xi(o)?Te():(Ie(o,{text:$.text,x:$.x,y:$.y}),Ye(o))},gi=(t,e,{flipX:i,flipY:n,rotation:o},r="top left")=>{let s,a;const[l,c,h,u]=te(t,o),[d,p,f,m]=te(e,o);return"top center"===r?(s=gt(n?[u,h]:[l,c]),a=gt(n?[m,f]:[d,p])):"top right"===r&&!i||"top left"===r&&i?(s=n?h:c,a=n?f:p):(s=n?u:l,a=n?m:d),ht(et(s),a)},yi=(t,i,n)=>Q(e(t.x)?si(i.x+n.x,xt.width):i.x+n.x,e(t.y)?si(i.y+n.y,xt.height):i.y+n.y),bi={},xi=()=>je(o),$i=()=>{const t=vi(o.text,s),i=Je(o,"height"),n=!i&&Je(o,"width"),r=o.id;let a=bi[r];a||(bi[r]={},a=bi[r]);const l=t=>{const{width:e,...i}=s,n=vi(o.text,i),r=gi(Yt(s.x,s.y,t.width,t.height),Yt(s.x,s.y,n.width,n.height),s,"top "+o.textAlign);Ee(o,["width","height","textAlign"]),Ie(o,{...yi(o,s,r)})},c=i=>{const n=St(a.width||s.width||t.width,t.height),r=a.textAlign||"left",l=gi(Yt(s.x,s.y,i.width,i.height),Yt(s.x,s.y,n.width,n.height),s,"top "+r);Ee(o,["height"]),Ie(o,{...yi(o,s,l),width:e(o.width)?si(n.width,xt.width):n.width,textAlign:r})},h=i=>{const n=St(a.width||t.width,a.height||t.height),r=a.textAlign||"left",l=gi(Yt(s.x,s.y,i.width,i.height),Yt(s.x,s.y,n.width,n.height),s,"top "+r);Ie(o,{...yi(o,s,l),width:e(o.width)?si(n.width,xt.width):n.width,height:e(o.width)?si(n.height,xt.height):n.height,textAlign:r})};if(i){a.textAlign=o.textAlign,a.width=s.width,a.height=s.height;const t=St(s.width,s.height);rn(o,"auto-height")?c(t):rn(o,"auto-width")&&l(t)}else if(n){a.textAlign=o.textAlign,a.width=s.width;const e=St(s.width,t.height);rn(o,"auto-width")?l(e):rn(o,"fixed-size")&&h(e)}else{const e=St(t.width,t.height);rn(o,"fixed-size")?h(e):rn(o,"auto-height")&&c(e)}},wi=t=>{t.stopPropagation();const e=o.flipX||!1;Ae(o,"flipX",!e),Lt(o)},_i=t=>{t.stopPropagation();const e=o.flipY||!1;Ae(o,"flipY",!e),Lt(o)},ki=t=>{Ae(o,"opacity",t)},Si=t=>{ki(t),Lt(o)},Ci=t=>{t.stopPropagation(),t.target.blur(),ze()},Ti=t=>{t.stopPropagation(),X.findIndex((t=>t===o))!==X.length-1&&(n(0,X=X.filter((t=>t!==o)).concat([o])),Lt(o))},Ei=t=>{t.stopPropagation();const e=Pi(o);e.id=A();const i=Q(50,-50);if(Hi(e)){const t=$n(e,["x1","y1","x2","y2"],xt);t.x1+=i.x,t.y1+=i.y,t.x2+=i.x,t.y2+=i.y,wn(e,t,xt)}else{const t=$n(e,["x","y"],xt);t.x+=50,t.y-=50,wn(e,t,xt)}X.push(e),Dt(e),He(e)},Ii=Qs(0,{stiffness:.2,damping:.7});let Ai;oo(t,Ii,(t=>n(14,j=t)));const Di=(t,e)=>{const{disableTextLayout:i=[]}=e;return"height"in e?i.includes("auto-height")?t.shapeIconButtonTextLayoutAutoWidth:t.shapeIconButtonTextLayoutAutoHeight:"width"in e?i.includes("auto-width")?t.shapeIconButtonTextLayoutFixedSize:t.shapeIconButtonTextLayoutAutoWidth:i.includes("fixed-size")?t.shapeIconButtonTextLayoutAutoHeight:t.shapeIconButtonTextLayoutFixedSize},Wi=(t,e)=>{const{disableTextLayout:i=[]}=e;return"height"in e?i.includes("auto-height")?t.shapeTitleButtonTextLayoutAutoWidth:t.shapeTitleButtonTextLayoutAutoHeight:"width"in e?i.includes("auto-width")?t.shapeTitleButtonTextLayoutFixedSize:t.shapeTitleButtonTextLayoutAutoWidth:i.includes("fixed-size")?t.shapeTitleButtonTextLayoutAutoHeight:t.shapeTitleButtonTextLayoutFixedSize};let Vi=!1,qi=K();const Ki=t=>{Bt(t),n(112,ci=t)};return Yo((()=>{ui(),li()})),t.$$set=t=>{"uid"in t&&n(50,V=t.uid),"ui"in t&&n(49,U=t.ui),"disabled"in t&&n(1,q=t.disabled),"markup"in t&&n(0,X=t.markup),"offset"in t&&n(2,G=t.offset),"contextRotation"in t&&n(51,J=t.contextRotation),"contextFlipX"in t&&n(52,tt=t.contextFlipX),"contextFlipY"in t&&n(53,it=t.contextFlipY),"contextZoom"in t&&n(54,ot=t.contextZoom),"active"in t&&n(55,mt=t.active),"opacity"in t&&n(56,bt=t.opacity),"parentRect"in t&&n(57,xt=t.parentRect),"rootRect"in t&&n(3,wt=t.rootRect),"utilRect"in t&&n(58,_t=t.utilRect),"hoverColor"in t&&n(59,kt=t.hoverColor),"textInputMode"in t&&n(4,Ct=t.textInputMode),"oninteractionstart"in t&&n(60,Tt=t.oninteractionstart),"oninteractionupdate"in t&&n(61,Mt=t.oninteractionupdate),"oninteractionrelease"in t&&n(62,Pt=t.oninteractionrelease),"oninteractionend"in t&&n(63,Et=t.oninteractionend),"oninteractioncancel"in t&&n(64,It=t.oninteractioncancel),"onaddshape"in t&&n(65,Dt=t.onaddshape),"onupdateshape"in t&&n(66,Lt=t.onupdateshape),"onselectshape"in t&&n(67,Ot=t.onselectshape),"onremoveshape"in t&&n(68,zt=t.onremoveshape),"ontapshape"in t&&n(69,Ft=t.ontapshape),"onhovershape"in t&&n(70,Bt=t.onhovershape),"onhovercanvas"in t&&n(71,jt=t.onhovercanvas),"beforeSelectShape"in t&&n(72,Ut=t.beforeSelectShape),"beforeDeselectShape"in t&&n(73,qt=t.beforeDeselectShape),"beforeRemoveShape"in t&&n(74,Xt=t.beforeRemoveShape),"beforeUpdateShape"in t&&n(75,Gt=t.beforeUpdateShape),"willRenderShapeControls"in t&&n(76,Zt=t.willRenderShapeControls),"mapEditorPointToImagePoint"in t&&n(77,Kt=t.mapEditorPointToImagePoint),"mapImagePointToEditorPoint"in t&&n(78,Qt=t.mapImagePointToEditorPoint),"eraseRadius"in t&&n(79,Jt=t.eraseRadius),"selectRadius"in t&&n(80,ee=t.selectRadius),"enableButtonFlipVertical"in t&&n(81,ie=t.enableButtonFlipVertical),"enableTapToAddText"in t&&n(82,ne=t.enableTapToAddText),"locale"in t&&n(5,ae=t.locale)},t.$$.update=()=>{var e,i;if(3&t.$$.dirty[0]&&n(113,o=!q&&X&&(_e()||Re())),1048576&t.$$.dirty[3]&&n(114,r=o&&!Xi(o)?o.id:void 0),8&t.$$.dirty[0]|67108864&t.$$.dirty[1]|1048576&t.$$.dirty[3]&&n(9,s=wt&&o&&vn(Pi(o),xt)),1048576&t.$$.dirty[3]&&n(115,a=!(!o||!Xi(o))),512&t.$$.dirty[0]|33554432&t.$$.dirty[1]|1048576&t.$$.dirty[3]&&n(116,l=o&&bt&&oi(s)||[]),1048576&t.$$.dirty[3]&&n(117,c=o&&sn(e=o)&&an(e)&&!0!==e.disableResize&&(Gi(e)||Fi(e)||Ni(e)||Hi(e))&&!Yi(o)),1048576&t.$$.dirty[3]&&n(10,h=o&&(t=>sn(t)&&!0!==t.disableRotate&&(Gi(t)||Je(t,"text")||Ni(t)))(o)&&!Yi(o)),17825792&t.$$.dirty[3]&&n(16,u=c&&Je(o,"text")&&!o.height?"horizontal":c),9437184&t.$$.dirty[3]&&n(11,d=o&&l.length>1),65536&t.$$.dirty[2]|8388608&t.$$.dirty[3]&&n(118,p=l.map(Qt)),4&t.$$.dirty[0]|33554432&t.$$.dirty[3]&&n(12,m=p.map((t=>Q(t.x-G.x,t.y-G.y)))),4096&t.$$.dirty[0]&&n(119,g=m.length),65536&t.$$.dirty[2]|524288&t.$$.dirty[3]&&(ci&&Qt&&!Ui(ci)&&en(ci)?(t=>{const e=oi(vn(Pi(t),xt));if(!e)return;const i=e.map(Qt),o=!ji(t)&&!Hi(t),r={id:Qf,points:i.map((t=>Q(t.x+1,t.y+1))),strokeColor:[0,0,0,.1],strokeWidth:2,pathClose:o},s={id:Qf,points:i,strokeColor:kt,strokeWidth:2,pathClose:o},a=U.filter((t=>t.id!==Qf));n(49,U=[...a,r,s])})(ci):li()),7680&t.$$.dirty[0]|33554432&t.$$.dirty[1]&&n(120,y=d&&h&&bt&&m&&(t=>{const e=ri(t),i=Qt({x:e.origin.x+e.dir.x,y:e.origin.y+e.dir.y});return{origin:Qt(e.origin),position:i}})(s)),4&t.$$.dirty[0]|134217728&t.$$.dirty[3]&&n(17,v=y&&Q(y.position.x-G.x,y.position.y-G.y)),33554432&t.$$.dirty[1]|101711872&t.$$.dirty[3]&&o&&p&&bt>0){const t=o&&Xi(o)&&ji(o);g>2&&!t?((t,e)=>{const i=[],o=.1*t,r=t,s=[0,0,0],a=[1,1,1],l=!ji(e)&&!Hi(e);i.push({id:hi,points:p.map((t=>Q(t.x+1,t.y+1))),pathClose:l,strokeColor:s,strokeWidth:2,opacity:o}),y&&i.push({id:hi,points:[Q(y.origin.x+1,y.origin.y+1),Q(y.position.x+1,y.position.y+1)],strokeColor:s,strokeWidth:2,opacity:o}),i.push({id:hi,points:p,pathClose:l,strokeColor:a,strokeWidth:1.5,opacity:r}),y&&i.push({id:hi,points:[{x:y.origin.x,y:y.origin.y},{x:y.position.x,y:y.position.y}],strokeColor:a,strokeWidth:1.5,opacity:r}),n(49,U=U.filter((t=>t.id!==hi)).concat(i))})(bt,o):ui()}1048576&t.$$.dirty[3]&&(o||ui()),16777216&t.$$.dirty[1]&&(t=>{if(!t)return De({_prerender:!1});const e=X.find((t=>t.isEditing));e&&Ie(e,{_prerender:"inline"===Ct})})(mt),144&t.$$.dirty[0]&&di&&"inline"===Ct&&di.focus(),1048576&t.$$.dirty[3]&&n(121,b=o&&Oi(o)),269484032&t.$$.dirty[3]&&n(13,x=b&&!1!==on(o)&&Yi(o)),8192&t.$$.dirty[0]&&n(122,$=x?{...o}:void 0),67108864&t.$$.dirty[1]|536870912&t.$$.dirty[3]&&n(123,w=$&&vn({...$},xt)),1073741824&t.$$.dirty[3]&&n(124,_=w&&vi(w.text,w)),1073741824&t.$$.dirty[3]|1&t.$$.dirty[4]&&(k=w&&Yt(w.x,w.y,_.width,_.height)),8192&t.$$.dirty[0]|1048576&t.$$.dirty[3]&&n(18,S=x?o.text:""),8720&t.$$.dirty[0]&&n(19,C=x&&((t,e)=>{const{textAlign:i="left",fontFamily:n="sans-serif",fontWeight:o="normal",fontStyle:r="normal"}=t,s=t.fontSize,a="!important",l=`text-align:${i}${a};font-family:${n}${a};font-weight:${o}${a};font-style:${r}${a};`;if("modal"===e)return l;const c=ai(t.color),h=t.lineHeight,u=.5*Math.max(0,s-h);return`--bottom-inset:${u}px;padding:${u}px 0 0${a};color:${c}${a};font-size:${s}px${a};line-height:${h}px${a};${l}`})(s,Ct)),8708&t.$$.dirty[0]|9437184&t.$$.dirty[1]&&n(20,T=x&&((t,e,i,n)=>{let r,a;t.width&&t.height?(r=Vt(t),a=$t(t)):(a=vi(o.text,s),a.width=s.width||a.width,r=Q(t.x+.5*a.width,t.y+.5*a.height));const l=Math.max(0,t.fontSize-t.lineHeight)+t.lineHeight,c=Qt(r);let h=c.x-e.x-.5*a.width,u=c.y-e.y-.5*a.height,d=t.flipX,p=t.flipY,f=t.rotation;tt&&it?(d=!d,p=!p):tt?(d=!d,f=-f):it&&(p=!p,f=-f),f+=n;const m=i*(d?-1:1),g=i*(p?-1:1);return`--line-height:${l}px;width:${a.width}px;height:${a.height}px;transform:translate(${h}px,${u}px) rotate(${f}rad) scale(${m}, ${g})`})(s,G,ot,J)),8336&t.$$.dirty[0]&&x&&di&&"inline"===Ct&&(t=>{n(7,di.innerHTML=(t=>t.replace(/ {2,}/g," ").replace(/&/g,"&amp;").replace(/\u00a0/g,"&nbsp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").split("\n").join("<br>"))(t),di)})(S),5242880&t.$$.dirty[3]|2&t.$$.dirty[4]&&n(125,M=o&&!a?o:M),2&t.$$.dirty[4]&&n(126,P=M&&(t=>!t.disableFlip&&!Xi(t)&&!Zi(t)&&(t=>Je(t,"backgroundImage")||Je(t,"text"))(t))(M)),2&t.$$.dirty[4]&&n(127,E=M&&rn(M)),2&t.$$.dirty[4]&&n(128,I=M&&(t=>!0!==t.disableDuplicate&&an(t))(M)),2&t.$$.dirty[4]&&n(129,D=M&&nn(M)),2&t.$$.dirty[4]&&n(130,R=M&&(t=>!0!==t.disableReorder)(M)),2&t.$$.dirty[4]&&n(131,L=M&&!1!==on(M)),2&t.$$.dirty[4]&&n(132,O=M&&Je(M,"backgroundImage")&&tn(M,"opacity")),8192&t.$$.dirty[0]|5505024&t.$$.dirty[3]&&Ii.set(!o||a||ii||x?0:1),4096&t.$$.dirty[0]|5242880&t.$$.dirty[3]|512&t.$$.dirty[4]&&n(133,z=o&&!a&&m.length?(i=Ht(m),lt(Q(i.x+.5*i.width,i.y),rc)):z),256&t.$$.dirty[0]|134217728&t.$$.dirty[1]|512&t.$$.dirty[4]&&n(134,F=z&&Ai&&_t&&(t=>{const e=_t.x,i=_t.y,n=e+_t.width;let o=Math.max(t.x-.5*Ai.width,e),r=Math.max(t.y-Ai.height-16,i);return o+Ai.width>n&&(o=n-Ai.width),Q(o,r)})(z)),16384&t.$$.dirty[0]|1024&t.$$.dirty[4]&&n(21,B=F&&`transform: translate(${F.x}px, ${F.y}px);opacity:${j}`),32&t.$$.dirty[0]|540672&t.$$.dirty[2]|3145728&t.$$.dirty[3]|508&t.$$.dirty[4]&&n(22,N=r&&Zt&&iu((()=>Zt([O&&["div","alpha",{class:"PinturaShapeControlsGroup"},[["Slider","adjust-opacity",{onrelease:Si,onchange:ki,step:.01,value:Je(o,"opacity")?o.opacity:1,label:(t,e,i)=>Math.round(t/i*100)+"%",min:0,max:1,direction:"x"}]]],["div","beta",{class:"PinturaShapeControlsGroup"},[P&&["Button","flip-horizontal",{onclick:wi,label:ae.shapeTitleButtonFlipHorizontal,icon:ae.shapeIconButtonFlipHorizontal,hideLabel:!0}],P&&ie&&["Button","flip-vertical",{onclick:_i,label:ae.shapeTitleButtonFlipVertical,icon:ae.shapeIconButtonFlipVertical,hideLabel:!0}],R&&["Button","to-front",{onclick:Ti,label:ae.shapeTitleButtonMoveToFront,icon:ae.shapeIconButtonMoveToFront,hideLabel:!0}],I&&["Button","duplicate",{onclick:Ei,label:ae.shapeTitleButtonDuplicate,icon:ae.shapeIconButtonDuplicate,hideLabel:!0}],D&&["Button","remove",{onclick:Ci,label:ae.shapeTitleButtonRemove,icon:ae.shapeIconButtonRemove,hideLabel:!0}]].filter(Boolean)],L&&E&&["div","gamma",{class:"PinturaShapeControlsGroup"},[["Button","text-layout",{onclick:$i,label:kc(Wi,ae,o),icon:kc(Di,ae,o),hideLabel:!0}]]],L&&["div","delta",{class:"PinturaShapeControlsGroup"},[["Button","edit-text",{label:ae.shapeLabelInputText,onclick:xi}]]]].filter(Boolean),r)))),33&t.$$.dirty[0]&&n(23,H=X.filter(en).filter((t=>!Xi(t))).map((t=>({id:t.id,color:Oi(t)?t.color:Hi(t)?t.strokeColor:t.backgroundColor,name:t.name||ae["shapeLabelTool"+jr(pn(t))]}))))},[X,q,G,wt,Ct,ae,He,di,Ai,s,h,d,m,x,j,Vi,u,v,S,C,T,B,N,H,ge,t=>{const{origin:e}=t.detail;Qe=void 0,ti=void 0,ei=void 0,Ke=void 0,clearTimeout(Ze),Ze=setTimeout((()=>n(111,ii=!0)),250),_e()&&Ce();const i=Kt(et(e)),r=Xe(i,ee,(t=>en(t))),s=r.length&&r.shift();if(!s&&o&&Yi(o)&&We(o),s&&Ui(s))return Qe=s,ti=Pi(Qe),void(ei=vn(Pi(Qe),xt));Ke=s,!Tt(t)&&s&&(He(s),Qe=s,ti=Pi(Qe),ei=vn(Pi(Qe),xt))},t=>{ni(),It(t)},t=>{const{translation:e}=t.detail;if(Qe){if(!an(Qe))return;if(Yi(Qe))return;return be(Qe,ei,e)}Mt(t)},t=>{ni(),Qe?Yi(Qe)?mi():t.detail.isTap&&Oi(Qe)&&!1!==on(Qe)&&je(Qe):Pt(t)},t=>{const e=Ke&&t.detail.isTap;if(Qe)return Ft(Qe),i=Qe,n=ti,JSON.stringify(i)!==JSON.stringify(n)&&Lt(Qe),void(Qe=void 0);var i,n;const o=Ne(),r=!o||qt(o,Ke);r&&Be(),Et(t),r&&e&&He(Ke)},t=>{n(111,ii=!0),Qe=o,ei=s},t=>{const{translation:e,indexes:i,shiftKey:n}=t.detail;((t,e,i,n,o)=>{if(Hi(t)){const[o]=i,r=W.includes(16)?(t,e)=>{const i=ft(t,e),n=st(t,e),o=Math.PI/4,r=o*Math.round(n/o)-J%o;e.x=t.x+i*Math.cos(r),e.y=t.y+i*Math.sin(r)}:(t,e)=>e;if(0===o){const i=ve(Ri(e),n);r(Q(e.x2,e.y2),i),le(t,{x1:i.x,y1:i.y},xt)}else if(1===o){const i=ve(Li(e),n);r(Q(e.x1,e.y1),i),le(t,{x2:i.x,y2:i.y},xt)}}else if(Gi(t)||Ni(t)||Fi(t)){let r,s,a=!1;if(Ni(t))r=Wt(e);else if(Gi(t))r=Nt(e);else{a=!0,r=Nt(e);const t=vi(e.text,e);r.height=t.height}t.aspectRatio?s=t.aspectRatio:o.shiftKey&&!a&&(s=r.width/r.height);const l=Nt(r),c=Vt(l),h=t.rotation,u=se(l),d=te(l,h);if(1===i.length){let e=i[0];t.flipX&&(e=xe[e]),t.flipY&&(e=$e[e]);const[o,r,a,l]=u,p=Qt(d[e]);ct(p,n);const f=Kt(p),m=Q(f.x-d[e].x,f.y-d[e].y),g=nt(et(m),-h),y=Q(u[e].x+g.x,u[e].y+g.y);let v;0===e&&(v=a),1===e&&(v=l),2===e&&(v=o),3===e&&(v=r);const b=Ht([v,y]);if(s){const{width:t,height:e}=oe(b,s),[i,n,o,r]=re(b);b.width=t,b.height=e,y.y<v.y&&(b.y=o-e),y.x<v.x&&(b.x=n-t)}const x=te(b,h,c),$=gt(x),w=nt(x[0],-h,$),_=nt(x[2],-h,$),k=Ht([w,_]);le(t,Ni(t)?Z(k):k,xt)}else{i=i.map((e=>(t.flipX&&(e=xe[e]),t.flipY&&(e=$e[e]),e)));const[e,o]=i.map((t=>d[t])),r={x:e.x+.5*(o.x-e.x),y:e.y+.5*(o.y-e.y)},[l,p]=i.map((t=>u[t])),[f,m]=i.map((t=>{const e=t+2;return e<4?u[e]:u[e-4]})),g={x:f.x+.5*(m.x-f.x),y:f.y+.5*(m.y-f.y)},y=Qt(r);ct(y,n);const v=Kt(y),b=Q(v.x-r.x,v.y-r.y),x=nt(et(b),-h),$=ht(et(l),p),w=lt($,(t=>1-Math.abs(Math.sign(t)))),_=Q(x.x*w.x,x.y*w.y);ct(l,_),ct(p,_);const k=Ht(u);if(s){let t=k.width,e=k.height;0===w.y?e=t/s:t=e*s,k.width=t,k.height=e,0===w.y?k.y=g.y-.5*e:k.x=g.x-.5*t}const S=te(k,h,c),C=gt(S),T=nt(S[0],-h,C),M=nt(S[2],-h,C),P=Ht([T,M]);let E;Ni(t)?E=Z(P):Gi(t)?E=P:a&&(E={x:P.x,y:P.y,width:P.width}),le(t,E,xt)}}Me()})(Qe,ei,i,e,{shiftKey:n})},t=>{He(Qe);const{isTap:e}=t.detail;e&&Ft(Qe),Qe=void 0,n(111,ii=!1),Lt(o)},t=>{we=ri(s).origin,n(111,ii=!0),Qe=o,ei=s},t=>{const{translation:e,shiftKey:i}=t.detail;((t,e,i,n)=>{const o=qe(vn(Pi(t),xt)),r=Vt(o),s=ve(we,i);let a=st(s,r)+Math.PI/2;if(n.shiftKey){const t=Math.PI/16;a=t*Math.round(a/t)-J%t}le(t,{rotation:a},xt),Me()})(Qe,0,e,{shiftKey:i})},()=>{He(Qe),Qe=void 0,n(111,ii=!1),Lt(o)},t=>{if(!Le())return;const{key:e}=t;if(/escape/i.test(e))return t.preventDefault(),t.stopPropagation(),We(o);/backspace/i.test(e)&&!(t=>t.isContentEditable||/input|textarea/i.test(t.nodeName))(t.target)&&(t.preventDefault(),ze())},t=>{const e=on(o,t);return!0===e?t:e},pi,t=>{const{target:e,key:i}=t,n=e.value||e.innerText,r=e.selectionStart||0,s=e.selectionEnd||n.length,a=n.substring(0,r)+i+n.substring(s);if(on(o,a)!==a)return t.preventDefault()},t=>zi(o)&&/enter/i.test(t.code)?t.preventDefault():/arrow/i.test(t.code)?t.stopPropagation():/escape/i.test(t.key)?mi():void 0,t=>{const{key:e,ctrlKey:i,altKey:n}=t;if(/enter/i.test(e)&&(i||n))return fi()},fi,mi,Ii,t=>{const e=Re();e&&(Yi(e)||an(e)&&(Qe=e,ei=vn(Pi(Qe),xt),be(Qe,ei,t.detail)))},t=>{n(15,Vi=!0)},({relatedTarget:t})=>{t&&t.classList.contains("shape-selector__button")||n(15,Vi=!1)},t=>{if(ii||Ze)return Ki(void 0);const e=Af(t,wt),i=lt(Kt(e),(t=>Math.round(t)));if(at(i,qi))return;qi=et(i),jt(e,i);const[n]=Xe(i,0,en);n&&Xi(n)||Ki(n)},U,V,J,tt,it,ot,mt,bt,xt,_t,kt,Tt,Mt,Pt,Et,It,Dt,Lt,Ot,zt,Ft,Bt,jt,Ut,qt,Xt,Gt,Zt,Kt,Qt,Jt,ee,ie,ne,(t,i={})=>{let n,o,r,s=Ni(t),a=Oi(t),l="relative"===i.position;return ji(t)?{start:e=>{const{origin:i}=e.detail;o=4,n=et(i),r=et(i);const s=Kt(i);l&&(s.x=l?si(s.x,xt.width):s.x,s.y=l?si(s.y,xt.height):s.y),Se({...t,points:[s]})},update:t=>{const e=_e(),{translation:i}=t.detail,s=Q(n.x+i.x,n.y+i.y),a=ft(r,s);if(Mi(a,5)<=o)return;const c=st(s,r),h=o-a;r.x+=h*Math.cos(c),r.y+=h*Math.sin(c);const u=Kt(r);u&&(u.x=l?si(u.x,xt.width):u.x,u.y=l?si(u.y,xt.height):u.y),e.points=e.points.concat(u),Me()},release:t=>t.detail.preventInertia(),cancel:t=>{Te()},end:t=>{if(t.detail.isTap)return Te();const e=Ce();Dt(e)}}:s||a||Bi(t)?{start:e=>{const{origin:i}=e.detail;n=et(i);const o=Kt(n),r={...t,rotation:-1*ye(J,tt,it),x:l?si(o.x,xt.width):o.x,y:l?si(o.y,xt.height):o.y};r.flipX=tt,r.flipY=it,delete r.position,r.opacity=0,s?(r.rx=l?"0%":0,r.ry=l?"0%":0):(r.width=l?"0%":0,r.height=l?"0%":0),Se(r)},update:t=>{const e=_e();e.opacity=1;const{aspectRatio:i}=e;let{translation:o}=t.detail;if(i){const t=Math.abs(o.x)*i;o.x=o.x,o.y=t*Math.sign(o.y)}const r=Q(n.x+o.x,n.y+o.y),a=Kt(n),l=Kt(r),c={x:a.x+.5*(l.x-a.x),y:a.y+.5*(l.y-a.y)},h=ye(J,tt,it);nt(a,h,c),nt(l,h,c);const u=Math.min(a.x,l.x),d=Math.min(a.y,l.y);let p=Math.max(a.x,l.x)-u,f=Math.max(a.y,l.y)-d,m={};s?(m.x=u+.5*p,m.y=d+.5*f,m.rx=.5*p,m.ry=.5*f):(m.x=u,m.y=d,m.width=p,m.height=f),le(e,m,xt),Me()},release:t=>{t.detail.preventInertia()},cancel:t=>{Te()},end:t=>{const i=_e();if(t.detail.isTap){if(!Oi(i)||!ne||Ke)return Te();delete i.width,delete i.height,delete i.textAlign;const t=vn({...i},xt),o=vi(i.text,t);o.width*=ot,o.height*=ot;const r=Kt({x:n.x,y:n.y-.5*o.height}),s=Kt({x:n.x+o.width,y:n.y+.5*o.height}),a={x:r.x+.5*(s.x-r.x),y:r.y+.5*(s.y-r.y)},l=ye(J,tt,it);nt(r,l,a),nt(s,l,a);const c=Math.min(r.x,s.x),h=Math.min(r.y,s.y);i.x=e(i.x)?si(c,xt.width):c,i.y=e(i.y)?si(h,xt.height):h}if(i.opacity=1,!Oi(i)){const t=Ce();Dt(t)}He(i),Oi(i)&&je(i)}}:Hi(t)?{start:e=>{const{origin:i}=e.detail,o=Kt(i),r=lt(o,rc);n=et(i),Se({...t,x1:l?si(r.x,xt.width):r.x,y1:l?si(r.y,xt.height):r.y,x2:l?si(r.x,xt.width):r.x,y2:l?si(r.y,xt.height):r.y,opacity:0})},update:t=>{const e=_e(),{translation:i}=t.detail,o=ct(et(n),i);if(W.includes(16)){const t=ft(n,o),e=st(n,o),i=Math.PI/4,r=i*Math.round(e/i);o.x=n.x+t*Math.cos(r),o.y=n.y+t*Math.sin(r)}const r=Kt(o);Ie(e,{x2:l?si(r.x,xt.width):r.x,y2:l?si(r.y,xt.height):r.y,opacity:1}),Me()},release:t=>t.detail.preventInertia(),cancel:t=>{Te()},end:t=>{const e=_e();if(t.detail.isTap)return Te();e.opacity=1;const i=Ce();Dt(i),He(i)}}:void 0},()=>{let t,e;const i=Jt*Jt,n=(t,e,n=!1)=>{const o=pt(t,e);if(!n&&o<2)return!1;const r=X.filter((t=>!t.disableErase));let s;return s=o<i?Xe(Kt(e),Jt):Ge(r,Kt(t),Kt(e),Jt),Ve(s).forEach(zt),!0};return{start:i=>{t=Q(Math.round(i.detail.origin.x),Math.round(i.detail.origin.y)),n(t,t,!0),e=t},update:i=>{const{translation:o}=i.detail,r=Q(Math.round(t.x+o.x),Math.round(t.y+o.y));n(e,r)&&(e=et(r))},release:t=>t.detail.preventInertia(),end:()=>{}}},_e,ke,Se,Ce,Te,(t={})=>({id:A(),...t}),Me,Pe,Ee,Ie,Ae,(t,e,i=!0)=>{X.forEach((i=>Ae(i,t,e,!1))),i&&Me()},De,Re,Le,Oe,ze,Be,We,je,Ye,Ve,Ue,qe,Xe,Ge,ii,ci,o,r,a,l,c,p,g,y,b,$,w,_,M,P,E,I,D,R,L,O,z,F,function(e){Xo(t,e)},(t,e)=>He(X[t]),function(t){Zo[t?"unshift":"push"]((()=>{di=t,n(7,di)}))},function(){S=this.value,n(18,S),n(13,x),n(113,o),n(121,b),n(1,q),n(0,X)},function(t){Zo[t?"unshift":"push"]((()=>{di=t,n(7,di)}))},t=>n(8,Ai=t.detail),t=>Af(t,wt)]}class em extends Er{constructor(t){super(),Pr(this,t,tm,Kf,eo,{uid:50,ui:49,disabled:1,markup:0,offset:2,contextRotation:51,contextFlipX:52,contextFlipY:53,contextZoom:54,active:55,opacity:56,parentRect:57,rootRect:3,utilRect:58,hoverColor:59,textInputMode:4,oninteractionstart:60,oninteractionupdate:61,oninteractionrelease:62,oninteractionend:63,oninteractioncancel:64,onaddshape:65,onupdateshape:66,onselectshape:67,onremoveshape:68,ontapshape:69,onhovershape:70,onhovercanvas:71,beforeSelectShape:72,beforeDeselectShape:73,beforeRemoveShape:74,beforeUpdateShape:75,willRenderShapeControls:76,mapEditorPointToImagePoint:77,mapImagePointToEditorPoint:78,eraseRadius:79,selectRadius:80,enableButtonFlipVertical:81,enableTapToAddText:82,locale:5,createShape:83,eraseShape:84,getMarkupItemDraft:85,getMarkupItemDraftIndex:86,addMarkupItemDraft:87,confirmMarkupItemDraft:88,discardMarkupItemDraft:89,createMarkupItem:90,syncShapes:91,addShape:92,removeMarkupShapeProps:93,updateMarkupShape:94,updateMarkupShapeProperty:95,updateMarkupItemsShapeProperty:96,updateMarkupShapeItems:97,getActiveMarkupItem:98,hasActiveMarkupItem:99,removeShape:100,removeActiveMarkupItem:101,blurShapes:102,selectShape:6,deselectMarkupItem:103,editMarkupItem:104,finishEditMarkupItem:105,removeMarkupItems:106,getTextShapeRect:107,getMarkupShapeRect:108,getShapesNearPosition:109,getShapesBetweenPoints:110},[-1,-1,-1,-1,-1,-1,-1])}get createShape(){return this.$$.ctx[83]}get eraseShape(){return this.$$.ctx[84]}get getMarkupItemDraft(){return this.$$.ctx[85]}get getMarkupItemDraftIndex(){return this.$$.ctx[86]}get addMarkupItemDraft(){return this.$$.ctx[87]}get confirmMarkupItemDraft(){return this.$$.ctx[88]}get discardMarkupItemDraft(){return this.$$.ctx[89]}get createMarkupItem(){return this.$$.ctx[90]}get syncShapes(){return this.$$.ctx[91]}get addShape(){return this.$$.ctx[92]}get removeMarkupShapeProps(){return this.$$.ctx[93]}get updateMarkupShape(){return this.$$.ctx[94]}get updateMarkupShapeProperty(){return this.$$.ctx[95]}get updateMarkupItemsShapeProperty(){return this.$$.ctx[96]}get updateMarkupShapeItems(){return this.$$.ctx[97]}get getActiveMarkupItem(){return this.$$.ctx[98]}get hasActiveMarkupItem(){return this.$$.ctx[99]}get removeShape(){return this.$$.ctx[100]}get removeActiveMarkupItem(){return this.$$.ctx[101]}get blurShapes(){return this.$$.ctx[102]}get selectShape(){return this.$$.ctx[6]}get deselectMarkupItem(){return this.$$.ctx[103]}get editMarkupItem(){return this.$$.ctx[104]}get finishEditMarkupItem(){return this.$$.ctx[105]}get removeMarkupItems(){return this.$$.ctx[106]}get getTextShapeRect(){return this.$$.ctx[107]}get getMarkupShapeRect(){return this.$$.ctx[108]}get getShapesNearPosition(){return this.$$.ctx[109]}get getShapesBetweenPoints(){return this.$$.ctx[110]}}function im(t,e,i){const n=t.slice();return n[7]=e[i],n}function nm(t,e){let i,n,o,r,s,a,l,c=kc(e[7].componentProps.title,e[1])+"";const h=[e[7].componentProps];var u=e[7].component;function d(t){let e={};for(let t=0;t<h.length;t+=1)e=Zn(e,h[t]);return{props:e}}return u&&(s=new u(d())),{key:t,first:null,c(){i=wo("li"),n=wo("span"),o=ko(c),r=So(),s&&Cr(s.$$.fragment),a=So(),Eo(n,"class","PinturaShapeStyleLabel"),Eo(i,"class","PinturaShapeStyle"),this.first=i},m(t,e){xo(t,i,e),bo(i,n),bo(n,o),bo(i,r),s&&Tr(s,i,null),bo(i,a),l=!0},p(t,n){e=t,(!l||3&n)&&c!==(c=kc(e[7].componentProps.title,e[1])+"")&&Ao(o,c);const r=1&n?_r(h,[kr(e[7].componentProps)]):{};if(u!==(u=e[7].component)){if(s){pr();const t=s;gr(t.$$.fragment,1,0,(()=>{Mr(t,1)})),fr()}u?(s=new u(d()),Cr(s.$$.fragment),mr(s.$$.fragment,1),Tr(s,i,a)):s=null}else u&&s.$set(r)},i(t){l||(s&&mr(s.$$.fragment,t),l=!0)},o(t){s&&gr(s.$$.fragment,t),l=!1},d(t){t&&$o(i),s&&Mr(s)}}}function om(t){let e,i,n=[],o=new Map,r=t[0];const s=t=>t[7].id;for(let e=0;e<r.length;e+=1){let i=im(t,r,e),a=s(i);o.set(a,n[e]=nm(a,i))}return{c(){e=wo("ul");for(let t=0;t<n.length;t+=1)n[t].c();Eo(e,"class","PinturaShapeStyleList")},m(t,o){xo(t,e,o);for(let t=0;t<n.length;t+=1)n[t].m(e,null);i=!0},p(t,i){3&i&&(r=t[0],pr(),n=wr(n,i,s,1,t,r,o,e,$r,nm,null,im),fr())},i(t){if(!i){for(let t=0;t<r.length;t+=1)mr(n[t]);i=!0}},o(t){for(let t=0;t<n.length;t+=1)gr(n[t]);i=!1},d(t){t&&$o(e);for(let t=0;t<n.length;t+=1)n[t].d()}}}function rm(t){let e,i,n;return i=new Nl({props:{class:"PinturaShapeStyles",elasticity:t[2],$$slots:{default:[om]},$$scope:{ctx:t}}}),{c(){e=wo("div"),Cr(i.$$.fragment),Eo(e,"style",t[3])},m(t,o){xo(t,e,o),Tr(i,e,null),n=!0},p(t,[o]){const r={};4&o&&(r.elasticity=t[2]),1027&o&&(r.$$scope={dirty:o,ctx:t}),i.$set(r),(!n||8&o)&&Eo(e,"style",t[3])},i(t){n||(mr(i.$$.fragment,t),n=!0)},o(t){gr(i.$$.fragment,t),n=!1},d(t){t&&$o(e),Mr(i)}}}function sm(t,e,i){let n,o,{isActive:r=!1}=e,{controls:s=[]}=e,{locale:a}=e,{scrollElasticity:l}=e;const c=Qs(0);return oo(t,c,(t=>i(6,o=t))),t.$$set=t=>{"isActive"in t&&i(5,r=t.isActive),"controls"in t&&i(0,s=t.controls),"locale"in t&&i(1,a=t.locale),"scrollElasticity"in t&&i(2,l=t.scrollElasticity)},t.$$.update=()=>{32&t.$$.dirty&&c.set(r?1:0),96&t.$$.dirty&&i(3,n=`opacity:${o};${r?"":"pointer-events:none;"}${o<=0?"visibility:hidden":""}`)},[s,a,l,n,c,r,o]}class am extends Er{constructor(t){super(),Pr(this,t,sm,rm,eo,{isActive:5,controls:0,locale:1,scrollElasticity:2})}}function lm(t,e,i){const n=t.slice();return n[11]=e[i].key,n[2]=e[i].controls,n[12]=e[i].isActive,n}function cm(t,e){let i,n,o;return n=new am({props:{isActive:e[12],controls:e[2],locale:e[0],scrollElasticity:e[1]}}),{key:t,first:null,c(){i=Co(),Cr(n.$$.fragment),this.first=i},m(t,e){xo(t,i,e),Tr(n,t,e),o=!0},p(t,i){e=t;const o={};8&i&&(o.isActive=e[12]),8&i&&(o.controls=e[2]),1&i&&(o.locale=e[0]),2&i&&(o.scrollElasticity=e[1]),n.$set(o)},i(t){o||(mr(n.$$.fragment,t),o=!0)},o(t){gr(n.$$.fragment,t),o=!1},d(t){t&&$o(i),Mr(n,t)}}}function hm(t){let e,i,n=[],o=new Map,r=t[3];const s=t=>t[11];for(let e=0;e<r.length;e+=1){let i=lm(t,r,e),a=s(i);o.set(a,n[e]=cm(a,i))}return{c(){e=wo("div");for(let t=0;t<n.length;t+=1)n[t].c();Eo(e,"class","PinturaShapeStyleEditor")},m(t,o){xo(t,e,o);for(let t=0;t<n.length;t+=1)n[t].m(e,null);i=!0},p(t,[i]){11&i&&(r=t[3],pr(),n=wr(n,i,s,1,t,r,o,e,$r,cm,null,lm),fr())},i(t){if(!i){for(let t=0;t<r.length;t+=1)mr(n[t]);i=!0}},o(t){for(let t=0;t<n.length;t+=1)gr(n[t]);i=!1},d(t){t&&$o(e);for(let t=0;t<n.length;t+=1)n[t].d()}}}function um(t,i,n){let o,r,s,{controls:a={}}=i,{shape:l}=i,{onchange:c}=i,{locale:h}=i,{scrollElasticity:u}=i;const d=[];return t.$$set=t=>{"controls"in t&&n(2,a=t.controls),"shape"in t&&n(4,l=t.shape),"onchange"in t&&n(5,c=t.onchange),"locale"in t&&n(0,h=t.locale),"scrollElasticity"in t&&n(1,u=t.scrollElasticity)},t.$$.update=()=>{4&t.$$.dirty&&n(6,o=Object.keys(a).filter((t=>a[t]))),80&t.$$.dirty&&n(7,r=l&&o&&tn(l)?(t=>o.filter((e=>e.split("_").every((e=>Je(t,e)&&tn(t,e))))).map((i=>{const n=i.split("_"),o=n.length>1?n.map((e=>t[e])):t[i];let[r,s]=a[i];if(e(r))if(a[r]){const t={...s};[r,s]=a[r],s={...s,...t}}else{if("Dropdown"!==r)return;r=dh}const l=P(s.options)?s.options(t):s.options;return{id:i,component:r,componentProps:{...s,options:l,locale:h,value:o,optionLabelClass:"PinturaButtonLabel",onchange:e=>{const o=C(e)&&!ti(e)?e.value:e;s.onchange&&s.onchange(o,t);const r=n.length>1?n.reduce(((t,e,i)=>({...t,[e]:Array.isArray(o)?o[i]:o})),{}):{[i]:o};c(r)}}}})).filter(Boolean))(l):[]),144&t.$$.dirty&&n(3,s=((t,e)=>{let i=d.find((e=>e.key===t));return i||(i={key:t,controls:e},d.push(i)),d.forEach((t=>t.isActive=!1)),i.controls=e,i.isActive=!0,d})(l?Object.keys(l).join("_"):"none",r||[]))},[h,u,a,s,l,c,o,r]}class dm extends Er{constructor(t){super(),Pr(this,t,um,hm,eo,{controls:2,shape:4,onchange:5,locale:0,scrollElasticity:1})}}function pm(t){let e,i,n;return{c(){e=wo("button"),Eo(e,"class","PinturaDragButton"),Eo(e,"title",t[1]),e.disabled=t[2]},m(o,r){xo(o,e,r),e.innerHTML=t[0],t[9](e),i||(n=To(e,"pointerdown",t[4]),i=!0)},p(t,[i]){1&i&&(e.innerHTML=t[0]),2&i&&Eo(e,"title",t[1]),4&i&&(e.disabled=t[2])},i:Xn,o:Xn,d(o){o&&$o(e),t[9](null),i=!1,n()}}}function fm(t,e,i){let n,{html:o}=e,{title:r}=e,{onclick:s}=e,{disabled:a=!1}=e,{ongrab:l=f}=e,{ondrag:c=f}=e,{ondrop:h=f}=e;const u=t=>pt(d,Q(t.pageX,t.pageY))<256;let d;const p=t=>{document.documentElement.removeEventListener("pointermove",m),document.documentElement.removeEventListener("pointerup",p);const e=Q(t.pageX,t.pageY);if(pt(d,e)<32)return s(t);u(t)||h(t)},m=t=>{u(t)||c(t)};return t.$$set=t=>{"html"in t&&i(0,o=t.html),"title"in t&&i(1,r=t.title),"onclick"in t&&i(5,s=t.onclick),"disabled"in t&&i(2,a=t.disabled),"ongrab"in t&&i(6,l=t.ongrab),"ondrag"in t&&i(7,c=t.ondrag),"ondrop"in t&&i(8,h=t.ondrop)},[o,r,a,n,t=>{d=Q(t.pageX,t.pageY),l(t),document.documentElement.addEventListener("pointermove",m),document.documentElement.addEventListener("pointerup",p)},s,l,c,h,function(t){Zo[t?"unshift":"push"]((()=>{n=t,i(3,n)}))}]}class mm extends Er{constructor(t){super(),Pr(this,t,fm,pm,eo,{html:0,title:1,onclick:5,disabled:2,ongrab:6,ondrag:7,ondrop:8})}}function gm(t,e,i){const n=t.slice();return n[14]=e[i],n}function ym(t,e){let i,n,o,r,s,a,l;function c(){return e[10](e[14])}function h(...t){return e[11](e[14],...t)}function u(...t){return e[12](e[14],...t)}function d(...t){return e[13](e[14],...t)}return n=new mm({props:{onclick:c,ongrab:h,ondrag:u,ondrop:d,disabled:e[1]||e[14].disabled,title:e[14].title,html:e[14].thumb}}),{key:t,first:null,c(){i=wo("li"),Cr(n.$$.fragment),o=So(),Eo(i,"class","PinturaShapePreset"),Eo(i,"style",e[6]),this.first=i},m(t,c){xo(t,i,c),Tr(n,i,null),bo(i,o),s=!0,a||(l=uo(r=e[8].call(null,i,e[14])),a=!0)},p(t,o){e=t;const a={};5&o&&(a.onclick=c),9&o&&(a.ongrab=h),17&o&&(a.ondrag=u),33&o&&(a.ondrop=d),3&o&&(a.disabled=e[1]||e[14].disabled),1&o&&(a.title=e[14].title),1&o&&(a.html=e[14].thumb),n.$set(a),(!s||64&o)&&Eo(i,"style",e[6]),r&&to(r.update)&&1&o&&r.update.call(null,e[14])},i(t){s||(mr(n.$$.fragment,t),s=!0)},o(t){gr(n.$$.fragment,t),s=!1},d(t){t&&$o(i),Mr(n),a=!1,l()}}}function vm(t){let e,i,n=[],o=new Map,r=t[0];const s=t=>t[14].id;for(let e=0;e<r.length;e+=1){let i=gm(t,r,e),a=s(i);o.set(a,n[e]=ym(a,i))}return{c(){e=wo("ul");for(let t=0;t<n.length;t+=1)n[t].c();Eo(e,"class","PinturaShapePresetsList")},m(t,o){xo(t,e,o);for(let t=0;t<n.length;t+=1)n[t].m(e,null);i=!0},p(t,[i]){127&i&&(r=t[0],pr(),n=wr(n,i,s,1,t,r,o,e,$r,ym,null,gm),fr())},i(t){if(!i){for(let t=0;t<r.length;t+=1)mr(n[t]);i=!0}},o(t){for(let t=0;t<n.length;t+=1)gr(n[t]);i=!1},d(t){t&&$o(e);for(let t=0;t<n.length;t+=1)n[t].d()}}}function bm(t,e,i){let n,o,{presets:r}=e,{disabled:s}=e,{onclickpreset:a}=e,{ongrabpreset:l}=e,{ondragpreset:c}=e,{ondroppreset:h}=e;const u=Zs(0,{duration:300});return oo(t,u,(t=>i(9,o=t))),Wo((()=>u.set(1))),t.$$set=t=>{"presets"in t&&i(0,r=t.presets),"disabled"in t&&i(1,s=t.disabled),"onclickpreset"in t&&i(2,a=t.onclickpreset),"ongrabpreset"in t&&i(3,l=t.ongrabpreset),"ondragpreset"in t&&i(4,c=t.ondragpreset),"ondroppreset"in t&&i(5,h=t.ondroppreset)},t.$$.update=()=>{512&t.$$.dirty&&i(6,n="opacity:"+o)},[r,s,a,l,c,h,n,u,(t,e)=>e.mount&&e.mount(t.firstChild,e),o,t=>a(t.id),(t,e)=>l&&l(t.id,e),(t,e)=>c&&c(t.id,e),(t,e)=>h&&h(t.id,e)]}class xm extends Er{constructor(t){super(),Pr(this,t,bm,vm,eo,{presets:0,disabled:1,onclickpreset:2,ongrabpreset:3,ondragpreset:4,ondroppreset:5})}}var $m=t=>/<svg /.test(t);function wm(t){let e,i;return e=new Nh({props:{items:t[13]}}),{c(){Cr(e.$$.fragment)},m(t,n){Tr(e,t,n),i=!0},p(t,i){const n={};8192&i&&(n.items=t[13]),e.$set(n)},i(t){i||(mr(e.$$.fragment,t),i=!0)},o(t){gr(e.$$.fragment,t),i=!1},d(t){Mr(e,t)}}}function _m(t){let e,i,n,o;const r=[Sm,km],s=[];function a(t,e){return t[7]?0:1}return e=a(t),i=s[e]=r[e](t),{c(){i.c(),n=Co()},m(t,i){s[e].m(t,i),xo(t,n,i),o=!0},p(t,o){let l=e;e=a(t),e===l?s[e].p(t,o):(pr(),gr(s[l],1,1,(()=>{s[l]=null})),fr(),i=s[e],i?i.p(t,o):(i=s[e]=r[e](t),i.c()),mr(i,1),i.m(n.parentNode,n))},i(t){o||(mr(i),o=!0)},o(t){gr(i),o=!1},d(t){s[e].d(t),t&&$o(n)}}}function km(t){let e,i,n,o,r=t[13]&&Cm(t);return n=new Nl({props:{scrollAutoCancel:t[6],elasticity:t[0],$$slots:{default:[Tm]},$$scope:{ctx:t}}}),{c(){e=wo("div"),r&&r.c(),i=So(),Cr(n.$$.fragment),Eo(e,"class","PinturaShapePresetsFlat")},m(t,s){xo(t,e,s),r&&r.m(e,null),bo(e,i),Tr(n,e,null),o=!0},p(t,o){t[13]?r?(r.p(t,o),8192&o&&mr(r,1)):(r=Cm(t),r.c(),mr(r,1),r.m(e,i)):r&&(pr(),gr(r,1,1,(()=>{r=null})),fr());const s={};64&o&&(s.scrollAutoCancel=t[6]),1&o&&(s.elasticity=t[0]),536870974&o&&(s.$$scope={dirty:o,ctx:t}),n.$set(s)},i(t){o||(mr(r),mr(n.$$.fragment,t),o=!0)},o(t){gr(r),gr(n.$$.fragment,t),o=!1},d(t){t&&$o(e),r&&r.d(),Mr(n)}}}function Sm(t){let e,i,n,o,r,s,a,l=t[13]&&Mm(t);const c=[{class:"PinturaControlList"},{tabs:t[8]},t[11],{layout:"compact"}];let h={$$slots:{default:[Am,({tab:t})=>({28:t}),({tab:t})=>t?268435456:0]},$$scope:{ctx:t}};for(let t=0;t<c.length;t+=1)h=Zn(h,c[t]);o=new nl({props:h}),o.$on("select",t[18]);const u=[{class:"PinturaControlPanels"},{panelClass:"PinturaControlPanel"},{panels:t[12]},t[11]];let d={$$slots:{default:[Rm,({panel:t,panelIsActive:e})=>({26:t,27:e}),({panel:t,panelIsActive:e})=>(t?67108864:0)|(e?134217728:0)]},$$scope:{ctx:t}};for(let t=0;t<u.length;t+=1)d=Zn(d,u[t]);return s=new ml({props:d}),{c(){e=wo("div"),i=wo("div"),l&&l.c(),n=So(),Cr(o.$$.fragment),r=So(),Cr(s.$$.fragment),Eo(i,"class","PinturaShapePresetsGroups"),Eo(e,"class","PinturaShapePresetsGrouped")},m(t,c){xo(t,e,c),bo(e,i),l&&l.m(i,null),bo(i,n),Tr(o,i,null),bo(e,r),Tr(s,e,null),a=!0},p(t,e){t[13]?l?(l.p(t,e),8192&e&&mr(l,1)):(l=Mm(t),l.c(),mr(l,1),l.m(i,n)):l&&(pr(),gr(l,1,1,(()=>{l=null})),fr());const r=2304&e?_r(c,[c[0],256&e&&{tabs:t[8]},2048&e&&kr(t[11]),c[3]]):{};805306368&e&&(r.$$scope={dirty:e,ctx:t}),o.$set(r);const a=6144&e?_r(u,[u[0],u[1],4096&e&&{panels:t[12]},2048&e&&kr(t[11])]):{};738198623&e&&(a.$$scope={dirty:e,ctx:t}),s.$set(a)},i(t){a||(mr(l),mr(o.$$.fragment,t),mr(s.$$.fragment,t),a=!0)},o(t){gr(l),gr(o.$$.fragment,t),gr(s.$$.fragment,t),a=!1},d(t){t&&$o(e),l&&l.d(),Mr(o),Mr(s)}}}function Cm(t){let e,i;return e=new Nh({props:{items:t[13]}}),{c(){Cr(e.$$.fragment)},m(t,n){Tr(e,t,n),i=!0},p(t,i){const n={};8192&i&&(n.items=t[13]),e.$set(n)},i(t){i||(mr(e.$$.fragment,t),i=!0)},o(t){gr(e.$$.fragment,t),i=!1},d(t){Mr(e,t)}}}function Tm(t){let e,i;return e=new xm({props:{presets:t[5],onclickpreset:t[1],ongrabpreset:t[2],ondragpreset:t[3],ondroppreset:t[4]}}),{c(){Cr(e.$$.fragment)},m(t,n){Tr(e,t,n),i=!0},p(t,i){const n={};32&i&&(n.presets=t[5]),2&i&&(n.onclickpreset=t[1]),4&i&&(n.ongrabpreset=t[2]),8&i&&(n.ondragpreset=t[3]),16&i&&(n.ondroppreset=t[4]),e.$set(n)},i(t){i||(mr(e.$$.fragment,t),i=!0)},o(t){gr(e.$$.fragment,t),i=!1},d(t){Mr(e,t)}}}function Mm(t){let e,i;return e=new Nh({props:{items:t[13]}}),{c(){Cr(e.$$.fragment)},m(t,n){Tr(e,t,n),i=!0},p(t,i){const n={};8192&i&&(n.items=t[13]),e.$set(n)},i(t){i||(mr(e.$$.fragment,t),i=!0)},o(t){gr(e.$$.fragment,t),i=!1},d(t){Mr(e,t)}}}function Pm(t){let e,i;return e=new wl({props:{$$slots:{default:[Em]},$$scope:{ctx:t}}}),{c(){Cr(e.$$.fragment)},m(t,n){Tr(e,t,n),i=!0},p(t,i){const n={};805306368&i&&(n.$$scope={dirty:i,ctx:t}),e.$set(n)},i(t){i||(mr(e.$$.fragment,t),i=!0)},o(t){gr(e.$$.fragment,t),i=!1},d(t){Mr(e,t)}}}function Em(t){let e,i=t[28].icon+"";return{c(){e=_o("g")},m(t,n){xo(t,e,n),e.innerHTML=i},p(t,n){268435456&n&&i!==(i=t[28].icon+"")&&(e.innerHTML=i)},d(t){t&&$o(e)}}}function Im(t){let e,i,n=t[28].label+"";return{c(){e=wo("span"),i=ko(n)},m(t,n){xo(t,e,n),bo(e,i)},p(t,e){268435456&e&&n!==(n=t[28].label+"")&&Ao(i,n)},d(t){t&&$o(e)}}}function Am(t){let e,i,n,o=t[28].icon&&Pm(t),r=!t[28].hideLabel&&Im(t);return{c(){o&&o.c(),e=So(),r&&r.c(),i=Co()},m(t,s){o&&o.m(t,s),xo(t,e,s),r&&r.m(t,s),xo(t,i,s),n=!0},p(t,n){t[28].icon?o?(o.p(t,n),268435456&n&&mr(o,1)):(o=Pm(t),o.c(),mr(o,1),o.m(e.parentNode,e)):o&&(pr(),gr(o,1,1,(()=>{o=null})),fr()),t[28].hideLabel?r&&(r.d(1),r=null):r?r.p(t,n):(r=Im(t),r.c(),r.m(i.parentNode,i))},i(t){n||(mr(o),n=!0)},o(t){gr(o),n=!1},d(t){o&&o.d(t),t&&$o(e),r&&r.d(t),t&&$o(i)}}}function Dm(t){let e,i;return e=new xm({props:{presets:t[10][t[26]].items,disabled:t[10][t[26]].disabled,onclickpreset:t[1],ongrabpreset:t[2],ondragpreset:t[3],ondroppreset:t[4]}}),{c(){Cr(e.$$.fragment)},m(t,n){Tr(e,t,n),i=!0},p(t,i){const n={};67109888&i&&(n.presets=t[10][t[26]].items),67109888&i&&(n.disabled=t[10][t[26]].disabled),2&i&&(n.onclickpreset=t[1]),4&i&&(n.ongrabpreset=t[2]),8&i&&(n.ondragpreset=t[3]),16&i&&(n.ondroppreset=t[4]),e.$set(n)},i(t){i||(mr(e.$$.fragment,t),i=!0)},o(t){gr(e.$$.fragment,t),i=!1},d(t){Mr(e,t)}}}function Rm(t){let e,i;return e=new Nl({props:{scroll:t[27]?{scrollOffset:0,animate:!1}:void 0,scrollAutoCancel:t[6],elasticity:t[0],$$slots:{default:[Dm]},$$scope:{ctx:t}}}),{c(){Cr(e.$$.fragment)},m(t,n){Tr(e,t,n),i=!0},p(t,i){const n={};134217728&i&&(n.scroll=t[27]?{scrollOffset:0,animate:!1}:void 0),64&i&&(n.scrollAutoCancel=t[6]),1&i&&(n.elasticity=t[0]),603980830&i&&(n.$$scope={dirty:i,ctx:t}),e.$set(n)},i(t){i||(mr(e.$$.fragment,t),i=!0)},o(t){gr(e.$$.fragment,t),i=!1},d(t){Mr(e,t)}}}function Lm(t){let e,i,n,o;const r=[_m,wm],s=[];function a(t,e){return t[6]?0:t[13]?1:-1}return~(i=a(t))&&(n=s[i]=r[i](t)),{c(){e=wo("div"),n&&n.c(),Eo(e,"class","PinturaShapePresetsPalette")},m(t,n){xo(t,e,n),~i&&s[i].m(e,null),o=!0},p(t,[o]){let l=i;i=a(t),i===l?~i&&s[i].p(t,o):(n&&(pr(),gr(s[l],1,1,(()=>{s[l]=null})),fr()),~i?(n=s[i],n?n.p(t,o):(n=s[i]=r[i](t),n.c()),mr(n,1),n.m(e,null)):n=null)},i(t){o||(mr(n),o=!0)},o(t){gr(n),o=!1},d(t){t&&$o(e),~i&&s[i].d()}}}function Om(t,i,n){let o,r,s,a,l,c,h,u,d,{locale:p}=i,{presets:m}=i,{scrollElasticity:g}=i,{enableSelectImage:y=!0}=i,{willRenderPresetToolbar:v=Y}=i,{onaddpreset:b=f}=i,{ongrabpreset:x}=i,{ondragpreset:$}=i,{ondroppreset:w}=i;const _="presets-"+A(),k=(t,e="")=>$m(t)?t:Qe(t)?ri(t,e):`<img src="${t}" alt="${e}"/>`,S=t=>B(ve(t)),C=["src","alt","thumb","shape","id","mount","disabled"],T=t=>t.map((t=>(t=>ti(t)&&e(t[0])&&ti(t[1]))(t)?{...t[2],id:`${_}-${t[0].toLowerCase()}`,label:t[0],items:T(t[1])}:(t=>{let i,n,o,r,s,a,l,c=t;return e(t)?Qe(t)?(i=t,s=t,r=k(i,s)):(i=t,s=S(i),r=k(i,s)):(i=t.src,s=t.alt||(e(i)?S(i):e(t.thumb)?S(t.thumb):void 0),r=k(t.thumb||i,s),n=t.shape,a=t.mount,l=t.disabled,o=Object.keys(t).reduce(((e,i)=>(C.includes(i)||(e[i]=t[i]),e)),{})),{id:c,src:i,thumb:r,shape:n,shapeProps:o,alt:s,title:s,mount:a,disabled:l}})(t)));return t.$$set=t=>{"locale"in t&&n(14,p=t.locale),"presets"in t&&n(15,m=t.presets),"scrollElasticity"in t&&n(0,g=t.scrollElasticity),"enableSelectImage"in t&&n(16,y=t.enableSelectImage),"willRenderPresetToolbar"in t&&n(17,v=t.willRenderPresetToolbar),"onaddpreset"in t&&n(1,b=t.onaddpreset),"ongrabpreset"in t&&n(2,x=t.ongrabpreset),"ondragpreset"in t&&n(3,$=t.ondragpreset),"ondroppreset"in t&&n(4,w=t.ondroppreset)},t.$$.update=()=>{32768&t.$$.dirty&&n(5,o=T(m)),32&t.$$.dirty&&n(6,r=o.length),96&t.$$.dirty&&n(7,s=r&&o.some((t=>!!t.items))),160&t.$$.dirty&&n(8,a=s&&o),160&t.$$.dirty&&n(10,l=s&&o.reduce(((t,e)=>(t[e.id]=e,t)),{})),768&t.$$.dirty&&n(9,c=c||a&&(a.find((t=>!t.disabled))||{}).id),512&t.$$.dirty&&n(11,h={name:_,selected:c}),256&t.$$.dirty&&n(12,u=a&&a.map((t=>t.id))),212994&t.$$.dirty&&n(13,d=p&&v([y&&["Button","browse",{label:p.shapeLabelButtonSelectSticker,icon:p.shapeIconButtonSelectSticker,onclick:()=>{eu().then((t=>{t&&b(t)}))}}]]))},[g,b,x,$,w,o,r,s,a,c,l,h,u,d,p,m,y,v,({detail:t})=>n(9,c=t)]}class zm extends Er{constructor(t){super(),Pr(this,t,Om,Lm,eo,{locale:14,presets:15,scrollElasticity:0,enableSelectImage:16,willRenderPresetToolbar:17,onaddpreset:1,ongrabpreset:2,ondragpreset:3,ondroppreset:4})}}function Fm(t){let e,i,n,o;const r=[{locale:t[4]},{uid:t[14]},{parentRect:t[27]},{rootRect:t[36]},{utilRect:t[28]},{offset:t[38]},{disabled:!t[33]&&t[31]},{contextRotation:t[17]},{contextFlipX:t[18]},{contextFlipY:t[19]},{contextZoom:t[22]||t[24]},{active:t[23]},{opacity:t[32]},{hoverColor:t[50]},{eraseRadius:t[40]},{selectRadius:t[6]},{enableButtonFlipVertical:t[9]},{mapEditorPointToImagePoint:t[15]},{mapImagePointToEditorPoint:t[16]},{enableTapToAddText:t[12]},{textInputMode:t[7]},{oninteractionstart:t[71]},{oninteractionupdate:t[72]},{oninteractionrelease:t[73]},{oninteractionend:t[75]},{oninteractioncancel:t[74]},{onhovershape:t[77]},{onaddshape:t[131]},{onselectshape:t[132]},{ontapshape:t[133]},{onupdateshape:t[134]},{onremoveshape:t[135]},t[47]];function s(e){t[137](e)}function a(e){t[138](e)}let l={};for(let t=0;t<r.length;t+=1)l=Zn(l,r[t]);return void 0!==t[29]&&(l.markup=t[29]),void 0!==t[49]&&(l.ui=t[49]),e=new em({props:l}),t[136](e),Zo.push((()=>Sr(e,"markup",s))),Zo.push((()=>Sr(e,"ui",a))),{c(){Cr(e.$$.fragment)},m(t,i){Tr(e,t,i),o=!0},p(t,o){const s=433050320&o[0]|590759&o[1]|67157504&o[2]?_r(r,[16&o[0]&&{locale:t[4]},16384&o[0]&&{uid:t[14]},134217728&o[0]&&{parentRect:t[27]},32&o[1]&&{rootRect:t[36]},268435456&o[0]&&{utilRect:t[28]},128&o[1]&&{offset:t[38]},5&o[1]&&{disabled:!t[33]&&t[31]},131072&o[0]&&{contextRotation:t[17]},262144&o[0]&&{contextFlipX:t[18]},524288&o[0]&&{contextFlipY:t[19]},20971520&o[0]&&{contextZoom:t[22]||t[24]},8388608&o[0]&&{active:t[23]},2&o[1]&&{opacity:t[32]},524288&o[1]&&{hoverColor:t[50]},512&o[1]&&{eraseRadius:t[40]},64&o[0]&&{selectRadius:t[6]},512&o[0]&&{enableButtonFlipVertical:t[9]},32768&o[0]&&{mapEditorPointToImagePoint:t[15]},65536&o[0]&&{mapImagePointToEditorPoint:t[16]},4096&o[0]&&{enableTapToAddText:t[12]},128&o[0]&&{textInputMode:t[7]},512&o[2]&&{oninteractionstart:t[71]},1024&o[2]&&{oninteractionupdate:t[72]},2048&o[2]&&{oninteractionrelease:t[73]},8192&o[2]&&{oninteractionend:t[75]},4096&o[2]&&{oninteractioncancel:t[74]},32768&o[2]&&{onhovershape:t[77]},256&o[1]|67108864&o[2]&&{onaddshape:t[131]},256&o[1]&&{onselectshape:t[132]},256&o[1]&&{ontapshape:t[133]},256&o[1]|67108864&o[2]&&{onupdateshape:t[134]},256&o[1]|67108864&o[2]&&{onremoveshape:t[135]},65536&o[1]&&kr(t[47])]):{};!i&&536870912&o[0]&&(i=!0,s.markup=t[29],or((()=>i=!1))),!n&&262144&o[1]&&(n=!0,s.ui=t[49],or((()=>n=!1))),e.$set(s)},i(t){o||(mr(e.$$.fragment,t),o=!0)},o(t){gr(e.$$.fragment,t),o=!1},d(i){t[136](null),Mr(e,i)}}}function Bm(t){let e,i,n,o,r,s=t[37]&&Fm(t);return{c(){e=wo("div"),s&&s.c(),Eo(e,"slot","main"),Eo(e,"style",i="cursor: "+t[41])},m(i,a){xo(i,e,a),s&&s.m(e,null),t[139](e),n=!0,o||(r=[uo(l.call(null,e)),To(e,"dropfiles",(function(){to(t[11]?t[82]:f)&&(t[11]?t[82]:f).apply(this,arguments)})),uo(ha.call(null,e)),To(e,"measure",t[129]),To(e,"wheel",(function(){to(t[43]?t[87]:f)&&(t[43]?t[87]:f).apply(this,arguments)}),{passive:!1}),To(e,"interactionstart",(function(){to(t[44]?t[83]:f)&&(t[44]?t[83]:f).apply(this,arguments)})),To(e,"interactionupdate",(function(){to(t[44]?t[84]:f)&&(t[44]?t[84]:f).apply(this,arguments)})),To(e,"interactionrelease",(function(){to(t[44]?t[85]:f)&&(t[44]?t[85]:f).apply(this,arguments)})),To(e,"interactionend",(function(){to(t[44]?t[86]:f)&&(t[44]?t[86]:f).apply(this,arguments)})),uo(Il.call(null,e,{drag:!0,pinch:!0,inertia:!0,shouldStartInteraction:t[140]}))],o=!0)},p(o,r){(t=o)[37]?s?(s.p(t,r),64&r[1]&&mr(s,1)):(s=Fm(t),s.c(),mr(s,1),s.m(e,null)):s&&(pr(),gr(s,1,1,(()=>{s=null})),fr()),(!n||1024&r[1]&&i!==(i="cursor: "+t[41]))&&Eo(e,"style",i)},i(t){n||(mr(s),n=!0)},o(t){gr(s),n=!1},d(i){i&&$o(e),s&&s.d(),t[139](null),o=!1,Jn(r)}}}function Nm(t){let e,i;return e=new zm({props:{locale:t[4],presets:t[13],enableSelectImage:t[10],willRenderPresetToolbar:t[46],onaddpreset:t[81],ongrabpreset:t[78],ondragpreset:t[79],ondroppreset:t[80],scrollElasticity:t[45]}}),{c(){Cr(e.$$.fragment)},m(t,n){Tr(e,t,n),i=!0},p(t,i){const n={};16&i[0]&&(n.locale=t[4]),8192&i[0]&&(n.presets=t[13]),1024&i[0]&&(n.enableSelectImage=t[10]),32768&i[1]&&(n.willRenderPresetToolbar=t[46]),16384&i[1]&&(n.scrollElasticity=t[45]),e.$set(n)},i(t){i||(mr(e.$$.fragment,t),i=!0)},o(t){gr(e.$$.fragment,t),i=!1},d(t){Mr(e,t)}}}function Hm(t){let e,i,n,o,r,s;const a=[jm,Wm],l=[];function c(t,e){return t[42]?0:1}i=c(t),n=l[i]=a[i](t);let h=t[26]&&Ym(t);return{c(){e=wo("div"),n.c(),o=So(),h&&h.c(),r=Co(),Eo(e,"class","PinturaControlPanels")},m(t,n){xo(t,e,n),l[i].m(e,null),xo(t,o,n),h&&h.m(t,n),xo(t,r,n),s=!0},p(t,o){let s=i;i=c(t),i===s?l[i].p(t,o):(pr(),gr(l[s],1,1,(()=>{l[s]=null})),fr(),n=l[i],n?n.p(t,o):(n=l[i]=a[i](t),n.c()),mr(n,1),n.m(e,null)),t[26]?h?(h.p(t,o),67108864&o[0]&&mr(h,1)):(h=Ym(t),h.c(),mr(h,1),h.m(r.parentNode,r)):h&&(pr(),gr(h,1,1,(()=>{h=null})),fr())},i(t){s||(mr(n),mr(h),s=!0)},o(t){gr(n),gr(h),s=!1},d(t){t&&$o(e),l[i].d(),t&&$o(o),h&&h.d(t),t&&$o(r)}}}function Wm(t){let e,i,n;return i=new dm({props:{locale:t[4],shape:t[30],onchange:t[76],controls:t[8],scrollElasticity:t[45]}}),{c(){e=wo("div"),Cr(i.$$.fragment),Eo(e,"class","PinturaControlPanel")},m(t,o){xo(t,e,o),Tr(i,e,null),n=!0},p(t,e){const n={};16&e[0]&&(n.locale=t[4]),1073741824&e[0]&&(n.shape=t[30]),256&e[0]&&(n.controls=t[8]),16384&e[1]&&(n.scrollElasticity=t[45]),i.$set(n)},i(t){n||(mr(i.$$.fragment,t),n=!0)},o(t){gr(i.$$.fragment,t),n=!1},d(t){t&&$o(e),Mr(i)}}}function jm(t){let e,i,n;return i=new zm({props:{locale:t[4],presets:t[13],enableSelectImage:t[10],willRenderPresetToolbar:t[46],onaddpreset:t[81],ongrabpreset:t[78],ondragpreset:t[79],ondroppreset:t[80],scrollElasticity:t[45]}}),{c(){e=wo("div"),Cr(i.$$.fragment),Eo(e,"class","PinturaControlPanel")},m(t,o){xo(t,e,o),Tr(i,e,null),n=!0},p(t,e){const n={};16&e[0]&&(n.locale=t[4]),8192&e[0]&&(n.presets=t[13]),1024&e[0]&&(n.enableSelectImage=t[10]),32768&e[1]&&(n.willRenderPresetToolbar=t[46]),16384&e[1]&&(n.scrollElasticity=t[45]),i.$set(n)},i(t){n||(mr(i.$$.fragment,t),n=!0)},o(t){gr(i.$$.fragment,t),n=!1},d(t){t&&$o(e),Mr(i)}}}function Ym(t){let e,i;return e=new Nl({props:{class:"PinturaControlListScroller",elasticity:t[45],$$slots:{default:[Xm]},$$scope:{ctx:t}}}),{c(){Cr(e.$$.fragment)},m(t,n){Tr(e,t,n),i=!0},p(t,i){const n={};16384&i[1]&&(n.elasticity=t[45]),33554449&i[0]|134217728&i[5]&&(n.$$scope={dirty:i,ctx:t}),e.$set(n)},i(t){i||(mr(e.$$.fragment,t),i=!0)},o(t){gr(e.$$.fragment,t),i=!1},d(t){Mr(e,t)}}}function Vm(t){let e,i;return e=new wl({props:{$$slots:{default:[Um]},$$scope:{ctx:t}}}),{c(){Cr(e.$$.fragment)},m(t,n){Tr(e,t,n),i=!0},p(t,i){const n={};16&i[0]|201326592&i[5]&&(n.$$scope={dirty:i,ctx:t}),e.$set(n)},i(t){i||(mr(e.$$.fragment,t),i=!0)},o(t){gr(e.$$.fragment,t),i=!1},d(t){Mr(e,t)}}}function Um(t){let e,i=(P(t[181].icon)?t[181].icon(t[4]):t[181].icon)+"";return{c(){e=_o("g")},m(t,n){xo(t,e,n),e.innerHTML=i},p(t,n){16&n[0]|67108864&n[5]&&i!==(i=(P(t[181].icon)?t[181].icon(t[4]):t[181].icon)+"")&&(e.innerHTML=i)},d(t){t&&$o(e)}}}function qm(t){let e,i,n,o,r,s=(P(t[181].label)?t[181].label(t[4]):t[181].label)+"",a=t[181].icon&&Vm(t);return{c(){e=wo("div"),a&&a.c(),i=So(),n=wo("span"),o=ko(s),Eo(e,"slot","option")},m(t,s){xo(t,e,s),a&&a.m(e,null),bo(e,i),bo(e,n),bo(n,o),r=!0},p(t,n){t[181].icon?a?(a.p(t,n),67108864&n[5]&&mr(a,1)):(a=Vm(t),a.c(),mr(a,1),a.m(e,i)):a&&(pr(),gr(a,1,1,(()=>{a=null})),fr()),(!r||16&n[0]|67108864&n[5])&&s!==(s=(P(t[181].label)?t[181].label(t[4]):t[181].label)+"")&&Ao(o,s)},i(t){r||(mr(a),r=!0)},o(t){gr(a),r=!1},d(t){t&&$o(e),a&&a.d()}}}function Xm(t){let e,i;return e=new Qc({props:{locale:t[4],class:"PinturaControlList",optionClass:"PinturaControlListOption",layout:"row",options:t[25],selectedIndex:t[25].findIndex(t[130]),onchange:t[70],$$slots:{option:[qm,({option:t})=>({181:t}),({option:t})=>[0,0,0,0,0,t?67108864:0]]},$$scope:{ctx:t}}}),{c(){Cr(e.$$.fragment)},m(t,n){Tr(e,t,n),i=!0},p(t,i){const n={};16&i[0]&&(n.locale=t[4]),33554432&i[0]&&(n.options=t[25]),33554433&i[0]&&(n.selectedIndex=t[25].findIndex(t[130])),16&i[0]|201326592&i[5]&&(n.$$scope={dirty:i,ctx:t}),e.$set(n)},i(t){i||(mr(e.$$.fragment,t),i=!0)},o(t){gr(e.$$.fragment,t),i=!1},d(t){Mr(e,t)}}}function Gm(t){let e,i,n,o;const r=[Hm,Nm],s=[];function a(t,e){return t[35]?0:t[42]?1:-1}return~(i=a(t))&&(n=s[i]=r[i](t)),{c(){e=wo("div"),n&&n.c(),Eo(e,"slot","footer"),Eo(e,"style",t[48])},m(t,n){xo(t,e,n),~i&&s[i].m(e,null),o=!0},p(t,l){let c=i;i=a(t),i===c?~i&&s[i].p(t,l):(n&&(pr(),gr(s[c],1,1,(()=>{s[c]=null})),fr()),~i?(n=s[i],n?n.p(t,l):(n=s[i]=r[i](t),n.c()),mr(n,1),n.m(e,null)):n=null),(!o||131072&l[1])&&Eo(e,"style",t[48])},i(t){o||(mr(n),o=!0)},o(t){gr(n),o=!1},d(t){t&&$o(e),~i&&s[i].d()}}}function Zm(t){let e,i;return e=new np({props:{$$slots:{footer:[Gm],main:[Bm]},$$scope:{ctx:t}}}),e.$on("measure",t[141]),{c(){Cr(e.$$.fragment)},m(t,n){Tr(e,t,n),i=!0},p(t,i){const n={};2146435025&i[0]|1048575&i[1]|134217728&i[5]&&(n.$$scope={dirty:i,ctx:t}),e.$set(n)},i(t){i||(mr(e.$$.fragment,t),i=!0)},o(t){gr(e.$$.fragment,t),i=!1},d(t){Mr(e,t)}}}function Km(t,i,n){let o,r,s,a,l,c,h,u,d,p,f,m,g,y,v,b,x,$,w,_,k,S,C,T,M,P,E,I,A,D,R,L,O,z,F,B,N,H,W,j,V,U,q,X,G,Z,J,tt,it,nt,rt,st,at,lt,ct,dt,pt,mt,gt,yt,vt,bt=Xn,xt=()=>(bt(),bt=io(Pt,(t=>n(23,W=t))),Pt),$t=Xn,wt=()=>($t(),$t=io(ce,(t=>n(27,q=t))),ce),_t=Xn,kt=()=>(_t(),_t=io(It,(t=>n(117,Z=t))),It),St=Xn,Ct=()=>(St(),St=io(Rt,(t=>n(29,it=t))),Rt),Tt=Xn,Mt=()=>(Tt(),Tt=io(Et,(t=>n(32,rt=t))),Et);t.$$.on_destroy.push((()=>bt())),t.$$.on_destroy.push((()=>$t())),t.$$.on_destroy.push((()=>_t())),t.$$.on_destroy.push((()=>St())),t.$$.on_destroy.push((()=>Tt()));let{isActive:Pt}=i;xt();let{isActiveFraction:Et}=i;Mt();let{isVisible:It}=i;kt();let{stores:At}=i,{locale:Dt={}}=i,{shapes:Rt}=i;Ct();let{toolbar:Lt=[]}=i,{toolShapes:Ot=[]}=i,{toolActive:Ft}=i,{toolSelectRadius:Bt}=i,{zoomOptions:Nt=[.25,.5,1,1.25,1.5,2,3,4,6,8,16]}=i,{textInputMode:Ht}=i,{shapeControls:Wt={}}=i,{enableButtonFlipVertical:jt=!1}=i,{enablePresetSelectImage:Yt=!0}=i,{enablePresetDropImage:Xt=!0}=i,{enableZoom:Gt=!0}=i,{enablePan:Zt=!0}=i,{enableSelectToolToAddShape:Kt=!1}=i,{enableTapToAddText:Qt=!1}=i,{enableZoomControls:Jt=!1}=i,{willRenderPresetToolbar:te}=i,{shapePresets:ee=[]}=i,{utilKey:ne}=i,{mapScreenPointToImagePoint:oe}=i,{mapImagePointToScreenPoint:re}=i,{imageRotation:se=0}=i,{imageFlipX:ae=!1}=i,{imageFlipY:le=!1}=i,{parentRect:ce}=i;wt();let{hooks:he={}}=i;const{env:ue,animation:de,history:pe,rootRect:fe,rootColorSecondary:me,stageRect:ge,stageScalar:ye,utilRect:ve,utilTools:be,elasticityMultiplier:xe,scrollElasticity:$e,imageOverlayMarkup:we,imagePreviewModifiers:_e,imageCropRect:ke,shapePreprocessor:Se,imageSelectionRect:Ce,imageSelectionZoom:Te,imageSelectionPan:Me,imageSelectionStageFitScalar:Pe,imageSelectionStoredState:Ee,imagePreviewUpscale:Ie,isInteracting:Ae}=At;oo(t,ue,(t=>n(126,pt=t))),oo(t,de,(t=>n(127,mt=t))),oo(t,fe,(t=>n(36,X=t))),oo(t,me,(t=>n(50,vt=t))),oo(t,ge,(t=>n(118,tt=t))),oo(t,ye,(t=>n(103,j=t))),oo(t,ve,(t=>n(28,J=t))),oo(t,we,(t=>n(49,yt=t))),oo(t,_e,(t=>n(115,G=t))),oo(t,ke,(t=>n(158,st=t))),oo(t,Se,(t=>n(123,nt=t))),oo(t,Ce,(t=>n(160,ct=t))),oo(t,Te,(t=>n(22,N=t))),oo(t,Me,(t=>n(154,B=t))),oo(t,Pe,(t=>n(24,U=t))),oo(t,Ee,(t=>n(155,H=t))),oo(t,Ie,(t=>n(105,V=t))),oo(t,Ae,(t=>n(159,lt=t)));const De=(t={})=>{const{pan:e=B,zoom:i=N}=t;ho(Ee,H={translation:e,zoom:i},H)},Re=()=>{ho(Te,N=void 0,N),ho(Me,B=K(),B),Oe.set(void 0,{hard:!0})},Le=()=>{Re(),De()},Oe=Qs(void 0,{precision:.01});Oe.subscribe((t=>{if(void 0===t)return ho(Te,N=void 0,N),void ho(Me,B=K(),B);const e=N;t<=1?ho(Me,B=K(),B):t<=e&&ho(Me,B=ut(B,.8),B),ho(Te,N=t,N)}));const ze=t=>{Oe.update((e=>{const i=t(e||U);return De({zoom:i}),i}))},Fe=qo("keysPressed");oo(t,Fe,(t=>n(124,at=t)));const Be=t=>oe(Af(t,X));let Ne,He,We,je,Ye={};const Ve=(t,i,n)=>{let o=!1;i||(o=!0,i=P?oe(Vt(tt)):Vt(st)),i.x-=q.x||0,i.y-=q.y||0,(ae||le)&&(t.flipX=ae,t.flipY=le);const r=Ne.getShapesNearPosition(i);if(o&&r.length){const t=.1*Math.min(st.width,st.height);i.x+=Math.round(-t+Math.random()*t*2),i.y+=Math.round(-t+Math.random()*t*2)}if(0!==se&&(t.rotation=ae&&le?-se:ae||le?se:-se),Je(t,"width")&&Je(t,"height")){const{width:e,height:n}=$n(t,["width","height"],q);wn(t,{x:i.x-.5*e,y:i.y-.5*n},q)}else if(Ni(t))wn(t,{x:i.x,y:i.y},q);else if(Hi(t)){const{x1:o,y1:r,x2:s,y2:a}=$n(t,["x1","y1","x2","y2"],q),l=ft(Q(o,r),Q(s,a))||e(n)?fn(n,q.width):n;wn(t,{x1:i.x-l,y1:i.y+l,x2:i.x+l,y2:i.y-l},q)}return t},Ue=(t,e)=>{const i=Ve(Di(t,st),e);return t.shape&&(Je(t.shape,"x")&&(i.x=t.shape.x),Je(t.shape,"y")&&(i.y=t.shape.y)),qe(i)},qe=t=>{const{beforeAddShape:e=(()=>!0)}=he;if(e(t))return Ne.addShape(t),Ne.selectShape(t),pe.write(),R("addshape",t),t};let Xe,Ge,Ze,Qe,ti,ei=!1,ii=Date.now(),ni=0,oi=!1,ri=!1;const si=()=>pe.write();let ai;const li=Dr({});oo(t,li,(t=>n(125,dt=t)));const ci=Qs(mt?20:0);return oo(t,ci,(t=>n(128,gt=t))),t.$$set=t=>{"isActive"in t&&xt(n(1,Pt=t.isActive)),"isActiveFraction"in t&&Mt(n(2,Et=t.isActiveFraction)),"isVisible"in t&&kt(n(3,It=t.isVisible)),"stores"in t&&n(91,At=t.stores),"locale"in t&&n(4,Dt=t.locale),"shapes"in t&&Ct(n(5,Rt=t.shapes)),"toolbar"in t&&n(92,Lt=t.toolbar),"toolShapes"in t&&n(93,Ot=t.toolShapes),"toolActive"in t&&n(0,Ft=t.toolActive),"toolSelectRadius"in t&&n(6,Bt=t.toolSelectRadius),"zoomOptions"in t&&n(94,Nt=t.zoomOptions),"textInputMode"in t&&n(7,Ht=t.textInputMode),"shapeControls"in t&&n(8,Wt=t.shapeControls),"enableButtonFlipVertical"in t&&n(9,jt=t.enableButtonFlipVertical),"enablePresetSelectImage"in t&&n(10,Yt=t.enablePresetSelectImage),"enablePresetDropImage"in t&&n(11,Xt=t.enablePresetDropImage),"enableZoom"in t&&n(95,Gt=t.enableZoom),"enablePan"in t&&n(96,Zt=t.enablePan),"enableSelectToolToAddShape"in t&&n(97,Kt=t.enableSelectToolToAddShape),"enableTapToAddText"in t&&n(12,Qt=t.enableTapToAddText),"enableZoomControls"in t&&n(98,Jt=t.enableZoomControls),"willRenderPresetToolbar"in t&&n(99,te=t.willRenderPresetToolbar),"shapePresets"in t&&n(13,ee=t.shapePresets),"utilKey"in t&&n(14,ne=t.utilKey),"mapScreenPointToImagePoint"in t&&n(15,oe=t.mapScreenPointToImagePoint),"mapImagePointToScreenPoint"in t&&n(16,re=t.mapImagePointToScreenPoint),"imageRotation"in t&&n(17,se=t.imageRotation),"imageFlipX"in t&&n(18,ae=t.imageFlipX),"imageFlipY"in t&&n(19,le=t.imageFlipY),"parentRect"in t&&wt(n(20,ce=t.parentRect)),"hooks"in t&&n(100,he=t.hooks)},t.$$.update=()=>{var e,i,L;8388608&t.$$.dirty[0]&&(W?(ho(Te,N=Gt?H.zoom:void 0,N),ho(Me,B=Zt?et(H.translation):K(),B),Oe.set(N)):Re()),1024&t.$$.dirty[3]&&(o=j>=1),16777232&t.$$.dirty[0]|5122&t.$$.dirty[3]&&n(104,r=[(V||j<1)&&[void 0,Nu(U)+"%",{sublabel:Dt.labelZoomFit}],...Nt.map((t=>[t,Nu(t)+"%"]))].filter(Boolean).map((t=>(1===t[0]&&(t[2]={sublabel:Dt.labelZoomActual}),t))).sort(((t,e)=>{const i=t[0]||U,n=e[0]||U;return i<n?-1:n<i?1:0}))),16777216&t.$$.dirty[0]|2048&t.$$.dirty[3]&&n(106,s=Math.min(r.reduce(((t,[e])=>e<t?e:t),Number.MAX_SAFE_INTEGER),U)),2048&t.$$.dirty[3]&&n(107,a=r.reduce(((t,[e])=>e>t?e:t),Number.MIN_SAFE_INTEGER)),20971520&t.$$.dirty[0]|5120&t.$$.dirty[3]&&n(109,c=N||(V||j<1?U:1)),67584&t.$$.dirty[3]&&n(108,(e=r.map((([t])=>t)),i=c,l=e.findIndex((t=>t===i)))),65536&t.$$.dirty[3]&&n(110,h=Nu(c)+"%"),4194320&t.$$.dirty[0]|190496&t.$$.dirty[3]&&n(111,u=Jt&&[["Button","zoom-out",{hideLabel:!0,label:Dt.labelZoomOut,icon:Dt.iconZoomOut,disabled:N===s,onclick:()=>ze((t=>Math.max(s,t-.25))),onhold:()=>ze((t=>Math.max(s,.9*t)))}],["Dropdown","zoom-level",{label:h,labelClass:"PinturaFixedWidthCharacters",options:r,selectedIndex:l,onchange:t=>{return(e=t.value)?Oe.set(e):(e=void 0,Oe.set(void 0,{hard:!0})),void De({zoom:e});var e}}],["Button","zoom-in",{hideLabel:!0,label:Dt.labelZoomIn,icon:Dt.iconZoomIn,disabled:N===a,onclick:()=>ze((t=>Math.min(a,t+.25))),onhold:()=>ze((t=>Math.min(a,1.1*t)))}]]),8388608&t.$$.dirty[0]|262144&t.$$.dirty[3]&&W&&u&&be.set(u),8192&t.$$.dirty[0]|1073741824&t.$$.dirty[2]|64&t.$$.dirty[3]&&n(25,d=0!==ee.length||te?Lt:Lt.filter((t=>"preset"!==t[0]))),256&t.$$.dirty[0]&&n(112,p=Object.keys(Wt).length),33554432&t.$$.dirty[0]&&n(26,f=d.length>1),33554432&t.$$.dirty[0]&&n(113,m=!!d.length),100663297&t.$$.dirty[0]&&f&&void 0===Ft&&n(0,Ft=d[0][0]),1&t.$$.dirty[0]&&n(114,g=void 0!==Ft),3670016&t.$$.dirty[3]&&n(35,y=(!g||m)&&p),8404992&t.$$.dirty[0]|4194304&t.$$.dirty[3]&&(W?ho(_e,G[ne]={maskMarkupOpacity:.85},G):delete G[ne]),1&t.$$.dirty[0]&&Ft&&Ne&&Ne.blurShapes(),8388608&t.$$.dirty[0]|16777216&t.$$.dirty[3]&&n(37,v=W&&Z),268435456&t.$$.dirty[0]|33554432&t.$$.dirty[3]&&n(38,b=J&&Q(tt.x-J.x,tt.y-J.y)),256&t.$$.dirty[0]&&n(119,x=Object.keys(Wt)),536870912&t.$$.dirty[0]&&n(120,$=it.filter(Ui)[0]),536870912&t.$$.dirty[0]&&n(121,w=it.find((t=>qi(t)))),8388609&t.$$.dirty[0]|1&t.$$.dirty[3]&&n(122,_=W&&(Ot[Ft]?dn(Pi(Ot[Ft][0])):{})),603980032&t.$$.dirty[3]&&n(116,k=_&&Object.keys(_).reduce(((t,e)=>{const i="disableStyle"===e,n=x.find((t=>t.split("_").includes(e)));return i||n?(void 0===_[e]||(t[e]=Je(Ye,e)?Ye[e]:_[e]),t):t}),{})),142606336&t.$$.dirty[3]&&n(30,S=$||k),1073741824&t.$$.dirty[0]|1073741824&t.$$.dirty[3]&&S&&S.lineEnd&&!nt&&console.warn("Set shapePreprocessor property to draw lineStart and lineEnd styles.\nhttps://pqina.nl/pintura/docs/v8/api/exports/#createshapepreprocessor"),545259520&t.$$.dirty[3]&&n(40,C=_&&Ke(_.eraseRadius)?(k||_).eraseRadius:void 0),1&t.$$.dirty[4]&&n(31,E=at&&32===at[0]),1&t.$$.dirty[1]|134218240&t.$$.dirty[3]&&n(41,T=((t,e,i)=>{if(i)return"grab";if(!t)return"crosshair";let n=t||e;return Ui(n)?qi(n)?"modal"===Ht?"default":"text":an(n)?"move":"default":"crosshair"})(je,$,E)),9217&t.$$.dirty[0]|2&t.$$.dirty[1]|64&t.$$.dirty[3]&&n(42,M=rt>0&&"preset"===Ft&&(ee.length>0||Yt||te)),134217728&t.$$.dirty[0]&&(P=!Je(q,"x")&&!Je(q,"y")),268435456&t.$$.dirty[3]&&n(33,I=!!w),4&t.$$.dirty[1]|4&t.$$.dirty[3]&&n(43,A=Gt&&!I),4&t.$$.dirty[1]|8&t.$$.dirty[3]&&n(44,D=Zt&&!I),2097152&t.$$.dirty[0]&&n(39,R=ai&&(L=ai,(t,e)=>{L.dispatchEvent(jh(t,e))})),64&t.$$.dirty[3]|6&t.$$.dirty[4]&&n(46,O=dt&&te?t=>iu((()=>te(t,Ue,{...pt},(()=>li.set({}))))):Y),128&t.$$.dirty[3]&&n(47,z=Object.keys(he).reduce(((t,e)=>("beforeAddShape"===e||(t[e]=he[e]),t)),{})),8388608&t.$$.dirty[0]|8&t.$$.dirty[4]&&mt&&ci.set(W?0:20),16&t.$$.dirty[4]&&n(48,F=gt?`transform: translateY(${gt}px)`:void 0)},n(45,L=xe*$e),[Ft,Pt,Et,It,Dt,Rt,Bt,Ht,Wt,jt,Yt,Xt,Qt,ee,ne,oe,re,se,ae,le,ce,ai,N,W,U,d,f,q,J,it,S,E,rt,I,Ne,y,X,v,b,R,C,T,M,A,D,L,O,z,F,yt,vt,ue,de,fe,me,ge,ye,ve,we,_e,ke,Se,Ce,Te,Me,Pe,Ee,Ie,Ae,Fe,({value:t},e)=>{n(0,Ft=t),(Kt||/enter/i.test(e.key))&&(t=>{const[e,i]=Ot[t];let n,o,r="relative"===i.position;const s=r?"0%":0,a=r?"0%":0;Bi(e)||Oi(e)?(o=r?"20%":.2*q.width,n=Pi(e),n.x=s,n.y=a,wn(n,{width:o,height:o},q)):Ni(e)?(o=r?"10%":.1*q.width,n=Pi(e),n.x=s,n.y=a,wn(n,{rx:o,ry:o},q)):Hi(e)&&(o=r?"10%":.1*q.width,n=Pi(e),n.x1=s,n.y1=a,n.x2=s,n.y2=a),n&&Promise.resolve().then((()=>{qe(Ve(n,void 0,o))}))})(t)},t=>{if("eraser"===Ft)He=Ne.eraseShape();else if(Ft&&Ot[Ft]){const[t,e]=Ot[Ft];He=Ne.createShape({...t,...k},e)}else He=void 0;return!!He&&(He.start(t),!0)},t=>!!He&&(He.update(t),!0),t=>!!He&&(He.release(t),!0),t=>!!He&&(He.cancel(t),He=void 0,!0),t=>!!He&&(He.end(t),He=void 0,!0),function(t){Object.keys(t).forEach((e=>n(101,Ye[e]=t[e],Ye))),R("selectstyle",t),$&&(Ne.updateMarkupShape($,t),clearTimeout(We),We=setTimeout((()=>{si()}),200))},t=>n(102,je=t),()=>{ei=!1},(t,e)=>{if(ei)return;const{beforeAddShape:i=(()=>!0)}=he,n=Be(e),o=Ne.getMarkupItemDraft(),r=ie(st,{x:n.x+(q.x||0),y:n.y+(q.y||0)});if(o&&!r&&Ne.discardMarkupItemDraft(),r){if(!o){const o=Di(t,st),r=Ve(o,n);return i(r)?(Ji(r),void Ne.addShape(r)):(ei=!0,void e.preventDefault())}Bi(o)&&(n.x-=.5*o.width,n.y-=.5*o.height),t.shape&&(Je(t.shape,"x")&&(n.x=t.shape.x),Je(t.shape,"y")&&(n.y=t.shape.y)),Ne.updateMarkupShape(o,n)}},(t,e)=>{if(ei)return;const i=Be(e);if(!ie(st,{x:i.x+(q.x||0),y:i.y+(q.y||0)}))return void Ne.discardMarkupItemDraft();const n=Ne.confirmMarkupItemDraft();Ne.selectShape(n),R("addshape",n),pe.write()},t=>Ue(t),t=>{return e=t.detail.resources,i=Be(t.detail.event),e.forEach((t=>Ue(t,i)));var e,i},t=>{ho(Ae,lt=!0,lt),Ze=!1,Xe=B,Ge=o?N||1:N||U},t=>{const{scalar:e=1,translation:i,isMultiTouching:n}=t.detail;if(!Xe||!n&&!E)return;n&&ut(i,.5),Qe=ot(B);const o=Q(Xe.x+i.x,Xe.y+i.y),r=ot(o);Ze=r<Qe,Te.set(Qr(Ge*e,s,a)),Me.set(o)},t=>{if(Ze&&Qe<50)return Xe=void 0,Ge=void 0,void Me.set(K())},t=>{if(Xe=void 0,Ge=void 0,E&&t.detail.isDoubleTap)return Le();ho(Ae,lt=!1,lt),De()},t=>{if(t.preventDefault(),t.stopPropagation(),ri)return;clearTimeout(ti);const e=K(),i=B,n=Date.now(),r=n-ii;ii=n;const l=r<24;ni=l?ni+1:0;const c=-1*Ol(t),h=V?U:o?1:U,u=V?N||U:o?N||1:N||U,d=u*(1+c/(l?50:100)),p=Math.abs(d-h),f=d<u,m=u>h&&f||u<h&&d>u,g=ni>=5;if(l||(oi=!1),ni>0&&!oi&&(oi=m),g&&oi)return Le(),ri=!0,void setTimeout((()=>{ri=!1}),100);if(g)return;!l&&m&&p<=.05&&(ti=setTimeout((()=>{Le()}),250)),ho(Te,N=Qr(d,s,a),N);const y=Mp(t,X,tt),v=zt(ct);qt(v,u),Ut(v,i);const b=Vt(v),x=zt(v);qt(x,N-u+1,y);const $=Vt(x),w=(k=u,(_=ht($,b)).x/=k,_.y/=k,_);var _,k;((t,e,i)=>{t.x=e,t.y=i})(e,i.x+w.x,i.y+w.y),ho(Me,B=f&&l?ut(B,.85):e,B),De()},si,li,ci,At,Lt,Ot,Nt,Gt,Zt,Kt,Jt,te,he,Ye,je,j,r,V,s,a,l,c,h,u,p,m,g,G,k,Z,tt,x,$,w,_,nt,at,dt,pt,mt,gt,function(e){Xo(t,e)},t=>t[0]===Ft,t=>{R("addshape",t),si()},t=>{R("selectshape",t)},t=>{R("tapshape",t)},t=>{R("updateshape",t),si()},t=>{R("removeshape",t),si()},function(t){Zo[t?"unshift":"push"]((()=>{Ne=t,n(34,Ne)}))},function(t){it=t,Rt.set(it)},function(t){yt=t,we.set(yt)},function(t){Zo[t?"unshift":"push"]((()=>{ai=t,n(21,ai)}))},t=>!Yh(t.target),function(e){Xo(t,e)}]}class Qm extends Er{constructor(t){super(),Pr(this,t,Km,Zm,eo,{isActive:1,isActiveFraction:2,isVisible:3,stores:91,locale:4,shapes:5,toolbar:92,toolShapes:93,toolActive:0,toolSelectRadius:6,zoomOptions:94,textInputMode:7,shapeControls:8,enableButtonFlipVertical:9,enablePresetSelectImage:10,enablePresetDropImage:11,enableZoom:95,enablePan:96,enableSelectToolToAddShape:97,enableTapToAddText:12,enableZoomControls:98,willRenderPresetToolbar:99,shapePresets:13,utilKey:14,mapScreenPointToImagePoint:15,mapImagePointToScreenPoint:16,imageRotation:17,imageFlipX:18,imageFlipY:19,parentRect:20,hooks:100},[-1,-1,-1,-1,-1,-1])}get isActive(){return this.$$.ctx[1]}set isActive(t){this.$set({isActive:t}),ar()}get isActiveFraction(){return this.$$.ctx[2]}set isActiveFraction(t){this.$set({isActiveFraction:t}),ar()}get isVisible(){return this.$$.ctx[3]}set isVisible(t){this.$set({isVisible:t}),ar()}get stores(){return this.$$.ctx[91]}set stores(t){this.$set({stores:t}),ar()}get locale(){return this.$$.ctx[4]}set locale(t){this.$set({locale:t}),ar()}get shapes(){return this.$$.ctx[5]}set shapes(t){this.$set({shapes:t}),ar()}get toolbar(){return this.$$.ctx[92]}set toolbar(t){this.$set({toolbar:t}),ar()}get toolShapes(){return this.$$.ctx[93]}set toolShapes(t){this.$set({toolShapes:t}),ar()}get toolActive(){return this.$$.ctx[0]}set toolActive(t){this.$set({toolActive:t}),ar()}get toolSelectRadius(){return this.$$.ctx[6]}set toolSelectRadius(t){this.$set({toolSelectRadius:t}),ar()}get zoomOptions(){return this.$$.ctx[94]}set zoomOptions(t){this.$set({zoomOptions:t}),ar()}get textInputMode(){return this.$$.ctx[7]}set textInputMode(t){this.$set({textInputMode:t}),ar()}get shapeControls(){return this.$$.ctx[8]}set shapeControls(t){this.$set({shapeControls:t}),ar()}get enableButtonFlipVertical(){return this.$$.ctx[9]}set enableButtonFlipVertical(t){this.$set({enableButtonFlipVertical:t}),ar()}get enablePresetSelectImage(){return this.$$.ctx[10]}set enablePresetSelectImage(t){this.$set({enablePresetSelectImage:t}),ar()}get enablePresetDropImage(){return this.$$.ctx[11]}set enablePresetDropImage(t){this.$set({enablePresetDropImage:t}),ar()}get enableZoom(){return this.$$.ctx[95]}set enableZoom(t){this.$set({enableZoom:t}),ar()}get enablePan(){return this.$$.ctx[96]}set enablePan(t){this.$set({enablePan:t}),ar()}get enableSelectToolToAddShape(){return this.$$.ctx[97]}set enableSelectToolToAddShape(t){this.$set({enableSelectToolToAddShape:t}),ar()}get enableTapToAddText(){return this.$$.ctx[12]}set enableTapToAddText(t){this.$set({enableTapToAddText:t}),ar()}get enableZoomControls(){return this.$$.ctx[98]}set enableZoomControls(t){this.$set({enableZoomControls:t}),ar()}get willRenderPresetToolbar(){return this.$$.ctx[99]}set willRenderPresetToolbar(t){this.$set({willRenderPresetToolbar:t}),ar()}get shapePresets(){return this.$$.ctx[13]}set shapePresets(t){this.$set({shapePresets:t}),ar()}get utilKey(){return this.$$.ctx[14]}set utilKey(t){this.$set({utilKey:t}),ar()}get mapScreenPointToImagePoint(){return this.$$.ctx[15]}set mapScreenPointToImagePoint(t){this.$set({mapScreenPointToImagePoint:t}),ar()}get mapImagePointToScreenPoint(){return this.$$.ctx[16]}set mapImagePointToScreenPoint(t){this.$set({mapImagePointToScreenPoint:t}),ar()}get imageRotation(){return this.$$.ctx[17]}set imageRotation(t){this.$set({imageRotation:t}),ar()}get imageFlipX(){return this.$$.ctx[18]}set imageFlipX(t){this.$set({imageFlipX:t}),ar()}get imageFlipY(){return this.$$.ctx[19]}set imageFlipY(t){this.$set({imageFlipY:t}),ar()}get parentRect(){return this.$$.ctx[20]}set parentRect(t){this.$set({parentRect:t}),ar()}get hooks(){return this.$$.ctx[100]}set hooks(t){this.$set({hooks:t}),ar()}}var Jm=(t,e,i,n,o,r,s,a,l)=>{const c=et(t),h=.5*i.width,u=.5*i.height,d=.5*e.width,p=.5*e.height,f=o.x+n.x,m=o.y+n.y;a&&(c.x=i.width-c.x),l&&(c.y=i.height-c.y);const g=Math.cos(r),y=Math.sin(r);c.x-=h,c.y-=u;const v=c.x*g-c.y*y,b=c.x*y+c.y*g;c.x=h+v,c.y=u+b,c.x*=s,c.y*=s,c.x+=d,c.y+=p,c.x+=f,c.y+=m,c.x-=h*s,c.y-=u*s;const x=(o.x-f)*s,$=(o.y-m)*s,w=x*g-$*y,_=x*y+$*g;return c.x+=w,c.y+=_,c},tg=(t,e,i,n,o,r,s,a,l)=>{const c=et(t),h=Mt(i),u=Mt(e),d=Q(o.x+n.x,o.y+n.y),p=Math.cos(r),f=Math.sin(r);c.x-=u.x,c.y-=u.y;const m=(o.x-d.x)*s,g=(o.y-d.y)*s,y=m*p-g*f,v=m*f+g*p;c.x-=y,c.y-=v,c.x-=d.x,c.y-=d.y,c.x/=s,c.y/=s;const b=c.x*p+c.y*f,x=c.x*f-c.y*p;return c.x=b,c.y=-x,c.x+=h.x,c.y+=h.y,a&&(c.x=i.width-c.x),l&&(c.y=i.height-c.y),c};function eg(t){let e,i,n;function o(e){t[46](e)}let r={stores:t[4],locale:t[5],isActive:t[1],isActiveFraction:t[2],isVisible:t[3],mapScreenPointToImagePoint:t[30],mapImagePointToScreenPoint:t[31],utilKey:"annotate",imageRotation:t[32],imageFlipX:t[28],imageFlipY:t[29],shapes:t[34],toolbar:t[12]||t[6],toolShapes:t[13]||t[7],enableSelectToolToAddShape:t[19],enableTapToAddText:t[20],enableZoomControls:t[21],shapeControls:t[14]||t[8],shapePresets:t[17],enableButtonFlipVertical:t[15],parentRect:t[35],enablePresetSelectImage:t[16],toolSelectRadius:t[9],textInputMode:t[10],willRenderPresetToolbar:t[18]||t[11],hooks:{willRenderShapeControls:t[22],beforeAddShape:t[23],beforeRemoveShape:t[24],beforeDeselectShape:t[25],beforeSelectShape:t[26],beforeUpdateShape:t[27]}};return void 0!==t[0]&&(r.toolActive=t[0]),e=new Qm({props:r}),Zo.push((()=>Sr(e,"toolActive",o))),e.$on("measure",t[47]),{c(){Cr(e.$$.fragment)},m(t,i){Tr(e,t,i),n=!0},p(t,n){const o={};16&n[0]&&(o.stores=t[4]),32&n[0]&&(o.locale=t[5]),2&n[0]&&(o.isActive=t[1]),4&n[0]&&(o.isActiveFraction=t[2]),8&n[0]&&(o.isVisible=t[3]),1073741824&n[0]&&(o.mapScreenPointToImagePoint=t[30]),1&n[1]&&(o.mapImagePointToScreenPoint=t[31]),2&n[1]&&(o.imageRotation=t[32]),268435456&n[0]&&(o.imageFlipX=t[28]),536870912&n[0]&&(o.imageFlipY=t[29]),4160&n[0]&&(o.toolbar=t[12]||t[6]),8320&n[0]&&(o.toolShapes=t[13]||t[7]),524288&n[0]&&(o.enableSelectToolToAddShape=t[19]),1048576&n[0]&&(o.enableTapToAddText=t[20]),2097152&n[0]&&(o.enableZoomControls=t[21]),16640&n[0]&&(o.shapeControls=t[14]||t[8]),131072&n[0]&&(o.shapePresets=t[17]),32768&n[0]&&(o.enableButtonFlipVertical=t[15]),65536&n[0]&&(o.enablePresetSelectImage=t[16]),512&n[0]&&(o.toolSelectRadius=t[9]),1024&n[0]&&(o.textInputMode=t[10]),264192&n[0]&&(o.willRenderPresetToolbar=t[18]||t[11]),264241152&n[0]&&(o.hooks={willRenderShapeControls:t[22],beforeAddShape:t[23],beforeRemoveShape:t[24],beforeDeselectShape:t[25],beforeSelectShape:t[26],beforeUpdateShape:t[27]}),!i&&1&n[0]&&(i=!0,o.toolActive=t[0],or((()=>i=!1))),e.$set(o)},i(t){n||(mr(e.$$.fragment,t),n=!0)},o(t){gr(e.$$.fragment,t),n=!1},d(t){Mr(e,t)}}}function ig(t,e,i){let n,o,r,s,a,l,c,h,u,{isActive:d}=e,{isActiveFraction:p}=e,{isVisible:f}=e,{stores:m}=e,{locale:g={}}=e,{markupEditorToolbar:y}=e,{markupEditorToolStyles:v}=e,{markupEditorShapeStyleControls:b}=e,{markupEditorToolSelectRadius:x}=e,{markupEditorTextInputMode:$}=e,{willRenderShapePresetToolbar:w}=e,{annotateTools:_}=e,{annotateToolShapes:k}=e,{annotateShapeControls:S}=e,{annotateActiveTool:C}=e,{annotateEnableButtonFlipVertical:T=!1}=e,{annotateEnableSelectImagePreset:M=!1}=e,{annotatePresets:P=[]}=e,{annotateWillRenderShapePresetToolbar:E}=e,{enableSelectToolToAddShape:I}=e,{enableTapToAddText:A}=e,{enableZoomControls:D=!0}=e,{willRenderShapeControls:R}=e,{beforeAddShape:L}=e,{beforeRemoveShape:O}=e,{beforeDeselectShape:z}=e,{beforeSelectShape:F}=e,{beforeUpdateShape:B}=e;const{rootRect:N,imageAnnotation:H,imageSize:W,imageRotation:j,imageFlipX:Y,imageFlipY:V,imageTransforms:U,imageTransformsInterpolated:q}=m;return oo(t,N,(t=>i(42,r=t))),oo(t,W,(t=>i(43,s=t))),oo(t,j,(t=>i(32,u=t))),oo(t,Y,(t=>i(28,c=t))),oo(t,V,(t=>i(29,h=t))),oo(t,U,(t=>i(45,l=t))),oo(t,q,(t=>i(44,a=t))),t.$$set=t=>{"isActive"in t&&i(1,d=t.isActive),"isActiveFraction"in t&&i(2,p=t.isActiveFraction),"isVisible"in t&&i(3,f=t.isVisible),"stores"in t&&i(4,m=t.stores),"locale"in t&&i(5,g=t.locale),"markupEditorToolbar"in t&&i(6,y=t.markupEditorToolbar),"markupEditorToolStyles"in t&&i(7,v=t.markupEditorToolStyles),"markupEditorShapeStyleControls"in t&&i(8,b=t.markupEditorShapeStyleControls),"markupEditorToolSelectRadius"in t&&i(9,x=t.markupEditorToolSelectRadius),"markupEditorTextInputMode"in t&&i(10,$=t.markupEditorTextInputMode),"willRenderShapePresetToolbar"in t&&i(11,w=t.willRenderShapePresetToolbar),"annotateTools"in t&&i(12,_=t.annotateTools),"annotateToolShapes"in t&&i(13,k=t.annotateToolShapes),"annotateShapeControls"in t&&i(14,S=t.annotateShapeControls),"annotateActiveTool"in t&&i(0,C=t.annotateActiveTool),"annotateEnableButtonFlipVertical"in t&&i(15,T=t.annotateEnableButtonFlipVertical),"annotateEnableSelectImagePreset"in t&&i(16,M=t.annotateEnableSelectImagePreset),"annotatePresets"in t&&i(17,P=t.annotatePresets),"annotateWillRenderShapePresetToolbar"in t&&i(18,E=t.annotateWillRenderShapePresetToolbar),"enableSelectToolToAddShape"in t&&i(19,I=t.enableSelectToolToAddShape),"enableTapToAddText"in t&&i(20,A=t.enableTapToAddText),"enableZoomControls"in t&&i(21,D=t.enableZoomControls),"willRenderShapeControls"in t&&i(22,R=t.willRenderShapeControls),"beforeAddShape"in t&&i(23,L=t.beforeAddShape),"beforeRemoveShape"in t&&i(24,O=t.beforeRemoveShape),"beforeDeselectShape"in t&&i(25,z=t.beforeDeselectShape),"beforeSelectShape"in t&&i(26,F=t.beforeSelectShape),"beforeUpdateShape"in t&&i(27,B=t.beforeUpdateShape)},t.$$.update=()=>{805306368&t.$$.dirty[0]|30720&t.$$.dirty[1]&&i(30,n=t=>tg(t,r,s,a.origin,a.translation,l.rotation.z,a.scale,c,h)),805306368&t.$$.dirty[0]|30720&t.$$.dirty[1]&&i(31,o=t=>Jm(t,r,s,a.origin,a.translation,l.rotation.z,a.scale,c,h))},[C,d,p,f,m,g,y,v,b,x,$,w,_,k,S,T,M,P,E,I,A,D,R,L,O,z,F,B,c,h,n,o,u,N,H,W,j,Y,V,U,q,"annotate",r,s,a,l,function(t){C=t,i(0,C)},function(e){Xo(t,e)}]}var ng={util:["annotate",class extends Er{constructor(t){super(),Pr(this,t,ig,eg,eo,{name:41,isActive:1,isActiveFraction:2,isVisible:3,stores:4,locale:5,markupEditorToolbar:6,markupEditorToolStyles:7,markupEditorShapeStyleControls:8,markupEditorToolSelectRadius:9,markupEditorTextInputMode:10,willRenderShapePresetToolbar:11,annotateTools:12,annotateToolShapes:13,annotateShapeControls:14,annotateActiveTool:0,annotateEnableButtonFlipVertical:15,annotateEnableSelectImagePreset:16,annotatePresets:17,annotateWillRenderShapePresetToolbar:18,enableSelectToolToAddShape:19,enableTapToAddText:20,enableZoomControls:21,willRenderShapeControls:22,beforeAddShape:23,beforeRemoveShape:24,beforeDeselectShape:25,beforeSelectShape:26,beforeUpdateShape:27},[-1,-1])}get name(){return this.$$.ctx[41]}get isActive(){return this.$$.ctx[1]}set isActive(t){this.$set({isActive:t}),ar()}get isActiveFraction(){return this.$$.ctx[2]}set isActiveFraction(t){this.$set({isActiveFraction:t}),ar()}get isVisible(){return this.$$.ctx[3]}set isVisible(t){this.$set({isVisible:t}),ar()}get stores(){return this.$$.ctx[4]}set stores(t){this.$set({stores:t}),ar()}get locale(){return this.$$.ctx[5]}set locale(t){this.$set({locale:t}),ar()}get markupEditorToolbar(){return this.$$.ctx[6]}set markupEditorToolbar(t){this.$set({markupEditorToolbar:t}),ar()}get markupEditorToolStyles(){return this.$$.ctx[7]}set markupEditorToolStyles(t){this.$set({markupEditorToolStyles:t}),ar()}get markupEditorShapeStyleControls(){return this.$$.ctx[8]}set markupEditorShapeStyleControls(t){this.$set({markupEditorShapeStyleControls:t}),ar()}get markupEditorToolSelectRadius(){return this.$$.ctx[9]}set markupEditorToolSelectRadius(t){this.$set({markupEditorToolSelectRadius:t}),ar()}get markupEditorTextInputMode(){return this.$$.ctx[10]}set markupEditorTextInputMode(t){this.$set({markupEditorTextInputMode:t}),ar()}get willRenderShapePresetToolbar(){return this.$$.ctx[11]}set willRenderShapePresetToolbar(t){this.$set({willRenderShapePresetToolbar:t}),ar()}get annotateTools(){return this.$$.ctx[12]}set annotateTools(t){this.$set({annotateTools:t}),ar()}get annotateToolShapes(){return this.$$.ctx[13]}set annotateToolShapes(t){this.$set({annotateToolShapes:t}),ar()}get annotateShapeControls(){return this.$$.ctx[14]}set annotateShapeControls(t){this.$set({annotateShapeControls:t}),ar()}get annotateActiveTool(){return this.$$.ctx[0]}set annotateActiveTool(t){this.$set({annotateActiveTool:t}),ar()}get annotateEnableButtonFlipVertical(){return this.$$.ctx[15]}set annotateEnableButtonFlipVertical(t){this.$set({annotateEnableButtonFlipVertical:t}),ar()}get annotateEnableSelectImagePreset(){return this.$$.ctx[16]}set annotateEnableSelectImagePreset(t){this.$set({annotateEnableSelectImagePreset:t}),ar()}get annotatePresets(){return this.$$.ctx[17]}set annotatePresets(t){this.$set({annotatePresets:t}),ar()}get annotateWillRenderShapePresetToolbar(){return this.$$.ctx[18]}set annotateWillRenderShapePresetToolbar(t){this.$set({annotateWillRenderShapePresetToolbar:t}),ar()}get enableSelectToolToAddShape(){return this.$$.ctx[19]}set enableSelectToolToAddShape(t){this.$set({enableSelectToolToAddShape:t}),ar()}get enableTapToAddText(){return this.$$.ctx[20]}set enableTapToAddText(t){this.$set({enableTapToAddText:t}),ar()}get enableZoomControls(){return this.$$.ctx[21]}set enableZoomControls(t){this.$set({enableZoomControls:t}),ar()}get willRenderShapeControls(){return this.$$.ctx[22]}set willRenderShapeControls(t){this.$set({willRenderShapeControls:t}),ar()}get beforeAddShape(){return this.$$.ctx[23]}set beforeAddShape(t){this.$set({beforeAddShape:t}),ar()}get beforeRemoveShape(){return this.$$.ctx[24]}set beforeRemoveShape(t){this.$set({beforeRemoveShape:t}),ar()}get beforeDeselectShape(){return this.$$.ctx[25]}set beforeDeselectShape(t){this.$set({beforeDeselectShape:t}),ar()}get beforeSelectShape(){return this.$$.ctx[26]}set beforeSelectShape(t){this.$set({beforeSelectShape:t}),ar()}get beforeUpdateShape(){return this.$$.ctx[27]}set beforeUpdateShape(t){this.$set({beforeUpdateShape:t}),ar()}}]};function og(t){let e,i,n;function o(e){t[38](e)}let r={stores:t[4],locale:t[5],isActive:t[1],isActiveFraction:t[2],isVisible:t[3],mapScreenPointToImagePoint:t[28],mapImagePointToScreenPoint:t[29],utilKey:"decorate",shapes:t[31],toolbar:t[12]||t[6],toolShapes:t[13]||t[7],shapeControls:t[14]||t[8],shapePresets:t[17],enableSelectToolToAddShape:t[19],enableTapToAddText:t[20],enableZoomControls:t[21],enablePresetSelectImage:t[16],enableButtonFlipVertical:t[15],parentRect:t[30],toolSelectRadius:t[9],textInputMode:t[10],willRenderPresetToolbar:t[18]||t[11],hooks:{willRenderShapeControls:t[22],beforeAddShape:t[23],beforeRemoveShape:t[24],beforeDeselectShape:t[25],beforeSelectShape:t[26],beforeUpdateShape:t[27]}};return void 0!==t[0]&&(r.toolActive=t[0]),e=new Qm({props:r}),Zo.push((()=>Sr(e,"toolActive",o))),e.$on("measure",t[39]),{c(){Cr(e.$$.fragment)},m(t,i){Tr(e,t,i),n=!0},p(t,n){const o={};16&n[0]&&(o.stores=t[4]),32&n[0]&&(o.locale=t[5]),2&n[0]&&(o.isActive=t[1]),4&n[0]&&(o.isActiveFraction=t[2]),8&n[0]&&(o.isVisible=t[3]),268435456&n[0]&&(o.mapScreenPointToImagePoint=t[28]),536870912&n[0]&&(o.mapImagePointToScreenPoint=t[29]),4160&n[0]&&(o.toolbar=t[12]||t[6]),8320&n[0]&&(o.toolShapes=t[13]||t[7]),16640&n[0]&&(o.shapeControls=t[14]||t[8]),131072&n[0]&&(o.shapePresets=t[17]),524288&n[0]&&(o.enableSelectToolToAddShape=t[19]),1048576&n[0]&&(o.enableTapToAddText=t[20]),2097152&n[0]&&(o.enableZoomControls=t[21]),65536&n[0]&&(o.enablePresetSelectImage=t[16]),32768&n[0]&&(o.enableButtonFlipVertical=t[15]),512&n[0]&&(o.toolSelectRadius=t[9]),1024&n[0]&&(o.textInputMode=t[10]),264192&n[0]&&(o.willRenderPresetToolbar=t[18]||t[11]),264241152&n[0]&&(o.hooks={willRenderShapeControls:t[22],beforeAddShape:t[23],beforeRemoveShape:t[24],beforeDeselectShape:t[25],beforeSelectShape:t[26],beforeUpdateShape:t[27]}),!i&&1&n[0]&&(i=!0,o.toolActive=t[0],or((()=>i=!1))),e.$set(o)},i(t){n||(mr(e.$$.fragment,t),n=!0)},o(t){gr(e.$$.fragment,t),n=!1},d(t){Mr(e,t)}}}function rg(t,e,i){let n,o,r,s,a,{isActive:l}=e,{isActiveFraction:c}=e,{isVisible:h}=e,{stores:u}=e,{locale:d={}}=e,{markupEditorToolbar:p}=e,{markupEditorToolStyles:f}=e,{markupEditorShapeStyleControls:m}=e,{markupEditorToolSelectRadius:g}=e,{markupEditorTextInputMode:y}=e,{willRenderShapePresetToolbar:v}=e,{decorateTools:b}=e,{decorateToolShapes:x}=e,{decorateShapeControls:$}=e,{decorateActiveTool:w}=e,{decorateEnableButtonFlipVertical:_=!1}=e,{decorateEnableSelectImagePreset:k=!1}=e,{decoratePresets:S=[]}=e,{decorateWillRenderShapePresetToolbar:C}=e,{enableSelectToolToAddShape:T}=e,{enableTapToAddText:M}=e,{enableZoomControls:P=!0}=e,{willRenderShapeControls:E}=e,{beforeAddShape:I}=e,{beforeRemoveShape:A}=e,{beforeDeselectShape:D}=e,{beforeSelectShape:R}=e,{beforeUpdateShape:L}=e;const{imageCropRect:O,imageDecoration:z,imageSelectionRectPresentation:F,imageTransformsInterpolated:B}=u;return oo(t,F,(t=>i(37,a=t))),oo(t,B,(t=>i(36,s=t))),t.$$set=t=>{"isActive"in t&&i(1,l=t.isActive),"isActiveFraction"in t&&i(2,c=t.isActiveFraction),"isVisible"in t&&i(3,h=t.isVisible),"stores"in t&&i(4,u=t.stores),"locale"in t&&i(5,d=t.locale),"markupEditorToolbar"in t&&i(6,p=t.markupEditorToolbar),"markupEditorToolStyles"in t&&i(7,f=t.markupEditorToolStyles),"markupEditorShapeStyleControls"in t&&i(8,m=t.markupEditorShapeStyleControls),"markupEditorToolSelectRadius"in t&&i(9,g=t.markupEditorToolSelectRadius),"markupEditorTextInputMode"in t&&i(10,y=t.markupEditorTextInputMode),"willRenderShapePresetToolbar"in t&&i(11,v=t.willRenderShapePresetToolbar),"decorateTools"in t&&i(12,b=t.decorateTools),"decorateToolShapes"in t&&i(13,x=t.decorateToolShapes),"decorateShapeControls"in t&&i(14,$=t.decorateShapeControls),"decorateActiveTool"in t&&i(0,w=t.decorateActiveTool),"decorateEnableButtonFlipVertical"in t&&i(15,_=t.decorateEnableButtonFlipVertical),"decorateEnableSelectImagePreset"in t&&i(16,k=t.decorateEnableSelectImagePreset),"decoratePresets"in t&&i(17,S=t.decoratePresets),"decorateWillRenderShapePresetToolbar"in t&&i(18,C=t.decorateWillRenderShapePresetToolbar),"enableSelectToolToAddShape"in t&&i(19,T=t.enableSelectToolToAddShape),"enableTapToAddText"in t&&i(20,M=t.enableTapToAddText),"enableZoomControls"in t&&i(21,P=t.enableZoomControls),"willRenderShapeControls"in t&&i(22,E=t.willRenderShapeControls),"beforeAddShape"in t&&i(23,I=t.beforeAddShape),"beforeRemoveShape"in t&&i(24,A=t.beforeRemoveShape),"beforeDeselectShape"in t&&i(25,D=t.beforeDeselectShape),"beforeSelectShape"in t&&i(26,R=t.beforeSelectShape),"beforeUpdateShape"in t&&i(27,L=t.beforeUpdateShape)},t.$$.update=()=>{32&t.$$.dirty[1]&&i(35,n=s?s.scale:1),80&t.$$.dirty[1]&&i(28,o=t=>{const e=et(t);return e.x-=a.x,e.y-=a.y,e.x/=n,e.y/=n,e}),80&t.$$.dirty[1]&&i(29,r=t=>{const e=et(t);return e.x*=n,e.y*=n,e.x+=a.x,e.y+=a.y,e})},[w,l,c,h,u,d,p,f,m,g,y,v,b,x,$,_,k,S,C,T,M,P,E,I,A,D,R,L,o,r,O,z,F,B,"decorate",n,s,a,function(t){w=t,i(0,w)},function(e){Xo(t,e)}]}var sg={util:["decorate",class extends Er{constructor(t){super(),Pr(this,t,rg,og,eo,{name:34,isActive:1,isActiveFraction:2,isVisible:3,stores:4,locale:5,markupEditorToolbar:6,markupEditorToolStyles:7,markupEditorShapeStyleControls:8,markupEditorToolSelectRadius:9,markupEditorTextInputMode:10,willRenderShapePresetToolbar:11,decorateTools:12,decorateToolShapes:13,decorateShapeControls:14,decorateActiveTool:0,decorateEnableButtonFlipVertical:15,decorateEnableSelectImagePreset:16,decoratePresets:17,decorateWillRenderShapePresetToolbar:18,enableSelectToolToAddShape:19,enableTapToAddText:20,enableZoomControls:21,willRenderShapeControls:22,beforeAddShape:23,beforeRemoveShape:24,beforeDeselectShape:25,beforeSelectShape:26,beforeUpdateShape:27},[-1,-1])}get name(){return this.$$.ctx[34]}get isActive(){return this.$$.ctx[1]}set isActive(t){this.$set({isActive:t}),ar()}get isActiveFraction(){return this.$$.ctx[2]}set isActiveFraction(t){this.$set({isActiveFraction:t}),ar()}get isVisible(){return this.$$.ctx[3]}set isVisible(t){this.$set({isVisible:t}),ar()}get stores(){return this.$$.ctx[4]}set stores(t){this.$set({stores:t}),ar()}get locale(){return this.$$.ctx[5]}set locale(t){this.$set({locale:t}),ar()}get markupEditorToolbar(){return this.$$.ctx[6]}set markupEditorToolbar(t){this.$set({markupEditorToolbar:t}),ar()}get markupEditorToolStyles(){return this.$$.ctx[7]}set markupEditorToolStyles(t){this.$set({markupEditorToolStyles:t}),ar()}get markupEditorShapeStyleControls(){return this.$$.ctx[8]}set markupEditorShapeStyleControls(t){this.$set({markupEditorShapeStyleControls:t}),ar()}get markupEditorToolSelectRadius(){return this.$$.ctx[9]}set markupEditorToolSelectRadius(t){this.$set({markupEditorToolSelectRadius:t}),ar()}get markupEditorTextInputMode(){return this.$$.ctx[10]}set markupEditorTextInputMode(t){this.$set({markupEditorTextInputMode:t}),ar()}get willRenderShapePresetToolbar(){return this.$$.ctx[11]}set willRenderShapePresetToolbar(t){this.$set({willRenderShapePresetToolbar:t}),ar()}get decorateTools(){return this.$$.ctx[12]}set decorateTools(t){this.$set({decorateTools:t}),ar()}get decorateToolShapes(){return this.$$.ctx[13]}set decorateToolShapes(t){this.$set({decorateToolShapes:t}),ar()}get decorateShapeControls(){return this.$$.ctx[14]}set decorateShapeControls(t){this.$set({decorateShapeControls:t}),ar()}get decorateActiveTool(){return this.$$.ctx[0]}set decorateActiveTool(t){this.$set({decorateActiveTool:t}),ar()}get decorateEnableButtonFlipVertical(){return this.$$.ctx[15]}set decorateEnableButtonFlipVertical(t){this.$set({decorateEnableButtonFlipVertical:t}),ar()}get decorateEnableSelectImagePreset(){return this.$$.ctx[16]}set decorateEnableSelectImagePreset(t){this.$set({decorateEnableSelectImagePreset:t}),ar()}get decoratePresets(){return this.$$.ctx[17]}set decoratePresets(t){this.$set({decoratePresets:t}),ar()}get decorateWillRenderShapePresetToolbar(){return this.$$.ctx[18]}set decorateWillRenderShapePresetToolbar(t){this.$set({decorateWillRenderShapePresetToolbar:t}),ar()}get enableSelectToolToAddShape(){return this.$$.ctx[19]}set enableSelectToolToAddShape(t){this.$set({enableSelectToolToAddShape:t}),ar()}get enableTapToAddText(){return this.$$.ctx[20]}set enableTapToAddText(t){this.$set({enableTapToAddText:t}),ar()}get enableZoomControls(){return this.$$.ctx[21]}set enableZoomControls(t){this.$set({enableZoomControls:t}),ar()}get willRenderShapeControls(){return this.$$.ctx[22]}set willRenderShapeControls(t){this.$set({willRenderShapeControls:t}),ar()}get beforeAddShape(){return this.$$.ctx[23]}set beforeAddShape(t){this.$set({beforeAddShape:t}),ar()}get beforeRemoveShape(){return this.$$.ctx[24]}set beforeRemoveShape(t){this.$set({beforeRemoveShape:t}),ar()}get beforeDeselectShape(){return this.$$.ctx[25]}set beforeDeselectShape(t){this.$set({beforeDeselectShape:t}),ar()}get beforeSelectShape(){return this.$$.ctx[26]}set beforeSelectShape(t){this.$set({beforeSelectShape:t}),ar()}get beforeUpdateShape(){return this.$$.ctx[27]}set beforeUpdateShape(t){this.$set({beforeUpdateShape:t}),ar()}}]};function ag(t){let e,i;return e=new Qm({props:{stores:t[3],locale:t[4],isActive:t[0],isActiveFraction:t[1],isVisible:t[2],mapScreenPointToImagePoint:t[21],mapImagePointToScreenPoint:t[22],enableZoomControls:t[18],utilKey:"sticker",shapePresets:t[5],shapes:t[6]?t[27]:t[28],toolActive:"preset",imageFlipX:!!t[6]&&t[19],imageFlipY:!!t[6]&&t[20],imageRotation:t[6]?t[23]:0,parentRect:t[6]?t[29]:t[25],enablePresetSelectImage:t[7],enableButtonFlipVertical:t[8],toolSelectRadius:t[11],willRenderPresetToolbar:t[9]||t[12],hooks:{willRenderShapeControls:t[10],beforeAddShape:t[13],beforeRemoveShape:t[14],beforeDeselectShape:t[15],beforeSelectShape:t[16],beforeUpdateShape:t[17]}}}),e.$on("measure",t[42]),{c(){Cr(e.$$.fragment)},m(t,n){Tr(e,t,n),i=!0},p(t,i){const n={};8&i[0]&&(n.stores=t[3]),16&i[0]&&(n.locale=t[4]),1&i[0]&&(n.isActive=t[0]),2&i[0]&&(n.isActiveFraction=t[1]),4&i[0]&&(n.isVisible=t[2]),2097152&i[0]&&(n.mapScreenPointToImagePoint=t[21]),4194304&i[0]&&(n.mapImagePointToScreenPoint=t[22]),262144&i[0]&&(n.enableZoomControls=t[18]),32&i[0]&&(n.shapePresets=t[5]),64&i[0]&&(n.shapes=t[6]?t[27]:t[28]),524352&i[0]&&(n.imageFlipX=!!t[6]&&t[19]),1048640&i[0]&&(n.imageFlipY=!!t[6]&&t[20]),8388672&i[0]&&(n.imageRotation=t[6]?t[23]:0),64&i[0]&&(n.parentRect=t[6]?t[29]:t[25]),128&i[0]&&(n.enablePresetSelectImage=t[7]),256&i[0]&&(n.enableButtonFlipVertical=t[8]),2048&i[0]&&(n.toolSelectRadius=t[11]),4608&i[0]&&(n.willRenderPresetToolbar=t[9]||t[12]),254976&i[0]&&(n.hooks={willRenderShapeControls:t[10],beforeAddShape:t[13],beforeRemoveShape:t[14],beforeDeselectShape:t[15],beforeSelectShape:t[16],beforeUpdateShape:t[17]}),e.$set(n)},i(t){i||(mr(e.$$.fragment,t),i=!0)},o(t){gr(e.$$.fragment,t),i=!1},d(t){Mr(e,t)}}}function lg(t,e,i){let n,o,r,s,a,l,c,h,u,d,p,{isActive:f}=e,{isActiveFraction:m}=e,{isVisible:g}=e,{stores:y}=e,{locale:v={}}=e,{stickers:b=[]}=e,{stickerStickToImage:x=!1}=e,{stickerEnableSelectImage:$=!0}=e,{stickersEnableButtonFlipVertical:w=!1}=e,{stickersWillRenderShapePresetToolbar:_}=e,{willRenderShapeControls:k}=e,{markupEditorToolSelectRadius:S}=e,{willRenderShapePresetToolbar:C}=e,{beforeAddShape:T}=e,{beforeRemoveShape:M}=e,{beforeDeselectShape:P}=e,{beforeSelectShape:E}=e,{beforeUpdateShape:I}=e,{enableZoomControls:A=!0}=e;const{presentationScalar:D,rootRect:R,imageCropRect:L,imageSelectionRectPresentation:O,imageAnnotation:z,imageDecoration:F,imageSize:B,imageTransforms:N,imageTransformsInterpolated:H,imageRotation:W,imageFlipX:j,imageFlipY:Y}=y;return oo(t,R,(t=>i(38,a=t))),oo(t,O,(t=>i(41,d=t))),oo(t,B,(t=>i(39,l=t))),oo(t,N,(t=>i(40,c=t))),oo(t,H,(t=>i(37,s=t))),oo(t,W,(t=>i(23,p=t))),oo(t,j,(t=>i(19,h=t))),oo(t,Y,(t=>i(20,u=t))),t.$$set=t=>{"isActive"in t&&i(0,f=t.isActive),"isActiveFraction"in t&&i(1,m=t.isActiveFraction),"isVisible"in t&&i(2,g=t.isVisible),"stores"in t&&i(3,y=t.stores),"locale"in t&&i(4,v=t.locale),"stickers"in t&&i(5,b=t.stickers),"stickerStickToImage"in t&&i(6,x=t.stickerStickToImage),"stickerEnableSelectImage"in t&&i(7,$=t.stickerEnableSelectImage),"stickersEnableButtonFlipVertical"in t&&i(8,w=t.stickersEnableButtonFlipVertical),"stickersWillRenderShapePresetToolbar"in t&&i(9,_=t.stickersWillRenderShapePresetToolbar),"willRenderShapeControls"in t&&i(10,k=t.willRenderShapeControls),"markupEditorToolSelectRadius"in t&&i(11,S=t.markupEditorToolSelectRadius),"willRenderShapePresetToolbar"in t&&i(12,C=t.willRenderShapePresetToolbar),"beforeAddShape"in t&&i(13,T=t.beforeAddShape),"beforeRemoveShape"in t&&i(14,M=t.beforeRemoveShape),"beforeDeselectShape"in t&&i(15,P=t.beforeDeselectShape),"beforeSelectShape"in t&&i(16,E=t.beforeSelectShape),"beforeUpdateShape"in t&&i(17,I=t.beforeUpdateShape),"enableZoomControls"in t&&i(18,A=t.enableZoomControls)},t.$$.update=()=>{64&t.$$.dirty[1]&&i(36,n=s?s.scale:1),1572928&t.$$.dirty[0]|2016&t.$$.dirty[1]&&i(21,o=x?t=>tg(t,a,l,s.origin,s.translation,c.rotation.z,s.scale,h,u):t=>{const e=et(t);return e.x-=d.x,e.y-=d.y,e.x/=n,e.y/=n,e}),1572928&t.$$.dirty[0]|2016&t.$$.dirty[1]&&i(22,r=x?t=>Jm(t,a,l,s.origin,s.translation,c.rotation.z,s.scale,h,u):t=>{const e=et(t);return e.x*=n,e.y*=n,e.x+=d.x,e.y+=d.y,e})},[f,m,g,y,v,b,x,$,w,_,k,S,C,T,M,P,E,I,A,h,u,o,r,p,R,L,O,z,F,B,N,H,W,j,Y,"sticker",n,s,a,l,c,d,function(e){Xo(t,e)}]}var cg={util:["sticker",class extends Er{constructor(t){super(),Pr(this,t,lg,ag,eo,{name:35,isActive:0,isActiveFraction:1,isVisible:2,stores:3,locale:4,stickers:5,stickerStickToImage:6,stickerEnableSelectImage:7,stickersEnableButtonFlipVertical:8,stickersWillRenderShapePresetToolbar:9,willRenderShapeControls:10,markupEditorToolSelectRadius:11,willRenderShapePresetToolbar:12,beforeAddShape:13,beforeRemoveShape:14,beforeDeselectShape:15,beforeSelectShape:16,beforeUpdateShape:17,enableZoomControls:18},[-1,-1])}get name(){return this.$$.ctx[35]}get isActive(){return this.$$.ctx[0]}set isActive(t){this.$set({isActive:t}),ar()}get isActiveFraction(){return this.$$.ctx[1]}set isActiveFraction(t){this.$set({isActiveFraction:t}),ar()}get isVisible(){return this.$$.ctx[2]}set isVisible(t){this.$set({isVisible:t}),ar()}get stores(){return this.$$.ctx[3]}set stores(t){this.$set({stores:t}),ar()}get locale(){return this.$$.ctx[4]}set locale(t){this.$set({locale:t}),ar()}get stickers(){return this.$$.ctx[5]}set stickers(t){this.$set({stickers:t}),ar()}get stickerStickToImage(){return this.$$.ctx[6]}set stickerStickToImage(t){this.$set({stickerStickToImage:t}),ar()}get stickerEnableSelectImage(){return this.$$.ctx[7]}set stickerEnableSelectImage(t){this.$set({stickerEnableSelectImage:t}),ar()}get stickersEnableButtonFlipVertical(){return this.$$.ctx[8]}set stickersEnableButtonFlipVertical(t){this.$set({stickersEnableButtonFlipVertical:t}),ar()}get stickersWillRenderShapePresetToolbar(){return this.$$.ctx[9]}set stickersWillRenderShapePresetToolbar(t){this.$set({stickersWillRenderShapePresetToolbar:t}),ar()}get willRenderShapeControls(){return this.$$.ctx[10]}set willRenderShapeControls(t){this.$set({willRenderShapeControls:t}),ar()}get markupEditorToolSelectRadius(){return this.$$.ctx[11]}set markupEditorToolSelectRadius(t){this.$set({markupEditorToolSelectRadius:t}),ar()}get willRenderShapePresetToolbar(){return this.$$.ctx[12]}set willRenderShapePresetToolbar(t){this.$set({willRenderShapePresetToolbar:t}),ar()}get beforeAddShape(){return this.$$.ctx[13]}set beforeAddShape(t){this.$set({beforeAddShape:t}),ar()}get beforeRemoveShape(){return this.$$.ctx[14]}set beforeRemoveShape(t){this.$set({beforeRemoveShape:t}),ar()}get beforeDeselectShape(){return this.$$.ctx[15]}set beforeDeselectShape(t){this.$set({beforeDeselectShape:t}),ar()}get beforeSelectShape(){return this.$$.ctx[16]}set beforeSelectShape(t){this.$set({beforeSelectShape:t}),ar()}get beforeUpdateShape(){return this.$$.ctx[17]}set beforeUpdateShape(t){this.$set({beforeUpdateShape:t}),ar()}get enableZoomControls(){return this.$$.ctx[18]}set enableZoomControls(t){this.$set({enableZoomControls:t}),ar()}}]};function hg(t){let e,i,n,o,r,s=(t[13](t[29].value)||"")+"",a=(P(t[29].label)?t[29].label(t[1]):t[29].label)+"";return{c(){e=wo("div"),n=So(),o=wo("span"),r=ko(a),i=new Lo(n),Eo(e,"slot","option")},m(t,a){xo(t,e,a),i.m(s,e),bo(e,n),bo(e,o),bo(o,r)},p(t,e){536870912&e&&s!==(s=(t[13](t[29].value)||"")+"")&&i.p(s),536870914&e&&a!==(a=(P(t[29].label)?t[29].label(t[1]):t[29].label)+"")&&Ao(r,a)},d(t){t&&$o(e)}}}function ug(t){let e,i;return e=new Qc({props:{locale:t[1],layout:"row",options:t[2],selectedIndex:t[10],onchange:t[11],$$slots:{option:[hg,({option:t})=>({29:t}),({option:t})=>t?536870912:0]},$$scope:{ctx:t}}}),{c(){Cr(e.$$.fragment)},m(t,n){Tr(e,t,n),i=!0},p(t,i){const n={};2&i&&(n.locale=t[1]),4&i&&(n.options=t[2]),1610612738&i&&(n.$$scope={dirty:i,ctx:t}),e.$set(n)},i(t){i||(mr(e.$$.fragment,t),i=!0)},o(t){gr(e.$$.fragment,t),i=!1},d(t){Mr(e,t)}}}function dg(t){let e,i,n,o,r;return i=new dm({props:{locale:t[1],shape:t[5],onchange:t[12],controls:t[3],scrollElasticity:t[4]}}),o=new Nl({props:{elasticity:t[8],$$slots:{default:[ug]},$$scope:{ctx:t}}}),{c(){e=wo("div"),Cr(i.$$.fragment),n=So(),Cr(o.$$.fragment),Eo(e,"slot","footer"),Eo(e,"style",t[6])},m(t,s){xo(t,e,s),Tr(i,e,null),bo(e,n),Tr(o,e,null),r=!0},p(t,n){const s={};2&n&&(s.locale=t[1]),32&n&&(s.shape=t[5]),8&n&&(s.controls=t[3]),16&n&&(s.scrollElasticity=t[4]),i.$set(s);const a={};1073741830&n&&(a.$$scope={dirty:n,ctx:t}),o.$set(a),(!r||64&n)&&Eo(e,"style",t[6])},i(t){r||(mr(i.$$.fragment,t),mr(o.$$.fragment,t),r=!0)},o(t){gr(i.$$.fragment,t),gr(o.$$.fragment,t),r=!1},d(t){t&&$o(e),Mr(i),Mr(o)}}}function pg(t){let e,i;return e=new np({props:{$$slots:{footer:[dg]},$$scope:{ctx:t}}}),e.$on("measure",t[21]),{c(){Cr(e.$$.fragment)},m(t,n){Tr(e,t,n),i=!0},p(t,[i]){const n={};1073741950&i&&(n.$$scope={dirty:i,ctx:t}),e.$set(n)},i(t){i||(mr(e.$$.fragment,t),i=!0)},o(t){gr(e.$$.fragment,t),i=!1},d(t){Mr(e,t)}}}function fg(t,e,i){let n,o,r,s,a,l,c=Xn,h=()=>(c(),c=io(u,(t=>i(19,a=t))),u);t.$$.on_destroy.push((()=>c()));let{isActive:u}=e;h();let{stores:d}=e,{locale:p={}}=e,{frameStyles:f={}}=e,{frameOptions:m=[]}=e,{markupEditorShapeStyleControls:g}=e;const{history:y,animation:v,elasticityMultiplier:b,scrollElasticity:x,imageFrame:$}=d;oo(t,v,(t=>i(18,s=t))),oo(t,$,(t=>i(5,r=t)));let w,_=r?m.findIndex((([t])=>t===r.id)):0,k={};const S=Qs(s?20:0);return oo(t,S,(t=>i(20,l=t))),t.$$set=t=>{"isActive"in t&&h(i(0,u=t.isActive)),"stores"in t&&i(16,d=t.stores),"locale"in t&&i(1,p=t.locale),"frameStyles"in t&&i(17,f=t.frameStyles),"frameOptions"in t&&i(2,m=t.frameOptions),"markupEditorShapeStyleControls"in t&&i(3,g=t.markupEditorShapeStyleControls)},t.$$.update=()=>{786432&t.$$.dirty&&s&&S.set(a?0:20),1048576&t.$$.dirty&&i(6,o=l?`transform: translateY(${l}px)`:void 0)},i(4,n=b*x),[u,p,m,g,n,r,o,v,x,$,_,({value:t})=>{const e=f[t];if(!e||!e.shape)return $.set(void 0),void y.write();const{shape:i}=e,n={id:t,...Pi(i),...Object.keys(k).reduce(((t,e)=>i[e]?(t[e]=k[e],t):t),{})};$.set(n),y.write()},function(t){Je(t,"frameColor")&&(k.frameColor=t.frameColor),r&&(wn(r,t),$.set(r),clearTimeout(w),w=setTimeout((()=>{y.write()}),200))},t=>{const e=f[t];var i;if(e&&e.thumb)return i=e.thumb,/div/i.test(i)||$m(i)?i:/rect|path|circle|line|<g>/i.test(i)?`<svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" stroke-width="1" stroke="currentColor" fill="none" aria-hidden="true" focusable="false" stroke-linecap="round" stroke-linejoin="round">${i}</svg>`:`<img src="${i}" alt=""/>`},S,"frame",d,f,s,a,l,function(e){Xo(t,e)}]}var mg={util:["frame",class extends Er{constructor(t){super(),Pr(this,t,fg,pg,eo,{name:15,isActive:0,stores:16,locale:1,frameStyles:17,frameOptions:2,markupEditorShapeStyleControls:3})}get name(){return this.$$.ctx[15]}get isActive(){return this.$$.ctx[0]}set isActive(t){this.$set({isActive:t}),ar()}get stores(){return this.$$.ctx[16]}set stores(t){this.$set({stores:t}),ar()}get locale(){return this.$$.ctx[1]}set locale(t){this.$set({locale:t}),ar()}get frameStyles(){return this.$$.ctx[17]}set frameStyles(t){this.$set({frameStyles:t}),ar()}get frameOptions(){return this.$$.ctx[2]}set frameOptions(t){this.$set({frameOptions:t}),ar()}get markupEditorShapeStyleControls(){return this.$$.ctx[3]}set markupEditorShapeStyleControls(t){this.$set({markupEditorShapeStyleControls:t}),ar()}}]};function gg(t){let e,i,n,o,r,s,a,l;return{c(){e=wo("div"),i=wo("label"),n=ko(t[1]),o=So(),r=wo("input"),Eo(i,"for",t[0]),Eo(i,"title",t[2]),Eo(i,"aria-label",t[2]),Eo(r,"id",t[0]),Eo(r,"type","text"),Eo(r,"inputmode","numeric"),Eo(r,"pattern","[0-9]*"),Eo(r,"data-state",t[3]),Eo(r,"autocomplete","off"),Eo(r,"placeholder",t[4]),r.value=s=void 0===t[5]?"":t[7](t[5]+""),Eo(e,"class","PinturaInputDimension")},m(s,c){xo(s,e,c),bo(e,i),bo(i,n),bo(e,o),bo(e,r),a||(l=To(r,"input",t[8]),a=!0)},p(t,[e]){2&e&&Ao(n,t[1]),1&e&&Eo(i,"for",t[0]),4&e&&Eo(i,"title",t[2]),4&e&&Eo(i,"aria-label",t[2]),1&e&&Eo(r,"id",t[0]),8&e&&Eo(r,"data-state",t[3]),16&e&&Eo(r,"placeholder",t[4]),160&e&&s!==(s=void 0===t[5]?"":t[7](t[5]+""))&&r.value!==s&&(r.value=s)},i:Xn,o:Xn,d(t){t&&$o(e),a=!1,l()}}}function yg(t,e,i){let{id:n}=e,{label:o}=e,{title:r}=e,{state:s}=e,{placeholder:a}=e,{value:l}=e,{onchange:c}=e,{format:h=(t=>t.replace(/\D/g,""))}=e;return t.$$set=t=>{"id"in t&&i(0,n=t.id),"label"in t&&i(1,o=t.label),"title"in t&&i(2,r=t.title),"state"in t&&i(3,s=t.state),"placeholder"in t&&i(4,a=t.placeholder),"value"in t&&i(5,l=t.value),"onchange"in t&&i(6,c=t.onchange),"format"in t&&i(7,h=t.format)},[n,o,r,s,a,l,c,h,t=>c(h(t.currentTarget.value))]}class vg extends Er{constructor(t){super(),Pr(this,t,yg,gg,eo,{id:0,label:1,title:2,state:3,placeholder:4,value:5,onchange:6,format:7})}}function bg(t){let e;return{c(){e=_o("g")},m(i,n){xo(i,e,n),e.innerHTML=t[2]},p(t,i){4&i&&(e.innerHTML=t[2])},d(t){t&&$o(e)}}}function xg(t){let e,i,n,o,r,s,a,l;return r=new wl({props:{$$slots:{default:[bg]},$$scope:{ctx:t}}}),{c(){e=wo("div"),i=wo("input"),n=So(),o=wo("label"),Cr(r.$$.fragment),Eo(i,"id",t[0]),Eo(i,"class","implicit"),Eo(i,"type","checkbox"),i.checked=t[1],Eo(o,"for",t[0]),Eo(o,"title",t[3])},m(c,h){xo(c,e,h),bo(e,i),bo(e,n),bo(e,o),Tr(r,o,null),s=!0,a||(l=To(i,"change",t[5]),a=!0)},p(t,[e]){(!s||1&e)&&Eo(i,"id",t[0]),(!s||2&e)&&(i.checked=t[1]);const n={};68&e&&(n.$$scope={dirty:e,ctx:t}),r.$set(n),(!s||1&e)&&Eo(o,"for",t[0]),(!s||8&e)&&Eo(o,"title",t[3])},i(t){s||(mr(r.$$.fragment,t),s=!0)},o(t){gr(r.$$.fragment,t),s=!1},d(t){t&&$o(e),Mr(r),a=!1,l()}}}function $g(t,e,i){let{id:n}=e,{locked:o}=e,{icon:r}=e,{title:s}=e,{onchange:a}=e;return t.$$set=t=>{"id"in t&&i(0,n=t.id),"locked"in t&&i(1,o=t.locked),"icon"in t&&i(2,r=t.icon),"title"in t&&i(3,s=t.title),"onchange"in t&&i(4,a=t.onchange)},[n,o,r,s,a,t=>a(t.currentTarget.checked)]}class wg extends Er{constructor(t){super(),Pr(this,t,$g,xg,eo,{id:0,locked:1,icon:2,title:3,onchange:4})}}function _g(t){let e;return{c(){e=ko("Save")},m(t,i){xo(t,e,i)},d(t){t&&$o(e)}}}function kg(t){let e,i,n,o,r,s,a,l,c,h,u,d,p,f=t[1].resizeLabelFormCaption+"";return l=new Nh({props:{items:t[3]}}),h=new Pl({props:{type:"submit",class:"implicit",$$slots:{default:[_g]},$$scope:{ctx:t}}}),{c(){e=wo("form"),i=wo("div"),n=wo("fieldset"),o=wo("legend"),r=ko(f),s=So(),a=wo("div"),Cr(l.$$.fragment),c=So(),Cr(h.$$.fragment),Eo(o,"class","implicit"),Eo(a,"class","PinturaFieldsetInner"),Eo(i,"class","PinturaFormInner"),Eo(e,"slot","footer"),Eo(e,"style",t[4])},m(f,m){xo(f,e,m),bo(e,i),bo(i,n),bo(n,o),bo(o,r),bo(n,s),bo(n,a),Tr(l,a,null),t[64](a),bo(i,c),Tr(h,i,null),u=!0,d||(p=[To(a,"focusin",t[14]),To(a,"focusout",t[15]),To(e,"submit",Mo(t[16]))],d=!0)},p(t,i){(!u||2&i[0])&&f!==(f=t[1].resizeLabelFormCaption+"")&&Ao(r,f);const n={};8&i[0]&&(n.items=t[3]),l.$set(n);const o={};67108864&i[2]&&(o.$$scope={dirty:i,ctx:t}),h.$set(o),(!u||16&i[0])&&Eo(e,"style",t[4])},i(t){u||(mr(l.$$.fragment,t),mr(h.$$.fragment,t),u=!0)},o(t){gr(l.$$.fragment,t),gr(h.$$.fragment,t),u=!1},d(i){i&&$o(e),Mr(l),t[64](null),Mr(h),d=!1,Jn(p)}}}function Sg(t){let e,i;return e=new np({props:{$$slots:{footer:[kg]},$$scope:{ctx:t}}}),e.$on("measure",t[65]),{c(){Cr(e.$$.fragment)},m(t,n){Tr(e,t,n),i=!0},p(t,i){const n={};30&i[0]|67108864&i[2]&&(n.$$scope={dirty:i,ctx:t}),e.$set(n)},i(t){i||(mr(e.$$.fragment,t),i=!0)},o(t){gr(e.$$.fragment,t),i=!1},d(t){Mr(e,t)}}}function Cg(t,i,n){let o,r,s,a,l,c,h,u,d,p,f,m,g,y,v,b,x,$,w,_,k,S,C,T,M,P,E,I,D,R=Xn,L=()=>(R(),R=io(z,(t=>n(41,m=t))),z);t.$$.on_destroy.push((()=>R()));const O=(t,i=0,n=9999)=>{if(e(t)&&!(t=t.replace(/\D/g,"")).length)return;const o=Math.round(t);return Number.isNaN(o)?void 0:Qr(o,i,n)};let{isActive:z}=i;L();let{stores:F}=i,{locale:B={}}=i,{resizeMinSize:N=St(1,1)}=i,{resizeMaxSize:H=St(9999,9999)}=i,{resizeSizePresetOptions:W}=i,{resizeWidthPresetOptions:V}=i,{resizeHeightPresetOptions:U}=i,{resizeWillRenderFooter:q=Y}=i;const X=Qs(0,{stiffness:.15,damping:.3});oo(t,X,(t=>n(60,P=t)));const{animation:G,imageSize:Z,imageCropRect:K,imageCropRectAspectRatio:Q,imageCropAspectRatio:J,imageOutputSize:tt,imageSelectionRect:et,imageSelectionZoom:it,history:nt,env:ot}=F;oo(t,G,(t=>n(62,I=t))),oo(t,Z,(t=>n(71,b=t))),oo(t,K,(t=>n(40,p=t))),oo(t,Q,(t=>n(43,y=t))),oo(t,J,(t=>n(70,v=t))),oo(t,tt,(t=>n(42,g=t))),oo(t,it,(t=>n(69,f=t))),oo(t,ot,(t=>n(61,E=t)));const rt=A();let st,at,lt,ct,ht,ut=!1;const dt=(t,e,i,n,o)=>null!=t&&i!==e?t>=n[e]&&t<=o[e]?"valid":"invalid":"undetermined",pt=(t,e,i)=>Math.round(null!=t?t/e:i.height),ft=()=>{ut&&at&&lt&&("width"===ct?n(37,lt=Math.round(at/y)):"height"===ct?n(36,at=Math.round(lt*y)):("width"===ht?n(37,lt=Math.round(at/y)):"height"===ht&&n(36,at=Math.round(lt*y)),mt()))},mt=t=>{let e=O(at),i=O(lt),o=e,r=i,s=o&&r,a=t||y;if(!o&&!r)return;o&&!r?r=Math.round(o/a):r&&!o&&(o=Math.round(r*a)),a=t||s?j(o,r):y;let l=St(o,r);Et(H,l)||(l=oe(H,a)),Et(l,N)||(l=ne(N,a)),n(36,at=null!=e?Math.round(l.width):void 0),n(37,lt=null!=i?Math.round(l.height):void 0)},gt=()=>{mt();const{width:t,height:e}=g||{};t===at&&e===lt||(at||lt?(at&&lt&&ho(J,v=at/lt,v),ho(tt,g=St(at,lt),g)):(ho(J,v=b.width/b.height,v),ho(J,v=void 0,v),ho(tt,g=void 0,g)),nt.write())},yt=tt.subscribe((t=>{if(!t)return n(36,at=void 0),void n(37,lt=void 0);n(36,at=t.width),n(37,lt=t.height),mt()})),vt=J.subscribe((t=>{(at||lt)&&t&&(at&&lt&&j(at,lt)!==t?(n(37,lt=at/t),mt(t)):mt())})),bt=t=>e(t[0])?(t[1]=t[1].map(bt),t):Ke(t)?[t,""+t]:t,xt=t=>{if(e(t[0]))return t[1]=t[1].map(xt),t;let[i,n]=t;if(Ke(i)&&Ke(n)){const[t,e]=[i,n];n=`${t} Г— ${e}`,i=[t,e]}return[i,n]},$t=Dr();oo(t,$t,(t=>n(44,x=t)));const wt=Dr();oo(t,wt,(t=>n(45,$=t)));const kt=Dr();oo(t,kt,(t=>n(46,w=t)));const Ct=Dr();oo(t,Ct,(t=>n(47,_=t)));const Tt=Dr();oo(t,Tt,(t=>n(48,k=t)));const Mt=Dr();oo(t,Mt,(t=>n(49,S=t)));const Pt=Rr([tt,wt],(([t,e],i)=>{if(!e)return i(-1);const n=e.findIndex((([e])=>{if(!e&&!t)return!0;if(!e)return!1;const[i,n]=e;return t.width===i&&t.height===n}));i(n<0?0:n)}));oo(t,Pt,(t=>n(51,C=t)));const It=Rr([tt,Ct],(([t,e],i)=>{if(!e)return i(-1);const n=e.findIndex((([e])=>!e&&!t||!!e&&t.width===e));i(n<0?0:n)}));oo(t,It,(t=>n(53,T=t)));const At=Rr([tt,Mt],(([t,e],i)=>{if(!e)return i(-1);const n=e.findIndex((([e])=>!e&&!t||!!e&&t.height===e));i(n<0?0:n)}));let Dt,Rt;oo(t,At,(t=>n(55,M=t)));let Lt={};const Ot=Qs(I?20:0);return oo(t,Ot,(t=>n(63,D=t))),Yo((()=>{yt(),vt()})),t.$$set=t=>{"isActive"in t&&L(n(0,z=t.isActive)),"stores"in t&&n(28,F=t.stores),"locale"in t&&n(1,B=t.locale),"resizeMinSize"in t&&n(29,N=t.resizeMinSize),"resizeMaxSize"in t&&n(30,H=t.resizeMaxSize),"resizeSizePresetOptions"in t&&n(31,W=t.resizeSizePresetOptions),"resizeWidthPresetOptions"in t&&n(32,V=t.resizeWidthPresetOptions),"resizeHeightPresetOptions"in t&&n(33,U=t.resizeHeightPresetOptions),"resizeWillRenderFooter"in t&&n(34,q=t.resizeWillRenderFooter)},t.$$.update=()=>{var i;8193&t.$$.dirty[1]&&W&&(ho($t,x=W.map(xt),x),ho(wt,$=wc(x),$)),8192&t.$$.dirty[1]&&n(56,a=!!x),1064960&t.$$.dirty[1]&&n(50,o=C>-1&&$[C][1]),32770&t.$$.dirty[1]&&V&&(ho(kt,w=V.map(bt),w),ho(Ct,_=wc(w),_)),33587200&t.$$.dirty[1]&&n(57,l=!a&&w),4259840&t.$$.dirty[1]&&n(52,r=T>-1&&_[T][1]),131076&t.$$.dirty[1]&&U&&(ho(Tt,k=U.map(bt),k),ho(Mt,S=wc(k),S)),33685504&t.$$.dirty[1]&&n(58,c=!a&&k),17039360&t.$$.dirty[1]&&n(54,s=M>-1&&S[M][1]),234881024&t.$$.dirty[1]&&n(59,h=!a&&!l&&!c),1610612738&t.$$.dirty[0]|2147136504&t.$$.dirty[1]&&n(3,u=Lt&&iu((()=>{return q([a&&["Dropdown","size-presets",{label:o,options:x,onchange:t=>{return(e=t.value)&&!Dt&&(Dt={...p},Rt=v),e?(ho(J,v=j(e[0],e[1]),v),ho(tt,g=_t(e),g)):(ho(K,p=Dt,p),ho(J,v=Rt,v),ho(tt,g=void 0,g),Dt=void 0,Rt=void 0),void nt.write();var e},selectedIndex:C}],l&&["Dropdown","width-presets",{label:r,options:w,onchange:t=>{n(36,at=t.value),gt()},selectedIndex:T}],l&&c&&["span","times",{class:"PinturaResizeLabel",innerHTML:"&times;"}],c&&["Dropdown","height-presets",{label:s,options:k,onchange:t=>{n(37,lt=t.value),gt()},selectedIndex:M}],h&&[vg,"width-input",{id:"width-"+rt,title:B.resizeTitleInputWidth,label:B.resizeLabelInputWidth,placeholder:(t=O(lt),i=y,u=p,Math.round(null!=t?t*i:u.width)),value:at,state:dt(O(at),"width",ct,N,H),onchange:t=>{n(36,at=t),ft()}}],h&&[wg,"aspect-ratio-lock",{id:"aspect-ratio-lock-"+rt,title:B.resizeTitleButtonMaintainAspectRatio,icon:e(B.resizeIconButtonMaintainAspectRatio)?B.resizeIconButtonMaintainAspectRatio:B.resizeIconButtonMaintainAspectRatio(ut,P),locked:ut,onchange:t=>{n(35,ut=t),ft()}}],h&&[vg,"height-input",{id:"height-"+rt,title:B.resizeTitleInputHeight,label:B.resizeLabelInputHeight,placeholder:pt(O(at),y,p),value:lt,state:dt(O(lt),"height",ct,N,H),onchange:t=>{n(37,lt=t),ft()}}]].filter(Boolean),{...E},(()=>n(39,Lt={})));var t,i,u})).filter(Boolean)),16&t.$$.dirty[1]&&X.set(ut?1:0),128&t.$$.dirty[1]&&ct&&(ht=ct),3072&t.$$.dirty[1]&&ho(it,f=m?(i=g)&&p?i.width/p.width||i.height/p.height:1:void 0,f),1024&t.$$.dirty[1]|1&t.$$.dirty[2]&&I&&Ot.set(m?0:20),2&t.$$.dirty[2]&&n(4,d=D?`transform: translateY(${D}px)`:void 0)},[z,B,st,u,d,X,G,Z,K,Q,J,tt,it,ot,t=>{const e=t.target.id;/width/.test(e)?n(38,ct="width"):/height/.test(e)?n(38,ct="height"):/aspectRatio/i.test(e)?n(38,ct="lock"):n(38,ct=void 0)},t=>{st.contains(t.relatedTarget)||gt(),n(38,ct=void 0)},gt,$t,wt,kt,Ct,Tt,Mt,Pt,It,At,Ot,"resize",F,N,H,W,V,U,q,ut,at,lt,ct,Lt,p,m,g,y,x,$,w,_,k,S,o,C,r,T,s,M,a,l,c,h,P,E,I,D,function(t){Zo[t?"unshift":"push"]((()=>{st=t,n(2,st)}))},function(e){Xo(t,e)}]}var Tg={util:["resize",class extends Er{constructor(t){super(),Pr(this,t,Cg,Sg,eo,{name:27,isActive:0,stores:28,locale:1,resizeMinSize:29,resizeMaxSize:30,resizeSizePresetOptions:31,resizeWidthPresetOptions:32,resizeHeightPresetOptions:33,resizeWillRenderFooter:34},[-1,-1,-1])}get name(){return this.$$.ctx[27]}get isActive(){return this.$$.ctx[0]}set isActive(t){this.$set({isActive:t}),ar()}get stores(){return this.$$.ctx[28]}set stores(t){this.$set({stores:t}),ar()}get locale(){return this.$$.ctx[1]}set locale(t){this.$set({locale:t}),ar()}get resizeMinSize(){return this.$$.ctx[29]}set resizeMinSize(t){this.$set({resizeMinSize:t}),ar()}get resizeMaxSize(){return this.$$.ctx[30]}set resizeMaxSize(t){this.$set({resizeMaxSize:t}),ar()}get resizeSizePresetOptions(){return this.$$.ctx[31]}set resizeSizePresetOptions(t){this.$set({resizeSizePresetOptions:t}),ar()}get resizeWidthPresetOptions(){return this.$$.ctx[32]}set resizeWidthPresetOptions(t){this.$set({resizeWidthPresetOptions:t}),ar()}get resizeHeightPresetOptions(){return this.$$.ctx[33]}set resizeHeightPresetOptions(t){this.$set({resizeHeightPresetOptions:t}),ar()}get resizeWillRenderFooter(){return this.$$.ctx[34]}set resizeWillRenderFooter(t){this.$set({resizeWillRenderFooter:t}),ar()}}]};function Mg(t){let e,i;return e=new Qm({props:{stores:t[3],locale:t[4],isActive:t[0],isActiveFraction:t[1],isVisible:t[2],mapScreenPointToImagePoint:t[8],mapImagePointToScreenPoint:t[9],enableZoomControls:t[5],utilKey:"redact",imageRotation:t[10],imageFlipX:t[6],imageFlipY:t[7],shapes:t[11],toolbar:["rect"],toolShapes:{rectangle:[{x:0,y:0,width:0,height:0}]},toolActive:"rectangle",parentRect:t[13],enablePresetDropImage:!1,enablePresetSelectImage:!1,hooks:{willRenderShapeControls:t[24]}}}),e.$on("measure",t[25]),{c(){Cr(e.$$.fragment)},m(t,n){Tr(e,t,n),i=!0},p(t,[i]){const n={};8&i&&(n.stores=t[3]),16&i&&(n.locale=t[4]),1&i&&(n.isActive=t[0]),2&i&&(n.isActiveFraction=t[1]),4&i&&(n.isVisible=t[2]),256&i&&(n.mapScreenPointToImagePoint=t[8]),512&i&&(n.mapImagePointToScreenPoint=t[9]),32&i&&(n.enableZoomControls=t[5]),1024&i&&(n.imageRotation=t[10]),64&i&&(n.imageFlipX=t[6]),128&i&&(n.imageFlipY=t[7]),e.$set(n)},i(t){i||(mr(e.$$.fragment,t),i=!0)},o(t){gr(e.$$.fragment,t),i=!1},d(t){Mr(e,t)}}}function Pg(t,e,i){let n,o,r,s,a,l,c,h,u,{isActive:d}=e,{isActiveFraction:p}=e,{isVisible:f}=e,{stores:m}=e,{locale:g={}}=e,{enableZoomControls:y=!0}=e;const{imageRedaction:v,rootRect:b,imageSize:x,imageRotation:$,imageFlipX:w,imageFlipY:_,imageTransforms:k,imageTransformsInterpolated:S}=m;return oo(t,b,(t=>i(20,r=t))),oo(t,x,(t=>i(21,s=t))),oo(t,$,(t=>i(10,u=t))),oo(t,w,(t=>i(6,c=t))),oo(t,_,(t=>i(7,h=t))),oo(t,k,(t=>i(23,l=t))),oo(t,S,(t=>i(22,a=t))),t.$$set=t=>{"isActive"in t&&i(0,d=t.isActive),"isActiveFraction"in t&&i(1,p=t.isActiveFraction),"isVisible"in t&&i(2,f=t.isVisible),"stores"in t&&i(3,m=t.stores),"locale"in t&&i(4,g=t.locale),"enableZoomControls"in t&&i(5,y=t.enableZoomControls)},t.$$.update=()=>{15728832&t.$$.dirty&&i(8,n=t=>tg(t,r,s,a.origin,a.translation,l.rotation.z,a.scale,c,h)),15728832&t.$$.dirty&&i(9,o=t=>Jm(t,r,s,a.origin,a.translation,l.rotation.z,a.scale,c,h))},[d,p,f,m,g,y,c,h,n,o,u,v,b,x,$,w,_,k,S,"redact",r,s,a,l,t=>(((t,e)=>{const i=Bu(t,e);El(i,(e=>zu(e)===t))})("to-front",Fu(t[0])),t),function(e){Xo(t,e)}]}var Eg={util:["redact",class extends Er{constructor(t){super(),Pr(this,t,Pg,Mg,eo,{name:19,isActive:0,isActiveFraction:1,isVisible:2,stores:3,locale:4,enableZoomControls:5})}get name(){return this.$$.ctx[19]}get isActive(){return this.$$.ctx[0]}set isActive(t){this.$set({isActive:t}),ar()}get isActiveFraction(){return this.$$.ctx[1]}set isActiveFraction(t){this.$set({isActiveFraction:t}),ar()}get isVisible(){return this.$$.ctx[2]}set isVisible(t){this.$set({isVisible:t}),ar()}get stores(){return this.$$.ctx[3]}set stores(t){this.$set({stores:t}),ar()}get locale(){return this.$$.ctx[4]}set locale(t){this.$set({locale:t}),ar()}get enableZoomControls(){return this.$$.ctx[5]}set enableZoomControls(t){this.$set({enableZoomControls:t}),ar()}}]};const Ig='<g fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em"><path d="M18 6L6 18M6 6l12 12"></path></path></g>',Ag='<path fill="none" d="M9 15 L12 9 L15 15 M10 13.5 h3" stroke="currentColor" stroke-width=".125em"/>';var Dg={labelReset:"Reset",labelDefault:"Default",labelAuto:"Auto",labelNone:"None",labelEdit:"Edit",labelClose:"Close",labelSupportError:t=>t.join(", ")+" not supported on this browser",labelColor:"Color",labelWidth:"Width",labelSize:"Size",labelOffset:"Offset",labelAmount:"Amount",labelInset:"Inset",labelRadius:"Radius",labelSizeExtraSmall:"Extra small",labelSizeSmall:"Small",labelSizeMediumSmall:"Medium small",labelSizeMedium:"Medium",labelSizeMediumLarge:"Medium large",labelSizeLarge:"Large",labelSizeExtraLarge:"Extra large",labelButtonCancel:"Cancel",labelButtonUndo:"Undo",labelButtonRedo:"Redo",labelButtonRevert:"Revert",labelButtonExport:"Done",labelZoomIn:"Zoom in",labelZoomOut:"Zoom out",labelZoomFit:"Fit to view",labelZoomActual:"Actual size",iconZoomIn:'<path stroke="currentColor" stroke-width=".125em" d="M8 12 h8 M12 8 v8" />',iconZoomOut:'<path stroke="currentColor" stroke-width=".125em" d="M9 12 h6" />',iconSupportError:'<g fill="none" stroke="currentColor" stroke-width="2"><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"/><g><line x1="12" y1="9" x2="12" y2="13"/><line x1="12" y1="17" x2="12.01" y2="17"/></g>',iconButtonClose:Ig,iconButtonRevert:'<g fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em"><path d="M7.388 18.538a8 8 0 10-2.992-9.03"/><path fill="currentColor" d="M2.794 11.696L2.37 6.714l5.088 3.18z"/><path d="M12 8v4M12 12l4 2"/></g>',iconButtonUndo:'<g fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em"><path d="M10 8h4c2.485 0 5 2 5 5s-2.515 5-5 5h-4"/><path fill="currentColor" d="M5 8l4-3v6z"/></g>',iconButtonRedo:'<g fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em"><path d="M14 8h-4c-2.485 0-5 2-5 5s2.515 5 5 5h4"/><path fill="currentColor" d="M19 8l-4-3v6z"/></g>',iconButtonExport:'<polyline points="20 6 9 17 4 12" fill="none" stroke="currentColor" stroke-width=".125em"></polyline>',statusLabelButtonClose:"Close",statusIconButtonClose:Ig,statusLabelLoadImage:t=>t&&t.task?t.error?"IMAGE_TOO_SMALL"===t.error.code?"Minimum image size is {minWidth} Г— {minHeight}":"Error loading image":"blob-to-bitmap"===t.task?"Creating previewвЂ¦":"Loading imageвЂ¦":"Waiting for image",statusLabelProcessImage:t=>{if(t&&t.task)return"store"===t.task?t.error?"Error uploading image":"Uploading imageвЂ¦":t.error?"Error processing image":"Processing imageвЂ¦"}};const Rg={shapeLabelButtonSelectSticker:"Select image",shapeIconButtonSelectSticker:'<g fill="none" stroke="currentColor" stroke-width="0.0625em"><path d="M8 21 L15 11 L19 15"/><path d="M15 2 v5 h5"/><path d="M8 2 h8 l4 4 v12 q0 4 -4 4 h-8 q-4 0 -4 -4 v-12 q0 -4 4 -4z"/></g><circle fill="currentColor" cx="10" cy="8" r="1.5"/>',shapeIconButtonFlipHorizontal:'<g stroke="currentColor" stroke-width=".125em"><path fill="none" d="M6 6.5h5v11H6z"/><path fill="currentColor" d="M15 6.5h3v11h-3z"/><path d="M11 4v16" fill="currentColor"/></g>',shapeIconButtonFlipVertical:'<g stroke="currentColor" stroke-width=".125em"><rect x="7" y="8" width="11" height="5" fill="none"/><rect x="7" y="17" width="11" height="2" fill="currentColor"/><line x1="5" y1="13" x2="20" y2="13"/></g>',shapeIconButtonRemove:'<g fill="none" fill-rule="evenodd"><path stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" d="M7.5 7h9z"/><path d="M7.916 9h8.168a1 1 0 01.99 1.14l-.972 6.862a2 2 0 01-1.473 1.653c-.877.23-1.753.345-2.629.345-.876 0-1.752-.115-2.628-.345a2 2 0 01-1.473-1.653l-.973-6.862A1 1 0 017.916 9z" fill="currentColor"/><rect fill="currentColor" x="10" y="5" width="4" height="3" rx="1"/></g>',shapeIconButtonDuplicate:'<g fill="none" fill-rule="evenodd"><path d="M15 13.994V16a2 2 0 01-2 2H8a2 2 0 01-2-2v-5a2 2 0 012-2h2.142" stroke="currentColor" stroke-width=".125em"/><path d="M15 9V8a1 1 0 00-2 0v1h-1a1 1 0 000 2h1v1a1 1 0 002 0v-1h1a1 1 0 000-2h-1zm-4-4h6a2 2 0 012 2v6a2 2 0 01-2 2h-6a2 2 0 01-2-2V7a2 2 0 012-2z" fill="currentColor"/></g>',shapeIconButtonMoveToFront:'<g fill="none" fill-rule="evenodd"><rect fill="currentColor" x="11" y="13" width="8" height="2" rx="1"/><rect fill="currentColor" x="9" y="17" width="10" height="2" rx="1"/><path d="M11.364 8H10a5 5 0 000 10M12 6.5L14.5 8 12 9.5z" stroke="currentColor" stroke-width=".125em" stroke-linecap="round"/></g>',shapeIconButtonTextLayoutAutoWidth:""+Ag,shapeIconButtonTextLayoutAutoHeight:'<g fill="currentColor"><circle cx="4" cy="12" r="1.5"/><circle cx="20" cy="12" r="1.5"/></g>'+Ag,shapeIconButtonTextLayoutFixedSize:'<g fill="currentColor"><circle cx="5" cy="6" r="1.5"/><circle cx="19" cy="6" r="1.5"/><circle cx="19" cy="19" r="1.5"/><circle cx="5" cy="19" r="1.5"/></g>'+Ag,shapeTitleButtonTextLayoutAutoWidth:"Auto width",shapeTitleButtonTextLayoutAutoHeight:"Auto height",shapeTitleButtonTextLayoutFixedSize:"Fixed size",shapeTitleButtonFlipHorizontal:"Flip Horizontal",shapeTitleButtonFlipVertical:"Flip Vertical",shapeTitleButtonRemove:"Remove",shapeTitleButtonDuplicate:"Duplicate",shapeTitleButtonMoveToFront:"Move to front",shapeLabelInputText:"Edit text",shapeIconInputCancel:'<g fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em"><path d="M18 6L6 18M6 6l12 12"/></g>',shapeIconInputConfirm:'<g fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em"><polyline points="20 6 9 17 4 12"/></g>',shapeLabelInputCancel:"Cancel",shapeLabelInputConfirm:"Confirm",shapeLabelStrokeNone:"No outline",shapeLabelFontStyleNormal:"Normal",shapeLabelFontStyleBold:"Bold",shapeLabelFontStyleItalic:"Italic",shapeLabelFontStyleItalicBold:"Bold Italic",shapeTitleBackgroundColor:"Fill color",shapeTitleFontFamily:"Font",shapeTitleFontSize:"Font size",shapeTitleFontStyle:"Font style",shapeTitleLineHeight:"Line height",shapeTitleLineStart:"Start",shapeTitleLineEnd:"End",shapeTitleStrokeWidth:"Line width",shapeTitleStrokeColor:"Line color",shapeTitleLineDecorationBar:"Bar",shapeTitleLineDecorationCircle:"Circle",shapeTitleLineDecorationSquare:"Square",shapeTitleLineDecorationArrow:"Arrow",shapeTitleLineDecorationCircleSolid:"Circle solid",shapeTitleLineDecorationSquareSolid:"Square solid",shapeTitleLineDecorationArrowSolid:"Arrow solid",shapeIconLineDecorationBar:'<g stroke="currentColor" stroke-linecap="round" stroke-width=".125em"><path d="M5,12 H16"/><path d="M16,8 V16"/></g>',shapeIconLineDecorationCircle:'<g stroke="currentColor" stroke-linecap="round"><path stroke-width=".125em" d="M5,12 H12"/><circle fill="none" stroke-width=".125em" cx="16" cy="12" r="4"/></g>',shapeIconLineDecorationSquare:'<g stroke="currentColor" stroke-linecap="round"><path stroke-width=".125em" d="M5,12 H12"/><rect fill="none" stroke-width=".125em" x="12" y="8" width="8" height="8"/></g>',shapeIconLineDecorationArrow:'<g stroke="currentColor" stroke-linecap="round" stroke-width=".125em"><path d="M5,12 H16 M13,7 l6,5 l-6,5" fill="none"/></g>',shapeIconLineDecorationCircleSolid:'<g stroke="currentColor" stroke-linecap="round"><path stroke-width=".125em" d="M5,12 H12"/><circle fill="currentColor" cx="16" cy="12" r="4"/></g>',shapeIconLineDecorationSquareSolid:'<g stroke="currentColor" stroke-linecap="round"><path stroke-width=".125em" d="M5,12 H12"/><rect fill="currentColor" x="12" y="8" width="8" height="8"/></g>',shapeIconLineDecorationArrowSolid:'<g stroke="currentColor" stroke-linecap="round" stroke-width=".125em"><path d="M5,12 H16"/><path d="M13,7 l6,5 l-6,5z" fill="currentColor"/></g>',shapeTitleColorTransparent:"Transparent",shapeTitleColorWhite:"White",shapeTitleColorSilver:"Silver",shapeTitleColorGray:"Gray",shapeTitleColorBlack:"Black",shapeTitleColorNavy:"Navy",shapeTitleColorBlue:"Blue",shapeTitleColorAqua:"Aqua",shapeTitleColorTeal:"Teal",shapeTitleColorOlive:"Olive",shapeTitleColorGreen:"Green",shapeTitleColorYellow:"Yellow",shapeTitleColorOrange:"Orange",shapeTitleColorRed:"Red",shapeTitleColorMaroon:"Maroon",shapeTitleColorFuchsia:"Fuchsia",shapeTitleColorPurple:"Purple",shapeTitleTextColor:"Font color",shapeTitleTextAlign:"Text align",shapeTitleTextAlignLeft:"Left align text",shapeTitleTextAlignCenter:"Center align text",shapeTitleTextAlignRight:"Right align text",shapeIconTextAlignLeft:'<g stroke-width=".125em" stroke="currentColor"><line x1="5" y1="8" x2="15" y2="8"/><line x1="5" y1="12" x2="19" y2="12"/><line x1="5" y1="16" x2="14" y2="16"/></g>',shapeIconTextAlignCenter:'<g stroke-width=".125em" stroke="currentColor"><line x1="7" y1="8" x2="17" y2="8"/><line x1="5" y1="12" x2="19" y2="12"/><line x1="8" y1="16" x2="16" y2="16"/></g>',shapeIconTextAlignRight:'<g stroke-width=".125em" stroke="currentColor"><line x1="9" y1="8" x2="19" y2="8"/><line x1="5" y1="12" x2="19" y2="12"/><line x1="11" y1="16" x2="19" y2="16"/></g>',shapeLabelToolSharpie:"Sharpie",shapeLabelToolEraser:"Eraser",shapeLabelToolRectangle:"Rectangle",shapeLabelToolEllipse:"Ellipse",shapeLabelToolArrow:"Arrow",shapeLabelToolLine:"Line",shapeLabelToolText:"Text",shapeLabelToolPreset:"Stickers",shapeIconToolSharpie:'<g stroke-width=".125em" stroke="currentColor" fill="none"><path d="M2.025 5c5.616-2.732 8.833-3.857 9.65-3.374C12.903 2.351.518 12.666 2.026 14 3.534 15.334 16.536.566 17.73 2.566 18.924 4.566 3.98 17.187 4.831 18c.851.813 9.848-6 11.643-6 1.087 0-2.53 5.11-2.92 7-.086.41 3.323-1.498 4.773-1 .494.17.64 2.317 1.319 3 .439.443 1.332.776 2.679 1" stroke="currentColor" stroke-width=".125em" fill="none" fill-rule="evenodd" stroke-linejoin="round"/></g>',shapeIconToolEraser:'<g stroke-width=".125em" stroke="currentColor" stroke-linecap="round" fill="none"><g transform="translate(3, 15) rotate(-45)"><rect x="0" y="0" width="18" height="10" rx="3"/></g><line x1="11" y1="21" x2="18" y2="21"/><line x1="20" y1="21" x2="22" y2="21"/></g>',shapeIconToolRectangle:'<g stroke-width=".125em" stroke="currentColor" fill="none"><rect x="2" y="2" width="20" height="20" rx="3"/></g>',shapeIconToolEllipse:'<g stroke-width=".125em" stroke="currentColor" fill="none"><circle cx="12" cy="12" r="11"/></g>',shapeIconToolArrow:'<g stroke-width=".125em" stroke="currentColor" fill="none"><line x1="20" y1="3" x2="6" y2="21"/><path d="m10 5 L22 1 L21 13" fill="currentColor" stroke="none"/></g>',shapeIconToolLine:'<g stroke-width=".125em" stroke="currentColor" fill="none"><line x1="20" y1="3" x2="6" y2="21"/></g>',shapeIconToolText:'<g stroke="none" fill="currentColor" transform="translate(6,0)"><path d="M8.14 20.085c.459 0 .901-.034 1.329-.102a8.597 8.597 0 001.015-.21v1.984c-.281.135-.695.247-1.242.336a9.328 9.328 0 01-1.477.133c-3.312 0-4.968-1.745-4.968-5.235V6.804H.344v-1.25l2.453-1.078L3.89.819h1.5v3.97h4.97v2.015H5.39v10.078c0 1.031.245 1.823.735 2.375s1.161.828 2.015.828z"/>',shapeIconToolPreset:'<g fill="none" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em"><path d="M12 22c2.773 0 1.189-5.177 3-7 1.796-1.808 7-.25 7-3 0-5.523-4.477-10-10-10S2 6.477 2 12s4.477 10 10 10z"></path><path d="M20 17c-3 3-5 5-8 5"></path></g>'};var Lg=(t,e)=>{const i=Object.getOwnPropertyDescriptors(t);Object.keys(i).forEach((n=>{i[n].get?Object.defineProperty(e,n,{get:()=>t[n],set:e=>t[n]=e}):e[n]=t[n]}))},Og=t=>{const e={},{sub:i,pub:o}=di();n()&&null!==document.doctype||console.warn("Browser is in quirks mode, add <!DOCTYPE html> to page to fix render issues");const r=fs();Lg(r,e);const s=((t,e)=>{const i={},o=new Mu({target:t,props:{stores:e,pluginComponents:Array.from(Ru)}});let r=!1;const s=()=>{r||(n()&&window.removeEventListener("pagehide",s),o&&(r=!0,o.$destroy()))};Iu||(Iu=new Set(gl(Mu).filter((t=>!Eu.includes(t))))),Iu.forEach((t=>{Object.defineProperty(i,t,{get:()=>o[t],set:e=>o[t]=e})})),Object.defineProperty(i,"previewImageData",{get:()=>o.imagePreviewCurrent}),Au.forEach((t=>{const e=Du[t],n=e[0];Object.defineProperty(i,t,{get:()=>o.pluginInterface[n][t],set:i=>{const n=e.reduce(((e,n)=>(e[n]={...o.pluginOptions[n],[t]:i},e)),{});o.pluginOptions={...o.pluginOptions,...n}}})})),Object.defineProperty(i,"element",{get:()=>o.root,set:()=>{}});const a=o.history;return Yr(i,{on:(t,e)=>{if(r)return()=>{};if(/undo|redo|revert/.test(t))return a.on(t,e);const i=[o.sub(t,e),o.$on(t,(t=>e(t instanceof CustomEvent&&!t.detail?void 0:t)))].filter(Boolean);return()=>i.forEach((t=>t()))},updateImagePreview:t=>{o.imagePreviewSrc=t},close:()=>!r&&o.pub("close"),destroy:s}),Object.defineProperty(i,"history",{get:()=>({undo:()=>a.undo(),redo:()=>a.redo(),revert:()=>a.revert(),get:()=>a.get(),getCollapsed:()=>a.get().splice(0,a.index+1),set:t=>a.set(t),write:t=>a.write(t),get length(){return a.length()},get index(){return a.index}})}),n()&&window.addEventListener("pagehide",s),i})(t,r.stores);Lg(s,e);const a=["loadImage","processImage","abortProcessImage","abortLoadImage"].map((t=>s.on(t,(e=>{const i=r[t](e&&e.detail);i instanceof Promise&&i.catch(f)})))),l=(t,e)=>{const n=i(t,e),o=r.on(t,e),a=s.on(t,e);return()=>{n(),o(),a()}};e.handleEvent=f;const c=Lu.map((t=>l(t,(i=>e.handleEvent(t,i)))));return Yr(e,{on:l,updateImage:t=>new Promise(((i,n)=>{const o=e.history.get(),s=e.imageState;r.loadImage(t).then((t=>{e.history.set(o),e.imageState=s,i(t)})).catch(n)})),close:()=>{o("close")},destroy:()=>{[...a,...c].forEach((t=>t())),s.destroy(),r.destroy(),o("destroy")}}),setTimeout((()=>o("init",e)),0),e};n()&&HTMLElement;const{document:zg,window:Fg}=br;function Bg(t){let e,i,n,o;return nr(t[27]),{c(){e=So(),i=wo("div"),Eo(i,"class",t[5]),Eo(i,"style",t[4])},m(r,s){xo(r,e,s),xo(r,i,s),t[28](i),n||(o=[To(Fg,"keydown",t[10]),To(Fg,"orientationchange",t[11]),To(Fg,"resize",t[27]),To(zg.body,"focusin",(function(){to(!t[1]&&t[7])&&(!t[1]&&t[7]).apply(this,arguments)})),To(zg.body,"focusout",(function(){to(t[2]&&t[8])&&(t[2]&&t[8]).apply(this,arguments)})),To(i,"wheel",t[9],{passive:!1})],n=!0)},p(e,n){t=e,32&n[0]&&Eo(i,"class",t[5]),16&n[0]&&Eo(i,"style",t[4])},i:Xn,o:Xn,d(r){r&&$o(e),r&&$o(i),t[28](null),n=!1,Jn(o)}}}function Ng(e,i,o){let r,s,a,l,c,h,u,d;const p=Vo();let{root:f}=i,{preventZoomViewport:m=!0}=i,{preventScrollBodyIfNeeded:g=!0}=i,{preventFooterOverlapIfNeeded:y=!0}=i,{class:v}=i,b=!0,x=!1,$=!1,w=n()&&document.documentElement,_=n()&&document.body,k=n()&&document.head;const S=Qs(0,{precision:.001,damping:.5});oo(e,S,(t=>o(23,d=t)));const C=S.subscribe((t=>{$&&t>=1?(o(19,$=!1),o(1,b=!1),p("show")):x&&t<=0&&(o(18,x=!1),o(1,b=!0),p("hide"))}));let T,M,P,E=!1;const I=()=>document.querySelector("meta[name=viewport]"),A=()=>Array.from(document.querySelectorAll("meta[name=theme-color]"));let D;let R,L,O,z=0;const F=()=>{L||(L=t("div",{style:"position:fixed;height:100vh;top:0"}),_.append(L))};let B;Wo((()=>{y&&Oe()&&F()})),jo((()=>{L&&(o(21,O=L.offsetHeight),L.remove(),L=void 0)}));const N=()=>w.style.setProperty("--pintura-document-height",window.innerHeight+"px");return Yo((()=>{w.classList.remove("PinturaModalBodyLock"),C()})),e.$$set=t=>{"root"in t&&o(0,f=t.root),"preventZoomViewport"in t&&o(12,m=t.preventZoomViewport),"preventScrollBodyIfNeeded"in t&&o(13,g=t.preventScrollBodyIfNeeded),"preventFooterOverlapIfNeeded"in t&&o(14,y=t.preventFooterOverlapIfNeeded),"class"in t&&o(15,v=t.class)},e.$$.update=()=>{9175042&e.$$.dirty[0]&&o(22,r=$||x?d:b?0:1),4096&e.$$.dirty[0]&&(s="width=device-width,height=device-height,initial-scale=1"+(m?",maximum-scale=1,user-scalable=0":"")),786434&e.$$.dirty[0]&&o(24,a=!$&&!b&&!x),12&e.$$.dirty[0]&&(E||o(20,R=z)),2097160&e.$$.dirty[0]&&o(25,l=Ke(O)?"--viewport-pad-footer:"+(O>z?0:1):""),38797312&e.$$.dirty[0]&&o(4,c=`opacity:${r};height:${R}px;--editor-modal:1;${l}`),32768&e.$$.dirty[0]&&o(5,h=Ga(["pintura-editor","PinturaModal",v])),8192&e.$$.dirty[0]&&o(26,u=g&&Oe()&&/15_/.test(navigator.userAgent)),83886080&e.$$.dirty[0]&&u&&(t=>{t?(B=window.scrollY,w.classList.add("PinturaDocumentLock"),N(),window.addEventListener("resize",N)):(window.removeEventListener("resize",N),w.classList.remove("PinturaDocumentLock"),Ke(B)&&window.scrollTo(0,B),B=void 0)})(a)},[f,b,E,z,c,h,S,t=>{Yh(t.target)&&(o(2,E=!0),D=z)},t=>{if(Yh(t.target))if(clearTimeout(void 0),D===z)o(2,E=!1);else{const t=z;((t,e)=>{const i=()=>{t()?e():requestAnimationFrame(i)};requestAnimationFrame(i)})((()=>z!==t),(()=>o(2,E=!1)))}},t=>{t.target&&/PinturaStage/.test(t.target.className)&&t.preventDefault()},t=>{const{key:e}=t;if(!/escape/i.test(e))return;const i=t.target;if(i&&/input|textarea/i.test(i.nodeName))return;const n=document.querySelectorAll(".PinturaModal");n[n.length-1]===f&&p("close")},F,m,g,y,v,()=>{if($||!b)return;o(19,$=!0);const e=I()||t("meta",{name:"viewport"});T=!T&&e.getAttribute("content"),e.setAttribute("content",s+(/cover/.test(T)?",viewport-fit=cover":"")),e.parentNode||k.append(e);const i=getComputedStyle(f).getPropertyValue("--color-background"),n=A();if(n.length)M=n.map((t=>t.getAttribute("content")));else{const e=t("meta",{name:"theme-color"});k.append(e),n.push(e)}n.forEach((t=>t.setAttribute("content",`rgb(${i})`))),clearTimeout(P),P=setTimeout((()=>S.set(1)),250)},()=>{if(x||b)return;clearTimeout(P),o(18,x=!0);const t=I();T?t.setAttribute("content",T):t.remove();const e=A();M?e.forEach(((t,e)=>{t.setAttribute("content",M[e])})):e.forEach((t=>t.remove())),S.set(0)},x,$,R,O,r,d,a,l,u,function(){o(3,z=Fg.innerHeight)},function(t){Zo[t?"unshift":"push"]((()=>{f=t,o(0,f)}))}]}class Hg extends Er{constructor(t){super(),Pr(this,t,Ng,Bg,eo,{root:0,preventZoomViewport:12,preventScrollBodyIfNeeded:13,preventFooterOverlapIfNeeded:14,class:15,show:16,hide:17},[-1,-1])}get root(){return this.$$.ctx[0]}set root(t){this.$set({root:t}),ar()}get preventZoomViewport(){return this.$$.ctx[12]}set preventZoomViewport(t){this.$set({preventZoomViewport:t}),ar()}get preventScrollBodyIfNeeded(){return this.$$.ctx[13]}set preventScrollBodyIfNeeded(t){this.$set({preventScrollBodyIfNeeded:t}),ar()}get preventFooterOverlapIfNeeded(){return this.$$.ctx[14]}set preventFooterOverlapIfNeeded(t){this.$set({preventFooterOverlapIfNeeded:t}),ar()}get class(){return this.$$.ctx[15]}set class(t){this.$set({class:t}),ar()}get show(){return this.$$.ctx[16]}get hide(){return this.$$.ctx[17]}}const Wg=(t,e,i,n)=>{const o=Q(e.x-t.x,e.y-t.y),r=rt(o),s=5*i;let a;a=n?.5*s:Math.ceil(.5*(s-1));const l=ut(et(r),a);return{anchor:et(t),offset:l,normal:r,solid:n,size:s,sizeHalf:a}},jg=({anchor:t,solid:e,normal:i,offset:n,size:o,sizeHalf:r,strokeWidth:s,strokeColor:a},l)=>{const c=t.x,h=t.y,u=ut(et(i),o),d=Q(c+u.x,h+u.y);if(ut(u,.55),e){ct(l,n);const t=ut(et(i),.5*r);return[{points:[Q(c-t.x,h-t.y),Q(d.x-u.y,d.y+u.x),Q(d.x+u.y,d.y-u.x)],backgroundColor:a}]}{const t=ut((t=>{const e=t.x;return t.x=-t.y,t.y=e,t})(et(i)),.5),e=Q(c-t.x,h-t.y),n=Q(c+t.x,h+t.y);return[{points:[Q(d.x+u.y,d.y-u.x),e,Q(c,h),n,Q(d.x-u.y,d.y+u.x)],strokeWidth:s,strokeColor:a}]}},Yg=({anchor:t,solid:e,offset:i,normal:n,sizeHalf:o,strokeWidth:r,strokeColor:s},a)=>(ct(a,i),e&&ct(a,it(et(n))),[{x:t.x,y:t.y,rx:o,ry:o,backgroundColor:e?s:void 0,strokeWidth:e?void 0:r,strokeColor:e?void 0:s}]),Vg=({anchor:t,offset:e,strokeWidth:i,strokeColor:n})=>[{points:[Q(t.x-e.y,t.y+e.x),Q(t.x+e.y,t.y-e.x)],strokeWidth:i,strokeColor:n}],Ug=({anchor:t,solid:e,offset:i,normal:n,sizeHalf:o,strokeWidth:r,strokeColor:s},a)=>{return ct(a,i),[{x:t.x-o,y:t.y-o,width:2*o,height:2*o,rotation:(l=n,Math.atan2(l.y,l.x)),backgroundColor:e?s:void 0,strokeWidth:e?void 0:r,strokeColor:e?void 0:s}];var l},qg=(t,i)=>{const n=parseFloat(t)*i;return e(t)?n+"%":n},Xg=(t,i)=>e(t)?fn(t,i):t,Gg=t=>[{...t,frameStyle:"line",frameInset:0,frameOffset:0,frameSize:t.frameSize?qg(t.frameSize,2):"2.5%",frameRadius:t.frameRound?qg(t.frameSize,2):0}],Zg=({width:t,height:e,frameImage:i,frameSize:n="15%",frameSlices:o={x1:.15,y1:.15,x2:.85,y2:.85}},{isPreview:r})=>{if(!i)return[];const s=Math.sqrt(t*e),a=Xg(n,s),l=r?a:Math.round(a),c=l,{x1:h,x2:u,y1:d,y2:p}=o,f={x0:0,y0:0,x1:l,y1:c,x2:t-l,y2:e-c,x3:t,y3:e,cw:l,ch:c,ew:t-l-l,eh:e-c-c},m=r?1:0,g=2*m,y={width:f.cw,height:f.ch,backgroundImage:i};return[{x:f.x1-m,y:f.y0,width:f.ew+g,height:f.ch,backgroundCorners:[{x:h,y:0},{x:u,y:0},{x:u,y:d},{x:h,y:d}],backgroundImage:i},{x:f.x1-m,y:f.y2,width:f.ew+g,height:f.ch,backgroundCorners:[{x:h,y:p},{x:u,y:p},{x:u,y:1},{x:h,y:1}],backgroundImage:i},{x:f.x0,y:f.y1-m,width:f.cw,height:f.eh+g,backgroundCorners:[{x:0,y:d},{x:h,y:d},{x:h,y:p},{x:0,y:p}],backgroundImage:i},{x:f.x2,y:f.y1-m,width:f.cw,height:f.eh+g,backgroundCorners:[{x:u,y:d},{x:1,y:d},{x:1,y:p},{x:u,y:p}],backgroundImage:i},{...y,x:f.x0,y:f.y0,backgroundCorners:[{x:0,y:0},{x:h,y:0},{x:h,y:d},{x:0,y:d}]},{...y,x:f.x2,y:f.y0,backgroundCorners:[{x:u,y:0},{x:1,y:0},{x:1,y:d},{x:u,y:d}]},{...y,x:f.x2,y:f.y2,backgroundCorners:[{x:u,y:p},{x:1,y:p},{x:1,y:1},{x:u,y:1}]},{...y,x:f.x0,y:f.y2,backgroundCorners:[{x:0,y:p},{x:h,y:p},{x:h,y:1},{x:0,y:1}]}]},Kg=({x:t,y:e,width:i,height:n,frameInset:o="3.5%",frameSize:r=".25%",frameColor:s=[1,1,1],frameOffset:a="5%",frameAmount:l=1,frameRadius:c=0,expandsCanvas:h=!1},{isPreview:u})=>{const d=Math.sqrt(i*n);let p=Xg(r,d);const f=Xg(o,d),m=Xg(a,d);let g=0;u||(p=Math.max(1,Math.round(p)),g=p%2==0?0:.5);const y=Xg(qg(c,l),d);return new Array(l).fill(void 0).map(((o,r)=>{const a=m*r;let l=t+f+a,c=e+f+a,d=t+i-f-a,v=e+n-f-a;return u||(l=Math.round(l),c=Math.round(c),d=Math.round(d),v=Math.round(v)),{x:l+g,y:c+g,width:d-l,height:v-c,cornerRadius:y>0?y-a:0,strokeWidth:p,strokeColor:s,expandsCanvas:h}}))},Qg=({x:t,y:e,width:i,height:n,frameSize:o=".25%",frameOffset:r=0,frameInset:s="2.5%",frameColor:a=[1,1,1]},{isPreview:l})=>{const c=Math.sqrt(i*n);let h=Xg(o,c),u=Xg(s,c),d=Xg(r,c),p=0;l||(h=Math.max(1,Math.round(h)),u=Math.round(u),d=Math.round(d),p=h%2==0?0:.5);const f=d-u,m=t+u+p,g=e+u+p,y=t+i-u-p,v=e+n-u-p;return[{points:[Q(m+f,g),Q(y-f,g)]},{points:[Q(y,g+f),Q(y,v-f)]},{points:[Q(y-f,v),Q(m+f,v)]},{points:[Q(m,v-f),Q(m,g+f)]}].map((t=>(t.strokeWidth=h,t.strokeColor=a,t)))},Jg=({x:t,y:e,width:i,height:n,frameSize:o=".25%",frameInset:r="2.5%",frameLength:s="2.5%",frameColor:a=[1,1,1]},{isPreview:l})=>{const c=Math.sqrt(i*n);let h=Xg(o,c),u=Xg(r,c),d=Xg(s,c),p=0;l||(h=Math.max(1,Math.round(h)),u=Math.round(u),d=Math.round(d),p=h%2==0?0:.5);const f=t+u+p,m=e+u+p,g=t+i-u-p,y=e+n-u-p;return[{points:[Q(f,m+d),Q(f,m),Q(f+d,m)]},{points:[Q(g-d,m),Q(g,m),Q(g,m+d)]},{points:[Q(g,y-d),Q(g,y),Q(g-d,y)]},{points:[Q(f+d,y),Q(f,y),Q(f,y-d)]}].map((t=>(t.strokeWidth=h,t.strokeColor=a,t)))},ty=({x:t,y:e,width:i,height:n,frameColor:o=[1,1,1]},{isPreview:r})=>{const s=Math.sqrt(i*n),a=.1*s;let l=.2*s;const c=.5*a;let h=.0025*s;return r||(l=Math.ceil(l),h=Math.max(2,h)),o.length=3,[{id:"border",x:t-c,y:e-c,width:i+a,height:n+l,frameStyle:"line",frameInset:0,frameOffset:0,frameSize:a,frameColor:o,expandsCanvas:!0},{id:"chin",x:t-c,y:n,width:i+a,height:l,backgroundColor:o,expandsCanvas:!0},r&&{x:t,y:e,width:i,height:n,strokeWidth:h,strokeColor:o}].filter(Boolean)},ey=js,iy=Ys,ny=(e={})=>{const{blurAmount:i,scrambleAmount:n,enableSmoothing:o,backgroundColor:r}=e;return(e,s)=>(async(e,i={})=>{if(!e)return;const{width:n,height:o}=e,{dataSize:r=96,dataSizeScalar:s=1,scrambleAmount:a=4,blurAmount:l=6,outputFormat:c="canvas",backgroundColor:h=[0,0,0]}=i,u=Math.round(r*s),d=Math.min(u/n,u/o),p=Math.floor(n*d),f=Math.floor(o*d),m=t("canvas",{width:p,height:f}),g=m.getContext("2d");if(h.length=3,g.fillStyle=ai(h),g.fillRect(0,0,p,f),_(e)){const i=t("canvas",{width:n,height:o});i.getContext("2d").putImageData(e,0,0),g.drawImage(i,0,0,p,f),w(i)}else g.drawImage(e,0,0,p,f);const y=g.getImageData(0,0,p,f),v=[];if(a>0&&v.push([Vs,{amount:a}]),l>0)for(let t=0;t<l;t++)v.push([Ue,{matrix:Us}]);let b;if(v.length){const t=(e,i)=>`(err, imageData) => {\n                (${e[i][0].toString()})(Object.assign({ imageData: imageData }, filterInstructions[${i}]), \n                    ${e[i+1]?t(e,i+1):"done"})\n            }`,e=`function (options, done) {\n            const filterInstructions = options.filterInstructions;\n            const imageData = options.imageData;\n            (${t(v,0)})(null, imageData)\n        }`,i=await R(e,[{imageData:y,filterInstructions:v.map((t=>t[1]))}],[y.data.buffer]);b=je(i)}else b=y;return"canvas"===c?(g.putImageData(b,0,0),m):b})(e,{blurAmount:i,scrambleAmount:n,enableSmoothing:o,backgroundColor:r,...s})},oy={markupEditorToolbar:((t=["sharpie","eraser","line","arrow","rectangle","ellipse","text","preset"])=>t.map((t=>e(t)?pd(t):Array.isArray(t)?C(t[1])?pd(t[0],void 0,t[1]):pd(t[0],t[1],t[2]):void 0)).filter(Boolean))(),markupEditorToolStyles:{sharpie:dd("path",{strokeWidth:"0.5%",strokeColor:[...cd],disableMove:!0}),eraser:dd("eraser"),line:dd("line",{strokeColor:[...cd],strokeWidth:"0.5%"}),arrow:dd("line",{lineStart:"none",lineEnd:"arrow-solid",strokeColor:[...cd],strokeWidth:"0.5%"}),rectangle:dd("rectangle",{strokeColor:[...hd],backgroundColor:[...cd]}),ellipse:dd("ellipse",{strokeColor:[...hd],backgroundColor:[...cd]}),text:dd("text",{color:[...cd],fontSize:"2%"})},markupEditorShapeStyleControls:((e={})=>{const{colorOptions:i=wd(fd()),lineEndStyleOptions:n=Md(vd()),fontFamilyOptions:o=Cd(bd()),fontStyleOptions:r=Td($d()),textAlignOptions:s=Pd(xd())}=e;let{strokeWidthOptions:a=Sd(yd()),fontSizeOptions:l=_d(md()),lineHeightOptions:c=kd(gd())}=e;[l,c,a]=[l,c,a].map((t=>Array.isArray(t)&&t.every(Ke)?t.map(ad):t));const h={defaultColor:i&&Ad(i),defaultNumber:Dd(),defaultPercentage:Dd({getValue:t=>parseFloat(t),setValue:t=>t+"%",step:.05,label:(t,e,i)=>Math.round(t/i*100)+"%",labelClass:"PinturaPercentageLabel"}),backgroundColor:i&&Rd(i),strokeColor:i&&Ld(i),strokeWidth:a&&(d=a,[dh,{title:t=>t.shapeTitleStrokeWidth,options:t=>Je(t,"backgroundColor")?Ed(d,{defaultKey:"shapeLabelStrokeNone"}):Ed(d),onchange:(t,e)=>{if(!t)return;const i=e.strokeColor||[];if(i[3])return;const n=[...i];n[3]=1,e.strokeColor[3]=n}}]),lineStart:n&&zd(n),lineEnd:n&&Fd(n),color:i&&Bd(i),fontFamily:o&&(u=o,[dh,{title:t=>t.shapeTitleFontFamily,onload:({options:e=[]})=>{rd()&&e.map((([t])=>t)).filter(Boolean).filter((t=>!Id(t))).forEach((e=>{const i="PinturaFontTest-"+e.replace(/[^a-zA-Z0-9]+/g,"").toLowerCase();document.getElementById(i)||document.body.append(t("span",{textContent:" ",id:i,class:"PinturaFontTest",style:`font-family:${e};font-size:0;color:transparent;`}))}))},ondestroy:()=>{rd()&&document.querySelectorAll(".PinturaFontTest").forEach((t=>t.remove()))},optionLabelStyle:t=>"font-family: "+t,options:Ed(u,{defaultKey:"labelDefault"}),optionFilter:t=>{if(!rd())return!0;const[e]=t;return!e||Id(e)}}]),fontStyle_fontWeight:r&&Nd(r),fontSize:l&&Hd(l),lineHeight:c&&jd(c),textAlign:s&&Wd(s),frameColor:["defaultColor"],frameSize:["defaultPercentage",{min:.2,max:10,title:t=>t.labelSize}],frameInset:["defaultPercentage",{min:.5,max:10,title:t=>t.labelInset}],frameOffset:["defaultPercentage",{min:.5,max:10,title:t=>t.labelOffset}],frameRadius:["defaultPercentage",{min:.5,max:10,title:t=>t.labelRadius}],frameAmount:["defaultNumber",{min:1,max:5,step:1,title:t=>t.labelAmount}]};var u,d;return Object.entries(e).forEach((([t,e])=>{h[t]||(h[t]=e)})),h})()};const ry=hf,sy=yf,ay=kf,ly=ng,cy=sg,hy=cg,uy=mg,dy=Eg,py=Tg,fy=Hu,my={filterFunctions:{chrome:()=>[1.398,-.316,.065,-.273,.201,-.051,1.278,-.08,-.273,.201,-.051,.119,1.151,-.29,.215,0,0,0,1,0],fade:()=>[1.073,-.015,.092,-.115,-.017,.107,.859,.184,-.115,-.017,.015,.077,1.104,-.115,-.017,0,0,0,1,0],pastel:()=>[.75,.25,.25,0,0,.25,.75,.25,0,0,.25,.25,.75,0,0,0,0,0,1,0],cold:()=>[1.1,0,0,0,-.1,0,1.1,0,0,-.1,0,0,1.2,0,-.1,0,0,0,1,0],warm:()=>[1.06,0,0,0,0,0,1.01,0,0,0,0,0,.93,0,0,0,0,0,1,0],monoDefault:()=>[.212,.715,.114,0,0,.212,.715,.114,0,0,.212,.715,.114,0,0,0,0,0,1,0],monoWash:()=>[.163,.518,.084,-.01,.208,.163,.529,.082,-.02,.21,.171,.529,.084,0,.214,0,0,0,1,0],monoNoir:()=>[.15,1.3,-.25,.1,-.2,.15,1.3,-.25,.1,-.2,.15,1.3,-.25,.1,-.2,0,0,0,1,0],monoStark:()=>[.338,.991,.117,.093,-.196,.302,1.049,.096,.078,-.196,.286,1.016,.146,.101,-.196,0,0,0,1,0],sepiaDefault:()=>[.393,.768,.188,0,0,.349,.685,.167,0,0,.272,.533,.13,0,0,0,0,0,1,0],sepiaRust:()=>[.269,.764,.172,.05,.1,.239,.527,.152,0,.176,.186,.4,.119,0,.159,0,0,0,1,0],sepiaBlues:()=>[.289,.62,.185,0,.077,.257,.566,.163,0,.115,.2,.43,.128,0,.188,0,0,0,1,0],sepiaColor:()=>[.547,.764,.134,0,-.147,.281,.925,.12,0,-.135,.225,.558,.33,0,-.113,0,0,0,1,0]},filterOptions:[["Default",[[void 0,t=>t.labelDefault]]],["Classic",[["chrome",t=>t.filterLabelChrome],["fade",t=>t.filterLabelFade],["cold",t=>t.filterLabelCold],["warm",t=>t.filterLabelWarm],["pastel",t=>t.filterLabelPastel]]],["Monochrome",[["monoDefault",t=>t.filterLabelMonoDefault],["monoNoir",t=>t.filterLabelMonoNoir],["monoStark",t=>t.filterLabelMonoStark],["monoWash",t=>t.filterLabelMonoWash]]],["Sepia",[["sepiaDefault",t=>t.filterLabelSepiaDefault],["sepiaRust",t=>t.filterLabelSepiaRust],["sepiaBlues",t=>t.filterLabelSepiaBlues],["sepiaColor",t=>t.filterLabelSepiaColor]]]]},gy={frameStyles:{solidSharp:{shape:{frameColor:[1,1,1],frameStyle:"solid",frameSize:"2.5%"},thumb:'<rect stroke-width="5" x="0" y="0" width="100%" height="100%"/>'},solidRound:{shape:{frameColor:[1,1,1],frameStyle:"solid",frameSize:"2.5%",frameRound:!0},thumb:'<rect stroke-width="5" x="0" y="0" width="100%" height="100%" rx="12%"/>'},lineSingle:{shape:{frameColor:[1,1,1],frameStyle:"line",frameInset:"2.5%",frameSize:".3125%",frameRadius:0},thumb:'<div style="top:.5em;left:.5em;right:.5em;bottom:.5em;box-shadow:inset 0 0 0 1px currentColor"></div>'},lineMultiple:{shape:{frameColor:[1,1,1],frameStyle:"line",frameAmount:2,frameInset:"2.5%",frameSize:".3125%",frameOffset:"1.25%",frameRadius:0},thumb:'<div style="top:.75em;left:.75em;right:.75em;bottom:.75em; outline: 3px double"></div>'},edgeSeparate:{shape:{frameColor:[1,1,1],frameStyle:"edge",frameInset:"2.5%",frameOffset:"5%",frameSize:".3125%"},thumb:'<div style="top:.75em;left:.5em;bottom:.75em;border-left:1px solid"></div><div style="top:.75em;right:.5em;bottom:.75em;border-right:1px solid"></div><div style="top:.5em;left:.75em;right:.75em;border-top:1px solid"></div><div style="bottom:.5em;left:.75em;right:.75em;border-bottom:1px solid"></div>'},edgeCross:{shape:{frameColor:[1,1,1],frameStyle:"edge",frameInset:"2.5%",frameSize:".3125%"},thumb:'<div style="top:-.5em;left:.5em;right:.5em;bottom:-.5em; box-shadow: inset 0 0 0 1px currentColor"></div><div style="top:.5em;left:-.5em;right:-.5em;bottom:.5em;box-shadow:inset 0 0 0 1px currentColor"></div>'},edgeOverlap:{shape:{frameColor:[1,1,1],frameStyle:"edge",frameOffset:"1.5%",frameSize:".3125%"},thumb:'<div style="top:.3125em;left:.5em;bottom:.3125em;border-left:1px solid"></div><div style="top:.3125em;right:.5em;bottom:.3125em;border-right:1px solid"></div><div style="top:.5em;left:.3125em;right:.3125em;border-top:1px solid"></div><div style="bottom:.5em;left:.3125em;right:.3125em;border-bottom:1px solid"></div>'},hook:{shape:{frameColor:[1,1,1],frameStyle:"hook",frameInset:"2.5%",frameSize:".3125%",frameLength:"5%"},thumb:'<div style="top:.5em;left:.5em;width:.75em;height:.75em; border-left: 1px solid;border-top: 1px solid;"></div><div style="top:.5em;right:.5em;width:.75em;height:.75em; border-right: 1px solid;border-top: 1px solid;"></div><div style="bottom:.5em;left:.5em;width:.75em;height:.75em; border-left: 1px solid;border-bottom: 1px solid;"></div><div style="bottom:.5em;right:.5em;width:.75em;height:.75em; border-right: 1px solid;border-bottom: 1px solid;"></div>'},polaroid:{shape:{frameColor:[1,1,1],frameStyle:"polaroid"},thumb:'<rect stroke-width="20%" x="-5%" y="-5%" width="110%" height="96%"/>'}},frameOptions:[[void 0,t=>t.labelNone],["solidSharp",t=>t.frameLabelMatSharp],["solidRound",t=>t.frameLabelMatRound],["lineSingle",t=>t.frameLabelLineSingle],["lineMultiple",t=>t.frameLabelLineMultiple],["edgeCross",t=>t.frameLabelEdgeCross],["edgeSeparate",t=>t.frameLabelEdgeSeparate],["edgeOverlap",t=>t.frameLabelEdgeOverlap],["hook",t=>t.frameLabelCornerHooks],["polaroid",t=>t.frameLabelPolaroid]]},yy=Dg,vy=Rg,by={cropLabel:"Crop",cropIcon:'<g stroke-width=".125em" stroke="currentColor" fill="none"><path d="M23 17H9a2 2 0 0 1-2-2v-5m0-3V1 M1 7h14a2 2 0 0 1 2 2v7m0 4v3"/></g>',cropIconButtonRecenter:'<path stroke="currentColor" fill="none" stroke-width="2" stroke-linejoin="bevel" d="M1.5 7.5v-6h6M1.5 16.5v6h6M22.5 16.5v6h-6M22.5 7.5v-6h-6"/><circle cx="12" cy="12" r="3.5" fill="currentColor" stroke="none"/>',cropIconButtonRotateLeft:'<g stroke="none" fill="currentColor"><path fill="none" d="M-1-1h582v402H-1z"/><rect x="3" rx="1" height="12" width="12" y="9"/><path d="M15 5h-1a5 5 0 015 5 1 1 0 002 0 7 7 0 00-7-7h-1.374l.747-.747A1 1 0 0011.958.84L9.603 3.194a1 1 0 000 1.415l2.355 2.355a1 1 0 001.415-1.414l-.55-.55H15z"/></g>',cropIconButtonRotateRight:'<g stroke="none" fill="currentColor"><path fill="none" d="M-1-1h582v402H-1z"/><path d="M11.177 5H10a5 5 0 00-5 5 1 1 0 01-2 0 7 7 0 017-7h1.374l-.747-.747A1 1 0 0112.042.84l2.355 2.355a1 1 0 010 1.415l-2.355 2.354a1 1 0 01-1.415-1.414l.55-.55z"/><rect rx="1" height="12" width="12" y="9" x="9"/></g>',cropIconButtonFlipVertical:'<g stroke="none" fill="currentColor"><path d="M19.993 12.143H7a1 1 0 0 1-1-1V5.994a1 1 0 0 1 1.368-.93l12.993 5.15a1 1 0 0 1-.368 1.93z"/><path d="M19.993 14a1 1 0 0 1 .368 1.93L7.368 21.078A1 1 0 0 1 6 20.148V15a1 1 0 0 1 1-1h12.993z" opacity=".6"/></g>',cropIconButtonFlipHorizontal:'<g stroke="none" fill="currentColor"><path d="M11.93 7.007V20a1 1 0 0 1-1 1H5.78a1 1 0 0 1-.93-1.368l5.15-12.993a1 1 0 0 1 1.929.368z"/><path d="M14 7.007V20a1 1 0 0 0 1 1h5.149a1 1 0 0 0 .93-1.368l-5.15-12.993A1 1 0 0 0 14 7.007z" opacity=".6"/></g>',cropIconSelectPreset:(t,e)=>{const[i,n,o]=e?[e<1?1:.3,1===e?.85:.5,e>1?1:.3]:[.2,.3,.4];return`<g fill="currentColor">\n            <rect opacity="${i}" x="2" y="4" width="10" height="18" rx="1"/>\n            <rect opacity="${n}" x="4" y="8" width="14" height="14" rx="1"/>\n            <rect opacity="${o}" x="6" y="12" width="17" height="10" rx="1"/>\n        </g>`},cropIconCropBoundary:(t,e)=>{const[i,n,o,r]=e?[.3,1,0,0]:[0,0,.3,1];return`<g fill="currentColor">\n            <rect opacity="${i}" x="2" y="3" width="20" height="20" rx="1"/>\n            <rect opacity="${n}" x="7" y="8" width="10" height="10" rx="1"/>\n            <rect opacity="${o}" x="4" y="8" width="14" height="14" rx="1"/>\n            <rect opacity="${r}" x="12" y="4" width="10" height="10" rx="1"/>\n        </g>`},cropLabelButtonRecenter:"Recenter",cropLabelButtonRotateLeft:"Rotate left",cropLabelButtonRotateRight:"Rotate right",cropLabelButtonFlipHorizontal:"Flip horizontal",cropLabelButtonFlipVertical:"Flip vertical",cropLabelSelectPreset:"Crop shape",cropLabelCropBoundary:"Crop boundary",cropLabelCropBoundaryEdge:"Edge of image",cropLabelCropBoundaryNone:"None",cropLabelTabRotation:"Rotation",cropLabelTabZoom:"Zoom"},xy={filterLabel:"Filter",filterIcon:'<g stroke-width=".125em" stroke="currentColor" fill="none"><path d="M18.347 9.907a6.5 6.5 0 1 0-1.872 3.306M3.26 11.574a6.5 6.5 0 1 0 2.815-1.417 M10.15 17.897A6.503 6.503 0 0 0 16.5 23a6.5 6.5 0 1 0-6.183-8.51"/></g>',filterLabelChrome:"Chrome",filterLabelFade:"Fade",filterLabelCold:"Cold",filterLabelWarm:"Warm",filterLabelPastel:"Pastel",filterLabelMonoDefault:"Mono",filterLabelMonoNoir:"Noir",filterLabelMonoWash:"Wash",filterLabelMonoStark:"Stark",filterLabelSepiaDefault:"Sepia",filterLabelSepiaBlues:"Blues",filterLabelSepiaRust:"Rust",filterLabelSepiaColor:"Color"},$y={finetuneLabel:"Finetune",finetuneIcon:'<g stroke-width=".125em" stroke="currentColor" fill="none"><path d="M4 1v5.5m0 3.503V23M12 1v10.5m0 3.5v8M20 1v15.5m0 3.5v3M2 7h4M10 12h4M18 17h4"/></g>',finetuneLabelBrightness:"Brightness",finetuneLabelContrast:"Contrast",finetuneLabelSaturation:"Saturation",finetuneLabelExposure:"Exposure",finetuneLabelTemperature:"Temperature",finetuneLabelGamma:"Gamma",finetuneLabelClarity:"Clarity",finetuneLabelVignette:"Vignette"},wy={resizeLabel:"Resize",resizeIcon:'<g stroke-width=".125em" stroke="currentColor" fill="none"><rect x="2" y="12" width="10" height="10" rx="2"/><path d="M4 11.5V4a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-5.5"/><path d="M14 10l3.365-3.365M14 6h4v4"/></g>',resizeLabelFormCaption:"Image output size",resizeLabelInputWidth:"w",resizeTitleInputWidth:"Width",resizeLabelInputHeight:"h",resizeTitleInputHeight:"Height",resizeTitleButtonMaintainAspectRatio:"Maintain aspectratio",resizeIconButtonMaintainAspectRatio:(t,e)=>`\n        <defs>\n            <mask id="mask1" x="0" y="0" width="24" height="24" >\n                <rect x="0" y="0" width="24" height="10" fill="#fff" stroke="none"/>\n            </mask>\n        </defs>\n        <g fill="none" fill-rule="evenodd">\n            <g  mask="url(#mask1)">\n                <path transform="translate(0 ${3*(e-1)})" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" d="M9.401 10.205v-.804a2.599 2.599 0 0 1 5.198 0V17"/>\n            </g>\n            <rect fill="currentColor" x="7" y="10" width="10" height="7" rx="1.5"/>\n        </g>\n    `},_y={decorateLabel:"Decorate",decorateIcon:'<g fill="none" fill-rule="evenodd"><path stroke="currentColor" stroke-width=".125em" stroke-linecap="round" stroke-linejoin="round" d="M12 18.5l-6.466 3.4 1.235-7.2-5.23-5.1 7.228-1.05L12 2l3.233 6.55 7.229 1.05-5.231 5.1 1.235 7.2z"/></g>'},ky={annotateLabel:"Annotate",annotateIcon:'<g stroke-width=".125em" stroke="currentColor" fill="none"><path d="M17.086 2.914a2.828 2.828 0 1 1 4 4l-14.5 14.5-5.5 1.5 1.5-5.5 14.5-14.5z"/></g>'},Sy={stickerLabel:"Sticker",stickerIcon:'<g fill="none" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em"><path d="M12 22c2.773 0 1.189-5.177 3-7 1.796-1.808 7-.25 7-3 0-5.523-4.477-10-10-10S2 6.477 2 12s4.477 10 10 10z"/><path d="M20 17c-3 3-5 5-8 5"/></g>'},Cy={frameLabel:"Frame",frameIcon:'<g fill="none" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em">\n            <rect x="2" y="2" width="20" height="20" rx="4"/>\n            <rect x="6" y="6" width="12" height="12" rx="1"/>\n        </g>',frameLabelMatSharp:"Mat",frameLabelMatRound:"Bevel",frameLabelLineSingle:"Line",frameLabelLineMultiple:"Zebra",frameLabelEdgeSeparate:"Inset",frameLabelEdgeOverlap:"Plus",frameLabelEdgeCross:"Lumber",frameLabelCornerHooks:"Hook",frameLabelPolaroid:"Polaroid"},Ty={redactLabel:"Redact",redactIcon:'<g fill="none" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em">\n        <path d="M 4 5 l 1 -1"/>\n        <path d="M 4 10 l 6 -6"/>\n        <path d="M 4 15 l 11 -11"/>\n        <path d="M 4 20 l 16 -16"/>\n        <path d="M 9 20 l 11 -11"/>\n        <path d="M 14 20 l 6 -6"/>\n        <path d="M 19 20 l 1 -1"/>\n    </g>'},My="pintura-input",Py=["accept","capture"],Ey=(t,i)=>new Promise(((n,o)=>{const{store:r,editor:s,eventTarget:a}=i,l={};s.imageReader&&(l.imageReader=ey({...s.imageReader})),(s.imageWriter||r)&&(l.imageWriter=iy({store:(e(r),r),...s.imageWriter}));const c=(t=>((t={},e)=>{const{sub:i,pub:n}=di(),o={},r=((t={},e)=>new Hg({target:e||document.body,props:{class:t.class,preventZoomViewport:t.preventZoomViewport,preventScrollBodyIfNeeded:t.preventScrollBodyIfNeeded,preventFooterOverlapIfNeeded:t.preventFooterOverlapIfNeeded}}))(t,e),s=()=>{r.hide&&r.hide()},a=()=>{r.show&&r.show()},l=Og(r.root);Lg(l,o),o.handleEvent=f,l.handleEvent=(t,e)=>{if("init"===t)return o.handleEvent(t,o);o.handleEvent(t,e)},l.on("close",(async()=>{const{willClose:e}=t;if(!e)return s();await e()&&s()}));const c=(t,e)=>/show|hide/.test(t)?i(t,e):l.on(t,e),h=["show","hide"].map((t=>c(t,(e=>o.handleEvent(t,e))))),u=()=>{h.forEach((t=>t())),s(),r.$destroy(),l.destroy()};return Yr(o,{on:c,destroy:u,hide:s,show:a}),Object.defineProperty(o,"modal",{get:()=>r.root,set:()=>{}}),r.$on("close",l.close),r.$on("show",(()=>n("show"))),r.$on("hide",(()=>{n("hide"),!1!==t.enableAutoDestroy&&u()})),!1!==t.enableAutoHide&&l.on("process",s),l.on("loadstart",a),!1!==t.enableButtonClose&&(t.enableButtonClose=!0),delete t.class,Object.assign(o,t),o})(((t={})=>{((...t)=>{t.filter((t=>!!t.util)).forEach((t=>{const[e,i]=t.util;Ru.has(e)||(Ru.set(e,i),gl(i).filter((t=>!Pu.includes(t))).forEach((t=>{Au.add(t),Du[t]?Du[t].push(e):Du[t]=[e]})))}))})(...[ry,sy,ay,ly,cy,hy,uy,dy,py].filter(Boolean));const e=["crop","filter","finetune","annotate","decorate",t.stickers&&"sticker","frame","redact","resize"].filter(Boolean),i=((t={})=>{let e,i,n;return Array.isArray(t.imageWriter)||(e=t.imageWriter,delete t.imageReader),Array.isArray(t.imageWriter)||(i=t.imageWriter,delete t.imageWriter),P(t.imageScrambler)||(n=t.imageScrambler,delete t.imageScrambler),{imageReader:ey(e),imageWriter:iy(i),imageOrienter:{read:y,apply:S},imageScrambler:ny(n)}})(t),n={...yy,...vy,...by,...xy,...$y,...Cy,...Ty,...wy,..._y,...ky,...Sy,...t.locale};return delete t.locale,Lr([{...i,shapePreprocessor:(t=>{const e=(i,n={isPreview:!0})=>{const o=t.map((t=>{const o=t(i,n);if(o)return o.map((t=>e(t,n)))})).filter(Boolean).flat();return o.length?o.flat():i};return e})([((t={})=>(e,i)=>{if(!Je(e,"frameStyle"))return;const n=e.frameStyle,o=t[n];if(!o)return;const{frameStyle:r,...s}=e;return o(s,i)})({solid:Gg,hook:Jg,line:Kg,edge:Qg,polaroid:ty,nine:Zg}),((t={})=>e=>{if(!Je(e,"lineStart")&&!Je(e,"lineEnd"))return;const i=[],{lineStart:n,lineEnd:o,strokeWidth:r,strokeColor:s}=e,a=Q(e.x1,e.y1),l=Q(e.x2,e.y2),c=[a,l];if(n){const[e,o]=n.split("-"),c=t[e];if(c){const t=Wg(a,l,r,!!o);i.push(...c({...t,strokeColor:s,strokeWidth:r},a))}}if(o){const[e,n]=o.split("-"),c=t[e];if(c){const t=Wg(l,a,r,!!n);i.push(...c({...t,strokeColor:s,strokeWidth:r},l))}}return[{points:c,strokeWidth:r,strokeColor:s},...i]})({arrow:jg,circle:Yg,square:Ug,bar:Vg})]),utils:e,...fy,...my,...gy,...oy,stickerStickToImage:!0,locale:n},t])})(t)))({...l,...Ay(s,["id","name","store","imageWriter","imageReader"]),src:t}),h=((t,e,i={})=>{const{prefix:n="pintura:"}=i;return Lu.map((i=>t.on(i,(t=>ge(e)?((t,e,i)=>t.dispatchEvent(new CustomEvent(e,{detail:i,bubbles:!0,cancelable:!0})))(e,`${n}${i}`,t):e(i,t)))))})(c,a);let u=!1;c.on("loadabort",(()=>{c.close(),u=!0})),c.on("loaderror",o),c.on("processerror",o),c.on("close",(()=>{h.forEach((t=>t())),u?o():n(void 0)})),c.on("process",n)})),Iy=(t,e)=>t.getAttribute(e),Ay=(t,e)=>Object.keys(t).filter((t=>!e.includes(t))).reduce(((e,i)=>({...e,[i]:t[i]})),{}),Dy=t=>{t.value="",/safari/i.test(navigator.userAgent)||(t.type="",t.type="file"),delete t._files},Ry=(t,e)=>{try{const i=new DataTransfer;i.items.add(e),t.files=i.files}catch(i){t._files=[e]}},Ly=t=>Object.values(t).reduce(((t,e)=>(t[((t,e="")=>(t=>t.charAt(0).toLowerCase()+t.slice(1))(t.replace(new RegExp("^"+e,"g"),"").split("-").map(o).join("")))(e.name)]=(t=>{if("true"===t||"false"===t)return"true"===t;if(!isNaN(t))return parseFloat(t);if(/[0-9]+\/[0-9]+/.test(t)){const[e,i]=t.split("/").map((t=>t.trim())).map(parseFloat);return e/i}if(/^\{|\[/.test(t))try{return JSON.parse(t)}catch(t){}return t})(e.value),t)),{}),Oy=(t,e,i)=>{const n=Object.values(i).filter((t=>/^post/.test(t.name))).map((t=>[t.name.replace(/^post-/,""),t.value]));return{url:e||"",dataset:e=>[...n,[t,e.dest,e.dest.name]]}},zy=(t,e)=>(Array.from(t.attributes).filter((({value:t})=>t.length&&t.includes("{"))).forEach((({name:i,value:n})=>t.setAttribute(i,va(n,e,"{","}")))),t.childNodes.forEach((t=>{1===t.nodeType&&(t=zy(t,e)),3===t.nodeType&&(t.textContent=va(t.textContent,e,"{","}"))})),t),Fy=(t,e)=>t&&t.content.querySelector(`[data-${e}]`),By=t=>t.querySelector("template"),Ny=t=>{const e=By(t);return{empty:Fy(e,"empty"),load:Fy(e,"load"),process:Fy(e,"process")}},Hy=(t,e)=>!!Ny(t)[e],Wy=(t,e,i)=>{const n=Ny(t);if(Object.keys(n).map((e=>((t,e)=>t.querySelector(`[data-${e}]`))(t,e))).filter(Boolean).forEach((t=>t.remove())),!n[e])return!1;let o=n[e].cloneNode(!0);return i&&(o=zy(o,i)),t.appendChild(o),t.querySelector("[data-drop]")&&l(o,{bubbles:!0}),!0},jy=t=>t.querySelector('input[type="file"]'),Yy=t=>t.querySelector('input[type="hidden"]'),Vy=t=>{const e=Iy(t,"src");if(null!=e)return e},Uy=t=>Iy(t,"store"),qy=(t,e,i)=>{const n=By(t)||document.createElement("template");n.innerHTML=n.innerHTML+va(e,i,"{{","}}"),n.parentNode||t.appendChild(n)};function Xy(){const e=Uy(this),i=Vy(this),n={success:Iy(this,"input-store-success")||'"{filename}" uploaded successfully',reset:Iy(this,"input-button-reset")||"&times;",url:i};i&&!Hy(this,"load")&&qy(this,'<div data-load style="display:flex;align-items:center;pointer-events:none;">\n    <img src="{{url}}" alt="" style="object-fit:cover;width:auto;height:1.5em;margin-right:.5em;"/>\n    <button data-remove style="pointer-events:all;margin-left:.5em;" aria-label="Reset">{{reset}}</button>\n</output>',n),e&&!Hy(this,"process")&&qy(this,'<output data-process style="display:flex;align-items:center;pointer-events:none;">\n    <img src="{url}" alt="" style="object-fit:cover;width:auto;height:1.5em;margin-right:.5em;"/>\n    <span>{{success}}</span>\n    <button data-remove style="pointer-events:all;margin-left:.5em;" aria-label="Reset">{{reset}}</button>\n</output>',n);let o=jy(this),r=Yy(this);const s=o&&o.name||Iy(this,"name")||"image";o||(o=t("input",{type:"file"}),Py.forEach((t=>{const e=Iy(this,t);null!==e&&o.setAttribute(t,e)})),this.removeAttribute("name"),this.append(o)),e?(o.removeAttribute("name"),r||(r=t("input",{type:"hidden",name:s}),this.append(r))):o.name=s,!i&&Hy(this,"empty")&&(Wy(this,"empty"),o.hidden=!0),i&&Hy(this,"load")&&(Wy(this,"load"),o.hidden=!0),o.accept&&/image/.test(o.accept)||(o.accept="image/*"),o.removeAttribute("multiple"),o.addEventListener("change",(()=>this.edit())),this.addEventListener("click",(t=>{const{target:e}=t,i=["reset","remove","browse","edit"].find((t=>""===e.dataset[t]));i&&this[i]()})),this.addEventListener("dropfiles",(t=>{t.stopPropagation();const{detail:e}=t,i=e.resources[0];i&&(Ry(o,i),this.edit())}))}const Gy=n()&&class extends HTMLElement{connectedCallback(){if(this.innerHTML)return Xy.apply(this);let t;const e=new MutationObserver((()=>{null!==t&&(clearTimeout(t),Xy.apply(this),e.disconnect())}));e.observe(this,{childList:!0}),t=setTimeout((()=>{t=null,Xy.apply(this)}),0)}browse(){this.querySelector('input[type="file"]').click()}reset(){if(!Vy(this))return this.remove();Dy(jy(this)),Wy(this,"load")}remove(){const t=jy(this);Dy(t),Uy(this)&&(Yy(this).value=""),Wy(this,"empty")||(t.hidden=!1)}edit(){const t=jy(this);if(!t)return;const e=(t=>{if(!t)return;if(!t.matches('input[type="file"]'))return;const e=t,i=e.files[0]||(e._files||[])[0];return i&&/image/.test(i.type)?i:void 0})(t)||Vy(this);((t,e)=>{if(!e)return;const i=jy(t);if(!i)return;const n={...window.PinturaInput,...window[t.id],...Ly(t.attributes)};Ey(e,{editor:n,eventTarget:t,store:n.store&&Oy(Yy(t).name,n.store,t.attributes)}).then((e=>{if(!e)return Dy(i);const{dest:n,store:o}=e;o?((e,n)=>{i.hidden=!0,Yy(t).value=n.responseText,Wy(t,"process",{response:n.responseText,filename:e.name,url:URL.createObjectURL(e)})})(n,o):(Ry(i,n),(e=>{Wy(t,"process",{filename:e.name,url:URL.createObjectURL(e)})&&(jy(t).hidden=!0)})(n))})).catch((()=>{Dy(i)}))})(this,e)}};Gy&&(My,document.createElement("pintura-input").constructor===HTMLElement)&&customElements.define(My,Gy)}(),function(){"use strict";var t=(t,e,i=[])=>{const n=document.createElement(t),o=Object.getOwnPropertyDescriptors(n.__proto__);for(const t in e)"style"===t?n.style.cssText=e[t]:o[t]&&o[t].set||/textContent|innerHTML/.test(t)||"function"==typeof e[t]?n[t]=e[t]:n.setAttribute(t,e[t]);return i.forEach((t=>n.appendChild(t))),n},e=t=>"string"==typeof t;let i=null;var n=()=>(null===i&&(i="undefined"!=typeof window&&void 0!==window.document),i),o=t=>t.charAt(0).toUpperCase()+t.slice(1),r=t=>t instanceof Blob,s=t=>/^image/.test(t.type);const a=async t=>new Promise((e=>{if("file"===t.kind)return e(t.getAsFile());t.getAsString(e)}));var l=(t,e={})=>{const i=t=>{t.preventDefault()},n=async i=>{i.preventDefault(),i.stopPropagation();try{const n=await(t=>new Promise(((e,i)=>{const{items:n}=t.dataTransfer;if(!n)return e([]);Promise.all(Array.from(n).map(a)).then((t=>{e(t.filter((t=>r(t)&&s(t)||/^http/.test(t))))})).catch(i)})))(i);t.dispatchEvent(new CustomEvent("dropfiles",{detail:{event:i,resources:n},...e}))}catch(t){}};return t.addEventListener("drop",n),t.addEventListener("dragover",i),{destroy(){t.removeEventListener("drop",n),t.removeEventListener("dragover",i)}}};const c={65505:"exif",65504:"jfif",65498:"sos"};var h=t=>{if(65496!==t.getUint16(0))return;const e=Object.keys(c).map((t=>parseInt(t,10))),i=t.byteLength;let n,o,r=2;for(;r<i&&255===t.getUint8(r);){if(n=t.getUint16(r),e.includes(n)){const e=c[n];o||(o={}),o[e]||(o[e]={offset:r,size:t.getUint16(r+2)})}if(65498===n)break;r+=2+t.getUint16(r+2)}return o},u=(t,e,i)=>{if(!t)return;const n=new DataView(t),o=h(n);if(!o||!o.exif)return;const r=((t,e)=>{if(65505!==t.getUint16(e))return;const i=t.getUint16(e+2);if(e+=4,1165519206!==t.getUint32(e))return;e+=6;const n=t.getUint16(e);if(18761!==n&&19789!==n)return;const o=18761===n;if(e+=2,42!==t.getUint16(e,o))return;e+=t.getUint32(e+2,o);const r=n=>{const r=[];let s=e;const a=e+i-16;for(;s<a;s+=12){const e=s;t.getUint16(e,o)===n&&r.push(e)}return r};return{read:e=>{const i=r(e);if(i.length)return t.getUint16(i[0]+8,o)},write:(e,i)=>{const n=r(e);return!!n.length&&(n.forEach((e=>t.setUint16(e+8,i,o))),!0)}}})(n,o.exif.offset);return r?void 0===i?r.read(e):r.write(e,i):void 0};const d="__pqina_webapi__";var p=t=>window[d]?window[d][t]:window[t],f=(...t)=>{};const m={ArrayBuffer:"readAsArrayBuffer"};var g=async(t,e=[0,t.size],i)=>await((t,e=f,i={})=>new Promise(((n,o)=>{const{dataFormat:r=m.ArrayBuffer}=i,s=new(p("FileReader"));s.onload=()=>n(s.result),s.onerror=o,s.onprogress=e,s[r](t)})))(t.slice(...e),i),y=async(t,e)=>{const i=await g(t,[0,131072],e);return u(i,274)||1};let v=null;var b=()=>new Promise((t=>{if(null===v){const e="data:image/jpg;base64,/9j/4AAQSkZJRgABAQEASABIAAD/4QA6RXhpZgAATU0AKgAAAAgAAwESAAMAAAABAAYAAAEoAAMAAAABAAIAAAITAAMAAAABAAEAAAAAAAD/2wBDAP//////////////////////////////////////////////////////////////////////////////////////wAALCAABAAIBASIA/8QAJgABAAAAAAAAAAAAAAAAAAAAAxABAAAAAAAAAAAAAAAAAAAAAP/aAAgBAQAAPwBH/9k=";let i=n()?new Image:{};return i.onload=()=>{v=1===i.naturalWidth,i=void 0,t(v)},void(i.src=e)}return t(v)})),x=t=>t.getContext("2d").getImageData(0,0,t.width,t.height);const $={1:()=>[1,0,0,1,0,0],2:t=>[-1,0,0,1,t,0],3:(t,e)=>[-1,0,0,-1,t,e],4:(t,e)=>[1,0,0,-1,0,e],5:()=>[0,1,1,0,0,0],6:(t,e)=>[0,1,-1,0,e,0],7:(t,e)=>[0,-1,-1,0,e,t],8:t=>[0,-1,1,0,0,t]};var w=t=>{t.width=1,t.height=1;const e=t.getContext("2d");e&&e.clearRect(0,0,1,1)},_=t=>"data"in t,k=async(e,i=1)=>{const[n,o]=await b()||i<5?[e.width,e.height]:[e.height,e.width],r=t("canvas",{width:n,height:o}),s=r.getContext("2d");if(_(e)&&!await b()&&i>1){const i=t("canvas",{width:e.width,height:e.height});i.getContext("2d").putImageData(e,0,0),e=i}return!await b()&&i>1&&s.transform.apply(s,((t,e,i=-1)=>(-1===i&&(i=1),$[i](t,e)))(e.width,e.height,i)),_(e)?s.putImageData(e,0,0):s.drawImage(e,0,0),e instanceof HTMLCanvasElement&&w(e),r},S=async(t,e=1)=>1===e||await b()?t:x(await k(t,e)),C=t=>"object"==typeof t;const T=t=>C(t)?M(t):t,M=t=>{let e;return Array.isArray(t)?(e=[],t.forEach(((t,i)=>{e[i]=T(t)}))):(e={},Object.keys(t).forEach((i=>{const n=t[i];e[i]=T(n)}))),e};var P=t=>"function"==typeof t,E=()=>"createImageBitmap"in window,I=t=>/svg/.test(t.type),A=()=>Math.random().toString(36).substr(2,9);const D=new Map;var R=(t,e,i)=>new Promise(((n,o)=>{const r=t.toString();let s=D.get(r);if(!s){const e=(t=>`function () {self.onmessage = function (message) {(${t.toString()}).apply(null, message.data.content.concat([function (err, response) {\n    response = response || {};\n    const transfer = 'data' in response ? [response.data.buffer] : 'width' in response ? [response] : [];\n    return self.postMessage({ id: message.data.id, content: response, error: err }, transfer);\n}]))}}`)(t),i=URL.createObjectURL((t=>new Blob(["(","function"==typeof t?t.toString():t,")()"],{type:"application/javascript"}))(e)),n=new Map,o=new Worker(i);s={url:i,worker:o,messages:n,terminationTimeout:void 0,terminate:()=>{clearTimeout(s.terminationTimeout),s.worker.terminate(),URL.revokeObjectURL(i),D.delete(r)}},o.onmessage=function(t){const{id:e,content:i,error:o}=t.data;if(clearTimeout(s.terminationTimeout),s.terminationTimeout=setTimeout((()=>{n.size>0||s.terminate()}),500),!n.has(e))return;const r=n.get(e);n.delete(e),null!=o?r.reject(o):r.resolve(i)},D.set(r,s)}const a=A();s.messages.set(a,{resolve:n,reject:o}),s.worker.postMessage({id:a,content:e},i)})),L=async(e,i)=>{let n;if(E()&&!I(e)&&"OffscreenCanvas"in window)try{n=await R(((t,e,i)=>{createImageBitmap(t).then((t=>{let n=t.width,o=t.height;const r=n*o;if(e&&r>e){const t=Math.sqrt(e)/Math.sqrt(r);n=Math.floor(n*t),o=Math.floor(o*t)}const s=new OffscreenCanvas(n,o),a=s.getContext("2d");a.drawImage(t,0,0,n,o);const l=a.getImageData(0,0,s.width,s.height);i(null,l)})).catch((t=>{i(t)}))}),[e,i])}catch(t){}if(!n||!n.width){const o=await(async(e,i)=>{const n=t("img",{src:URL.createObjectURL(e)}),o=await((e,i)=>new Promise(((n,o)=>{const r=()=>n(((e,{width:i,height:n,canvasMemoryLimit:o})=>{let r=i||e.naturalWidth,s=n||e.naturalHeight;r||s||(r=300,s=150);const a=r*s;if(o&&a>o){const t=Math.sqrt(o)/Math.sqrt(a);r=Math.floor(r*t),s=Math.floor(s*t)}const l=t("canvas");return l.width=r,l.height=s,l.getContext("2d").drawImage(e,0,0,r,s),l})(e,i));e.complete&&e.width?r():(e.onload=r,e.onerror=o)})))(n,{canvasMemoryLimit:i});return URL.revokeObjectURL(n.src),o})(e,i);n=x(o),w(o)}return n},O=(t,e,i)=>new Promise(((n,o)=>{try{t.toBlob((t=>{n(t)}),e,i)}catch(t){o(t)}})),z=async(t,e,i)=>{const n=await k(t),o=await O(n,e,i);return w(n),o},F=t=>(t.match(/\/([a-z]+)/)||[])[1],B=t=>t.substr(0,t.lastIndexOf("."))||t;const N=/avif|bmp|gif|jpg|jpeg|jpe|jif|jfif|png|svg|tiff|webp/;var H=t=>{return t&&(e=(i=t,i.split(".").pop()).toLowerCase(),N.test(e)?"image/"+(/jfif|jif|jpe|jpg/.test(e)?"jpeg":"svg"===e?"svg+xml":e):"");var e,i},W=(t,e,i)=>{const n=(new Date).getTime(),o=t.type.length&&!/null|text/.test(t.type),r=o?t.type:i,s=((t,e)=>{const i=H(t);if(i===e)return t;const n=F(e)||i;return`${B(t)}.${n}`})(e,r);try{return new(p("File"))([t],s,{lastModified:n,type:o?t.type:r})}catch(e){const i=o?t.slice():t.slice(0,t.size,r);return i.lastModified=n,i.name=s,i}},j=(t,e)=>t/e,Y=t=>t;const V=Math.PI,U=Math.PI/2,q=U/2;var X=t=>{const e=Math.abs(t)%Math.PI;return e>q&&e<Math.PI-q};const G=(t,e,i)=>i+(t-i)*e,Z=t=>({x:t.x+.5*t.width,y:t.y+.5*t.height,rx:.5*t.width,ry:.5*t.height}),K=()=>Q(0,0),Q=(t,e)=>({x:t,y:e}),J=t=>Q(t.x,t.y),tt=t=>Q(t.pageX,t.pageY),et=t=>Q(t.x,t.y),it=t=>(t.x=-t.x,t.y=-t.y,t),nt=(t,e,i=K())=>{const n=Math.cos(e),o=Math.sin(e),r=t.x-i.x,s=t.y-i.y;return t.x=i.x+n*r-o*s,t.y=i.y+o*r+n*s,t},ot=t=>Math.sqrt(t.x*t.x+t.y*t.y),rt=t=>{const e=Math.sqrt(t.x*t.x+t.y*t.y);return 0===e?K():(t.x/=e,t.y/=e,t)},st=(t,e)=>Math.atan2(e.y-t.y,e.x-t.x),at=(t,e)=>t.x===e.x&&t.y===e.y,lt=(t,e)=>(t.x=e(t.x),t.y=e(t.y),t),ct=(t,e)=>(t.x+=e.x,t.y+=e.y,t),ht=(t,e)=>(t.x-=e.x,t.y-=e.y,t),ut=(t,e)=>(t.x*=e,t.y*=e,t),dt=(t,e)=>t.x*e.x+t.y*e.y,pt=(t,e=K())=>{const i=t.x-e.x,n=t.y-e.y;return i*i+n*n},ft=(t,e=K())=>Math.sqrt(pt(t,e)),mt=(t,e,i)=>(t.x=G(t.x,e,i.x),t.y=G(t.y,e,i.y),t),gt=t=>{let e=0,i=0;return t.forEach((t=>{e+=t.x,i+=t.y})),Q(e/t.length,i/t.length)},yt=(t,e,i,n,o)=>(t.forEach((t=>{t.x=e?n-(t.x-n):t.x,t.y=i?o-(t.y-o):t.y})),t),vt=(t,e,i,n)=>{const o=Math.sin(e),r=Math.cos(e);return t.forEach((t=>{t.x-=i,t.y-=n;const e=t.x*r-t.y*o,s=t.x*o+t.y*r;t.x=i+e,t.y=n+s})),t},bt=(t,e)=>({width:t,height:e}),xt=t=>bt(t.width,t.height),$t=t=>bt(t.width,t.height),wt=t=>bt(t.width,t.height),_t=t=>bt(t[0],t[1]),kt=t=>{return/img/i.test(t.nodeName)?bt((e=t).naturalWidth,e.naturalHeight):$t(t);var e},St=(t,e)=>bt(t,e),Ct=(t,e,i=Y)=>i(t.width)===i(e.width)&&i(t.height)===i(e.height),Tt=(t,e)=>(t.width*=e,t.height*=e,t),Mt=t=>Q(.5*t.width,.5*t.height),Pt=(t,e)=>{const i=Math.abs(e),n=Math.cos(i),o=Math.sin(i),r=n*t.width+o*t.height,s=o*t.width+n*t.height;return t.width=r,t.height=s,t},Et=(t,e)=>t.width>=e.width&&t.height>=e.height,It=(t,e)=>(t.width=e(t.width),t.height=e(t.height),t),At=(t,e)=>({start:t,end:e}),Dt=t=>At(et(t.start),et(t.end)),Rt=(t,e)=>{if(0===e)return t;const i=Q(t.start.x-t.end.x,t.start.y-t.end.y),n=rt(i),o=ut(n,e);return t.start.x+=o.x,t.start.y+=o.y,t.end.x-=o.x,t.end.y-=o.y,t},Lt=[Q(-1,-1),Q(-1,1),Q(1,1),Q(1,-1)],Ot=(t,e,i,n)=>({x:t,y:e,width:i,height:n}),zt=t=>Ot(t.x,t.y,t.width,t.height),Ft=()=>Ot(0,0,0,0),Bt=t=>Ot(0,0,t.width,t.height),Nt=t=>Ot(t.x||0,t.y||0,t.width||0,t.height||0),Ht=t=>{let e=t[0].x,i=t[0].x,n=t[0].y,o=t[0].y;return t.forEach((t=>{e=Math.min(e,t.x),i=Math.max(i,t.x),n=Math.min(n,t.y),o=Math.max(o,t.y)})),Ot(e,n,i-e,o-n)},Wt=t=>Yt(t.x-t.rx,t.y-t.ry,2*t.rx,2*t.ry),jt=(t,e)=>Ot(t.x-.5*e.width,t.y-.5*e.height,e.width,e.height),Yt=(t,e,i,n)=>Ot(t,e,i,n),Vt=t=>Q(t.x+.5*t.width,t.y+.5*t.height),Ut=(t,e)=>(t.x+=e.x,t.y+=e.y,t),qt=(t,e,i)=>(i=i||Vt(t),t.x=e*(t.x-i.x)+i.x,t.y=e*(t.y-i.y)+i.y,t.width=e*t.width,t.height=e*t.height,t),Xt=(t,e)=>(t.x*=e,t.y*=e,t.width*=e,t.height*=e,t),Gt=(t,e)=>(t.x/=e,t.y/=e,t.width/=e,t.height/=e,t),Zt=(t,e,i=Y)=>i(t.x)===i(e.x)&&i(t.y)===i(e.y)&&i(t.width)===i(e.width)&&i(t.height)===i(e.height),Kt=t=>j(t.width,t.height),Qt=(t,e,i,n,o)=>(t.x=e,t.y=i,t.width=n,t.height=o,t),Jt=(t,e)=>(t.x=e.x,t.y=e.y,t.width=e.width,t.height=e.height,t),te=(t,e,i)=>(i||(i=Vt(t)),se(t).map((t=>nt(t,e,i)))),ee=(t,e)=>Ot(.5*t.width-.5*e.width,.5*t.height-.5*e.height,e.width,e.height),ie=(t,e)=>!(e.x<t.x||e.y<t.y||e.x>t.x+t.width||e.y>t.y+t.height),ne=(t,e,i=K())=>{if(0===t.width||0===t.height)return Ft();const n=Kt(t);e||(e=n);let o=t.width,r=t.height;return e>n?o=r*e:r=o/e,Ot(i.x+.5*(t.width-o),i.y+.5*(t.height-r),o,r)},oe=(t,e=Kt(t),i=K())=>{if(0===t.width||0===t.height)return Ft();let n=t.width,o=n/e;return o>t.height&&(o=t.height,n=o*e),Ot(i.x+.5*(t.width-n),i.y+.5*(t.height-o),n,o)},re=t=>[Math.min(t.y,t.y+t.height),Math.max(t.x,t.x+t.width),Math.max(t.y,t.y+t.height),Math.min(t.x,t.x+t.width)],se=t=>[Q(t.x,t.y),Q(t.x+t.width,t.y),Q(t.x+t.width,t.y+t.height),Q(t.x,t.y+t.height)],ae=(t,e)=>{if(t)return t.x=e(t.x),t.y=e(t.y),t.width=e(t.width),t.height=e(t.height),t},le=(t,e,i=Vt(t))=>se(t).map(((t,n)=>{const o=Lt[n];return Q(G(t.x,1+o.x*e.x,i.x),G(t.y,1+o.y*e.y,i.y))})),ce=t=>(t.x=0,t.y=0,t),he=t=>{const e=t[0],i=t[t.length-1];t=at(e,i)?t:[...t,e];const n=e.x,o=e.y;let r,s,a,l=0,c=0,h=0,u=0;const d=t.length;for(;c<d;c++)r=t[c],s=t[c+1>d-1?0:c+1],a=(r.y-o)*(s.x-n)-(s.y-o)*(r.x-n),l+=a,h+=(r.x+s.x-2*n)*a,u+=(r.y+s.y-2*o)*a;return a=3*l,Q(n+h/a,o+u/a)},ue=(t,e)=>de(t.start,t.end,e.start,e.end),de=(t,e,i,n)=>{const o=(n.y-i.y)*(e.x-t.x)-(n.x-i.x)*(e.y-t.y);if(0===o)return;const r=((n.x-i.x)*(t.y-i.y)-(n.y-i.y)*(t.x-i.x))/o,s=((e.x-t.x)*(t.y-i.y)-(e.y-t.y)*(t.x-i.x))/o;return r<0||r>1||s<0||s>1?void 0:Q(t.x+r*(e.x-t.x),t.y+r*(e.y-t.y))},pe=(t,e)=>{let i=0,n=0,o=!1;const r=e.length;for(i=0,n=r-1;i<r;n=i++)e[i].y>t.y!=e[n].y>t.y&&t.x<(e[n].x-e[i].x)*(t.y-e[i].y)/(e[n].y-e[i].y)+e[i].x&&(o=!o);return o},fe=t=>{const e=[];for(let i=0;i<t.length;i++){let n=i+1;n===t.length&&(n=0),e.push(At(et(t[i]),et(t[n])))}return e},me=(t,e,i,n=0,o=!1,r=!1,s=12)=>{const a=[];for(let n=0;n<s;n++)a.push(Q(t.x+e*Math.cos(n*(2*Math.PI)/s),t.y+i*Math.sin(n*(2*Math.PI)/s)));return(o||r)&&yt(a,o,r,t.x,t.y),n&&vt(a,n,t.x,t.y),a};var ge=(t,e)=>t instanceof HTMLElement&&(!e||new RegExp(`^${e}$`,"i").test(t.nodeName)),ye=t=>t instanceof File,ve=t=>t.split("/").pop().split(/\?|\#/).shift();const be=n()&&Node.prototype.replaceChildren?(t,e)=>t.replaceChildren(e):(t,e)=>{for(;t.lastChild;)t.removeChild(t.lastChild);void 0!==e&&t.append(e)},xe=n()&&t("div",{class:"PinturaMeasure",style:"pointer-events:none;left:0;top:0;width:0;height:0;contain:strict;overflow:hidden;position:absolute;"});let $e;var we=t=>(be(xe,t),xe.parentNode||document.body.append(xe),clearTimeout($e),$e=setTimeout((()=>{xe.remove()}),500),t);let _e=null;var ke=()=>(null===_e&&(_e=n()&&/^((?!chrome|android).)*safari/i.test(navigator.userAgent)),_e),Se=t=>new Promise(((e,i)=>{let n=!1;!t.parentNode&&ke()&&(n=!0,t.style.cssText="position:absolute;visibility:hidden;pointer-events:none;left:0;top:0;width:0;height:0;",we(t));const o=()=>{const i=t.naturalWidth,o=t.naturalHeight;i&&o&&(n&&t.remove(),clearInterval(r),e({width:i,height:o}))};t.onerror=t=>{clearInterval(r),i(t)};const r=setInterval(o,1);o()})),Ce=async t=>{let i,n=t;n.src||(n=new Image,n.src=e(t)?t:URL.createObjectURL(t));try{i=await Se(n)}finally{ye(t)&&URL.revokeObjectURL(n.src)}return i},Te=(t=0,e=!0)=>new(p("ProgressEvent"))("progress",{loaded:100*t,total:100,lengthComputable:e}),Me=(t,e,i=(t=>t))=>t.getAllResponseHeaders().indexOf(e)>=0?i(t.getResponseHeader(e)):void 0,Pe=t=>{if(!t)return null;const e=t.split(/filename=|filename\*=.+''/).splice(1).map((t=>t.trim().replace(/^["']|[;"']{0,2}$/g,""))).filter((t=>t.length));return e.length?decodeURI(e[e.length-1]):null};class Ee extends Error{constructor(t,e,i){super(t),this.name="EditorError",this.code=e,this.metadata=i}}var Ie=async(t,i)=>{if(ye(t)||(n=t)instanceof Blob&&!(n instanceof File))return t;if(e(t))return await((t,e)=>/^data:/.test(t)?(async(t,e="data-uri",i=f)=>{i(Te(0));const n=await fetch(t);i(Te(.33));const o=await n.blob();let r;s(o)||(r="image/"+(t.includes(",/9j/")?"jpeg":"png")),i(Te(.66));const a=W(o,e,r);return i(Te(1)),a})(t,void 0,e):((t,e)=>new Promise(((i,n)=>{const o=()=>n(new Ee("Error fetching image","URL_REQUEST",r)),r=new XMLHttpRequest;r.onprogress=e,r.onerror=o,r.onload=()=>{if(!r.response||r.status>=300||r.status<200)return o();const e=Me(r,"Content-Type"),n=Me(r,"Content-Disposition",Pe)||ve(t);i(W(r.response,n,e||H(n)))},r.open("GET",t),r.responseType="blob",r.send()})))(t,e))(t,i);if(ge(t,"canvas"))return await(async(t,e,i)=>{const n=await O(t,void 0,void 0);return W(n,"canvas")})(t);if(ge(t,"img"))return await(async t=>{try{const e=await Ce(t),i=await(t=>new Promise(((e,i)=>{if(t.complete)return e(t);t.onload=()=>e(t),t.onerror=i})))(t),n=document.createElement("canvas");n.width=e.width,n.height=e.height,n.getContext("2d").drawImage(i,0,0);const o=await O(n);return W(o,ve(i.src))}catch(t){throw t}})(t);throw new Ee("Invalid image source","invalid-image-source");var n};let Ae=null;var De=()=>(null===Ae&&(Ae=n()&&/^mac/i.test(navigator.platform)),Ae),Re=t=>n()?RegExp(t).test(window.navigator.userAgent):void 0;let Le=null;var Oe=()=>(null===Le&&(Le=n()&&(Re(/iPhone|iPad|iPod/)||De()&&navigator.maxTouchPoints>=1)),Le),ze=async(t,e=1)=>await b()||Oe()||e<5?t:St(t.height,t.width),Fe=t=>/jpeg/.test(t.type),Be=t=>{return"object"!=typeof(e=t)||e.constructor!=Object?t:JSON.stringify(t);var e},Ne=(t,e=0,i)=>(0===e||(t.translate(i.x,i.y),t.rotate(e),t.translate(-i.x,-i.y)),t),He=async(e,i={})=>{const{flipX:n,flipY:o,rotation:r,crop:s}=i,a=$t(e),l=n||o,c=!!r,h=s&&(s.x||s.y||s.width||s.height),u=h&&Zt(s,Bt(a)),d=h&&!u;if(!l&&!c&&!d)return e;let p,f=t("canvas",{width:e.width,height:e.height});if(f.getContext("2d").putImageData(e,0,0),l){const e=t("canvas",{width:f.width,height:f.height}).getContext("2d");((t,e,i)=>{t.scale(e,i)})(e,n?-1:1,o?-1:1),e.drawImage(f,n?-f.width:0,o?-f.height:0),e.restore(),w(f),f=e.canvas}if(c){const e=It(wt(Ht(te(Nt(f),r))),Math.floor),i=t("canvas",{width:s.width,height:s.height}).getContext("2d");((t,e,i)=>{t.translate(e,i)})(i,-s.x,-s.y),Ne(i,r,Mt(e)),i.drawImage(f,.5*(e.width-f.width),.5*(e.height-f.height)),i.restore(),w(f),f=i.canvas}else if(d)return p=f.getContext("2d").getImageData(s.x,s.y,s.width,s.height),w(f),p;return p=f.getContext("2d").getImageData(0,0,f.width,f.height),w(f),p},We=(t,e)=>{const{imageData:i,width:n,height:o}=t,r=i.width,s=i.height,a=Math.round(n),l=Math.round(o),c=i.data,h=new Uint8ClampedArray(a*l*4),u=r/a,d=s/l,p=Math.ceil(.5*u),f=Math.ceil(.5*d);for(let t=0;t<l;t++)for(let e=0;e<a;e++){const i=4*(e+t*a);let n=0,o=0,s=0,l=0,m=0,g=0,y=0;const v=(t+.5)*d;for(let i=Math.floor(t*d);i<(t+1)*d;i++){const t=Math.abs(v-(i+.5))/f,a=(e+.5)*u,h=t*t;for(let t=Math.floor(e*u);t<(e+1)*u;t++){let e=Math.abs(a-(t+.5))/p;const u=Math.sqrt(h+e*e);if(u<-1||u>1)continue;if(n=2*u*u*u-3*u*u+1,n<=0)continue;e=4*(t+i*r);const d=c[e+3];y+=n*d,s+=n,d<255&&(n=n*d/250),l+=n*c[e],m+=n*c[e+1],g+=n*c[e+2],o+=n}}h[i]=l/o,h[i+1]=m/o,h[i+2]=g/o,h[i+3]=y/s}e(null,{data:h,width:a,height:l})},je=e=>{if(e instanceof ImageData)return e;let i;try{i=new ImageData(e.width,e.height)}catch(n){i=t("canvas").getContext("2d").createImageData(e.width,e.height)}return i.data.set(e.data),i},Ye=async(t,e={},i)=>{const{width:n,height:o,fit:r,upscale:s}=e;if(!n&&!o)return t;let a=n,l=o;if(n?o||(l=n):a=o,"force"!==r){const e=a/t.width,i=l/t.height;let n=1;if("cover"===r?n=Math.max(e,i):"contain"===r&&(n=Math.min(e,i)),n>1&&!1===s)return t;a=Math.round(t.width*n),l=Math.round(t.height*n)}return a=Math.max(a,1),l=Math.max(l,1),t.width===a&&t.height===l?t:i?i(t,a,l):(t=await R(We,[{imageData:t,width:a,height:l}],[t.data.buffer]),je(t))},Ve=(t,e)=>{const{imageData:i,matrix:n}=t;if(!n)return e(null,i);const o=new Uint8ClampedArray(i.width*i.height*4),r=i.data,s=r.length,a=n[0],l=n[1],c=n[2],h=n[3],u=n[4],d=n[5],p=n[6],f=n[7],m=n[8],g=n[9],y=n[10],v=n[11],b=n[12],x=n[13],$=n[14],w=n[15],_=n[16],k=n[17],S=n[18],C=n[19];let T=0,M=0,P=0,E=0,I=0,A=0,D=0,R=0,L=0,O=0,z=0,F=0;for(;T<s;T+=4)M=r[T]/255,P=r[T+1]/255,E=r[T+2]/255,I=r[T+3]/255,A=M*a+P*l+E*c+I*h+u,D=M*d+P*p+E*f+I*m+g,R=M*y+P*v+E*b+I*x+$,L=M*w+P*_+E*k+I*S+C,O=Math.max(0,A*L)+(1-L),z=Math.max(0,D*L)+(1-L),F=Math.max(0,R*L)+(1-L),o[T]=255*Math.max(0,Math.min(1,O)),o[T+1]=255*Math.max(0,Math.min(1,z)),o[T+2]=255*Math.max(0,Math.min(1,F)),o[T+3]=255*I;e(null,{data:o,width:i.width,height:i.height})},Ue=(t,e)=>{const{imageData:i,matrix:n}=t;if(!n)return e(null,i);let o=n.reduce(((t,e)=>t+e));o=o<=0?1:o;const r=i.width,s=i.height,a=i.data;let l=0,c=0,h=0;const u=Math.round(Math.sqrt(n.length)),d=Math.floor(u/2);let p=0,f=0,m=0,g=0,y=0,v=0,b=0,x=0,$=0,w=0;const _=new Uint8ClampedArray(r*s*4);for(h=0;h<s;h++)for(c=0;c<r;c++){for(p=0,f=0,m=0,g=0,v=0;v<u;v++)for(y=0;y<u;y++)b=h+v-d,x=c+y-d,b<0&&(b=s-1),b>=s&&(b=0),x<0&&(x=r-1),x>=r&&(x=0),$=4*(b*r+x),w=n[v*u+y],p+=a[$]*w,f+=a[$+1]*w,m+=a[$+2]*w,g+=a[$+3]*w;_[l]=p/o,_[l+1]=f/o,_[l+2]=m/o,_[l+3]=g/o,l+=4}e(null,{data:_,width:r,height:s})},qe=(t,e)=>{let{imageData:i,strength:n}=t;if(!n)return e(null,i);const o=new Uint8ClampedArray(i.width*i.height*4),r=i.width,s=i.height,a=i.data,l=(t,e)=>(c=t-w,h=e-_,Math.sqrt(c*c+h*h));let c,h,u,d,p,f,m,g,y,v,b,x=0,$=0,w=.5*r,_=.5*s,k=l(0,0);for(n>0?(u=0,d=0,p=0):(n=Math.abs(n),u=1,d=1,p=1),$=0;$<s;$++)for(x=0;x<r;x++)S=4*(x+$*r),C=a,T=o,M=l(x,$)*n/k,f=C[S]/255,m=C[S+1]/255,g=C[S+2]/255,y=C[S+3]/255,v=1-M,b=v*y+M,T[S]=(v*y*f+M*u)/b*255,T[S+1]=(v*y*m+M*d)/b*255,T[S+2]=(v*y*g+M*p)/b*255,T[S+3]=255*b;var S,C,T,M;e(null,{data:o,width:i.width,height:i.height})},Xe=(t,e)=>{const{imageData:i,level:n,monochrome:o=!1}=t;if(!n)return e(null,i);const r=new Uint8ClampedArray(i.width*i.height*4),s=i.data,a=s.length;let l,c,h,u=0;const d=()=>255*(2*Math.random()-1)*n,p=o?()=>{const t=d();return[t,t,t]}:()=>[d(),d(),d()];for(;u<a;u+=4)[l,c,h]=p(),r[u]=s[u]+l,r[u+1]=s[u+1]+c,r[u+2]=s[u+2]+h,r[u+3]=s[u+3];e(null,{data:r,width:i.width,height:i.height})},Ge=(t,e)=>{const{imageData:i,level:n}=t;if(!n)return e(null,i);const o=new Uint8ClampedArray(i.width*i.height*4),r=i.data,s=r.length;let a,l,c,h=0;for(;h<s;h+=4)a=r[h]/255,l=r[h+1]/255,c=r[h+2]/255,o[h]=255*Math.pow(a,n),o[h+1]=255*Math.pow(l,n),o[h+2]=255*Math.pow(c,n),o[h+3]=r[h+3];e(null,{data:o,width:i.width,height:i.height})},Ze=async(t,e={})=>{const{colorMatrix:i,convolutionMatrix:n,gamma:o,noise:r,vignette:s}=e,a=[];if(n&&a.push([Ue,{matrix:n.clarity}]),o>0&&a.push([Ge,{level:1/o}]),i&&!(t=>{const e=t.length;let i;const n=e>=20?6:e>=16?5:3;for(let o=0;o<e;o++){if(i=t[o],1===i&&o%n!=0)return!1;if(0!==i&&1!==i)return!1}return!0})(i)&&a.push([Ve,{matrix:i}]),(r>0||r<0)&&a.push([Xe,{level:r}]),(s>0||s<0)&&a.push([qe,{strength:s}]),!a.length)return t;const l=(t,e)=>`(err, imageData) => {\n            (${t[e][0].toString()})(Object.assign({ imageData: imageData }, filterInstructions[${e}]), \n                ${t[e+1]?l(t,e+1):"done"})\n        }`,c=`function (options, done) {\n        const filterInstructions = options.filterInstructions;\n        const imageData = options.imageData;\n        (${l(a,0)})(null, imageData)\n    }`;return t=await R(c,[{imageData:t,filterInstructions:a.map((t=>t[1]))}],[t.data.buffer]),je(t)},Ke=t=>"number"==typeof t,Qe=t=>e(t)&&null!==t.match(/(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff]|[\u0023-\u0039]\ufe0f?\u20e3|\u3299|\u3297|\u303d|\u3030|\u24c2|\ud83c[\udd70-\udd71]|\ud83c[\udd7e-\udd7f]|\ud83c\udd8e|\ud83c[\udd91-\udd9a]|\ud83c[\udde6-\uddff]|\ud83c[\ude01-\ude02]|\ud83c\ude1a|\ud83c\ude2f|\ud83c[\ude32-\ude3a]|\ud83c[\ude50-\ude51]|\u203c|\u2049|[\u25aa-\u25ab]|\u25b6|\u25c0|[\u25fb-\u25fe]|\u00a9|\u00ae|\u2122|\u2139|\ud83c\udc04|[\u2600-\u26FF]|\u2b05|\u2b06|\u2b07|\u2b1b|\u2b1c|\u2b50|\u2b55|\u231a|\u231b|\u2328|\u23cf|[\u23e9-\u23f3]|[\u23f8-\u23fa]|\ud83c\udccf|\u2934|\u2935|[\u2190-\u21ff])/g),Je=(t,e)=>t.hasOwnProperty(e),ti=t=>Array.isArray(t);let ei=64,ii=102,ni=112,oi=!1;var ri=(t,e)=>(!oi&&n()&&(/^win/i.test(navigator.platform)&&(ii=103),(Oe()||De())&&(ei=63.5,ii=110,ni=123),oi=!0),`<svg${e?` aria-label="${e}"`:""} width="128" height="128" viewBox="0 0 128 128" preserveAspectRatio="xMinYMin meet" xmlns="http://www.w3.org/2000/svg"><text x="${ei}" y="${ii}" alignment-baseline="text-top" dominant-baseline="text-top" text-anchor="middle" font-size="${ni}px">${t}</text></svg>`),si=(t,e)=>t/e*100+"%",ai=t=>`rgba(${Math.round(255*t[0])}, ${Math.round(255*t[1])}, ${Math.round(255*t[2])}, ${Ke(t[3])?t[3]:1})`,li=t=>Object.values(t).join("_");const ci=async(e,i=0)=>{const n=t("canvas",{width:80,height:80}).getContext("2d");return await((t=0)=>new Promise((e=>{setTimeout(e,t)})))(i),n.drawImage(e,0,0,80,80),!((t=>!new Uint32Array(t.getImageData(0,0,t.canvas.width,t.canvas.height).data.buffer).some((t=>0!==t)))(n)&&i<=256)||await ci(e,i+16)},hi=new Map;var ui=t=>new Promise(((e,i)=>{const n=new FileReader;n.onerror=i,n.onload=()=>e(n.result),n.readAsDataURL(t)})),di=()=>{let t=[];return{sub:(e,i)=>(t.push({event:e,callback:i}),()=>t=t.filter((t=>t.event!==e||t.callback!==i))),pub:(e,i)=>{t.filter((t=>t.event===e)).forEach((t=>t.callback(i)))}}};const pi=32,fi=({color:t=[0,0,0],fontSize:e=16,fontFamily:i="sans-serif",fontVariant:n="normal",fontWeight:o="normal",fontStyle:r="normal",textAlign:s="left",lineHeight:a=20})=>`font-size:${e}px;font-style:${r};font-weight:${o};font-family:${i};font-variant:${n};line-height:${a}px;text-align:${s};color:${ai(t)};`,mi=t=>{const{width:e,height:i}=t,n=!e,o=n?"normal":"break-word",r=n?"nowrap":"pre-line";return`max-width:none;min-width:auto;width:${n?"auto":e+"px"};height:${i?i+"px":"auto"};margin-top:0;margin-bottom:0;padding-top:${(({fontSize:t=16,lineHeight:e=20}={})=>.5*Math.max(0,t-e))(t)}px;word-break:${o};word-wrap:normal;white-space:${r};overflow:visible;`},gi=new Map,yi=new Map,vi=(e="",i)=>{const{width:n=0,height:o=0}=i;if(n&&o)return St(n,o);const{fontSize:r,fontFamily:s,lineHeight:a,fontWeight:l,fontStyle:c,fontVariant:h}=i,u=li({text:e,fontFamily:s,fontWeight:l,fontStyle:c,fontVariant:h,fontSize:r,lineHeight:a,width:n});let d=yi.get(u);if(d)return d;const p=we(t("pre",{contenteditable:"true",spellcheck:"false",style:`pointer-events:none;visibility:hidden;position:absolute;${fi(i)};${mi(i)}"`,innerHTML:e},[t("span")])).getBoundingClientRect();return d=$t(p),d.height+=Math.max(0,r-a),yi.set(u,d),d},bi=new Map,xi=new Map,$i=t=>t.filter((t=>t instanceof CSSFontFaceRule)),wi=async(e,i=(()=>!0))=>{if(xi.has(e.href))return xi.get(e.href);let n;try{n=$i(Array.from(e.cssRules))}catch(o){const r=e.href;if(!i(r))return xi.set(r,[]),[];n=$i(await(async e=>{let i;try{i=await(t=>new Promise(((e,i)=>{let n=bi.get(t);n||(n=(t=>{const{sub:e,pub:i}=di();let n,o;return fetch(t).then((t=>t.text())).then((t=>{n=t,i("load",n)})).catch((t=>{o=t,i("error",o)})),{sub:(t,i)=>"load"===t&&n?i(n):"error"===t&&o?i(o):void e(t,i)}})(t),bi.set(t,n)),n.sub("load",e),n.sub("error",i)})))(e)}catch(t){return[]}const n=t("style",{innerHTML:i,id:A()});document.head.append(n);const o=Array.from(document.styleSheets).find((t=>t.ownerNode.id===n.id));return n.remove(),Array.from(o.cssRules)})(r)),xi.set(r,n)}return n},_i=(t,e)=>t.style.getPropertyValue(e),ki=(t,e)=>_i(t,"font-family").replace(/^"|"$/g,"")==e,Si=new Map,Ci=new Map;var Ti=async(t="",e)=>{if(!t.length)return;const{imageWidth:i=300,imageHeight:n=150,paddingLeft:o=pi,paddingRight:r=pi,fontFamily:s,pixelRatio:a=1,willRequestResource:l}=e,c=(i+o+r)*a,h=n*a,u=fi(e),d=mi(e),p=await(async(t,e)=>{if(Si.get(t))return;let i=Ci.get(t);if(!i){const o=await(async(t,e)=>{const i=((t,e)=>{const i=[];for(const n of t)ki(n,e)&&i.push(n);return i})(await(async t=>{const e=Array.from(document.styleSheets).map((e=>wi(e,t))),i=await Promise.all(e),n=[];return i.forEach((t=>n.push(...t))),n})(e),t);return i.length?i.map((t=>{const e=t.parentStyleSheet.href&&new URL(t.parentStyleSheet.href),i=e?e.origin+(t=>t.pathname.split("/").slice(0,-1).join("/"))(e)+"/":"",n=t.style.getPropertyValue("src").match(/url\("?(.*?)"?\)/)[1],o=Array.from(t.style).filter((t=>"src"!=t)).reduce(((e,i)=>e+(i+":")+_i(t,i)+";"),"");return[/^http/.test(n)?n:i+n,o]})):[]})(t,e);if(!o.length)return void Si.set(t,!0);const r=[];for(const[t,e]of o){const i=await fetch(t).then((t=>t.blob())),o=!(n=i.type)||/woff2/.test(n)?"woff2":/woff/.test(n)?"woff":/ttf|truetype/.test(n)?"truetype":/otf|opentype/.test(n)?"opentype":/svg/.test(n)?"svg":"woff2",s=await ui(i);r.push(`@font-face { src:url(${s}) format('${o}');${e};font-display:block; }`)}i=r.join(""),Ci.set(t,i)}var n;return i})(s,l);return((t,{safariCacheKey:e="*"}={})=>new Promise(((i,n)=>{const o=new Image;o.onerror=n,o.onload=()=>{if(!ke()||!t.includes("@font-face")||hi.has(e))return i(o);ci(o).then((()=>{hi.set(e,!0),i(o)}))},o.src="data:image/svg+xml,"+t})))(`<svg xmlns="http://www.w3.org/2000/svg" width="${c}" height="${h}" viewBox="0 0 ${c} ${h}"><foreignObject x="0" y="0" width="${c}" height="${h}"><div xmlns="http://www.w3.org/1999/xhtml" style="transform-origin:0 0;transform:scale(${a})">${p?`<style>${p}</style>`:""}<pre contenteditable="true" spellcheck="false" style="position:absolute;padding-right:${r}px;padding-left:${o}px;${u};${d}">${t.replace(/&/g,"&amp;").replace(/#/g,"%23").replace(/<br>/g,"<br/>").replace(/\n/g,"<br/>")}</pre></div></foreignObject></svg>`,{safariCacheKey:s})},Mi=(t,e=12)=>parseFloat(t.toFixed(e));const Pi=t=>{const e={...t};return M(e)},Ei=(t,i={})=>{const n=Kt(t);let o,r;const s=i.width||i.rx,a=i.height||i.ry;if(s&&a)return xt(i);if(s||a){o=parseFloat(s||Number.MAX_SAFE_INTEGER),r=parseFloat(a||Number.MAX_SAFE_INTEGER);const t=Math.min(o,r);e(s)||e(a)?(o=t+"%",r=t*n+"%"):(o=t,r=t)}else{const t=10;o=t+"%",r=t*n+"%"}return{[(i.width?"width":i.rx?"rx":void 0)||"width"]:o,[(i.width?"height":i.rx?"ry":void 0)||"height"]:r}},Ii=(t,e={})=>{return{width:void 0,height:void 0,...e,aspectRatio:1,backgroundImage:(i=ri(t),"data:image/svg+xml,"+i.replace("<","%3C").replace(">","%3E"))};var i},Ai=(t,i={})=>({backgroundColor:[0,0,0,0],...Ni(i)?{}:{width:void 0,height:void 0,aspectRatio:void 0},...i,backgroundImage:e(t)?t:r(t)?URL.createObjectURL(t):t}),Di=(t,i)=>{let n;if(e(t)||r(t)){const e={...Ei(i),backgroundSize:"contain"};n=Qe(t)?Ii(t,e):Ai(t,e)}else if(t.src){const e=Ei(i,t.shape||t),o={...t.shape,...e};if(t.width&&t.height&&!Je(o,"aspectRatio")){const t=xn(e,"width",i),n=xn(e,"height",i);o.aspectRatio=j(t,n)}o.backgroundSize||t.shape||t.width&&t.height||(o.backgroundSize="contain"),n=Qe(t.src)?Ii(t.src,o):Ai(t.src,o)}else t.shape&&(n=Pi(t.shape));return Je(n,"backgroundImage")&&(Je(n,"backgroundColor")||(n.backgroundColor=[0,0,0,0]),Je(n,"disableStyle")||(n.disableStyle=["backgroundColor","strokeColor","strokeWidth"]),Je(n,"disableFlip")||(n.disableFlip=!0)),i?vn(n,i):n},Ri=t=>Q(t.x1,t.y1),Li=t=>Q(t.x2,t.y2),Oi=t=>Je(t,"text"),zi=t=>Oi(t)&&!(Ki(t)||Je(t,"width")),Fi=t=>Oi(t)&&(Ki(t)||Je(t,"width")),Bi=t=>!Oi(t)&&Qi(t),Ni=t=>Je(t,"rx"),Hi=t=>Je(t,"x1")&&!Wi(t),Wi=t=>Je(t,"x3"),ji=t=>Je(t,"points"),Yi=t=>Oi(t)&&t.isEditing,Vi=t=>!Je(t,"opacity")||t.opacity>0,Ui=t=>t.isSelected,qi=t=>t.isEditing,Xi=t=>t._isDraft,Gi=t=>Je(t,"width")&&Je(t,"height"),Zi=t=>{const e=Je(t,"right"),i=Je(t,"bottom");return e||i},Ki=t=>(Je(t,"x")||Je(t,"left"))&&Je(t,"right")||(Je(t,"y")||Je(t,"top"))&&Je(t,"bottom"),Qi=t=>Gi(t)||Ki(t),Ji=t=>(t._isDraft=!0,t),tn=(t,e)=>!(!0===t.disableStyle||ti(t.disableStyle)&&e&&t.disableStyle.includes(e)),en=t=>!0!==t.disableSelect&&!Wi(t),nn=t=>!0!==t.disableRemove,on=(t,e)=>!!Oi(t)&&!0!==t.disableInput&&(P(t.disableInput)?t.disableInput(null!=e?e:t.text):e||!0),rn=(t,e)=>!(!0===t.disableTextLayout||ti(t.disableTextLayout)&&e&&t.disableTextLayout.includes(e)),sn=t=>!0!==t.disableManipulate&&!Xi(t)&&!Zi(t),an=t=>sn(t)&&!0!==t.disableMove,ln=t=>(delete t.left,delete t.right,delete t.top,delete t.bottom,t),cn=t=>(delete t.rotation,t),hn=t=>(t.strokeWidth=t.strokeWidth||1,t.strokeColor=t.strokeColor||[0,0,0],t),un=t=>(t.backgroundColor=t.backgroundColor?t.backgroundColor:t.strokeWidth||t.backgroundImage?void 0:[0,0,0],t),dn=t=>((t=>{e(t.id)||(t.id=A()),Je(t,"rotation")||(t.rotation=0),Je(t,"opacity")||(t.opacity=1),Je(t,"disableErase")||(t.disableErase=!0)})(t),Oi(t)?(t=>{t.fontSize=t.fontSize||"4%",t.fontFamily=t.fontFamily||"sans-serif",t.fontWeight=t.fontWeight||"normal",t.fontStyle=t.fontStyle||"normal",t.fontVariant=t.fontVariant||"normal",t.lineHeight=t.lineHeight||"120%",t.color=t.color||[0,0,0],zi(t)?(t=>{delete t.textAlign,ln(t)})(t):(t=>{t.textAlign=t.textAlign||"left"})(t)})(t):Bi(t)?(t=>{t.cornerRadius=t.cornerRadius||0,t.strokeWidth=t.strokeWidth||0,t.strokeColor=t.strokeColor||[0,0,0],un(t)})(t):ji(t)?(t=>{hn(t),cn(t),ln(t)})(t):Hi(t)?(t=>{hn(t),t.lineStart=t.lineStart||void 0,t.lineEnd=t.lineEnd||void 0,cn(t),ln(t)})(t):Ni(t)?(t=>{t.strokeWidth=t.strokeWidth||0,t.strokeColor=t.strokeColor||[0,0,0],un(t)})(t):Wi(t)&&(t=>{t.strokeWidth=t.strokeWidth||0,t.strokeColor=t.strokeColor||[0,0,0],un(t),ln(t)})(t),t),pn=t=>Oi(t)?"text":Bi(t)?"rectangle":ji(t)?"path":Hi(t)?"line":Ni(t)?"ellipse":Wi(t)?"triangle":void 0,fn=(t,e)=>parseFloat(t)/100*e,mn=new RegExp(/^x|left|right|^width|rx|fontSize|cornerRadius|strokeWidth/,"i"),gn=new RegExp(/^y|top|bottom|^height|ry/,"i"),yn=(t,i)=>{Object.entries(t).map((([e,n])=>{t[e]=((t,e,{width:i,height:n})=>{if(Array.isArray(e))return e.map((t=>(C(t)&&yn(t,{width:i,height:n}),t)));if("string"!=typeof e)return e;if(!e.endsWith("%"))return e;const o=parseFloat(e)/100;return mn.test(t)?Mi(i*o,6):gn.test(t)?Mi(n*o,6):e})(e,n,i)}));const n=t.lineHeight;e(n)&&(t.lineHeight=Math.round(t.fontSize*(parseFloat(n)/100)))},vn=(t,e)=>(yn(t,e),Sn(t,e),t),bn=(t,e)=>{let i;return/^x|width|rx|fontSize|strokeWidth|cornerRadius/.test(t)?i=e.width:/^y|height|ry/.test(t)&&(i=e.height),i},xn=(t,i,n)=>e(t[i])?fn(t[i],bn(i,n)):t[i],$n=(t,e,i)=>e.reduce(((e,n)=>{const o=xn(t,n,i);return e[n]=o,e}),{}),wn=(t,i,n)=>(Object.keys(i).forEach((o=>((t,i,n,o)=>{if(!e(t[i]))return t[i]=n,t;const r=bn(i,o);return t[i]=void 0===r?n:si(n,r),t})(t,o,i[o],n))),t),_n=(t,e)=>{const i=t.filter((t=>t.x<0||t.y<0||t.x1<0||t.y1<0)).reduce(((t,e)=>{const[i,n,o,r]=(t=>{const e=Ft(),i=t.strokeWidth||0;if(Bi(t))e.x=t.x-.5*i,e.y=t.y-.5*i,e.width=t.width+i,e.height=t.height+i;else if(Hi(t)){const{x1:n,y1:o,x2:r,y2:s}=t,a=Math.abs(Math.min(n,r)),l=Math.abs(Math.max(n,r)),c=Math.abs(Math.min(o,s)),h=Math.abs(Math.min(o,s));e.x=a+.5*i,e.y=l+.5*i,e.width=l-a+i,e.height=h-c+i}else Ni(t)&&(e.x=t.x-t.rx+.5*i,e.y=t.y-t.ry+.5*i,e.width=2*t.rx+i,e.height=2*t.ry+i);return e&&Je(t,"rotation")&&te(e,t.rotation),re(e)})(e);return t.top=Math.min(i,t.top),t.left=Math.min(r,t.left),t.bottom=Math.max(o,t.bottom),t.right=Math.max(n,t.right),t}),{top:0,right:0,bottom:0,left:0});return i.right>0&&(i.right-=e.width),i.bottom>0&&(i.bottom-=e.height),i},kn=(t,e,i)=>{const n=Pi(t);return vn(n,e),i(n)},Sn=(t,i)=>{if(Je(t,"left")&&(t.x=t.left),Je(t,"right")&&!e(t.right)){const e=i.width-t.right;Je(t,"left")?(t.x=t.left,t.width=Math.max(0,e-t.left)):Je(t,"width")&&(t.x=e-t.width)}if(Je(t,"top")&&(t.y=t.top),Je(t,"bottom")&&!e(t.bottom)){const e=i.height-t.bottom;Je(t,"top")?(t.y=t.top,t.height=Math.max(0,e-t.top)):Je(t,"height")&&(t.y=e-t.height)}return t},Cn=(t,e)=>(ji(t)&&t.points.filter((t=>Ke(t.x))).forEach((t=>{t.x*=e,t.y*=e})),Wi(t)&&Ke(t.x1)&&(t.x1*=e,t.y1*=e,t.x2*=e,t.y2*=e,t.x3*=e,t.y3*=e),Hi(t)&&Ke(t.x1)&&(t.x1*=e,t.y1*=e,t.x2*=e,t.y2*=e),Ke(t.x)&&Ke(t.y)&&(t.x*=e,t.y*=e),Ke(t.width)&&Ke(t.height)&&(t.width*=e,t.height*=e),Ke(t.rx)&&Ke(t.ry)&&(t.rx*=e,t.ry*=e),(t=>Ke(t.strokeWidth)&&t.strokeWidth>0)(t)&&(t.strokeWidth*=e),Oi(t)&&(t._scale=e,Ke(t.fontSize)&&(t.fontSize*=e),Ke(t.lineHeight)&&(t.lineHeight*=e),Ke(t.width)&&!Ke(t.height)&&(t.width*=e)),Je(t,"cornerRadius")&&Ke(t.cornerRadius)&&(t.cornerRadius*=e),t);var Tn=t=>/canvas/i.test(t.nodeName),Mn=(t,i)=>new Promise(((n,o)=>{let r=t,s=!1;const a=()=>{s||(s=!0,P(i)&&Promise.resolve().then((()=>i(St(r.naturalWidth,r.naturalHeight)))))};if(r.src||(r=new Image,e(t)&&new URL(t,location.href).origin!==location.origin&&(r.crossOrigin="anonymous"),r.src=e(t)?t:URL.createObjectURL(t)),r.complete)return a(),n(r);P(i)&&Se(r).then(a).catch(o),r.onload=()=>{a(),n(r)},r.onerror=o}));const Pn=new Map([]),En=(t,e={})=>new Promise(((i,n)=>{const{onMetadata:o=f,onLoad:r=i,onError:s=n,onComplete:a=f}=e;let l=Pn.get(t);if(l||(l={loading:!1,complete:!1,error:!1,image:void 0,size:void 0,bus:di()},Pn.set(t,l)),l.bus.sub("meta",o),l.bus.sub("load",r),l.bus.sub("error",s),l.bus.sub("complete",a),Tn(t)){const e=t,i=e.cloneNode();l.complete=!0,l.image=i,l.size=kt(e)}if(l.complete)return l.bus.pub("meta",{size:l.size}),l.error?l.bus.pub("error",l.error):l.bus.pub("load",l.image),l.bus.pub("complete"),void(l.bus=di());l.loading||(l.loading=!0,Mn(t,(t=>{l.size=t,l.bus.pub("meta",{size:t})})).then((t=>{l.image=t,l.bus.pub("load",t)})).catch((t=>{l.error=t,l.bus.pub("error",t)})).finally((()=>{l.complete=!0,l.loading=!1,l.bus.pub("complete"),l.bus=di()})))})),In=(t,e,i,n)=>t.drawImage(e,i.x,i.x,i.width,i.height,n.x,n.y,n.width,n.height);var An=async(t,e,i,n,o=In)=>{t.save(),t.clip(),await o(t,e,i,n),t.restore()};const Dn=(t,e,i,n)=>{let o=Yt(0,0,i.width,i.height);const r=zt(t);if(n)o=ae(Ht(n),Mi),o.x*=i.width,o.width*=i.width,o.y*=i.height,o.height*=i.height;else if("contain"===e){const e=oe(t,Kt(o));r.width=e.width,r.height=e.height,r.x+=e.x,r.y+=e.y}else"cover"===e&&(o=oe(Yt(0,0,o.width,o.height),Kt(r)));return{srcRect:o,destRect:r}},Rn=(t,e)=>(e.cornerRadius>0?((t,e,i,n,o,r)=>{n<2*r&&(r=n/2),o<2*r&&(r=o/2),t.beginPath(),t.moveTo(e+r,i),t.arcTo(e+n,i,e+n,i+o,r),t.arcTo(e+n,i+o,e,i+o,r),t.arcTo(e,i+o,e,i,r),t.arcTo(e,i,e+n,i,r),t.closePath()})(t,e.x,e.y,e.width,e.height,e.cornerRadius):t.rect(e.x,e.y,e.width,e.height),t),Ln=(t,e)=>(e.backgroundColor&&t.fill(),t),On=(t,e)=>(e.strokeWidth&&t.stroke(),t);var zn=async(t,e,i={})=>new Promise((async(n,o)=>{const{drawImage:r}=i;if(t.lineWidth=e.strokeWidth?e.strokeWidth:1,t.strokeStyle=e.strokeColor?ai(e.strokeColor):"none",t.fillStyle=e.backgroundColor?ai(e.backgroundColor):"none",t.globalAlpha=e.opacity,e.backgroundImage){let i;try{i=Tn(e.backgroundImage)?e.backgroundImage:await En(e.backgroundImage)}catch(t){o(t)}Rn(t,e),Ln(t,e);const{srcRect:s,destRect:a}=Dn(e,e.backgroundSize,kt(i),e.backgroundCorners);await An(t,i,s,a,r),On(t,e),n([])}else Rn(t,e),Ln(t,e),On(t,e),n([])})),Fn=async(t,e,i={})=>new Promise((async(n,o)=>{const{drawImage:r}=i;if(t.lineWidth=e.strokeWidth||1,t.strokeStyle=e.strokeColor?ai(e.strokeColor):"none",t.fillStyle=e.backgroundColor?ai(e.backgroundColor):"none",t.globalAlpha=e.opacity,t.ellipse(e.x,e.y,e.rx,e.ry,0,0,2*Math.PI),e.backgroundColor&&t.fill(),e.backgroundImage){let i;try{i=await En(e.backgroundImage)}catch(t){o(t)}const s=Yt(e.x-e.rx,e.y-e.ry,2*e.rx,2*e.ry),{srcRect:a,destRect:l}=Dn(s,e.backgroundSize,kt(i));await An(t,i,a,l,r),e.strokeWidth&&t.stroke(),n([])}else e.strokeWidth&&t.stroke(),n([])})),Bn=async(t,e,i)=>{const n=e.width&&e.height?$t(e):vi(e.text,e),o={x:e.x,y:e.y,width:n.width,height:n.height};if(zn(t,{...e,...o,options:i}),!e.text.length)return[];const{willRequestResource:r}=i,s=await Ti(e.text,{...e,...o,imageWidth:o.width,imageHeight:o.height,willRequestResource:r});return t.drawImage(s,e.x-pi,e.y,s.width,s.height),[]},Nn=async(t,e)=>new Promise((async i=>{t.lineWidth=e.strokeWidth||1,t.strokeStyle=e.strokeColor?ai(e.strokeColor):"none",t.globalAlpha=e.opacity;let n=Ri(e),o=Li(e);t.moveTo(n.x,n.y),t.lineTo(o.x,o.y),e.strokeWidth&&t.stroke(),i([])})),Hn=async(t,e)=>new Promise(((i,n)=>{t.lineWidth=e.strokeWidth||1,t.strokeStyle=e.strokeColor?ai(e.strokeColor):"none",t.fillStyle=e.backgroundColor?ai(e.backgroundColor):"none",t.globalAlpha=e.opacity;const{points:o}=e;e.pathClose&&t.beginPath(),t.moveTo(o[0].x,o[0].y);const r=o.length;for(let e=1;e<r;e++)t.lineTo(o[e].x,o[e].y);e.pathClose&&t.closePath(),e.strokeWidth&&t.stroke(),e.backgroundColor&&t.fill(),i([])}));const Wn=async(t,e,i)=>{const n=(t=>{if(Bi(t))return Q(t.x+.5*t.width,t.y+.5*t.height);if(Ni(t))return Q(t.x,t.y);if(Fi(t)){const e=t.height||vi(t.text,t).height;return Q(t.x+.5*t.width,t.y+.5*e)}if(zi(t)){const e=vi(t.text,t);return Q(t.x+.5*e.width,t.y+.5*e.height)}return ji(t)?gt(t.points):Hi(t)?gt([Ri(t),Li(t)]):void 0})(e);let o;return Ne(t,e.rotation,n),((t,e,i,n)=>{(e||i)&&(t.translate(n.x,n.y),t.scale(e?-1:1,i?-1:1),t.translate(-n.x,-n.y))})(t,e.flipX,e.flipY,n),Bi(e)?o=zn:Ni(e)?o=Fn:Hi(e)?o=Nn:ji(e)?o=Hn:Oi(e)&&(o=Bn),o?[e,...await jn(t,await o(t,e,i),i)]:[]};var jn=async(t,e,i)=>{let n=[];for(const o of e)t.save(),t.beginPath(),n=[...n,...await Wn(t,o,i)],t.restore();return n},Yn=async(e,i={})=>{const{shapes:n=[],contextBounds:o=e,transform:r=f,drawImage:s,willRequestResource:a,canvasMemoryLimit:l,computeShape:c=Y,preprocessShape:h=Y}=i;if(!n.length)return e;const u=t("canvas");u.width=o.width,u.height=o.height;const d=u.getContext("2d");d.putImageData(e,o.x||0,o.y||0);const p=n.map(Pi).map(c).map(h).flat();r(d),await jn(d,p,{drawImage:s,canvasMemoryLimit:l,willRequestResource:a});const m=d.getImageData(0,0,u.width,u.height);return w(u),m},Vn=async(e,i={})=>{const{backgroundColor:n}=i;if(!n||n&&0===n[3])return e;const o=t("canvas");o.width=e.width,o.height=e.height;const r=o.getContext("2d");r.putImageData(e,0,0),r.globalCompositeOperation="destination-over",r.fillStyle=ai(n),r.fillRect(0,0,o.width,o.height);const s=r.getImageData(0,0,o.width,o.height);return w(o),s},Un=t=>t.length?t.reduce(((t,e)=>((t,e)=>{const i=new Array(20);return i[0]=t[0]*e[0]+t[1]*e[5]+t[2]*e[10]+t[3]*e[15],i[1]=t[0]*e[1]+t[1]*e[6]+t[2]*e[11]+t[3]*e[16],i[2]=t[0]*e[2]+t[1]*e[7]+t[2]*e[12]+t[3]*e[17],i[3]=t[0]*e[3]+t[1]*e[8]+t[2]*e[13]+t[3]*e[18],i[4]=t[0]*e[4]+t[1]*e[9]+t[2]*e[14]+t[3]*e[19]+t[4],i[5]=t[5]*e[0]+t[6]*e[5]+t[7]*e[10]+t[8]*e[15],i[6]=t[5]*e[1]+t[6]*e[6]+t[7]*e[11]+t[8]*e[16],i[7]=t[5]*e[2]+t[6]*e[7]+t[7]*e[12]+t[8]*e[17],i[8]=t[5]*e[3]+t[6]*e[8]+t[7]*e[13]+t[8]*e[18],i[9]=t[5]*e[4]+t[6]*e[9]+t[7]*e[14]+t[8]*e[19]+t[9],i[10]=t[10]*e[0]+t[11]*e[5]+t[12]*e[10]+t[13]*e[15],i[11]=t[10]*e[1]+t[11]*e[6]+t[12]*e[11]+t[13]*e[16],i[12]=t[10]*e[2]+t[11]*e[7]+t[12]*e[12]+t[13]*e[17],i[13]=t[10]*e[3]+t[11]*e[8]+t[12]*e[13]+t[13]*e[18],i[14]=t[10]*e[4]+t[11]*e[9]+t[12]*e[14]+t[13]*e[19]+t[14],i[15]=t[15]*e[0]+t[16]*e[5]+t[17]*e[10]+t[18]*e[15],i[16]=t[15]*e[1]+t[16]*e[6]+t[17]*e[11]+t[18]*e[16],i[17]=t[15]*e[2]+t[16]*e[7]+t[17]*e[12]+t[18]*e[17],i[18]=t[15]*e[3]+t[16]*e[8]+t[17]*e[13]+t[18]*e[18],i[19]=t[15]*e[4]+t[16]*e[9]+t[17]*e[14]+t[18]*e[19]+t[19],i})([...t],e)),t.shift()):[],qn=(t,e)=>{const i=t.width*t.height,n=e.reduce(((t,e)=>(e.width>t.width&&e.height>t.height&&(t.width=e.width,t.height=e.height),t)),{width:0,height:0}),o=n.width*n.height;return((t,e=2)=>Math.round(t*e)/e)(Math.max(.5,.5+(1-o/i)/2),5)};function Xn(){}const Gn=t=>t;function Zn(t,e){for(const i in e)t[i]=e[i];return t}function Kn(t){return t()}function Qn(){return Object.create(null)}function Jn(t){t.forEach(Kn)}function to(t){return"function"==typeof t}function eo(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function io(t,...e){if(null==t)return Xn;const i=t.subscribe(...e);return i.unsubscribe?()=>i.unsubscribe():i}function no(t){let e;return io(t,(t=>e=t))(),e}function oo(t,e,i){t.$$.on_destroy.push(io(e,i))}function ro(t,e,i,n){if(t){const o=so(t,e,i,n);return t[0](o)}}function so(t,e,i,n){return t[1]&&n?Zn(i.ctx.slice(),t[1](n(e))):i.ctx}function ao(t,e,i,n,o,r,s){const a=function(t,e,i,n){if(t[2]&&n){const o=t[2](n(i));if(void 0===e.dirty)return o;if("object"==typeof o){const t=[],i=Math.max(e.dirty.length,o.length);for(let n=0;n<i;n+=1)t[n]=e.dirty[n]|o[n];return t}return e.dirty|o}return e.dirty}(e,n,o,r);if(a){const o=so(e,i,n,s);t.p(o,a)}}function lo(t){const e={};for(const i in t)"$"!==i[0]&&(e[i]=t[i]);return e}function co(t,e){const i={};e=new Set(e);for(const n in t)e.has(n)||"$"===n[0]||(i[n]=t[n]);return i}function ho(t,e,i=e){return t.set(i),e}function uo(t){return t&&to(t.destroy)?t.destroy:Xn}const po="undefined"!=typeof window;let fo=po?()=>window.performance.now():()=>Date.now(),mo=po?t=>requestAnimationFrame(t):Xn;const go=new Set;function yo(t){go.forEach((e=>{e.c(t)||(go.delete(e),e.f())})),0!==go.size&&mo(yo)}function vo(t){let e;return 0===go.size&&mo(yo),{promise:new Promise((i=>{go.add(e={c:t,f:i})})),abort(){go.delete(e)}}}function bo(t,e){t.appendChild(e)}function xo(t,e,i){t.insertBefore(e,i||null)}function $o(t){t.parentNode.removeChild(t)}function wo(t){return document.createElement(t)}function _o(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function ko(t){return document.createTextNode(t)}function So(){return ko(" ")}function Co(){return ko("")}function To(t,e,i,n){return t.addEventListener(e,i,n),()=>t.removeEventListener(e,i,n)}function Mo(t){return function(e){return e.preventDefault(),t.call(this,e)}}function Po(t){return function(e){return e.stopPropagation(),t.call(this,e)}}function Eo(t,e,i){null==i?t.removeAttribute(e):t.getAttribute(e)!==i&&t.setAttribute(e,i)}function Io(t,e){const i=Object.getOwnPropertyDescriptors(t.__proto__);for(const n in e)null==e[n]?t.removeAttribute(n):"style"===n?t.style.cssText=e[n]:"__value"===n?t.value=t[n]=e[n]:i[n]&&i[n].set?t[n]=e[n]:Eo(t,n,e[n])}function Ao(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function Do(t,e){t.value=null==e?"":e}function Ro(t,e){const i=document.createEvent("CustomEvent");return i.initCustomEvent(t,!1,!1,e),i}class Lo{constructor(t=null){this.a=t,this.e=this.n=null}m(t,e,i=null){this.e||(this.e=wo(e.nodeName),this.t=e,this.h(t)),this.i(i)}h(t){this.e.innerHTML=t,this.n=Array.from(this.e.childNodes)}i(t){for(let e=0;e<this.n.length;e+=1)xo(this.t,this.n[e],t)}p(t){this.d(),this.h(t),this.i(this.a)}d(){this.n.forEach($o)}}const Oo=new Set;let zo,Fo=0;function Bo(t,e,i,n,o,r,s,a=0){const l=16.666/n;let c="{\n";for(let t=0;t<=1;t+=l){const n=e+(i-e)*r(t);c+=100*t+`%{${s(n,1-n)}}\n`}const h=c+`100% {${s(i,1-i)}}\n}`,u=`__svelte_${function(t){let e=5381,i=t.length;for(;i--;)e=(e<<5)-e^t.charCodeAt(i);return e>>>0}(h)}_${a}`,d=t.ownerDocument;Oo.add(d);const p=d.__svelte_stylesheet||(d.__svelte_stylesheet=d.head.appendChild(wo("style")).sheet),f=d.__svelte_rules||(d.__svelte_rules={});f[u]||(f[u]=!0,p.insertRule(`@keyframes ${u} ${h}`,p.cssRules.length));const m=t.style.animation||"";return t.style.animation=`${m?m+", ":""}${u} ${n}ms linear ${o}ms 1 both`,Fo+=1,u}function No(t){zo=t}function Ho(){if(!zo)throw new Error("Function called outside component initialization");return zo}function Wo(t){Ho().$$.on_mount.push(t)}function jo(t){Ho().$$.after_update.push(t)}function Yo(t){Ho().$$.on_destroy.push(t)}function Vo(){const t=Ho();return(e,i)=>{const n=t.$$.callbacks[e];if(n){const o=Ro(e,i);n.slice().forEach((e=>{e.call(t,o)}))}}}function Uo(t,e){Ho().$$.context.set(t,e)}function qo(t){return Ho().$$.context.get(t)}function Xo(t,e){const i=t.$$.callbacks[e.type];i&&i.slice().forEach((t=>t(e)))}const Go=[],Zo=[],Ko=[],Qo=[],Jo=Promise.resolve();let tr=!1;function er(){tr||(tr=!0,Jo.then(ar))}function ir(){return er(),Jo}function nr(t){Ko.push(t)}function or(t){Qo.push(t)}let rr=!1;const sr=new Set;function ar(){if(!rr){rr=!0;do{for(let t=0;t<Go.length;t+=1){const e=Go[t];No(e),lr(e.$$)}for(No(null),Go.length=0;Zo.length;)Zo.pop()();for(let t=0;t<Ko.length;t+=1){const e=Ko[t];sr.has(e)||(sr.add(e),e())}Ko.length=0}while(Go.length);for(;Qo.length;)Qo.pop()();tr=!1,rr=!1,sr.clear()}}function lr(t){if(null!==t.fragment){t.update(),Jn(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(nr)}}let cr;function hr(t,e,i){t.dispatchEvent(Ro(`${e?"intro":"outro"}${i}`))}const ur=new Set;let dr;function pr(){dr={r:0,c:[],p:dr}}function fr(){dr.r||Jn(dr.c),dr=dr.p}function mr(t,e){t&&t.i&&(ur.delete(t),t.i(e))}function gr(t,e,i,n){if(t&&t.o){if(ur.has(t))return;ur.add(t),dr.c.push((()=>{ur.delete(t),n&&(i&&t.d(1),n())})),t.o(e)}}const yr={duration:0};function vr(t,e,i,n){let o=e(t,i),r=n?0:1,s=null,a=null,l=null;function c(){l&&function(t,e){const i=(t.style.animation||"").split(", "),n=i.filter(e?t=>t.indexOf(e)<0:t=>-1===t.indexOf("__svelte")),o=i.length-n.length;o&&(t.style.animation=n.join(", "),Fo-=o,Fo||mo((()=>{Fo||(Oo.forEach((t=>{const e=t.__svelte_stylesheet;let i=e.cssRules.length;for(;i--;)e.deleteRule(i);t.__svelte_rules={}})),Oo.clear())})))}(t,l)}function h(t,e){const i=t.b-r;return e*=Math.abs(i),{a:r,b:t.b,d:i,duration:e,start:t.start,end:t.start+e,group:t.group}}function u(e){const{delay:i=0,duration:n=300,easing:u=Gn,tick:d=Xn,css:p}=o||yr,f={start:fo()+i,b:e};e||(f.group=dr,dr.r+=1),s||a?a=f:(p&&(c(),l=Bo(t,r,e,n,i,u,p)),e&&d(0,1),s=h(f,n),nr((()=>hr(t,e,"start"))),vo((e=>{if(a&&e>a.start&&(s=h(a,n),a=null,hr(t,s.b,"start"),p&&(c(),l=Bo(t,r,s.b,s.duration,0,u,o.css))),s)if(e>=s.end)d(r=s.b,1-r),hr(t,s.b,"end"),a||(s.b?c():--s.group.r||Jn(s.group.c)),s=null;else if(e>=s.start){const t=e-s.start;r=s.a+s.d*u(t/s.duration),d(r,1-r)}return!(!s&&!a)})))}return{run(t){to(o)?(cr||(cr=Promise.resolve(),cr.then((()=>{cr=null}))),cr).then((()=>{o=o(),u(t)})):u(t)},end(){c(),s=a=null}}}const br="undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:global;function xr(t,e){t.d(1),e.delete(t.key)}function $r(t,e){gr(t,1,1,(()=>{e.delete(t.key)}))}function wr(t,e,i,n,o,r,s,a,l,c,h,u){let d=t.length,p=r.length,f=d;const m={};for(;f--;)m[t[f].key]=f;const g=[],y=new Map,v=new Map;for(f=p;f--;){const t=u(o,r,f),a=i(t);let l=s.get(a);l?n&&l.p(t,e):(l=c(a,t),l.c()),y.set(a,g[f]=l),a in m&&v.set(a,Math.abs(f-m[a]))}const b=new Set,x=new Set;function $(t){mr(t,1),t.m(a,h),s.set(t.key,t),h=t.first,p--}for(;d&&p;){const e=g[p-1],i=t[d-1],n=e.key,o=i.key;e===i?(h=e.first,d--,p--):y.has(o)?!s.has(n)||b.has(n)?$(e):x.has(o)?d--:v.get(n)>v.get(o)?(x.add(n),$(e)):(b.add(o),d--):(l(i,s),d--)}for(;d--;){const e=t[d];y.has(e.key)||l(e,s)}for(;p;)$(g[p-1]);return g}function _r(t,e){const i={},n={},o={$$scope:1};let r=t.length;for(;r--;){const s=t[r],a=e[r];if(a){for(const t in s)t in a||(n[t]=1);for(const t in a)o[t]||(i[t]=a[t],o[t]=1);t[r]=a}else for(const t in s)o[t]=1}for(const t in n)t in i||(i[t]=void 0);return i}function kr(t){return"object"==typeof t&&null!==t?t:{}}function Sr(t,e,i){const n=t.$$.props[e];void 0!==n&&(t.$$.bound[n]=i,i(t.$$.ctx[n]))}function Cr(t){t&&t.c()}function Tr(t,e,i,n){const{fragment:o,on_mount:r,on_destroy:s,after_update:a}=t.$$;o&&o.m(e,i),n||nr((()=>{const e=r.map(Kn).filter(to);s?s.push(...e):Jn(e),t.$$.on_mount=[]})),a.forEach(nr)}function Mr(t,e){const i=t.$$;null!==i.fragment&&(Jn(i.on_destroy),i.fragment&&i.fragment.d(e),i.on_destroy=i.fragment=null,i.ctx=[])}function Pr(t,e,i,n,o,r,s=[-1]){const a=zo;No(t);const l=t.$$={fragment:null,ctx:null,props:r,update:Xn,not_equal:o,bound:Qn(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(a?a.$$.context:e.context||[]),callbacks:Qn(),dirty:s,skip_bound:!1};let c=!1;if(l.ctx=i?i(t,e.props||{},((e,i,...n)=>{const r=n.length?n[0]:i;return l.ctx&&o(l.ctx[e],l.ctx[e]=r)&&(!l.skip_bound&&l.bound[e]&&l.bound[e](r),c&&function(t,e){-1===t.$$.dirty[0]&&(Go.push(t),er(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}(t,e)),i})):[],l.update(),c=!0,Jn(l.before_update),l.fragment=!!n&&n(l.ctx),e.target){if(e.hydrate){const t=function(t){return Array.from(t.childNodes)}(e.target);l.fragment&&l.fragment.l(t),t.forEach($o)}else l.fragment&&l.fragment.c();e.intro&&mr(t.$$.fragment),Tr(t,e.target,e.anchor,e.customElement),ar()}No(a)}class Er{$destroy(){Mr(this,1),this.$destroy=Xn}$on(t,e){const i=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return i.push(e),()=>{const t=i.indexOf(e);-1!==t&&i.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const Ir=[];function Ar(t,e){return{subscribe:Dr(t,e).subscribe}}function Dr(t,e=Xn){let i;const n=[];function o(e){if(eo(t,e)&&(t=e,i)){const e=!Ir.length;for(let e=0;e<n.length;e+=1){const i=n[e];i[1](),Ir.push(i,t)}if(e){for(let t=0;t<Ir.length;t+=2)Ir[t][0](Ir[t+1]);Ir.length=0}}}return{set:o,update:function(e){o(e(t))},subscribe:function(r,s=Xn){const a=[r,s];return n.push(a),1===n.length&&(i=e(o)||Xn),r(t),()=>{const t=n.indexOf(a);-1!==t&&n.splice(t,1),0===n.length&&(i(),i=null)}}}}function Rr(t,e,i){const n=!Array.isArray(t),o=n?[t]:t,r=e.length<2;return Ar(i,(t=>{let i=!1;const s=[];let a=0,l=Xn;const c=()=>{if(a)return;l();const i=e(n?s[0]:s,t);r?t(i):l=to(i)?i:Xn},h=o.map(((t,e)=>io(t,(t=>{s[e]=t,a&=~(1<<e),i&&c()}),(()=>{a|=1<<e}))));return i=!0,c(),function(){Jn(h),l()}}))}var Lr=t=>t.reduce(((t,e)=>Object.assign(t,e)),{});const Or=t=>({updateValue:t}),zr=t=>({defaultValue:t}),Fr=t=>({store:(e,i)=>Rr(...t(i))}),Br=t=>({store:(e,i)=>{const[n,o,r=(()=>!1)]=t(i);let s,a=!0;return Rr(n,((t,e)=>{o(t,(t=>{!a&&r(s,t)||(s=t,a=!1,e(t))}))}))}}),Nr=t=>({store:(e,i)=>{const[n,o={},r]=t(i);let s=[];const a={},l=t=>n(t,a),c=t=>{(s.length||t.length)&&(s=t,h())},h=()=>{const t=s.map(l);r&&t.sort(r),s=[...t],d(t)};Object.entries(o).map((([t,e])=>e.subscribe((e=>{a[t]=e,e&&h()}))));const{subscribe:u,set:d}=Dr(e||[]);return{set:c,update:t=>c(t(s)),subscribe:u}}});var Hr=t=>{const e={},i={};return t.forEach((([t,...n])=>{const o=Lr(n),r=e[t]=((t,e,i)=>{const{store:n=(t=>Dr(t)),defaultValue:o=f,updateValue:r}=i,s=n(o(),e,t),{subscribe:a,update:l=f}=s;let c;const h=t=>{let e=!0;c&&c(),c=a((i=>{if(e)return e=!1;t(i),c(),c=void 0}))},u=r?r(t):Y;return s.set=t=>l((e=>u(t,e,h))),s.defaultValue=o,s})(i,e,o),s={get:()=>no(r),set:r.set};Object.defineProperty(i,t,s)})),{stores:e,accessors:i}},Wr=[["src"],["imageReader"],["imageWriter"],["imageScrambler"],["images",zr((()=>[]))],["shapePreprocessor"],["willRequestResource"]],jr=t=>t.charAt(0).toUpperCase()+t.slice(1),Yr=(t,e)=>{Object.keys(e).forEach((i=>{const n=P(e[i])?{value:e[i],writable:!1}:e[i];Object.defineProperty(t,i,n)}))};const Vr=(t,e)=>{let i,n,o,r,s,a,l,c,h,u;const d=e.length;for(i=0;i<d;i++)if(n=e[i],o=e[i+1>d-1?0:i+1],r=n.x-t.x,s=n.y-t.y,a=o.x-t.x,l=o.y-t.y,c=r-a,h=s-l,u=c*s-h*r,u<-1e-5)return!1;return!0},Ur=1e4;var qr=(t,e)=>{const i=fe(e),n=K();se(t).forEach((t=>{ct(t,n),Vr(t,e)||i.forEach((e=>{const i=Math.atan2(e.start.y-e.end.y,e.start.x-e.end.x),o=Math.sin(Math.PI-i)*Ur,r=Math.cos(Math.PI-i)*Ur,s=Q(t.x+o,t.y+r),a=Rt(Dt(e),Ur),l=ue(At(t,s),a);l&&ct(n,ht(et(l),t))}))}));const o=zt(t);return ct(o,n),!!se(o).every((t=>Vr(t,e)))&&(Jt(t,o),!0)},Xr=(t,e)=>{const i=se(t),n=fe(e).map((t=>Rt(t,5))),o=Vt(t),r=[];i.forEach((t=>{const e=((t,e)=>{const i=Q(t.start.x-t.end.x,t.start.y-t.end.y),n=rt(i),o=ut(n,e);return t.end.x+=o.x,t.end.y+=o.y,t})(At(et(o),et(t)),1e6);let i=!1;n.map(Dt).forEach((t=>{const n=ue(e,t);n&&!i&&(r.push(n),i=!0)}))}));const s=ft(r[0],r[2])<ft(r[1],r[3])?[r[0],r[2]]:[r[1],r[3]],a=Ht(s);return a.width<t.width&&(Jt(t,a),!0)},Gr=(t,e,i={x:0,y:0})=>{const n=Bt(t),o=Vt(n),r=le(n,i,o).map((t=>nt(t,e,o))),s=Ht(r);return r.map((t=>ht(t,s)))},Zr=(t,e=0,i=Kt(t))=>{let n,o;if(0!==e){const r=Math.atan2(1,i),s=Math.sign(e)*e,a=s%Math.PI,l=s%U;let c,h;h=a>q&&a<U+q?l>q?s:U-l:l>q?U-l:s,c=Math.min(Math.abs(t.height/Math.sin(r+h)),Math.abs(t.width/Math.cos(r-h))),n=Math.cos(r)*c,o=n/i}else n=t.width,o=n/i,o>t.height&&(o=t.height,n=o*i);return St(n,o)},Kr=(t,e,i)=>{const n=Bt(t),o=Vt(n),r=te(n,i,o),s=Vt(ce(Ht(r))),a=Vt(e),l=nt(a,-i,s),c=ht(l,s),h=lt(ct(o,c),Mi);return Yt(h.x-.5*e.width,h.y-.5*e.height,e.width,e.height)},Qr=(t,e,i)=>Math.max(e,Math.min(t,i));const Jr=["cropLimitToImage","cropMinSize","cropMaxSize","cropAspectRatio","flipX","flipY","rotation","crop","colorMatrix","convolutionMatrix","gamma","vignette","redaction","annotation","decoration","frame","backgroundColor","targetSize","metadata"],ts=t=>ti(t)?t.map(ts):C(t)?{...t}:t,es=t=>t.map((t=>Object.entries(t).reduce(((t,[e,i])=>(e.startsWith("_")||(t[e]=i),t)),{})));var is=(t,e)=>{if(t.length!==e.length)return!1;for(let i=0;i<t.length;i++)if(t[i]!==e[i])return!1;return!0};const ns=-q,os=q,rs=(t,e,i)=>{const n=lt(Vt(t),(t=>Mi(t,8))),o=Bt(e),r=Vt(o),s=te(o,i,r),a=lt(Mt(Ht(s)),(t=>Mi(t,8))),l=Math.abs(a.x-n.x),c=Math.abs(a.y-n.y);return l<1&&c<1},ss=(t,e)=>{const{context:i,props:n}=e;return t._isFormatted||((t=dn(t))._isFormatted=!0,Object.assign(t,n)),t._isDraft||!Ki(t)||t._context&&Zt(i,t._context)||(Sn(t,i),t._context={...i}),t};var as=[["file"],["size"],["loadState"],["processState"],["aspectRatio",Fr((({size:t})=>[t,t=>t?Kt(t):void 0]))],["perspectiveX",zr((()=>0))],["perspectiveY",zr((()=>0))],["perspective",Fr((({perspectiveX:t,perspectiveY:e})=>[[t,e],([t,e])=>({x:t,y:e})]))],["rotation",zr((()=>0)),Or((t=>(e,i,n)=>{if(e===i)return e;const{loadState:o,size:r,rotationRange:s,cropMinSize:a,cropMaxSize:l,crop:c,perspective:h,cropLimitToImage:u,cropOrigin:d}=t;if(!c||!o||!o.beforeComplete)return e;const p=((t,e,i)=>{const n=Zr(e,i,Kt(t));return Ct(It(n,Math.round),It(xt(t),Math.round))})(c,r,i),f=rs(c,r,i),m=((t,e,i,n,o,r,s,a,l,c)=>{const h=xt(l),u=xt(c);s&&(u.width=Math.min(c.width,o.width),u.height=Math.min(c.height,o.height));let d=!1;const p=(e,i)=>{const l=Kr(o,n,e),c=Bt(o),f=Vt(c),m=le(c,r,f),g=ht(et(f),he(m)),y=nt(Vt(l),i,f),v=ht(et(f),y);m.forEach((t=>nt(t,i,f)));const b=Ht(m),x=he(m),$=ct(ht(ht(x,v),b),g),w=Yt($.x-.5*l.width,$.y-.5*l.height,l.width,l.height);if(a&&qt(w,a.width/w.width),s){const t=Gr(o,i,r);Xr(w,t)}const _=Mi(Math.min(w.width/h.width,w.height/h.height),8),k=Mi(Math.max(w.width/u.width,w.height/u.height),8);return(_<1||k>1)&&Mi(Math.abs(i-e))===Mi(Math.PI/2)&&!d?(d=!0,p(t,t+Math.sign(i-e)*Math.PI)):{rotation:i,crop:ae(w,(t=>Mi(t,8)))}},f=Math.sign(e)*Math.round(Math.abs(e)/U)*U,m=Qr(e,f+i[0],f+i[1]);return p(t,m)})(i,e,s,c,r,h,u,d,a,l);if(p&&f){const t=Zr(r,e,Kt(m.crop));m.crop.x+=.5*m.crop.width,m.crop.y+=.5*m.crop.height,m.crop.x-=.5*t.width,m.crop.y-=.5*t.height,m.crop.width=t.width,m.crop.height=t.height}return n((()=>{t.crop=ae(m.crop,(t=>Mi(t,8)))})),m.rotation}))],["flipX",zr((()=>!1))],["flipY",zr((()=>!1))],["flip",Fr((({flipX:t,flipY:e})=>[[t,e],([t,e])=>({x:t,y:e})]))],["isRotatedSideways",Br((({rotation:t})=>[[t],([t],e)=>e(X(t)),(t,e)=>t!==e]))],["crop",Or((t=>(e,i=e)=>{const{loadState:n,size:o,cropMinSize:r,cropMaxSize:s,cropLimitToImage:a,cropAspectRatio:l,rotation:c,perspective:h}=t;if(!e&&!i||!n||!n.beforeComplete)return e;e||(e=Bt(Zr(o,c,l||Kt(o))));const u=((t,e,i,n,o,r,s,a)=>{const l=xt(s),c=xt(a),h=Mi(Math.max(e.width/c.width,e.height/c.height)),u=Mi(Math.min(e.width/l.width,e.height/l.height)),d=zt(e);if(u<1||h>1){const i=Vt(t),n=Vt(e),o=u<1?u:h,r=(n.x+i.x)/2,s=(n.y+i.y)/2,a=d.width/o,l=d.height/o;Qt(d,r-.5*a,s-.5*l,a,l)}return r?(((t,e,i=0,n=K(),o)=>{if(Ke(i)&&0!==i||n.x||n.y){const o=Kt(t),r=Gr(e,i,n),s=Zr(e,i,o);if(!(t.width<s.width&&t.height<s.height)){const e=.5*t.width-.5*s.width,i=.5*t.height-.5*s.height;t.width>s.width&&(t.width=s.width,t.x+=e),t.height>s.height&&(t.height=s.height,t.y+=i)}qr(t,r),Xr(t,r)&&qr(t,r)}else{const i=Kt(t);t.width=Math.min(t.width,e.width),t.height=Math.min(t.height,e.height),t.x=Math.max(t.x,0),t.x+t.width>e.width&&(t.x-=t.x+t.width-e.width),t.y=Math.max(t.y,0),t.y+t.height>e.height&&(t.y-=t.y+t.height-e.height);const n=Vt(t),r=oe(t,i);r.width=Math.max(o.width,r.width),r.height=Math.max(o.height,r.height),r.x=n.x-.5*r.width,r.y=n.y-.5*r.height,Jt(t,r)}})(d,i,n,o,l),{crop:d}):{crop:d}})(i,e,o,c,h,a,r,s);return ae(u.crop,(t=>Mi(t,8)))}))],["cropAspectRatio",Or((t=>(e,i)=>{const{loadState:n,crop:o,size:r,rotation:s,cropLimitToImage:a}=t,l=(t=>{if(t){if(/:/.test(t)){const[e,i]=t.split(":");return e/i}return parseFloat(t)}})(e);if(!l)return;if(!o||!n||!n.beforeComplete)return l;const c=i?Math.abs(e-i):1;if(rs(o,r,s)&&a&&c>=.1){const i=((t,e)=>{const i=t.width,n=t.height;return X(e)&&(t.width=n,t.height=i),t})(xt(r),s);t.crop=ae(oe(Bt(i),e),Mi)}else{const e={width:o.height*l,height:o.height},i=.5*(o.width-e.width),n=.5*(o.height-e.height);t.crop=ae(Yt(o.x+i,o.y+n,e.width,e.height),Mi)}return l}))],["cropOrigin"],["cropMinSize",zr((()=>({width:1,height:1})))],["cropMaxSize",zr((()=>({width:32768,height:32768})))],["cropLimitToImage",zr((()=>!0)),Or((t=>(e,i,n)=>{const{crop:o}=t;return o?(!i&&e&&n((()=>t.crop=zt(t.crop))),e):e}))],["cropSize",Br((({crop:t})=>[[t],([t],e)=>{t&&e(St(t.width,t.height))},(t,e)=>Ct(t,e)]))],["cropRectAspectRatio",Fr((({cropSize:t})=>[[t],([t],e)=>{t&&e(Mi(Kt(t),5))}]))],["cropRange",Br((({size:t,rotation:e,cropRectAspectRatio:i,cropMinSize:n,cropMaxSize:o,cropLimitToImage:r})=>[[t,e,i,n,o,r],([t,e,i,n,o,r],s)=>{t&&s(((t,e,i,n,o,r)=>{const s=xt(n),a=xt(o);return r?[s,It(Zr(t,e,i),Math.round)]:[s,a]})(t,e,i,n,o,r))},(t,e)=>is(t,e)]))],["rotationRange",Br((({size:t,isRotatedSideways:e,cropMinSize:i,cropSize:n,cropLimitToImage:o})=>[[t,e,i,n,o],([t,e,i,n,o],r)=>{t&&n&&r(((t,e,i,n,o)=>{if(!o)return[ns,os];const r=Math.max(i.width/n.width,i.height/n.height),s=St(n.width*r,n.height*r),a=(l=s,Math.sqrt(l.width*l.width+l.height*l.height));var l;if(a<Math.min(t.width,t.height))return[ns,os];const c=e?t.height:t.width,h=e?t.width:t.height,u=Math.acos(s.height/a),d=u-Math.acos(h/a),p=Math.asin(c/a)-u;if(Number.isNaN(d)&&Number.isNaN(p))return[ns,os];const f=Number.isNaN(d)?p:Number.isNaN(p)?d:Math.min(d,p);return[Math.max(-f,ns),Math.min(f,os)]})(t,e,i,n,o))},(t,e)=>is(t,e)]))],["backgroundColor",Or((()=>t=>((t=[0,0,0,0],e=1)=>4===t.length?t:[...t,e])(t)))],["targetSize"],["colorMatrix"],["convolutionMatrix"],["gamma"],["noise"],["vignette"],["redaction",Nr((({size:t})=>[ss,{context:t}]))],["annotation",Nr((({size:t})=>[ss,{context:t}]))],["decoration",Nr((({crop:t})=>[ss,{context:t}]))],["frame",Or((()=>t=>{if(!t)return;const i={frameStyle:void 0,x:0,y:0,width:"100%",height:"100%",disableStyle:["backgroundColor","strokeColor","strokeWidth"]};return e(t)?i.frameStyle=t:Object.assign(i,t),i}))],["metadata"],["state",{store:(t,e,i)=>{const n=Jr.map((t=>e[t]));let o=!1;const r=Dr({}),{subscribe:s}=Rr([...n,r],((t,e)=>{if(o)return;const i=Jr.reduce(((e,i,n)=>(e[i]=ts(t[n]),e)),{});i.crop&&ae(i.crop,Math.round),i.redaction=i.redaction&&es(i.redaction),i.annotation=i.annotation&&es(i.annotation),i.decoration=i.decoration&&es(i.decoration),e(i)})),a=t=>{t&&(o=!0,i.cropOrigin=void 0,Jr.filter((e=>Je(t,e))).forEach((e=>{i[e]=ts(t[e])})),o=!1,r.set({}))};return{set:a,update:t=>a(t(null)),subscribe:s}}}]],ls=async(t,e,i={},n)=>{const{ontaskstart:o,ontaskprogress:r,ontaskend:s,token:a}=n;let l=!1;a.cancel=()=>{l=!0};for(const[n,a]of e.entries()){if(l)return;const[e,c]=a;o(n,c);try{t=await e(t,{...i},(t=>r(n,c,t)))}catch(t){throw l=!0,t}s(n,c)}return t};const cs=["loadstart","loadabort","loaderror","loadprogress","load","processstart","processabort","processerror","processprogress","process"],hs=["flip","cropOrigin","isRotatedSideways","perspective","perspectiveX","perspectiveY","cropRange"],us=as.map((([t])=>t)).filter((t=>!hs.includes(t))),ds=t=>"image"+jr(t),ps=t=>Je(t,"crop");var fs=()=>{const{stores:t,accessors:i}=Hr(Wr),{sub:n,pub:o}=di(),s=()=>i.images?i.images[0]:{};let a={};const l={};us.forEach((t=>{Object.defineProperty(i,ds(t),{get:()=>{const e=s();if(e)return e.accessors[t]},set:e=>{a[ds(t)]=e,l[ds(t)]=e;const i=s();i&&(i.accessors[t]=e)}})}));const c=()=>i.images&&i.images[0],h=t.src.subscribe((t=>{if(!t)return i.images=[];i.imageReader&&(i.images.length&&(a={}),d(t))})),u=t.imageReader.subscribe((t=>{t&&(i.images.length||i.src&&d(i.src))})),d=t=>{Promise.resolve().then((()=>m(t,a))).catch((()=>{}))};let p;const m=(t,e={})=>new Promise(((n,r)=>{let s=c();const h=!(!1===e.cropLimitToImage||!1===e.imageCropLimitToImage||!1===l.imageCropLmitedToImage),u=e.cropMinSize||e.imageCropMinSize||l.imageCropMinSize,d=h?u:s&&s.accessors.cropMinSize;s&&y(),s=(({minSize:t={width:1,height:1}}={})=>{const{stores:e,accessors:i}=Hr(as),{pub:n,sub:o}=di(),r=(t,e)=>{const o=()=>i[t]||{},r=e=>i[t]={...o(),...e,timeStamp:Date.now()},s=()=>o().error,a=t=>{s()||(r({error:t}),n(e+"error",{...o()}))};return{start(){n(e+"start")},onabort(){r({abort:!0}),n(e+"abort",{...o()})},ontaskstart(t,i){s()||(r({index:t,task:i,taskProgress:void 0,taskLengthComputable:void 0}),n(e+"taskstart",{...o()}))},ontaskprogress(t,i,a){s()||(r({index:t,task:i,taskProgress:a.loaded/a.total,taskLengthComputable:a.lengthComputable}),n(e+"taskprogress",{...o()}),n(e+"progress",{...o()}))},ontaskend(t,i){s()||(r({index:t,task:i}),n(e+"taskend",{...o()}))},ontaskerror(t){a(t)},error(t){a(t)},beforeComplete(t){s()||(r({beforeComplete:!0}),n("before"+e,t))},complete(t){s()||(r({complete:!0}),n(e,t))}}};return Yr(i,{read:(e,{reader:n})=>{if(!n)return;Object.assign(i,{file:void 0,size:void 0,loadState:void 0});let o={cancel:f},s=!1;const a=r("loadState","load"),l={token:o,...a},c={src:e,size:void 0,dest:void 0},h={};return Promise.resolve().then((async()=>{try{if(a.start(),s)return a.onabort();const e=await ls(c,n,h,l);if(s)return a.onabort();const{size:r,dest:u}=e||{};if(!r||!r.width||!r.height)throw new Ee("Image size missing","IMAGE_SIZE_MISSING",e);if(r.width<t.width||r.height<t.height)throw new Ee("Image too small","IMAGE_TOO_SMALL",{...e,minWidth:t.width,minHeight:t.height});Object.assign(i,{size:r,file:u}),a.beforeComplete(e),a.complete(e)}catch(t){a.error(t)}finally{o=void 0}})),()=>{s=!0,o&&o.cancel(),a.onabort()}},write:(t,e)=>{if(!i.loadState.complete)return;i.processState=void 0;const n=r("processState","process"),o={src:i.file,imageState:i.state,dest:void 0};if(!t)return n.start(),void n.complete(o);let s={cancel:f},a=!1;const l=e,c={token:s,...n};return Promise.resolve().then((async()=>{try{if(n.start(),a)return n.onabort();const e=await ls(o,t,l,c);n.complete(e)}catch(t){n.error(t)}finally{s=void 0}})),()=>{a=!0,s&&s.cancel()}},on:o}),{accessors:i,stores:e}})({minSize:d}),cs.map((t=>{return s.accessors.on(t,(e=t,t=>o(e,t)));var e}));const m=()=>{a={},g.forEach((t=>t()))},g=[];g.push(s.accessors.on("loaderror",(t=>{m(),r(t)}))),g.push(s.accessors.on("loadabort",(()=>{m(),r({name:"AbortError"})}))),g.push(s.accessors.on("load",(t=>{p=void 0,m(),n(t)}))),g.push(s.accessors.on("beforeload",(()=>((t,e)=>{if(ps(e))return void(i.imageState=e);if(!e.imageCrop){const i=t.accessors.size,n=e.imageRotation||0,o=Bt(Pt(xt(i),n)),r=e.imageCropAspectRatio||(e.imageCropLimitToImage?Kt(i):Kt(o)),s=oe(o,r);e.imageCropLimitToImage||(s.x=(i.width-s.width)/2,s.y=(i.height-s.height)/2),e.imageCrop=s}const n=["imageCropLimitToImage","imageCrop","imageCropAspectRatio","imageRotation"];n.filter((t=>Je(e,t))).forEach((t=>{i[t]=e[t],delete e[t]}));const o=Object.keys(e).filter((t=>!n.includes(t))).reduce(((t,i)=>(t[i]=e[i],t)),{});Object.assign(i,o)})(s,e)))),i.images=[s],e.imageReader&&(i.imageReader=e.imageReader),e.imageWriter&&(i.imageWriter=e.imageWriter),p=s.accessors.read(t,{reader:i.imageReader})}));let g;const y=()=>{const t=c();t&&(p&&p(),t.accessors.loadState=void 0,i.images=[])};return Object.defineProperty(i,"stores",{get:()=>t}),Yr(i,{on:n,loadImage:m,abortLoadImage:()=>{p&&p(),i.images=[]},editImage:(t,e)=>new Promise(((n,o)=>{m(t,e).then((()=>{const{images:t}=i,e=t[0],r=()=>{s(),a()},s=e.accessors.on("processerror",(t=>{r(),o(t)})),a=e.accessors.on("process",(t=>{r(),n(t)}))})).catch(o)})),removeImage:y,processImage:(t,n)=>new Promise(((o,s)=>{try{const a=[],l=()=>{g=void 0,a.forEach((t=>t()))};(async()=>{(t=>e(t)||r(t)||ge(t))(t)?await m(t,n):t&&(ps(t)?i.imageState=t:Object.assign(i,t));const h=c();if(!h)return s("no image");a.push(h.accessors.on("processerror",(t=>{l(),s(t)}))),a.push(h.accessors.on("processabort",(()=>{l(),s({name:"AbortError"})}))),a.push(h.accessors.on("process",(t=>{l(),o(t)}))),g=h.accessors.write(i.imageWriter,{shapePreprocessor:i.shapePreprocessor||Y,imageScrambler:i.imageScrambler,willRequestResource:i.willRequestResource})})()}catch(t){s(t)}})),abortProcessImage:()=>{const t=c();t&&(g&&g(),t.accessors.processState=void 0)},destroy:()=>{h(),u()}}),i},ms=()=>{if(!ke())return 1/0;const t=/15_/.test(navigator.userAgent);return Oe()?t?14745600:16777216:t?16777216:1/0},gs=(t,e)=>Object.keys(t).filter((t=>!e.includes(t))).reduce(((e,i)=>(e[i]=t[i],e)),{});const ys=({imageDataResizer:t,canvasMemoryLimit:e}={})=>async(i,n,o,r)=>{o.width=Math.max(o.width,1),o.height=Math.max(o.height,1),r.width=Math.max(r.width,1),r.height=Math.max(r.height,1);const{dest:s}=await((t,e)=>{const{processImage:i}=fs();return i(t,e)})(n,{imageReader:js(),imageWriter:Ys({format:"canvas",targetSize:{...r,upscale:!0},imageDataResizer:t,canvasMemoryLimit:e}),imageCrop:o});i.drawImage(s,r.x,r.y,r.width,r.height),w(s)},vs=(t,e=((...t)=>t),i)=>async(n,o,r)=>{r(Te(0,!1));let s=!1;const a=await t(...e(n,o,(t=>{s=!0,r(t)})));return i&&i(n,a),s||r(Te(1,!1)),n},bs=({srcProp:t="src",destProp:e="dest"}={})=>[vs(Ie,((e,i,n)=>[e[t],n]),((t,i)=>t[e]=i)),"any-to-file"],xs=({srcProp:t="src",destProp:e="size"}={})=>[vs(Ce,(e=>[e[t]]),((t,i)=>t[e]=i)),"read-image-size"],$s=({srcSize:t="size",srcOrientation:e="orientation",destSize:i="size"}={})=>[vs(ze,(i=>[i[t],i[e]]),((t,e)=>t[i]=e)),"image-size-match-orientation"],ws=({srcProp:t="src",destProp:e="head"}={})=>[vs(((t,e)=>Fe(t)?g(t,e):void 0),(e=>[e[t],[0,131072],onprogress]),((t,i)=>t[e]=i)),"read-image-head"],_s=({srcProp:t="head",destProp:e="orientation"}={})=>[vs(u,(e=>[e[t],274]),((t,i=1)=>t[e]=i)),"read-exif-orientation-tag"],ks=({srcProp:t="head"}={})=>[vs(u,(e=>[e[t],274,1])),"clear-exif-orientation-tag"],Ss=({srcImageSize:t="size",srcCanvasSize:e="imageData",srcImageState:i="imageState",destImageSize:n="size",destScalar:o="scalar"}={})=>[vs(((t,e)=>[Math.min(e.width/t.width,e.height/t.height),$t(e)]),(n=>[n[t],n[e],n[i]]),((t,[e,i])=>{t[o]=e,t[n]=i})),"calculate-canvas-scalar"],Cs=({srcProp:t="src",destProp:e="imageData",canvasMemoryLimit:i})=>[vs(L,(e=>[e[t],i]),((t,i)=>t[e]=i)),"blob-to-image-data"],Ts=({srcImageData:t="imageData",srcOrientation:e="orientation"}={})=>[vs(S,(i=>[i[t],i[e]]),((t,e)=>t.imageData=e)),"image-data-match-orientation"],Ms=({srcImageData:t="imageData",srcImageState:e="imageState"}={})=>[vs(Vn,(i=>[i[t],{backgroundColor:i[e].backgroundColor}]),((t,e)=>t.imageData=e)),"image-data-fill"],Ps=({srcImageData:t="imageData",srcImageState:e="imageState",destScalar:i="scalar"}={})=>[vs(He,(n=>{const o=n[i];let{crop:r}=n[e];return r&&1!==o&&(r=qt(zt(r),o,K())),[n[t],{crop:r,rotation:n[e].rotation,flipX:n[e].flipX,flipY:n[e].flipY}]}),((t,e)=>t.imageData=e)),"image-data-crop"],Es=({targetSize:t={width:void 0,height:void 0,fit:void 0,upscale:void 0},imageDataResizer:e,srcProp:i="imageData",srcImageState:n="imageState",destImageScaledSize:o="imageScaledSize"})=>[vs(Ye,(o=>{const r=Math.min(t.width||Number.MAX_SAFE_INTEGER,o[n].targetSize&&o[n].targetSize.width||Number.MAX_SAFE_INTEGER),s=Math.min(t.height||Number.MAX_SAFE_INTEGER,o[n].targetSize&&o[n].targetSize.height||Number.MAX_SAFE_INTEGER);return[o[i],{width:r,height:s,fit:t.fit||"contain",upscale:(a=o[n],!!(a.targetSize&&a.targetSize.width||a.targetSize&&a.targetSize.height)||t.upscale||!1)},e];var a}),((t,e)=>{Ct(t.imageData,e)||(t[o]=$t(e)),t.imageData=e})),"image-data-resize"],Is=({srcImageData:t="imageData",srcImageState:e="imageState",destImageData:i="imageData"}={})=>[vs(Ze,(i=>{const{colorMatrix:n}=i[e],o=n&&Object.keys(n).map((t=>n[t])).filter(Boolean);return[i[t],{colorMatrix:o&&Un(o),convolutionMatrix:i[e].convolutionMatrix,gamma:i[e].gamma,noise:i[e].noise,vignette:i[e].vignette}]}),((t,e)=>t[i]=e)),"image-data-filter"],As=({srcImageData:e="imageData",srcImageState:i="imageState",destImageData:n="imageData",destScalar:o="scalar"}={})=>[vs((async(e,i,n,o,r)=>{if(!i)return e;let s;try{const t={dataSizeScalar:qn(e,o)};n&&n[3]>0&&(t.backgroundColor=[...n]),s=await i(e,t)}catch(t){}const a=t("canvas");a.width=e.width,a.height=e.height;const l=a.getContext("2d");l.putImageData(e,0,0);const c=new Path2D;o.forEach((t=>{const e=Yt(t.x,t.y,t.width,t.height);Xt(e,r);const i=te(zt(e),t.rotation),n=new Path2D;i.forEach(((t,e)=>{if(0===e)return n.moveTo(t.x,t.y);n.lineTo(t.x,t.y)})),c.addPath(n)})),l.clip(c,"nonzero"),l.imageSmoothingEnabled=!1,l.drawImage(s,0,0,a.width,a.height),w(s);const h=l.getImageData(0,0,a.width,a.height);return w(a),h}),((t,{imageScrambler:n})=>[t[e],n,t[i].backgroundColor,t[i].redaction,t[o]]),((t,e)=>t[n]=e)),"image-data-redact"],Ds=({srcImageData:t="imageData",srcSize:e="size",srcImageState:i="imageState",destImageData:n="imageData",destImageScaledSize:o="imageScaledSize",destScalar:r="scalar",imageDataResizer:s,canvasMemoryLimit:a}={})=>[vs(Yn,((n,{shapePreprocessor:l,willRequestResource:c})=>{const{annotation:h}=n[i];if(!h.length)return[n[t]];const u=n[r],{crop:d}=n[i],p=n[e];let f=u;const m=n[o];m&&(f=Math.min(m.width/d.width,m.height/d.height));const g={width:p.width/u,height:p.height/u};return[n[t],{shapes:h,computeShape:t=>(t=vn(t,g),t=gs(t,["left","right","top","bottom"]),Cn(t,f)),transform:t=>{const s=n[e],{rotation:a=0,flipX:l,flipY:c}=n[i],h=n[r],{crop:u=Bt(s)}=n[i],d=n[o],p=d?Math.min(d.width/u.width,d.height/u.height):1,f={width:s.width/h*p,height:s.height/h*p},m=((t,e)=>{const i=Bt(t),n=Vt(i),o=te(i,e,n);return ce(Ht(o))})(f,a),g=m.width,y=m.height,v=.5*f.width-.5*g,b=.5*f.height-.5*y,x=Mt(f);t.translate(-v,-b),t.translate(-u.x*p,-u.y*p),t.translate(x.x,x.y),t.rotate(a),t.translate(-x.x,-x.y),t.scale(l?-1:1,c?-1:1),t.translate(l?-f.width:0,c?-f.height:0),t.rect(0,0,f.width,f.height),t.clip()},drawImage:ys({imageDataResizer:s,canvasMemoryLimit:a}),preprocessShape:t=>l(t,{isPreview:!1}),canvasMemoryLimit:a,willRequestResource:c}]}),((t,e)=>t[n]=e)),"image-data-annotate"],Rs=({srcImageData:t="imageData",srcImageState:e="imageState",destImageData:i="imageData",destImageScaledSize:n="imageScaledSize",imageDataResizer:o,canvasMemoryLimit:r,destScalar:s="scalar"}={})=>[vs(Yn,((i,{shapePreprocessor:a,willRequestResource:l})=>{const{decoration:c}=i[e];if(!c.length)return[i[t]];let h=i[s];const{crop:u}=i[e],d=i[n];if(d){const t=Math.min(d.width/u.width,d.height/u.height);h=t}return[i[t],{shapes:c,drawImage:ys({imageDataResizer:o,canvasMemoryLimit:r}),computeShape:t=>(t=vn(t,u),t=gs(t,["left","right","top","bottom"]),Cn(t,h)),preprocessShape:t=>a(t,{isPreview:!1}),canvasMemoryLimit:r,willRequestResource:l}]}),((t,e)=>t[i]=e)),"image-data-decorate"],Ls=({srcImageData:t="imageData",srcImageState:e="imageState",destImageData:i="imageData",destImageScaledSize:n="imageScaledSize",imageDataResizer:o,canvasMemoryLimit:r,destScalar:s="scalar"}={})=>[vs(Yn,((i,{shapePreprocessor:a,willRequestResource:l})=>{const c=i[e].frame;if(!c)return[i[t]];const h=i[s];let{crop:u}=i[e];u&&1!==h&&(u=qt(zt(u),h,K()));const d={...u},p=_n(kn(c,d,a),d);d.x=Math.abs(p.left),d.y=Math.abs(p.top),d.width+=Math.abs(p.left)+Math.abs(p.right),d.height+=Math.abs(p.top)+Math.abs(p.bottom);const f=i[n],m=f?Math.min(f.width/u.width,f.height/u.height):1;return Xt(d,m),d.x=Math.floor(d.x),d.y=Math.floor(d.y),d.width=Math.floor(d.width),d.height=Math.floor(d.height),[i[t],{shapes:[c],contextBounds:d,computeShape:e=>vn(e,i[t]),transform:t=>{t.translate(d.x,d.y)},drawImage:ys({imageDataResizer:o,canvasMemoryLimit:r}),preprocessShape:t=>a(t,{isPreview:!1}),canvasMemoryLimit:r,willRequestResource:l}]}),((t,e)=>t[i]=e)),"image-data-frame"],Os=({mimeType:t,quality:e,srcImageData:i="imageData",srcFile:n="src",destBlob:o="blob"}={})=>[vs(z,(o=>[o[i],t||H(o[n].name)||o[n].type,e]),((t,e)=>t[o]=e)),"image-data-to-blob"],zs=({srcImageData:t="imageData",srcOrientation:e="orientation",destCanvas:i="dest"}={})=>[vs(k,(i=>[i[t],i[e]]),((t,e)=>t[i]=e)),"image-data-to-canvas"],Fs=async(t,e)=>{if(!Fe(t)||!e)return t;const i=new DataView(e),n=h(i);if(!n||!n.exif)return t;const{exif:o}=n;return((t,e,i=[0,t.size])=>e?new Blob([e,t.slice(...i)],{type:t.type}):t)(t,e.slice(0,o.offset+o.size+2),[20])},Bs=(t="blob",e="head",i="blob")=>[vs(Fs,(i=>[i[t],i[e]]),((t,e)=>t[i]=e)),"blob-write-image-head"],Ns=({renameFile:t,srcBlob:e="blob",srcFile:i="src",destFile:n="dest",defaultFilename:o}={})=>[vs(W,(n=>[n[e],t?t(n[i]):n[i].name||`${o}.${F(n[e].type)}`]),((t,e)=>t[n]=e)),"blob-to-file"],Hs=({url:t="./",dataset:e=(t=>[["dest",t.dest,t.dest.name],["imageState",t.imageState]]),destStore:i="store"})=>[vs((async(e,i)=>await((t,e,i)=>new Promise(((n,o)=>{const{token:r={},beforeSend:s=f,onprogress:a=f}=i;r.cancel=()=>l.abort();const l=new XMLHttpRequest;l.upload.onprogress=a,l.onload=()=>l.status>=200&&l.status<300?n(l):o(l),l.onerror=()=>o(l),l.ontimeout=()=>o(l),l.open("POST",encodeURI(t)),s(l),l.send(e instanceof FormData?e:e.reduce(((t,e)=>(t.append(...e.map(Be)),t)),new FormData))})))(t,e,{onprogress:i})),((t,i,n)=>[e(t),n]),((t,e)=>t[i]=e)),"store"],Ws=t=>[vs((e=>t&&t.length?(Object.keys(e).forEach((i=>{t.includes(i)||delete e[i]})),e):e)),"prop-filter"],js=(t={})=>{const{orientImage:e=!0,outputProps:i=["src","dest","size"],preprocessImageFile:n}=t;return[bs(),n&&[vs(n,((t,e,i)=>[t.dest,e,i]),((t,e)=>t.dest=e)),"preprocess-image-file"],xs({srcProp:"dest"}),e&&ws({srcProp:"dest"}),e&&_s(),e&&$s(),Ws(i)].filter(Boolean)},Ys=(t={})=>{const{canvasMemoryLimit:i=ms(),orientImage:n=!0,copyImageHead:o=!0,mimeType:r,quality:s,renameFile:a,targetSize:l,imageDataResizer:c,store:h,format:u="file",outputProps:d=["src","dest","imageState","store"],preprocessImageSource:p,preprocessImageState:f,postprocessImageData:m,postprocessImageBlob:g}=t;return[p&&[vs(p,((t,e,i)=>[t.src,e,i,t.imageState]),((t,e)=>t.src=e)),"preprocess-image-source"],(n||o)&&ws(),n&&_s(),xs(),f&&[vs(f,((t,e,i)=>[t.imageState,e,i]),((t,e)=>t.imageState=e)),"preprocess-image-state"],Cs({canvasMemoryLimit:i}),n&&$s(),n&&Ts(),Ss(),As(),Ps(),Es({imageDataResizer:c,targetSize:l}),Is(),Ms(),Ds({imageDataResizer:c,canvasMemoryLimit:i}),Rs({imageDataResizer:c,canvasMemoryLimit:i}),Ls({imageDataResizer:c,canvasMemoryLimit:i}),m&&[vs(m,((t,e,i)=>[t.imageData,e,i]),((t,e)=>t.imageData=e)),"postprocess-image-data"],"file"===u?Os({mimeType:r,quality:s}):"canvas"===u?zs():[t=>(t.dest=t.imageData,t)],"file"===u&&n&&ks(),"file"===u&&o&&Bs(),g&&[vs(g,(({blob:t,imageData:e,src:i},n,o)=>[{blob:t,imageData:e,src:i},n,o]),((t,e)=>t.blob=e)),"postprocess-image-file"],"file"===u&&Ns({defaultFilename:"image",renameFile:a}),"file"===u?h&&(e(h)?Hs({url:h}):P(h)?[h,"store"]:Hs(h)):P(h)&&[h,"store"],Ws(d)].filter(Boolean)};var Vs=(t,e)=>{const{imageData:i,amount:n=1}=t,o=Math.round(2*Math.max(1,n)),r=Math.round(.5*o),s=i.width,a=i.height,l=new Uint8ClampedArray(s*a*4),c=i.data;let h,u,d,p,f,m=0,g=0,y=0;const v=s*a*4-4;for(d=0;d<a;d++)for(h=crypto.getRandomValues(new Uint8ClampedArray(a)),u=0;u<s;u++)p=h[d]/255,g=0,y=0,p<.5&&(g=4*(-r+Math.round(Math.random()*o))),p>.5&&(y=(-r+Math.round(Math.random()*o))*(4*s)),f=Math.min(Math.max(0,m+g+y),v),l[m]=c[f],l[m+1]=c[f+1],l[m+2]=c[f+2],l[m+3]=c[f+3],m+=4;e(null,{data:l,width:i.width,height:i.height})};const Us=[.0625,.125,.0625,.125,.25,.125,.0625,.125,.0625];function qs(t){return Math.sqrt(1- --t*t)}function Xs(t){return"[object Date]"===Object.prototype.toString.call(t)}function Gs(t,e){if(t===e||t!=t)return()=>t;const i=typeof t;if(i!==typeof e||Array.isArray(t)!==Array.isArray(e))throw new Error("Cannot interpolate values of different type");if(Array.isArray(t)){const i=e.map(((e,i)=>Gs(t[i],e)));return t=>i.map((e=>e(t)))}if("object"===i){if(!t||!e)throw new Error("Object cannot be null");if(Xs(t)&&Xs(e)){t=t.getTime();const i=(e=e.getTime())-t;return e=>new Date(t+e*i)}const i=Object.keys(e),n={};return i.forEach((i=>{n[i]=Gs(t[i],e[i])})),t=>{const e={};return i.forEach((i=>{e[i]=n[i](t)})),e}}if("number"===i){const i=e-t;return e=>t+e*i}throw new Error(`Cannot interpolate ${i} values`)}function Zs(t,e={}){const i=Dr(t);let n,o=t;function r(r,s){if(null==t)return i.set(t=r),Promise.resolve();o=r;let a=n,l=!1,{delay:c=0,duration:h=400,easing:u=Gn,interpolate:d=Gs}=Zn(Zn({},e),s);if(0===h)return a&&(a.abort(),a=null),i.set(t=o),Promise.resolve();const p=fo()+c;let f;return n=vo((e=>{if(e<p)return!0;l||(f=d(t,r),"function"==typeof h&&(h=h(t,r)),l=!0),a&&(a.abort(),a=null);const n=e-p;return n>h?(i.set(t=r),!1):(i.set(t=f(u(n/h))),!0)})),n.promise}return{set:r,update:(e,i)=>r(e(o,t),i),subscribe:i.subscribe}}function Ks(t,e,i,n){if("number"==typeof i){const o=n-i,r=(i-e)/(t.dt||1/60),s=(r+(t.opts.stiffness*o-t.opts.damping*r)*t.inv_mass)*t.dt;return Math.abs(s)<t.opts.precision&&Math.abs(o)<t.opts.precision?n:(t.settled=!1,i+s)}if(ti(i))return i.map(((o,r)=>Ks(t,e[r],i[r],n[r])));if("object"==typeof i){const o={};for(const r in i)o[r]=Ks(t,e[r],i[r],n[r]);return o}throw new Error(`Cannot spring ${typeof i} values`)}function Qs(t,e={}){const i=Dr(t),{stiffness:n=.15,damping:o=.8,precision:r=.01}=e;let s,a,l,c=t,h=t,u=1,d=0,p=!1;function f(e,n={}){h=e;const o=l={};if(null==t||n.hard||m.stiffness>=1&&m.damping>=1)return p=!0,s=null,c=e,i.set(t=h),Promise.resolve();if(n.soft){const t=!0===n.soft?.5:+n.soft;d=1/(60*t),u=0}if(!a){s=null,p=!1;const e={inv_mass:void 0,opts:m,settled:!0,dt:void 0};a=vo((n=>{if(null===s&&(s=n),p)return p=!1,a=null,!1;u=Math.min(u+d,1),e.inv_mass=u,e.opts=m,e.settled=!0,e.dt=60*(n-s)/1e3;const o=Ks(e,c,t,h);return s=n,c=t,i.set(t=o),e.settled&&(a=null),!e.settled}))}return new Promise((t=>{a.promise.then((()=>{o===l&&t()}))}))}const m={set:f,update:(e,i)=>f(e(h,t),i),subscribe:i.subscribe,stiffness:n,damping:o,precision:r};return m}var Js=Ar(!1,(t=>{const e=window.matchMedia("(prefers-reduced-motion:reduce)");t(e.matches),e.onchange=()=>t(e.matches)}));const ta=Ft(),ea=(t,e,i,n,o)=>{t.rect||(t.rect=Ft());const r=t.rect;Qt(ta,e,i,n,o),Zt(r,ta)||(Jt(r,ta),t.dispatchEvent(new CustomEvent("measure",{detail:r})))},ia=Math.round,na=t=>{const e=t.getBoundingClientRect();ea(t,ia(e.x),ia(e.y),ia(e.width),ia(e.height))},oa=t=>ea(t,t.offsetLeft,t.offsetTop,t.offsetWidth,t.offsetHeight),ra=[];let sa,aa=null;function la(){ra.length?(ra.forEach((t=>t.measure(t))),aa=requestAnimationFrame(la)):aa=null}let ca=0;var ha=(t,e={})=>{const{observePosition:i=!1,observeViewRect:n=!1,once:o=!1,disabled:r=!1}=e;if(!r)return!("ResizeObserver"in window)||i||n?(t.measure=n?na:oa,ra.push(t),aa||(aa=requestAnimationFrame(la)),t.measure(t),{destroy(){const e=ra.indexOf(t);ra.splice(e,1),delete t.measure}}):(sa||(sa=new ResizeObserver((t=>{t.forEach((t=>oa(t.target)))}))),sa.observe(t),oa(t),o?sa.unobserve(t):ca++,{destroy(){o||(sa.unobserve(t),ca--,0===ca&&(sa.disconnect(),sa=void 0))}})},ua=t=>{let e=!1;const i={pointerdown:()=>{e=!1},keydown:()=>{e=!0},keyup:()=>{e=!1},focus:t=>{e&&(t.target.dataset.focusVisible="")},blur:t=>{delete t.target.dataset.focusVisible}};return Object.keys(i).forEach((e=>t.addEventListener(e,i[e],!0))),{destroy(){Object.keys(i).forEach((e=>t.removeEventListener(e,i[e],!0)))}}};let da=null;var pa=()=>{if(null===da)if("WebGL2RenderingContext"in window){let e;try{e=t("canvas"),da=!!e.getContext("webgl2")}catch(t){da=!1}e&&w(e),e=void 0}else da=!1;return da},fa=(t,e)=>pa()?t.getContext("webgl2",e):t.getContext("webgl",e)||t.getContext("experimental-webgl",e);let ma=null;var ga=()=>{if(null===ma)if(n()){const e=t("canvas");ma=!fa(e,{failIfMajorPerformanceCaveat:!0}),w(e)}else ma=!1;return ma},ya=t=>0==(t&t-1),va=(t,e={},i="",n="")=>Object.keys(e).filter((t=>!C(e[t]))).reduce(((t,o)=>t.replace(new RegExp(i+o+n),e[o])),t);const ba={head:"#version 300 es\n\nin vec4 aPosition;uniform mat4 uMatrix;",text:"\nin vec2 aTexCoord;out vec2 vTexCoord;",matrix:"\ngl_Position=uMatrix*vec4(aPosition.x,aPosition.y,0,1);"},xa={head:"#version 300 es\nprecision highp float;\n\nout vec4 fragColor;",mask:"\nuniform float uMaskFeather[8];uniform float uMaskBounds[4];uniform float uMaskOpacity;float mask(float x,float y,float bounds[4],float opacity){return 1.0-(1.0-(smoothstep(bounds[3],bounds[3]+1.0,x)*(1.0-smoothstep(bounds[1]-1.0,bounds[1],x))*(1.0-step(bounds[0],y))*step(bounds[2],y)))*(1.0-opacity);}",init:"\nfloat a=1.0;vec4 fillColor=uColor;vec4 textureColor=texture(uTexture,vTexCoord);textureColor*=(1.0-step(1.0,vTexCoord.y))*step(0.0,vTexCoord.y)*(1.0-step(1.0,vTexCoord.x))*step(0.0,vTexCoord.x);",colorize:"\nif(uTextureColor.a!=0.0&&textureColor.a>0.0){vec3 colorFlattened=textureColor.rgb/textureColor.a;if(colorFlattened.r>=.9999&&colorFlattened.g==0.0&&colorFlattened.b>=.9999){textureColor.rgb=uTextureColor.rgb*textureColor.a;}textureColor*=uTextureColor.a;}",maskapply:"\nfloat m=mask(gl_FragCoord.x,gl_FragCoord.y,uMaskBounds,uMaskOpacity);",maskfeatherapply:"\nfloat leftFeatherOpacity=step(uMaskFeather[1],gl_FragCoord.x)*uMaskFeather[0]+((1.0-uMaskFeather[0])*smoothstep(uMaskFeather[1],uMaskFeather[3],gl_FragCoord.x));float rightFeatherOpacity=(1.0-step(uMaskFeather[7],gl_FragCoord.x))*uMaskFeather[4]+((1.0-uMaskFeather[4])*smoothstep(uMaskFeather[7],uMaskFeather[5],gl_FragCoord.x));a*=leftFeatherOpacity*rightFeatherOpacity;",edgeaa:"\nvec2 scaledPoint=vec2(vRectCoord.x*uSize.x,vRectCoord.y*uSize.y);a*=smoothstep(0.0,1.0,uSize.x-scaledPoint.x);a*=smoothstep(0.0,1.0,uSize.y-scaledPoint.y);a*=smoothstep(0.0,1.0,scaledPoint.x);a*=smoothstep(0.0,1.0,scaledPoint.y);",cornerradius:"\nvec2 s=(uSize-2.0)*.5;vec2 r=(vRectCoord*uSize);vec2 p=r-(uSize*.5);float cornerRadius=uCornerRadius[0];bool left=r.x<s.x;bool top=r.y<s.x;if(!left&&top){cornerRadius=uCornerRadius[1];}if(!left&&!top){cornerRadius=uCornerRadius[3];}if(left&&!top){cornerRadius=uCornerRadius[2];}a*=1.0-clamp(length(max(abs(p)-(s-cornerRadius),0.0))-cornerRadius,0.0,1.0);",fragcolor:"\nif(m<=0.0)discard;fillColor.a*=a;fillColor.rgb*=fillColor.a;fillColor.rgb*=m;fillColor.rgb+=(1.0-m)*(uCanvasColor.rgb*fillColor.a);textureColor*=uTextureOpacity;textureColor.a*=a;textureColor.rgb*=m*a;textureColor.rgb+=(1.0-m)*(uCanvasColor.rgb*textureColor.a);fragColor=textureColor+(fillColor*(1.0-textureColor.a));"},$a=(t,e,i)=>{const n=t.createShader(i),o=((t,e,i)=>(e=va(e,i===t.VERTEX_SHADER?ba:xa,"##").trim(),pa()?e:(e=(e=e.replace(/#version.+/gm,"").trim()).replace(/^\/\/\#/gm,"#"),i===t.VERTEX_SHADER&&(e=e.replace(/in /gm,"attribute ").replace(/out /g,"varying ")),i===t.FRAGMENT_SHADER&&(e=e.replace(/in /gm,"varying ").replace(/out.*?;/gm,"").replace(/texture\(/g,"texture2D(").replace(/fragColor/g,"gl_FragColor")),""+e)))(t,e,i);return t.shaderSource(n,o),t.compileShader(n),t.getShaderParameter(n,t.COMPILE_STATUS)||console.error(t.getShaderInfoLog(n)),n},wa=(t,e,i,n,o)=>{const r=$a(t,e,t.VERTEX_SHADER),s=$a(t,i,t.FRAGMENT_SHADER),a=t.createProgram();t.attachShader(a,r),t.attachShader(a,s),t.linkProgram(a);const l={};return n.forEach((e=>{l[e]=t.getAttribLocation(a,e)})),o.forEach((e=>{l[e]=t.getUniformLocation(a,e)})),{program:a,locations:l,destroy(){t.detachShader(a,r),t.detachShader(a,s),t.deleteShader(r),t.deleteShader(s),t.deleteProgram(a)}}},_a=t=>!!pa()||ya(t.width)&&ya(t.height),ka=(t,e=1)=>t?[t[0],t[1],t[2],Ke(t[3])?e*t[3]:e]:[0,0,0,0],Sa=()=>{const t=new Float32Array(16);return t[0]=1,t[5]=1,t[10]=1,t[15]=1,t},Ca=(t,e,i,n,o,r,s)=>{const a=1/(e-i),l=1/(n-o),c=1/(r-s);t[0]=-2*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(e+i)*a,t[13]=(o+n)*l,t[14]=(s+r)*c,t[15]=1},Ta=(t,e,i,n)=>{t[12]=t[0]*e+t[4]*i+t[8]*n+t[12],t[13]=t[1]*e+t[5]*i+t[9]*n+t[13],t[14]=t[2]*e+t[6]*i+t[10]*n+t[14],t[15]=t[3]*e+t[7]*i+t[11]*n+t[15]},Ma=(t,e)=>{t[0]*=e,t[1]*=e,t[2]*=e,t[3]*=e,t[4]*=e,t[5]*=e,t[6]*=e,t[7]*=e,t[8]*=e,t[9]*=e,t[10]*=e,t[11]*=e},Pa=(t,e)=>{const i=Math.sin(e),n=Math.cos(e),o=t[4],r=t[5],s=t[6],a=t[7],l=t[8],c=t[9],h=t[10],u=t[11];t[4]=o*n+l*i,t[5]=r*n+c*i,t[6]=s*n+h*i,t[7]=a*n+u*i,t[8]=l*n-o*i,t[9]=c*n-r*i,t[10]=h*n-s*i,t[11]=u*n-a*i},Ea=(t,e)=>{const i=Math.sin(e),n=Math.cos(e),o=t[0],r=t[1],s=t[2],a=t[3],l=t[8],c=t[9],h=t[10],u=t[11];t[0]=o*n-l*i,t[1]=r*n-c*i,t[2]=s*n-h*i,t[3]=a*n-u*i,t[8]=o*i+l*n,t[9]=r*i+c*n,t[10]=s*i+h*n,t[11]=a*i+u*n},Ia=(t,e)=>{const i=Math.sin(e),n=Math.cos(e),o=t[0],r=t[1],s=t[2],a=t[3],l=t[4],c=t[5],h=t[6],u=t[7];t[0]=o*n+l*i,t[1]=r*n+c*i,t[2]=s*n+h*i,t[3]=a*n+u*i,t[4]=l*n-o*i,t[5]=c*n-r*i,t[6]=h*n-s*i,t[7]=u*n-a*i},Aa=(t,e,i,n,o)=>{const r=rt(Q(n.x-i.x,n.y-i.y)),s=rt(Q(o.x-n.x,o.y-n.y)),a=rt(Q(r.x+s.x,r.y+s.y)),l=Q(-a.y,a.x),c=Q(-r.y,r.x),h=Math.min(1/dt(l,c),5);t[e]=n.x,t[e+1]=n.y,t[e+2]=l.x*h,t[e+3]=l.y*h,t[e+4]=-1,t[e+5]=n.x,t[e+6]=n.y,t[e+7]=l.x*h,t[e+8]=l.y*h,t[e+9]=1},Da=t=>{const e=new Float32Array(8);return e[0]=t[3].x,e[1]=t[3].y,e[2]=t[0].x,e[3]=t[0].y,e[4]=t[2].x,e[5]=t[2].y,e[6]=t[1].x,e[7]=t[1].y,e},Ra=(t,e=0,i,n)=>{const o=se(t),r=t.x+.5*t.width,s=t.y+.5*t.height;return(i||n)&&yt(o,i,n,r,s),0!==e&&vt(o,e,r,s),o},La=(t,e,i,n,o)=>{const r=Math.min(20,Math.max(4,Math.round(n/2)));let s=0,a=0,l=0,c=0,h=0;for(;h<r;h++)s=h/r,a=o*U+s*U,l=n*Math.cos(a),c=n*Math.sin(a),t.push(Q(e+l,i+c))};let Oa=null;var za=()=>{if(null!==Oa)return Oa;let e=t("canvas");const i=fa(e);return Oa=i?i.getParameter(i.MAX_TEXTURE_SIZE):void 0,w(e),e=void 0,Oa};let Fa=null;const Ba=new Float32Array([0,1,0,0,1,1,1,0]),Na=[0,0,0,0,1,0,0,0,0],Ha=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],Wa=[0,0,0,0],ja=[0,0,0,0],Ya=(t,e,i,n,o)=>{if(!i||!n)return Ba;const r=n.x/i.width,s=n.y/i.height;let a=t/i.width/o,l=e/i.height/o;return a-=r,l-=s,new Float32Array([-r,l,-r,-s,a,l,a,-s])};var Va=t=>{const e={width:0,height:0},i={width:0,height:0},n=za()||1024;let o,r;const s=Sa(),a=Sa();let l,c,h,u,d,p,f,m,g,y=0,v=0,b=0;const x=new Map([]),$=()=>{S.stencilOp(S.KEEP,S.KEEP,S.KEEP),S.stencilFunc(S.ALWAYS,1,255),S.stencilMask(255)},_=30*Math.PI/180,k=Math.tan(_/2),S=fa(t,{antialias:!1,alpha:!1,premultipliedAlpha:!0,stencil:!0});if(!S)return;S.getExtension("OES_standard_derivatives"),S.disable(S.DEPTH_TEST),S.enable(S.STENCIL_TEST),S.enable(S.BLEND),S.blendFunc(S.ONE,S.ONE_MINUS_SRC_ALPHA),S.pixelStorei(S.UNPACK_PREMULTIPLY_ALPHA_WEBGL,(null===Fa&&(Fa=Re(/Firefox/)),!Fa)),$();const C=S.createTexture();S.bindTexture(S.TEXTURE_2D,C),S.texImage2D(S.TEXTURE_2D,0,S.RGBA,1,1,0,S.RGBA,S.UNSIGNED_BYTE,new Uint8Array(Wa)),x.set(0,C);const T=S.createTexture();x.set(2,T);const M=S.createFramebuffer(),P=S.createTexture();x.set(1,P);const E=S.createFramebuffer(),I=wa(S,"\n##head\n##text\nvoid main(){vTexCoord=aTexCoord;gl_Position=uMatrix*aPosition;}","\n##head\nin vec2 vTexCoord;uniform sampler2D uTexture;uniform sampler2D uTextureOverlay;uniform sampler2D uTextureBlend;uniform vec2 uTextureSize;uniform float uOpacity;uniform vec4 uFillColor;uniform vec4 uOverlayColor;uniform mat4 uColorMatrix;uniform vec4 uColorOffset;uniform float uClarityKernel[9];uniform float uClarityKernelWeight;uniform float uColorGamma;uniform float uColorVignette;uniform float uMaskClip;uniform float uMaskOpacity;uniform float uMaskBounds[4];uniform float uMaskCornerRadius[4];uniform float uMaskFeather[8];vec4 applyGamma(vec4 c,float g){c.r=pow(c.r,g);c.g=pow(c.g,g);c.b=pow(c.b,g);return c;}vec4 applyColorMatrix(vec4 c,mat4 m,vec4 o){vec4 cM=(c*m)+o;cM*=cM.a;return cM;}vec4 applyConvolutionMatrix(vec4 c,float k0,float k1,float k2,float k3,float k4,float k5,float k6,float k7,float k8,float w){vec2 pixel=vec2(1)/uTextureSize;vec4 colorSum=texture(uTexture,vTexCoord-pixel)*k0+texture(uTexture,vTexCoord+pixel*vec2(0.0,-1.0))*k1+texture(uTexture,vTexCoord+pixel*vec2(1.0,-1.0))*k2+texture(uTexture,vTexCoord+pixel*vec2(-1.0,0.0))*k3+texture(uTexture,vTexCoord)*k4+texture(uTexture,vTexCoord+pixel*vec2(1.0,0.0))*k5+texture(uTexture,vTexCoord+pixel*vec2(-1.0,1.0))*k6+texture(uTexture,vTexCoord+pixel*vec2(0.0,1.0))*k7+texture(uTexture,vTexCoord+pixel)*k8;vec4 color=vec4((colorSum/w).rgb,c.a);color.rgb=clamp(color.rgb,0.0,1.0);return color;}vec4 applyVignette(vec4 c,vec2 pos,vec2 center,float v){float d=distance(pos,center)/length(center);float f=1.0-(d*abs(v));if(v>0.0){c.rgb*=f;}else if(v<0.0){c.rgb+=(1.0-f)*(1.0-c.rgb);}return c;}vec4 blendPremultipliedAlpha(vec4 back,vec4 front){return front+(back*(1.0-front.a));}void main(){float x=gl_FragCoord.x;float y=gl_FragCoord.y;float a=1.0;float maskTop=uMaskBounds[0];float maskRight=uMaskBounds[1];float maskBottom=uMaskBounds[2];float maskLeft=uMaskBounds[3];float leftFeatherOpacity=step(uMaskFeather[1],x)*uMaskFeather[0]+((1.0-uMaskFeather[0])*smoothstep(uMaskFeather[1],uMaskFeather[3],x));float rightFeatherOpacity=(1.0-step(uMaskFeather[7],x))*uMaskFeather[4]+((1.0-uMaskFeather[4])*smoothstep(uMaskFeather[7],uMaskFeather[5],x));a*=leftFeatherOpacity*rightFeatherOpacity;float overlayColorAlpha=(smoothstep(maskLeft,maskLeft+1.0,x)*(1.0-smoothstep(maskRight-1.0,maskRight,x))*(1.0-step(maskTop,y))*step(maskBottom,y));if(uOverlayColor.a==0.0){a*=overlayColorAlpha;}vec2 offset=vec2(maskLeft,maskBottom);vec2 size=vec2(maskRight-maskLeft,maskTop-maskBottom)*.5;vec2 center=offset.xy+size.xy;int pixelX=int(step(center.x,x));int pixelY=int(step(y,center.y));float cornerRadius=0.0;if(pixelX==0&&pixelY==0)cornerRadius=uMaskCornerRadius[0];if(pixelX==1&&pixelY==0)cornerRadius=uMaskCornerRadius[1];if(pixelX==0&&pixelY==1)cornerRadius=uMaskCornerRadius[2];if(pixelX==1&&pixelY==1)cornerRadius=uMaskCornerRadius[3];float cornerOffset=sign(cornerRadius)*length(max(abs(gl_FragCoord.xy-size-offset)-size+cornerRadius,0.0))-cornerRadius;float cornerOpacity=1.0-smoothstep(0.0,1.0,cornerOffset);a*=cornerOpacity;vec2 scaledPoint=vec2(vTexCoord.x*uTextureSize.x,vTexCoord.y*uTextureSize.y);a*=smoothstep(0.0,1.0,uTextureSize.x-scaledPoint.x);a*=smoothstep(0.0,1.0,uTextureSize.y-scaledPoint.y);a*=smoothstep(0.0,1.0,scaledPoint.x);a*=smoothstep(0.0,1.0,scaledPoint.y);vec4 color=texture(uTexture,vTexCoord);color=blendPremultipliedAlpha(color,texture(uTextureBlend,vTexCoord));if(uClarityKernelWeight!=-1.0){color=applyConvolutionMatrix(color,uClarityKernel[0],uClarityKernel[1],uClarityKernel[2],uClarityKernel[3],uClarityKernel[4],uClarityKernel[5],uClarityKernel[6],uClarityKernel[7],uClarityKernel[8],uClarityKernelWeight);}color=applyGamma(color,uColorGamma);color=applyColorMatrix(color,uColorMatrix,uColorOffset);color=blendPremultipliedAlpha(uFillColor,color);color*=a;if(uColorVignette!=0.0){vec2 pos=gl_FragCoord.xy-offset;color=applyVignette(color,pos,center-offset,uColorVignette);}color=blendPremultipliedAlpha(color,texture(uTextureOverlay,vTexCoord));vec4 overlayColor=uOverlayColor*(1.0-overlayColorAlpha);overlayColor.rgb*=overlayColor.a;color=blendPremultipliedAlpha(color,overlayColor);if(uOverlayColor.a>0.0&&color.a<1.0&&uFillColor.a>0.0){color=blendPremultipliedAlpha(uFillColor,overlayColor);}color*=uOpacity;fragColor=color;}",["aPosition","aTexCoord"],["uMatrix","uTexture","uTextureBlend","uTextureOverlay","uTextureSize","uColorGamma","uColorVignette","uColorOffset","uColorMatrix","uClarityKernel","uClarityKernelWeight","uOpacity","uMaskOpacity","uMaskBounds","uMaskCornerRadius","uMaskFeather","uFillColor","uOverlayColor"]),A=S.createBuffer(),D=S.createBuffer();S.bindBuffer(S.ARRAY_BUFFER,D),S.bufferData(S.ARRAY_BUFFER,Ba,S.STATIC_DRAW);const R=wa(S,"#version 300 es\n\nin vec4 aPosition;in vec2 aNormal;in float aMiter;out vec2 vNormal;out float vMiter;out float vWidth;uniform float uWidth;uniform mat4 uMatrix;void main(){vMiter=aMiter;vNormal=aNormal;vWidth=(uWidth*.5)+1.0;gl_Position=uMatrix*vec4(aPosition.x+(aNormal.x*vWidth*aMiter),aPosition.y+(aNormal.y*vWidth*aMiter),0,1);}","\n##head\n##mask\nin vec2 vNormal;in float vMiter;in float vWidth;uniform float uWidth;uniform vec4 uColor;uniform vec4 uCanvasColor;void main(){vec4 fillColor=uColor;float m=mask(gl_FragCoord.x,gl_FragCoord.y,uMaskBounds,uMaskOpacity);if(m<=0.0)discard;fillColor.a*=clamp(smoothstep(vWidth-.5,vWidth-1.0,abs(vMiter)*vWidth),0.0,1.0);fillColor.rgb*=fillColor.a;fillColor.rgb*=m;fillColor.rgb+=(1.0-m)*(uCanvasColor.rgb*fillColor.a);fragColor=fillColor;}",["aPosition","aNormal","aMiter"],["uColor","uCanvasColor","uMatrix","uWidth","uMaskBounds","uMaskOpacity"]),L=S.createBuffer(),O=(t,e,i,n=!1)=>{const{program:o,locations:r}=R;S.useProgram(o),S.enableVertexAttribArray(r.aPosition),S.enableVertexAttribArray(r.aNormal),S.enableVertexAttribArray(r.aMiter);const s=((t,e)=>{let i,n,o,r=0;const s=t.length,a=new Float32Array(10*(e?s+1:s)),l=t[0],c=t[s-1];for(r=0;r<s;r++)i=t[r-1],n=t[r],o=t[r+1],i||(i=e?c:Q(n.x+(n.x-o.x),n.y+(n.y-o.y))),o||(o=e?l:Q(n.x+(n.x-i.x),n.y+(n.y-i.y))),Aa(a,10*r,i,n,o);return e&&Aa(a,10*s,c,l,t[1]),a})(t,n),a=5*Float32Array.BYTES_PER_ELEMENT,c=2*Float32Array.BYTES_PER_ELEMENT,h=4*Float32Array.BYTES_PER_ELEMENT;S.uniform1f(r.uWidth,e),S.uniform4fv(r.uColor,i),S.uniformMatrix4fv(r.uMatrix,!1,l),S.uniform4f(r.uCanvasColor,y,v,b,1),S.uniform1fv(r.uMaskBounds,f),S.uniform1f(r.uMaskOpacity,p),S.bindBuffer(S.ARRAY_BUFFER,L),S.bufferData(S.ARRAY_BUFFER,s,S.STATIC_DRAW),S.vertexAttribPointer(r.aPosition,2,S.FLOAT,!1,a,0),S.vertexAttribPointer(r.aNormal,2,S.FLOAT,!1,a,c),S.vertexAttribPointer(r.aMiter,1,S.FLOAT,!1,a,h),S.drawArrays(S.TRIANGLE_STRIP,0,s.length/5),S.disableVertexAttribArray(r.aPosition),S.disableVertexAttribArray(r.aNormal),S.disableVertexAttribArray(r.aMiter)},z=wa(S,"\n##head\nvoid main(){\n##matrix\n}","\n##head\n##mask\nuniform vec4 uColor;uniform vec4 uCanvasColor;void main(){vec4 fillColor=uColor;\n##maskapply\nfillColor.rgb*=fillColor.a;fillColor.rgb*=m;fillColor.rgb+=(1.0-m)*(uCanvasColor.rgb*fillColor.a);fragColor=fillColor;}",["aPosition"],["uColor","uCanvasColor","uMatrix","uMaskBounds","uMaskOpacity"]),F=S.createBuffer(),B=wa(S,"\n##head\n##text\nin vec2 aRectCoord;out vec2 vRectCoord;void main(){vTexCoord=aTexCoord;vRectCoord=aRectCoord;\n##matrix\n}","\n##head\n##mask\nin vec2 vTexCoord;in vec2 vRectCoord;uniform sampler2D uTexture;uniform vec4 uTextureColor;uniform float uTextureOpacity;uniform vec4 uColor;uniform float uCornerRadius[4];uniform vec2 uSize;uniform vec2 uPosition;uniform vec4 uCanvasColor;uniform int uInverted;void main(){\n##init\n##colorize\n##edgeaa\n##cornerradius\n##maskfeatherapply\nif(uInverted==1)a=1.0-a;\n##maskapply\n##fragcolor\n}",["aPosition","aTexCoord","aRectCoord"],["uTexture","uColor","uMatrix","uCanvasColor","uTextureColor","uTextureOpacity","uPosition","uSize","uMaskBounds","uMaskOpacity","uMaskFeather","uCornerRadius","uInverted"]),N=S.createBuffer(),H=S.createBuffer(),W=S.createBuffer(),Y=wa(S,"\n##head\n##text\nout vec2 vTexCoordDouble;void main(){vTexCoordDouble=vec2(aTexCoord.x*2.0-1.0,aTexCoord.y*2.0-1.0);vTexCoord=aTexCoord;\n##matrix\n}","\n##head\n##mask\nin vec2 vTexCoord;in vec2 vTexCoordDouble;uniform sampler2D uTexture;uniform float uTextureOpacity;uniform vec2 uRadius;uniform vec4 uColor;uniform int uInverted;uniform vec4 uCanvasColor;void main(){\n##init\nfloat ar=uRadius.x/uRadius.y;vec2 rAA=vec2(uRadius.x-1.0,uRadius.y-(1.0/ar));vec2 scaledPointSq=vec2((vTexCoordDouble.x*uRadius.x)*(vTexCoordDouble.x*uRadius.x),(vTexCoordDouble.y*uRadius.y)*(vTexCoordDouble.y*uRadius.y));float p=(scaledPointSq.x/(uRadius.x*uRadius.x))+(scaledPointSq.y/(uRadius.y*uRadius.y));float pAA=(scaledPointSq.x/(rAA.x*rAA.x))+(scaledPointSq.y/(rAA.y*rAA.y));a=smoothstep(1.0,p/pAA,p);if(uInverted==1)a=1.0-a;\n##maskapply\n##fragcolor\n}",["aPosition","aTexCoord"],["uTexture","uTextureOpacity","uColor","uCanvasColor","uMatrix","uRadius","uInverted","uMaskBounds","uMaskOpacity"]),V=S.createBuffer(),U=S.createBuffer(),q=new Map,X={2:{width:0,height:0},1:{width:0,height:0}},G=(t,i,o,s=1)=>{const c=Math.min(Math.min(4096,n)/o.width,Math.min(4096,n)/o.height,s),h=Math.floor(c*o.width),u=Math.floor(c*o.height);Ct(o,X[t])?S.bindFramebuffer(S.FRAMEBUFFER,i):(S.bindTexture(S.TEXTURE_2D,x.get(t)),S.texImage2D(S.TEXTURE_2D,0,S.RGBA,h,u,0,S.RGBA,S.UNSIGNED_BYTE,null),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_MIN_FILTER,S.LINEAR),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_WRAP_S,S.CLAMP_TO_EDGE),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_WRAP_T,S.CLAMP_TO_EDGE),S.bindFramebuffer(S.FRAMEBUFFER,i),S.framebufferTexture2D(S.FRAMEBUFFER,S.COLOR_ATTACHMENT0,S.TEXTURE_2D,x.get(t),0),X[t]=o);const d=o.width*r,p=o.height*r;var f;Ca(a,0,d,p,0,-1,1),Ta(a,0,p,0),(f=a)[0]*=1,f[1]*=1,f[2]*=1,f[3]*=1,((t,e)=>{t[4]*=-1,t[5]*=-1,t[6]*=-1,t[7]*=-1})(a),l=a,S.viewport(0,0,h,u),S.colorMask(!0,!0,!0,!0),S.clearColor(0,0,0,0),S.clear(S.COLOR_BUFFER_BIT),g=[1,0,1,0,1,Math.max(e.width,o.width),1,Math.max(e.width,o.width)]},Z=(t,e=!1)=>{const{src:i}=q.get(t);i instanceof HTMLCanvasElement&&(e||i.dataset.retain||w(i)),q.delete(t),S.deleteTexture(t)};return{drawPath:(t,e,i,n,o)=>{t.length<2||O(t.map((t=>({x:t.x*r,y:t.y*r}))),e*r,ka(i,o),n)},drawTriangle:(t,e=0,i=!1,n=!1,o,s)=>{if(!o)return;const a=t.map((t=>({x:t.x*r,y:t.y*r}))),c=he(a);(i||n)&&yt(a,i,n,c.x,c.y),vt(a,e,c.x,c.y),((t,e)=>{const{program:i,locations:n}=z;S.useProgram(i),S.enableVertexAttribArray(n.aPosition),S.uniform4fv(n.uColor,e),S.uniformMatrix4fv(n.uMatrix,!1,l),S.uniform1fv(n.uMaskBounds,f),S.uniform1f(n.uMaskOpacity,p),S.uniform4f(n.uCanvasColor,y,v,b,1),S.bindBuffer(S.ARRAY_BUFFER,F),S.bufferData(S.ARRAY_BUFFER,t,S.STATIC_DRAW),S.vertexAttribPointer(n.aPosition,2,S.FLOAT,!1,0,0),S.drawArrays(S.TRIANGLE_STRIP,0,t.length/2),S.disableVertexAttribArray(n.aPosition)})((t=>{const e=new Float32Array(6);return e[0]=t[0].x,e[1]=t[0].y,e[2]=t[1].x,e[3]=t[1].y,e[4]=t[2].x,e[5]=t[2].y,e})(a),ka(o,s))},drawRect:(t,e=0,i=!1,n=!1,o,s,a,c,h,u,d,m,x,$,w,_)=>{const k=Xt(zt(t),r),T=o.map((e=>((t,e)=>Math.floor(Qr(t,0,Math.min(.5*(e.width-1),.5*(e.height-1)))))(e||0,t))).map((t=>t*r));if(s||a){const t=zt(k);t.x-=.5,t.y-=.5,t.width+=1,t.height+=1;const o=Ra(t,e,i,n),d=Da(o);let m;w&&(m=ka(w),0===m[3]&&(m[3]=.001)),((t,e,i,n,o,s=C,a=1,c=Wa,h=Ba,u=g,d)=>{const{program:m,locations:x}=B;S.useProgram(m),S.enableVertexAttribArray(x.aPosition),S.enableVertexAttribArray(x.aTexCoord),S.enableVertexAttribArray(x.aRectCoord),S.uniform4fv(x.uColor,o),S.uniform2fv(x.uSize,[e,i]),S.uniform2fv(x.uPosition,[t[2],t[3]]),S.uniform1i(x.uInverted,d?1:0),S.uniform1fv(x.uCornerRadius,n),S.uniform4f(x.uCanvasColor,y,v,b,1),S.uniform1fv(x.uMaskFeather,u.map(((t,e)=>e%2==0?t:t*r))),S.uniform1fv(x.uMaskBounds,f),S.uniform1f(x.uMaskOpacity,p),S.uniformMatrix4fv(x.uMatrix,!1,l),S.uniform1i(x.uTexture,4),S.uniform4fv(x.uTextureColor,c),S.uniform1f(x.uTextureOpacity,a),S.activeTexture(S.TEXTURE0+4),S.bindTexture(S.TEXTURE_2D,s),S.bindBuffer(S.ARRAY_BUFFER,H),S.bufferData(S.ARRAY_BUFFER,h,S.STATIC_DRAW),S.vertexAttribPointer(x.aTexCoord,2,S.FLOAT,!1,0,0),S.bindBuffer(S.ARRAY_BUFFER,W),S.bufferData(S.ARRAY_BUFFER,Ba,S.STATIC_DRAW),S.vertexAttribPointer(x.aRectCoord,2,S.FLOAT,!1,0,0),S.bindBuffer(S.ARRAY_BUFFER,N),S.bufferData(S.ARRAY_BUFFER,t,S.STATIC_DRAW),S.vertexAttribPointer(x.aPosition,2,S.FLOAT,!1,0,0),S.drawArrays(S.TRIANGLE_STRIP,0,t.length/2),S.disableVertexAttribArray(x.aPosition),S.disableVertexAttribArray(x.aTexCoord),S.disableVertexAttribArray(x.aRectCoord)})(d,t.width,t.height,T,ka(s,x),a,x,m,u?new Float32Array(u):Ya(t.width,t.height,c,h,r),$,_)}d&&(d=Math.min(d,k.width,k.height),O(((t,e,i,n,o,r,s,a)=>{const l=[];if(r.every((t=>0===t)))l.push(Q(t,e),Q(t+i,e),Q(t+i,e+n),Q(t,e+n));else{const[o,s,a,c]=r,h=t,u=t+i,d=e,p=e+n;l.push(Q(h+o,d)),La(l,u-s,d+s,s,-1),l.push(Q(u,d+s)),La(l,u-c,p-c,c,0),l.push(Q(u-c,p)),La(l,h+a,p-a,a,1),l.push(Q(h,p-a)),La(l,h+o,d+o,o,2)}return(s||a)&&yt(l,s,a,t+.5*i,e+.5*n),o&&vt(l,o,t+.5*i,e+.5*n),l})(k.x,k.y,k.width,k.height,e,T,i,n),d*r,ka(m,x),!0))},drawEllipse:(t,e,i,n,o,s,a,c,h,u,d,m,g,x,$)=>{const w=Xt(Yt(t.x-e,t.y-i,2*e,2*i),r);if(a||c){const t=zt(w);t.x-=.5,t.y-=.5,t.width+=1,t.height+=1;const e=Ra(t,n,o,s);((t,e,i,n,o=C,r=Ba,s=1,a=!1)=>{const{program:c,locations:h}=Y;S.useProgram(c),S.enableVertexAttribArray(h.aPosition),S.enableVertexAttribArray(h.aTexCoord),S.uniformMatrix4fv(h.uMatrix,!1,l),S.uniform2fv(h.uRadius,[.5*e,.5*i]),S.uniform1i(h.uInverted,a?1:0),S.uniform4fv(h.uColor,n),S.uniform4f(h.uCanvasColor,y,v,b,1),S.uniform1fv(h.uMaskBounds,f),S.uniform1f(h.uMaskOpacity,p),S.uniform1i(h.uTexture,4),S.uniform1f(h.uTextureOpacity,s),S.activeTexture(S.TEXTURE0+4),S.bindTexture(S.TEXTURE_2D,o),S.bindBuffer(S.ARRAY_BUFFER,U),S.bufferData(S.ARRAY_BUFFER,r,S.STATIC_DRAW),S.vertexAttribPointer(h.aTexCoord,2,S.FLOAT,!1,0,0),S.bindBuffer(S.ARRAY_BUFFER,V),S.bufferData(S.ARRAY_BUFFER,t,S.STATIC_DRAW),S.vertexAttribPointer(h.aPosition,2,S.FLOAT,!1,0,0),S.drawArrays(S.TRIANGLE_STRIP,0,t.length/2),S.disableVertexAttribArray(h.aPosition),S.disableVertexAttribArray(h.aTexCoord)})(Da(e),t.width,t.height,ka(a,x),c,d?new Float32Array(d):Ya(t.width,t.height,h,u,r),x,$)}m&&O(((t,e,i,n,o,r,s)=>{const a=.5*Math.abs(i),l=.5*Math.abs(n),c=Math.abs(i)+Math.abs(n),h=Math.max(20,Math.round(c/6));return me(Q(t+a,e+l),a,l,o,r,s,h)})(w.x,w.y,w.width,w.height,n,o,s),m*r,ka(g,x),!0)},drawImage:(t,i,n,s,a,l,c,h,u,d,g=Ha,y=1,v,b=1,$=0,w=m,C=ja,T=Wa,M=Wa,P=!1,E=!1)=>{const R=i.width*r,L=i.height*r,O=-.5*R,z=.5*L,F=.5*R,B=-.5*L,N=new Float32Array([O,B,0,O,z,0,F,B,0,F,z,0]);S.bindBuffer(S.ARRAY_BUFFER,A),S.bufferData(S.ARRAY_BUFFER,N,S.STATIC_DRAW);const H=i.height/2/k*(e.height/i.height)*-1;a*=r,l*=r,n*=r,s*=r;const{program:W,locations:j}=I,Y=Sa();((t,e,i,n,o)=>{const r=1/Math.tan(e/2),s=1/(1-o);t[0]=r/i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(o+1)*s,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*o*1*s,t[15]=0})(Y,_,o,0,2*-H),Ta(Y,a,-l,H),Ta(Y,n,-s,0),Ia(Y,-u),Ma(Y,d),Ta(Y,-n,s,0),Ea(Y,h),Pa(Y,c),S.useProgram(W),S.enableVertexAttribArray(j.aPosition),S.enableVertexAttribArray(j.aTexCoord),S.uniform1i(j.uTexture,3),S.uniform2f(j.uTextureSize,i.width,i.height),S.activeTexture(S.TEXTURE0+3),S.bindTexture(S.TEXTURE_2D,t);const V=E?1:0,U=x.get(V);S.uniform1i(j.uTextureBlend,V),S.activeTexture(S.TEXTURE0+V),S.bindTexture(S.TEXTURE_2D,U);const q=P?2:0,X=x.get(q);let G;S.uniform1i(j.uTextureOverlay,q),S.activeTexture(S.TEXTURE0+q),S.bindTexture(S.TEXTURE_2D,X),S.bindBuffer(S.ARRAY_BUFFER,A),S.vertexAttribPointer(j.aPosition,3,S.FLOAT,!1,0,0),S.bindBuffer(S.ARRAY_BUFFER,D),S.vertexAttribPointer(j.aTexCoord,2,S.FLOAT,!1,0,0),S.uniformMatrix4fv(j.uMatrix,!1,Y),S.uniform4fv(j.uOverlayColor,M),S.uniform4fv(j.uFillColor,T),!v||is(v,Na)?(v=Na,G=-1):(G=v.reduce(((t,e)=>t+e),0),G=G<=0?1:G),S.uniform1fv(j.uClarityKernel,v),S.uniform1f(j.uClarityKernelWeight,G),S.uniform1f(j.uColorGamma,1/b),S.uniform1f(j.uColorVignette,$),S.uniform4f(j.uColorOffset,g[4],g[9],g[14],g[19]),S.uniformMatrix4fv(j.uColorMatrix,!1,[g[0],g[1],g[2],g[3],g[5],g[6],g[7],g[8],g[10],g[11],g[12],g[13],g[15],g[16],g[17],g[18]]),S.uniform1f(j.uOpacity,y),S.uniform1f(j.uMaskOpacity,p),S.uniform1fv(j.uMaskBounds,f),S.uniform1fv(j.uMaskCornerRadius,C.map((t=>t*r))),S.uniform1fv(j.uMaskFeather,w.map(((t,e)=>e%2==0?t:t*r))),S.drawArrays(S.TRIANGLE_STRIP,0,4),S.disableVertexAttribArray(j.aPosition),S.disableVertexAttribArray(j.aTexCoord)},textureFilterNearest:S.NEAREST,textureFilterLinear:S.LINEAR,textureCreate:()=>S.createTexture(),textureUpdate:(t,e,i)=>(q.set(t,{src:e,options:i}),((t,e,i,n)=>(t.bindTexture(t.TEXTURE_2D,e),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,i),((t,e,i)=>{t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,_a(e)?t.LINEAR_MIPMAP_LINEAR:t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,i.filter),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),_a(e)&&t.generateMipmap(t.TEXTURE_2D)})(t,i,n),t.bindTexture(t.TEXTURE_2D,null),e))(S,t,e,i)),textureGetSize:t=>{const{src:e,options:i}=q.get(t),n=$t(e);return i.scalar?It(n,(t=>t/i.scalar)):n},textureDelete:Z,enablePreviewStencil:()=>{S.stencilOp(S.KEEP,S.KEEP,S.REPLACE),S.stencilFunc(S.ALWAYS,1,255),S.stencilMask(255)},applyPreviewStencil:()=>{S.stencilFunc(S.EQUAL,1,255),S.stencilMask(0)},disablePreviewStencil:$,setCanvasColor(t){y=t[0],v=t[1],b=t[2],S.clear(S.COLOR_BUFFER_BIT)},resetCanvasMatrix:()=>{Ca(s,0,e.width,e.height,0,-1,1)},updateCanvasMatrix(t,i,n,o,a){const l=t.width,c=t.height,h=e.width*(.5/r),u=e.height*(.5/r),d={x:h+(n.x+i.x),y:u+(n.y+i.y)},p={x:d.x-i.x,y:d.y-i.y},f=.5*l,m=.5*c;nt(p,a.z,d),mt(p,o,d),Ta(s,(p.x-f)*r,(p.y-m)*r,0),Ta(s,f*r,m*r,0),Ia(s,a.z);const g=a.x>Math.PI/2;Pa(s,g?Math.PI:0);const y=a.y>Math.PI/2;Ea(s,y?Math.PI:0),Ma(s,o),Ta(s,-f*r,-m*r,0)},drawToCanvas(){S.bindFramebuffer(S.FRAMEBUFFER,null),l=s,S.viewport(0,0,S.drawingBufferWidth,S.drawingBufferHeight),S.colorMask(!0,!0,!0,!1),S.clearColor(y,v,b,1),S.clear(S.COLOR_BUFFER_BIT),g=[1,0,1,0,1,e.width,1,e.width]},drawToImageBlendBuffer(t,e){G(1,E,t,e)},drawToImageOverlayBuffer(t,e){G(2,M,t,e)},enableMask(t,i){const n=t.x*r,o=t.y*r,s=t.width*r,a=t.height*r;d=n,h=d+s,c=e.height-o,u=e.height-(o+a),p=1-i,f=[c,h,u,d]},disableMask(){d=0,h=e.width,c=e.height,u=0,p=1,f=[c,h,u,d]},resize:(n,a,l)=>{r=l,i.width=n,i.height=a,e.width=n*r,e.height=a*r,o=j(e.width,e.height),t.width=e.width,t.height=e.height,Ca(s,0,e.width,e.height,0,-1,1),m=[1,0,1,0,1,i.width,1,i.width]},release(){Array.from(q.keys()).forEach((t=>Z(t,!0))),q.clear(),x.forEach((t=>{S.deleteTexture(t)})),x.clear(),I.destroy(),R.destroy(),z.destroy(),B.destroy(),Y.destroy(),t.width=1,t.height=1,t=void 0}}};function Ua(t){let e,i,n,o;return{c(){e=wo("div"),i=wo("canvas"),Eo(i,"class","svelte-1whddvm"),Eo(e,"class","PinturaCanvas svelte-1whddvm")},m(r,s){xo(r,e,s),bo(e,i),t[27](i),n||(o=[To(i,"measure",t[28]),uo(ha.call(null,i))],n=!0)},p:Xn,i:Xn,o:Xn,d(i){i&&$o(e),t[27](null),n=!1,Jn(o)}}}function qa(i,n,o){let r,s,a,l,c,h,u;const d=(t,e)=>{const[i,n,o]=t,[r,s,a,l]=e;return[r*l+i*(1-l),s*l+n*(1-l),a*l+o*(1-l),1]},p=Vo();let m,{animate:g}=n,{maskRect:y}=n,{maskOpacity:v=1}=n,{maskFrameOpacity:b=.95}=n,{pixelRatio:x=1}=n,{textPixelRatio:$=x}=n,{backgroundColor:w}=n,{willRender:k=Y}=n,{didRender:S=Y}=n,{willRequestResource:C=(()=>!0)}=n,{loadImageData:T=Y}=n,{images:M=[]}=n,{interfaceImages:P=[]}=n,E=null,I=null,A=null;const D=(t,e)=>t.set(e,{hard:!g}),R={precision:1e-4*.01},L=Zs(void 0,{duration:250});oo(i,L,(t=>o(23,a=t)));const O=Qs(1,R);oo(i,O,(t=>o(24,l=t)));const z=Qs(1,R);oo(i,z,(t=>o(38,u=t)));const F=Dr();oo(i,F,(t=>o(36,c=t)));const B=Dr();oo(i,B,(t=>o(37,h=t)));const N=()=>requestAnimationFrame((()=>{et=!0,s()})),H=new Map([]),W=new Map([]),V=(t,i)=>{if(!H.has(t)){H.set(t,t);const n="pixelated"===i?E.textureFilterNearest:E.textureFilterLinear;if(!e(t)&&("close"in t||_(t)||Tn(t))){const e=E.textureCreate();E.textureUpdate(e,t,{filter:n}),H.set(t,e)}else T(t).then((e=>{const i=E.textureCreate();E.textureUpdate(i,e,{filter:n}),H.set(t,i),N()})).catch((t=>{console.error(t)}))}return H.get(t)},U=e=>{if(!e.text.length)return void W.delete(e.id);let{text:i,textAlign:n,fontFamily:o,fontSize:r,fontWeight:s,fontVariant:a,fontStyle:l,lineHeight:c,width:h,height:u}=e;const{lastCharPosition:d,textSize:p}=((e="",i)=>{const{width:n=0,height:o="auto",fontSize:r,fontFamily:s,lineHeight:a,fontWeight:l,fontStyle:c,fontVariant:h}=i,u=li({text:e,fontFamily:s,fontWeight:l,fontStyle:c,fontVariant:h,fontSize:r,lineHeight:a,width:n,height:o});let d=gi.get(u);if(d)return d;const p=t("span"),f=we(t("pre",{contenteditable:"true",spellcheck:"false",style:`pointer-events:none;visibility:hidden;position:absolute;left:0;top:0;${fi({fontFamily:s,fontWeight:l,fontStyle:c,fontVariant:h,fontSize:r,lineHeight:a})};${mi(i)}"`,innerHTML:e},[p])),m=f.getBoundingClientRect(),g=p.getBoundingClientRect();return d={textSize:$t(m),lastCharPosition:lt(J(g),Math.round)},gi.set(u,d),f.remove(),d})(i,e),f=li({text:i,textAlign:n,fontFamily:o,fontSize:r,fontWeight:s,fontVariant:a,fontStyle:l,lineHeight:c,height:u?Math.min(d.y,Math.ceil(u/c)*c):"auto",xOffset:d.x,yOffset:d.y});if(!H.has(f)){H.set(f,i);const t=h&&Math.round(h),d=u&&Math.round(u),m=Math.ceil(p.width),g=Math.ceil(p.height/c)*c;if(0===m||0===g)return;const y=za(),v=Math.min(1,(y-pi*$*2)/(m*$),y/(g*$));Ti(i,{fontSize:r,fontFamily:o,fontWeight:s,fontVariant:a,fontStyle:l,textAlign:n,lineHeight:c,width:t,height:d,imageWidth:m,imageHeight:g,pixelRatio:$*v,willRequestResource:C,color:[1,0,1]}).then((t=>{const i=E.textureCreate();E.textureUpdate(i,t,{filter:E.textureFilterLinear,scalar:v}),H.set(f,i),W.set(e.id,i),N()})).catch(console.error)}const m=H.get(f);return q(m)?m:W.get(e.id)},q=t=>t instanceof WebGLTexture,X=({data:t,size:e,origin:i,translation:n,rotation:o,scale:r,colorMatrix:s,opacity:l,convolutionMatrix:c,gamma:h,vignette:u,maskFeather:p,maskCornerRadius:f,backgroundColor:m,overlayColor:g,enableOverlay:y,enableBlend:v})=>{m&&m[3]<1&&m[3]>0&&(m=d(a,m));const b=V(t);return E.drawImage(b,e,i.x,i.y,n.x,n.y,o.x,o.y,o.z,r,s,Qr(l,0,1),c,h,u,p,f,m,g,y,v),b},G=([t,e,i,n])=>[n.x,n.y,t.x,t.y,i.x,i.y,e.x,e.y],Z=K(),tt=(t=[],i)=>t.map((t=>{let i=!t._isLoading&&(t=>{let i;if(t.backgroundImage)i=V(t.backgroundImage,t.backgroundImageRendering);else if(e(t.text)){if(t.width&&t.width<1||t.height&&t.height<1)return;i=U(t)}return i})(t),n=q(i)?i:void 0;const o=t._scale||1,r=t._translate||Z,s=t.strokeWidth&&t.strokeWidth*o;if(ti(t.points)){const e=t.points.map((t=>Q(t.x*o+r.x,t.y*o+r.y)));3===e.length&&t.backgroundColor?E.drawTriangle(e,t.rotation,t.flipX,t.flipY,t.backgroundColor,s,t.strokeColor,t.opacity):E.drawPath(e,s,t.strokeColor,t.pathClose,t.opacity)}else if(Ke(t.rx)&&Ke(t.ry)){let e=t.x,i=t.y;e*=o,i*=o,e+=r.x,i+=r.y,E.drawEllipse(Q(e,i),t.rx*o,t.ry*o,t.rotation,t.flipX,t.flipY,t.backgroundColor,n,void 0,void 0,t.backgroundCorners&&G(t.backgroundCorners),s,t.strokeColor,t.opacity,t.inverted)}else if(e(t.text)&&n||t.width){const e=n&&E.textureGetSize(n);let i,a,l,c,h=[t.cornerRadius,t.cornerRadius,t.cornerRadius,t.cornerRadius].map((t=>t*o));if(i=t.width?Nt(t):{x:t.x,y:t.y,...e},o&&r&&(i.x*=o,i.y*=o,i.x+=r.x,i.y+=r.y,i.width*=o,i.height*=o),e)if(t.backgroundImage&&t.backgroundSize){const n=j(e.width,e.height);if("contain"===t.backgroundSize){const t=oe(i,n,i);a=wt(t),l=Q(.5*(i.width-a.width),.5*(i.height-a.height))}else if("cover"===t.backgroundSize){const t=ne(i,n,i);a=wt(t),l=Q(t.x,t.y),l=Q(.5*(i.width-a.width),.5*(i.height-a.height))}else a=t.backgroundSize,l=t.backgroundPosition}else if(t.text){const n={width:e.width/$,height:e.height/$};l=Q(0,0),a={width:n.width*o,height:n.height*o},t.backgroundColor&&E.drawRect({...i,height:i.height||e.height*o},t.rotation,t.flipX,t.flipY,h,t.backgroundColor,void 0,void 0,void 0,void 0,s,t.strokeColor,t.opacity,void 0,void 0,t.inverted),t.backgroundColor=void 0,i.x-=pi*o,c=t.color,t.width?(i.height=i.height||n.height*o,i.width+=2*pi*o,"center"===t.textAlign?l.x=.5*(i.width-a.width):"right"===t.textAlign&&(l.x=i.width-a.width)):(i.width=n.width*o,i.height=n.height*o),t._prerender&&(c[3]=0)}E.drawRect(i,t.rotation,t.flipX,t.flipY,h,t.backgroundColor,n,a,l,t.backgroundCorners&&G(t.backgroundCorners),s,t.strokeColor,t.opacity,void 0,c,t.inverted)}return i})).filter(Boolean);let et=!1,it=!0,nt=!1;const ot=[],rt=[],st=[],at=()=>{st.length=0;const t=M[0],{blendShapes:e,blendShapesDirty:i,annotationShapes:n,annotationShapesDirty:o,interfaceShapes:r,decorationShapes:s,frameShapes:p}=k({opacity:t.opacity,rotation:t.rotation,scale:t.scale,images:M,size:St(I,A),backgroundColor:[...a],selectionRect:c}),f=[...a],m=c,g=Qr(l,0,1),y=h,v=Math.abs(t.rotation.x/Math.PI*2-1),b=Math.abs(t.rotation.y/Math.PI*2-1),x=v<.99||b<.99,w=t.size,_=t.backgroundColor,C=e.length>0,T=n.length>0,D=_[3]>0;if(g<1&&D){const t=f[0],e=f[1],i=f[2],n=1-g,o=_[0]*n,r=_[1]*n,s=_[2]*n,a=1-n;f[0]=o+t*a,f[1]=r+e*a,f[2]=s+i*a,f[3]=1}if(E.setCanvasColor(f),C&&i?(E.disableMask(),E.drawToImageBlendBuffer(w),ot.length=0,ot.push(...tt(e))):C||(ot.length=0),st.push(...ot),it&&(E.drawToImageOverlayBuffer(w,$),it=!1),x?(T&&(o||et)||!nt?(E.disableMask(),E.drawToImageOverlayBuffer(w,$),rt.length=0,rt.push(...tt(n))):T||(rt.length=0),nt=!0):nt=!1,E.drawToCanvas(),E.enableMask(m,g),D&&E.drawRect(m,0,!1,!1,[0,0,0,0],d(a,_)),E.enablePreviewStencil(),st.push(...[...M].reverse().map((t=>X({...t,enableOverlay:x&&T,enableBlend:C,mask:m,maskOpacity:g,overlayColor:y})))),x||(E.applyPreviewStencil(),E.resetCanvasMatrix(),E.updateCanvasMatrix(w,t.origin,t.translation,t.scale,t.rotation),rt.length=0,rt.push(...tt(n)),E.disablePreviewStencil()),st.push(...rt),E.resetCanvasMatrix(),E.enableMask(m,1),st.push(...tt(s)),p.length){const t=p.filter((t=>!t.expandsCanvas)),e=p.filter((t=>t.expandsCanvas));t.length&&st.push(...tt(t)),e.length&&(E.enableMask({x:m.x+.5,y:m.y+.5,width:m.width-1,height:m.height-1},u),st.push(...tt(e)))}E.disableMask(),st.push(...tt(r)),P.forEach((t=>{E.enableMask(t.mask,t.maskOpacity),t.backgroundColor&&E.drawRect(t.mask,0,!1,!1,t.maskCornerRadius,t.backgroundColor,void 0,void 0,void 0,void 0,void 0,t.opacity,t.maskFeather),X({...t,translation:{x:t.translation.x+t.offset.x-.5*I,y:t.translation.y+t.offset.y-.5*A}})})),E.disableMask(),(t=>{H.forEach(((e,i)=>{!t.find((t=>t===e))&&q(e)&&(Array.from(W.values()).includes(e)||(H.delete(i),E.textureDelete(e)))}))})(st),S(),et=!1};let ct=Date.now();const ht=()=>{const t=Date.now();t-ct<48||(ct=t,at())};return jo((()=>s())),Wo((()=>o(22,E=Va(m)))),Yo((()=>{E&&(E.release(),o(22,E=void 0),o(2,m=void 0))})),i.$$set=t=>{"animate"in t&&o(9,g=t.animate),"maskRect"in t&&o(10,y=t.maskRect),"maskOpacity"in t&&o(11,v=t.maskOpacity),"maskFrameOpacity"in t&&o(12,b=t.maskFrameOpacity),"pixelRatio"in t&&o(13,x=t.pixelRatio),"textPixelRatio"in t&&o(14,$=t.textPixelRatio),"backgroundColor"in t&&o(15,w=t.backgroundColor),"willRender"in t&&o(16,k=t.willRender),"didRender"in t&&o(17,S=t.didRender),"willRequestResource"in t&&o(18,C=t.willRequestResource),"loadImageData"in t&&o(19,T=t.loadImageData),"images"in t&&o(20,M=t.images),"interfaceImages"in t&&o(21,P=t.interfaceImages)},i.$$.update=()=>{32768&i.$$.dirty[0]&&w&&D(L,w),2048&i.$$.dirty[0]&&D(O,Ke(v)?v:1),4096&i.$$.dirty[0]&&D(z,Ke(b)?b:1),1024&i.$$.dirty[0]&&y&&F.set(y),25165824&i.$$.dirty[0]&&a&&B.set([a[0],a[1],a[2],Qr(l,0,1)]),5242883&i.$$.dirty[0]&&o(26,r=!!(E&&I&&A&&M.length)),4202499&i.$$.dirty[0]&&I&&A&&E&&E.resize(I,A,x),67108864&i.$$.dirty[0]&&o(25,s=r?ga()?ht:at:f),100663296&i.$$.dirty[0]&&r&&s&&s()},[I,A,m,p,L,O,z,F,B,g,y,v,b,x,$,w,k,S,C,T,M,P,E,a,l,s,r,function(t){Zo[t?"unshift":"push"]((()=>{m=t,o(2,m)}))},t=>{o(0,I=t.detail.width),o(1,A=t.detail.height),p("measure",{width:I,height:A})}]}class Xa extends Er{constructor(t){super(),Pr(this,t,qa,Ua,eo,{animate:9,maskRect:10,maskOpacity:11,maskFrameOpacity:12,pixelRatio:13,textPixelRatio:14,backgroundColor:15,willRender:16,didRender:17,willRequestResource:18,loadImageData:19,images:20,interfaceImages:21},[-1,-1])}}var Ga=(t,e=Boolean,i=" ")=>t.filter(e).join(i);function Za(t,e,i){const n=t.slice();return n[17]=e[i],n}const Ka=t=>({tab:4&t}),Qa=t=>({tab:t[17]});function Ja(t){let e,i,n,o=[],r=new Map,s=t[2];const a=t=>t[17].id;for(let e=0;e<s.length;e+=1){let i=Za(t,s,e),n=a(i);r.set(n,o[e]=tl(n,i))}return{c(){e=wo("ul");for(let t=0;t<o.length;t+=1)o[t].c();Eo(e,"class",i=Ga(["PinturaTabList",t[0]])),Eo(e,"role","tablist"),Eo(e,"data-layout",t[1])},m(i,r){xo(i,e,r);for(let t=0;t<o.length;t+=1)o[t].m(e,null);t[14](e),n=!0},p(t,l){1124&l&&(s=t[2],pr(),o=wr(o,l,a,1,t,s,r,e,$r,tl,null,Za),fr()),(!n||1&l&&i!==(i=Ga(["PinturaTabList",t[0]])))&&Eo(e,"class",i),(!n||2&l)&&Eo(e,"data-layout",t[1])},i(t){if(!n){for(let t=0;t<s.length;t+=1)mr(o[t]);n=!0}},o(t){for(let t=0;t<o.length;t+=1)gr(o[t]);n=!1},d(i){i&&$o(e);for(let t=0;t<o.length;t+=1)o[t].d();t[14](null)}}}function tl(t,e){let i,n,o,r,s,a,l,c,h,u;const d=e[11].default,p=ro(d,e,e[10],Qa);function f(...t){return e[12](e[17],...t)}function m(...t){return e[13](e[17],...t)}return{key:t,first:null,c(){i=wo("li"),n=wo("button"),p&&p.c(),r=So(),n.disabled=o=e[17].disabled,Eo(i,"role","tab"),Eo(i,"aria-controls",s=e[17].href.substr(1)),Eo(i,"id",a=e[17].tabId),Eo(i,"aria-selected",l=e[17].selected),this.first=i},m(t,e){xo(t,i,e),bo(i,n),p&&p.m(n,null),bo(i,r),c=!0,h||(u=[To(n,"keydown",f),To(n,"click",m)],h=!0)},p(t,r){e=t,p&&p.p&&1028&r&&ao(p,d,e,e[10],r,Ka,Qa),(!c||4&r&&o!==(o=e[17].disabled))&&(n.disabled=o),(!c||4&r&&s!==(s=e[17].href.substr(1)))&&Eo(i,"aria-controls",s),(!c||4&r&&a!==(a=e[17].tabId))&&Eo(i,"id",a),(!c||4&r&&l!==(l=e[17].selected))&&Eo(i,"aria-selected",l)},i(t){c||(mr(p,t),c=!0)},o(t){gr(p,t),c=!1},d(t){t&&$o(i),p&&p.d(t),h=!1,Jn(u)}}}function el(t){let e,i,n=t[4]&&Ja(t);return{c(){n&&n.c(),e=Co()},m(t,o){n&&n.m(t,o),xo(t,e,o),i=!0},p(t,[i]){t[4]?n?(n.p(t,i),16&i&&mr(n,1)):(n=Ja(t),n.c(),mr(n,1),n.m(e.parentNode,e)):n&&(pr(),gr(n,1,1,(()=>{n=null})),fr())},i(t){i||(mr(n),i=!0)},o(t){gr(n),i=!1},d(t){n&&n.d(t),t&&$o(e)}}}function il(t,e,i){let n,o,r,{$$slots:s={},$$scope:a}=e,{class:l}=e,{name:c}=e,{selected:h}=e,{tabs:u=[]}=e,{layout:d}=e;const p=Vo(),f=t=>{const e=r.querySelectorAll('[role="tab"] button')[t];e&&e.focus()},m=(t,e)=>{t.preventDefault(),t.stopPropagation(),p("select",e)},g=({key:t},e)=>{if(!/arrow/i.test(t))return;const i=u.findIndex((t=>t.id===e));return/right|down/i.test(t)?f(i<u.length-1?i+1:0):/left|up/i.test(t)?f(i>0?i-1:u.length-1):void 0};return t.$$set=t=>{"class"in t&&i(0,l=t.class),"name"in t&&i(7,c=t.name),"selected"in t&&i(8,h=t.selected),"tabs"in t&&i(9,u=t.tabs),"layout"in t&&i(1,d=t.layout),"$$scope"in t&&i(10,a=t.$$scope)},t.$$.update=()=>{896&t.$$.dirty&&i(2,n=u.map((t=>{const e=t.id===h;return{...t,tabId:`tab-${c}-${t.id}`,href:`#panel-${c}-${t.id}`,selected:e}}))),4&t.$$.dirty&&i(4,o=n.length>1)},[l,d,n,r,o,m,g,c,h,u,a,s,(t,e)=>g(e,t.id),(t,e)=>m(e,t.id),function(t){Zo[t?"unshift":"push"]((()=>{r=t,i(3,r)}))}]}class nl extends Er{constructor(t){super(),Pr(this,t,il,el,eo,{class:0,name:7,selected:8,tabs:9,layout:1})}}const ol=t=>({panel:16&t}),rl=t=>({panel:t[4][0].id,panelIsActive:!0});function sl(t,e,i){const n=t.slice();return n[14]=e[i].id,n[15]=e[i].shouldDraw,n[16]=e[i].panelId,n[17]=e[i].tabindex,n[18]=e[i].labelledBy,n[19]=e[i].isActive,n[20]=e[i].hidden,n[3]=e[i].visible,n}const al=t=>({panel:16&t,panelIsActive:16&t}),ll=t=>({panel:t[14],panelIsActive:t[19]});function cl(t){let e,i,n,o,r,s;const a=t[11].default,l=ro(a,t,t[10],rl);return{c(){e=wo("div"),i=wo("div"),l&&l.c(),Eo(i,"class",n=Ga([t[1]])),Eo(e,"class",t[0]),Eo(e,"style",t[2])},m(n,a){xo(n,e,a),bo(e,i),l&&l.m(i,null),o=!0,r||(s=[To(e,"measure",t[13]),uo(ha.call(null,e))],r=!0)},p(t,r){l&&l.p&&1040&r&&ao(l,a,t,t[10],r,ol,rl),(!o||2&r&&n!==(n=Ga([t[1]])))&&Eo(i,"class",n),(!o||1&r)&&Eo(e,"class",t[0]),(!o||4&r)&&Eo(e,"style",t[2])},i(t){o||(mr(l,t),o=!0)},o(t){gr(l,t),o=!1},d(t){t&&$o(e),l&&l.d(t),r=!1,Jn(s)}}}function hl(t){let e,i,n,o,r,s=[],a=new Map,l=t[4];const c=t=>t[14];for(let e=0;e<l.length;e+=1){let i=sl(t,l,e),n=c(i);a.set(n,s[e]=dl(n,i))}return{c(){e=wo("div");for(let t=0;t<s.length;t+=1)s[t].c();Eo(e,"class",i=Ga(["PinturaTabPanels",t[0]])),Eo(e,"style",t[2])},m(i,a){xo(i,e,a);for(let t=0;t<s.length;t+=1)s[t].m(e,null);n=!0,o||(r=[To(e,"measure",t[12]),uo(ha.call(null,e,{observePosition:!0}))],o=!0)},p(t,o){1042&o&&(l=t[4],pr(),s=wr(s,o,c,1,t,l,a,e,$r,dl,null,sl),fr()),(!n||1&o&&i!==(i=Ga(["PinturaTabPanels",t[0]])))&&Eo(e,"class",i),(!n||4&o)&&Eo(e,"style",t[2])},i(t){if(!n){for(let t=0;t<l.length;t+=1)mr(s[t]);n=!0}},o(t){for(let t=0;t<s.length;t+=1)gr(s[t]);n=!1},d(t){t&&$o(e);for(let t=0;t<s.length;t+=1)s[t].d();o=!1,Jn(r)}}}function ul(t){let e;const i=t[11].default,n=ro(i,t,t[10],ll);return{c(){n&&n.c()},m(t,i){n&&n.m(t,i),e=!0},p(t,e){n&&n.p&&1040&e&&ao(n,i,t,t[10],e,al,ll)},i(t){e||(mr(n,t),e=!0)},o(t){gr(n,t),e=!1},d(t){n&&n.d(t)}}}function dl(t,e){let i,n,o,r,s,a,l,c,h,u=e[15]&&ul(e);return{key:t,first:null,c(){i=wo("div"),u&&u.c(),n=So(),Eo(i,"class",o=Ga(["PinturaTabPanel",e[1]])),i.hidden=r=e[20],Eo(i,"id",s=e[16]),Eo(i,"tabindex",a=e[17]),Eo(i,"aria-labelledby",l=e[18]),Eo(i,"data-inert",c=!e[3]),this.first=i},m(t,e){xo(t,i,e),u&&u.m(i,null),bo(i,n),h=!0},p(t,d){(e=t)[15]?u?(u.p(e,d),16&d&&mr(u,1)):(u=ul(e),u.c(),mr(u,1),u.m(i,n)):u&&(pr(),gr(u,1,1,(()=>{u=null})),fr()),(!h||2&d&&o!==(o=Ga(["PinturaTabPanel",e[1]])))&&Eo(i,"class",o),(!h||16&d&&r!==(r=e[20]))&&(i.hidden=r),(!h||16&d&&s!==(s=e[16]))&&Eo(i,"id",s),(!h||16&d&&a!==(a=e[17]))&&Eo(i,"tabindex",a),(!h||16&d&&l!==(l=e[18]))&&Eo(i,"aria-labelledby",l),(!h||16&d&&c!==(c=!e[3]))&&Eo(i,"data-inert",c)},i(t){h||(mr(u),h=!0)},o(t){gr(u),h=!1},d(t){t&&$o(i),u&&u.d()}}}function pl(t){let e,i,n,o;const r=[hl,cl],s=[];function a(t,e){return t[5]?0:1}return e=a(t),i=s[e]=r[e](t),{c(){i.c(),n=Co()},m(t,i){s[e].m(t,i),xo(t,n,i),o=!0},p(t,[o]){let l=e;e=a(t),e===l?s[e].p(t,o):(pr(),gr(s[l],1,1,(()=>{s[l]=null})),fr(),i=s[e],i?i.p(t,o):(i=s[e]=r[e](t),i.c()),mr(i,1),i.m(n.parentNode,n))},i(t){o||(mr(i),o=!0)},o(t){gr(i),o=!1},d(t){s[e].d(t),t&&$o(n)}}}function fl(t,e,i){let n,o,{$$slots:r={},$$scope:s}=e,{class:a}=e,{name:l}=e,{selected:c}=e,{panelClass:h}=e,{panels:u=[]}=e,{visible:d}=e,{style:p}=e;const f={};return t.$$set=t=>{"class"in t&&i(0,a=t.class),"name"in t&&i(6,l=t.name),"selected"in t&&i(7,c=t.selected),"panelClass"in t&&i(1,h=t.panelClass),"panels"in t&&i(8,u=t.panels),"visible"in t&&i(3,d=t.visible),"style"in t&&i(2,p=t.style),"$$scope"in t&&i(10,s=t.$$scope)},t.$$.update=()=>{968&t.$$.dirty&&i(4,n=u.map((t=>{const e=t===c;e&&i(9,f[t]=!0,f);const n=!d||-1!==d.indexOf(t);return{id:t,panelId:`panel-${l}-${t}`,labelledBy:`tab-${l}-${t}`,isActive:e,hidden:!e,visible:n,tabindex:e?0:-1,shouldDraw:e||f[t]}}))),16&t.$$.dirty&&i(5,o=n.length>1)},[a,h,p,d,n,o,l,c,u,f,s,r,function(e){Xo(t,e)},function(e){Xo(t,e)}]}class ml extends Er{constructor(t){super(),Pr(this,t,fl,pl,eo,{class:0,name:6,selected:7,panelClass:1,panels:8,visible:3,style:2})}}var gl=t=>{const e=Object.getOwnPropertyDescriptors(t.prototype);return Object.keys(e).filter((t=>!!e[t].get))};function yl(t){let e,i,n,o,r;const s=[t[7]];function a(e){t[19](e)}var l=t[11];function c(t){let e={};for(let t=0;t<s.length;t+=1)e=Zn(e,s[t]);return void 0!==t[5]&&(e.name=t[5]),{props:e}}return l&&(i=new l(c(t)),Zo.push((()=>Sr(i,"name",a))),t[20](i),i.$on("measure",t[21])),{c(){e=wo("div"),i&&Cr(i.$$.fragment),Eo(e,"data-util",t[5]),Eo(e,"class",o=Ga(["PinturaUtilPanel",t[2]])),Eo(e,"style",t[6])},m(t,n){xo(t,e,n),i&&Tr(i,e,null),r=!0},p(t,[h]){const u=128&h?_r(s,[kr(t[7])]):{};if(!n&&32&h&&(n=!0,u.name=t[5],or((()=>n=!1))),l!==(l=t[11])){if(i){pr();const t=i;gr(t.$$.fragment,1,0,(()=>{Mr(t,1)})),fr()}l?(i=new l(c(t)),Zo.push((()=>Sr(i,"name",a))),t[20](i),i.$on("measure",t[21]),Cr(i.$$.fragment),mr(i.$$.fragment,1),Tr(i,e,null)):i=null}else l&&i.$set(u);(!r||32&h)&&Eo(e,"data-util",t[5]),(!r||4&h&&o!==(o=Ga(["PinturaUtilPanel",t[2]])))&&Eo(e,"class",o),(!r||64&h)&&Eo(e,"style",t[6])},i(t){r||(i&&mr(i.$$.fragment,t),r=!0)},o(t){i&&gr(i.$$.fragment,t),r=!1},d(n){n&&$o(e),t[20](null),i&&Mr(i)}}}function vl(t,e,i){let n,o,r,s;const a=Vo();let l,{isActive:c=!0}=e,{isAnimated:h=!0}=e,{stores:u}=e,{content:d}=e,{component:p}=e,{locale:f}=e,{class:m}=e;const g=Qs(0),y=Rr(g,(t=>Qr(t,0,1)));oo(t,y,(t=>i(18,r=t)));let v=!c;const b=Dr(c);oo(t,b,(t=>i(22,s=t)));const x={isActive:Rr(b,(async(t,e)=>{if(!t)return e(t);await ir(),e(t)})),isActiveFraction:Rr(y,(t=>t)),isVisible:Rr(y,(t=>t>0))},$=d.view,w=gl($),_=Object.keys(d.props||{}).reduce(((t,e)=>w.includes(e)?(t[e]=d.props[e],t):t),{}),k=Object.keys(x).reduce(((t,e)=>w.includes(e)?(t[e]=x[e],t):t),{});let S,C=!1;return Wo((()=>{i(4,C=!0)})),t.$$set=t=>{"isActive"in t&&i(1,c=t.isActive),"isAnimated"in t&&i(12,h=t.isAnimated),"stores"in t&&i(13,u=t.stores),"content"in t&&i(14,d=t.content),"component"in t&&i(0,p=t.component),"locale"in t&&i(15,f=t.locale),"class"in t&&i(2,m=t.class)},t.$$.update=()=>{11&t.$$.dirty&&l&&c&&p&&a("measure",l),4098&t.$$.dirty&&g.set(c?1:0,{hard:!h}),393216&t.$$.dirty&&(r<=0&&!v?i(17,v=!0):r>0&&v&&i(17,v=!1)),131088&t.$$.dirty&&C&&a(v?"hide":"show"),262144&t.$$.dirty&&a("fade",r),262144&t.$$.dirty&&i(6,n=r<1?"opacity: "+r:void 0),2&t.$$.dirty&&ho(b,s=c,s),40960&t.$$.dirty&&i(7,o={..._,...k,stores:u,locale:f})},[p,c,m,l,C,S,n,o,a,y,b,$,h,u,d,f,g,v,r,function(t){S=t,i(5,S)},function(t){Zo[t?"unshift":"push"]((()=>{p=t,i(0,p)}))},t=>{C&&c&&(i(3,l=t.detail),a("measure",{...l}))}]}class bl extends Er{constructor(t){super(),Pr(this,t,vl,yl,eo,{isActive:1,isAnimated:12,stores:13,content:14,component:0,locale:15,class:2,opacity:16})}get opacity(){return this.$$.ctx[16]}}function xl(t){let e,i,n;const o=t[5].default,r=ro(o,t,t[4],null);return{c(){e=_o("svg"),r&&r.c(),Eo(e,"class",t[3]),Eo(e,"style",t[2]),Eo(e,"width",t[0]),Eo(e,"height",t[1]),Eo(e,"viewBox",i="0 0 "+t[0]+"\n    "+t[1]),Eo(e,"xmlns","http://www.w3.org/2000/svg"),Eo(e,"aria-hidden","true"),Eo(e,"focusable","false"),Eo(e,"stroke-linecap","round"),Eo(e,"stroke-linejoin","round")},m(t,i){xo(t,e,i),r&&r.m(e,null),n=!0},p(t,[s]){r&&r.p&&16&s&&ao(r,o,t,t[4],s,null,null),(!n||8&s)&&Eo(e,"class",t[3]),(!n||4&s)&&Eo(e,"style",t[2]),(!n||1&s)&&Eo(e,"width",t[0]),(!n||2&s)&&Eo(e,"height",t[1]),(!n||3&s&&i!==(i="0 0 "+t[0]+"\n    "+t[1]))&&Eo(e,"viewBox",i)},i(t){n||(mr(r,t),n=!0)},o(t){gr(r,t),n=!1},d(t){t&&$o(e),r&&r.d(t)}}}function $l(t,e,i){let{$$slots:n={},$$scope:o}=e,{width:r=24}=e,{height:s=24}=e,{style:a}=e,{class:l}=e;return t.$$set=t=>{"width"in t&&i(0,r=t.width),"height"in t&&i(1,s=t.height),"style"in t&&i(2,a=t.style),"class"in t&&i(3,l=t.class),"$$scope"in t&&i(4,o=t.$$scope)},[r,s,a,l,o,n]}class wl extends Er{constructor(t){super(),Pr(this,t,$l,xl,eo,{width:0,height:1,style:2,class:3})}}var _l=(t,e)=>e===t.target||e.contains(t.target);function kl(t){let e,i;return e=new wl({props:{class:"PinturaButtonIcon",$$slots:{default:[Sl]},$$scope:{ctx:t}}}),{c(){Cr(e.$$.fragment)},m(t,n){Tr(e,t,n),i=!0},p(t,i){const n={};134217730&i&&(n.$$scope={dirty:i,ctx:t}),e.$set(n)},i(t){i||(mr(e.$$.fragment,t),i=!0)},o(t){gr(e.$$.fragment,t),i=!1},d(t){Mr(e,t)}}}function Sl(t){let e;return{c(){e=_o("g")},m(i,n){xo(i,e,n),e.innerHTML=t[1]},p(t,i){2&i&&(e.innerHTML=t[1])},d(t){t&&$o(e)}}}function Cl(t){let e,i;return{c(){e=wo("span"),i=ko(t[0]),Eo(e,"class",t[12])},m(t,n){xo(t,e,n),bo(e,i)},p(t,n){1&n&&Ao(i,t[0]),4096&n&&Eo(e,"class",t[12])},d(t){t&&$o(e)}}}function Tl(t){let e,i,n,o;const r=t[25].default,s=ro(r,t,t[27],null),a=s||function(t){let e,i,n,o=t[1]&&kl(t),r=t[0]&&Cl(t);return{c(){e=wo("span"),o&&o.c(),i=So(),r&&r.c(),Eo(e,"class",t[10])},m(t,s){xo(t,e,s),o&&o.m(e,null),bo(e,i),r&&r.m(e,null),n=!0},p(t,s){t[1]?o?(o.p(t,s),2&s&&mr(o,1)):(o=kl(t),o.c(),mr(o,1),o.m(e,i)):o&&(pr(),gr(o,1,1,(()=>{o=null})),fr()),t[0]?r?r.p(t,s):(r=Cl(t),r.c(),r.m(e,null)):r&&(r.d(1),r=null),(!n||1024&s)&&Eo(e,"class",t[10])},i(t){n||(mr(o),n=!0)},o(t){gr(o),n=!1},d(t){t&&$o(e),o&&o.d(),r&&r.d()}}}(t);return{c(){e=wo("button"),a&&a.c(),Eo(e,"type",t[4]),Eo(e,"style",t[2]),e.disabled=t[3],Eo(e,"class",t[11]),Eo(e,"title",t[0])},m(r,s){xo(r,e,s),a&&a.m(e,null),t[26](e),i=!0,n||(o=[To(e,"keydown",(function(){to(t[6])&&t[6].apply(this,arguments)})),To(e,"click",(function(){to(t[5])&&t[5].apply(this,arguments)})),To(e,"pointerdown",(function(){to(t[9])&&t[9].apply(this,arguments)})),uo(t[7].call(null,e))],n=!0)},p(n,[o]){t=n,s?s.p&&134217728&o&&ao(s,r,t,t[27],o,null,null):a&&a.p&&5123&o&&a.p(t,o),(!i||16&o)&&Eo(e,"type",t[4]),(!i||4&o)&&Eo(e,"style",t[2]),(!i||8&o)&&(e.disabled=t[3]),(!i||2048&o)&&Eo(e,"class",t[11]),(!i||1&o)&&Eo(e,"title",t[0])},i(t){i||(mr(a,t),i=!0)},o(t){gr(a,t),i=!1},d(i){i&&$o(e),a&&a.d(i),t[26](null),n=!1,Jn(o)}}}function Ml(t,e,i){let n,o,r,s,a,l,{$$slots:c={},$$scope:h}=e,{class:u}=e,{label:d}=e,{labelClass:p}=e,{innerClass:f}=e,{hideLabel:m=!1}=e,{icon:g}=e,{style:y}=e,{disabled:v}=e,{type:b="button"}=e,{onclick:x}=e,{onkeydown:$}=e,{onhold:w}=e,{action:_=(()=>{})}=e,{holdThreshold:k=500}=e,{holdSpeedUpFactor:S=.5}=e,{holdSpeedMin:C=20}=e;const T=t=>{i(23,l=setTimeout((()=>{w(),T(Math.max(t*S,C))}),t))};let M;return t.$$set=t=>{"class"in t&&i(13,u=t.class),"label"in t&&i(0,d=t.label),"labelClass"in t&&i(14,p=t.labelClass),"innerClass"in t&&i(15,f=t.innerClass),"hideLabel"in t&&i(16,m=t.hideLabel),"icon"in t&&i(1,g=t.icon),"style"in t&&i(2,y=t.style),"disabled"in t&&i(3,v=t.disabled),"type"in t&&i(4,b=t.type),"onclick"in t&&i(5,x=t.onclick),"onkeydown"in t&&i(6,$=t.onkeydown),"onhold"in t&&i(17,w=t.onhold),"action"in t&&i(7,_=t.action),"holdThreshold"in t&&i(18,k=t.holdThreshold),"holdSpeedUpFactor"in t&&i(19,S=t.holdSpeedUpFactor),"holdSpeedMin"in t&&i(20,C=t.holdSpeedMin),"$$scope"in t&&i(27,h=t.$$scope)},t.$$.update=()=>{25296896&t.$$.dirty&&i(24,o=w?()=>{l&&(clearTimeout(l),i(23,l=void 0),document.documentElement.removeEventListener("pointerup",o))}:Xn),17170432&t.$$.dirty&&i(9,n=w?()=>{document.documentElement.addEventListener("pointerup",o),T(k)}:Xn),32768&t.$$.dirty&&i(10,r=Ga(["PinturaButtonInner",f])),73728&t.$$.dirty&&i(11,s=Ga(["PinturaButton",m&&"PinturaButtonIconOnly",u])),81920&t.$$.dirty&&i(12,a=Ga([m?"implicit":"PinturaButtonLabel",p]))},[d,g,y,v,b,x,$,_,M,n,r,s,a,u,p,f,m,w,k,S,C,t=>_l(t,M),()=>M,l,o,c,function(t){Zo[t?"unshift":"push"]((()=>{M=t,i(8,M)}))},h]}class Pl extends Er{constructor(t){super(),Pr(this,t,Ml,Tl,eo,{class:13,label:0,labelClass:14,innerClass:15,hideLabel:16,icon:1,style:2,disabled:3,type:4,onclick:5,onkeydown:6,onhold:17,action:7,holdThreshold:18,holdSpeedUpFactor:19,holdSpeedMin:20,isEventTarget:21,getElement:22})}get isEventTarget(){return this.$$.ctx[21]}get getElement(){return this.$$.ctx[22]}}var El=(t,e)=>{const i=t.findIndex(e);if(i>=0)return t.splice(i,1)},Il=(t,e={})=>{const{inertia:i=!1,shouldStartInteraction:n=(()=>!0),pinch:o=!1,multiTouch:r,getEventPosition:s=(t=>Q(t.clientX,t.clientY))}=e;function a(e,i){t.dispatchEvent(new CustomEvent(e,{detail:i}))}function l(){b&&b(),b=void 0}const c=[],h=t=>0===t.timeStamp?Date.now():t.timeStamp,u=()=>{const t=et(c[0].position);if(c[1]){const e=.5*(c[1].position.x-t.x),i=.5*(c[1].position.y-t.y);t.x+=e,t.y+=i}return t},d=t=>{t.origin.x=t.position.x,t.origin.y=t.position.y,t.translation.x=0,t.translation.y=0},p=t=>{const e=(t=>c.findIndex((e=>e.event.pointerId===t.pointerId)))(t);if(!(e<0))return c[e]},f=()=>1===c.length,m=()=>2===c.length;let g,y,v,b,x,$,w,_,k,S=0;function C(e){if(!m()&&!(t=>Ke(t.button)&&0!==t.button)(e)&&n(e,t))if(l(),(t=>{const e=h(t),i={timeStamp:e,timeStampInitial:e,position:s(t),origin:s(t),velocity:K(),translation:K(),interactionState:void 0,event:t};c.push(i),i.interactionState=(t=>{const e=gt(t.map((t=>t.position)));return{center:e,distance:((t,e)=>t.reduce(((t,i)=>t+ft(e,i.position)),0)/t.length)(t,e),velocity:gt(t.map((t=>t.velocity))),translation:gt(t.map((t=>t.translation)))}})(c)})(e),f())document.documentElement.addEventListener("pointermove",M),document.documentElement.addEventListener("pointerup",P),document.documentElement.addEventListener("pointercancel",P),_=!1,w=1,$=K(),x=void 0,a("interactionstart",{origin:et(p(e).origin)});else if(o)_=!0,x=ft(c[0].position,c[1].position),$.x+=c[0].translation.x,$.y+=c[0].translation.y,d(c[0]);else if(!1===r)return c.length=0,document.documentElement.removeEventListener("pointermove",M),document.documentElement.removeEventListener("pointerup",P),document.documentElement.removeEventListener("pointercancel",P),a("interactioncancel")}t.addEventListener("pointerdown",C);let T=Date.now();function M(t){t.preventDefault(),(t=>{const e=p(t);if(!e)return;const i=h(t),n=s(t),o=Math.max(1,i-e.timeStamp);e.velocity.x=(n.x-e.position.x)/o,e.velocity.y=(n.y-e.position.y)/o,e.translation.x=n.x-e.origin.x,e.translation.y=n.y-e.origin.y,e.timeStamp=i,e.position.x=n.x,e.position.y=n.y,e.event=t})(t);const e=et(c[0].translation);let i=w;o&&m()&&(i*=ft(c[0].position,c[1].position)/x,ct(e,c[1].translation)),e.x+=$.x,e.y+=$.y;const n=Date.now();n-T<16||(T=n,a("interactionupdate",{position:u(),translation:e,scalar:o?i:void 0,isMultiTouching:m()}))}function P(t){if(!p(t))return;const e=u(),n=(t=>{const e=El(c,(e=>e.event.pointerId===t.pointerId));if(e)return e[0]})(t);if(o&&f()){const t=ft(c[0].position,n.position);w*=t/x,$.x+=c[0].translation.x+n.translation.x,$.y+=c[0].translation.y+n.translation.y,d(c[0])}let r=!1,s=!1;if(!_&&n){const t=performance.now(),e=t-n.timeStampInitial,i=pt(n.translation);r=i<64&&e<300,s=!!(k&&r&&t-S<700&&pt(k,n.position)<128),r&&(k=et(n.position),S=t)}if(c.length>0)return;document.documentElement.removeEventListener("pointermove",M),document.documentElement.removeEventListener("pointerup",P),document.documentElement.removeEventListener("pointercancel",P);const l=et(n.translation),h=et(n.velocity);let m=!1;a("interactionrelease",{isTap:r,isDoubleTap:s,position:e,translation:l,scalar:w,preventInertia:()=>m=!0});const C=ft(h);if(m||!i||C<.25)return I(l,{isTap:r,isDoubleTap:s});y=et(e),v=et(l),g=Zs(et(l),{easing:qs,duration:80*C}),g.set({x:l.x+50*h.x,y:l.y+50*h.y}).then((()=>{b&&I(no(g),{isTap:r,isDoubleTap:s})})),b=g.subscribe(E)}function E(t){t&&a("interactionupdate",{position:Q(y.x+(t.x-v.x),y.y+(t.y-v.y)),translation:t,scalar:o?w:void 0})}function I(t,e){l(),a("interactionend",{...e,translation:t,scalar:o?w:void 0})}return{destroy(){l(),t.removeEventListener("pointerdown",C)}}},Al=(t,e={})=>{const{direction:i,shiftMultiplier:n=10,bubbles:o=!1,stopKeydownPropagation:r=!0}=e,s="horizontal"===i,a="vertical"===i,l=e=>{const{key:i}=e,l=e.shiftKey,c=/up|down/i.test(i),h=/left|right/i.test(i);if(!h&&!c)return;if(s&&c)return;if(a&&h)return;const u=l?n:1;r&&e.stopPropagation(),t.dispatchEvent(new CustomEvent("nudge",{bubbles:o,detail:Q((/left/i.test(i)?-1:/right/i.test(i)?1:0)*u,(/up/i.test(i)?-1:/down/i.test(i)?1:0)*u)}))};return t.addEventListener("keydown",l),{destroy(){t.removeEventListener("keydown",l)}}};function Dl(t,e){return e*Math.sign(t)*Math.log10(1+Math.abs(t)/e)}const Rl=(t,e,i)=>{if(!e)return zt(t);const n=t.x+Dl(e.x-t.x,i),o=t.x+t.width+Dl(e.x+e.width-(t.x+t.width),i),r=t.y+Dl(e.y-t.y,i);return{x:n,y:r,width:o-n,height:t.y+t.height+Dl(e.y+e.height-(t.y+t.height),i)-r}};var Ll=(t,e)=>{if(t)return/em/.test(t)?16*parseInt(t,10):/px/.test(t)?parseInt(t,10):void 0},Ol=t=>{let e=t.detail||0;const{deltaX:i,deltaY:n,wheelDelta:o,wheelDeltaX:r,wheelDeltaY:s}=t;return Ke(r)&&Math.abs(r)>Math.abs(s)?e=r/-120:Ke(i)&&Math.abs(i)>Math.abs(n)?e=i/20:(o||s)&&(e=(o||s)/-120),e||(e=n/20),e},zl={Up:38,Down:40,Left:37,Right:39};function Fl(t){let e,i,n,o,r,s,a;const l=t[37].default,c=ro(l,t,t[36],null);return{c(){e=wo("div"),i=wo("div"),c&&c.c(),Eo(i,"style",t[6]),Eo(e,"class",n=Ga(["PinturaScrollable",t[0]])),Eo(e,"style",t[4]),Eo(e,"data-direction",t[1]),Eo(e,"data-state",t[5])},m(n,l){xo(n,e,l),bo(e,i),c&&c.m(i,null),t[39](e),r=!0,s||(a=[To(i,"interactionstart",t[9]),To(i,"interactionupdate",t[11]),To(i,"interactionend",t[12]),To(i,"interactionrelease",t[10]),uo(Il.call(null,i,{inertia:!0})),To(i,"measure",t[38]),uo(ha.call(null,i)),To(e,"wheel",t[14],{passive:!1}),To(e,"scroll",t[16]),To(e,"focusin",t[15]),To(e,"nudge",t[17]),To(e,"measure",t[13]),uo(ha.call(null,e,{observePosition:!0})),uo(o=Al.call(null,e,{direction:"x"===t[1]?"horizontal":"vertical",stopKeydownPropagation:!1}))],s=!0)},p(t,s){c&&c.p&&32&s[1]&&ao(c,l,t,t[36],s,null,null),(!r||64&s[0])&&Eo(i,"style",t[6]),(!r||1&s[0]&&n!==(n=Ga(["PinturaScrollable",t[0]])))&&Eo(e,"class",n),(!r||16&s[0])&&Eo(e,"style",t[4]),(!r||2&s[0])&&Eo(e,"data-direction",t[1]),(!r||32&s[0])&&Eo(e,"data-state",t[5]),o&&to(o.update)&&2&s[0]&&o.update.call(null,{direction:"x"===t[1]?"horizontal":"vertical",stopKeydownPropagation:!1})},i(t){r||(mr(c,t),r=!0)},o(t){gr(c,t),r=!1},d(i){i&&$o(e),c&&c.d(i),t[39](null),s=!1,Jn(a)}}}function Bl(t,e,i){let n,o,r,s,a,l,c,h,u,{$$slots:d={},$$scope:p}=e;const m=Vo(),g=Object.values(zl),y=qo("keysPressed");oo(t,y,(t=>i(46,u=t)));let v,b,x,$,w="idle",_=Qs(0);oo(t,_,(t=>i(34,h=t)));let k,{class:S}=e,{scrollBlockInteractionDist:C=5}=e,{scrollStep:T=10}=e,{scrollFocusMargin:M=64}=e,{scrollDirection:P="x"}=e,{scrollAutoCancel:E=!1}=e,{elasticity:I=0}=e,{onscroll:A=f}=e,{maskFeatherSize:D}=e,{maskFeatherStartOpacity:R}=e,{maskFeatherEndOpacity:L}=e,{scroll:O}=e,z="",F=!0;const B=_.subscribe((t=>{const e=K();e[P]=t,A(e)})),N=t=>Math.max(Math.min(0,t),x[n]-b[n]);let H,W,j;const Y=(t,e={})=>{const{elastic:n=!1,animate:o=!1}=e;Math.abs(t)>C&&"idle"===w&&!$&&i(28,w="scrolling");const r=N(t),s=n&&I&&!$?r+Dl(t-r,I):r;let a=!0;o?a=!1:F||(a=!$),F=!1,_.set(s,{hard:a}).then((t=>{$&&(F=!0)}))};return Yo((()=>{B()})),t.$$set=t=>{"class"in t&&i(0,S=t.class),"scrollBlockInteractionDist"in t&&i(21,C=t.scrollBlockInteractionDist),"scrollStep"in t&&i(22,T=t.scrollStep),"scrollFocusMargin"in t&&i(23,M=t.scrollFocusMargin),"scrollDirection"in t&&i(1,P=t.scrollDirection),"scrollAutoCancel"in t&&i(24,E=t.scrollAutoCancel),"elasticity"in t&&i(25,I=t.elasticity),"onscroll"in t&&i(26,A=t.onscroll),"maskFeatherSize"in t&&i(20,D=t.maskFeatherSize),"maskFeatherStartOpacity"in t&&i(18,R=t.maskFeatherStartOpacity),"maskFeatherEndOpacity"in t&&i(19,L=t.maskFeatherEndOpacity),"scroll"in t&&i(27,O=t.scroll),"$$scope"in t&&i(36,p=t.$$scope)},t.$$.update=()=>{if(2&t.$$.dirty[0]&&i(30,n="x"===P?"width":"height"),2&t.$$.dirty[0]&&i(31,o=P.toUpperCase()),8&t.$$.dirty[0]&&i(32,r=k&&getComputedStyle(k)),8&t.$$.dirty[0]|2&t.$$.dirty[1]&&i(33,s=r&&Ll(r.getPropertyValue("--scrollable-feather-size"))),1611399172&t.$$.dirty[0]|12&t.$$.dirty[1]&&null!=h&&x&&null!=s&&b){const t=-1*h/s,e=-(x[n]-b[n]-h)/s;i(18,R=Qr(1-t,0,1)),i(19,L=Qr(1-e,0,1)),i(20,D=s),i(4,z=`--scrollable-feather-start-opacity: ${R};--scrollable-feather-end-opacity: ${L}`)}134217736&t.$$.dirty[0]&&k&&void 0!==O&&(Ke(O)?Y(O):Y(O.scrollOffset,O)),1610612740&t.$$.dirty[0]&&i(35,a=x&&b?b[n]>x[n]:void 0),268435456&t.$$.dirty[0]|16&t.$$.dirty[1]&&i(5,l=Ga([w,a?"overflows":void 0])),25&t.$$.dirty[1]&&i(6,c=a?`transform: translate${o}(${h}px)`:void 0)},[S,P,b,k,z,l,c,y,_,()=>{a&&(W=!1,H=!0,j=Q(0,0),$=!1,i(28,w="idle"),v=no(_))},({detail:t})=>{a&&($=!0,i(28,w="idle"))},({detail:t})=>{a&&(W||H&&(H=!1,pt(t.translation)<.1)||(!E||"x"!==P||(t=>{const e=lt(Q(t.x-j.x,t.y-j.y),Math.abs);j=et(t);const i=pt(e),n=e.x-e.y;return!(i>1&&n<-.5)})(t.translation)?Y(v+t.translation[P],{elastic:!0}):W=!0))},({detail:t})=>{if(!a)return;if(W)return;const e=v+t.translation[P],i=N(e);F=!1,_.set(i).then((t=>{$&&(F=!0)}))},({detail:t})=>{i(29,x=t),m("measure",{x:t.x,y:t.y,width:t.width,height:t.height})},t=>{if(!a)return;t.preventDefault(),t.stopPropagation();const e=Ol(t),i=no(_);Y(i+e*T,{animate:!0})},t=>{if(!a)return;if(!$)return;if(u.some((t=>g.includes(t))))return;let e=t.target;t.target.classList.contains("implicit")&&(e=e.parentNode);const i=e["x"===P?"offsetLeft":"offsetTop"],o=i+e["x"===P?"offsetWidth":"offsetHeight"],r=no(_),s=M+D;r+i<s?Y(-i+s):r+o>x[n]-s&&Y(x[n]-o-s,{animate:!0})},()=>{i(3,k["x"===P?"scrollLeft":"scrollTop"]=0,k)},({detail:t})=>{const e=-2*t[P],i=no(_);Y(i+e*T,{animate:!0})},R,L,D,C,T,M,E,I,A,O,w,x,n,o,r,s,h,a,p,d,t=>i(2,b=t.detail),function(t){Zo[t?"unshift":"push"]((()=>{k=t,i(3,k)}))}]}class Nl extends Er{constructor(t){super(),Pr(this,t,Bl,Fl,eo,{class:0,scrollBlockInteractionDist:21,scrollStep:22,scrollFocusMargin:23,scrollDirection:1,scrollAutoCancel:24,elasticity:25,onscroll:26,maskFeatherSize:20,maskFeatherStartOpacity:18,maskFeatherEndOpacity:19,scroll:27},[-1,-1])}}function Hl(t,{delay:e=0,duration:i=400,easing:n=Gn}={}){const o=+getComputedStyle(t).opacity;return{delay:e,duration:i,easing:n,css:t=>"opacity: "+t*o}}function Wl(t){let e,i,n,o,r,s;return{c(){e=wo("span"),i=ko(t[0]),Eo(e,"class","PinturaStatusMessage")},m(n,a){xo(n,e,a),bo(e,i),o=!0,r||(s=[To(e,"measure",(function(){to(t[1])&&t[1].apply(this,arguments)})),uo(ha.call(null,e))],r=!0)},p(e,[n]){t=e,(!o||1&n)&&Ao(i,t[0])},i(t){o||(nr((()=>{n||(n=vr(e,Hl,{},!0)),n.run(1)})),o=!0)},o(t){n||(n=vr(e,Hl,{},!1)),n.run(0),o=!1},d(t){t&&$o(e),t&&n&&n.end(),r=!1,Jn(s)}}}function jl(t,e,i){let{text:n}=e,{onmeasure:o=f}=e;return t.$$set=t=>{"text"in t&&i(0,n=t.text),"onmeasure"in t&&i(1,o=t.onmeasure)},[n,o]}class Yl extends Er{constructor(t){super(),Pr(this,t,jl,Wl,eo,{text:0,onmeasure:1})}}function Vl(t){let e,i,n,o,r,s,a,l;return{c(){e=wo("span"),i=_o("svg"),n=_o("g"),o=_o("circle"),r=_o("circle"),s=So(),a=wo("span"),l=ko(t[0]),Eo(o,"class","PinturaProgressIndicatorBar"),Eo(o,"r","8.5"),Eo(o,"cx","10"),Eo(o,"cy","10"),Eo(o,"stroke-linecap","round"),Eo(o,"opacity",".25"),Eo(r,"class","PinturaProgressIndicatorFill"),Eo(r,"r","8.5"),Eo(r,"stroke-dasharray",t[1]),Eo(r,"cx","10"),Eo(r,"cy","10"),Eo(r,"transform","rotate(-90) translate(-20)"),Eo(n,"fill","none"),Eo(n,"stroke","currentColor"),Eo(n,"stroke-width","2.5"),Eo(n,"stroke-linecap","round"),Eo(n,"opacity",t[2]),Eo(i,"width","20"),Eo(i,"height","20"),Eo(i,"viewBox","0 0 20 20"),Eo(i,"xmlns","http://www.w3.org/2000/svg"),Eo(i,"aria-hidden","true"),Eo(i,"focusable","false"),Eo(a,"class","implicit"),Eo(e,"class","PinturaProgressIndicator"),Eo(e,"data-status",t[3])},m(t,c){xo(t,e,c),bo(e,i),bo(i,n),bo(n,o),bo(n,r),bo(e,s),bo(e,a),bo(a,l)},p(t,[i]){2&i&&Eo(r,"stroke-dasharray",t[1]),4&i&&Eo(n,"opacity",t[2]),1&i&&Ao(l,t[0]),8&i&&Eo(e,"data-status",t[3])},i:Xn,o:Xn,d(t){t&&$o(e)}}}function Ul(t,e,i){let n,o,r,s,a;const l=Vo();let{progress:c}=e,{min:h=0}=e,{max:u=100}=e,{labelBusy:d="Busy"}=e;const p=Qs(0,{precision:.01}),f=Rr([p],(t=>Qr(t,h,u)));oo(t,f,(t=>i(9,a=t)));const m=f.subscribe((t=>{1===c&&Math.round(t)>=100&&l("complete")}));return Yo((()=>{m()})),t.$$set=t=>{"progress"in t&&i(5,c=t.progress),"min"in t&&i(6,h=t.min),"max"in t&&i(7,u=t.max),"labelBusy"in t&&i(8,d=t.labelBusy)},t.$$.update=()=>{32&t.$$.dirty&&c&&c!==1/0&&p.set(100*c),800&t.$$.dirty&&i(0,n=c===1/0?d:Math.round(a)+"%"),544&t.$$.dirty&&i(1,o=c===1/0?"26.5 53":a/100*53+" 53"),544&t.$$.dirty&&i(2,r=Math.min(1,c===1/0?1:a/10)),32&t.$$.dirty&&i(3,s=c===1/0?"busy":"loading")},[n,o,r,s,f,c,h,u,d,a]}class ql extends Er{constructor(t){super(),Pr(this,t,Ul,Vl,eo,{progress:5,min:6,max:7,labelBusy:8})}}function Xl(t){let e,i,n;const o=t[5].default,r=ro(o,t,t[4],null);return{c(){e=wo("span"),r&&r.c(),Eo(e,"class",i="PinturaStatusAside "+t[0]),Eo(e,"style",t[1])},m(t,i){xo(t,e,i),r&&r.m(e,null),n=!0},p(t,[s]){r&&r.p&&16&s&&ao(r,o,t,t[4],s,null,null),(!n||1&s&&i!==(i="PinturaStatusAside "+t[0]))&&Eo(e,"class",i),(!n||2&s)&&Eo(e,"style",t[1])},i(t){n||(mr(r,t),n=!0)},o(t){gr(r,t),n=!1},d(t){t&&$o(e),r&&r.d(t)}}}function Gl(t,e,i){let n,{$$slots:o={},$$scope:r}=e,{offset:s=0}=e,{opacity:a=0}=e,{class:l}=e;return t.$$set=t=>{"offset"in t&&i(2,s=t.offset),"opacity"in t&&i(3,a=t.opacity),"class"in t&&i(0,l=t.class),"$$scope"in t&&i(4,r=t.$$scope)},t.$$.update=()=>{12&t.$$.dirty&&i(1,n=`transform:translateX(${s}px);opacity:${a}`)},[l,n,s,a,r,o]}class Zl extends Er{constructor(t){super(),Pr(this,t,Gl,Xl,eo,{offset:2,opacity:3,class:0})}}function Kl(t){let e,i,n;const o=t[3].default,r=ro(o,t,t[2],null);let s=[{for:i="_"},t[1]],a={};for(let t=0;t<s.length;t+=1)a=Zn(a,s[t]);return{c(){e=wo("label"),r&&r.c(),Io(e,a)},m(t,i){xo(t,e,i),r&&r.m(e,null),n=!0},p(t,i){r&&r.p&&4&i&&ao(r,o,t,t[2],i,null,null),Io(e,a=_r(s,[{for:"_"},2&i&&t[1]]))},i(t){n||(mr(r,t),n=!0)},o(t){gr(r,t),n=!1},d(t){t&&$o(e),r&&r.d(t)}}}function Ql(t){let e,i;const n=t[3].default,o=ro(n,t,t[2],null);let r=[t[1]],s={};for(let t=0;t<r.length;t+=1)s=Zn(s,r[t]);return{c(){e=wo("div"),o&&o.c(),Io(e,s)},m(t,n){xo(t,e,n),o&&o.m(e,null),i=!0},p(t,i){o&&o.p&&4&i&&ao(o,n,t,t[2],i,null,null),Io(e,s=_r(r,[2&i&&t[1]]))},i(t){i||(mr(o,t),i=!0)},o(t){gr(o,t),i=!1},d(t){t&&$o(e),o&&o.d(t)}}}function Jl(t){let e,i;const n=t[3].default,o=ro(n,t,t[2],null);let r=[t[1]],s={};for(let t=0;t<r.length;t+=1)s=Zn(s,r[t]);return{c(){e=wo("div"),o&&o.c(),Io(e,s)},m(t,n){xo(t,e,n),o&&o.m(e,null),i=!0},p(t,i){o&&o.p&&4&i&&ao(o,n,t,t[2],i,null,null),Io(e,s=_r(r,[2&i&&t[1]]))},i(t){i||(mr(o,t),i=!0)},o(t){gr(o,t),i=!1},d(t){t&&$o(e),o&&o.d(t)}}}function tc(t){let e,i,n,o;const r=[Jl,Ql,Kl],s=[];function a(t,e){return"div"===t[0]?0:"span"===t[0]?1:"label"===t[0]?2:-1}return~(e=a(t))&&(i=s[e]=r[e](t)),{c(){i&&i.c(),n=Co()},m(t,i){~e&&s[e].m(t,i),xo(t,n,i),o=!0},p(t,[o]){let l=e;e=a(t),e===l?~e&&s[e].p(t,o):(i&&(pr(),gr(s[l],1,1,(()=>{s[l]=null})),fr()),~e?(i=s[e],i?i.p(t,o):(i=s[e]=r[e](t),i.c()),mr(i,1),i.m(n.parentNode,n)):i=null)},i(t){o||(mr(i),o=!0)},o(t){gr(i),o=!1},d(t){~e&&s[e].d(t),t&&$o(n)}}}function ec(t,e,i){let{$$slots:n={},$$scope:o}=e,{name:r="div"}=e,{attributes:s={}}=e;return t.$$set=t=>{"name"in t&&i(0,r=t.name),"attributes"in t&&i(1,s=t.attributes),"$$scope"in t&&i(2,o=t.$$scope)},[r,s,o,n]}class ic extends Er{constructor(t){super(),Pr(this,t,ec,tc,eo,{name:0,attributes:1})}}var nc=()=>n()&&window.devicePixelRatio||1;let oc=null;var rc=t=>(null===oc&&(oc=1===nc()?Math.round:t=>t),oc(t)),sc=(t,e={})=>{if(t){if(e.preventScroll&&ke()){const e=document.body.scrollTop;return t.focus(),void(document.body.scrollTop=e)}t.focus(e)}};const ac=t=>({}),lc=t=>({}),cc=t=>({}),hc=t=>({});function uc(t){let e,i;const n=[t[10]];let o={$$slots:{default:[pc]},$$scope:{ctx:t}};for(let t=0;t<n.length;t+=1)o=Zn(o,n[t]);return e=new Pl({props:o}),t[37](e),{c(){Cr(e.$$.fragment)},m(t,n){Tr(e,t,n),i=!0},p(t,i){const o=1024&i[0]?_r(n,[kr(t[10])]):{};512&i[1]&&(o.$$scope={dirty:i,ctx:t}),e.$set(o)},i(t){i||(mr(e.$$.fragment,t),i=!0)},o(t){gr(e.$$.fragment,t),i=!1},d(i){t[37](null),Mr(e,i)}}}function dc(t){let e,i;const n=[t[10]];let o={};for(let t=0;t<n.length;t+=1)o=Zn(o,n[t]);return e=new Pl({props:o}),t[36](e),{c(){Cr(e.$$.fragment)},m(t,n){Tr(e,t,n),i=!0},p(t,i){const o=1024&i[0]?_r(n,[kr(t[10])]):{};e.$set(o)},i(t){i||(mr(e.$$.fragment,t),i=!0)},o(t){gr(e.$$.fragment,t),i=!1},d(i){t[36](null),Mr(e,i)}}}function pc(t){let e;const i=t[35].label,n=ro(i,t,t[40],hc);return{c(){n&&n.c()},m(t,i){n&&n.m(t,i),e=!0},p(t,e){n&&n.p&&512&e[1]&&ao(n,i,t,t[40],e,cc,hc)},i(t){e||(mr(n,t),e=!0)},o(t){gr(n,t),e=!1},d(t){n&&n.d(t)}}}function fc(t){let e,i,n,o,r,s,a;const l=t[35].details,c=ro(l,t,t[40],lc);return{c(){e=wo("div"),c&&c.c(),i=So(),n=wo("span"),Eo(n,"class","PinturaPanelTip"),Eo(n,"style",t[7]),Eo(e,"class",o=Ga(["PinturaPanel",t[1]])),Eo(e,"tabindex","-1"),Eo(e,"style",t[6])},m(o,l){xo(o,e,l),c&&c.m(e,null),bo(e,i),bo(e,n),t[38](e),r=!0,s||(a=[To(e,"keydown",t[16]),To(e,"measure",t[39]),uo(ha.call(null,e))],s=!0)},p(t,i){c&&c.p&&512&i[1]&&ao(c,l,t,t[40],i,ac,lc),(!r||128&i[0])&&Eo(n,"style",t[7]),(!r||2&i[0]&&o!==(o=Ga(["PinturaPanel",t[1]])))&&Eo(e,"class",o),(!r||64&i[0])&&Eo(e,"style",t[6])},i(t){r||(mr(c,t),r=!0)},o(t){gr(c,t),r=!1},d(i){i&&$o(e),c&&c.d(i),t[38](null),s=!1,Jn(a)}}}function mc(t){let e,i,n,o,r,s,a,l,c;const h=[dc,uc],u=[];function d(t,e){return t[0]?0:1}i=d(t),n=u[i]=h[i](t);let p=t[5]&&fc(t);return{c(){e=So(),n.c(),o=So(),p&&p.c(),r=So(),s=Co()},m(n,h){xo(n,e,h),u[i].m(n,h),xo(n,o,h),p&&p.m(n,h),xo(n,r,h),xo(n,s,h),a=!0,l||(c=[To(document.body,"pointerdown",(function(){to(t[8])&&t[8].apply(this,arguments)})),To(document.body,"pointerup",(function(){to(t[9])&&t[9].apply(this,arguments)}))],l=!0)},p(e,s){let a=i;i=d(t=e),i===a?u[i].p(t,s):(pr(),gr(u[a],1,1,(()=>{u[a]=null})),fr(),n=u[i],n?n.p(t,s):(n=u[i]=h[i](t),n.c()),mr(n,1),n.m(o.parentNode,o)),t[5]?p?(p.p(t,s),32&s[0]&&mr(p,1)):(p=fc(t),p.c(),mr(p,1),p.m(r.parentNode,r)):p&&(pr(),gr(p,1,1,(()=>{p=null})),fr())},i(t){a||(mr(n),mr(p),mr(!1),a=!0)},o(t){gr(n),gr(p),gr(!1),a=!1},d(t){t&&$o(e),u[i].d(t),t&&$o(o),p&&p.d(t),t&&$o(r),t&&$o(s),l=!1,Jn(c)}}}let gc=12;function yc(t,e,i){let n,o,r,s,a,l,c,h,u,d,p,f,m,g,y,v,b,{$$slots:x={},$$scope:$}=e,{buttonClass:w}=e,{buttonLabel:_}=e,{panelClass:k}=e,{isActive:S=!1}=e,{onshow:C=(({panel:t})=>sc(t,{preventScroll:!0}))}=e;const T=qo("rootPortal");oo(t,T,(t=>i(34,b=t)));const M=qo("rootRect");let P,E,I;oo(t,M,(t=>i(27,g=t)));const A=()=>i(20,I=n&&n.getBoundingClientRect());let D=K(),R=Qs(0);oo(t,R,(t=>i(29,v=t)));let L=K();const O=Dr({x:0,y:0});oo(t,O,(t=>i(28,y=t)));const z=Qs(-5,{stiffness:.1,damping:.35,precision:.001});oo(t,z,(t=>i(26,m=t)));const F=t=>_l(t,b)||E.isEventTarget(t);let B,N,H=!1;const W=t=>{S||A(),i(24,N=t),i(17,S=!S)},j=t=>{/down/i.test(t.key)&&(i(17,S=!0),i(24,N=t))};return Yo((()=>{if(!b)return;if(!B)return;const t=B;ir().then((()=>{t.parentNode&&t.remove()}))})),t.$$set=t=>{"buttonClass"in t&&i(18,w=t.buttonClass),"buttonLabel"in t&&i(0,_=t.buttonLabel),"panelClass"in t&&i(1,k=t.panelClass),"isActive"in t&&i(17,S=t.isActive),"onshow"in t&&i(19,C=t.onshow),"$$scope"in t&&i(40,$=t.$$scope)},t.$$.update=()=>{if(8&t.$$.dirty[0]&&(n=E&&E.getElement()),8519680&t.$$.dirty[0]&&i(9,p=S?t=>{H&&(i(23,H=!1),F(t)||i(17,S=!1))}:void 0),131072&t.$$.dirty[0]&&R.set(S?1:0),131072&t.$$.dirty[0]&&z.set(S?0:-5),67108864&t.$$.dirty[0]&&i(25,o=1-m/-5),134348800&t.$$.dirty[0]&&g&&S&&A(),135397380&t.$$.dirty[0]&&g&&P&&I&&S){let t=I.x-g.x+.5*I.width-.5*P.width,e=I.y-g.y+I.height;const n=gc,o=gc,r=g.width-gc,s=g.height-gc,a=t,l=e,c=a+P.width,h=l+P.height;a<n&&(i(22,L.x=a-n,L),t=n),c>r&&(i(22,L.x=c-r,L),t=r-P.width),h>s?(i(21,D.y=-1,D),o<e-P.height-I.height?(i(22,L.y=0,L),e-=P.height+I.height):(i(22,L.y=e-(h-s),L),e-=h-s)):i(21,D.y=1,D),ho(O,y=lt(Q(t,e),rc),y)}536870912&t.$$.dirty[0]&&i(5,r=v>0),536870912&t.$$.dirty[0]&&i(30,s=v<1),337641472&t.$$.dirty[0]&&i(31,a=`translateX(${Math.round(y.x)+D.x*gc}px) translateY(${Math.round(y.y)+D.y*gc+D.y*m}px)`),1610612736&t.$$.dirty[0]|1&t.$$.dirty[1]&&i(6,l=s?`opacity: ${v}; pointer-events: ${v<1?"none":"all"}; transform: ${a};`:"transform: "+a),33554432&t.$$.dirty[0]&&i(32,c=.5+.5*o),33554432&t.$$.dirty[0]&&i(33,h=o),274726916&t.$$.dirty[0]|6&t.$$.dirty[1]&&i(7,u=y&&P&&`opacity:${h};transform:scaleX(${c})rotate(45deg);top:${D.y<0?L.y+P.height:0}px;left:${L.x+.5*P.width}px`),131072&t.$$.dirty[0]&&i(8,d=S?t=>{F(t)||i(23,H=!0)}:void 0),48&t.$$.dirty[0]|8&t.$$.dirty[1]&&r&&b&&B&&B.parentNode!==b&&b.append(B),131072&t.$$.dirty[0]&&(S||i(24,N=void 0)),17301552&t.$$.dirty[0]&&r&&B&&C({e:N,panel:B}),262145&t.$$.dirty[0]&&i(10,f={label:_,class:Ga(["PinturaPanelButton",w]),onkeydown:j,onclick:W})},[_,k,P,E,B,r,l,u,d,p,f,T,M,R,O,z,t=>{/esc/i.test(t.key)&&(i(17,S=!1),n.focus())},S,w,C,I,D,L,H,N,o,m,g,y,v,s,a,c,h,b,x,function(t){Zo[t?"unshift":"push"]((()=>{E=t,i(3,E)}))},function(t){Zo[t?"unshift":"push"]((()=>{E=t,i(3,E)}))},function(t){Zo[t?"unshift":"push"]((()=>{B=t,i(4,B)}))},t=>i(2,P=$t(t.detail)),$]}class vc extends Er{constructor(t){super(),Pr(this,t,yc,mc,eo,{buttonClass:18,buttonLabel:0,panelClass:1,isActive:17,onshow:19},[-1,-1])}}function bc(t){let e,i,n,o,r,s,a,l;const c=t[15].default,h=ro(c,t,t[14],null);return{c(){e=wo("li"),i=wo("input"),n=So(),o=wo("label"),h&&h.c(),Eo(i,"type","radio"),Eo(i,"class","implicit"),Eo(i,"id",t[7]),Eo(i,"name",t[0]),i.value=t[3],i.disabled=t[6],i.hidden=t[5],i.checked=t[4],Eo(o,"for",t[7]),Eo(o,"title",t[2]),Eo(e,"class",r=Ga(["PinturaRadioGroupOption",t[1]])),Eo(e,"data-hidden",t[5]),Eo(e,"data-disabled",t[6]),Eo(e,"data-selected",t[4])},m(r,c){xo(r,e,c),bo(e,i),bo(e,n),bo(e,o),h&&h.m(o,null),s=!0,a||(l=[To(i,"change",Po(t[16])),To(i,"keydown",t[9]),To(i,"click",t[10])],a=!0)},p(t,[n]){(!s||128&n)&&Eo(i,"id",t[7]),(!s||1&n)&&Eo(i,"name",t[0]),(!s||8&n)&&(i.value=t[3]),(!s||64&n)&&(i.disabled=t[6]),(!s||32&n)&&(i.hidden=t[5]),(!s||16&n)&&(i.checked=t[4]),h&&h.p&&16384&n&&ao(h,c,t,t[14],n,null,null),(!s||128&n)&&Eo(o,"for",t[7]),(!s||4&n)&&Eo(o,"title",t[2]),(!s||2&n&&r!==(r=Ga(["PinturaRadioGroupOption",t[1]])))&&Eo(e,"class",r),(!s||32&n)&&Eo(e,"data-hidden",t[5]),(!s||64&n)&&Eo(e,"data-disabled",t[6]),(!s||16&n)&&Eo(e,"data-selected",t[4])},i(t){s||(mr(h,t),s=!0)},o(t){gr(h,t),s=!1},d(t){t&&$o(e),h&&h.d(t),a=!1,Jn(l)}}}function xc(t,e,i){let n,o,{$$slots:r={},$$scope:s}=e,{name:a}=e,{class:l}=e,{label:c}=e,{id:h}=e,{value:u}=e,{checked:d}=e,{onkeydown:p}=e,{onclick:f}=e,{hidden:m=!1}=e,{disabled:g=!1}=e;const y=Object.values(zl),v=qo("keysPressed");return oo(t,v,(t=>i(17,o=t))),t.$$set=t=>{"name"in t&&i(0,a=t.name),"class"in t&&i(1,l=t.class),"label"in t&&i(2,c=t.label),"id"in t&&i(11,h=t.id),"value"in t&&i(3,u=t.value),"checked"in t&&i(4,d=t.checked),"onkeydown"in t&&i(12,p=t.onkeydown),"onclick"in t&&i(13,f=t.onclick),"hidden"in t&&i(5,m=t.hidden),"disabled"in t&&i(6,g=t.disabled),"$$scope"in t&&i(14,s=t.$$scope)},t.$$.update=()=>{2049&t.$$.dirty&&i(7,n=`${a}-${h}`)},[a,l,c,u,d,m,g,n,v,t=>{p(t)},t=>{o.some((t=>y.includes(t)))||f(t)},h,p,f,s,r,function(e){Xo(t,e)}]}class $c extends Er{constructor(t){super(),Pr(this,t,xc,bc,eo,{name:0,class:1,label:2,id:11,value:3,checked:4,onkeydown:12,onclick:13,hidden:5,disabled:6})}}var wc=(t=[])=>t.reduce(((t,e)=>(ti(e)?ti(e[1]):e.options)?t.concat(ti(e)?e[1]:e.options):(t.push(e),t)),[]);const _c=(t,e,i)=>{let n;return ti(t)?n={id:e,value:t[0],label:t[1],...t[2]||{}}:(n=t,n.id=null!=n.id?n.id:e),i?i(n):n};var kc=(t,e,i)=>P(t)?t(e,i):t;const Sc=(t,e)=>t.map((([t,i,n])=>{if(ti(i))return[kc(t,e),Sc(i,e)];{const o=[t,kc(i,e)];if(n){let t={...n};n.icon&&(t.icon=kc(n.icon,e)),o.push(t)}return o}}));var Cc=(t,e)=>Sc(t,e),Tc=(t,e)=>Array.isArray(t)&&Array.isArray(e)?is(t,e):t===e;function Mc(t,e,i){const n=t.slice();return n[27]=e[i],n}const Pc=t=>({option:2048&t[0]}),Ec=t=>({option:t[27]});function Ic(t,e,i){const n=t.slice();return n[27]=e[i],n}const Ac=t=>({option:2048&t[0]}),Dc=t=>({option:t[27]}),Rc=t=>({option:2048&t[0]}),Lc=t=>({option:t[27]});function Oc(t){let e,i,n,o,r,s=[],a=new Map,l=t[1]&&zc(t),c=t[11];const h=t=>t[27].id;for(let e=0;e<c.length;e+=1){let i=Mc(t,c,e),n=h(i);a.set(n,s[e]=Gc(n,i))}return{c(){e=wo("fieldset"),l&&l.c(),i=So(),n=wo("ul");for(let t=0;t<s.length;t+=1)s[t].c();Eo(n,"class","PinturaRadioGroupOptions"),Eo(e,"class",o=Ga(["PinturaRadioGroup",t[3]])),Eo(e,"data-layout",t[5]),Eo(e,"title",t[7])},m(t,o){xo(t,e,o),l&&l.m(e,null),bo(e,i),bo(e,n);for(let t=0;t<s.length;t+=1)s[t].m(n,null);r=!0},p(t,u){t[1]?l?l.p(t,u):(l=zc(t),l.c(),l.m(e,i)):l&&(l.d(1),l=null),8420177&u[0]&&(c=t[11],pr(),s=wr(s,u,h,1,t,c,a,n,$r,Gc,null,Mc),fr()),(!r||8&u[0]&&o!==(o=Ga(["PinturaRadioGroup",t[3]])))&&Eo(e,"class",o),(!r||32&u[0])&&Eo(e,"data-layout",t[5]),(!r||128&u[0])&&Eo(e,"title",t[7])},i(t){if(!r){for(let t=0;t<c.length;t+=1)mr(s[t]);r=!0}},o(t){for(let t=0;t<s.length;t+=1)gr(s[t]);r=!1},d(t){t&&$o(e),l&&l.d();for(let t=0;t<s.length;t+=1)s[t].d()}}}function zc(t){let e,i,n;return{c(){e=wo("legend"),i=ko(t[1]),Eo(e,"class",n=t[2]&&"implicit")},m(t,n){xo(t,e,n),bo(e,i)},p(t,o){2&o[0]&&Ao(i,t[1]),4&o[0]&&n!==(n=t[2]&&"implicit")&&Eo(e,"class",n)},d(t){t&&$o(e)}}}function Fc(t){let e,i;return e=new $c({props:{name:t[4],label:t[27].label,id:t[27].id,value:t[27].value,disabled:t[27].disabled,hidden:t[27].hidden,class:t[8],checked:t[12](t[27])===t[0],onkeydown:t[13](t[27]),onclick:t[14](t[27]),$$slots:{default:[jc]},$$scope:{ctx:t}}}),{c(){Cr(e.$$.fragment)},m(t,n){Tr(e,t,n),i=!0},p(t,i){const n={};16&i[0]&&(n.name=t[4]),2048&i[0]&&(n.label=t[27].label),2048&i[0]&&(n.id=t[27].id),2048&i[0]&&(n.value=t[27].value),2048&i[0]&&(n.disabled=t[27].disabled),2048&i[0]&&(n.hidden=t[27].hidden),256&i[0]&&(n.class=t[8]),2049&i[0]&&(n.checked=t[12](t[27])===t[0]),2048&i[0]&&(n.onkeydown=t[13](t[27])),2048&i[0]&&(n.onclick=t[14](t[27])),8390720&i[0]&&(n.$$scope={dirty:i,ctx:t}),e.$set(n)},i(t){i||(mr(e.$$.fragment,t),i=!0)},o(t){gr(e.$$.fragment,t),i=!1},d(t){Mr(e,t)}}}function Bc(t){let e,i,n,o,r,s,a=[],l=new Map;const c=t[22].group,h=ro(c,t,t[23],Lc),u=h||function(t){let e,i,n=t[27].label+"";return{c(){e=wo("span"),i=ko(n),Eo(e,"class","PinturaRadioGroupOptionGroupLabel")},m(t,n){xo(t,e,n),bo(e,i)},p(t,e){2048&e[0]&&n!==(n=t[27].label+"")&&Ao(i,n)},d(t){t&&$o(e)}}}(t);let d=t[27].options;const p=t=>t[27].id;for(let e=0;e<d.length;e+=1){let i=Ic(t,d,e),n=p(i);l.set(n,a[e]=Xc(n,i))}return{c(){e=wo("li"),u&&u.c(),i=So(),n=wo("ul");for(let t=0;t<a.length;t+=1)a[t].c();o=So(),Eo(n,"class","PinturaRadioGroupOptions"),Eo(e,"class",r=Ga(["PinturaRadioGroupOptionGroup",t[9]]))},m(t,r){xo(t,e,r),u&&u.m(e,null),bo(e,i),bo(e,n);for(let t=0;t<a.length;t+=1)a[t].m(n,null);bo(e,o),s=!0},p(t,i){h?h.p&&8390656&i[0]&&ao(h,c,t,t[23],i,Rc,Lc):u&&u.p&&2048&i[0]&&u.p(t,i),8419665&i[0]&&(d=t[27].options,pr(),a=wr(a,i,p,1,t,d,l,n,$r,Xc,null,Ic),fr()),(!s||512&i[0]&&r!==(r=Ga(["PinturaRadioGroupOptionGroup",t[9]])))&&Eo(e,"class",r)},i(t){if(!s){mr(u,t);for(let t=0;t<d.length;t+=1)mr(a[t]);s=!0}},o(t){gr(u,t);for(let t=0;t<a.length;t+=1)gr(a[t]);s=!1},d(t){t&&$o(e),u&&u.d(t);for(let t=0;t<a.length;t+=1)a[t].d()}}}function Nc(t){let e,i;return e=new wl({props:{$$slots:{default:[Hc]},$$scope:{ctx:t}}}),{c(){Cr(e.$$.fragment)},m(t,n){Tr(e,t,n),i=!0},p(t,i){const n={};8390656&i[0]&&(n.$$scope={dirty:i,ctx:t}),e.$set(n)},i(t){i||(mr(e.$$.fragment,t),i=!0)},o(t){gr(e.$$.fragment,t),i=!1},d(t){Mr(e,t)}}}function Hc(t){let e,i=t[27].icon+"";return{c(){e=_o("g")},m(t,n){xo(t,e,n),e.innerHTML=i},p(t,n){2048&n[0]&&i!==(i=t[27].icon+"")&&(e.innerHTML=i)},d(t){t&&$o(e)}}}function Wc(t){let e,i,n=t[27].label+"";return{c(){e=wo("span"),i=ko(n),Eo(e,"class",t[6])},m(t,n){xo(t,e,n),bo(e,i)},p(t,o){2048&o[0]&&n!==(n=t[27].label+"")&&Ao(i,n),64&o[0]&&Eo(e,"class",t[6])},d(t){t&&$o(e)}}}function jc(t){let e;const i=t[22].option,n=ro(i,t,t[23],Ec),o=n||function(t){let e,i,n,o=t[27].icon&&Nc(t),r=!t[27].hideLabel&&Wc(t);return{c(){o&&o.c(),e=So(),r&&r.c(),i=So()},m(t,s){o&&o.m(t,s),xo(t,e,s),r&&r.m(t,s),xo(t,i,s),n=!0},p(t,n){t[27].icon?o?(o.p(t,n),2048&n[0]&&mr(o,1)):(o=Nc(t),o.c(),mr(o,1),o.m(e.parentNode,e)):o&&(pr(),gr(o,1,1,(()=>{o=null})),fr()),t[27].hideLabel?r&&(r.d(1),r=null):r?r.p(t,n):(r=Wc(t),r.c(),r.m(i.parentNode,i))},i(t){n||(mr(o),n=!0)},o(t){gr(o),n=!1},d(t){o&&o.d(t),t&&$o(e),r&&r.d(t),t&&$o(i)}}}(t);return{c(){o&&o.c()},m(t,i){o&&o.m(t,i),e=!0},p(t,e){n?n.p&&8390656&e[0]&&ao(n,i,t,t[23],e,Pc,Ec):o&&o.p&&2112&e[0]&&o.p(t,e)},i(t){e||(mr(o,t),e=!0)},o(t){gr(o,t),e=!1},d(t){o&&o.d(t)}}}function Yc(t){let e,i;return e=new wl({props:{$$slots:{default:[Vc]},$$scope:{ctx:t}}}),{c(){Cr(e.$$.fragment)},m(t,n){Tr(e,t,n),i=!0},p(t,i){const n={};8390656&i[0]&&(n.$$scope={dirty:i,ctx:t}),e.$set(n)},i(t){i||(mr(e.$$.fragment,t),i=!0)},o(t){gr(e.$$.fragment,t),i=!1},d(t){Mr(e,t)}}}function Vc(t){let e,i=t[27].icon+"";return{c(){e=_o("g")},m(t,n){xo(t,e,n),e.innerHTML=i},p(t,n){2048&n[0]&&i!==(i=t[27].icon+"")&&(e.innerHTML=i)},d(t){t&&$o(e)}}}function Uc(t){let e,i,n=t[27].label+"";return{c(){e=wo("span"),i=ko(n),Eo(e,"class",t[6])},m(t,n){xo(t,e,n),bo(e,i)},p(t,o){2048&o[0]&&n!==(n=t[27].label+"")&&Ao(i,n),64&o[0]&&Eo(e,"class",t[6])},d(t){t&&$o(e)}}}function qc(t){let e;const i=t[22].option,n=ro(i,t,t[23],Dc),o=n||function(t){let e,i,n,o=t[27].icon&&Yc(t),r=!t[27].hideLabel&&Uc(t);return{c(){o&&o.c(),e=So(),r&&r.c(),i=So()},m(t,s){o&&o.m(t,s),xo(t,e,s),r&&r.m(t,s),xo(t,i,s),n=!0},p(t,n){t[27].icon?o?(o.p(t,n),2048&n[0]&&mr(o,1)):(o=Yc(t),o.c(),mr(o,1),o.m(e.parentNode,e)):o&&(pr(),gr(o,1,1,(()=>{o=null})),fr()),t[27].hideLabel?r&&(r.d(1),r=null):r?r.p(t,n):(r=Uc(t),r.c(),r.m(i.parentNode,i))},i(t){n||(mr(o),n=!0)},o(t){gr(o),n=!1},d(t){o&&o.d(t),t&&$o(e),r&&r.d(t),t&&$o(i)}}}(t);return{c(){o&&o.c()},m(t,i){o&&o.m(t,i),e=!0},p(t,e){n?n.p&&8390656&e[0]&&ao(n,i,t,t[23],e,Ac,Dc):o&&o.p&&2112&e[0]&&o.p(t,e)},i(t){e||(mr(o,t),e=!0)},o(t){gr(o,t),e=!1},d(t){o&&o.d(t)}}}function Xc(t,e){let i,n,o;return n=new $c({props:{name:e[4],label:e[27].label,id:e[27].id,value:e[27].value,disabled:e[27].disabled,hidden:e[27].hidden,class:e[8],checked:e[12](e[27])===e[0],onkeydown:e[13](e[27]),onclick:e[14](e[27]),$$slots:{default:[qc]},$$scope:{ctx:e}}}),{key:t,first:null,c(){i=Co(),Cr(n.$$.fragment),this.first=i},m(t,e){xo(t,i,e),Tr(n,t,e),o=!0},p(t,i){e=t;const o={};16&i[0]&&(o.name=e[4]),2048&i[0]&&(o.label=e[27].label),2048&i[0]&&(o.id=e[27].id),2048&i[0]&&(o.value=e[27].value),2048&i[0]&&(o.disabled=e[27].disabled),2048&i[0]&&(o.hidden=e[27].hidden),256&i[0]&&(o.class=e[8]),2049&i[0]&&(o.checked=e[12](e[27])===e[0]),2048&i[0]&&(o.onkeydown=e[13](e[27])),2048&i[0]&&(o.onclick=e[14](e[27])),8390720&i[0]&&(o.$$scope={dirty:i,ctx:e}),n.$set(o)},i(t){o||(mr(n.$$.fragment,t),o=!0)},o(t){gr(n.$$.fragment,t),o=!1},d(t){t&&$o(i),Mr(n,t)}}}function Gc(t,e){let i,n,o,r,s;const a=[Bc,Fc],l=[];function c(t,e){return t[27].options?0:1}return n=c(e),o=l[n]=a[n](e),{key:t,first:null,c(){i=Co(),o.c(),r=Co(),this.first=i},m(t,e){xo(t,i,e),l[n].m(t,e),xo(t,r,e),s=!0},p(t,i){let s=n;n=c(e=t),n===s?l[n].p(e,i):(pr(),gr(l[s],1,1,(()=>{l[s]=null})),fr(),o=l[n],o?o.p(e,i):(o=l[n]=a[n](e),o.c()),mr(o,1),o.m(r.parentNode,r))},i(t){s||(mr(o),s=!0)},o(t){gr(o),s=!1},d(t){t&&$o(i),l[n].d(t),t&&$o(r)}}}function Zc(t){let e,i,n,o=t[10].length&&Oc(t);return{c(){o&&o.c(),e=So(),i=Co()},m(t,r){o&&o.m(t,r),xo(t,e,r),xo(t,i,r),n=!0},p(t,i){t[10].length?o?(o.p(t,i),1024&i[0]&&mr(o,1)):(o=Oc(t),o.c(),mr(o,1),o.m(e.parentNode,e)):o&&(pr(),gr(o,1,1,(()=>{o=null})),fr())},i(t){n||(mr(o),mr(!1),n=!0)},o(t){gr(o),gr(!1),n=!1},d(t){o&&o.d(t),t&&$o(e),t&&$o(i)}}}function Kc(t,e,i){let n,o,r,{$$slots:s={},$$scope:a}=e;const l=Vo();let{label:c}=e,{hideLabel:h=!0}=e,{class:u}=e,{name:d="radio-group-"+A()}=e,{selectedIndex:p=-1}=e,{options:f=[]}=e,{onchange:m}=e,{layout:g}=e,{optionMapper:y}=e,{optionFilter:v}=e,{value:b}=e,{optionLabelClass:x}=e,{title:$}=e,{locale:w}=e,{optionClass:_}=e,{optionGroupClass:k}=e;const S=t=>r.findIndex((e=>e.id===t.id)),C=(t,e)=>{i(0,p=S(t));const n={index:p,...t};((t,...e)=>{t&&t(...e)})(m,n,e),l("change",n)};return t.$$set=t=>{"label"in t&&i(1,c=t.label),"hideLabel"in t&&i(2,h=t.hideLabel),"class"in t&&i(3,u=t.class),"name"in t&&i(4,d=t.name),"selectedIndex"in t&&i(0,p=t.selectedIndex),"options"in t&&i(15,f=t.options),"onchange"in t&&i(16,m=t.onchange),"layout"in t&&i(5,g=t.layout),"optionMapper"in t&&i(17,y=t.optionMapper),"optionFilter"in t&&i(18,v=t.optionFilter),"value"in t&&i(19,b=t.value),"optionLabelClass"in t&&i(6,x=t.optionLabelClass),"title"in t&&i(7,$=t.title),"locale"in t&&i(20,w=t.locale),"optionClass"in t&&i(8,_=t.optionClass),"optionGroupClass"in t&&i(9,k=t.optionGroupClass),"$$scope"in t&&i(23,a=t.$$scope)},t.$$.update=()=>{1343488&t.$$.dirty[0]&&i(10,n=Cc(v?f.filter(v):f,w)),132096&t.$$.dirty[0]&&i(11,o=((t=[],e)=>{let i=0;return t.map((t=>(i++,ti(t)?ti(t[1])?{id:i,label:t[0],options:t[1].map((t=>_c(t,++i,e)))}:_c(t,i,e):t.options?{id:t.id||i,label:t.label,options:t.options.map((t=>_c(t,++i,e)))}:_c(t,i,e))))})(n,y)),2048&t.$$.dirty[0]&&i(21,r=wc(o)),2654209&t.$$.dirty[0]&&p<0&&(i(0,p=r.findIndex((t=>Tc(t.value,b)))),p<0&&i(0,p=(t=>t.findIndex((t=>void 0===t[0])))(f)))},[p,c,h,u,d,g,x,$,_,k,n,o,S,t=>e=>{var i;i=e.key,/enter| /i.test(i)&&C(t,e)},t=>e=>{C(t,e)},f,m,y,v,b,w,r,s,a]}class Qc extends Er{constructor(t){super(),Pr(this,t,Kc,Zc,eo,{label:1,hideLabel:2,class:3,name:4,selectedIndex:0,options:15,onchange:16,layout:5,optionMapper:17,optionFilter:18,value:19,optionLabelClass:6,title:7,locale:20,optionClass:8,optionGroupClass:9},[-1,-1])}}const Jc=t=>({}),th=t=>({});function eh(t){let e,i;return e=new wl({props:{class:"PinturaButtonIcon",$$slots:{default:[ih]},$$scope:{ctx:t}}}),{c(){Cr(e.$$.fragment)},m(t,n){Tr(e,t,n),i=!0},p(t,i){const n={};268435520&i&&(n.$$scope={dirty:i,ctx:t}),e.$set(n)},i(t){i||(mr(e.$$.fragment,t),i=!0)},o(t){gr(e.$$.fragment,t),i=!1},d(t){Mr(e,t)}}}function ih(t){let e;return{c(){e=_o("g")},m(i,n){xo(i,e,n),e.innerHTML=t[6]},p(t,i){64&i&&(e.innerHTML=t[6])},d(t){t&&$o(e)}}}function nh(t){let e,i,n,o,r,s,a,l,c=(t[2]||t[18])+"",h=t[6]&&eh(t);return{c(){e=wo("span"),h&&h.c(),i=So(),n=wo("span"),o=ko(c),Eo(n,"class",r=Ga(["PinturaButtonLabel",t[3],t[5]&&"implicit"])),Eo(e,"slot","label"),Eo(e,"title",s=kc(t[1],t[15])),Eo(e,"class",a=Ga(["PinturaButtonInner",t[4]]))},m(t,r){xo(t,e,r),h&&h.m(e,null),bo(e,i),bo(e,n),bo(n,o),l=!0},p(t,u){t[6]?h?(h.p(t,u),64&u&&mr(h,1)):(h=eh(t),h.c(),mr(h,1),h.m(e,i)):h&&(pr(),gr(h,1,1,(()=>{h=null})),fr()),(!l||262148&u)&&c!==(c=(t[2]||t[18])+"")&&Ao(o,c),(!l||40&u&&r!==(r=Ga(["PinturaButtonLabel",t[3],t[5]&&"implicit"])))&&Eo(n,"class",r),(!l||32770&u&&s!==(s=kc(t[1],t[15])))&&Eo(e,"title",s),(!l||16&u&&a!==(a=Ga(["PinturaButtonInner",t[4]])))&&Eo(e,"class",a)},i(t){l||(mr(h),l=!0)},o(t){gr(h),l=!1},d(t){t&&$o(e),h&&h.d()}}}function oh(t){let e,i,n=t[30].label+"";return{c(){e=wo("span"),i=ko(n),Eo(e,"slot","group")},m(t,n){xo(t,e,n),bo(e,i)},p(t,e){1073741824&e&&n!==(n=t[30].label+"")&&Ao(i,n)},d(t){t&&$o(e)}}}function rh(t){let e,i;return e=new wl({props:{style:P(t[13])?t[13](t[30].value):t[13],$$slots:{default:[sh]},$$scope:{ctx:t}}}),{c(){Cr(e.$$.fragment)},m(t,n){Tr(e,t,n),i=!0},p(t,i){const n={};1073750016&i&&(n.style=P(t[13])?t[13](t[30].value):t[13]),1342177280&i&&(n.$$scope={dirty:i,ctx:t}),e.$set(n)},i(t){i||(mr(e.$$.fragment,t),i=!0)},o(t){gr(e.$$.fragment,t),i=!1},d(t){Mr(e,t)}}}function sh(t){let e,i=t[30].icon+"";return{c(){e=_o("g")},m(t,n){xo(t,e,n),e.innerHTML=i},p(t,n){1073741824&n&&i!==(i=t[30].icon+"")&&(e.innerHTML=i)},d(t){t&&$o(e)}}}function ah(t){let e,i,n=t[30].sublabel+"";return{c(){e=wo("span"),i=ko(n),Eo(e,"class","PinturaDropdownOptionSublabel")},m(t,n){xo(t,e,n),bo(e,i)},p(t,e){1073741824&e&&n!==(n=t[30].sublabel+"")&&Ao(i,n)},d(t){t&&$o(e)}}}function lh(t){let e,i,n,o,r,s,a,l,c=t[30].label+"",h=t[30].icon&&rh(t),u=t[30].sublabel&&ah(t);return{c(){e=wo("span"),h&&h.c(),i=So(),n=wo("span"),o=ko(c),r=So(),u&&u.c(),Eo(n,"style",s=P(t[14])?t[14](t[30].value):t[14]),Eo(n,"class",a=Ga(["PinturaDropdownOptionLabel",t[10]])),Eo(e,"slot","option")},m(t,s){xo(t,e,s),h&&h.m(e,null),bo(e,i),bo(e,n),bo(n,o),bo(n,r),u&&u.m(n,null),l=!0},p(t,r){t[30].icon?h?(h.p(t,r),1073741824&r&&mr(h,1)):(h=rh(t),h.c(),mr(h,1),h.m(e,i)):h&&(pr(),gr(h,1,1,(()=>{h=null})),fr()),(!l||1073741824&r)&&c!==(c=t[30].label+"")&&Ao(o,c),t[30].sublabel?u?u.p(t,r):(u=ah(t),u.c(),u.m(n,null)):u&&(u.d(1),u=null),(!l||1073758208&r&&s!==(s=P(t[14])?t[14](t[30].value):t[14]))&&Eo(n,"style",s),(!l||1024&r&&a!==(a=Ga(["PinturaDropdownOptionLabel",t[10]])))&&Eo(n,"class",a)},i(t){l||(mr(h),l=!0)},o(t){gr(h),l=!1},d(t){t&&$o(e),h&&h.d(),u&&u.d()}}}function ch(t){let e,i,n,o,r,s;const a=t[26].controls,l=ro(a,t,t[28],th);return n=new Qc({props:{class:"PinturaOptionsList PinturaScrollableContent",name:t[7],value:t[9],selectedIndex:t[8],optionFilter:t[11],optionMapper:t[12],optionLabelClass:Ga(["PinturaDropdownOptionLabel",t[10]]),optionGroupClass:"PinturaListOptionGroup",optionClass:"PinturaListOption",options:t[16],onchange:t[19],$$slots:{option:[lh,({option:t})=>({30:t}),({option:t})=>t?1073741824:0],group:[oh,({option:t})=>({30:t}),({option:t})=>t?1073741824:0]},$$scope:{ctx:t}}}),{c(){e=wo("div"),l&&l.c(),i=So(),Cr(n.$$.fragment),Eo(e,"slot","details"),Eo(e,"class","PinturaOptionsListWrapper")},m(a,c){xo(a,e,c),l&&l.m(e,null),bo(e,i),Tr(n,e,null),o=!0,r||(s=To(e,"keydown",t[21]),r=!0)},p(t,e){l&&l.p&&268435456&e&&ao(l,a,t,t[28],e,Jc,th);const i={};128&e&&(i.name=t[7]),512&e&&(i.value=t[9]),256&e&&(i.selectedIndex=t[8]),2048&e&&(i.optionFilter=t[11]),4096&e&&(i.optionMapper=t[12]),1024&e&&(i.optionLabelClass=Ga(["PinturaDropdownOptionLabel",t[10]])),65536&e&&(i.options=t[16]),1342202880&e&&(i.$$scope={dirty:e,ctx:t}),n.$set(i)},i(t){o||(mr(l,t),mr(n.$$.fragment,t),o=!0)},o(t){gr(l,t),gr(n.$$.fragment,t),o=!1},d(t){t&&$o(e),l&&l.d(t),Mr(n),r=!1,s()}}}function hh(t){let e,i,n;function o(e){t[27](e)}let r={onshow:t[20],buttonClass:Ga(["PinturaDropdownButton",t[0],t[5]&&"PinturaDropdownIconOnly"]),$$slots:{details:[ch],label:[nh]},$$scope:{ctx:t}};return void 0!==t[17]&&(r.isActive=t[17]),e=new vc({props:r}),Zo.push((()=>Sr(e,"isActive",o))),{c(){Cr(e.$$.fragment)},m(t,i){Tr(e,t,i),n=!0},p(t,[n]){const o={};33&n&&(o.buttonClass=Ga(["PinturaDropdownButton",t[0],t[5]&&"PinturaDropdownIconOnly"])),268828670&n&&(o.$$scope={dirty:n,ctx:t}),!i&&131072&n&&(i=!0,o.isActive=t[17],or((()=>i=!1))),e.$set(o)},i(t){n||(mr(e.$$.fragment,t),n=!0)},o(t){gr(e.$$.fragment,t),n=!1},d(t){Mr(e,t)}}}function uh(t,e,i){let n,o,r,{$$slots:s={},$$scope:a}=e,{class:l}=e,{title:c}=e,{label:h}=e,{labelClass:u}=e,{innerClass:d}=e,{hideLabel:p=!1}=e,{icon:m}=e,{name:g}=e,{options:y=[]}=e,{selectedIndex:v=-1}=e,{value:b}=e,{optionLabelClass:x}=e,{optionFilter:$}=e,{optionMapper:w}=e,{optionIconStyle:_}=e,{optionLabelStyle:k}=e,{locale:S}=e,{onchange:C=f}=e,{onload:T=f}=e,{ondestroy:M=f}=e;return Wo((()=>T({options:y}))),Yo((()=>M({options:y}))),t.$$set=t=>{"class"in t&&i(0,l=t.class),"title"in t&&i(1,c=t.title),"label"in t&&i(2,h=t.label),"labelClass"in t&&i(3,u=t.labelClass),"innerClass"in t&&i(4,d=t.innerClass),"hideLabel"in t&&i(5,p=t.hideLabel),"icon"in t&&i(6,m=t.icon),"name"in t&&i(7,g=t.name),"options"in t&&i(22,y=t.options),"selectedIndex"in t&&i(8,v=t.selectedIndex),"value"in t&&i(9,b=t.value),"optionLabelClass"in t&&i(10,x=t.optionLabelClass),"optionFilter"in t&&i(11,$=t.optionFilter),"optionMapper"in t&&i(12,w=t.optionMapper),"optionIconStyle"in t&&i(13,_=t.optionIconStyle),"optionLabelStyle"in t&&i(14,k=t.optionLabelStyle),"locale"in t&&i(15,S=t.locale),"onchange"in t&&i(23,C=t.onchange),"onload"in t&&i(24,T=t.onload),"ondestroy"in t&&i(25,M=t.ondestroy),"$$scope"in t&&i(28,a=t.$$scope)},t.$$.update=()=>{4227072&t.$$.dirty&&i(16,n=S?Cc(y,S):y),66048&t.$$.dirty&&i(18,o=n.reduce(((t,e)=>{if(t)return t;const i=Array.isArray(e)?e:[e,e],[n,o]=i;return Tc(n,b)?o:void 0}),void 0)||(t=>{const e=t.find((t=>void 0===t[0]));if(e)return e[1]})(n)||b)},[l,c,h,u,d,p,m,g,v,b,x,$,w,_,k,S,n,r,o,t=>{i(18,o=t.value),C(t),i(17,r=!1)},({e:t,panel:e})=>{if(t&&t.key&&/up|down/i.test(t.key))return sc(e.querySelector("input:not([disabled])"));sc(e.querySelector("fieldset"))},t=>{/tab/i.test(t.key)&&t.preventDefault()},y,C,T,M,s,function(t){r=t,i(17,r)},a]}class dh extends Er{constructor(t){super(),Pr(this,t,uh,hh,eo,{class:0,title:1,label:2,labelClass:3,innerClass:4,hideLabel:5,icon:6,name:7,options:22,selectedIndex:8,value:9,optionLabelClass:10,optionFilter:11,optionMapper:12,optionIconStyle:13,optionLabelStyle:14,locale:15,onchange:23,onload:24,ondestroy:25})}}function ph(t){let e;return{c(){e=wo("div"),Eo(e,"slot","details")},m(i,n){xo(i,e,n),t[8](e)},p:Xn,d(i){i&&$o(e),t[8](null)}}}function fh(t){let e,i,n;function o(e){t[9](e)}let r={buttonLabel:t[0],buttonClass:t[1],$$slots:{details:[ph]},$$scope:{ctx:t}};return void 0!==t[3]&&(r.isActive=t[3]),e=new vc({props:r}),Zo.push((()=>Sr(e,"isActive",o))),{c(){Cr(e.$$.fragment)},m(t,i){Tr(e,t,i),n=!0},p(t,[n]){const o={};1&n&&(o.buttonLabel=t[0]),2&n&&(o.buttonClass=t[1]),1028&n&&(o.$$scope={dirty:n,ctx:t}),!i&&8&n&&(i=!0,o.isActive=t[3],or((()=>i=!1))),e.$set(o)},i(t){n||(mr(e.$$.fragment,t),n=!0)},o(t){gr(e.$$.fragment,t),n=!1},d(t){Mr(e,t)}}}function mh(t,e,i){let n,{buttonLabel:o}=e,{buttonClass:r}=e,{root:s}=e,{ondestroy:a=f}=e,l=!1;return Yo(a),t.$$set=t=>{"buttonLabel"in t&&i(0,o=t.buttonLabel),"buttonClass"in t&&i(1,r=t.buttonClass),"root"in t&&i(4,s=t.root),"ondestroy"in t&&i(5,a=t.ondestroy)},t.$$.update=()=>{20&t.$$.dirty&&n&&s&&n.firstChild!==s&&(n.hasChildNodes()?n.replaceChild(s,n.firstChild):n.append(s))},[o,r,n,l,s,a,()=>i(3,l=!1),()=>i(3,l=!0),function(t){Zo[t?"unshift":"push"]((()=>{n=t,i(2,n)}))},function(t){l=t,i(3,l)}]}class gh extends Er{constructor(t){super(),Pr(this,t,mh,fh,eo,{buttonLabel:0,buttonClass:1,root:4,ondestroy:5,hide:6,show:7})}get hide(){return this.$$.ctx[6]}get show(){return this.$$.ctx[7]}}var yh=(t,e,i)=>(t-e)/(i-e);function vh(t){let e;return{c(){e=_o("path"),Eo(e,"d","M8 12 h8 M12 8 v8")},m(t,i){xo(t,e,i)},d(t){t&&$o(e)}}}function bh(t){let e;return{c(){e=_o("path"),Eo(e,"d","M9 12 h6")},m(t,i){xo(t,e,i)},d(t){t&&$o(e)}}}function xh(t){let e,i,n,o,r,s,a,l,c,h,u,d,p,f,m,g,y,v;return u=new wl({props:{$$slots:{default:[vh]},$$scope:{ctx:t}}}),f=new wl({props:{$$slots:{default:[bh]},$$scope:{ctx:t}}}),{c(){e=wo("div"),i=wo("div"),n=wo("input"),o=So(),r=wo("div"),s=So(),a=wo("div"),l=wo("div"),c=So(),h=wo("button"),Cr(u.$$.fragment),d=So(),p=wo("button"),Cr(f.$$.fragment),Eo(n,"type","range"),Eo(n,"id",t[3]),Eo(n,"min",t[0]),Eo(n,"max",t[1]),Eo(n,"step",t[2]),n.value=t[8],Eo(r,"class","PinturaSliderTrack"),Eo(r,"style",t[4]),Eo(l,"class","PinturaSliderKnob"),Eo(l,"style",t[5]),Eo(a,"class","PinturaSliderKnobController"),Eo(a,"style",t[10]),Eo(i,"class","PinturaSliderControl"),Eo(h,"type","button"),Eo(h,"aria-label","Increase"),Eo(p,"type","button"),Eo(p,"aria-label","Decrease"),Eo(e,"class",m=Ga(["PinturaSlider",t[7]])),Eo(e,"data-direction",t[6])},m(m,b){xo(m,e,b),bo(e,i),bo(i,n),t[23](n),bo(i,o),bo(i,r),bo(i,s),bo(i,a),bo(a,l),bo(e,c),bo(e,h),Tr(u,h,null),bo(e,d),bo(e,p),Tr(f,p,null),g=!0,y||(v=[To(n,"pointerdown",t[13]),To(n,"input",t[11]),To(n,"nudge",t[12]),uo(Al.call(null,n)),To(h,"pointerdown",t[14](1)),To(p,"pointerdown",t[14](-1))],y=!0)},p(t,i){(!g||8&i[0])&&Eo(n,"id",t[3]),(!g||1&i[0])&&Eo(n,"min",t[0]),(!g||2&i[0])&&Eo(n,"max",t[1]),(!g||4&i[0])&&Eo(n,"step",t[2]),(!g||256&i[0])&&(n.value=t[8]),(!g||16&i[0])&&Eo(r,"style",t[4]),(!g||32&i[0])&&Eo(l,"style",t[5]),(!g||1024&i[0])&&Eo(a,"style",t[10]);const o={};2048&i[1]&&(o.$$scope={dirty:i,ctx:t}),u.$set(o);const s={};2048&i[1]&&(s.$$scope={dirty:i,ctx:t}),f.$set(s),(!g||128&i[0]&&m!==(m=Ga(["PinturaSlider",t[7]])))&&Eo(e,"class",m),(!g||64&i[0])&&Eo(e,"data-direction",t[6])},i(t){g||(mr(u.$$.fragment,t),mr(f.$$.fragment,t),g=!0)},o(t){gr(u.$$.fragment,t),gr(f.$$.fragment,t),g=!1},d(i){i&&$o(e),t[23](null),Mr(u),Mr(f),y=!1,Jn(v)}}}function $h(t,e,i){let n,o,r,s,a,l,c,h,u,d,p,f,m,g,{min:y=0}=e,{max:v=100}=e,{step:b=1}=e,{id:x}=e,{value:$=0}=e,{trackStyle:w}=e,{knobStyle:_}=e,{onchange:k}=e,{onrelease:S=Xn}=e,{direction:C="x"}=e,{getValue:T=Y}=e,{setValue:M=Y}=e,{class:P}=e;const E=t=>M(((t,e)=>(e=1/e,Math.round(t*e)/e))(Qr(t,y,v),b)),I=(t,e,n={})=>{const{released:r=!1}=n;i(15,$=E(y+t/e*o)),$!==g&&(g=$,k($),r&&S($))};let A;const D=t=>{const e=t[h]-m;I(f+e,p)},R=t=>{p=void 0,document.documentElement.removeEventListener("pointermove",D),document.documentElement.removeEventListener("pointerup",R),k($),S($)},L=()=>{i(15,$=E(n+z*b)),k($)};let O,z=1,F=!1;const B=t=>{clearTimeout(O),F||L(),S($),document.removeEventListener("pointerup",B)};return t.$$set=t=>{"min"in t&&i(0,y=t.min),"max"in t&&i(1,v=t.max),"step"in t&&i(2,b=t.step),"id"in t&&i(3,x=t.id),"value"in t&&i(15,$=t.value),"trackStyle"in t&&i(4,w=t.trackStyle),"knobStyle"in t&&i(5,_=t.knobStyle),"onchange"in t&&i(16,k=t.onchange),"onrelease"in t&&i(17,S=t.onrelease),"direction"in t&&i(6,C=t.direction),"getValue"in t&&i(18,T=t.getValue),"setValue"in t&&i(19,M=t.setValue),"class"in t&&i(7,P=t.class)},t.$$.update=()=>{294912&t.$$.dirty[0]&&i(8,n=void 0!==$?T($):0),3&t.$$.dirty[0]&&(o=v-y),259&t.$$.dirty[0]&&i(20,r=100*yh(n,y,v)),64&t.$$.dirty[0]&&i(21,s=C.toUpperCase()),64&t.$$.dirty[0]&&i(22,a="x"===C?"Width":"Height"),4194304&t.$$.dirty[0]&&(l="offset"+a),2097152&t.$$.dirty[0]&&(c="offset"+s),2097152&t.$$.dirty[0]&&(h="page"+s),3145728&t.$$.dirty[0]&&i(10,u=`transform: translate${s}(${r}%)`)},[y,v,b,x,w,_,C,P,n,d,u,t=>{p||(i(15,$=M(parseFloat(t.target.value))),$!==g&&(g=$,k($)))},t=>{const e=d[l];I(n/o*e+t.detail[C],e),clearTimeout(A),A=setTimeout((()=>{S($)}),250)},t=>{t.stopPropagation(),clearTimeout(A),p=d[l],f=t[c],m=t[h],I(f,p),document.documentElement.addEventListener("pointermove",D),document.documentElement.addEventListener("pointerup",R)},t=>e=>{clearTimeout(A),z=t,F=!1,O=setInterval((()=>{F=!0,L()}),100),document.addEventListener("pointercancel",B),document.addEventListener("pointerup",B)},$,k,S,T,M,r,s,a,function(t){Zo[t?"unshift":"push"]((()=>{d=t,i(9,d)}))}]}class wh extends Er{constructor(t){super(),Pr(this,t,$h,xh,eo,{min:0,max:1,step:2,id:3,value:15,trackStyle:4,knobStyle:5,onchange:16,onrelease:17,direction:6,getValue:18,setValue:19,class:7},[-1,-1])}}function _h(t){let e,i;return e=new wl({props:{class:"PinturaButtonIcon",$$slots:{default:[kh]},$$scope:{ctx:t}}}),{c(){Cr(e.$$.fragment)},m(t,n){Tr(e,t,n),i=!0},p(t,i){const n={};524292&i&&(n.$$scope={dirty:i,ctx:t}),e.$set(n)},i(t){i||(mr(e.$$.fragment,t),i=!0)},o(t){gr(e.$$.fragment,t),i=!1},d(t){Mr(e,t)}}}function kh(t){let e;return{c(){e=_o("g")},m(i,n){xo(i,e,n),e.innerHTML=t[2]},p(t,i){4&i&&(e.innerHTML=t[2])},d(t){t&&$o(e)}}}function Sh(t){let e,i,n,o,r,s,a,l,c=t[2]&&_h(t);return{c(){e=wo("span"),c&&c.c(),i=So(),n=wo("span"),o=ko(t[8]),Eo(n,"class",r=Ga(["PinturaButtonLabel",t[3],t[5]&&"implicit"])),Eo(e,"slot","label"),Eo(e,"title",s=kc(t[1],t[6])),Eo(e,"class",a=Ga(["PinturaButtonInner",t[4]]))},m(t,r){xo(t,e,r),c&&c.m(e,null),bo(e,i),bo(e,n),bo(n,o),l=!0},p(t,h){t[2]?c?(c.p(t,h),4&h&&mr(c,1)):(c=_h(t),c.c(),mr(c,1),c.m(e,i)):c&&(pr(),gr(c,1,1,(()=>{c=null})),fr()),(!l||256&h)&&Ao(o,t[8]),(!l||40&h&&r!==(r=Ga(["PinturaButtonLabel",t[3],t[5]&&"implicit"])))&&Eo(n,"class",r),(!l||66&h&&s!==(s=kc(t[1],t[6])))&&Eo(e,"title",s),(!l||16&h&&a!==(a=Ga(["PinturaButtonInner",t[4]])))&&Eo(e,"class",a)},i(t){l||(mr(c),l=!0)},o(t){gr(c),l=!1},d(t){t&&$o(e),c&&c.d()}}}function Ch(t){let e,i,n,o,r;const s=[t[11],{value:t[7]},{onchange:t[10]}];let a={};for(let t=0;t<s.length;t+=1)a=Zn(a,s[t]);return i=new wh({props:a}),{c(){e=wo("div"),Cr(i.$$.fragment),Eo(e,"slot","details")},m(s,a){xo(s,e,a),Tr(i,e,null),n=!0,o||(r=To(e,"keydown",t[9]),o=!0)},p(t,e){const n=3200&e?_r(s,[2048&e&&kr(t[11]),128&e&&{value:t[7]},1024&e&&{onchange:t[10]}]):{};i.$set(n)},i(t){n||(mr(i.$$.fragment,t),n=!0)},o(t){gr(i.$$.fragment,t),n=!1},d(t){t&&$o(e),Mr(i),o=!1,r()}}}function Th(t){let e,i;return e=new vc({props:{panelClass:"PinturaSliderPanel",buttonClass:Ga(["PinturaSliderButton",t[0],t[5]&&"PinturaSliderIconOnly"]),$$slots:{details:[Ch],label:[Sh]},$$scope:{ctx:t}}}),{c(){Cr(e.$$.fragment)},m(t,n){Tr(e,t,n),i=!0},p(t,[i]){const n={};33&i&&(n.buttonClass=Ga(["PinturaSliderButton",t[0],t[5]&&"PinturaSliderIconOnly"])),526846&i&&(n.$$scope={dirty:i,ctx:t}),e.$set(n)},i(t){i||(mr(e.$$.fragment,t),i=!0)},o(t){gr(e.$$.fragment,t),i=!1},d(t){Mr(e,t)}}}function Mh(t,e,i){const n=["class","title","label","icon","labelClass","innerClass","hideLabel","locale","value","onchange"];let o=co(e,n),{class:r}=e,{title:s}=e,{label:a=Math.round}=e,{icon:l}=e,{labelClass:c}=e,{innerClass:h}=e,{hideLabel:u=!1}=e,{locale:d}=e,{value:p}=e,{onchange:m=f}=e;const{min:g,max:y,getValue:v=Y}=o;let b;const x=t=>i(8,b=(t=>P(a)?a(v(t),g,y):a)(t));return t.$$set=t=>{e=Zn(Zn({},e),lo(t)),i(11,o=co(e,n)),"class"in t&&i(0,r=t.class),"title"in t&&i(1,s=t.title),"label"in t&&i(12,a=t.label),"icon"in t&&i(2,l=t.icon),"labelClass"in t&&i(3,c=t.labelClass),"innerClass"in t&&i(4,h=t.innerClass),"hideLabel"in t&&i(5,u=t.hideLabel),"locale"in t&&i(6,d=t.locale),"value"in t&&i(7,p=t.value),"onchange"in t&&i(13,m=t.onchange)},t.$$.update=()=>{128&t.$$.dirty&&x(p)},[r,s,l,c,h,u,d,p,b,t=>{/tab/i.test(t.key)&&t.preventDefault()},t=>{x(t),m(t)},o,a,m]}class Ph extends Er{constructor(t){super(),Pr(this,t,Mh,Th,eo,{class:0,title:1,label:12,icon:2,labelClass:3,innerClass:4,hideLabel:5,locale:6,value:7,onchange:13})}}function Eh(t,e,i){const n=t.slice();return n[7]=e[i][0],n[8]=e[i][1],n[9]=e[i][2],n[0]=e[i][3],n}function Ih(t){let e,i,n;const o=[t[9]];var r=t[1][t[7]]||t[7];function s(t){let e={};for(let t=0;t<o.length;t+=1)e=Zn(e,o[t]);return{props:e}}return r&&(e=new r(s())),{c(){e&&Cr(e.$$.fragment),i=Co()},m(t,o){e&&Tr(e,t,o),xo(t,i,o),n=!0},p(t,n){const a=1&n?_r(o,[kr(t[9])]):{};if(r!==(r=t[1][t[7]]||t[7])){if(e){pr();const t=e;gr(t.$$.fragment,1,0,(()=>{Mr(t,1)})),fr()}r?(e=new r(s()),Cr(e.$$.fragment),mr(e.$$.fragment,1),Tr(e,i.parentNode,i)):e=null}else r&&e.$set(a)},i(t){n||(e&&mr(e.$$.fragment,t),n=!0)},o(t){e&&gr(e.$$.fragment,t),n=!1},d(t){t&&$o(i),e&&Mr(e,t)}}}function Ah(t){let e,i;return e=new ic({props:{name:t[7],attributes:t[2](t[9]),$$slots:{default:[Oh]},$$scope:{ctx:t}}}),{c(){Cr(e.$$.fragment)},m(t,n){Tr(e,t,n),i=!0},p(t,i){const n={};1&i&&(n.name=t[7]),1&i&&(n.attributes=t[2](t[9])),4097&i&&(n.$$scope={dirty:i,ctx:t}),e.$set(n)},i(t){i||(mr(e.$$.fragment,t),i=!0)},o(t){gr(e.$$.fragment,t),i=!1},d(t){Mr(e,t)}}}function Dh(t){let e,i,n=t[9].innerHTML+"";return{c(){i=Co(),e=new Lo(i)},m(t,o){e.m(n,t,o),xo(t,i,o)},p(t,i){1&i&&n!==(n=t[9].innerHTML+"")&&e.p(n)},i:Xn,o:Xn,d(t){t&&$o(i),t&&e.d()}}}function Rh(t){let e,i=t[9].textContent+"";return{c(){e=ko(i)},m(t,i){xo(t,e,i)},p(t,n){1&n&&i!==(i=t[9].textContent+"")&&Ao(e,i)},i:Xn,o:Xn,d(t){t&&$o(e)}}}function Lh(t){let e,i;return e=new Nh({props:{items:t[0],discardEmptyItems:!0}}),{c(){Cr(e.$$.fragment)},m(t,n){Tr(e,t,n),i=!0},p(t,i){const n={};1&i&&(n.items=t[0]),e.$set(n)},i(t){i||(mr(e.$$.fragment,t),i=!0)},o(t){gr(e.$$.fragment,t),i=!1},d(t){Mr(e,t)}}}function Oh(t){let e,i,n,o;const r=[Lh,Rh,Dh],s=[];function a(t,e){return t[0]&&t[0].length?0:t[9].textContent?1:t[9].innerHTML?2:-1}return~(e=a(t))&&(i=s[e]=r[e](t)),{c(){i&&i.c(),n=So()},m(t,i){~e&&s[e].m(t,i),xo(t,n,i),o=!0},p(t,o){let l=e;e=a(t),e===l?~e&&s[e].p(t,o):(i&&(pr(),gr(s[l],1,1,(()=>{s[l]=null})),fr()),~e?(i=s[e],i?i.p(t,o):(i=s[e]=r[e](t),i.c()),mr(i,1),i.m(n.parentNode,n)):i=null)},i(t){o||(mr(i),o=!0)},o(t){gr(i),o=!1},d(t){~e&&s[e].d(t),t&&$o(n)}}}function zh(t,e){let i,n,o,r,s,a;const l=[Ah,Ih],c=[];function h(t,e){return 1&e&&(n=!t[3](t[7])),n?0:1}return o=h(e,-1),r=c[o]=l[o](e),{key:t,first:null,c(){i=Co(),r.c(),s=Co(),this.first=i},m(t,e){xo(t,i,e),c[o].m(t,e),xo(t,s,e),a=!0},p(t,i){let n=o;o=h(e=t,i),o===n?c[o].p(e,i):(pr(),gr(c[n],1,1,(()=>{c[n]=null})),fr(),r=c[o],r?r.p(e,i):(r=c[o]=l[o](e),r.c()),mr(r,1),r.m(s.parentNode,s))},i(t){a||(mr(r),a=!0)},o(t){gr(r),a=!1},d(t){t&&$o(i),c[o].d(t),t&&$o(s)}}}function Fh(t){let e,i,n=[],o=new Map,r=t[0];const s=t=>t[8];for(let e=0;e<r.length;e+=1){let i=Eh(t,r,e),a=s(i);o.set(a,n[e]=zh(a,i))}return{c(){for(let t=0;t<n.length;t+=1)n[t].c();e=Co()},m(t,o){for(let e=0;e<n.length;e+=1)n[e].m(t,o);xo(t,e,o),i=!0},p(t,[i]){15&i&&(r=t[0],pr(),n=wr(n,i,s,1,t,r,o,e.parentNode,$r,zh,e,Eh),fr())},i(t){if(!i){for(let t=0;t<r.length;t+=1)mr(n[t]);i=!0}},o(t){for(let t=0;t<n.length;t+=1)gr(n[t]);i=!1},d(t){for(let e=0;e<n.length;e+=1)n[e].d(t);t&&$o(e)}}}function Bh(t,i,n){let o,{items:r}=i,{discardEmptyItems:s=!0}=i;const a={Button:Pl,Dropdown:dh,Panel:gh,Slider:Ph},l=t=>!e(t)||!!a[t],c=t=>{if(!t)return!1;const[e,,i,n=[]]=t;return!!l(e)||n.some(c)||i.textContent||i.innerHTML};return t.$$set=t=>{"items"in t&&n(4,r=t.items),"discardEmptyItems"in t&&n(5,s=t.discardEmptyItems)},t.$$.update=()=>{48&t.$$.dirty&&n(0,o=(r&&s?r.filter(c):r)||[])},[o,a,(t={})=>{const{textContent:e,innerHTML:i,...n}=t;return n},l,r,s]}class Nh extends Er{constructor(t){super(),Pr(this,t,Bh,Fh,eo,{items:4,discardEmptyItems:5})}}const Hh=["aspectRatio","isRotatedSideways","flip","cropSize"],Wh=as.map((([t])=>t)).filter((t=>!Hh.includes(t)));var jh=(t,e)=>new CustomEvent("ping",{detail:{type:t,data:e},cancelable:!0,bubbles:!0}),Yh=t=>(t=>/textarea/i.test(t.nodeName))(t)||(t=>/date|email|number|search|text|url/.test(t.type))(t)||t.isContentEditable,Vh=(t,e)=>(e?va(t,e):t).replace(/([a-z])([A-Z])/g,"$1-$2").replace(/\s+/g,"-").toLowerCase(),Uh=(t,e=Y)=>{const{subscribe:i,set:n}=Dr(void 0);return{subscribe:i,destroy:((t,e)=>{const i=matchMedia(t);return i.addListener(e),e(i),{get matches(){return i.matches},destroy:()=>i.removeListener(e)}})(t,(({matches:t})=>n(e(t)))).destroy}},qh=(t,e,i)=>new Promise(((o,r)=>{(async()=>{const s=await e.read(t),a=t=>L(t,i).then((t=>e.apply(t,s))).then(o).catch(r);if(I(t)||!E()||ke()||Oe())return a(t);let l;try{l=await R(((t,e)=>createImageBitmap(t).then((t=>e(null,t))).catch(e)),[t])}catch(t){}l&&l.width?await b()?n()&&window.chrome&&s>1?o(await(async t=>x(await k(t)))(l)):o(l):o(e.apply(l,s)):a(t)})()})),Xh=(e,i)=>new Promise((async n=>{if(e.width<i.width&&e.height<i.height)return n(e);const o=Math.min(i.width/e.width,i.height/e.height),r=o*e.width,s=o*e.height,a=t("canvas",{width:r,height:s}),l=a.getContext("2d"),c=_(e)?await k(e):e;l.drawImage(c,0,0,r,s),n(x(a))}));let Gh=null;var Zh=()=>{if(null===Gh){let e=t("canvas");Gh=!!fa(e),w(e),e=void 0}return Gh};const Kh=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],Qh={precision:1e-4},Jh={precision:.01*Qh.precision};var tu=t=>t[0]<.25&&t[1]<.25&&t[2]<.25,eu=()=>new Promise((e=>{const i=t("input",{style:"position:absolute;visibility:hidden;width:0;height:0;",type:"file",accept:"image/*"}),n=()=>{const[t]=i.files;i.parentNode&&i.remove(),i.removeEventListener("change",n),e(t)};i.addEventListener("change",n),Oe()&&document.body.append(i),i.click()})),iu=t=>{try{return t()}catch(t){console.error(t)}};const{window:nu}=br;function ou(t){let e,i,n,o=t[29]&&ru(t),r=t[30]&&fu(t);return{c(){o&&o.c(),e=So(),r&&r.c(),i=Co()},m(t,s){o&&o.m(t,s),xo(t,e,s),r&&r.m(t,s),xo(t,i,s),n=!0},p(t,n){t[29]?o?(o.p(t,n),536870912&n[0]&&mr(o,1)):(o=ru(t),o.c(),mr(o,1),o.m(e.parentNode,e)):o&&(pr(),gr(o,1,1,(()=>{o=null})),fr()),t[30]?r?(r.p(t,n),1073741824&n[0]&&mr(r,1)):(r=fu(t),r.c(),mr(r,1),r.m(i.parentNode,i)):r&&(pr(),gr(r,1,1,(()=>{r=null})),fr())},i(t){n||(mr(o),mr(r),n=!0)},o(t){gr(o),gr(r),n=!1},d(t){o&&o.d(t),t&&$o(e),r&&r.d(t),t&&$o(i)}}}function ru(t){let e,i,n,o,r,s;const a=[au,su],l=[];function c(t,e){return t[26]?0:t[14]?1:-1}return~(n=c(t))&&(o=l[n]=a[n](t)),{c(){e=wo("div"),i=wo("p"),o&&o.c(),Eo(i,"style",t[48]),Eo(e,"class","PinturaStatus"),Eo(e,"style",r="opacity: "+t[28])},m(t,o){xo(t,e,o),bo(e,i),~n&&l[n].m(i,null),s=!0},p(t,h){let u=n;n=c(t),n===u?~n&&l[n].p(t,h):(o&&(pr(),gr(l[u],1,1,(()=>{l[u]=null})),fr()),~n?(o=l[n],o?o.p(t,h):(o=l[n]=a[n](t),o.c()),mr(o,1),o.m(i,null)):o=null),(!s||131072&h[1])&&Eo(i,"style",t[48]),(!s||268435456&h[0]&&r!==(r="opacity: "+t[28]))&&Eo(e,"style",r)},i(t){s||(mr(o),s=!0)},o(t){gr(o),s=!1},d(t){t&&$o(e),~n&&l[n].d()}}}function su(t){let e,i,n,o;e=new Yl({props:{text:t[14].text||"",onmeasure:t[131]}});let r=t[14].aside&&lu(t);return{c(){Cr(e.$$.fragment),i=So(),r&&r.c(),n=Co()},m(t,s){Tr(e,t,s),xo(t,i,s),r&&r.m(t,s),xo(t,n,s),o=!0},p(t,i){const o={};16384&i[0]&&(o.text=t[14].text||""),e.$set(o),t[14].aside?r?(r.p(t,i),16384&i[0]&&mr(r,1)):(r=lu(t),r.c(),mr(r,1),r.m(n.parentNode,n)):r&&(pr(),gr(r,1,1,(()=>{r=null})),fr())},i(t){o||(mr(e.$$.fragment,t),mr(r),o=!0)},o(t){gr(e.$$.fragment,t),gr(r),o=!1},d(t){Mr(e,t),t&&$o(i),r&&r.d(t),t&&$o(n)}}}function au(t){let e,i,n,o;return e=new Yl({props:{text:t[26],onmeasure:t[131]}}),n=new Zl({props:{class:"PinturaStatusIcon",offset:t[52],opacity:t[53],$$slots:{default:[pu]},$$scope:{ctx:t}}}),{c(){Cr(e.$$.fragment),i=So(),Cr(n.$$.fragment)},m(t,r){Tr(e,t,r),xo(t,i,r),Tr(n,t,r),o=!0},p(t,i){const o={};67108864&i[0]&&(o.text=t[26]),e.$set(o);const r={};2097152&i[1]&&(r.offset=t[52]),4194304&i[1]&&(r.opacity=t[53]),4&i[0]|268435456&i[12]&&(r.$$scope={dirty:i,ctx:t}),n.$set(r)},i(t){o||(mr(e.$$.fragment,t),mr(n.$$.fragment,t),o=!0)},o(t){gr(e.$$.fragment,t),gr(n.$$.fragment,t),o=!1},d(t){Mr(e,t),t&&$o(i),Mr(n,t)}}}function lu(t){let e,i;return e=new Zl({props:{class:"PinturaStatusButton",offset:t[52],opacity:t[53],$$slots:{default:[uu]},$$scope:{ctx:t}}}),{c(){Cr(e.$$.fragment)},m(t,n){Tr(e,t,n),i=!0},p(t,i){const n={};2097152&i[1]&&(n.offset=t[52]),4194304&i[1]&&(n.opacity=t[53]),16384&i[0]|268435456&i[12]&&(n.$$scope={dirty:i,ctx:t}),e.$set(n)},i(t){i||(mr(e.$$.fragment,t),i=!0)},o(t){gr(e.$$.fragment,t),i=!1},d(t){Mr(e,t)}}}function cu(t){let e,i;return e=new ql({props:{progress:t[14].progressIndicator.progress}}),{c(){Cr(e.$$.fragment)},m(t,n){Tr(e,t,n),i=!0},p(t,i){const n={};16384&i[0]&&(n.progress=t[14].progressIndicator.progress),e.$set(n)},i(t){i||(mr(e.$$.fragment,t),i=!0)},o(t){gr(e.$$.fragment,t),i=!1},d(t){Mr(e,t)}}}function hu(t){let e,i;const n=[t[14].closeButton,{hideLabel:!0}];let o={};for(let t=0;t<n.length;t+=1)o=Zn(o,n[t]);return e=new Pl({props:o}),{c(){Cr(e.$$.fragment)},m(t,n){Tr(e,t,n),i=!0},p(t,i){const o=16384&i[0]?_r(n,[kr(t[14].closeButton),n[1]]):{};e.$set(o)},i(t){i||(mr(e.$$.fragment,t),i=!0)},o(t){gr(e.$$.fragment,t),i=!1},d(t){Mr(e,t)}}}function uu(t){let e,i,n,o=t[14].progressIndicator.visible&&cu(t),r=t[14].closeButton&&t[14].text&&hu(t);return{c(){o&&o.c(),e=So(),r&&r.c(),i=Co()},m(t,s){o&&o.m(t,s),xo(t,e,s),r&&r.m(t,s),xo(t,i,s),n=!0},p(t,n){t[14].progressIndicator.visible?o?(o.p(t,n),16384&n[0]&&mr(o,1)):(o=cu(t),o.c(),mr(o,1),o.m(e.parentNode,e)):o&&(pr(),gr(o,1,1,(()=>{o=null})),fr()),t[14].closeButton&&t[14].text?r?(r.p(t,n),16384&n[0]&&mr(r,1)):(r=hu(t),r.c(),mr(r,1),r.m(i.parentNode,i)):r&&(pr(),gr(r,1,1,(()=>{r=null})),fr())},i(t){n||(mr(o),mr(r),n=!0)},o(t){gr(o),gr(r),n=!1},d(t){o&&o.d(t),t&&$o(e),r&&r.d(t),t&&$o(i)}}}function du(t){let e,i=t[2].iconSupportError+"";return{c(){e=_o("g")},m(t,n){xo(t,e,n),e.innerHTML=i},p(t,n){4&n[0]&&i!==(i=t[2].iconSupportError+"")&&(e.innerHTML=i)},d(t){t&&$o(e)}}}function pu(t){let e,i;return e=new wl({props:{$$slots:{default:[du]},$$scope:{ctx:t}}}),{c(){Cr(e.$$.fragment)},m(t,n){Tr(e,t,n),i=!0},p(t,i){const n={};4&i[0]|268435456&i[12]&&(n.$$scope={dirty:i,ctx:t}),e.$set(n)},i(t){i||(mr(e.$$.fragment,t),i=!0)},o(t){gr(e.$$.fragment,t),i=!1},d(t){Mr(e,t)}}}function fu(t){let e,i,n,o,r,s,a,l,c,h=t[6]&&mu(t),u=t[19]&&t[17]&&gu(t);const d=[$u,xu],p=[];function f(t,e){return t[19]?0:1}return n=f(t),o=p[n]=d[n](t),s=new Xa({props:{animate:t[39],pixelRatio:t[56],textPixelRatio:t[7],backgroundColor:t[22],maskRect:t[21],maskOpacity:t[47]?t[47].maskOpacity:1,maskFrameOpacity:.95,images:t[25],interfaceImages:t[57],loadImageData:t[9],willRequestResource:t[58],willRender:t[287],didRender:t[288]}}),{c(){h&&h.c(),e=So(),u&&u.c(),i=So(),o.c(),r=So(),Cr(s.$$.fragment),a=So(),l=wo("div"),Eo(l,"class","PinturaRootPortal")},m(o,d){h&&h.m(o,d),xo(o,e,d),u&&u.m(o,d),xo(o,i,d),p[n].m(o,d),xo(o,r,d),Tr(s,o,d),xo(o,a,d),xo(o,l,d),t[289](l),c=!0},p(t,a){t[6]?h?(h.p(t,a),64&a[0]&&mr(h,1)):(h=mu(t),h.c(),mr(h,1),h.m(e.parentNode,e)):h&&(pr(),gr(h,1,1,(()=>{h=null})),fr()),t[19]&&t[17]?u?(u.p(t,a),655360&a[0]&&mr(u,1)):(u=gu(t),u.c(),mr(u,1),u.m(i.parentNode,i)):u&&(pr(),gr(u,1,1,(()=>{u=null})),fr());let l=n;n=f(t),n===l?p[n].p(t,a):(pr(),gr(p[l],1,1,(()=>{p[l]=null})),fr(),o=p[n],o?o.p(t,a):(o=p[n]=d[n](t),o.c()),mr(o,1),o.m(r.parentNode,r));const c={};256&a[1]&&(c.animate=t[39]),33554432&a[1]&&(c.pixelRatio=t[56]),128&a[0]&&(c.textPixelRatio=t[7]),4194304&a[0]&&(c.backgroundColor=t[22]),2097152&a[0]&&(c.maskRect=t[21]),65536&a[1]&&(c.maskOpacity=t[47]?t[47].maskOpacity:1),33554432&a[0]&&(c.images=t[25]),67108864&a[1]&&(c.interfaceImages=t[57]),512&a[0]&&(c.loadImageData=t[9]),134217728&a[1]&&(c.willRequestResource=t[58]),32800&a[0]|268435463&a[1]&&(c.willRender=t[287]),240&a[1]&&(c.didRender=t[288]),s.$set(c)},i(t){c||(mr(h),mr(u),mr(o),mr(s.$$.fragment,t),c=!0)},o(t){gr(h),gr(u),gr(o),gr(s.$$.fragment,t),c=!1},d(o){h&&h.d(o),o&&$o(e),u&&u.d(o),o&&$o(i),p[n].d(o),o&&$o(r),Mr(s,o),o&&$o(a),o&&$o(l),t[289](null)}}}function mu(t){let e,i,n,o,r;return i=new Nh({props:{items:t[49]}}),{c(){e=wo("div"),Cr(i.$$.fragment),Eo(e,"class","PinturaNav PinturaNavTools")},m(s,a){xo(s,e,a),Tr(i,e,null),n=!0,o||(r=[To(e,"measure",t[272]),uo(ha.call(null,e))],o=!0)},p(t,e){const n={};262144&e[1]&&(n.items=t[49]),i.$set(n)},i(t){n||(mr(i.$$.fragment,t),n=!0)},o(t){gr(i.$$.fragment,t),n=!1},d(t){t&&$o(e),Mr(i),o=!1,Jn(r)}}}function gu(t){let e,i,n;return i=new Nl({props:{elasticity:t[4]*Cu,scrollDirection:t[45]?"y":"x",$$slots:{default:[bu]},$$scope:{ctx:t}}}),{c(){e=wo("div"),Cr(i.$$.fragment),Eo(e,"class","PinturaNav PinturaNavMain")},m(t,o){xo(t,e,o),Tr(i,e,null),n=!0},p(t,e){const n={};16&e[0]&&(n.elasticity=t[4]*Cu),16384&e[1]&&(n.scrollDirection=t[45]?"y":"x"),1048576&e[0]|3072&e[1]|268435456&e[12]&&(n.$$scope={dirty:e,ctx:t}),i.$set(n)},i(t){n||(mr(i.$$.fragment,t),n=!0)},o(t){gr(i.$$.fragment,t),n=!1},d(t){t&&$o(e),Mr(i)}}}function yu(t){let e,i=t[399].icon+"";return{c(){e=_o("g")},m(t,n){xo(t,e,n),e.innerHTML=i},p(t,n){134217728&n[12]&&i!==(i=t[399].icon+"")&&(e.innerHTML=i)},d(t){t&&$o(e)}}}function vu(t){let e,i,n,o,r,s=t[399].label+"";return e=new wl({props:{$$slots:{default:[yu]},$$scope:{ctx:t}}}),{c(){Cr(e.$$.fragment),i=So(),n=wo("span"),o=ko(s)},m(t,s){Tr(e,t,s),xo(t,i,s),xo(t,n,s),bo(n,o),r=!0},p(t,i){const n={};402653184&i[12]&&(n.$$scope={dirty:i,ctx:t}),e.$set(n),(!r||134217728&i[12])&&s!==(s=t[399].label+"")&&Ao(o,s)},i(t){r||(mr(e.$$.fragment,t),r=!0)},o(t){gr(e.$$.fragment,t),r=!1},d(t){Mr(e,t),t&&$o(i),t&&$o(n)}}}function bu(t){let e,i;const n=[t[41],{tabs:t[42]}];let o={$$slots:{default:[vu,({tab:t})=>({399:t}),({tab:t})=>[0,0,0,0,0,0,0,0,0,0,0,0,t?134217728:0]]},$$scope:{ctx:t}};for(let t=0;t<n.length;t+=1)o=Zn(o,n[t]);return e=new nl({props:o}),e.$on("select",t[273]),{c(){Cr(e.$$.fragment)},m(t,n){Tr(e,t,n),i=!0},p(t,i){const o=3072&i[1]?_r(n,[1024&i[1]&&kr(t[41]),2048&i[1]&&{tabs:t[42]}]):{};402653184&i[12]&&(o.$$scope={dirty:i,ctx:t}),e.$set(o)},i(t){i||(mr(e.$$.fragment,t),i=!0)},o(t){gr(e.$$.fragment,t),i=!1},d(t){Mr(e,t)}}}function xu(t){let e,i,n;function o(e){t[282](e)}let r={class:"PinturaMain",content:{...t[23].find(t[281]),props:t[8][t[20]]},locale:t[2],isAnimated:t[39],stores:t[121]};return void 0!==t[0][t[20]]&&(r.component=t[0][t[20]]),e=new bl({props:r}),Zo.push((()=>Sr(e,"component",o))),e.$on("measure",t[283]),e.$on("show",t[284]),e.$on("hide",t[285]),e.$on("fade",t[286]),{c(){Cr(e.$$.fragment)},m(t,i){Tr(e,t,i),n=!0},p(t,n){const o={};9437440&n[0]&&(o.content={...t[23].find(t[281]),props:t[8][t[20]]}),4&n[0]&&(o.locale=t[2]),256&n[1]&&(o.isAnimated=t[39]),!i&&1048577&n[0]&&(i=!0,o.component=t[0][t[20]],or((()=>i=!1))),e.$set(o)},i(t){n||(mr(e.$$.fragment,t),n=!0)},o(t){gr(e.$$.fragment,t),n=!1},d(t){Mr(e,t)}}}function $u(t){let e,i;const n=[{class:"PinturaMain"},{visible:t[34]},t[41],{panels:t[43]}];let o={$$slots:{default:[wu,({panel:t,panelIsActive:e})=>({397:t,398:e}),({panel:t,panelIsActive:e})=>[0,0,0,0,0,0,0,0,0,0,0,0,(t?33554432:0)|(e?67108864:0)]]},$$scope:{ctx:t}};for(let t=0;t<n.length;t+=1)o=Zn(o,n[t]);return e=new ml({props:o}),e.$on("measure",t[280]),{c(){Cr(e.$$.fragment)},m(t,n){Tr(e,t,n),i=!0},p(t,i){const o=5128&i[1]?_r(n,[n[0],8&i[1]&&{visible:t[34]},1024&i[1]&&kr(t[41]),4096&i[1]&&{panels:t[43]}]):{};25166085&i[0]|16777480&i[1]|369098752&i[12]&&(o.$$scope={dirty:i,ctx:t}),e.$set(o)},i(t){i||(mr(e.$$.fragment,t),i=!0)},o(t){gr(e.$$.fragment,t),i=!1},d(t){Mr(e,t)}}}function wu(t){let e,i,n;function o(...e){return t[274](t[397],...e)}function r(e){t[275](e,t[397])}let s={content:{...t[23].find(o),props:t[8][t[397]]},locale:t[2],isActive:t[398],isAnimated:t[39],stores:t[121]};return void 0!==t[0][t[397]]&&(s.component=t[0][t[397]]),e=new bl({props:s}),Zo.push((()=>Sr(e,"component",r))),e.$on("measure",t[276]),e.$on("show",(function(){return t[277](t[397])})),e.$on("hide",(function(){return t[278](t[397])})),e.$on("fade",(function(...e){return t[279](t[397],...e)})),{c(){Cr(e.$$.fragment)},m(t,i){Tr(e,t,i),n=!0},p(n,r){t=n;const s={};8388864&r[0]|33554432&r[12]&&(s.content={...t[23].find(o),props:t[8][t[397]]}),4&r[0]&&(s.locale=t[2]),67108864&r[12]&&(s.isActive=t[398]),256&r[1]&&(s.isAnimated=t[39]),!i&&1&r[0]|33554432&r[12]&&(i=!0,s.component=t[0][t[397]],or((()=>i=!1))),e.$set(s)},i(t){n||(mr(e.$$.fragment,t),n=!0)},o(t){gr(e.$$.fragment,t),n=!1},d(t){Mr(e,t)}}}function _u(t){let e,i;return{c(){e=wo("span"),Eo(e,"class","PinturaEditorOverlay"),Eo(e,"style",i="opacity:"+t[60])},m(t,i){xo(t,e,i)},p(t,n){536870912&n[1]&&i!==(i="opacity:"+t[60])&&Eo(e,"style",i)},d(t){t&&$o(e)}}}function ku(t){let e,i,n,o,r;nr(t[271]);let s=t[50]&&ou(t),a=t[60]>0&&_u(t);return{c(){e=wo("div"),s&&s.c(),i=So(),a&&a.c(),Eo(e,"id",t[3]),Eo(e,"class",t[44]),Eo(e,"data-env",t[46])},m(c,h){xo(c,e,h),s&&s.m(e,null),bo(e,i),a&&a.m(e,null),t[290](e),n=!0,o||(r=[To(nu,"keydown",t[137]),To(nu,"keyup",t[138]),To(nu,"blur",t[139]),To(nu,"paste",t[143]),To(nu,"resize",t[271]),To(e,"ping",(function(){to(t[51])&&t[51].apply(this,arguments)})),To(e,"contextmenu",t[140]),To(e,"touchstart",t[132],{passive:!1}),To(e,"touchmove",t[133]),To(e,"pointermove",t[134]),To(e,"transitionend",t[122]),To(e,"dropfiles",t[141]),To(e,"measure",t[291]),To(e,"click",(function(){to(t[27]?t[142]:f)&&(t[27]?t[142]:f).apply(this,arguments)})),uo(ha.call(null,e,{observeViewRect:!0})),uo(ua.call(null,e)),uo(l.call(null,e))],o=!0)},p(o,r){(t=o)[50]?s?(s.p(t,r),524288&r[1]&&mr(s,1)):(s=ou(t),s.c(),mr(s,1),s.m(e,i)):s&&(pr(),gr(s,1,1,(()=>{s=null})),fr()),t[60]>0?a?a.p(t,r):(a=_u(t),a.c(),a.m(e,null)):a&&(a.d(1),a=null),(!n||8&r[0])&&Eo(e,"id",t[3]),(!n||8192&r[1])&&Eo(e,"class",t[44]),(!n||32768&r[1])&&Eo(e,"data-env",t[46])},i(t){n||(mr(s),n=!0)},o(t){gr(s),n=!1},d(i){i&&$o(e),s&&s.d(),a&&a.d(),t[290](null),o=!1,Jn(r)}}}const Su="stage-overlay",Cu=10;function Tu(i,n,o){let s,a,l,c,h,u,d,p,m,g,y,v,b,$,_,k,S,C,T,M,P,E,I,D,R,L,O,z,F,B,N,H,W,j,V,U,q,X,G,Z,tt,nt,ot,rt,st,at,lt,ut,dt,pt,ft,mt,gt,yt,vt,bt,xt,$t,wt,_t,kt,Ct,Tt,Mt,Pt,Et,It,At,Dt,Rt,Lt,Ot,Nt,Ht,Wt,jt,Qt,Jt,ie,ne,re,se,le,he,ue,de,pe,fe,me,ye,ve,be,xe,$e,we,_e,ke,Se,Ce,Te,Me,Pe,Ee,Ie,Ae,De,Re,Le,ze,Fe,Be,Ne,He,We,je,Ye,Ve,Ue,qe,Xe,Ge,Ze,Qe,Je,ti,ei,ii,ni,oi,ri,si,ai,li,ci,hi,ui,pi,fi,mi,gi,yi,vi,bi,xi,$i,wi=Xn,_i=Xn;oo(i,Js,(t=>o(210,Ae=t))),i.$$.on_destroy.push((()=>wi())),i.$$.on_destroy.push((()=>_i()));const ki=di(),Si=Vo();let{class:Ci}=n,{layout:Ti}=n,{stores:Ei}=n,{locale:Ii}=n,{id:Ai}=n,{util:Di}=n,{utils:Ri}=n,{animations:Li="auto"}=n,{disabled:Fi=!1}=n,{status:Bi}=n,{previewUpscale:Ni=!1}=n,{elasticityMultiplier:ji=10}=n,{willRevert:Yi=(()=>Promise.resolve(!0))}=n,{willProcessImage:Ui=(()=>Promise.resolve(!0))}=n,{willRenderCanvas:qi=Y}=n,{willRenderToolbar:Xi=Y}=n,{willSetHistoryInitialState:Gi=Y}=n,{enableButtonExport:Zi=!0}=n,{enableButtonRevert:Ki=!0}=n,{enableNavigateHistory:Qi=!0}=n,{enableToolbar:Ji=!0}=n,{enableUtils:tn=!0}=n,{enableButtonClose:en=!1}=n,{enableDropImage:nn=!1}=n,{enablePasteImage:on=!1}=n,{enableBrowseImage:rn=!1}=n,{previewImageDataMaxSize:sn}=n,{previewImageTextPixelRatio:an}=n,{layoutDirectionPreference:ln="auto"}=n,{layoutHorizontalUtilsPreference:cn="left"}=n,{layoutVerticalUtilsPreference:hn="bottom"}=n,{imagePreviewSrc:un}=n,{imageOrienter:dn={read:()=>1,apply:t=>t}}=n,{pluginComponents:pn}=n,{pluginOptions:fn={}}=n;const mn=ki.sub,gn={};let{root:yn}=n,bn=[];const xn=Qs();oo(i,xn,(t=>o(60,$i=t)));const $n=za()||1024,wn=St($n,$n),Sn=ms();let{imageSourceToImageData:Cn=(t=>e(t)?fetch(t).then((t=>{if(200!==t.status)throw`${t.status} (${t.statusText})`;return t.blob()})).then((t=>qh(t,dn,Sn))).then((t=>Xh(t,l))):ge(t)?new Promise((e=>e(x(t)))):qh(t,dn,Sn).then((t=>Xh(t,l))))}=n;const Mn=(()=>{let t,e;const i=Wh.reduce(((t,i)=>(t[i]=function(t,e,i){let n=[];return{set:e,update:i,publish:t=>{n.forEach((e=>e(t)))},subscribe:e=>(n.push(e),t(e),()=>{n=n.filter((t=>t!==e))})}}((t=>{if(!e)return t();e.stores[i].subscribe(t)()}),(t=>{e&&e.stores[i].set(t)}),(t=>{e&&e.stores[i].update(t)})),t)),{});return{update:n=>{if(e=n,t&&(t.forEach((t=>t())),t=void 0),!n)return i.file.publish(void 0),void i.loadState.publish(void 0);t=Wh.map((t=>n.stores[t].subscribe((e=>{i[t].publish(e)}))))},stores:i,destroy:()=>{t&&t.forEach((t=>t()))}}})(),{file:Pn,size:En,loadState:In,processState:An,cropAspectRatio:Dn,cropLimitToImage:Rn,crop:Ln,cropMinSize:On,cropMaxSize:zn,cropRange:Fn,cropOrigin:Bn,cropRectAspectRatio:Nn,rotation:Hn,rotationRange:Wn,targetSize:jn,flipX:Yn,flipY:Vn,backgroundColor:Gn,colorMatrix:Zn,convolutionMatrix:Kn,gamma:Qn,vignette:Jn,noise:to,decoration:eo,annotation:ro,redaction:so,frame:ao,state:lo}=Mn.stores;oo(i,Pn,(t=>o(204,Pe=t))),oo(i,En,(t=>o(192,ve=t))),oo(i,In,(t=>o(186,Jt=t))),oo(i,An,(t=>o(249,Xe=t))),oo(i,Dn,(t=>o(304,jt=t))),oo(i,Ln,(t=>o(187,ie=t))),oo(i,Gn,(t=>o(270,ri=t))),oo(i,eo,(t=>o(32,hi=t))),oo(i,ro,(t=>o(31,ci=t))),oo(i,so,(t=>o(267,ni=t))),oo(i,ao,(t=>o(33,ui=t))),oo(i,lo,(t=>o(314,Re=t)));const{images:co,shapePreprocessor:uo,imageScrambler:po,willRequestResource:fo}=Ei;oo(i,co,(t=>o(183,Nt=t))),oo(i,uo,(t=>o(184,Ht=t))),oo(i,po,(t=>o(269,oi=t))),oo(i,fo,(t=>o(58,bi=t)));const mo=lo.subscribe((t=>ki.pub("update",t))),go=Dr(),yo=Dr([0,0,0]);oo(i,yo,(t=>o(22,_e=t)));const vo=Dr([1,1,1]);oo(i,vo,(t=>o(316,si=t)));const bo=Qs();oo(i,bo,(t=>o(317,ai=t)));const xo=Dr(),$o=Dr();oo(i,$o,(t=>o(18,Wt=t)));const wo=Dr();oo(i,wo,(t=>o(185,Qt=t)));const _o=Dr(Ft());oo(i,_o,(t=>o(40,Le=t)));const ko=Dr(Ft());oo(i,ko,(t=>o(54,mi=t)));const So=Dr();oo(i,So,(t=>o(55,gi=t)));const Co=Uh("(pointer: fine)",(t=>t?"pointer-fine":"pointer-coarse"));oo(i,Co,(t=>o(235,He=t)));const To=Uh("(hover: hover)",(t=>t?"pointer-hover":"pointer-no-hover"));oo(i,To,(t=>o(236,We=t)));const Mo=Dr(!1);oo(i,Mo,(t=>o(188,re=t)));const Po=Ar(void 0,(t=>{const e=Qs(0),i=[Mo.subscribe((t=>{e.set(t?1:0)})),e.subscribe(t)];return()=>i.forEach((t=>t()))}));oo(i,Po,(t=>o(318,li=t)));const Eo=Dr(Ni);oo(i,Eo,(t=>o(190,le=t)));const Io=Dr();oo(i,Io,(t=>o(306,se=t)));const Ao=Dr();oo(i,Ao,(t=>o(305,ne=t)));const Do=Ar(void 0,(t=>{const e=Qs(void 0,{precision:1e-4}),i=[Ln.subscribe((()=>{if(!ie)return;const t=void 0===ne||re,i=Rl(ie,ne,5*ji);e.set(i,{hard:t})})),e.subscribe(t)];return()=>i.forEach((t=>t()))})),Ro=Dr();oo(i,Ro,(t=>o(309,de=t)));const Lo=Dr();oo(i,Lo,(t=>o(313,xe=t)));const Oo=Dr(void 0);oo(i,Oo,(t=>o(310,fe=t)));let zo={left:0,right:0,top:0,bottom:0};const Fo=Rr([ao,Ro],(([t,e],i)=>{e||i(zo);const n=Wo(e,t);Mi(zo.top,4)===Mi(n.top,4)&&Mi(zo.bottom,4)===Mi(n.bottom,4)&&Mi(zo.right,4)===Mi(n.right,4)&&Mi(zo.left,4)===Mi(n.left,4)||(zo=n,i(n))})),Bo=Rr([Fo],(([t],e)=>{e(Object.values(t).some((t=>t>0)))})),No=Rr([So,_o,ko],(([t,e,i],n)=>{if(!t)return n(void 0);let o=0;1!==_.length||s||(o=i.y+i.height),n(Yt(t.x+e.x,t.y+e.y+o,t.width,t.height))}));oo(i,No,(t=>o(191,me=t)));const Ho=Rr([No,Ln],(([t,e],i)=>{if(!t||!e||se||ne)return;const n=Math.min(t.width/e.width,t.height/e.height);i(le?n:Math.min(1,n))}));oo(i,Ho,(t=>o(311,ye=t)));const Wo=(t,e)=>{if(!e||!t)return{top:0,right:0,bottom:0,left:0};const i=kn(e,t,c),n=_n(i,t);return{top:Math.abs(n.top),right:Math.abs(n.right),bottom:Math.abs(n.bottom),left:Math.abs(n.left)}},jo=Dr(void 0),qo=Rr([Ln,No],(([t,e])=>{if(e&&t)return Math.min(e.width/t.width,e.height/t.height)})),Xo=Rr([jo,Ln,Ro],(([t,e,i])=>t&&e&&i?Math.min(e.width/i.width,e.height/i.height)*t:1));oo(i,Xo,(t=>o(307,he=t)));const Go=Dr(K());oo(i,Go,(t=>o(308,ue=t)));const Ko=Dr({scalar:he,translation:ue}),Qo=()=>{Ko.set({scalar:void 0,translation:K()})},Jo=Ar(void 0,(t=>{const e=Qs(void 0,{precision:1e-4}),i=()=>{if(!de)return;const t=re||!pe,i=Rl(de,fe,1*ji);i.width<0&&(i.width=0,i.x=de.x),i.height<0&&(i.height=0,i.y=de.y),Ut(i,me),Ut(i,ue),qt(i,he),e.set(i,{hard:t})},n=[No.subscribe(i),Ro.subscribe(i),Xo.subscribe(i),Go.subscribe(i),ao.subscribe(i),e.subscribe(t)];return()=>n.forEach((t=>t()))}));let tr;oo(i,Jo,(t=>o(21,$e=t)));const er=t=>{if(s&&tr&&Zt(tr,t))return;tr=t;const e=ie.width<=t.width&&ie.height<=t.height?ee(t,Xt(zt(ie),ye||1)):oe(t,Kt(ie||ve));Ro.set(e)};let ir=!1;const nr=Ho.subscribe((t=>{!ir&&void 0!==t&&ie&&(er(me),ir=!0)})),or=No.subscribe((t=>{t&&void 0!==ye&&ie&&er(t)}));let rr;const sr=Lo.subscribe((t=>{if(!t)return rr=void 0,void ho(Io,se=void 0,se);rr=be;const e=zt(ie);Io.set(e)})),ar=Ro.subscribe((t=>{if(!t||!xe)return;const e=(i=zt(t),n=xe,i.x-=n.x,i.y-=n.y,i.width-=n.width,i.height-=n.height,i);var i,n;Gt(e,rr);const o=((t,e)=>(t.x+=e.x,t.y+=e.y,t.width+=e.width,t.height+=e.height,t))(zt(se),e);Ln.set(o)})),lr=Ln.subscribe((t=>{if(re||xe||ne)return;if(!t||!de)return;const e=Kt(de),i=Kt(t);if(Mi(e,6)===Mi(i,6))return;const n=Math.min(me.width/ie.width,me.height/ie.height),o=St(t.width*n,t.height*n),r=.5*(de.width-o.width),s=.5*(de.height-o.height),a=Yt(de.x+r,de.y+s,o.width,o.height);Ro.set(a)})),cr=Rr([Ho,Ln,Ro],(([t,e,i],n)=>{if(!t||!e||!i)return;const o=i.width/e.width,r=i.height/e.height;n(Math.max(o,r)/t)})),hr=Rr([Ho,cr],(([t,e],i)=>{e&&i(t*e)}));oo(i,hr,(t=>o(312,be=t)));const ur=Qs(.075,{stiffness:.03,damping:.4,precision:.001}),dr=Rr([bo,yo,ur,Jo,Xo,ao,Bo,Fo],(([t,e,i,n,o,r,a,l],c)=>{if(!n||s)return c([]);let{x:h,y:u,width:d,height:p}=n;h+=.5,u+=.5,d-=.5,p-=.5;const f=[];if(a){f.push({x:h,y:u,width:d-.5,height:p-.5,strokeWidth:1,strokeColor:e,opacity:.85}),i>.1&&f.push({x:h,y:u,width:d-.5,height:p-.5,strokeWidth:1,strokeColor:t,opacity:i});let{left:n,right:r,top:s,bottom:a}=l;return n*=o,r*=o,s*=o,a*=o,void c([...f,{x:h-n,y:u-r,width:d+n+r,height:p+s+a,strokeWidth:1,strokeColor:t,opacity:.05}])}const m=tu(t),g=r&&r.frameColor&&tu(r.frameColor);if(m&&g||!m&&!m){const t=m?[1,1,1,.3]:[0,0,0,.075];f.push({x:h,y:u,width:d,height:p,strokeWidth:3.5,strokeColor:t,opacity:i})}c([...f,{x:h,y:u,width:d,height:p,strokeWidth:1,strokeColor:t,opacity:i}])})),pr=Dr([]);oo(i,pr,(t=>o(203,Me=t)));const fr=Rr([dr,pr],(([t,e],i)=>{i([...t,...e])}));oo(i,fr,(t=>o(59,xi=t)));const mr=Qs(0,{precision:.001});oo(i,mr,(t=>o(195,ke=t)));const gr=Qs();oo(i,gr,(t=>o(194,we=t)));const yr=Qs();oo(i,yr,(t=>o(197,Se=t)));const vr=Qs();oo(i,vr,(t=>o(199,Ce=t)));const br=Qs();oo(i,br,(t=>o(201,Te=t)));const xr=Dr(!1);oo(i,xr,(t=>o(246,qe=t)));const $r=Dr();let wr;oo(i,$r,(t=>o(206,Ie=t)));const _r=Rr([xr,$r],(([e,i],n)=>{if(e&&i){if(wr&&(wr.cancel(),o(177,wr=void 0)),Tn(i))return n((e=>{const i=t("canvas",{width:e.width,height:e.height});return i.getContext("2d").drawImage(e,0,0),i})(i));var r,s;o(177,wr={cancel:f}),(r=i,s=wr,new Promise(((t,e)=>{const i=qr.length?0:250;let n,o=!1;s.cancel=()=>o=!0;const a=Date.now();Cn(r).then((e=>{const r=Date.now()-a;clearTimeout(n),n=setTimeout((()=>{o||t(e)}),Math.max(0,i-r))})).catch(e)}))).then(n).catch((t=>{ho(In,Jt.error=t,Jt)})).finally((()=>{o(177,wr=void 0)}))}else n(void 0)}));wi(),wi=io(_r,(t=>o(205,Ee=t)));let{imagePreviewCurrent:kr}=n;const Sr=Dr({});oo(i,Sr,(t=>o(238,Ye=t)));const Cr=Dr([]);oo(i,Cr,(t=>o(57,vi=t)));const Tr=Rr([No,wo,En,Do,Ro,hr,Hn,Yn,Vn,Xo,Go],(([t,e,i,n,o,r,s,a,l,c,h],u)=>{t&&o&&u(((t,e,i,n,o,r,s,a,l,c,h)=>{if(!(t&&e&&i&&n&&a))return;a*=r;const u=ce(zt(e)),d=Vt(u),p=Vt(t),f=Bt(i),m=Vt(f),g=Kr(i,n,l),y=Vt(g),v=ht(et(m),y),b=ht(et(p),d);v.x+=b.x,v.y+=b.y;const x=it(et(v));x.x+=b.x,x.y+=b.y;const $=Vt(Ut(Ut(zt(o),s),t)),w=ht($,p);return ct(v,w),{origin:x,translation:v,rotation:{x:h?Math.PI:0,y:c?Math.PI:0,z:l},scale:a}})(t,e,i,n,o,c,h,r,s,a,l))}));oo(i,Tr,(t=>o(237,je=t)));const Mr=Rr([Zn,Kn,Qn,Jn,to],(([t,e,i,n,o],r)=>{const s=t&&Object.keys(t).map((e=>t[e])).filter(Boolean);r({gamma:i||void 0,vignette:n||void 0,noise:o||void 0,convolutionMatrix:e||void 0,colorMatrix:s&&s.length&&Un(s)})}));let Pr,Er;const Ir=(()=>{if(!Oe())return!1;const t=navigator.userAgent.match(/OS (\d+)_(\d+)_?(\d+)?/i)||[],[,e,i]=t.map((t=>parseInt(t,10)||0));return e>13||13===e&&i>=4})(),Lr=Dr({});oo(i,Lr,(t=>o(234,Ne=t)));const Or=nc(),zr=Ar(Or,(t=>{const e=()=>t(nc()),i=matchMedia(`(resolution: ${Or}dppx)`);return i.addListener(e),()=>i.removeListener(e)}));oo(i,zr,(t=>o(56,yi=t)));const Fr=Dr();oo(i,Fr,(t=>o(39,pe=t)));const Br=Dr();oo(i,Br,(t=>o(211,De=t)));const Nr=((t,e)=>{const{sub:i,pub:n}=di(),o=[],r=Dr(0),s=[],a=()=>s.forEach((t=>t({index:no(r),length:o.length}))),l={get index(){return no(r)},set index(t){t=Number.isInteger(t)?t:0,t=Qr(t,0,o.length-1),r.set(t),e(o[l.index]),a()},get state(){return o[o.length-1]},length:()=>o.length,undo(){const t=l.index--;return n("undo",t),t},redo(){const t=l.index++;return n("redo",l.index),t},revert(){o.length=1,l.index=0,n("revert")},write(i){i&&e({...t(),...i});const n=t(),s=o[o.length-1];JSON.stringify(n)!==JSON.stringify(s)&&(o.length=l.index+1,o.push(n),r.set(o.length-1),a())},set(t={}){o.length=0,l.index=0;const e=Array.isArray(t)?t:[t];o.push(...e),l.index=o.length-1},get:()=>[...o],subscribe:t=>(s.push(t),t({index:l.index,length:o.length}),()=>s.splice(s.indexOf(t),1)),on:i};return l})((()=>Re),(t=>{ho(lo,Re=t,Re),_o.set(Le)}));_i(),_i=io(Nr,(t=>o(213,ze=t)));const Hr=()=>{const t={x:0,y:0,...ve},e=ae(oe(t,Re.cropAspectRatio),Math.round),i=Gi({...Re,rotation:0,crop:e},Re),n=[i];JSON.stringify(i)!==JSON.stringify(Re)&&n.push({...Re}),Nr.set(n)},Wr=In.subscribe((t=>{t&&t.complete&&Hr()})),jr=()=>Yi().then((t=>t&&Nr.revert())),Yr=Dr(!1);oo(i,Yr,(t=>o(215,Fe=t)));const Vr=()=>{ho(Yr,Fe=!0,Fe),Ui().then((t=>{if(!t)return void ho(Yr,Fe=!1,Fe);let e;e=ls.subscribe((t=>{1===t&&(e&&e(),Si("processImage"))}))}))},Ur=An.subscribe((t=>{if(!t)return;ho(Yr,Fe=!0,Fe);const{complete:e,abort:i}=t;(e||i)&&ho(Yr,Fe=!1,Fe)})),qr=(()=>{const t=[],e=[],i=[],n=()=>{e.forEach((t=>t(i)))},o=e=>{e.unsub=e.subscribe((o=>((e,o)=>{const r=t.indexOf(e);r<0||(i[r]=o,n())})(e,o))),n()};return{get length(){return t.length},clear:()=>{t.forEach((t=>t.unsub())),t.length=0,i.length=0},unshift:e=>{t.unshift(e),o(e)},get:e=>t[e],push:e=>{t.push(e),o(e)},remove:e=>{e.unsub();const n=t.indexOf(e);t.splice(n,1),i.splice(n,1)},forEach:e=>t.forEach(e),filter:e=>t.filter(e),subscribe:t=>(e.push(t),()=>{e.splice(e.indexOf(t),1)})}})();oo(i,qr,(t=>o(25,Ue=t)));const Xr=Ar(void 0,(t=>qr.subscribe((e=>{const{origin:i,translation:n,rotation:o,scale:r}=e[0];t({origin:i,translation:n,rotation:o,scale:r})})))),Gr=Dr();oo(i,Gr,(t=>o(230,Be=t)));const Zr=Dr(),Jr={...Ei,imageFile:Pn,imageSize:En,imageBackgroundColor:Gn,imageCropAspectRatio:Dn,imageCropMinSize:On,imageCropMaxSize:zn,imageCropLimitToImage:Rn,imageCropRect:Ln,imageCropRectOrigin:Bn,imageCropRectSnapshot:Io,imageCropRectAspectRatio:Nn,imageCropRange:Fn,imageRotation:Hn,imageRotationRange:Wn,imageFlipX:Yn,imageFlipY:Vn,imageOutputSize:jn,imageColorMatrix:Zn,imageConvolutionMatrix:Kn,imageGamma:Qn,imageVignette:Jn,imageNoise:to,imageDecoration:eo,imageAnnotation:ro,imageRedaction:so,imageFrame:ao,imagePreview:_r,imagePreviewSource:$r,imageTransforms:Tr,imagePreviewModifiers:Sr,history:Nr,animation:Fr,pixelRatio:zr,elasticityMultiplier:ji,scrollElasticity:Cu,rangeInputElasticity:5,pointerAccuracy:Co,pointerHoverable:To,env:Lr,rootRect:wo,stageRect:No,stageScalar:Ho,framePadded:Bo,presentationScalar:hr,imagePreviewUpscale:Zr,utilRect:So,rootBackgroundColor:yo,rootForegroundColor:vo,rootLineColor:bo,rootColorSecondary:xo,imageOutlineOpacity:ur,utilTools:Gr,imageSelectionPan:Go,imageSelectionZoom:jo,imageSelectionStageFitScalar:qo,imageSelectionStoredState:Ko,imageOverlayMarkup:pr,interfaceImages:Cr,isInteracting:Mo,isInteractingFraction:Po,imageCropRectIntent:Ao,imageCropRectPresentation:Do,imageSelectionRect:Ro,imageSelectionRectIntent:Oo,imageSelectionRectPresentation:Jo,imageSelectionRectSnapshot:Lo,imageScalar:cr,imageTransformsInterpolated:Xr};delete Jr.image;const ts="util-"+A();let es=[],is=Oe();const ns=(t,e)=>{const i=(t=>(t=>(t=t.trim(),/^rgba/.test(t)?t.substr(5).split(",").map(parseFloat).map(((t,e)=>t/(3===e?1:255))):/^rgb/.test(t)?t.substr(4).split(",").map(parseFloat).map((t=>t/255)):/^#/.test(t)?(t=>{const[,e,i,n]=t.split("");t=4===t.length?`#${e}${e}${i}${i}${n}${n}`:t;const[,o,r,s]=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return[o,r,s].map((t=>parseInt(t,16)/255))})(t):/[0-9]{1,3}\s?,\s?[0-9]{1,3}\s?,\s?[0-9]{1,3}/.test(t)?t.split(",").map((t=>parseInt(t,10))).map((t=>t/255)):void 0))(tt.getPropertyValue(t)))(t);i&&0!==i[3]&&(i.length=3,e.set(i))},os=()=>{ns("color",vo),ns("background-color",yo),ns("outline-color",bo),ns("--color-secondary",xo)},rs=Rr([Tr,Mr,Gn],(([t,e,i])=>t&&{...t,...e,backgroundColor:i}));oo(i,rs,(t=>o(240,Ve=t)));const ss=t=>{qr.forEach(((e,i)=>{const n=0===i?1:0;e.set({...t,opacity:n,resize:1},pe)}))};let as;const ls=Zs(void 0,{duration:500});let cs;oo(i,ls,(t=>o(28,Ze=t)));const hs=Dr(!1);let us;oo(i,hs,(t=>o(258,Ge=t)));const ds=Qs(void 0,{stiffness:.1,damping:.7,precision:.25});oo(i,ds,(t=>o(52,pi=t)));const ps=Qs(0,{stiffness:.1,precision:.05});oo(i,ps,(t=>o(53,fi=t)));const fs=Qs(0,{stiffness:.02,damping:.5,precision:.25});oo(i,fs,(t=>o(262,Je=t)));const gs=Qs(void 0,{stiffness:.02,damping:.5,precision:.25});oo(i,gs,(t=>o(260,Qe=t)));const ys=Qs(void 0,{stiffness:.02,damping:.5,precision:.25});let vs;oo(i,ys,(t=>o(263,ti=t)));const bs=()=>{Si("abortLoadImage")},xs=()=>{Si("abortProcessImage"),ho(Yr,Fe=!1,Fe)},$s=t=>t.preventDefault(),ws=Ir?t=>{const e=t.touches?t.touches[0]:t;e.pageX>10&&e.pageX<Pr-10||$s(t)}:f,_s=Oe()?$s:f,ks=Oe()?$s:f,Ss=Dr({});oo(i,Ss,(t=>o(264,ei=t)));const Cs=Dr([]);oo(i,Cs,(t=>o(315,ii=t))),Uo("keysPressed",Cs);const Ts=t=>{!t||r(t)&&!(t=>/^image/.test(t.type)&&!/svg/.test(t.type))(t)||!r(t)&&!/^http/.test(t)||Si("loadImage",t)},Ms=t=>{t&&Ts(t)};let Ps,Es,Is=[];const As=Dr();Uo("rootPortal",As),Uo("rootRect",wo);const Ds=()=>({foregroundColor:[...si],lineColor:[...ai],utilVisibility:{...M},isInteracting:re,isInteractingFraction:li,rootRect:zt(Qt),stageRect:zt(me),annotationShapesDirty:Vs,decorationShapesDirty:Us,frameShapesDirty:qs,blendShapesDirty:Xs}),Rs=(t,e,i)=>vn(t,St(e.width/i,e.height/i)),Ls=(t,e,i)=>(t._translate=J(e),t._scale=i,t),Os=t=>{const e=[];return t.forEach((t=>e.push(zs(t)))),e.filter(Boolean)},zs=t=>Hi(t)?(t.points=[Q(t.x1,t.y1),Q(t.x2,t.y2)],t):Wi(t)?(t.points=[Q(t.x1,t.y1),Q(t.x2,t.y2),Q(t.x3,t.y3)],t):(t=>Oi(t)&&!t.text.length)(t)?(zi(t)&&(t.width=5,t.height=t.lineHeight),t.strokeWidth=1,t.strokeColor=[1,1,1,.5],t.backgroundColor=[0,0,0,.1],t):t;let Fs,Bs=[],Ns=[],Hs=[],Ws=[],js={};const Ys=(t,e,i,n,o,r)=>{const{annotationShapesDirty:s,decorationShapesDirty:a,frameShapesDirty:l,blendShapesDirty:h,selectionRect:u,scale:d}=t,p=Fs!==d||!Zt(js,u);p&&(Fs=d,js=u),(s||i!==ci)&&(Bs=Os(i.filter(Vi).map(Pi).sort(((t,e)=>t.alwaysOnTop?1:e.alwaysOnTop?-1:0)).map((t=>vn(t,ve))).map(c).flat())),h&&(Ns=e.filter(Vi).map((t=>vn(t,ve)))),(a||n!==hi||p)&&(Hs=Os(n.filter(Vi).map(Pi).sort(((t,e)=>t.alwaysOnTop?1:e.alwaysOnTop?-1:0)).map((t=>Rs(t,u,d))).map(c).flat().map((t=>Ls(t,u,d))))),(l||r!==ui||p)&&(Ws=r?Os([r].map(Pi).map((t=>Rs(t,u,d))).map(c).flat().map((t=>Ls(t,u,d)))):[]);const f=Os(o.filter(Vi));return{blendShapesDirty:h,blendShapes:Ns,annotationShapesDirty:s,annotationShapes:Bs,decorationShapesDirty:a,decorationShapes:Hs,frameShapesDirty:l,frameShapes:Ws,interfaceShapes:f}};let Vs=!0,Us=!0,qs=!0,Xs=!0;return Yo((()=>{mo(),or(),nr(),sr(),ar(),lr(),Wr(),Ur(),Co.destroy(),To.destroy(),Mn.destroy(),qr.clear(),o(147,kr=void 0),o(178,as=void 0),Bs.length=0,Ns.length=0,Hs.length=0,Ws.length=0})),i.$$set=t=>{"class"in t&&o(148,Ci=t.class),"layout"in t&&o(149,Ti=t.layout),"stores"in t&&o(150,Ei=t.stores),"locale"in t&&o(2,Ii=t.locale),"id"in t&&o(3,Ai=t.id),"util"in t&&o(151,Di=t.util),"utils"in t&&o(152,Ri=t.utils),"animations"in t&&o(153,Li=t.animations),"disabled"in t&&o(154,Fi=t.disabled),"status"in t&&o(146,Bi=t.status),"previewUpscale"in t&&o(155,Ni=t.previewUpscale),"elasticityMultiplier"in t&&o(4,ji=t.elasticityMultiplier),"willRevert"in t&&o(156,Yi=t.willRevert),"willProcessImage"in t&&o(157,Ui=t.willProcessImage),"willRenderCanvas"in t&&o(5,qi=t.willRenderCanvas),"willRenderToolbar"in t&&o(158,Xi=t.willRenderToolbar),"willSetHistoryInitialState"in t&&o(159,Gi=t.willSetHistoryInitialState),"enableButtonExport"in t&&o(160,Zi=t.enableButtonExport),"enableButtonRevert"in t&&o(161,Ki=t.enableButtonRevert),"enableNavigateHistory"in t&&o(162,Qi=t.enableNavigateHistory),"enableToolbar"in t&&o(6,Ji=t.enableToolbar),"enableUtils"in t&&o(163,tn=t.enableUtils),"enableButtonClose"in t&&o(164,en=t.enableButtonClose),"enableDropImage"in t&&o(165,nn=t.enableDropImage),"enablePasteImage"in t&&o(166,on=t.enablePasteImage),"enableBrowseImage"in t&&o(167,rn=t.enableBrowseImage),"previewImageDataMaxSize"in t&&o(168,sn=t.previewImageDataMaxSize),"previewImageTextPixelRatio"in t&&o(7,an=t.previewImageTextPixelRatio),"layoutDirectionPreference"in t&&o(169,ln=t.layoutDirectionPreference),"layoutHorizontalUtilsPreference"in t&&o(170,cn=t.layoutHorizontalUtilsPreference),"layoutVerticalUtilsPreference"in t&&o(171,hn=t.layoutVerticalUtilsPreference),"imagePreviewSrc"in t&&o(172,un=t.imagePreviewSrc),"imageOrienter"in t&&o(173,dn=t.imageOrienter),"pluginComponents"in t&&o(174,pn=t.pluginComponents),"pluginOptions"in t&&o(8,fn=t.pluginOptions),"root"in t&&o(1,yn=t.root),"imageSourceToImageData"in t&&o(9,Cn=t.imageSourceToImageData),"imagePreviewCurrent"in t&&o(147,kr=t.imagePreviewCurrent)},i.$$.update=()=>{if(33554432&i.$$.dirty[4]&&o(182,s="overlay"===Ti),134217984&i.$$.dirty[5]&&o(17,a=tn&&!s),257&i.$$.dirty[0]&&fn&&Object.entries(fn).forEach((([t,e])=>{Object.entries(e).forEach((([e,i])=>{gn[t]&&o(0,gn[t][e]=i,gn)}))})),1&i.$$.dirty[0]|524288&i.$$.dirty[5]){let t=!1;pn.forEach((([e])=>{gn[e]||(o(0,gn[e]={},gn),t=!0)})),t&&o(176,bn=[...pn])}var t,n,r,f;if(1073741824&i.$$.dirty[4]&&xn.set(Fi?1:0),8192&i.$$.dirty[5]&&(l=sn?(t=sn,n=wn,St(Math.min(t.width,n.width),Math.min(t.height,n.height))):wn),268435456&i.$$.dirty[5]&&Mn.update(Nt[0]),536870912&i.$$.dirty[5]&&(c=Ht?t=>Ht(t,{isPreview:!0}):Y),262144&i.$$.dirty[0]&&Wt&&wo.set(Yt(Wt.x,Wt.y,Wt.width,Wt.height)),1207959552&i.$$.dirty[5]|1&i.$$.dirty[6]&&Qt&&s&&Jt&&Jt.complete&&(()=>{const t=jt,e=Kt(Qt);t&&t===e||(Dn.set(Kt(Qt)),Hr())})(),4&i.$$.dirty[0]|268435456&i.$$.dirty[4]|2097152&i.$$.dirty[5]&&o(189,_=Ii&&bn.length?Ri||bn.map((([t])=>t)):[]),8&i.$$.dirty[6]&&o(19,D=_.length>1),524288&i.$$.dirty[0]&&(D||_o.set(Ft())),64&i.$$.dirty[0]&&(Ji||ko.set(Ft())),134217729&i.$$.dirty[5]&&Eo.set(Ni||s),2&i.$$.dirty[6]&&ie&&Qo(),2097152&i.$$.dirty[5]|8&i.$$.dirty[6]&&o(216,k=bn.filter((([t])=>_.includes(t)))),1073741824&i.$$.dirty[6]&&o(217,S=k.length),134217728&i.$$.dirty[4]|8&i.$$.dirty[6]|1&i.$$.dirty[7]&&o(20,T=Di&&"string"==typeof Di&&_.includes(Di)?Di:S>0?_[0]:void 0),1048576&i.$$.dirty[0]&&T&&ur.set(.075),2097152&i.$$.dirty[0]|32&i.$$.dirty[6]&&$e){let t=$e.x-me.x,e=me.x+me.width-($e.x+$e.width),i=$e.y-me.y,n=me.y+me.height-($e.y+$e.height),o=Math.min(t,i,e,n);mr.set(o>0?0:Math.min(.85,Math.abs(o/64)))}if(32&i.$$.dirty[6]&&me&&gr.set({x:0,y:me.y,width:me.x<64?0:me.x,height:me.height}),1073741824&i.$$.dirty[5]|32&i.$$.dirty[6]&&me&&yr.set({x:0,y:0,width:Qt.width,height:me.y}),1073741824&i.$$.dirty[5]|32&i.$$.dirty[6]&&me){let t=me.x+me.width,e=Qt.width-(me.x+me.width);e<64&&(t+=e,e=0),vr.set({x:t,y:me.y,width:e,height:me.height})}if(1073741824&i.$$.dirty[5]|32&i.$$.dirty[6]&&me&&br.set({x:0,y:me.y+me.height,width:Qt.width,height:Qt.height-(me.y+me.height)}),4194304&i.$$.dirty[0]|768&i.$$.dirty[6]&&o(193,h=we&&{id:Su,backgroundColor:_e,opacity:ke,...we}),4194304&i.$$.dirty[0]|2560&i.$$.dirty[6]&&o(196,u=Se&&{id:Su,backgroundColor:_e,opacity:ke,...Se}),4194304&i.$$.dirty[0]|8704&i.$$.dirty[6]&&o(198,d=Ce&&{id:Su,backgroundColor:_e,opacity:ke,...Ce}),4194304&i.$$.dirty[0]|33280&i.$$.dirty[6]&&o(200,p=Te&&{id:Su,backgroundColor:_e,opacity:ke,...Te}),21632&i.$$.dirty[6]&&o(202,m=[u,d,p,h].filter(Boolean)),196608&i.$$.dirty[6]&&m&&Me){const t=Me.filter((t=>t.id!==Su));pr.set([...t,...m])}if(131072&i.$$.dirty[5]|262144&i.$$.dirty[6]&&$r.set(un||Pe||void 0),2&i.$$.dirty[0]|8388608&i.$$.dirty[4]|524288&i.$$.dirty[6]&&(o(147,kr=Ee),Ee&&yn.dispatchEvent(jh("loadpreview",kr))),1048576&i.$$.dirty[6]&&Ie&&(Go.set(K()),jo.set(void 0),Qo(),Cr.set([])),2097156&i.$$.dirty[6]&&o(208,y=!re&&g),16777216&i.$$.dirty[6]&&o(209,v=!Ae),536870912&i.$$.dirty[4]|12582912&i.$$.dirty[6]&&ho(Fr,pe="always"===Li?y:"never"!==Li&&y&&v,pe),536870912&i.$$.dirty[4]|10485760&i.$$.dirty[6]&&ho(Br,De="always"===Li?g:"never"!==Li&&g&&v,De),134217728&i.$$.dirty[6]&&o(212,b=ze.index>0),134217728&i.$$.dirty[6]&&o(214,$=ze.index<ze.length-1),16&i.$$.dirty[6]&&Zr.set(le),4&i.$$.dirty[0]|1073741832&i.$$.dirty[6]&&o(23,C=_.map((t=>{const e=k.find((([e])=>t===e));if(e)return{id:t,view:e[1],tabIcon:Ii[t+"Icon"],tabLabel:Ii[t+"Label"]}})).filter(Boolean)||[]),1048576&i.$$.dirty[0]&&go.set(T),25165824&i.$$.dirty[0]&&o(24,M=C.reduce(((t,e)=>(t[e.id]=M&&M[e.id]||0,t)),{})),1048576&i.$$.dirty[0]&&o(41,P={name:ts,selected:T}),8388608&i.$$.dirty[0]&&o(42,E=C.map((t=>({id:t.id,icon:t.tabIcon,label:t.tabLabel})))),8388608&i.$$.dirty[0]&&o(43,I=C.map((t=>t.id))),16777216&i.$$.dirty[4]&&o(44,R=Ga(["PinturaRoot","PinturaRootComponent",Ci])),1073741824&i.$$.dirty[5]&&o(218,L=Qt&&(Qt.width>1e3?"wide":Qt.width<600?"narrow":void 0)),1073741824&i.$$.dirty[5]&&o(219,O=Qt&&(Qt.width<=320||Qt.height<=460)),1073741824&i.$$.dirty[5]&&o(220,z=Qt&&(Qt.height>1e3?"tall":Qt.height<600?"short":void 0)),2&i.$$.dirty[0]&&o(221,F=yn&&yn.parentNode&&yn.parentNode.classList.contains("PinturaModal")),4096&i.$$.dirty[0]|1073741824&i.$$.dirty[5]|16&i.$$.dirty[7]&&o(222,B=F&&Qt&&Pr>Qt.width),8192&i.$$.dirty[0]|1073741824&i.$$.dirty[5]|16&i.$$.dirty[7]&&o(223,N=F&&Qt&&Er>Qt.height),96&i.$$.dirty[7]&&o(224,H=B&&N),2&i.$$.dirty[7]&&o(225,W="narrow"===L),1073758208&i.$$.dirty[5]&&o(226,(r=Qt,f=ln,j=Qt?"auto"===f?r.width>r.height?"landscape":"portrait":"horizontal"===f?r.width<500?"portrait":"landscape":"vertical"===f?r.height<400?"landscape":"portrait":void 0:"landscape")),512&i.$$.dirty[7]&&o(45,V="landscape"===j),264&i.$$.dirty[7]&&o(227,U=W||"short"===z),4096&i.$$.dirty[0]|1073741824&i.$$.dirty[5]&&o(228,q=is&&Qt&&Pr===Qt.width&&!Ir),8192&i.$$.dirty[7]&&o(229,X=Be&&Be.length),32768&i.$$.dirty[5]&&o(231,G="has-navigation-preference-"+cn),65536&i.$$.dirty[5]&&o(232,Z="has-navigation-preference-"+hn),2&i.$$.dirty[0]&&o(233,tt=yn&&getComputedStyle(yn)),65536&i.$$.dirty[7]&&tt&&os(),655424&i.$$.dirty[0]|1107296256&i.$$.dirty[4]|33554432&i.$$.dirty[6]|970494&i.$$.dirty[7]&&Lr.set({...Ne,layoutMode:Ti,orientation:j,horizontalSpace:L,verticalSpace:z,navigationHorizontalPreference:G,navigationVerticalPreference:Z,isModal:F,isDisabled:Fi,isCentered:H,isCenteredHorizontally:B,isCenteredVertically:N,isAnimated:De,pointerAccuracy:He,pointerHoverable:We,isCompact:U,hasSwipeNavigation:q,hasLimitedSpace:O,hasToolbar:Ji,hasNavigation:D&&a,isIOS:is}),131072&i.$$.dirty[7]&&o(46,nt=Object.entries(Ne).map((([t,e])=>/^is|has/.test(t)?e?Vh(t):void 0:e)).filter(Boolean).join(" ")),1048576&i.$$.dirty[0]&&T&&Gr.set([]),3145728&i.$$.dirty[7]&&o(47,ot=je&&Object.entries(Ye).filter((([,t])=>null!=t)).reduce(((t,[,e])=>({...t,...e})),{})),1&i.$$.dirty[6]&&o(239,lt=Jt&&"any-to-file"===Jt.task),4194304&i.$$.dirty[7]&&lt&&qr&&qr.clear(),8388608&i.$$.dirty[7]&&o(241,rt=!!Ve&&!!Ve.translation),8388608&i.$$.dirty[5]|524288&i.$$.dirty[6]|16777216&i.$$.dirty[7]&&rt&&Ee&&Ee!==as&&(o(178,as=Ee),(()=>{const t=qr.length?void 0:{resize:1.05},e=((t,e,i={})=>{const{resize:n=1,opacity:o=0}=i,r={opacity:[Qs(o,{...Qh,stiffness:.1}),Y],resize:[Qs(n,{...Qh,stiffness:.1}),Y],translation:[Qs(void 0,Qh),Y],rotation:[Qs(void 0,Jh),Y],origin:[Qs(void 0,Qh),Y],scale:[Qs(void 0,Jh),Y],gamma:[Qs(void 0,Jh),t=>t||1],vignette:[Qs(void 0,Jh),t=>t||0],colorMatrix:[Qs([...Kh],Qh),t=>t||[...Kh]],convolutionMatrix:[Dr(void 0),t=>t&&t.clarity||void 0],backgroundColor:[Qs(void 0,Qh),Y]},s=Object.entries(r).map((([t,e])=>[t,e[0]])),a=s.map((([,t])=>t)),l=Object.entries(r).reduce(((t,[e,i])=>{const[n,o]=i;return t[e]=(t,e)=>n.set(o(t),e),t}),{});let c;const h=Rr(a,(i=>(c=i.reduce(((t,e,i)=>(t[s[i][0]]=e,t)),{}),c.data=t,c.size=e,c.scale*=i[1],c)));return h.get=()=>c,h.set=(t,e)=>{const i={hard:!e};Object.entries(t).forEach((([t,e])=>{l[t]&&l[t](e,i)}))},h})(Ee,ve,t);qr.unshift(e),ss(Ve)})()),25165824&i.$$.dirty[7]&&rt&&ss(Ve),33554432&i.$$.dirty[0]&&Ue&&Ue.length>1){let t=[];qr.forEach(((e,i)=>{0!==i&&e.get().opacity<=0&&t.push(e)})),t.forEach((t=>qr.remove(t)))}if(4&i.$$.dirty[0]|33554432&i.$$.dirty[7]&&o(26,at=Ii&&st.length&&Ii.labelSupportError(st)),1&i.$$.dirty[6]&&o(243,ut=Jt&&!!Jt.error),1&i.$$.dirty[6]&&o(27,dt=!Jt||!Jt.complete&&void 0===Jt.task),1&i.$$.dirty[6]&&o(244,pt=Jt&&(Jt.taskLengthComputable?Jt.taskProgress:1/0)),4194304&i.$$.dirty[7]&&lt&&ho(xr,qe=!1,qe),16777216&i.$$.dirty[5]|1&i.$$.dirty[6]&&Jt&&Jt.complete){const t=500;clearTimeout(cs),o(179,cs=setTimeout((()=>{ho(xr,qe=!0,qe)}),t))}if(134217728&i.$$.dirty[0]|1&i.$$.dirty[6]|603979776&i.$$.dirty[7]&&o(245,ft=Jt&&!ut&&!dt&&!qe),4194304&i.$$.dirty[5]|1572864&i.$$.dirty[6]&&o(247,mt=!(!Ie||Ee&&!wr)),536870912&i.$$.dirty[6]|2&i.$$.dirty[8]&&o(248,gt=Fe||Xe&&void 0!==Xe.progress&&!Xe.complete),134217728&i.$$.dirty[0]|1&i.$$.dirty[6]&&o(250,yt=Jt&&!(Jt.error||dt)),4&i.$$.dirty[0]|1&i.$$.dirty[6]&&o(251,vt=Ii&&(Jt?!Jt.complete||Jt.error?va(Ii.statusLabelLoadImage(Jt),Jt.error&&Jt.error.metadata,"{","}"):Ii.statusLabelLoadImage({progress:1/0,task:"blob-to-bitmap"}):Ii.statusLabelLoadImage(Jt))),4&i.$$.dirty[0]|2&i.$$.dirty[8]&&o(252,bt=Xe&&Ii&&Ii.statusLabelProcessImage(Xe)),2&i.$$.dirty[8]&&o(253,xt=Xe&&(Xe.taskLengthComputable?Xe.taskProgress:1/0)),2&i.$$.dirty[8]&&o(254,$t=Xe&&!Xe.error),2&i.$$.dirty[8]&&o(255,wt=Xe&&Xe.error),134217732&i.$$.dirty[0]|4194304&i.$$.dirty[4]|1543503872&i.$$.dirty[7]|253&i.$$.dirty[8])if(Bi){let t,i,n,r,s;e(Bi)&&(t=Bi),Ke(Bi)?i=Bi:Array.isArray(Bi)&&([t,i,s]=Bi,!1===i&&(r=!0),Ke(i)&&(n=!0)),o(14,us=(t||i)&&{text:t,aside:r||n,progressIndicator:{visible:n,progress:i},closeButton:r&&{label:Ii.statusLabelButtonClose,icon:Ii.statusIconButtonClose,onclick:s||(()=>o(146,Bi=void 0))}})}else o(14,us=Ii&&dt||ut||ft||mt?{text:vt,aside:ut||yt,progressIndicator:{visible:yt,progress:pt},closeButton:ut&&{label:Ii.statusLabelButtonClose,icon:Ii.statusIconButtonClose,onclick:bs}}:Ii&&gt&&bt?{text:bt,aside:wt||$t,progressIndicator:{visible:$t,progress:xt},closeButton:wt&&{label:Ii.statusLabelButtonClose,icon:Ii.statusIconButtonClose,onclick:xs}}:void 0);if(4194304&i.$$.dirty[4]&&o(256,_t=void 0!==Bi),16&i.$$.dirty[7]|2&i.$$.dirty[8]&&F&&Xe&&Xe.complete&&(hs.set(!0),setTimeout((()=>hs.set(!1)),100)),201326592&i.$$.dirty[0]|1409286144&i.$$.dirty[7]|1281&i.$$.dirty[8]&&o(257,kt=Ge||at||dt||ut||ft||mt||gt||_t),512&i.$$.dirty[8]&&ho(ls,Ze=kt?1:0,Ze),268435456&i.$$.dirty[0]&&o(29,Ct=Ze>0),16384&i.$$.dirty[0]&&o(259,Tt=!(!us||!us.aside)),536887296&i.$$.dirty[0]|33554432&i.$$.dirty[5]|6144&i.$$.dirty[8]&&Ct&&us)if(clearTimeout(vs),Tt){const t=!!us.error;ps.set(1),ds.set(Qe,{hard:t}),o(180,vs=setTimeout((()=>{fs.set(16)}),1))}else ps.set(0),o(180,vs=setTimeout((()=>{fs.set(0)}),1));if(536870912&i.$$.dirty[0]&&(Ct||(ys.set(void 0,{hard:!0}),ds.set(void 0,{hard:!0}),fs.set(0,{hard:!0}))),16384&i.$$.dirty[8]&&o(261,Mt=.5*Je),40960&i.$$.dirty[8]&&o(48,Pt=`transform: translateX(${ti-Mt}px)`),4&i.$$.dirty[0]|744&i.$$.dirty[5]|335544320&i.$$.dirty[6]|143616&i.$$.dirty[7]|65536&i.$$.dirty[8]&&o(49,Et=Ii&&ei&&iu((()=>Xi([["div","alpha",{class:"PinturaNavGroup"},[["div","alpha-set",{class:"PinturaNavSet"},[en&&["Button","close",{label:Ii.labelClose,icon:Ii.iconButtonClose,onclick:()=>Si("close"),hideLabel:!0}],Ki&&["Button","revert",{label:Ii.labelButtonRevert,icon:Ii.iconButtonRevert,disabled:!b,onclick:jr,hideLabel:!0}]]]]],["div","beta",{class:"PinturaNavGroup PinturaNavGroupFloat"},[Qi&&["div","history",{class:"PinturaNavSet"},[["Button","undo",{label:Ii.labelButtonUndo,icon:Ii.iconButtonUndo,disabled:!b,onclick:Nr.undo,hideLabel:!0}],["Button","redo",{label:Ii.labelButtonRedo,icon:Ii.iconButtonRedo,disabled:!$,onclick:Nr.redo,hideLabel:!0}]]],X&&["div","plugin-tools",{class:"PinturaNavSet"},Be.filter(Boolean).map((([t,e,i])=>[t,e,{...i}]))]]],["div","gamma",{class:"PinturaNavGroup"},[Zi&&["Button","export",{label:Ii.labelButtonExport,icon:W&&Ii.iconButtonExport,class:"PinturaButtonExport",onclick:Vr,hideLabel:W}]]]],{...Ne},(()=>Ss.set({})))))),262144&i.$$.dirty[0]&&o(265,It=Wt&&Wt.width>0&&Wt.height>0),4&i.$$.dirty[0]|1&i.$$.dirty[7]|131072&i.$$.dirty[8]&&o(50,At=It&&Ii&&S),524288&i.$$.dirty[8]&&o(266,Dt=ni&&!!ni.length),64&i.$$.dirty[6]|786432&i.$$.dirty[8]&&o(268,Rt=Dt&&qn(ve,ni)),524288&i.$$.dirty[6]|7602176&i.$$.dirty[8]&&Dt&&((t,e,i,n)=>{if(!e)return;const r={dataSizeScalar:i};n&&n[3]>0&&(r.backgroundColor=[...n]),e(t,r).then((t=>{Ps&&w(Ps),o(181,Ps=t)}))})(Ee,oi,Rt,ri),67108864&i.$$.dirty[5]|64&i.$$.dirty[6]|524288&i.$$.dirty[8]&&ni&&Ps&&ve){const{width:t,height:e}=ve;o(15,Is=ni.map((i=>{const n=Yt(i.x,i.y,i.width,i.height),o=te(zt(n),i.rotation).map((i=>Q(i.x/t,i.y/e)));return{...i,id:"redaction",flipX:!1,flipY:!1,cornerRadius:0,strokeWidth:0,strokeColor:void 0,backgroundColor:[0,0,0],backgroundImage:Ps,backgroundImageRendering:"pixelated",backgroundCorners:o}})))}65536&i.$$.dirty[0]&&Es&&As.set(Es),67108864&i.$$.dirty[0]|524288&i.$$.dirty[6]&&o(30,Ot=Ee&&!at),1073741826&i.$$.dirty[0]&&Ot&&yn.dispatchEvent(jh("ready")),1&i.$$.dirty[1]&&o(35,Vs=!0),2&i.$$.dirty[1]&&o(36,Us=!0),4&i.$$.dirty[1]&&o(37,qs=!0),32768&i.$$.dirty[0]&&o(38,Xs=!0)},o(207,g=!ga()),o(242,st=[!Zh()&&"WebGL"].filter(Boolean)),o(51,Lt=((t,e=!0)=>i=>{"ping"===i.type&&(e&&i.stopPropagation(),t(i.detail.type,i.detail.data))})(ki.pub)),[gn,yn,Ii,Ai,ji,qi,Ji,an,fn,Cn,_r,Nr,Pr,Er,us,Is,Es,a,Wt,D,T,$e,_e,C,M,Ue,at,dt,Ze,Ct,Ot,ci,hi,ui,es,Vs,Us,qs,Xs,pe,Le,P,E,I,R,V,nt,ot,Pt,Et,At,Lt,pi,fi,mi,gi,yi,vi,bi,xi,$i,xn,Pn,En,In,An,Dn,Ln,Gn,eo,ro,so,ao,lo,co,uo,po,fo,yo,vo,bo,$o,wo,_o,ko,So,Co,To,Mo,Po,Eo,Io,Ao,Ro,Lo,Oo,No,Ho,Xo,Go,Jo,hr,pr,fr,mr,gr,yr,vr,br,xr,$r,Sr,Cr,Tr,Lr,zr,Fr,Br,Yr,qr,Gr,Jr,({target:t,propertyName:e})=>{t===yn&&/background|outline/.test(e)&&os()},rs,ls,hs,ds,ps,fs,gs,ys,t=>{const e=!(!us||!us.closeButton);gs.set(t.detail.width,{hard:e}),ys.set(Math.round(.5*-t.detail.width),{hard:e})},ws,_s,ks,Ss,Cs,t=>{const{keyCode:e,metaKey:i,ctrlKey:n,shiftKey:o}=t;if(9===e&&Fi)return void t.preventDefault();if(t.target&&32===e&&yn.contains(t.target)&&!Yh(t.target)&&t.preventDefault(),90===e&&(i||n))return void(o&&i?Nr.redo():Nr.undo());if(89===e&&n)return void Nr.redo();if(229===e)return;if(i||n)return;const r=new Set([...ii,e]);Cs.set(Array.from(r))},({keyCode:t})=>{Cs.set(ii.filter((e=>e!==t)))},()=>{Cs.set([])},t=>{Yh(t.target)||t.preventDefault()},t=>{nn&&Ts(t.detail.resources[0])},()=>{rn&&eu().then(Ms)},t=>{if(!on)return;const e=Qr((Pr-Math.abs(Qt.x))/Qt.width,0,1),i=Qr((Er-Math.abs(Qt.y))/Qt.height,0,1);e<.75&&i<.75||Ts((t.clipboardData||window.clipboardData).files[0])},Ds,Ys,Bi,kr,Ci,Ti,Ei,Di,Ri,Li,Fi,Ni,Yi,Ui,Xi,Gi,Zi,Ki,Qi,tn,en,nn,on,rn,sn,ln,cn,hn,un,dn,pn,mn,bn,wr,as,cs,vs,Ps,s,Nt,Ht,Qt,Jt,ie,re,_,le,me,ve,h,we,ke,u,Se,d,Ce,p,Te,m,Me,Pe,Ee,Ie,g,y,v,Ae,De,b,ze,$,Fe,k,S,L,O,z,F,B,N,H,W,j,U,q,X,Be,G,Z,tt,Ne,He,We,je,Ye,lt,Ve,rt,st,ut,pt,ft,qe,mt,gt,Xe,yt,vt,bt,xt,$t,wt,_t,kt,Ge,Tt,Qe,Mt,Je,ti,ei,It,Dt,ni,Rt,oi,ri,function(){o(12,Pr=nu.innerWidth),o(13,Er=nu.innerHeight)},t=>ho(ko,mi=t.detail,mi),({detail:t})=>o(20,T=t),(t,e)=>e.id===t,function(t,e){i.$$.not_equal(gn[e],t)&&(gn[e]=t,o(0,gn),o(8,fn),o(174,pn))},t=>ho(So,gi=t.detail,gi),t=>o(34,es=es.concat(t)),t=>o(34,es=es.filter((e=>e!==t))),(t,{detail:e})=>o(24,M[t]=e,M),t=>ho(_o,Le=t.detail,Le),t=>t.id===T,function(t){i.$$.not_equal(gn[T],t)&&(gn[T]=t,o(0,gn),o(8,fn),o(174,pn))},t=>ho(So,gi=t.detail,gi),()=>o(34,es=es.concat(T)),()=>o(34,es=es.filter((t=>t!==T))),({detail:t})=>o(24,M[T]=t,M),t=>{const e={...t,...Ds()},{annotationShapes:i,decorationShapes:n,interfaceShapes:o,frameShapes:r}=qi({annotationShapes:ci,decorationShapes:hi,interfaceShapes:xi,frameShapes:ui},e);return Ys(e,Is,i,n,o,r)},()=>{o(35,Vs=!1),o(36,Us=!1),o(37,qs=!1),o(38,Xs=!1)},function(t){Zo[t?"unshift":"push"]((()=>{Es=t,o(16,Es)}))},function(t){Zo[t?"unshift":"push"]((()=>{yn=t,o(1,yn)}))},t=>ho($o,Wt=t.detail,Wt)]}class Mu extends Er{constructor(t){super(),Pr(this,t,Tu,ku,eo,{class:148,layout:149,stores:150,locale:2,id:3,util:151,utils:152,animations:153,disabled:154,status:146,previewUpscale:155,elasticityMultiplier:4,willRevert:156,willProcessImage:157,willRenderCanvas:5,willRenderToolbar:158,willSetHistoryInitialState:159,enableButtonExport:160,enableButtonRevert:161,enableNavigateHistory:162,enableToolbar:6,enableUtils:163,enableButtonClose:164,enableDropImage:165,enablePasteImage:166,enableBrowseImage:167,previewImageDataMaxSize:168,previewImageTextPixelRatio:7,layoutDirectionPreference:169,layoutHorizontalUtilsPreference:170,layoutVerticalUtilsPreference:171,imagePreviewSrc:172,imageOrienter:173,pluginComponents:174,pluginOptions:8,sub:175,pluginInterface:0,root:1,imageSourceToImageData:9,imagePreview:10,imagePreviewCurrent:147,history:11},[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1])}get class(){return this.$$.ctx[148]}set class(t){this.$set({class:t}),ar()}get layout(){return this.$$.ctx[149]}set layout(t){this.$set({layout:t}),ar()}get stores(){return this.$$.ctx[150]}set stores(t){this.$set({stores:t}),ar()}get locale(){return this.$$.ctx[2]}set locale(t){this.$set({locale:t}),ar()}get id(){return this.$$.ctx[3]}set id(t){this.$set({id:t}),ar()}get util(){return this.$$.ctx[151]}set util(t){this.$set({util:t}),ar()}get utils(){return this.$$.ctx[152]}set utils(t){this.$set({utils:t}),ar()}get animations(){return this.$$.ctx[153]}set animations(t){this.$set({animations:t}),ar()}get disabled(){return this.$$.ctx[154]}set disabled(t){this.$set({disabled:t}),ar()}get status(){return this.$$.ctx[146]}set status(t){this.$set({status:t}),ar()}get previewUpscale(){return this.$$.ctx[155]}set previewUpscale(t){this.$set({previewUpscale:t}),ar()}get elasticityMultiplier(){return this.$$.ctx[4]}set elasticityMultiplier(t){this.$set({elasticityMultiplier:t}),ar()}get willRevert(){return this.$$.ctx[156]}set willRevert(t){this.$set({willRevert:t}),ar()}get willProcessImage(){return this.$$.ctx[157]}set willProcessImage(t){this.$set({willProcessImage:t}),ar()}get willRenderCanvas(){return this.$$.ctx[5]}set willRenderCanvas(t){this.$set({willRenderCanvas:t}),ar()}get willRenderToolbar(){return this.$$.ctx[158]}set willRenderToolbar(t){this.$set({willRenderToolbar:t}),ar()}get willSetHistoryInitialState(){return this.$$.ctx[159]}set willSetHistoryInitialState(t){this.$set({willSetHistoryInitialState:t}),ar()}get enableButtonExport(){return this.$$.ctx[160]}set enableButtonExport(t){this.$set({enableButtonExport:t}),ar()}get enableButtonRevert(){return this.$$.ctx[161]}set enableButtonRevert(t){this.$set({enableButtonRevert:t}),ar()}get enableNavigateHistory(){return this.$$.ctx[162]}set enableNavigateHistory(t){this.$set({enableNavigateHistory:t}),ar()}get enableToolbar(){return this.$$.ctx[6]}set enableToolbar(t){this.$set({enableToolbar:t}),ar()}get enableUtils(){return this.$$.ctx[163]}set enableUtils(t){this.$set({enableUtils:t}),ar()}get enableButtonClose(){return this.$$.ctx[164]}set enableButtonClose(t){this.$set({enableButtonClose:t}),ar()}get enableDropImage(){return this.$$.ctx[165]}set enableDropImage(t){this.$set({enableDropImage:t}),ar()}get enablePasteImage(){return this.$$.ctx[166]}set enablePasteImage(t){this.$set({enablePasteImage:t}),ar()}get enableBrowseImage(){return this.$$.ctx[167]}set enableBrowseImage(t){this.$set({enableBrowseImage:t}),ar()}get previewImageDataMaxSize(){return this.$$.ctx[168]}set previewImageDataMaxSize(t){this.$set({previewImageDataMaxSize:t}),ar()}get previewImageTextPixelRatio(){return this.$$.ctx[7]}set previewImageTextPixelRatio(t){this.$set({previewImageTextPixelRatio:t}),ar()}get layoutDirectionPreference(){return this.$$.ctx[169]}set layoutDirectionPreference(t){this.$set({layoutDirectionPreference:t}),ar()}get layoutHorizontalUtilsPreference(){return this.$$.ctx[170]}set layoutHorizontalUtilsPreference(t){this.$set({layoutHorizontalUtilsPreference:t}),ar()}get layoutVerticalUtilsPreference(){return this.$$.ctx[171]}set layoutVerticalUtilsPreference(t){this.$set({layoutVerticalUtilsPreference:t}),ar()}get imagePreviewSrc(){return this.$$.ctx[172]}set imagePreviewSrc(t){this.$set({imagePreviewSrc:t}),ar()}get imageOrienter(){return this.$$.ctx[173]}set imageOrienter(t){this.$set({imageOrienter:t}),ar()}get pluginComponents(){return this.$$.ctx[174]}set pluginComponents(t){this.$set({pluginComponents:t}),ar()}get pluginOptions(){return this.$$.ctx[8]}set pluginOptions(t){this.$set({pluginOptions:t}),ar()}get sub(){return this.$$.ctx[175]}get pluginInterface(){return this.$$.ctx[0]}get root(){return this.$$.ctx[1]}set root(t){this.$set({root:t}),ar()}get imageSourceToImageData(){return this.$$.ctx[9]}set imageSourceToImageData(t){this.$set({imageSourceToImageData:t}),ar()}get imagePreview(){return this.$$.ctx[10]}get imagePreviewCurrent(){return this.$$.ctx[147]}set imagePreviewCurrent(t){this.$set({imagePreviewCurrent:t}),ar()}get history(){return this.$$.ctx[11]}}const Pu=["klass","stores","isVisible","isActive","isActiveFraction","locale"],Eu=["history","klass","stores","navButtons","pluginComponents","pluginInterface","pluginOptions","sub","imagePreviewSrc","imagePreview","imagePreviewCurrent"];let Iu;const Au=new Set([]),Du={},Ru=new Map;var Lu=[...cs,"init","undo","redo","update","revert","destroy","show","hide","close","ready","loadpreview","selectshape","updateshape","addshape","removeshape","selectstyle"];const Ou=t=>!(t=>e(t[0]))(t),zu=t=>t[1],Fu=t=>t[3]||[],Bu=(t,e)=>Ou(e)?e.find((e=>zu(e)===t))?e:e.find((e=>Bu(t,Fu(e)))):Bu(t,Fu(e));var Nu=t=>Math.round(100*t),Hu={finetuneControlConfiguration:{gamma:{base:1,min:.15,max:4,getLabel:t=>Nu(t<1?(t-.15)/.85-1:(t-1)/3),getStore:({imageGamma:t})=>t},brightness:{base:0,min:-.25,max:.25,getLabel:t=>Nu(t/.25),getStore:({imageColorMatrix:t})=>t,getValue:t=>{if(t.brightness)return t.brightness[4]},setValue:(t,e)=>t.update((t=>({...t,brightness:[1,0,0,0,e,0,1,0,0,e,0,0,1,0,e,0,0,0,1,0]})))},contrast:{base:1,min:.5,max:1.5,getLabel:t=>Nu(2*(t-.5)-1),getStore:({imageColorMatrix:t})=>t,getValue:t=>{if(t.contrast)return t.contrast[0]},setValue:(t,e)=>t.update((t=>({...t,contrast:[e,0,0,0,.5*(1-e),0,e,0,0,.5*(1-e),0,0,e,0,.5*(1-e),0,0,0,1,0]})))},saturation:{base:1,min:0,max:2,getLabel:t=>Nu(t-1),getStore:({imageColorMatrix:t})=>t,getValue:t=>{if(t.saturation)return(t.saturation[0]-.213)/.787},setValue:(t,e)=>t.update((t=>({...t,saturation:[.213+.787*e,.715-.715*e,.072-.072*e,0,0,.213-.213*e,.715+.285*e,.072-.072*e,0,0,.213-.213*e,.715-.715*e,.072+.928*e,0,0,0,0,0,1,0]})))},exposure:{base:1,min:.5,max:1.5,getLabel:t=>Nu(2*(t-.5)-1),getStore:({imageColorMatrix:t})=>t,getValue:t=>{if(t.exposure)return t.exposure[0]},setValue:(t,e)=>t.update((t=>({...t,exposure:[e,0,0,0,0,0,e,0,0,0,0,0,e,0,0,0,0,0,1,0]})))},temperature:{base:0,min:-1,max:1,getStore:({imageColorMatrix:t})=>t,getValue:t=>{if(!t.temperature)return;const e=t.temperature[0];return e>=1?(e-1)/.1:(1-e)/-.15},setValue:(t,e)=>t.update((t=>({...t,temperature:e>0?[1+.1*e,0,0,0,0,0,1,0,0,0,0,0,1+.1*-e,0,0,0,0,0,1,0]:[1+.15*e,0,0,0,0,0,1+.05*e,0,0,0,0,0,1+.15*-e,0,0,0,0,0,1,0]})))},clarity:{base:0,min:-1,max:1,getStore:({imageConvolutionMatrix:t})=>t,getValue:t=>{if(t.clarity)return 0===t.clarity[0]?t.clarity[1]/-1:t.clarity[1]/-2},setValue:(t,e)=>{t.update((t=>({...t,clarity:e>=0?[0,-1*e,0,-1*e,1+4*e,-1*e,0,-1*e,0]:[-1*e,-2*e,-1*e,-2*e,1+-3*e,-2*e,-1*e,-2*e,-1*e]})))}},vignette:{base:0,min:-1,max:1,getStore:({imageVignette:t})=>t}},finetuneOptions:[["brightness",t=>t.finetuneLabelBrightness],["contrast",t=>t.finetuneLabelContrast],["saturation",t=>t.finetuneLabelSaturation],["exposure",t=>t.finetuneLabelExposure],["temperature",t=>t.finetuneLabelTemperature],["gamma",t=>t.finetuneLabelGamma],!ga()&&["clarity",t=>t.finetuneLabelClarity],["vignette",t=>t.finetuneLabelVignette]].filter(Boolean)},Wu=(t,e,i)=>{let n,o,r;const s=Math.floor(6*t),a=6*t-s,l=i*(1-e),c=i*(1-a*e),h=i*(1-(1-a)*e);switch(s%6){case 0:n=i,o=h,r=l;break;case 1:n=c,o=i,r=l;break;case 2:n=l,o=i,r=h;break;case 3:n=l,o=c,r=i;break;case 4:n=h,o=l,r=i;break;case 5:n=i,o=l,r=c}return[n,o,r]};function ju(t){let e,i,n;return{c(){e=wo("div"),i=wo("span"),Eo(e,"class","PinturaColorPreview"),Eo(e,"title",t[0]),Eo(e,"style",n="--color:"+t[1])},m(t,n){xo(t,e,n),bo(e,i)},p(t,[i]){1&i&&Eo(e,"title",t[0]),2&i&&n!==(n="--color:"+t[1])&&Eo(e,"style",n)},i:Xn,o:Xn,d(t){t&&$o(e)}}}function Yu(t,e,i){let n,{color:o}=e,{title:r}=e;return t.$$set=t=>{"color"in t&&i(2,o=t.color),"title"in t&&i(0,r=t.title)},t.$$.update=()=>{4&t.$$.dirty&&i(1,n=o?ai(o):"transparent")},[r,n,o]}class Vu extends Er{constructor(t){super(),Pr(this,t,Yu,ju,eo,{color:2,title:0})}}function Uu(t){let e,i;return{c(){e=wo("span"),i=ko(t[0])},m(t,n){xo(t,e,n),bo(e,i)},p(t,e){1&e[0]&&Ao(i,t[0])},d(t){t&&$o(e)}}}function qu(t){let e,i,n,o;i=new Vu({props:{color:t[4],title:kc(t[8],t[10])}});let r=!t[9]&&Uu(t);return{c(){e=wo("span"),Cr(i.$$.fragment),n=So(),r&&r.c(),Eo(e,"slot","label"),Eo(e,"class","PinturaButtonLabel")},m(t,s){xo(t,e,s),Tr(i,e,null),bo(e,n),r&&r.m(e,null),o=!0},p(t,n){const o={};16&n[0]&&(o.color=t[4]),1280&n[0]&&(o.title=kc(t[8],t[10])),i.$set(o),t[9]?r&&(r.d(1),r=null):r?r.p(t,n):(r=Uu(t),r.c(),r.m(e,null))},i(t){o||(mr(i.$$.fragment,t),o=!0)},o(t){gr(i.$$.fragment,t),o=!1},d(t){t&&$o(e),Mr(i),r&&r.d()}}}function Xu(t){let e,i,n,o,r,s,a,l,c,h,u,d,p;c=new wh({props:{class:"PinturaHuePicker",knobStyle:"background-color:"+t[19],onchange:t[24],value:t[14],min:0,max:1,step:.01}});let f=t[11]&&Gu(t);return{c(){e=wo("div"),i=wo("div"),n=wo("div"),o=wo("div"),l=So(),Cr(c.$$.fragment),h=So(),f&&f.c(),Eo(o,"role","button"),Eo(o,"aria-label","Saturation slider"),Eo(o,"class","PinturaPickerKnob"),Eo(o,"tabindex","0"),Eo(o,"style",r=`background-color:${t[18]};`),Eo(n,"class","PinturaPickerKnobController"),Eo(n,"style",s=`transform:translate(${t[21]}%,${t[22]}%)`),Eo(i,"class","PinturaSaturationPicker"),Eo(i,"style",a="background-color: "+t[19]),Eo(e,"class","PinturaPicker")},m(r,s){xo(r,e,s),bo(e,i),bo(i,n),bo(n,o),t[31](i),bo(e,l),Tr(c,e,null),bo(e,h),f&&f.m(e,null),u=!0,d||(p=[To(o,"nudge",t[27]),uo(Al.call(null,o)),To(i,"pointerdown",t[26])],d=!0)},p(t,l){(!u||262144&l[0]&&r!==(r=`background-color:${t[18]};`))&&Eo(o,"style",r),(!u||6291456&l[0]&&s!==(s=`transform:translate(${t[21]}%,${t[22]}%)`))&&Eo(n,"style",s),(!u||524288&l[0]&&a!==(a="background-color: "+t[19]))&&Eo(i,"style",a);const h={};524288&l[0]&&(h.knobStyle="background-color:"+t[19]),16384&l[0]&&(h.value=t[14]),c.$set(h),t[11]?f?(f.p(t,l),2048&l[0]&&mr(f,1)):(f=Gu(t),f.c(),mr(f,1),f.m(e,null)):f&&(pr(),gr(f,1,1,(()=>{f=null})),fr())},i(t){u||(mr(c.$$.fragment,t),mr(f),u=!0)},o(t){gr(c.$$.fragment,t),gr(f),u=!1},d(i){i&&$o(e),t[31](null),Mr(c),f&&f.d(),d=!1,Jn(p)}}}function Gu(t){let e,i;return e=new wh({props:{class:"PinturaOpacityPicker",knobStyle:"background-color: "+t[16],trackStyle:`background-image: linear-gradient(to right, ${t[17]}, ${t[18]})`,onchange:t[25],value:t[15],min:0,max:1,step:.01}}),{c(){Cr(e.$$.fragment)},m(t,n){Tr(e,t,n),i=!0},p(t,i){const n={};65536&i[0]&&(n.knobStyle="background-color: "+t[16]),393216&i[0]&&(n.trackStyle=`background-image: linear-gradient(to right, ${t[17]}, ${t[18]})`),32768&i[0]&&(n.value=t[15]),e.$set(n)},i(t){i||(mr(e.$$.fragment,t),i=!0)},o(t){gr(e.$$.fragment,t),i=!1},d(t){Mr(e,t)}}}function Zu(t){let e,i;return e=new Qc({props:{label:"Presets",class:Ga(["PinturaColorPresets",t[9]?"PinturaColorPresetsGrid":"PinturaColorPresetsList"]),hideLabel:!1,name:t[1],value:t[4],optionGroupClass:"PinturaListOptionGroup",optionClass:"PinturaListOption",options:t[2].map(t[32]),selectedIndex:t[3],optionMapper:t[7],optionLabelClass:t[6],onchange:t[33],$$slots:{option:[Ju,({option:t})=>({44:t}),({option:t})=>[0,t?8192:0]],group:[Ku,({option:t})=>({44:t}),({option:t})=>[0,t?8192:0]]},$$scope:{ctx:t}}}),{c(){Cr(e.$$.fragment)},m(t,n){Tr(e,t,n),i=!0},p(t,i){const n={};512&i[0]&&(n.class=Ga(["PinturaColorPresets",t[9]?"PinturaColorPresetsGrid":"PinturaColorPresetsList"])),2&i[0]&&(n.name=t[1]),16&i[0]&&(n.value=t[4]),1028&i[0]&&(n.options=t[2].map(t[32])),8&i[0]&&(n.selectedIndex=t[3]),128&i[0]&&(n.optionMapper=t[7]),64&i[0]&&(n.optionLabelClass=t[6]),512&i[0]|24576&i[1]&&(n.$$scope={dirty:i,ctx:t}),e.$set(n)},i(t){i||(mr(e.$$.fragment,t),i=!0)},o(t){gr(e.$$.fragment,t),i=!1},d(t){Mr(e,t)}}}function Ku(t){let e,i,n=t[44].label+"";return{c(){e=wo("span"),i=ko(n),Eo(e,"slot","group")},m(t,n){xo(t,e,n),bo(e,i)},p(t,e){8192&e[1]&&n!==(n=t[44].label+"")&&Ao(i,n)},d(t){t&&$o(e)}}}function Qu(t){let e,i,n=t[44].label+"";return{c(){e=wo("span"),i=ko(n),Eo(e,"class","PinturaButtonLabel")},m(t,n){xo(t,e,n),bo(e,i)},p(t,e){8192&e[1]&&n!==(n=t[44].label+"")&&Ao(i,n)},d(t){t&&$o(e)}}}function Ju(t){let e,i,n,o;i=new Vu({props:{title:t[44].label,color:t[44].value}});let r=!t[9]&&Qu(t);return{c(){e=wo("span"),Cr(i.$$.fragment),n=So(),r&&r.c(),Eo(e,"slot","option")},m(t,s){xo(t,e,s),Tr(i,e,null),bo(e,n),r&&r.m(e,null),o=!0},p(t,n){const o={};8192&n[1]&&(o.title=t[44].label),8192&n[1]&&(o.color=t[44].value),i.$set(o),t[9]?r&&(r.d(1),r=null):r?r.p(t,n):(r=Qu(t),r.c(),r.m(e,null))},i(t){o||(mr(i.$$.fragment,t),o=!0)},o(t){gr(i.$$.fragment,t),o=!1},d(t){t&&$o(e),Mr(i),r&&r.d()}}}function td(t){let e,i,n,o=t[13]&&Xu(t),r=t[12]&&Zu(t);return{c(){e=wo("div"),o&&o.c(),i=So(),r&&r.c(),Eo(e,"slot","details"),Eo(e,"class","PinturaColorPickerPanel")},m(t,s){xo(t,e,s),o&&o.m(e,null),bo(e,i),r&&r.m(e,null),n=!0},p(t,n){t[13]?o?(o.p(t,n),8192&n[0]&&mr(o,1)):(o=Xu(t),o.c(),mr(o,1),o.m(e,i)):o&&(pr(),gr(o,1,1,(()=>{o=null})),fr()),t[12]?r?(r.p(t,n),4096&n[0]&&mr(r,1)):(r=Zu(t),r.c(),mr(r,1),r.m(e,null)):r&&(pr(),gr(r,1,1,(()=>{r=null})),fr())},i(t){n||(mr(o),mr(r),n=!0)},o(t){gr(o),gr(r),n=!1},d(t){t&&$o(e),o&&o.d(),r&&r.d()}}}function ed(t){let e,i;return e=new vc({props:{buttonClass:Ga(["PinturaColorPickerButton",t[5]]),$$slots:{details:[td],label:[qu]},$$scope:{ctx:t}}}),{c(){Cr(e.$$.fragment)},m(t,n){Tr(e,t,n),i=!0},p(t,i){const n={};32&i[0]&&(n.buttonClass=Ga(["PinturaColorPickerButton",t[5]])),8388575&i[0]|16384&i[1]&&(n.$$scope={dirty:i,ctx:t}),e.$set(n)},i(t){i||(mr(e.$$.fragment,t),i=!0)},o(t){gr(e.$$.fragment,t),i=!1},d(t){Mr(e,t)}}}function id(t,e,i){let n,o,r,s,a,l,c,h,u,d,p,{label:f}=e,{name:m}=e,{options:g=[]}=e,{selectedIndex:y=-1}=e,{value:v}=e,{buttonClass:b}=e,{optionLabelClass:x}=e,{optionMapper:$}=e,{onchange:w}=e,{title:_}=e,{hidePresetLabel:k=!0}=e,{locale:S}=e,{enableOpacity:C=!0}=e,{enablePresets:T=!0}=e,{enablePicker:M=!0}=e;const E=(t,e)=>{if(c=[t[0],t[1],t[2]],e){let e=((t,e,i)=>{let n=Math.max(t,e,i),o=n-Math.min(t,e,i),r=o&&(n==t?(e-i)/o:n==e?2+(i-t)/o:4+(t-e)/o);return[60*(r<0?r+6:r)/360,n&&o/n,n]})(...c);i(14,r=e[0]),i(29,s=e[1]),i(30,a=e[2]),i(15,l=Ke(t[3])?t[3]:1)}i(16,h=ai(t)),i(17,u=ai([...c,0])),i(18,d=ai([...c,1])),i(19,p=ai(Wu(r,1,1)))};v&&E(v,!0);const I=()=>{const t=[...Wu(r,s,a),l];E(t),w(t)},A=t=>{const e=3===t.length?[...t,1]:t;E(e,!0),w(e)},D=(t,e)=>{const n=Qr(t.x/e.width,0,1);var o;o=1-Qr(t.y/e.height,0,1),i(29,s=n),i(30,a=o),0===l&&i(15,l=1),I()};let R,L,O,z;const F=t=>{const e=ht(tt(t),z);D(ct(et(O),e),L)},B=t=>{L=void 0,document.documentElement.removeEventListener("pointermove",F),document.documentElement.removeEventListener("pointerup",B)};return t.$$set=t=>{"label"in t&&i(0,f=t.label),"name"in t&&i(1,m=t.name),"options"in t&&i(2,g=t.options),"selectedIndex"in t&&i(3,y=t.selectedIndex),"value"in t&&i(4,v=t.value),"buttonClass"in t&&i(5,b=t.buttonClass),"optionLabelClass"in t&&i(6,x=t.optionLabelClass),"optionMapper"in t&&i(7,$=t.optionMapper),"onchange"in t&&i(28,w=t.onchange),"title"in t&&i(8,_=t.title),"hidePresetLabel"in t&&i(9,k=t.hidePresetLabel),"locale"in t&&i(10,S=t.locale),"enableOpacity"in t&&i(11,C=t.enableOpacity),"enablePresets"in t&&i(12,T=t.enablePresets),"enablePicker"in t&&i(13,M=t.enablePicker)},t.$$.update=()=>{536870912&t.$$.dirty[0]&&i(21,n=100*s),1073741824&t.$$.dirty[0]&&i(22,o=100-100*a)},[f,m,g,y,v,b,x,$,_,k,S,C,T,M,r,l,h,u,d,p,R,n,o,A,t=>{i(14,r=t),0===l&&i(15,l=1),I()},t=>{i(15,l=t),I()},t=>{t.stopPropagation(),L=St(R.offsetWidth,R.offsetHeight),O=(t=>Q(t.offsetX,t.offsetY))(t),z=tt(t),D(O,L),document.documentElement.addEventListener("pointermove",F),document.documentElement.addEventListener("pointerup",B)},t=>{L=St(R.offsetWidth,R.offsetHeight);const e=n/100*L.width,i=o/100*L.height;D({x:e+t.detail.x,y:i+t.detail.y},L)},w,s,a,function(t){Zo[t?"unshift":"push"]((()=>{R=t,i(20,R)}))},([t,e])=>[t,P(e)?e(S):e],t=>A(t.value)]}class nd extends Er{constructor(t){super(),Pr(this,t,id,ed,eo,{label:0,name:1,options:2,selectedIndex:3,value:4,buttonClass:5,optionLabelClass:6,optionMapper:7,onchange:28,title:8,hidePresetLabel:9,locale:10,enableOpacity:11,enablePresets:12,enablePicker:13},[-1,-1])}}let od=null;var rd=()=>{if(null===od)if(n())try{od=!1===document.fonts.check("16px TestNonExistingFont")}catch(t){od=!1}else od=!1;return od};const sd=(t,e)=>i=>i[e?`${e}${o(t)}`:t],ad=t=>[t,""+t],ld=(t,e)=>i=>[t[i],sd(i,e)],cd=[1,.2549,.2118],hd=[1,1,1,0],ud={path:()=>({points:[],disableErase:!1}),eraser:()=>({eraseRadius:0}),line:()=>({x1:0,y1:0,x2:0,y2:0,disableErase:!1}),rectangle:()=>({x:0,y:0,width:0,height:0}),ellipse:()=>({x:0,y:0,rx:0,ry:0}),text:()=>({x:0,y:0,text:"Text"})},dd=(t,e={},i={position:"relative"})=>{if(ud[t])return[{...ud[t](),...e},i]},pd=(t,e,i)=>[t,e||sd(t,"shapeLabelTool"),{icon:sd(t,"shapeIconTool"),...i}],fd=()=>({transparent:[1,1,1,0],white:[1,1,1],silver:[.8667,.8667,.8667],gray:[.6667,.6667,.6667],black:[0,0,0],navy:[0,.1216,.2471],blue:[0,.4549,.851],aqua:[.498,.8588,1],teal:[.2235,.8,.8],olive:[.2392,.6,.4392],green:[.1804,.8,.251],yellow:[1,.8627,0],orange:[1,.5216,.1059],red:[1,.2549,.2118],maroon:[.5216,.0784,.2941],fuchsia:[.9412,.0706,.7451],purple:[.6941,.051,.7882]}),md=()=>({extraSmall:"2%",small:"4%",mediumSmall:"8%",medium:"10%",mediumLarge:"15%",large:"20%",extraLarge:"25%"}),gd=()=>({extraSmall:"40%",small:"60%",mediumSmall:"100%",medium:"120%",mediumLarge:"140%",large:"180%",extraLarge:"220%"}),yd=()=>({extraSmall:"0.25%",small:"0.5%",mediumSmall:"1%",medium:"1.75%",mediumLarge:"2.5%",large:"3.5%",extraLarge:"5%"}),vd=()=>["bar","arrow","arrowSolid","circle","circleSolid","square","squareSolid"],bd=()=>[["Helvetica, Arial, Verdana, 'Droid Sans', sans-serif","Sans Serif"],["'Arial Black', 'Avenir-Black', 'Arial Bold'","Black"],["'Arial Narrow', 'Futura-CondensedMedium'","Narrow"],["'Trebuchet MS'","Humanist"],["Georgia, 'Avenir-Black', 'Times New Roman', 'Droid Serif', serif","Serif"],["Palatino","Old-Style"],["'Times New Roman', 'TimesNewRomanPSMT'","Transitional"],["Menlo, Monaco, 'Lucida Console', monospace","Monospaced"],["'Courier New', monospace","Slab Serif"]],xd=()=>["left","center","right"],$d=()=>[["normal","bold"],["italic","normal"],["italic","bold"]],wd=t=>Object.keys(t).map(ld(t,"shapeTitleColor")),_d=t=>Object.keys(t).map(ld(t,"labelSize")),kd=t=>Object.keys(t).map(ld(t,"labelSize")),Sd=t=>Object.keys(t).map(ld(t,"labelSize")),Cd=t=>[...t],Td=t=>t.map((t=>[t,e=>e["shapeLabelFontStyle"+t.filter((t=>"normal"!==t)).map(o).join("")]])),Md=t=>t.map((t=>[Vh(t),e=>e["shapeTitleLineDecoration"+o(t)],{icon:e=>e["shapeIconLineDecoration"+o(t)]}])),Pd=t=>t.map((t=>[t,e=>e["shapeTitleTextAlign"+o(t)],{hideLabel:!0,icon:e=>e["shapeIconTextAlign"+o(t)]}])),Ed=(t,e)=>{const{defaultKey:i,defaultValue:n,defaultOptions:o}=e||{},r=[];return i&&(r[0]=[n,t=>t[i],{...o}]),[...r,...t]},Id=t=>t.split(",").map((t=>t.trim())).some((t=>document.fonts.check("16px "+t))),Ad=(t,e={})=>[nd,{title:t=>t.labelColor,options:Ed(t),...e}],Dd=(t={})=>[Ph,{...t}],Rd=(t,e={})=>[nd,{title:t=>t.shapeTitleBackgroundColor,options:Ed(t),...e}],Ld=(t,i={})=>[nd,{title:t=>t.shapeTitleStrokeColor,options:Ed(t),buttonClass:"PinturaColorPickerButtonStroke",onchange:(t,n)=>{const o=n.strokeWidth;(Ke(o)||e(o)?parseFloat(o):0)>0||(n.strokeWidth=i&&i.defaultStrokeWidth||"0.5%")},...i}],Od=(t,e,i)=>[dh,{title:t=>t[e],options:Ed(t,{defaultKey:"labelNone",defaultOptions:{icon:'<g stroke="currentColor" stroke-linecap="round" stroke-width=".125em"><path d="M5,12 H14"/></g>'}}),optionIconStyle:i}],zd=t=>Od(t,"shapeTitleLineStart","transform: scaleX(-1)"),Fd=t=>Od(t,"shapeTitleLineEnd"),Bd=t=>[nd,{title:t=>t.shapeTitleTextColor,options:Ed(t)}],Nd=t=>[dh,{title:t=>t.shapeTitleFontStyle,optionLabelStyle:t=>t&&`font-style:${t[0]};font-weight:${t[1]}`,options:Ed(t,{defaultKey:"shapeLabelFontStyleNormal"})}],Hd=t=>{let e;return t.find((([t])=>"4%"===t))||(e={defaultKey:"labelAuto",defaultValue:"4%"}),[dh,{title:t=>t.shapeTitleFontSize,options:Ed(t,e)}]},Wd=t=>[Qc,{title:t=>t.shapeTitleTextAlign,options:Ed(t)}],jd=t=>{let e;return t.find((([t])=>"120%"===t))||(e={defaultKey:"labelAuto",defaultValue:"120%"}),[dh,{title:t=>t.shapeTitleLineHeight,options:Ed(t,e)}]};function Yd(t){let e,i,n,o;const r=t[3].default,s=ro(r,t,t[2],null);return{c(){e=wo("div"),s&&s.c(),Eo(e,"class",t[0])},m(r,a){xo(r,e,a),s&&s.m(e,null),i=!0,n||(o=[To(e,"measure",t[1]),uo(ha.call(null,e))],n=!0)},p(t,[n]){s&&s.p&&4&n&&ao(s,r,t,t[2],n,null,null),(!i||1&n)&&Eo(e,"class",t[0])},i(t){i||(mr(s,t),i=!0)},o(t){gr(s,t),i=!1},d(t){t&&$o(e),s&&s.d(t),n=!1,Jn(o)}}}function Vd(t,e,i){let{$$slots:n={},$$scope:o}=e;const r=Vo();let{class:s=null}=e;return t.$$set=t=>{"class"in t&&i(0,s=t.class),"$$scope"in t&&i(2,o=t.$$scope)},[s,({detail:t})=>r("measure",t),o,n]}class Ud extends Er{constructor(t){super(),Pr(this,t,Vd,Yd,eo,{class:0})}}const qd=t=>({}),Xd=t=>({}),Gd=t=>({}),Zd=t=>({}),Kd=t=>({}),Qd=t=>({});function Jd(t){let e,i;const n=t[4].header,o=ro(n,t,t[3],Qd);return{c(){e=wo("div"),o&&o.c(),Eo(e,"class","PinturaUtilHeader")},m(t,n){xo(t,e,n),o&&o.m(e,null),i=!0},p(t,e){o&&o.p&&8&e&&ao(o,n,t,t[3],e,Kd,Qd)},i(t){i||(mr(o,t),i=!0)},o(t){gr(o,t),i=!1},d(t){t&&$o(e),o&&o.d(t)}}}function tp(t){let e,i;const n=t[4].footer,o=ro(n,t,t[3],Xd);return{c(){e=wo("div"),o&&o.c(),Eo(e,"class","PinturaUtilFooter")},m(t,n){xo(t,e,n),o&&o.m(e,null),i=!0},p(t,e){o&&o.p&&8&e&&ao(o,n,t,t[3],e,qd,Xd)},i(t){i||(mr(o,t),i=!0)},o(t){gr(o,t),i=!1},d(t){t&&$o(e),o&&o.d(t)}}}function ep(t){let e,i,n,o,r,s,a=t[1]&&Jd(t);const l=t[4].main,c=ro(l,t,t[3],Zd),h=c||function(t){let e,i;return e=new Ud({props:{class:"PinturaStage"}}),e.$on("measure",t[5]),{c(){Cr(e.$$.fragment)},m(t,n){Tr(e,t,n),i=!0},p:Xn,i(t){i||(mr(e.$$.fragment,t),i=!0)},o(t){gr(e.$$.fragment,t),i=!1},d(t){Mr(e,t)}}}(t);let u=t[2]&&tp(t);return{c(){a&&a.c(),e=So(),i=wo("div"),h&&h.c(),n=So(),u&&u.c(),o=So(),r=Co(),Eo(i,"class","PinturaUtilMain")},m(l,c){a&&a.m(l,c),xo(l,e,c),xo(l,i,c),h&&h.m(i,null),t[6](i),xo(l,n,c),u&&u.m(l,c),xo(l,o,c),xo(l,r,c),s=!0},p(t,[i]){t[1]?a?(a.p(t,i),2&i&&mr(a,1)):(a=Jd(t),a.c(),mr(a,1),a.m(e.parentNode,e)):a&&(pr(),gr(a,1,1,(()=>{a=null})),fr()),c&&c.p&&8&i&&ao(c,l,t,t[3],i,Gd,Zd),t[2]?u?(u.p(t,i),4&i&&mr(u,1)):(u=tp(t),u.c(),mr(u,1),u.m(o.parentNode,o)):u&&(pr(),gr(u,1,1,(()=>{u=null})),fr())},i(t){s||(mr(a),mr(h,t),mr(u),mr(!1),s=!0)},o(t){gr(a),gr(h,t),gr(u),gr(!1),s=!1},d(s){a&&a.d(s),s&&$o(e),s&&$o(i),h&&h.d(s),t[6](null),s&&$o(n),u&&u.d(s),s&&$o(o),s&&$o(r)}}}function ip(t,e,i){let{$$slots:n={},$$scope:o}=e,{hasHeader:r=!!e.$$slots.header}=e,{hasFooter:s=!!e.$$slots.footer}=e,{root:a}=e;return t.$$set=t=>{i(7,e=Zn(Zn({},e),lo(t))),"hasHeader"in t&&i(1,r=t.hasHeader),"hasFooter"in t&&i(2,s=t.hasFooter),"root"in t&&i(0,a=t.root),"$$scope"in t&&i(3,o=t.$$scope)},e=lo(e),[a,r,s,o,n,function(e){Xo(t,e)},function(t){Zo[t?"unshift":"push"]((()=>{a=t,i(0,a)}))}]}class np extends Er{constructor(t){super(),Pr(this,t,ip,ep,eo,{hasHeader:1,hasFooter:2,root:0})}}function op(t){let e,i;return{c(){e=wo("div"),Eo(e,"class","PinturaRangeInputMeter"),Eo(e,"style",i=`transform: translateX(${t[8].x-t[9].x}px) translateY(${t[8].y-t[9].y}px)`)},m(i,n){xo(i,e,n),e.innerHTML=t[6]},p(t,n){64&n[0]&&(e.innerHTML=t[6]),256&n[0]&&i!==(i=`transform: translateX(${t[8].x-t[9].x}px) translateY(${t[8].y-t[9].y}px)`)&&Eo(e,"style",i)},d(t){t&&$o(e)}}}function rp(t){let e,i,n,o,r,s,a,l,c,h,u,d=t[8]&&op(t);return{c(){e=wo("div"),i=wo("span"),n=ko(t[3]),o=So(),r=wo("button"),s=ko(t[1]),l=So(),c=wo("div"),d&&d.c(),Eo(i,"class","PinturaRangeInputValue"),Eo(r,"class","PinturaRangeInputReset"),Eo(r,"type","button"),r.disabled=a=t[0]===t[2],Eo(c,"class","PinturaRangeInputInner"),Eo(c,"style",t[7]),Eo(c,"data-value-limited",t[5]),Eo(e,"class","PinturaRangeInput"),Eo(e,"tabindex","0")},m(a,p){xo(a,e,p),bo(e,i),bo(i,n),bo(e,o),bo(e,r),bo(r,s),bo(e,l),bo(e,c),d&&d.m(c,null),h||(u=[To(r,"click",t[14]),To(c,"interactionstart",t[10]),To(c,"interactionupdate",t[12]),To(c,"interactionend",t[13]),To(c,"interactionrelease",t[11]),uo(Il.call(null,c,{inertia:!0})),To(c,"measure",t[32]),uo(ha.call(null,c)),To(e,"wheel",t[16],{passive:!1}),To(e,"nudge",t[17]),uo(Al.call(null,e,{direction:"horizontal"}))],h=!0)},p(t,e){8&e[0]&&Ao(n,t[3]),2&e[0]&&Ao(s,t[1]),5&e[0]&&a!==(a=t[0]===t[2])&&(r.disabled=a),t[8]?d?d.p(t,e):(d=op(t),d.c(),d.m(c,null)):d&&(d.d(1),d=null),128&e[0]&&Eo(c,"style",t[7]),32&e[0]&&Eo(c,"data-value-limited",t[5])},i:Xn,o:Xn,d(t){t&&$o(e),d&&d.d(),h=!1,Jn(u)}}}function sp(t,e,i){let n,o,r,s,a,l,c,h,{labelReset:u="Reset"}=e,{direction:d="x"}=e,{min:p=0}=e,{max:m=1}=e,{base:g=p}=e,{value:y=0}=e,{valueLabel:v=0}=e,{valueMin:b}=e,{valueMax:x}=e,{oninputstart:$=f}=e,{oninputmove:w=f}=e,{oninputend:_=f}=e,{elasticity:k=0}=e;const S=(t,e,i)=>Math.ceil((t-i)/e)*e+i;let C,T,M;const P={x:2,y:0},E=(t,e,i)=>`M ${t-i} ${e} a ${i} ${i} 0 1 0 0 -1`;let I,A,D=!1,R={snap:!1,elastic:!1};const L=(t,e,i)=>{const n=t[d]+e[d],o=Qr(n,I[1][d],I[0][d]),r=k?o+Dl(n-o,k):o,s=i.elastic?r:o,a=Q(0,0);return a[d]=s,O.set(a,{hard:i.snap}),Qr(F(a,d),p,m)},O=Qs();oo(t,O,(t=>i(8,h=t)));const z=(t,e)=>{const i=.5*(C[e]-s[e])-(yh(t,p,m)*s[e]-.5*s[e]);return{x:"x"===e?i:0,y:"y"===e?i:0}},F=(t,e)=>{const i=-(t[e]-.5*C[e])/s[e];return p+i*n},B=O.subscribe((t=>{t&&A&&w(Qr(F(t,d),p,m))})),N=t=>{const e=[z(null!=b?b:p,d),z(null!=x?x:m,d)],i={x:"x"===d?h.x+t:0,y:"y"===d?h.y+t:0},n=Qr(i[d],e[1][d],e[0][d]),o={...h,[d]:n};ho(O,h=o,h);const r=Qr(F(o,d),p,m);$(),w(r),_(r)};return Yo((()=>{B()})),t.$$set=t=>{"labelReset"in t&&i(1,u=t.labelReset),"direction"in t&&i(18,d=t.direction),"min"in t&&i(19,p=t.min),"max"in t&&i(20,m=t.max),"base"in t&&i(2,g=t.base),"value"in t&&i(0,y=t.value),"valueLabel"in t&&i(3,v=t.valueLabel),"valueMin"in t&&i(21,b=t.valueMin),"valueMax"in t&&i(22,x=t.valueMax),"oninputstart"in t&&i(23,$=t.oninputstart),"oninputmove"in t&&i(24,w=t.oninputmove),"oninputend"in t&&i(25,_=t.oninputend),"elasticity"in t&&i(26,k=t.elasticity)},t.$$.update=()=>{if(1572864&t.$$.dirty[0]&&i(28,n=m-p),2621440&t.$$.dirty[0]&&i(29,o=null!=b?Math.max(b,p):p),5242880&t.$$.dirty[0]&&i(30,r=null!=x?Math.min(x,m):m),1572868&t.$$.dirty[0]&&i(31,a=yh(g,p,m)),16&t.$$.dirty[0]|1&t.$$.dirty[1]&&C){const t=.5*C.y;let e,n=40*a,o="",r=C.y,s="";for(let i=0;i<=40;i++){const r=P.x+10*i,a=t;o+=E(r,a,i%5==0?2:.75)+" ",e=r+P.x,i===n&&(s=`<path d="M${r} ${a-4} l2 3 l-2 -1 l-2 1 z"/>`)}i(6,T=`<svg width="${e}" height="${r}" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 ${e} ${r}" aria-hidden="true" focusable="false">\n        ${s}\n        <rect rx="4" ry="4" y="${t-4}"" height="8"/>\n        <path fill-rule="evenodd" d="${o.trim()}"/></svg>`),i(27,M={x:e-2*P.x,y:r})}134217744&t.$$.dirty[0]&&(s=C&&M),1612185600&t.$$.dirty[0]&&i(5,l=o!==p||r!==m),1610612768&t.$$.dirty[0]&&i(7,c=l?function(t,e){const i=yh(t,p,m),n=yh(e,p,m);return`--range-mask-from:${100*Mi(S(i,.025,0)-.0125)}%;--range-mask-to:${100*Mi(S(n,.025,0)-.0125)}%`}(o,r):""),268697617&t.$$.dirty[0]&&n&&C&&C.x&&C.y&&O.set(z(y,d))},[y,u,g,v,C,l,T,c,h,P,()=>{D=!1,A=no(O),I=[z(null!=b?b:p,d),z(null!=x?x:m,d)],$()},()=>{D=!0},({detail:t})=>{R.snap=!D,R.elastic=!D,L(A,t.translation,R)},({detail:t})=>{R.snap=!1,R.elastic=!1;const e=L(A,t.translation,R);if(A=void 0,I=void 0,Math.abs(e-g)<.01)return _(g);_(e)},()=>{i(0,y=Qr(g,o,r)),$(),_(y)},O,t=>{t.preventDefault(),t.stopPropagation();const e=8*Ol(t);N(e)},({detail:t})=>{N(8*t[d])},d,p,m,b,x,$,w,_,k,M,n,o,r,a,t=>i(4,C=(t=>Q(t.width,t.height))(t.detail))]}class ap extends Er{constructor(t){super(),Pr(this,t,sp,rp,eo,{labelReset:1,direction:18,min:19,max:20,base:2,value:0,valueLabel:3,valueMin:21,valueMax:22,oninputstart:23,oninputmove:24,oninputend:25,elasticity:26},[-1,-1])}}function lp(t){let e,i,n,o,r;const s=t[7].default,a=ro(s,t,t[6],null);return{c(){e=wo("div"),i=wo("div"),a&&a.c(),Eo(i,"class","PinturaToolbarInner"),Eo(e,"class","PinturaToolbar"),Eo(e,"data-layout",t[1]),Eo(e,"data-overflow",t[0])},m(s,l){xo(s,e,l),bo(e,i),a&&a.m(i,null),n=!0,o||(r=[To(i,"measure",t[3]),uo(ha.call(null,i)),To(e,"measure",t[2]),uo(ha.call(null,e))],o=!0)},p(t,[i]){a&&a.p&&64&i&&ao(a,s,t,t[6],i,null,null),(!n||2&i)&&Eo(e,"data-layout",t[1]),(!n||1&i)&&Eo(e,"data-overflow",t[0])},i(t){n||(mr(a,t),n=!0)},o(t){gr(a,t),n=!1},d(t){t&&$o(e),a&&a.d(t),o=!1,Jn(r)}}}function cp(t,e,i){let n,o,{$$slots:r={},$$scope:s}=e,a=0,l=0,c=0;const h=()=>{i(0,o="compact"===n&&a>c?"overflow":void 0)};return t.$$set=t=>{"$$scope"in t&&i(6,s=t.$$scope)},t.$$.update=()=>{48&t.$$.dirty&&i(1,n=l>c?"compact":"default")},[o,n,({detail:t})=>{const{width:e}=t;i(5,c=e),h()},({detail:t})=>{const{width:e}=t;e>l&&i(4,l=e),a=e,o||h()},l,c,s,r]}class hp extends Er{constructor(t){super(),Pr(this,t,cp,lp,eo,{})}}const up={Top:"t",Right:"r",Bottom:"b",Left:"l",TopLeft:"tl",TopRight:"tr",BottomRight:"br",BottomLeft:"bl"},{Top:dp,Right:pp,Bottom:fp,Left:mp,TopLeft:gp,TopRight:yp,BottomRight:vp,BottomLeft:bp}=up;var xp={[dp]:t=>({x:t.x,y:t.y}),[yp]:t=>({x:t.x+t.width,y:t.y}),[pp]:t=>({x:t.x+t.width,y:t.y}),[vp]:t=>({x:t.x+t.width,y:t.y+t.height}),[fp]:t=>({x:t.x,y:t.y+t.height}),[bp]:t=>({x:t.x,y:t.y+t.height}),[mp]:t=>({x:t.x,y:t.y}),[gp]:t=>({x:t.x,y:t.y})};function $p(t,e,i){const n=t.slice();return n[12]=e[i].key,n[13]=e[i].translate,n[14]=e[i].scale,n[15]=e[i].type,n[16]=e[i].opacity,n}function wp(t,e){let i,n,o,r,s,a,l,c;return{key:t,first:null,c(){i=wo("div"),Eo(i,"role","button"),Eo(i,"aria-label",n=`Drag ${e[15]} ${e[12]}`),Eo(i,"tabindex",o="edge"===e[15]?-1:0),Eo(i,"class","PinturaRectManipulator"),Eo(i,"data-direction",r=e[12]),Eo(i,"data-shape",s="edge"===e[15]?"edge":""+e[0]),Eo(i,"style",a=`transform: translate3d(${e[13].x}px, ${e[13].y}px, 0) scale(${e[14].x}, ${e[14].y}); opacity: ${e[16]}`),this.first=i},m(t,n){xo(t,i,n),l||(c=[To(i,"nudge",(function(){to(e[5](e[12]))&&e[5](e[12]).apply(this,arguments)})),uo(Al.call(null,i)),To(i,"interactionstart",(function(){to(e[4]("resizestart",e[12]))&&e[4]("resizestart",e[12]).apply(this,arguments)})),To(i,"interactionupdate",(function(){to(e[4]("resizemove",e[12]))&&e[4]("resizemove",e[12]).apply(this,arguments)})),To(i,"interactionend",(function(){to(e[4]("resizeend",e[12]))&&e[4]("resizeend",e[12]).apply(this,arguments)})),uo(Il.call(null,i))],l=!0)},p(t,l){e=t,2&l&&n!==(n=`Drag ${e[15]} ${e[12]}`)&&Eo(i,"aria-label",n),2&l&&o!==(o="edge"===e[15]?-1:0)&&Eo(i,"tabindex",o),2&l&&r!==(r=e[12])&&Eo(i,"data-direction",r),3&l&&s!==(s="edge"===e[15]?"edge":""+e[0])&&Eo(i,"data-shape",s),2&l&&a!==(a=`transform: translate3d(${e[13].x}px, ${e[13].y}px, 0) scale(${e[14].x}, ${e[14].y}); opacity: ${e[16]}`)&&Eo(i,"style",a)},d(t){t&&$o(i),l=!1,Jn(c)}}}function _p(t){let e,i=[],n=new Map,o=t[1];const r=t=>t[12];for(let e=0;e<o.length;e+=1){let s=$p(t,o,e),a=r(s);n.set(a,i[e]=wp(a,s))}return{c(){for(let t=0;t<i.length;t+=1)i[t].c();e=Co()},m(t,n){for(let e=0;e<i.length;e+=1)i[e].m(t,n);xo(t,e,n)},p(t,[s]){51&s&&(o=t[1],i=wr(i,s,r,1,t,o,n,e.parentNode,xr,wp,e,$p))},i:Xn,o:Xn,d(t){for(let e=0;e<i.length;e+=1)i[e].d(t);t&&$o(e)}}}function kp(t,e,i){let n,o,r,{rect:s=null}=e,{visible:a=!1}=e,{style:l}=e;const c=Qs(void 0,{precision:1e-4,stiffness:.2,damping:.4});oo(t,c,(t=>i(8,o=t)));const h=Qs(0,{precision:.001});let u;oo(t,h,(t=>i(9,r=t)));const d=Vo();return t.$$set=t=>{"rect"in t&&i(6,s=t.rect),"visible"in t&&i(7,a=t.visible),"style"in t&&i(0,l=t.style)},t.$$.update=()=>{128&t.$$.dirty&&c.set(a?1:.5),128&t.$$.dirty&&h.set(a?1:0),832&t.$$.dirty&&i(1,n=Object.keys(up).map(((t,e)=>{const i=up[t],n=xp[i](s),a=1===i.length?"edge":"corner",l="corner"===a;return{key:i,type:a,scale:{x:/^(t|b)$/.test(i)?s.width:l?Qr(o,.5,1.25):1,y:/^(r|l)$/.test(i)?s.height:l?Qr(o,.5,1.25):1},translate:{x:n.x,y:n.y},opacity:r}})))},[l,n,c,h,(t,e)=>({detail:i})=>{u&&e!==u||"resizestart"!==t&&void 0===u||("resizestart"===t&&(u=e),"resizeend"===t&&(u=void 0),d(t,{direction:e,translation:i&&i.translation}))},t=>({detail:e})=>{d("resizestart",{direction:t,translation:{x:0,y:0}}),d("resizemove",{direction:t,translation:e}),d("resizeend",{direction:t,translation:{x:0,y:0}})},s,a,o,r]}class Sp extends Er{constructor(t){super(),Pr(this,t,kp,_p,eo,{rect:6,visible:7,style:0})}}var Cp=t=>{function e(e,i){t.dispatchEvent(new CustomEvent(e,{detail:i}))}const i=i=>{i.preventDefault(),t.addEventListener("gesturechange",n),t.addEventListener("gestureend",o),e("gesturedown")},n=t=>{t.preventDefault(),e("gestureupdate",t.scale)},o=t=>{e("gestureup",t.scale),t.preventDefault(),r()},r=()=>{t.removeEventListener("gesturechange",n),t.removeEventListener("gestureend",o)};return t.addEventListener("gesturestart",i),{destroy:()=>{r(),t.removeEventListener("gesturestart",i)}}},Tp=t=>Q(t.clientX,t.clientY),Mp=(t,e,i)=>{const n=Tp(t);return ht(ht(n,e),i)},Pp={[dp]:fp,[pp]:mp,[fp]:dp,[mp]:pp,[gp]:vp,[yp]:bp,[vp]:gp,[bp]:yp},Ep={[dp]:[.5,0],[pp]:[1,.5],[fp]:[.5,1],[mp]:[0,.5],[gp]:[0,0],[yp]:[1,0],[vp]:[1,1],[bp]:[0,1]},Ip=t=>{const e=t===mp||t===pp,i=t===dp||t===fp;return[t===pp||t===yp||t===vp,t===mp||t===bp||t===gp,t===dp||t===yp||t===gp,t===fp||t===vp||t===bp,e,i,e||i]};const Ap=(t,e,i,n)=>{const{aspectRatio:o,minSize:r,maxSize:s}=n,a=e===pp||e===yp||e===vp,l=e===mp||e===bp||e===gp,c=e===dp||e===yp||e===gp,h=e===fp||e===vp||e===bp,u=e===mp||e===pp,d=e===dp||e===fp,p=zt(i);a?(p.x=t.x,p.width-=t.x):l&&(p.width=t.x),h?(p.y=t.y,p.height-=t.y):c&&(p.height=t.y);const f=((t,e)=>Ot(0,0,t,e))(Math.min(p.width,s.width),Math.min(p.height,s.height));if(o)if(u){const e=Math.min(t.y,i.height-t.y);f.height=Math.min(2*e,f.height)}else if(d){const e=Math.min(t.x,i.width-t.x);f.width=Math.min(2*e,f.width)}const m=o?wt(oe(f,o)):f,g=o?wt(ne(Bt(r),o)):r;let y,v,b,x;a?y=t.x:l&&(v=t.x),h?b=t.y:c&&(x=t.y),a?v=y+g.width:l&&(y=v-g.width),h?x=b+g.height:c&&(b=x-g.height),u?(b=t.y-.5*g.height,x=t.y+.5*g.height):d&&(y=t.x-.5*g.width,v=t.x+.5*g.width);const $=Ht([Q(y,b),Q(v,x)]);return a?v=y+m.width:l&&(y=v-m.width),h?x=b+m.height:c&&(b=x-m.height),u?(b=t.y-.5*m.height,x=t.y+.5*m.height):d&&(y=t.x-.5*m.width,v=t.x+.5*m.width),{inner:$,outer:Ht([Q(y,b),Q(v,x)])}};var Dp=(t,e,i={})=>{const{target:n,translate:o}=e,{aspectRatio:r}=i,s=Ep[Pp[n]],a=ct(zt(t),Q(s[0]*t.width,s[1]*t.height)),l=Ep[n],c=ct(zt(t),Q(l[0]*t.width,l[1]*t.height)),[h,u,d,p,f,m,g]=Ip(n);let y=o.x,v=o.y;f?v=0:m&&(y=0);let[b,x,$,w]=re(t);if(h?w=a.x:u&&(x=a.x),p?b=a.y:d&&($=a.y),h?x=c.x+y:u&&(w=c.x+y),p?$=c.y+v:d&&(b=c.y+v),r)if(g){let t=x-w,e=$-b;f?(e=t/r,b=a.y-.5*e,$=a.y+.5*e):m&&(t=e*r,w=a.x-.5*t,x=a.x+.5*t)}else{const t=Q(c.x+y-a.x,c.y+v-a.y);n===yp?(t.x=Math.max(0,t.x),t.y=Math.min(0,t.y)):n===vp?(t.x=Math.max(0,t.x),t.y=Math.max(0,t.y)):n===bp?(t.x=Math.min(0,t.x),t.y=Math.max(0,t.y)):n===gp&&(t.x=Math.min(0,t.x),t.y=Math.min(0,t.y));const e=ot(t),i=Q(r,1),o=ut(rt(i),e);n===yp?(x=a.x+o.x,b=a.y-o.y):n===vp?(x=a.x+o.x,$=a.y+o.y):n===bp?(w=a.x-o.x,$=a.y+o.y):n===gp&&(w=a.x-o.x,b=a.y-o.y)}return Yt(w,b,x-w,$-b)},Rp=t=>180*t/Math.PI;function Lp(t){let e,i,n;return i=new ap({props:{elasticity:t[5],min:t[7],max:t[8],value:t[12],valueMin:t[0],valueMax:t[1],labelReset:t[6],base:t[11],valueLabel:Math.round(Rp(t[12]))+"В°",oninputstart:t[2],oninputmove:t[14],oninputend:t[15]}}),{c(){e=wo("div"),Cr(i.$$.fragment),Eo(e,"class","PinturaImageRotator")},m(t,o){xo(t,e,o),Tr(i,e,null),n=!0},p(t,[e]){const n={};32&e&&(n.elasticity=t[5]),128&e&&(n.min=t[7]),256&e&&(n.max=t[8]),4096&e&&(n.value=t[12]),1&e&&(n.valueMin=t[0]),2&e&&(n.valueMax=t[1]),64&e&&(n.labelReset=t[6]),2048&e&&(n.base=t[11]),4096&e&&(n.valueLabel=Math.round(Rp(t[12]))+"В°"),4&e&&(n.oninputstart=t[2]),1544&e&&(n.oninputmove=t[14]),1552&e&&(n.oninputend=t[15]),i.$set(n)},i(t){n||(mr(i.$$.fragment,t),n=!0)},o(t){gr(i.$$.fragment,t),n=!1},d(t){t&&$o(e),Mr(i)}}}function Op(t,e,i){let n,o,r,s,a,l;const c=Math.PI/2,h=Math.PI/4;let{rotation:u}=e,{valueMin:d}=e,{valueMax:p}=e,{oninputstart:m=f}=e,{oninputmove:g=f}=e,{oninputend:y=f}=e,{elasticity:v=0}=e,{labelReset:b}=e;return t.$$set=t=>{"rotation"in t&&i(13,u=t.rotation),"valueMin"in t&&i(0,d=t.valueMin),"valueMax"in t&&i(1,p=t.valueMax),"oninputstart"in t&&i(2,m=t.oninputstart),"oninputmove"in t&&i(3,g=t.oninputmove),"oninputend"in t&&i(4,y=t.oninputend),"elasticity"in t&&i(5,v=t.elasticity),"labelReset"in t&&i(6,b=t.labelReset)},t.$$.update=()=>{384&t.$$.dirty&&i(11,r=n+.5*(o-n)),8192&t.$$.dirty&&i(9,s=Math.sign(u)),8192&t.$$.dirty&&i(10,a=Math.round(Math.abs(u)/c)*c),9728&t.$$.dirty&&i(12,l=u-s*a)},i(7,n=1e-9-h),i(8,o=h-1e-9),[d,p,m,g,y,v,b,n,o,s,a,r,l,u,t=>g(s*a+t),t=>y(s*a+t)]}class zp extends Er{constructor(t){super(),Pr(this,t,Op,Lp,eo,{rotation:13,valueMin:0,valueMax:1,oninputstart:2,oninputmove:3,oninputend:4,elasticity:5,labelReset:6})}}function Fp(t){let e,i,n,o,r;return{c(){e=wo("div"),i=wo("p"),n=ko(t[0]),o=ko(" Г— "),r=ko(t[1]),Eo(e,"class","PinturaImageInfo")},m(t,s){xo(t,e,s),bo(e,i),bo(i,n),bo(i,o),bo(i,r)},p(t,[e]){1&e&&Ao(n,t[0]),2&e&&Ao(r,t[1])},i:Xn,o:Xn,d(t){t&&$o(e)}}}function Bp(t,e,i){let{width:n}=e,{height:o}=e;return t.$$set=t=>{"width"in t&&i(0,n=t.width),"height"in t&&i(1,o=t.height)},[n,o]}class Np extends Er{constructor(t){super(),Pr(this,t,Bp,Fp,eo,{width:0,height:1})}}function Hp(t){let e,i;return e=new Qc({props:{class:"PinturaPresetListFilter",layout:"row",options:t[9],selectedIndex:t[7],onchange:t[10]}}),{c(){Cr(e.$$.fragment)},m(t,n){Tr(e,t,n),i=!0},p(t,i){const n={};512&i&&(n.options=t[9]),128&i&&(n.selectedIndex=t[7]),e.$set(n)},i(t){i||(mr(e.$$.fragment,t),i=!0)},o(t){gr(e.$$.fragment,t),i=!1},d(t){Mr(e,t)}}}function Wp(t){let e,i;return e=new dh({props:{icon:t[0],label:t[1],labelClass:t[2],hideLabel:t[3],options:t[8],selectedIndex:t[4],onchange:t[5],optionMapper:t[6],$$slots:{controls:[Hp]},$$scope:{ctx:t}}}),{c(){Cr(e.$$.fragment)},m(t,n){Tr(e,t,n),i=!0},p(t,[i]){const n={};1&i&&(n.icon=t[0]),2&i&&(n.label=t[1]),4&i&&(n.labelClass=t[2]),8&i&&(n.hideLabel=t[3]),256&i&&(n.options=t[8]),16&i&&(n.selectedIndex=t[4]),32&i&&(n.onchange=t[5]),64&i&&(n.optionMapper=t[6]),262784&i&&(n.$$scope={dirty:i,ctx:t}),e.$set(n)},i(t){i||(mr(e.$$.fragment,t),i=!0)},o(t){gr(e.$$.fragment,t),i=!1},d(t){Mr(e,t)}}}const jp='fill="none" stroke="currentColor"';function Yp(t,i,n){let o,r,s,{icon:a}=i,{label:l}=i,{labelClass:c}=i,{hideLabel:h}=i,{options:u}=i,{selectedIndex:d}=i,{onchange:p}=i,{optionMapper:m}=i,{filter:g="landscape"}=i,{onfilterchange:y=f}=i;const v=(t,e,i,n,o)=>`\n    <rect ${jp} x="${t}" y="${e}" width="${i}" height="${n}" rx="${o}"/>`,b=(t,e)=>`<path ${jp} d="M${t} ${e} l2 2 l3 -4"/>`;return t.$$set=t=>{"icon"in t&&n(0,a=t.icon),"label"in t&&n(1,l=t.label),"labelClass"in t&&n(2,c=t.labelClass),"hideLabel"in t&&n(3,h=t.hideLabel),"options"in t&&n(12,u=t.options),"selectedIndex"in t&&n(4,d=t.selectedIndex),"onchange"in t&&n(5,p=t.onchange),"optionMapper"in t&&n(6,m=t.optionMapper),"filter"in t&&n(11,g=t.filter),"onfilterchange"in t&&n(13,y=t.onfilterchange)},t.$$.update=()=>{6144&t.$$.dirty&&n(8,o=((t,i)=>(t||[]).map((t=>e(t[0])?(t[1]=t[1].map(i),t):i(t))))(u,(t=>e=>{const[i,n,o={}]=e;return Ke(i)&&(o.hidden="landscape"===t?i<1:i>1),[i,n,o]})(g))),2048&t.$$.dirty&&n(7,r="landscape"===g?0:1),128&t.$$.dirty&&n(9,s=[["landscape","Landscape",{hideLabel:!0,icon:v(2,6,19,12,2)+(0===r?b(9,12):"")}],["portrait","Portrait",{hideLabel:!0,icon:v(5,3,13,18,2)+(1===r?b(9,12):"")}]])},[a,l,c,h,d,p,m,r,o,s,t=>{n(11,g=t.value),y(t.value)},g,u,y]}class Vp extends Er{constructor(t){super(),Pr(this,t,Yp,Wp,eo,{icon:0,label:1,labelClass:2,hideLabel:3,options:12,selectedIndex:4,onchange:5,optionMapper:6,filter:11,onfilterchange:13})}}function Up(t){let e,i;return e=new Nh({props:{items:t[8]}}),{c(){Cr(e.$$.fragment)},m(t,n){Tr(e,t,n),i=!0},p(t,i){const n={};256&i[0]&&(n.items=t[8]),e.$set(n)},i(t){i||(mr(e.$$.fragment,t),i=!0)},o(t){gr(e.$$.fragment,t),i=!1},d(t){Mr(e,t)}}}function qp(t){let e,i,n;return i=new hp({props:{$$slots:{default:[Up]},$$scope:{ctx:t}}}),{c(){e=wo("div"),Cr(i.$$.fragment),Eo(e,"slot","header")},m(t,o){xo(t,e,o),Tr(i,e,null),n=!0},p(t,e){const n={};256&e[0]|131072&e[6]&&(n.$$scope={dirty:e,ctx:t}),i.$set(n)},i(t){n||(mr(i.$$.fragment,t),n=!0)},o(t){gr(i.$$.fragment,t),n=!1},d(t){t&&$o(e),Mr(i)}}}function Xp(t){let e,i;return e=new Pl({props:{onclick:t[83],label:t[3].cropLabelButtonRecenter,icon:t[3].cropIconButtonRecenter,class:"PinturaButtonCenter",disabled:!t[10],hideLabel:!0,style:`opacity: ${t[27]}; transform: translate3d(${t[28].x}px, ${t[28].y}px, 0)`}}),{c(){Cr(e.$$.fragment)},m(t,n){Tr(e,t,n),i=!0},p(t,i){const n={};8&i[0]&&(n.label=t[3].cropLabelButtonRecenter),8&i[0]&&(n.icon=t[3].cropIconButtonRecenter),1024&i[0]&&(n.disabled=!t[10]),402653184&i[0]&&(n.style=`opacity: ${t[27]}; transform: translate3d(${t[28].x}px, ${t[28].y}px, 0)`),e.$set(n)},i(t){i||(mr(e.$$.fragment,t),i=!0)},o(t){gr(e.$$.fragment,t),i=!1},d(t){Mr(e,t)}}}function Gp(t){let e,i;return e=new Sp({props:{rect:t[11],visible:t[9],style:t[1]}}),e.$on("resizestart",t[63]),e.$on("resizemove",t[64]),e.$on("resizeend",t[65]),{c(){Cr(e.$$.fragment)},m(t,n){Tr(e,t,n),i=!0},p(t,i){const n={};2048&i[0]&&(n.rect=t[11]),512&i[0]&&(n.visible=t[9]),2&i[0]&&(n.style=t[1]),e.$set(n)},i(t){i||(mr(e.$$.fragment,t),i=!0)},o(t){gr(e.$$.fragment,t),i=!1},d(t){Mr(e,t)}}}function Zp(t){let e,i;return e=new Np({props:{width:Math.round(t[6].width),height:Math.round(t[6].height)}}),{c(){Cr(e.$$.fragment)},m(t,n){Tr(e,t,n),i=!0},p(t,i){const n={};64&i[0]&&(n.width=Math.round(t[6].width)),64&i[0]&&(n.height=Math.round(t[6].height)),e.$set(n)},i(t){i||(mr(e.$$.fragment,t),i=!0)},o(t){gr(e.$$.fragment,t),i=!1},d(t){Mr(e,t)}}}function Kp(t){let e,i,n,o,r,s,a,l,c=t[17]&&t[18]&&Xp(t),h=t[17]&&Gp(t),u=t[16]&&Zp(t);return{c(){e=wo("div"),i=wo("div"),c&&c.c(),n=So(),h&&h.c(),r=So(),u&&u.c(),Eo(i,"class","PinturaStage"),Eo(e,"slot","main")},m(d,p){xo(d,e,p),bo(e,i),c&&c.m(i,null),bo(i,n),h&&h.m(i,null),t[155](i),bo(e,r),u&&u.m(e,null),s=!0,a||(l=[To(i,"measure",t[153]),uo(ha.call(null,i)),To(i,"wheel",(function(){to(t[2]&&t[82])&&(t[2]&&t[82]).apply(this,arguments)}),{passive:!1}),To(i,"interactionstart",t[69]),To(i,"interactionupdate",t[70]),To(i,"interactionrelease",t[72]),To(i,"interactionend",t[71]),uo(o=Il.call(null,i,{drag:!0,pinch:t[2],inertia:!0,shouldStartInteraction:lf,getEventPosition:t[156]})),To(i,"gesturedown",t[79]),To(i,"gestureupdate",t[80]),To(i,"gestureup",t[81]),uo(Cp.call(null,i))],a=!0)},p(r,s){(t=r)[17]&&t[18]?c?(c.p(t,s),393216&s[0]&&mr(c,1)):(c=Xp(t),c.c(),mr(c,1),c.m(i,n)):c&&(pr(),gr(c,1,1,(()=>{c=null})),fr()),t[17]?h?(h.p(t,s),131072&s[0]&&mr(h,1)):(h=Gp(t),h.c(),mr(h,1),h.m(i,null)):h&&(pr(),gr(h,1,1,(()=>{h=null})),fr()),o&&to(o.update)&&32772&s[0]&&o.update.call(null,{drag:!0,pinch:t[2],inertia:!0,shouldStartInteraction:lf,getEventPosition:t[156]}),t[16]?u?(u.p(t,s),65536&s[0]&&mr(u,1)):(u=Zp(t),u.c(),mr(u,1),u.m(e,null)):u&&(pr(),gr(u,1,1,(()=>{u=null})),fr())},i(t){s||(mr(c),mr(h),mr(u),s=!0)},o(t){gr(c),gr(h),gr(u),s=!1},d(i){i&&$o(e),c&&c.d(),h&&h.d(),t[155](null),u&&u.d(),a=!1,Jn(l)}}}function Qp(t){let e,i,n,o;const r=[{class:"PinturaControlList"},{tabs:t[12]},t[21]];let s={$$slots:{default:[Jp,({tab:t})=>({202:t}),({tab:t})=>[0,0,0,0,0,0,t?65536:0]]},$$scope:{ctx:t}};for(let t=0;t<r.length;t+=1)s=Zn(s,r[t]);e=new nl({props:s}),e.$on("select",t[154]);const a=[{class:"PinturaControlPanels"},{panelClass:"PinturaControlPanel"},{panels:t[22]},t[21]];let l={$$slots:{default:[nf,({panel:t})=>({201:t}),({panel:t})=>[0,0,0,0,0,0,t?32768:0]]},$$scope:{ctx:t}};for(let t=0;t<a.length;t+=1)l=Zn(l,a[t]);return n=new ml({props:l}),{c(){Cr(e.$$.fragment),i=So(),Cr(n.$$.fragment)},m(t,r){Tr(e,t,r),xo(t,i,r),Tr(n,t,r),o=!0},p(t,i){const o=2101248&i[0]?_r(r,[r[0],4096&i[0]&&{tabs:t[12]},2097152&i[0]&&kr(t[21])]):{};196608&i[6]&&(o.$$scope={dirty:i,ctx:t}),e.$set(o);const s=6291456&i[0]?_r(a,[a[0],a[1],4194304&i[0]&&{panels:t[22]},2097152&i[0]&&kr(t[21])]):{};117457032&i[0]|163840&i[6]&&(s.$$scope={dirty:i,ctx:t}),n.$set(s)},i(t){o||(mr(e.$$.fragment,t),mr(n.$$.fragment,t),o=!0)},o(t){gr(e.$$.fragment,t),gr(n.$$.fragment,t),o=!1},d(t){Mr(e,t),t&&$o(i),Mr(n,t)}}}function Jp(t){let e,i,n=t[202].label+"";return{c(){e=wo("span"),i=ko(n)},m(t,n){xo(t,e,n),bo(e,i)},p(t,e){65536&e[6]&&n!==(n=t[202].label+"")&&Ao(i,n)},d(t){t&&$o(e)}}}function tf(t){let e,i;return e=new ap({props:{elasticity:t[36]*t[37],base:af,min:t[14],max:sf,valueMin:t[25][0],valueMax:t[25][1],value:t[26],labelReset:t[3].labelReset,valueLabel:Math.round(100*t[26])+"%",oninputstart:t[76],oninputmove:t[77],oninputend:t[78]}}),{c(){Cr(e.$$.fragment)},m(t,n){Tr(e,t,n),i=!0},p(t,i){const n={};16384&i[0]&&(n.min=t[14]),33554432&i[0]&&(n.valueMin=t[25][0]),33554432&i[0]&&(n.valueMax=t[25][1]),67108864&i[0]&&(n.value=t[26]),8&i[0]&&(n.labelReset=t[3].labelReset),67108864&i[0]&&(n.valueLabel=Math.round(100*t[26])+"%"),e.$set(n)},i(t){i||(mr(e.$$.fragment,t),i=!0)},o(t){gr(e.$$.fragment,t),i=!1},d(t){Mr(e,t)}}}function ef(t){let e,i;return e=new zp({props:{elasticity:t[36]*t[37],rotation:t[7],labelReset:t[3].labelReset,valueMin:t[24][0],valueMax:t[24][1],oninputstart:t[66],oninputmove:t[67],oninputend:t[68]}}),{c(){Cr(e.$$.fragment)},m(t,n){Tr(e,t,n),i=!0},p(t,i){const n={};128&i[0]&&(n.rotation=t[7]),8&i[0]&&(n.labelReset=t[3].labelReset),16777216&i[0]&&(n.valueMin=t[24][0]),16777216&i[0]&&(n.valueMax=t[24][1]),e.$set(n)},i(t){i||(mr(e.$$.fragment,t),i=!0)},o(t){gr(e.$$.fragment,t),i=!1},d(t){Mr(e,t)}}}function nf(t){let e,i,n,o;const r=[ef,tf],s=[];function a(t,e){return t[201]===t[88]+"-rotation"?0:t[201]===t[88]+"-zoom"?1:-1}return~(e=a(t))&&(i=s[e]=r[e](t)),{c(){i&&i.c(),n=Co()},m(t,i){~e&&s[e].m(t,i),xo(t,n,i),o=!0},p(t,o){let l=e;e=a(t),e===l?~e&&s[e].p(t,o):(i&&(pr(),gr(s[l],1,1,(()=>{s[l]=null})),fr()),~e?(i=s[e],i?i.p(t,o):(i=s[e]=r[e](t),i.c()),mr(i,1),i.m(n.parentNode,n)):i=null)},i(t){o||(mr(i),o=!0)},o(t){gr(i),o=!1},d(t){~e&&s[e].d(t),t&&$o(n)}}}function of(t){let e,i,n=t[20]&&Qp(t);return{c(){e=wo("div"),n&&n.c(),Eo(e,"slot","footer"),Eo(e,"style",t[23])},m(t,o){xo(t,e,o),n&&n.m(e,null),i=!0},p(t,o){t[20]?n?(n.p(t,o),1048576&o[0]&&mr(n,1)):(n=Qp(t),n.c(),mr(n,1),n.m(e,null)):n&&(pr(),gr(n,1,1,(()=>{n=null})),fr()),(!i||8388608&o[0])&&Eo(e,"style",t[23])},i(t){i||(mr(n),i=!0)},o(t){gr(n),i=!1},d(t){t&&$o(e),n&&n.d()}}}function rf(t){let e,i,n;function o(e){t[157](e)}let r={hasHeader:t[19],$$slots:{footer:[of],main:[Kp],header:[qp]},$$scope:{ctx:t}};return void 0!==t[13]&&(r.root=t[13]),e=new np({props:r}),Zo.push((()=>Sr(e,"root",o))),e.$on("measure",t[158]),{c(){Cr(e.$$.fragment)},m(t,i){Tr(e,t,i),n=!0},p(t,n){const o={};524288&n[0]&&(o.hasHeader=t[19]),536338430&n[0]|131072&n[6]&&(o.$$scope={dirty:n,ctx:t}),!i&&8192&n[0]&&(i=!0,o.root=t[13],or((()=>i=!1))),e.$set(o)},i(t){n||(mr(e.$$.fragment,t),n=!0)},o(t){gr(e.$$.fragment,t),n=!1},d(t){Mr(e,t)}}}const sf=1,af=0,lf=(t,e)=>t.target===e;function cf(t,e,i){let n,o,r,s,a,l,c,h,u,d,p,f,m,g,y,v,b,x,$,w,_,k,S,C,T,M,P,E,I,D,R,L,O,z,F,B,N,H,W,V,q,G,Z,K,J,tt,nt,st,lt,dt,pt,ft,mt,gt,yt,vt,bt,$t,kt,Ct,At,Dt,Rt,Lt,Ot,Ft,Nt,Ht,Wt=Xn,Xt=()=>(Wt(),Wt=io(Qt,(t=>i(9,G=t))),Qt);t.$$.on_destroy.push((()=>Wt()));let{isActive:Qt}=e;Xt();let{stores:Jt}=e,{cropImageSelectionCornerStyle:te="circle"}=e,{cropWillRenderImageSelectionGuides:se=((t,e)=>{const i="rotate"==t;return{rows:i?5:3,cols:i?5:3,opacity:.25*e}})}=e,{cropAutoCenterImageSelectionTimeout:le}=e,{cropEnableZoomMatchImageAspectRatio:ce=!0}=e,{cropEnableRotateMatchImageAspectRatio:he="never"}=e,{cropEnableRotationInput:ue=!0}=e,{cropEnableZoom:de=!0}=e,{cropEnableZoomInput:pe=!0}=e,{cropEnableZoomAutoHide:fe=!0}=e,{cropEnableImageSelection:me=!0}=e,{cropEnableInfoIndicator:ge=!1}=e,{cropEnableZoomTowardsWheelPosition:ye=!0}=e,{cropEnableLimitWheelInputToCropSelection:ve=!0}=e,{cropEnableCenterImageSelection:be=!0}=e,{cropEnableButtonRotateLeft:xe=!0}=e,{cropEnableButtonRotateRight:$e=!1}=e,{cropEnableButtonFlipHorizontal:we=!0}=e,{cropEnableButtonFlipVertical:_e=!1}=e,{cropSelectPresetOptions:ke}=e,{cropEnableSelectPreset:Se=!0}=e,{cropEnableFilterMatchAspectRatio:Ce=!0}=e,{cropSelectPresetFilter:Te=!1}=e,{cropEnableButtonToggleCropLimit:Me=!1}=e,{cropWillRenderTools:Pe=Y}=e,{cropActiveTransformTool:Ee="rotation"}=e,{cropMinimizeToolbar:Ie="auto"}=e,{locale:Ae={}}=e,De="idle";const Re=Dr();oo(t,Re,(t=>i(118,I=t)));const Le=()=>void 0===E,Oe=t=>1/t,ze=t=>{Ce&&Te!==t&&(i(90,Te=t),E&&1!==E&&Fe()&&ho(vi,E=Oe(E),E))},Fe=()=>{if(1===E||!n)return!1;const t=Oe(E);return!!wc(I).find((([e])=>e===t))},Be=(t,e,i)=>X(i)?e.width===Math.round(t.height)||e.height===Math.round(t.width):e.width===Math.round(t.width)||e.height===Math.round(t.height),Ne=t=>{if("never"!==he&&(Le()||"always"===he&&Fe())&&((t,e,i)=>{const n=It(Pt(xt(e),i),(t=>Math.abs(Math.round(t)))),o=Mt(n),r=Vt(t);return at(o,r)})(D,R,L)&&Be(D,R,L)){ho(ri,L+=t,L);const e=X(L),i=e?R.height:R.width,n=e?R.width:R.height;ho(fi,D=Yt(0,0,i,n),D),Le()||ho(vi,E=j(i,n),E)}else ho(ri,L+=t,L)},{history:He,env:We,isInteracting:je,isInteractingFraction:Ye,rootRect:Ve,stageRect:Ue,utilRect:qe,rootLineColor:Xe,animation:Ge,elasticityMultiplier:Ze,rangeInputElasticity:Ke,presentationScalar:Qe,utilTools:Je,imagePreviewModifiers:ei,imageOutlineOpacity:ii,imageFlipX:ni,imageFlipY:oi,imageRotation:ri,imageRotationRange:si,imageOutputSize:ai,imageSelectionRect:li,imageSelectionRectSnapshot:ci,imageSelectionRectIntent:hi,imageSelectionRectPresentation:ui,imageCropRectIntent:di,imageCropRectOrigin:pi,imageCropRect:fi,imageCropMinSize:mi,imageCropMaxSize:gi,imageCropRange:yi,imageCropAspectRatio:vi,imageCropRectAspectRatio:bi,imageCropLimitToImage:xi,imageSize:$i,imageScalar:wi,imageOverlayMarkup:_i,framePadded:ki}=Jt;oo(t,We,(t=>i(128,V=t))),oo(t,je,(t=>i(130,Z=t))),oo(t,Ve,(t=>i(15,mt=t))),oo(t,Ue,(t=>i(135,gt=t))),oo(t,qe,(t=>i(134,lt=t))),oo(t,Ge,(t=>i(151,Dt=t))),oo(t,Qe,(t=>i(133,tt=t))),oo(t,Je,(t=>i(169,q=t))),oo(t,ei,(t=>i(146,kt=t))),oo(t,ni,(t=>i(122,F=t))),oo(t,oi,(t=>i(121,z=t))),oo(t,ri,(t=>i(7,L=t))),oo(t,si,(t=>i(24,Lt=t))),oo(t,ai,(t=>i(168,N=t))),oo(t,li,(t=>i(132,J=t))),oo(t,ci,(t=>i(131,K=t))),oo(t,hi,(t=>i(171,st=t))),oo(t,ui,(t=>i(138,vt=t))),oo(t,di,(t=>i(173,pt=t))),oo(t,pi,(t=>i(172,dt=t))),oo(t,fi,(t=>i(6,D=t))),oo(t,mi,(t=>i(126,H=t))),oo(t,gi,(t=>i(170,nt=t))),oo(t,yi,(t=>i(174,ft=t))),oo(t,vi,(t=>i(167,E=t))),oo(t,xi,(t=>i(127,W=t))),oo(t,$i,(t=>i(119,R=t))),oo(t,wi,(t=>i(144,bt=t))),oo(t,_i,(t=>i(176,Ct=t))),oo(t,ki,(t=>i(145,$t=t)));const Si=Dr({});let Ci,Ti,Pi;oo(t,Si,(t=>i(120,O=t)));const Ei=(t,e)=>{const i={target:t,translate:e};let n,o=Dp(K,i,{aspectRatio:E});const r=wt(Gt(zt(o),tt));if(Gr(R,L),r.width<H.width||r.height<H.height){const i=e.y<0,o=e.x>0,s=e.x<0,a=e.y>0,l="t"===t&&i||"r"===t&&o||"b"===t&&a||"l"===t&&s||"tr"===t&&(o||i)||"tl"===t&&(s||i)||"br"===t&&(o||a)||"bl"===t&&(s||a),c=Kt(r),h=Zr(R,L,c);if(l&&(h.width<H.width||h.height<H.height)){if(0!==L){const t=Math.sign(L),e=Math.round(Math.abs(L)/U)*U,i=L-t*e,n=e/U%2==1,o=n?R.height:R.width,s=n?R.width:R.height,a=Math.abs(i),l=Math.sin(a),c=Math.cos(a);if(r.width<H.width){r.width=H.width;const t=o-(c*r.width+l*r.height),e=s-(l*r.width+c*r.height);t<e?r.height=(o-c*r.width)/l:e<t&&(r.height=(s-l*r.width)/c)}if(r.height<H.height){r.height=H.height;const t=o-(c*r.width+l*r.height),e=s-(l*r.width+c*r.height);t<e?r.width=(o-l*r.height)/c:e<t&&(r.width=(s-c*r.height)/l)}}else r.width<H.width&&(r.width=H.width,r.height=R.height),r.height<H.height&&(r.height=H.height,r.width=R.width);n=Kt(r)}}return n&&(o=Dp(K,i,{aspectRatio:n||E})),{boundsLimited:((t,e,i,n={})=>{const{target:o,translate:r}=e,{aspectRatio:s,minSize:a,maxSize:l}=n,c=Ep[Pp[o]],h=ct(Q(t.x,t.y),Q(c[0]*t.width,c[1]*t.height)),u=Ep[o],d=ct(zt(t),Q(u[0]*t.width,u[1]*t.height)),[p,f,m,g,y,v,b]=Ip(o);let x=r.x,$=r.y;y?$=0:v&&(x=0);const w=Ap(h,o,i,{aspectRatio:s,minSize:a,maxSize:l});let[_,k,S,C]=re(t);if(p?C=h.x:f&&(k=h.x),g?_=h.y:m&&(S=h.y),p){const t=w.inner.x+w.inner.width,e=w.outer.x+w.outer.width;k=Qr(d.x+x,t,e)}else if(f){const t=w.outer.x,e=w.inner.x;C=Qr(d.x+x,t,e)}if(g){const t=w.inner.y+w.inner.height,e=w.outer.y+w.outer.height;S=Qr(d.y+$,t,e)}else if(m){const t=w.outer.y,e=w.inner.y;_=Qr(d.y+$,t,e)}if(s)if(b){let t=k-C,e=S-_;y?(e=t/s,_=h.y-.5*e,S=h.y+.5*e):v&&(t=e*s,C=h.x-.5*t,k=h.x+.5*t)}else{const t=Q(d.x+x-h.x,d.y+$-h.y);o===yp?(t.x=Math.max(0,t.x),t.y=Math.min(0,t.y)):o===vp?(t.x=Math.max(0,t.x),t.y=Math.max(0,t.y)):o===bp?(t.x=Math.min(0,t.x),t.y=Math.max(0,t.y)):o===gp&&(t.x=Math.min(0,t.x),t.y=Math.min(0,t.y));const e=ot(t),i=ot(Q(w.inner.width,w.inner.height)),n=ot(Q(w.outer.width,w.outer.height)),r=Qr(e,i,n),a=Q(s,1),l=ut(rt(a),r);o===yp?(k=h.x+l.x,_=h.y-l.y):o===vp?(k=h.x+l.x,S=h.y+l.y):o===bp?(C=h.x-l.x,S=h.y+l.y):o===gp&&(C=h.x-l.x,_=h.y-l.y)}return Yt(C,_,k-C,S-_)})(K,i,lt,{aspectRatio:E||n,minSize:Ti,maxSize:Pi}),boundsIntent:o}};let Ii,Ai;const Di=({translation:t,scalar:e})=>{const i=Math.min(J.width/D.width,J.height/D.height),n=ut(et(t),1/i);let o;if(Ai){const e=ht(et(Ai),t);Ai=t,o=Ut(zt(D),e)}else o=Ut(zt(Ii),it(et(n))),void 0!==e&&qt(o,1/e);ho(di,pt=o,pt),ho(fi,D=o,D)},Ri=Rr([yi,fi],(([t,e],i)=>{if(!e)return;const[n,o]=t,r=Kt(e);i([wt(ae(ne(n,r),Mi)),wt(ae(oe(o,r),Mi))])}));oo(t,Ri,(t=>i(175,yt=t)));const Li=Rr([$i,xi,mi,gi,yi,ri],(([t,e,i,n,o,r],s)=>{if(!t)return;const a=o[0],l=o[1];let c,h;e?(c=((t,e,i)=>X(i)?1-1/Math.min(t.height/e.width,t.width/e.height):1-1/Math.min(t.width/e.width,t.height/e.height))(t,l,r),h=Math.min(a.width/i.width,a.height/i.height)):(h=1,c=-1),s([Mi(c),Mi(h)])}));oo(t,Li,(t=>i(25,Ot=t)));const Oi=Rr([$i,fi,yi,ri],(([t,e,i,n],o)=>{if(!t||!e)return o(0);let r;const s=i[0],a=i[1],l=e.width,c=e.height,h=Kt(e),u=X(n)?St(t.height,t.width):t,d=oe(u,h);if(l<=d.width||c<=d.height){const t=d.width-s.width,e=d.height-s.height;r=0===t||0===e?1:1-Math.min((l-s.width)/t,(c-s.height)/e)}else{const t=a.width-d.width,e=a.height-d.height,i=oe({width:t,height:e},h);r=-Math.min((l-d.width)/i.width,(c-d.height)/i.height)}o(r)}));oo(t,Oi,(t=>i(26,Ft=t)));const zi=t=>{const e=Kt(Ii);let i,n,o;const r=X(L)?St(R.height,R.width):R,s=oe(r,e);if(t>=0){const r=s.width-ft[0].width,a=s.height-ft[0].height;i=s.width-r*t,n=s.height-a*t,o=ne({width:i,height:n},e)}else{const r=ft[1].width-s.width,a=ft[1].height-s.height;i=s.width+r*-t,n=s.height+a*-t,o=oe({width:i,height:n},e)}i=o.width,n=o.height;const a=Ii.x+.5*Ii.width-.5*i,l=Ii.y+.5*Ii.height-.5*n;ho(fi,D={x:a,y:l,width:i,height:n},D)};let Fi;const Bi=t=>{const e=qt(zt(Fi),1/t);ho(di,pt=e,pt),ho(fi,D=e,D)};let Ni;const Hi=Vo(),Wi=()=>{Hi("measure",zt(lt))};let ji;const Yi=Qs(0,{precision:1e-4});oo(t,Yi,(t=>i(27,Nt=t)));const Vi=Qs();oo(t,Vi,(t=>i(28,Ht=t)));const Ui=Rr([vi,ai,Re],(([t,e,i],o)=>{if(!n)return;const r=wc(i),s=[...r].map((t=>t[0])).sort(((t,e)=>ti(t[0])&&!ti(e[0])?1:-1)).find((i=>{if(ti(i)&&e){const[n,o]=i,r=e.width===n&&e.height===o,s=t===j(n,o);return r&&s}return i===t}));o(r.map((t=>t[0])).findIndex((t=>ti(t)?is(t,s):t===s)))}));oo(t,Ui,(t=>i(124,B=t)));const qi=(t,e)=>{if(!n||-1===t||void 0===t)return;const i=wc(e)[t][0];return i?ti(i)?j(i[0],i[1]):i:void 0},Xi=Rr([Xe,ui,Ye],(([t,e,i],n)=>{const{rows:o,cols:r,opacity:s}=se(De,i);if(!e||s<=0)return n([]);const{x:a,y:l,width:c,height:h}=e,u=c/r,d=h/o,p=[];for(let e=1;e<=o-1;e++){const i=l+d*e;p.push({id:"image-selection-guide-row-"+e,points:[Q(a,i),Q(a+c,i)],opacity:s,strokeWidth:1,strokeColor:t})}for(let e=1;e<=r-1;e++){const i=a+u*e;p.push({id:"image-selection-guide-col-"+e,points:[Q(i,l),Q(i,l+h)],opacity:s,strokeWidth:1,strokeColor:t})}n(p)}));oo(t,Xi,(t=>i(147,At=t)));const Gi="crop-"+A();let Zi,Ki,Qi=Gi+"-"+(ue?Ee:"zoom"),Ji=Qi;const tn=Qs(Dt?20:0);return oo(t,tn,(t=>i(152,Rt=t))),t.$$set=t=>{"isActive"in t&&Xt(i(0,Qt=t.isActive)),"stores"in t&&i(92,Jt=t.stores),"cropImageSelectionCornerStyle"in t&&i(1,te=t.cropImageSelectionCornerStyle),"cropWillRenderImageSelectionGuides"in t&&i(93,se=t.cropWillRenderImageSelectionGuides),"cropAutoCenterImageSelectionTimeout"in t&&i(94,le=t.cropAutoCenterImageSelectionTimeout),"cropEnableZoomMatchImageAspectRatio"in t&&i(95,ce=t.cropEnableZoomMatchImageAspectRatio),"cropEnableRotateMatchImageAspectRatio"in t&&i(96,he=t.cropEnableRotateMatchImageAspectRatio),"cropEnableRotationInput"in t&&i(97,ue=t.cropEnableRotationInput),"cropEnableZoom"in t&&i(2,de=t.cropEnableZoom),"cropEnableZoomInput"in t&&i(98,pe=t.cropEnableZoomInput),"cropEnableZoomAutoHide"in t&&i(99,fe=t.cropEnableZoomAutoHide),"cropEnableImageSelection"in t&&i(100,me=t.cropEnableImageSelection),"cropEnableInfoIndicator"in t&&i(101,ge=t.cropEnableInfoIndicator),"cropEnableZoomTowardsWheelPosition"in t&&i(102,ye=t.cropEnableZoomTowardsWheelPosition),"cropEnableLimitWheelInputToCropSelection"in t&&i(103,ve=t.cropEnableLimitWheelInputToCropSelection),"cropEnableCenterImageSelection"in t&&i(104,be=t.cropEnableCenterImageSelection),"cropEnableButtonRotateLeft"in t&&i(105,xe=t.cropEnableButtonRotateLeft),"cropEnableButtonRotateRight"in t&&i(106,$e=t.cropEnableButtonRotateRight),"cropEnableButtonFlipHorizontal"in t&&i(107,we=t.cropEnableButtonFlipHorizontal),"cropEnableButtonFlipVertical"in t&&i(108,_e=t.cropEnableButtonFlipVertical),"cropSelectPresetOptions"in t&&i(109,ke=t.cropSelectPresetOptions),"cropEnableSelectPreset"in t&&i(110,Se=t.cropEnableSelectPreset),"cropEnableFilterMatchAspectRatio"in t&&i(111,Ce=t.cropEnableFilterMatchAspectRatio),"cropSelectPresetFilter"in t&&i(90,Te=t.cropSelectPresetFilter),"cropEnableButtonToggleCropLimit"in t&&i(112,Me=t.cropEnableButtonToggleCropLimit),"cropWillRenderTools"in t&&i(113,Pe=t.cropWillRenderTools),"cropActiveTransformTool"in t&&i(114,Ee=t.cropActiveTransformTool),"cropMinimizeToolbar"in t&&i(115,Ie=t.cropMinimizeToolbar),"locale"in t&&i(3,Ae=t.locale)},t.$$.update=()=>{65536&t.$$.dirty[3]&&i(117,n=ke&&Array.isArray(ke)&&ke.length),16842752&t.$$.dirty[3]&&Re.set(n?ke:[]),16&t.$$.dirty[4]&&i(129,p="overlay"===V.layoutMode),131072&t.$$.dirty[3]|32&t.$$.dirty[4]&&i(123,$=Se&&!p),1280&t.$$.dirty[4]&&i(139,l=lt&&J&&ee(lt,J)),33024&t.$$.dirty[4]&&i(140,c=!(!J||!l)),98560&t.$$.dirty[4]&&i(125,h=c&&Zt(J,l,(t=>Mi(t,5)))),136&t.$$.dirty[0]|268435456&t.$$.dirty[2]|2132340736&t.$$.dirty[3]|31&t.$$.dirty[4]&&i(8,o=O&&Pe([xe&&["Button","rotate-left",{label:Ae.cropLabelButtonRotateLeft,labelClass:"PinturaToolbarContentWide",icon:Ae.cropIconButtonRotateLeft,onclick:()=>{Ne(-Math.PI/2),He.write()}}],$e&&["Button","rotate-right",{label:Ae.cropLabelButtonRotateRight,labelClass:"PinturaToolbarContentWide",icon:Ae.cropIconButtonRotateRight,onclick:()=>{Ne(Math.PI/2),He.write()}}],we&&["Button","flip-horizontal",{label:Ae.cropLabelButtonFlipHorizontal,labelClass:"PinturaToolbarContentWide",icon:Ae.cropIconButtonFlipHorizontal,onclick:()=>{X(L)?ho(oi,z=!z,z):ho(ni,F=!F,F),He.write()}}],_e&&["Button","flip-vertical",{label:Ae.cropLabelButtonFlipVertical,labelClass:"PinturaToolbarContentWide",icon:Ae.cropIconButtonFlipVertical,onclick:()=>{X(L)?ho(ni,F=!F,F):ho(oi,z=!z,z),He.write()}}],$&&n&&[!1===Te?"Dropdown":Vp,"select-preset",{icon:kc(Ae.cropIconSelectPreset,Ae,qi(B,I)),label:Ae.cropLabelSelectPreset,labelClass:"PinturaToolbarContentWide",options:I,filter:Te,onfilterchange:ze,selectedIndex:B,onchange:({value:t})=>{ti(t)?(ho(vi,E=j(t[0],t[1]),E),ho(ai,N=_t(t),N)):ho(vi,E=t,E),h&&Wi(),He.write()},optionMapper:t=>{let e=!1;const i=ti(t.value)?t.value[0]/t.value[1]:t.value;if(i){const t=Zr(R,L,i);e=t.width<H.width||t.height<H.height}return t.icon=((t,e={})=>{const{width:i=24,height:n=24,bounds:o=16,radius:r=3}=e;let s,a,l,c,h=ti(t)?j(t[0],t[1]):t,u=!!h;return h=u?h:1,l=h>1?o:h*o,c=l/h,s=Math.round(.5*(i-l)),a=Math.round(.5*(n-c)),`<rect fill="${u?"currentColor":"none"}" stroke="${u?"none":"currentColor"}" stroke-width="${i/16}" stroke-dasharray="${[i/12,i/6].join(" ")}" x="${s}" y="${a}" width="${l}" height="${c}" rx="${r}"/>`})(t.value,{bounds:14}),{...t,disabled:e}}}],Me&&["Dropdown","select-crop-limit",{icon:kc(Ae.cropIconCropBoundary,Ae,W),label:Ae.cropLabelCropBoundary,labelClass:"PinturaToolbarContentWide",onchange:({value:t})=>{ho(xi,W=t,W),He.write()},options:[[!0,Ae.cropLabelCropBoundaryEdge,{icon:kc(Ae.cropIconCropBoundary,Ae,!0)}],[!1,Ae.cropLabelCropBoundaryNone,{icon:kc(Ae.cropIconCropBoundary,Ae,!1)}]]}]].filter(Boolean),V,(()=>Si.set({}))).filter(Boolean)),768&t.$$.dirty[0]|4194304&t.$$.dirty[3]|48&t.$$.dirty[4]&&ho(Je,q=G&&("always"===Ie||"short"===V.verticalSpace||p)?o.map((([t,e,i])=>Array.isArray(i)?[t,e,i]:[t,e,{...i,hideLabel:!0}])):[],q),512&t.$$.dirty[0]&&G&&ii.set(1),8&t.$$.dirty[4]&&i(14,r=W?0:-1),3072&t.$$.dirty[4]&&i(136,s=lt&&Q(-(gt.x-lt.x),-(gt.y-lt.y))),20480&t.$$.dirty[4]&&i(137,a=vt&&Q(rc(vt.x+.5*vt.width+s.x),rc(vt.y+.5*vt.height+s.y))),128&t.$$.dirty[4]&&i(141,u=null!=K),33792&t.$$.dirty[4]&&i(142,d=lt&&l&&(l.height===lt.height||l.width===lt.width)),1311232&t.$$.dirty[4]&&i(143,f=!d&&tt<1&&bt<1),720898&t.$$.dirty[4]&&i(10,m=c&&!u&&(!h||f)),64&t.$$.dirty[0]|256&t.$$.dirty[3]|32&t.$$.dirty[4]&&i(16,g=ge&&!!D&&!p),20480&t.$$.dirty[4]&&i(11,b=vt&&s&&{x:vt.x+s.x,y:vt.y+s.y,width:vt.width,height:vt.height}),2048&t.$$.dirty[0]|128&t.$$.dirty[3]|32&t.$$.dirty[4]&&i(17,y=me&&!!b&&!p),2050&t.$$.dirty[3]|8192&t.$$.dirty[4]&&i(18,v=be&&!!a&&!le),1024&t.$$.dirty[0]|8388610&t.$$.dirty[3]|64&t.$$.dirty[4]&&m&&le&&!Z&&(clearTimeout(ji),i(116,ji=setTimeout(Wi,le))),8388608&t.$$.dirty[3]|64&t.$$.dirty[4]&&Z&&clearTimeout(ji),1024&t.$$.dirty[0]&&Yi.set(m?1:0),8192&t.$$.dirty[4]&&Vi.set(a),512&t.$$.dirty[0]|6291456&t.$$.dirty[4]&&(G&&!$t?ho(ei,kt.crop={maskOpacity:.85,maskMarkupOpacity:.85},kt):delete kt.crop),8388608&t.$$.dirty[4]&&At&&(()=>{const t=Ct.filter((t=>!/^image\-selection\-guide/.test(t.id)));ho(_i,Ct=G?[...t,...At]:t,Ct)})(),16&t.$$.dirty[4]&&i(148,x="short"!==V.verticalSpace),4194304&t.$$.dirty[3]|16777248&t.$$.dirty[4]&&i(19,w=x&&!p&&"always"!==Ie),4&t.$$.dirty[0]|32&t.$$.dirty[3]&&i(149,_=de&&pe),64&t.$$.dirty[3]|50331648&t.$$.dirty[4]&&i(150,k=fe?x&&_:_),16&t.$$.dirty[3]|67108864&t.$$.dirty[4]&&i(20,S=ue||k),67108864&t.$$.dirty[4]&&(k||i(4,Ji=Qi)),16&t.$$.dirty[0]&&i(21,C={name:Gi,selected:Ji}),8&t.$$.dirty[0]|16&t.$$.dirty[3]|67108864&t.$$.dirty[4]&&i(12,T=[ue&&{id:Gi+"-rotation",label:Ae.cropLabelTabRotation},k&&{id:Gi+"-zoom",label:Ae.cropLabelTabZoom}].filter(Boolean)),4096&t.$$.dirty[0]&&i(22,M=T.map((t=>t.id))),32&t.$$.dirty[0]|32&t.$$.dirty[4]&&Zi&&!Zi.children.length&&p&&Zi.dispatchEvent(new CustomEvent("measure",{detail:Zi.rect})),512&t.$$.dirty[0]|134217728&t.$$.dirty[4]&&Dt&&tn.set(G?0:20),268435456&t.$$.dirty[4]&&i(23,P=Rt?`transform: translateY(${Rt}px)`:void 0)},[Qt,te,de,Ae,Ji,Zi,D,L,o,G,m,b,T,Ki,r,mt,g,y,v,w,S,C,M,P,Lt,Ot,Ft,Nt,Ht,Re,We,je,Ve,Ue,qe,Ge,Ze,Ke,Qe,Je,ei,ni,oi,ri,si,ai,li,ci,hi,ui,di,pi,fi,mi,gi,yi,vi,xi,$i,wi,_i,ki,Si,()=>{De="select",ho(je,Z=!0,Z),ho(ci,K=zt(J),K),Ci=tt,Ti=Tt(xt(H),Ci),Pi=Tt(xt(nt),Ci)},({detail:t})=>{const{boundsLimited:e,boundsIntent:i}=Ei(t.direction,t.translation);ho(hi,st=i,st),ho(li,J=e,J)},({detail:t})=>{const{boundsLimited:e}=Ei(t.direction,t.translation);ho(je,Z=!1,Z),ho(hi,st=void 0,st),ot(t.translation)&&(ho(li,J=e,J),He.write()),ho(ci,K=void 0,K),De=void 0},()=>{De="rotate",ho(je,Z=!0,Z),ho(pi,dt=zt(D),dt)},t=>{ho(ri,L=t,L)},t=>{ho(je,Z=!1,Z),ho(ri,L=t,L),He.write(),ho(pi,dt=void 0,dt)},()=>{De="pan",Ai=void 0,ho(je,Z=!0,Z),Ii=zt(D)},({detail:t})=>Di(t),({detail:t})=>{ho(je,Z=!1,Z),(ot(t.translation)>0||0!==t.scalar)&&(Di(t),He.write()),ho(di,pt=void 0,pt),Ii=void 0},({detail:t})=>{Ai=t.translation,ho(je,Z=!1,Z)},Ri,Li,Oi,()=>{De="zoom",ho(je,Z=!0,Z),Ii=zt(D)},t=>{zi(t)},t=>{zi(t),He.write(),ho(je,Z=!1,Z),Ii=void 0},()=>{De="zoom",Ii||(Fi=zt(D),ho(je,Z=!0,Z))},({detail:t})=>{Fi&&Bi(t)},({detail:t})=>{Fi&&(ho(je,Z=!1,Z),Bi(t),ho(di,pt=void 0,pt),Fi=void 0,He.write())},t=>{const e=Mp(t,mt,gt);if(ve&&!ie(J,e))return;De="zoom",ho(je,Z=!0,Z),t.preventDefault(),t.stopPropagation();const i=Ol(t),n=1+i/100,o=zt(D),r=1===Math.min(D.width/H.width,D.height/H.height);if(ce&&W){const t=Be(D,R,L);if(Le()&&t&&i>0&&h){ho(je,Z=!1,Z);const t=X(L)?Bt({height:R.width,width:R.height}):Bt(R);if(Zt(o,t))return;if(clearTimeout(Ni),Zt(He.state.crop,t))return;return ho(fi,D=t,D),void He.write()}}let s=Vt(D);if(ye&&i<0&&!r){const t=ht(et(e),J),i=Math.min(J.width/D.width,J.height/D.height),n=qt(zt(J),1.1);s=ie(n,e)?ct(zt(D),ut(t,1/i)):s}let a=qt(zt(D),n,s);Et(yt[1],a)||(a=jt(Vt(a),yt[1])),Et(a,yt[0])||(a=jt(Vt(a),yt[0])),Zt(o,a,Mi)?ho(je,Z=!1,Z):(ho(fi,D=ae(a,(t=>Mi(t,5))),D),ho(je,Z=!1,Z),clearTimeout(Ni),Ni=setTimeout((()=>{He.write()}),500))},Wi,Yi,Vi,Ui,Xi,Gi,tn,Te,"crop",Jt,se,le,ce,he,ue,pe,fe,me,ge,ye,ve,be,xe,$e,we,_e,ke,Se,Ce,Me,Pe,Ee,Ie,ji,n,I,R,O,z,F,$,B,h,H,W,V,p,Z,K,J,tt,lt,gt,s,a,vt,l,c,u,d,f,bt,$t,kt,At,x,_,k,Dt,Rt,function(e){Xo(t,e)},({detail:t})=>i(4,Ji=t),function(t){Zo[t?"unshift":"push"]((()=>{Zi=t,i(5,Zi)}))},t=>Tp(t),function(t){Ki=t,i(13,Ki)},function(e){Xo(t,e)}]}var hf={util:["crop",class extends Er{constructor(t){super(),Pr(this,t,cf,rf,eo,{name:91,isActive:0,stores:92,cropImageSelectionCornerStyle:1,cropWillRenderImageSelectionGuides:93,cropAutoCenterImageSelectionTimeout:94,cropEnableZoomMatchImageAspectRatio:95,cropEnableRotateMatchImageAspectRatio:96,cropEnableRotationInput:97,cropEnableZoom:2,cropEnableZoomInput:98,cropEnableZoomAutoHide:99,cropEnableImageSelection:100,cropEnableInfoIndicator:101,cropEnableZoomTowardsWheelPosition:102,cropEnableLimitWheelInputToCropSelection:103,cropEnableCenterImageSelection:104,cropEnableButtonRotateLeft:105,cropEnableButtonRotateRight:106,cropEnableButtonFlipHorizontal:107,cropEnableButtonFlipVertical:108,cropSelectPresetOptions:109,cropEnableSelectPreset:110,cropEnableFilterMatchAspectRatio:111,cropSelectPresetFilter:90,cropEnableButtonToggleCropLimit:112,cropWillRenderTools:113,cropActiveTransformTool:114,cropMinimizeToolbar:115,locale:3},[-1,-1,-1,-1,-1,-1,-1])}get name(){return this.$$.ctx[91]}get isActive(){return this.$$.ctx[0]}set isActive(t){this.$set({isActive:t}),ar()}get stores(){return this.$$.ctx[92]}set stores(t){this.$set({stores:t}),ar()}get cropImageSelectionCornerStyle(){return this.$$.ctx[1]}set cropImageSelectionCornerStyle(t){this.$set({cropImageSelectionCornerStyle:t}),ar()}get cropWillRenderImageSelectionGuides(){return this.$$.ctx[93]}set cropWillRenderImageSelectionGuides(t){this.$set({cropWillRenderImageSelectionGuides:t}),ar()}get cropAutoCenterImageSelectionTimeout(){return this.$$.ctx[94]}set cropAutoCenterImageSelectionTimeout(t){this.$set({cropAutoCenterImageSelectionTimeout:t}),ar()}get cropEnableZoomMatchImageAspectRatio(){return this.$$.ctx[95]}set cropEnableZoomMatchImageAspectRatio(t){this.$set({cropEnableZoomMatchImageAspectRatio:t}),ar()}get cropEnableRotateMatchImageAspectRatio(){return this.$$.ctx[96]}set cropEnableRotateMatchImageAspectRatio(t){this.$set({cropEnableRotateMatchImageAspectRatio:t}),ar()}get cropEnableRotationInput(){return this.$$.ctx[97]}set cropEnableRotationInput(t){this.$set({cropEnableRotationInput:t}),ar()}get cropEnableZoom(){return this.$$.ctx[2]}set cropEnableZoom(t){this.$set({cropEnableZoom:t}),ar()}get cropEnableZoomInput(){return this.$$.ctx[98]}set cropEnableZoomInput(t){this.$set({cropEnableZoomInput:t}),ar()}get cropEnableZoomAutoHide(){return this.$$.ctx[99]}set cropEnableZoomAutoHide(t){this.$set({cropEnableZoomAutoHide:t}),ar()}get cropEnableImageSelection(){return this.$$.ctx[100]}set cropEnableImageSelection(t){this.$set({cropEnableImageSelection:t}),ar()}get cropEnableInfoIndicator(){return this.$$.ctx[101]}set cropEnableInfoIndicator(t){this.$set({cropEnableInfoIndicator:t}),ar()}get cropEnableZoomTowardsWheelPosition(){return this.$$.ctx[102]}set cropEnableZoomTowardsWheelPosition(t){this.$set({cropEnableZoomTowardsWheelPosition:t}),ar()}get cropEnableLimitWheelInputToCropSelection(){return this.$$.ctx[103]}set cropEnableLimitWheelInputToCropSelection(t){this.$set({cropEnableLimitWheelInputToCropSelection:t}),ar()}get cropEnableCenterImageSelection(){return this.$$.ctx[104]}set cropEnableCenterImageSelection(t){this.$set({cropEnableCenterImageSelection:t}),ar()}get cropEnableButtonRotateLeft(){return this.$$.ctx[105]}set cropEnableButtonRotateLeft(t){this.$set({cropEnableButtonRotateLeft:t}),ar()}get cropEnableButtonRotateRight(){return this.$$.ctx[106]}set cropEnableButtonRotateRight(t){this.$set({cropEnableButtonRotateRight:t}),ar()}get cropEnableButtonFlipHorizontal(){return this.$$.ctx[107]}set cropEnableButtonFlipHorizontal(t){this.$set({cropEnableButtonFlipHorizontal:t}),ar()}get cropEnableButtonFlipVertical(){return this.$$.ctx[108]}set cropEnableButtonFlipVertical(t){this.$set({cropEnableButtonFlipVertical:t}),ar()}get cropSelectPresetOptions(){return this.$$.ctx[109]}set cropSelectPresetOptions(t){this.$set({cropSelectPresetOptions:t}),ar()}get cropEnableSelectPreset(){return this.$$.ctx[110]}set cropEnableSelectPreset(t){this.$set({cropEnableSelectPreset:t}),ar()}get cropEnableFilterMatchAspectRatio(){return this.$$.ctx[111]}set cropEnableFilterMatchAspectRatio(t){this.$set({cropEnableFilterMatchAspectRatio:t}),ar()}get cropSelectPresetFilter(){return this.$$.ctx[90]}set cropSelectPresetFilter(t){this.$set({cropSelectPresetFilter:t}),ar()}get cropEnableButtonToggleCropLimit(){return this.$$.ctx[112]}set cropEnableButtonToggleCropLimit(t){this.$set({cropEnableButtonToggleCropLimit:t}),ar()}get cropWillRenderTools(){return this.$$.ctx[113]}set cropWillRenderTools(t){this.$set({cropWillRenderTools:t}),ar()}get cropActiveTransformTool(){return this.$$.ctx[114]}set cropActiveTransformTool(t){this.$set({cropActiveTransformTool:t}),ar()}get cropMinimizeToolbar(){return this.$$.ctx[115]}set cropMinimizeToolbar(t){this.$set({cropMinimizeToolbar:t}),ar()}get locale(){return this.$$.ctx[3]}set locale(t){this.$set({locale:t}),ar()}}]};function uf(t){let e,i,n,o,r,s,a,l=t[68],c=(P(t[68].label)?t[68].label(t[2]):t[68].label)+"";function h(...e){return t[48](t[68],...e)}const u=()=>t[49](i,l),d=()=>t[49](null,l);return{c(){e=wo("div"),i=wo("div"),n=So(),o=wo("span"),r=ko(c),Eo(i,"class",mf),Eo(e,"slot","option"),Eo(e,"class","PinturaFilterOption")},m(t,l){xo(t,e,l),bo(e,i),u(),bo(e,n),bo(e,o),bo(o,r),s||(a=[To(i,"measure",h),uo(ha.call(null,i))],s=!0)},p(e,i){l!==(t=e)[68]&&(d(),l=t[68],u()),4&i[0]|64&i[2]&&c!==(c=(P(t[68].label)?t[68].label(t[2]):t[68].label)+"")&&Ao(r,c)},d(t){t&&$o(e),d(),s=!1,Jn(a)}}}function df(t){let e,i;return e=new Qc({props:{locale:t[2],layout:"row",options:t[3],selectedIndex:t[10],onchange:t[29],$$slots:{option:[uf,({option:t})=>({68:t}),({option:t})=>[0,0,t?64:0]]},$$scope:{ctx:t}}}),{c(){Cr(e.$$.fragment)},m(t,n){Tr(e,t,n),i=!0},p(t,i){const n={};4&i[0]&&(n.locale=t[2]),8&i[0]&&(n.options=t[3]),1024&i[0]&&(n.selectedIndex=t[10]),516&i[0]|192&i[2]&&(n.$$scope={dirty:i,ctx:t}),e.$set(n)},i(t){i||(mr(e.$$.fragment,t),i=!0)},o(t){gr(e.$$.fragment,t),i=!1},d(t){Mr(e,t)}}}function pf(t){let e,i,n,o,r,s,a,l;function c(e){t[51](e)}function h(e){t[52](e)}function u(e){t[53](e)}let d={elasticity:t[15]*t[16],onscroll:t[50],$$slots:{default:[df]},$$scope:{ctx:t}};return void 0!==t[4]&&(d.maskFeatherStartOpacity=t[4]),void 0!==t[5]&&(d.maskFeatherEndOpacity=t[5]),void 0!==t[6]&&(d.maskFeatherSize=t[6]),i=new Nl({props:d}),Zo.push((()=>Sr(i,"maskFeatherStartOpacity",c))),Zo.push((()=>Sr(i,"maskFeatherEndOpacity",h))),Zo.push((()=>Sr(i,"maskFeatherSize",u))),i.$on("measure",t[54]),{c(){e=wo("div"),Cr(i.$$.fragment),Eo(e,"slot","footer"),Eo(e,"style",t[11])},m(n,o){xo(n,e,o),Tr(i,e,null),s=!0,a||(l=To(e,"transitionend",t[27]),a=!0)},p(t,a){const l={};128&a[0]&&(l.onscroll=t[50]),1548&a[0]|128&a[2]&&(l.$$scope={dirty:a,ctx:t}),!n&&16&a[0]&&(n=!0,l.maskFeatherStartOpacity=t[4],or((()=>n=!1))),!o&&32&a[0]&&(o=!0,l.maskFeatherEndOpacity=t[5],or((()=>o=!1))),!r&&64&a[0]&&(r=!0,l.maskFeatherSize=t[6],or((()=>r=!1))),i.$set(l),(!s||2048&a[0])&&Eo(e,"style",t[11])},i(t){s||(mr(i.$$.fragment,t),s=!0)},o(t){gr(i.$$.fragment,t),s=!1},d(t){t&&$o(e),Mr(i),a=!1,l()}}}function ff(t){let e,i;return e=new np({props:{$$slots:{footer:[pf]},$$scope:{ctx:t}}}),e.$on("measure",t[55]),{c(){Cr(e.$$.fragment)},m(t,n){Tr(e,t,n),i=!0},p(t,i){const n={};4092&i[0]|128&i[2]&&(n.$$scope={dirty:i,ctx:t}),e.$set(n)},i(t){i||(mr(e.$$.fragment,t),i=!0)},o(t){gr(e.$$.fragment,t),i=!1},d(t){Mr(e,t)}}}let mf="PinturaFilterPreview";function gf(t,e,i){let n,o,r,s,a,l,c,h,u,d,p,f,m,g,y,v,b,x,$=Xn,w=()=>($(),$=io(S,(t=>i(40,u=t))),S),_=Xn,k=()=>(_(),_=io(C,(t=>i(45,v=t))),C);t.$$.on_destroy.push((()=>$())),t.$$.on_destroy.push((()=>_()));let{isActive:S}=e;w();let{isActiveFraction:C}=e;k();let{stores:T}=e,{locale:M}=e,{filterFunctions:E}=e,{filterOptions:I}=e;const{history:A,interfaceImages:D,stageRect:R,utilRect:L,animation:O,elasticityMultiplier:z,scrollElasticity:F,imageSize:B,imagePreview:N,imageCropRect:H,imageRotation:W,imageFlipX:j,imageFlipY:Y,imageBackgroundColor:V,imageGamma:U,imageColorMatrix:q}=T;oo(t,R,(t=>i(42,p=t))),oo(t,L,(t=>i(41,d=t))),oo(t,O,(t=>i(39,h=t))),oo(t,B,(t=>i(57,g=t))),oo(t,N,(t=>i(44,m=t))),oo(t,V,(t=>i(58,y=t))),oo(t,U,(t=>i(43,f=t))),oo(t,q,(t=>i(36,s=t)));const X=Dr({});oo(t,X,(t=>i(37,a=t)));const G=(t,e)=>ho(X,a[t.value]=e,a),Z=Rr(X,(t=>{if(!t[void 0])return;const e=t[void 0];return l&&Ct(l,e)?l:xt(e)}));oo(t,Z,(t=>i(56,l=t)));const K=Rr([S,Z,H,B,W,j,Y],(([t,e,i,n,o,r,s],a)=>{if(!t||!e||!n)return c;const l=Bt(n),h=Vt(l),u=Kr(n,i,o),d=Vt(u),p=ht(et(h),d),f=it(et(p)),m=Math.max(e.width/i.width,e.height/i.height);a({origin:f,translation:p,rotation:{x:s?Math.PI:0,y:r?Math.PI:0,z:o},scale:m})}));oo(t,K,(t=>i(38,c=t)));const J=Qs(h?20:0);let tt;oo(t,J,(t=>i(46,b=t)));const nt={};let ot,rt,st,at,lt,ct={x:0,y:0};const ut=Dr([]);oo(t,ut,(t=>i(47,x=t)));const dt=t=>{const e={...t,data:m,size:g,offset:{...t.offset},mask:{...t.mask},backgroundColor:y};return e.opacity=v,e.offset.y+=b,e.mask.y+=b,e};return Yo((()=>{D.set([])})),t.$$set=t=>{"isActive"in t&&w(i(0,S=t.isActive)),"isActiveFraction"in t&&k(i(1,C=t.isActiveFraction)),"stores"in t&&i(31,T=t.stores),"locale"in t&&i(2,M=t.locale),"filterFunctions"in t&&i(32,E=t.filterFunctions),"filterOptions"in t&&i(3,I=t.filterOptions)},t.$$.update=()=>{if(8&t.$$.dirty[0]&&i(35,n=wc(I)),48&t.$$.dirty[1]&&i(10,o=((t,e)=>{if(!t||!t.filter||!e)return 0;const i=t.filter;return e.findIndex((([t])=>{if(!E[t])return!1;const e=E[t]();return is(e,i)}))})(s,n)),768&t.$$.dirty[1]&&h&&J.set(u?0:20),3584&t.$$.dirty[1]&&u&&d&&p){const t=p.y+p.height+d.y;i(34,lt={x:p.x-d.x,y:t})}if(496&t.$$.dirty[0]|4350&t.$$.dirty[1]&&c&&lt&&ct&&at&&tt){const t=lt.x+at.x+ct.x,e=lt.y,i=at.x+lt.x,o=i+at.width;ut.set(n.map((([n],r)=>{const l=a[n],h=ct.x+l.x,u=h+l.width;if(u<0||h>at.width)return!1;const d=t+l.x,p=e+l.y,m=(t=>({origin:et(t.origin),translation:et(t.translation),rotation:{...t.rotation},scale:t.scale}))(c);m.offset=Q(.5*l.width+d,.5*l.height+p),m.maskOpacity=1,m.mask=Yt(d+0,p,l.width+0,l.height),m.maskFeather=[1,0,1,0,1,o,1,o],h<st&&ot<1&&(m.maskFeather[0]=ot,m.maskFeather[1]=i,m.maskFeather[2]=1,m.maskFeather[3]=i+st),u>at.width-st&&rt<1&&(m.maskFeather[4]=rt,m.maskFeather[5]=o-st,m.maskFeather[6]=1,m.maskFeather[7]=o),m.maskCornerRadius=tt[n];let g=s&&Object.keys(s).filter((t=>"filter"!=t)).map((t=>s[t]))||[];return P(E[n])&&g.push(E[n]()),m.colorMatrix=g.length?Un(g):void 0,m.gamma=f,m})).filter(Boolean))}122880&t.$$.dirty[1]&&(v>0&&x?D.set(x.map(dt)):D.set([])),32768&t.$$.dirty[1]&&i(11,r=b?`transform: translateY(${b}px)`:void 0)},[S,C,M,I,ot,rt,st,ct,at,nt,o,r,R,L,O,z,F,B,N,V,U,q,X,G,Z,K,J,t=>{t.target.className===mf&&i(33,tt=Object.keys(nt).reduce(((t,e)=>{const i=nt[e],n=getComputedStyle(i),o=["top-left","top-right","bottom-left","bottom-right"].map((t=>n.getPropertyValue(`border-${t}-radius`))).map(Ll).map((t=>1.25*t));return t[e]=o,t}),{}))},ut,({value:t})=>{ho(q,s={...s,filter:P(E[t])?E[t]():void 0},s),A.write()},"filter",T,E,tt,lt,n,s,a,c,h,u,d,p,f,m,v,b,x,(t,e)=>G(t,e.detail),function(t,e){Zo[t?"unshift":"push"]((()=>{nt[e.value]=t,i(9,nt)}))},t=>i(7,ct=t),function(t){ot=t,i(4,ot)},function(t){rt=t,i(5,rt)},function(t){st=t,i(6,st)},t=>i(8,at=t.detail),function(e){Xo(t,e)}]}var yf={util:["filter",class extends Er{constructor(t){super(),Pr(this,t,gf,ff,eo,{name:30,isActive:0,isActiveFraction:1,stores:31,locale:2,filterFunctions:32,filterOptions:3},[-1,-1,-1])}get name(){return this.$$.ctx[30]}get isActive(){return this.$$.ctx[0]}set isActive(t){this.$set({isActive:t}),ar()}get isActiveFraction(){return this.$$.ctx[1]}set isActiveFraction(t){this.$set({isActiveFraction:t}),ar()}get stores(){return this.$$.ctx[31]}set stores(t){this.$set({stores:t}),ar()}get locale(){return this.$$.ctx[2]}set locale(t){this.$set({locale:t}),ar()}get filterFunctions(){return this.$$.ctx[32]}set filterFunctions(t){this.$set({filterFunctions:t}),ar()}get filterOptions(){return this.$$.ctx[3]}set filterOptions(t){this.$set({filterOptions:t}),ar()}}]};function vf(t){let e,i,n=t[37].label+"";return{c(){e=wo("span"),i=ko(n)},m(t,n){xo(t,e,n),bo(e,i)},p(t,e){64&e[1]&&n!==(n=t[37].label+"")&&Ao(i,n)},d(t){t&&$o(e)}}}function bf(t){let e,i;const n=[{class:"PinturaControlList"},{tabs:t[1]},t[3]];let o={$$slots:{default:[vf,({tab:t})=>({37:t}),({tab:t})=>[0,t?64:0]]},$$scope:{ctx:t}};for(let t=0;t<n.length;t+=1)o=Zn(o,n[t]);return e=new nl({props:o}),e.$on("select",t[22]),{c(){Cr(e.$$.fragment)},m(t,n){Tr(e,t,n),i=!0},p(t,i){const o=10&i[0]?_r(n,[n[0],2&i[0]&&{tabs:t[1]},8&i[0]&&kr(t[3])]):{};192&i[1]&&(o.$$scope={dirty:i,ctx:t}),e.$set(o)},i(t){i||(mr(e.$$.fragment,t),i=!0)},o(t){gr(e.$$.fragment,t),i=!1},d(t){Mr(e,t)}}}function xf(t){let e,i;const n=[t[5][t[36]]];let o={};for(let t=0;t<n.length;t+=1)o=Zn(o,n[t]);return e=new ap({props:o}),{c(){Cr(e.$$.fragment)},m(t,n){Tr(e,t,n),i=!0},p(t,i){const o=32&i[0]|32&i[1]?_r(n,[kr(t[5][t[36]])]):{};e.$set(o)},i(t){i||(mr(e.$$.fragment,t),i=!0)},o(t){gr(e.$$.fragment,t),i=!1},d(t){Mr(e,t)}}}function $f(t){let e,i,n,o,r;i=new Nl({props:{elasticity:t[9]*t[8],class:"PinturaControlListScroller",$$slots:{default:[bf]},$$scope:{ctx:t}}});const s=[{class:"PinturaControlPanels"},{panelClass:"PinturaControlPanel"},{panels:t[4]},t[3]];let a={$$slots:{default:[xf,({panel:t})=>({36:t}),({panel:t})=>[0,t?32:0]]},$$scope:{ctx:t}};for(let t=0;t<s.length;t+=1)a=Zn(a,s[t]);return o=new ml({props:a}),{c(){e=wo("div"),Cr(i.$$.fragment),n=So(),Cr(o.$$.fragment),Eo(e,"slot","footer"),Eo(e,"style",t[6])},m(t,s){xo(t,e,s),Tr(i,e,null),bo(e,n),Tr(o,e,null),r=!0},p(t,n){const a={};14&n[0]|128&n[1]&&(a.$$scope={dirty:n,ctx:t}),i.$set(a);const l=24&n[0]?_r(s,[s[0],s[1],16&n[0]&&{panels:t[4]},8&n[0]&&kr(t[3])]):{};32&n[0]|160&n[1]&&(l.$$scope={dirty:n,ctx:t}),o.$set(l),(!r||64&n[0])&&Eo(e,"style",t[6])},i(t){r||(mr(i.$$.fragment,t),mr(o.$$.fragment,t),r=!0)},o(t){gr(i.$$.fragment,t),gr(o.$$.fragment,t),r=!1},d(t){t&&$o(e),Mr(i),Mr(o)}}}function wf(t){let e,i;return e=new np({props:{$$slots:{footer:[$f]},$$scope:{ctx:t}}}),e.$on("measure",t[23]),{c(){Cr(e.$$.fragment)},m(t,n){Tr(e,t,n),i=!0},p(t,i){const n={};126&i[0]|128&i[1]&&(n.$$scope={dirty:i,ctx:t}),e.$set(n)},i(t){i||(mr(e.$$.fragment,t),i=!0)},o(t){gr(e.$$.fragment,t),i=!1},d(t){Mr(e,t)}}}function _f(t,e,i){let n,o,r,s,a,l,c,h,u,d,p=Xn,f=()=>(p(),p=io(g,(t=>i(20,u=t))),g);t.$$.on_destroy.push((()=>p()));let{stores:m}=e,{isActive:g}=e;f();let{locale:y={}}=e,{finetuneControlConfiguration:v}=e,{finetuneOptions:b}=e;const{history:x,animation:$,scrollElasticity:w,elasticityMultiplier:_,rangeInputElasticity:k,imageColorMatrix:S,imageConvolutionMatrix:C,imageGamma:T,imageVignette:M,imageNoise:E}=m;oo(t,$,(t=>i(19,h=t)));const I={imageColorMatrix:S,imageConvolutionMatrix:C,imageGamma:T,imageVignette:M,imageNoise:E},D="finetune-"+A(),R=Dr({});oo(t,R,(t=>i(18,c=t)));const L=Dr({});oo(t,L,(t=>i(5,l=t)));let O=[];const z=Qs(h?20:0);return oo(t,z,(t=>i(21,d=t))),t.$$set=t=>{"stores"in t&&i(14,m=t.stores),"isActive"in t&&f(i(0,g=t.isActive)),"locale"in t&&i(15,y=t.locale),"finetuneControlConfiguration"in t&&i(16,v=t.finetuneControlConfiguration),"finetuneOptions"in t&&i(17,b=t.finetuneOptions)},t.$$.update=()=>{var e;163840&t.$$.dirty[0]&&i(1,n=b?b.map((([t,e])=>({id:t,label:P(e)?e(y):e}))):[]),2&t.$$.dirty[0]&&i(2,o=n.length&&n[0].id),4&t.$$.dirty[0]&&i(3,r={name:D,selected:o}),2&t.$$.dirty[0]&&i(4,s=n.map((t=>t.id))),65536&t.$$.dirty[0]&&v&&(e=v,O&&O.forEach((t=>t())),O=s.map((t=>{const{getStore:i,getValue:n=Y}=e[t];return i(I).subscribe((e=>{const i=null!=e?n(e):e;ho(R,c={...c,[t]:i},c)}))}))),327680&t.$$.dirty[0]&&v&&c&&ho(L,l=Object.keys(c).reduce(((t,e)=>{const{base:i,min:n,max:o,getLabel:r,getStore:s,setValue:a=((t,e)=>t.set(e))}=v[e],l=s(I),h=null!=c[e]?c[e]:i;return t[e]={base:i,min:n,max:o,value:h,valueLabel:r?r(h,n,o,o-n):Math.round(100*h),oninputmove:t=>{a(l,t)},oninputend:t=>{a(l,t),x.write()},elasticity:_*k,labelReset:y.labelReset},t}),{}),l),1572864&t.$$.dirty[0]&&h&&z.set(u?0:20),2097152&t.$$.dirty[0]&&i(6,a=d?`transform: translateY(${d}px)`:void 0)},[g,n,o,r,s,l,a,$,w,_,R,L,z,"finetune",m,y,v,b,c,h,u,d,({detail:t})=>i(2,o=t),function(e){Xo(t,e)}]}var kf={util:["finetune",class extends Er{constructor(t){super(),Pr(this,t,_f,wf,eo,{name:13,stores:14,isActive:0,locale:15,finetuneControlConfiguration:16,finetuneOptions:17},[-1,-1])}get name(){return this.$$.ctx[13]}get stores(){return this.$$.ctx[14]}set stores(t){this.$set({stores:t}),ar()}get isActive(){return this.$$.ctx[0]}set isActive(t){this.$set({isActive:t}),ar()}get locale(){return this.$$.ctx[15]}set locale(t){this.$set({locale:t}),ar()}get finetuneControlConfiguration(){return this.$$.ctx[16]}set finetuneControlConfiguration(t){this.$set({finetuneControlConfiguration:t}),ar()}get finetuneOptions(){return this.$$.ctx[17]}set finetuneOptions(t){this.$set({finetuneOptions:t}),ar()}}]};function Sf(t,e,i){const n=t.slice();return n[47]=e[i].key,n[48]=e[i].index,n[49]=e[i].translate,n[50]=e[i].scale,n[14]=e[i].rotate,n[51]=e[i].dir,n[52]=e[i].center,n[53]=e[i].type,n}function Cf(t){let e,i;return{c(){e=wo("div"),Eo(e,"class","PinturaShapeManipulator"),Eo(e,"data-control","point"),Eo(e,"style",i=`pointer-events:none;transform: translate3d(${t[52].x}px, ${t[52].y}px, 0) scale(${t[5]}, ${t[5]}); opacity: ${t[6]}`)},m(t,i){xo(t,e,i)},p(t,n){104&n[0]&&i!==(i=`pointer-events:none;transform: translate3d(${t[52].x}px, ${t[52].y}px, 0) scale(${t[5]}, ${t[5]}); opacity: ${t[6]}`)&&Eo(e,"style",i)},d(t){t&&$o(e)}}}function Tf(t,e){let i,n,o,r,s,a,l,c,h;function u(...t){return e[18](e[48],...t)}let d="edge"===e[53]&&"both"!==e[2]&&Cf(e);return{key:t,first:null,c(){i=wo("div"),a=So(),d&&d.c(),l=Co(),Eo(i,"role","button"),Eo(i,"aria-label",n=`Drag ${e[53]} ${e[47]}`),Eo(i,"tabindex",o="edge"===e[53]?-1:0),Eo(i,"class","PinturaShapeManipulator"),Eo(i,"data-control",r=e[53]),Eo(i,"style",s=`cursor: ${e[51]?e[51]+"-resize":"move"}; transform: translate3d(${e[49].x}px, ${e[49].y}px, 0)${"edge"===e[53]?` rotate(${e[14]}rad)`:""} scale(${"point"===e[53]?e[5]:e[50].x}, ${"point"===e[53]?e[5]:e[50].y}); opacity: ${e[6]}`),this.first=i},m(t,n){xo(t,i,n),xo(t,a,n),d&&d.m(t,n),xo(t,l,n),c||(h=[To(i,"keydown",e[7]),To(i,"keyup",e[8]),To(i,"nudge",u),uo(Al.call(null,i)),To(i,"interactionstart",(function(){to(e[11]("start",e[48]))&&e[11]("start",e[48]).apply(this,arguments)})),To(i,"interactionupdate",(function(){to(e[11]("move",e[48]))&&e[11]("move",e[48]).apply(this,arguments)})),To(i,"interactionend",(function(){to(e[11]("end",e[48]))&&e[11]("end",e[48]).apply(this,arguments)})),uo(Il.call(null,i))],c=!0)},p(t,a){e=t,8&a[0]&&n!==(n=`Drag ${e[53]} ${e[47]}`)&&Eo(i,"aria-label",n),8&a[0]&&o!==(o="edge"===e[53]?-1:0)&&Eo(i,"tabindex",o),8&a[0]&&r!==(r=e[53])&&Eo(i,"data-control",r),104&a[0]&&s!==(s=`cursor: ${e[51]?e[51]+"-resize":"move"}; transform: translate3d(${e[49].x}px, ${e[49].y}px, 0)${"edge"===e[53]?` rotate(${e[14]}rad)`:""} scale(${"point"===e[53]?e[5]:e[50].x}, ${"point"===e[53]?e[5]:e[50].y}); opacity: ${e[6]}`)&&Eo(i,"style",s),"edge"===e[53]&&"both"!==e[2]?d?d.p(e,a):(d=Cf(e),d.c(),d.m(l.parentNode,l)):d&&(d.d(1),d=null)},d(t){t&&$o(i),t&&$o(a),d&&d.d(t),t&&$o(l),c=!1,Jn(h)}}}function Mf(t){let e,i,n,o;return{c(){e=wo("div"),Eo(e,"role","button"),Eo(e,"aria-label","Drag rotator"),Eo(e,"tabindex","0"),Eo(e,"class","PinturaShapeManipulator"),Eo(e,"data-control","rotate"),Eo(e,"style",i=`transform: translate3d(${t[0].x}px, ${t[0].y}px, 0) scale(${t[5]}, ${t[5]}); opacity: ${t[6]}`)},m(i,r){xo(i,e,r),n||(o=[To(e,"keydown",t[7]),To(e,"keyup",t[8]),To(e,"nudge",t[13]),uo(Al.call(null,e)),To(e,"interactionstart",t[14]("start")),To(e,"interactionupdate",t[14]("move")),To(e,"interactionend",t[14]("end")),uo(Il.call(null,e))],n=!0)},p(t,n){97&n[0]&&i!==(i=`transform: translate3d(${t[0].x}px, ${t[0].y}px, 0) scale(${t[5]}, ${t[5]}); opacity: ${t[6]}`)&&Eo(e,"style",i)},d(t){t&&$o(e),n=!1,Jn(o)}}}function Pf(t){let e,i,n=[],o=new Map,r=t[3];const s=t=>t[47];for(let e=0;e<r.length;e+=1){let i=Sf(t,r,e),a=s(i);o.set(a,n[e]=Tf(a,i))}let a=t[1]&&t[4]&&Mf(t);return{c(){for(let t=0;t<n.length;t+=1)n[t].c();e=So(),a&&a.c(),i=Co()},m(t,o){for(let e=0;e<n.length;e+=1)n[e].m(t,o);xo(t,e,o),a&&a.m(t,o),xo(t,i,o)},p(t,l){6636&l[0]&&(r=t[3],n=wr(n,l,s,1,t,r,o,e.parentNode,xr,Tf,e,Sf)),t[1]&&t[4]?a?a.p(t,l):(a=Mf(t),a.c(),a.m(i.parentNode,i)):a&&(a.d(1),a=null)},i:Xn,o:Xn,d(t){for(let e=0;e<n.length;e+=1)n[e].d(t);t&&$o(e),a&&a.d(t),t&&$o(i)}}}function Ef(t,i,n){let o,r,s,a,l;const c=Vo(),h=.5*q,u=U-h,d=U+h,p=-U,f=p-h,m=p+h,g=V-h,y=-V+h,v=h,b=-h,x=U-q,$=x-h,w=x+h,_=V-q,k=_-h,S=_+h,C=p-q,T=C+h,M=C-h,P=p+q,E=P+h,I=P-h;let{points:A=[]}=i,{rotatorPoint:D}=i,{visible:R=!1}=i,{enableResizing:L=!0}=i,{enableRotating:O=!0}=i,z=!1;const F=Qs(.5,{precision:1e-4,stiffness:.3,damping:.7});oo(t,F,(t=>n(5,a=t)));const B=Qs(0,{precision:.001,stiffness:.3,damping:.7});oo(t,B,(t=>n(6,l=t)));const N=t=>{let e="";return(t<=d&&t>=u||t>=f&&t<=m)&&(e="ns"),(t<=y||t>=g||t>=b&&t<=v)&&(e="ew"),(t>=k&&t<=S||t<=E&&t>=I)&&(e="nesw"),(t>=$&&t<=w||t<=T&&t>=M)&&(e="nwse"),e},H=(t,e)=>{c("resizestart",{indexes:t,translation:K()}),c("resizemove",{indexes:t,translation:e}),c("resizeend",{indexes:t,translation:K()})};return t.$$set=t=>{"points"in t&&n(15,A=t.points),"rotatorPoint"in t&&n(0,D=t.rotatorPoint),"visible"in t&&n(16,R=t.visible),"enableResizing"in t&&n(17,L=t.enableResizing),"enableRotating"in t&&n(1,O=t.enableRotating)},t.$$.update=()=>{65536&t.$$.dirty[0]&&F.set(R?1:.5),65536&t.$$.dirty[0]&&B.set(R?1:0),131072&t.$$.dirty[0]&&n(2,o=!!L&&(e(L)?L:"both")),32772&t.$$.dirty[0]&&n(3,r=o&&((t,e)=>{let i=0;const n=gt(t),o=[],r=t.length,s=2===r,a="both"!==e;for(;i<r;i++){const l=t[i-1]||t[t.length-1],c=t[i],h=t[i+1]||t[0],u=Math.atan2(h.y-c.y,h.x-c.x);if(!a){const t=rt(Q(l.x-c.x,l.y-c.y)),e=rt(Q(h.x-c.x,h.y-c.y)),n=Q(t.x+e.x,t.y+e.y);o.push({index:[i],key:"point-"+i,type:"point",scale:{x:1,y:1},translate:{x:c.x,y:c.y},angle:void 0,rotate:s?0:u,center:c,dir:s?void 0:N(Math.atan2(n.y,n.x))})}if(s)continue;const d=Q(c.x+.5*(h.x-c.x),c.y+.5*(h.y-c.y));"horizontal"===e&&i%2==0||"vertical"===e&&i%2!=0||o.push({index:[i,i+1===r?0:i+1],key:"edge-"+i,type:"edge",scale:{x:ft(c,h),y:1},translate:{x:c.x,y:c.y},angle:u,rotate:u,center:d,dir:N(Math.atan2(n.y-d.y,n.x-d.x))})}return o})(A,o)||[]),32768&t.$$.dirty[0]&&n(4,s=A.length>2)},[D,O,o,r,s,a,l,t=>z=t.shiftKey,t=>z=!1,F,B,(t,e)=>({detail:i})=>{const n=i&&i.translation?i.translation:Q(0,0);c("resize"+t,{...i,indexes:e,translation:n,shiftKey:z})},H,({detail:t})=>{c("rotatestart",{translation:K()}),c("rotatemove",{translation:t}),c("rotateend",{translation:K()})},t=>({detail:e})=>{const i=e&&e.translation?e.translation:Q(0,0);c("rotate"+t,{translation:i,shiftKey:z})},A,R,L,(t,{detail:e})=>H(t,e)]}class If extends Er{constructor(t){super(),Pr(this,t,Ef,Pf,eo,{points:15,rotatorPoint:0,visible:16,enableResizing:17,enableRotating:1},[-1,-1])}}var Af=(t,e)=>{const i=Tp(t);return ht(i,e)};let Df=null,Rf=null;var Lf=t=>{if(null===Rf&&(Rf=n()&&"visualViewport"in window),!Rf)return!1;const e=visualViewport.height,i=()=>{t(visualViewport.height<e?"visible":"hidden")};return visualViewport.addEventListener("resize",i),()=>visualViewport.removeEventListener("resize",i)};function Of(t){let e,i,n,o,r,s,a,l,c,h;n=new Pl({props:{onclick:t[1],label:t[5],icon:t[7],hideLabel:!t[6]}});const u=t[20].default,d=ro(u,t,t[19],null);return a=new Pl({props:{onclick:t[0],label:t[2],icon:t[4],hideLabel:!t[3],class:"PinturaInputFormButtonConfirm"}}),{c(){e=wo("div"),i=wo("div"),Cr(n.$$.fragment),o=So(),r=wo("div"),d&&d.c(),s=So(),Cr(a.$$.fragment),Eo(r,"class","PinturaInputFormFields"),Eo(i,"class","PinturaInputFormInner"),Eo(e,"class","PinturaInputForm"),Eo(e,"style",t[9])},m(u,p){xo(u,e,p),bo(e,i),Tr(n,i,null),bo(i,o),bo(i,r),d&&d.m(r,null),bo(i,s),Tr(a,i,null),t[21](e),l=!0,c||(h=[To(e,"focusin",t[10]),To(e,"focusout",t[11]),To(e,"measure",t[12]),uo(ha.call(null,e))],c=!0)},p(t,i){const o={};2&i[0]&&(o.onclick=t[1]),32&i[0]&&(o.label=t[5]),128&i[0]&&(o.icon=t[7]),64&i[0]&&(o.hideLabel=!t[6]),n.$set(o),d&&d.p&&524288&i[0]&&ao(d,u,t,t[19],i,null,null);const r={};1&i[0]&&(r.onclick=t[0]),4&i[0]&&(r.label=t[2]),16&i[0]&&(r.icon=t[4]),8&i[0]&&(r.hideLabel=!t[3]),a.$set(r),(!l||512&i[0])&&Eo(e,"style",t[9])},i(t){l||(mr(n.$$.fragment,t),mr(d,t),mr(a.$$.fragment,t),l=!0)},o(t){gr(n.$$.fragment,t),gr(d,t),gr(a.$$.fragment,t),l=!1},d(i){i&&$o(e),Mr(n),d&&d.d(i),Mr(a),t[21](null),c=!1,Jn(h)}}}function zf(t,e,i){let n,o,r,s,a,l,{$$slots:c={},$$scope:h}=e,{onconfirm:u}=e,{oncancel:d}=e,{autoFocus:p=!0}=e,{autoPositionCursor:f=!0}=e,{labelConfirm:m}=e,{labelConfirmShow:g=!0}=e,{iconConfirm:y}=e,{labelCancel:v}=e,{labelCancelShow:b=!1}=e,{iconCancel:x}=e,{panelOffset:$=K()}=e,w=!1,_="",k=0;const S=()=>{const t=s.querySelector("input, textarea");t.focus(),k>=1||t.select()},C=()=>{w=!0,M||!Oe()&&(null===Df&&(Df=Re(/Android/)),!Df)||i(16,_="top:1em;bottom:auto;"),Oe()&&(t=>{let e;t.addEventListener("touchstart",(t=>e=t.touches[0].screenY)),t.addEventListener("touchmove",(t=>{const i=t.touches[0].screenY,n=t.target;/textarea/i.test(n.nodeName)?(i>e?0==n.scrollTop&&t.preventDefault():i<e?n.scrollTop+n.offsetHeight==n.scrollHeight&&t.preventDefault():t.preventDefault(),e=i):t.preventDefault()}))})(s),i(17,k=1)};let T;const M=Lf((t=>{o?"hidden"!==t||w?(clearTimeout(l),l=void 0,i(16,_=`top:${visualViewport.height-a-$.y}px`),"visible"===t?(i(8,s.dataset.layout="stick",s),S(),C()):(w=!1,i(17,k=0))):S():i(16,_="top: 4.5em; bottom: auto")}));return Wo((()=>{p&&S()})),Yo((()=>{M&&M()})),t.$$set=t=>{"onconfirm"in t&&i(0,u=t.onconfirm),"oncancel"in t&&i(1,d=t.oncancel),"autoFocus"in t&&i(13,p=t.autoFocus),"autoPositionCursor"in t&&i(14,f=t.autoPositionCursor),"labelConfirm"in t&&i(2,m=t.labelConfirm),"labelConfirmShow"in t&&i(3,g=t.labelConfirmShow),"iconConfirm"in t&&i(4,y=t.iconConfirm),"labelCancel"in t&&i(5,v=t.labelCancel),"labelCancelShow"in t&&i(6,b=t.labelCancelShow),"iconCancel"in t&&i(7,x=t.iconCancel),"panelOffset"in t&&i(15,$=t.panelOffset),"$$scope"in t&&i(19,h=t.$$scope)},t.$$.update=()=>{256&t.$$.dirty[0]&&i(18,n=s&&getComputedStyle(s)),262144&t.$$.dirty[0]&&(o=n&&"1"===n.getPropertyValue("--editor-modal")),196608&t.$$.dirty[0]&&i(9,r=`opacity:${k};${_}`)},[u,d,m,g,y,v,b,x,s,r,t=>{var e;(t=>/textarea/i.test(t))(t.target)&&(T=Date.now(),f&&((e=t.target).selectionStart=e.selectionEnd=e.value.length),clearTimeout(l),l=setTimeout(C,200))},t=>{Date.now()-T>50||(t.stopPropagation(),S())},({detail:t})=>{a=t.height},p,f,$,_,k,n,h,c,function(t){Zo[t?"unshift":"push"]((()=>{s=t,i(8,s)}))}]}class Ff extends Er{constructor(t){super(),Pr(this,t,zf,Of,eo,{onconfirm:0,oncancel:1,autoFocus:13,autoPositionCursor:14,labelConfirm:2,labelConfirmShow:3,iconConfirm:4,labelCancel:5,labelCancelShow:6,iconCancel:7,panelOffset:15},[-1,-1])}}var Bf=t=>document.createTextNode(t);function Nf(t){let e,i,n,o;return{c(){e=wo("pre"),Eo(e,"class","PinturaContentEditable"),Eo(e,"data-wrap-content",i=t[3]?"wrap":"nowrap"),Eo(e,"contenteditable",""),Eo(e,"spellcheck",t[0]),Eo(e,"autocorrect",t[1]),Eo(e,"autocapitalize",t[2]),Eo(e,"style",t[4])},m(i,r){xo(i,e,r),t[20](e),n||(o=[To(e,"input",t[9]),To(e,"paste",t[10]),To(e,"keydown",t[7]),To(e,"keyup",t[8]),To(e,"blur",t[6])],n=!0)},p(t,n){8&n[0]&&i!==(i=t[3]?"wrap":"nowrap")&&Eo(e,"data-wrap-content",i),1&n[0]&&Eo(e,"spellcheck",t[0]),2&n[0]&&Eo(e,"autocorrect",t[1]),4&n[0]&&Eo(e,"autocapitalize",t[2]),16&n[0]&&Eo(e,"style",t[4])},i:Xn,o:Xn,d(i){i&&$o(e),t[20](null),n=!1,Jn(o)}}}function Hf(e,i,o){let r,{spellcheck:s="false"}=i,{autocorrect:a="off"}=i,{autocapitalize:l="off"}=i,{wrapLines:c=!0}=i,{textStyles:h=!1}=i,{formatInput:u=Y}=i,{formatPaste:d=Y}=i,{style:p}=i,{innerHTML:m}=i,{oninput:g=f}=i;const y=()=>{if(!b)return;const t=document.createRange();t.selectNodeContents(b);const e=window.getSelection();e.removeAllRanges(),e.addRange(t)},v=Vo();let b;n()&&document.execCommand("defaultParagraphSeparator",!1,"br");const x=t=>t.replace(/<\/?(?:i|b|em|strong)>/,""),$=()=>{o(11,m=b.innerHTML),v("input",m),g(m),requestAnimationFrame((()=>b&&b.scrollTo(0,0)))},w=()=>{S(b);const t=h?b.innerHTML:x(b.innerHTML);o(5,b.innerHTML=u(t),b),C(b),$()},_=e=>{const i=t("span");return i.dataset.bookmark=e,i},k=(t,e,i)=>{const n=_(i);if(t.nodeType===Node.TEXT_NODE){const o=t.textContent;if("start"===i){const i=Bf(o.substr(0,e)),r=Bf(o.substr(e));t.replaceWith(i,n,r)}else{const i=Bf(o.substr(0,e)),r=Bf(o.substr(e));t.replaceWith(i,n,r)}}else t.nodeType===Node.ELEMENT_NODE&&t.insertBefore(n,t.childNodes[e])},S=t=>{const e=window.getSelection();if(!e.getRangeAt||!e.rangeCount)return;const i=e.getRangeAt(0),{startOffset:n,endOffset:o,startContainer:r,endContainer:s}=i;if(t.contains(i.startContainer)&&t.contains(i.endContainer))if(r.nodeType===Node.TEXT_NODE&&r===s){const t=r.textContent,e=t.substr(0,n),i=_("start"),s=o-n>0?t.substr(n,o):"",a=_("end"),l=t.substr(o);r.replaceWith(e,i,s,a,l)}else k(r,n,"start"),k(s,o+(r===s?1:0),"end")},C=t=>{const e=T(t,"start"),i=T(t,"end");if(!e||!i)return;const n=document.createRange();n.setStart(e,0),n.setEnd(i,0);const o=window.getSelection();o.removeAllRanges(),o.addRange(n),e.remove(),i.remove()},T=(t,e)=>{const i=t.children;for(let t=0;t<i.length;t++){const n=i[t];if(n.dataset.bookmark===e)return n;if(n.children.length){const t=T(n,e);if(t)return t}}};return e.$$set=t=>{"spellcheck"in t&&o(0,s=t.spellcheck),"autocorrect"in t&&o(1,a=t.autocorrect),"autocapitalize"in t&&o(2,l=t.autocapitalize),"wrapLines"in t&&o(3,c=t.wrapLines),"textStyles"in t&&o(12,h=t.textStyles),"formatInput"in t&&o(13,u=t.formatInput),"formatPaste"in t&&o(14,d=t.formatPaste),"style"in t&&o(4,p=t.style),"innerHTML"in t&&o(11,m=t.innerHTML),"oninput"in t&&o(15,g=t.oninput)},e.$$.update=()=>{var t;32&e.$$.dirty[0]&&o(19,r=!!b),526336&e.$$.dirty[0]&&r&&m&&(t=m)!==b.innerHTML&&(o(5,b.innerHTML=t,b),b===document.activeElement&&y())},[s,a,l,c,p,b,()=>v("blur"),t=>{if(13!==t.keyCode)return;const e=(t=>{const e=window.getSelection().getRangeAt(0),i=e.cloneRange();return i.selectNodeContents(t),i.setEnd(e.endContainer,e.endOffset),i.toString().length})(b)===b.textContent.length?"<br><br>":"<br>";c&&document.execCommand("insertHTML",!1,e),t.preventDefault()},()=>{},t=>{const{inputType:e}=t;"insertCompositionText"!==e&&"deleteCompositionText"!==e&&w()},t=>{t.preventDefault();const e=t.clipboardData.getData("text/plain"),i=h?e:x(e),n=d(i);if(!n.length)return;const o=window.getSelection().getRangeAt(0);o.deleteContents(),o.insertNode(document.createTextNode(n)),$()},m,h,u,d,g,()=>w(),()=>{b&&b.focus()},y,r,function(t){Zo[t?"unshift":"push"]((()=>{b=t,o(5,b)}))}]}class Wf extends Er{constructor(t){super(),Pr(this,t,Hf,Nf,eo,{spellcheck:0,autocorrect:1,autocapitalize:2,wrapLines:3,textStyles:12,formatInput:13,formatPaste:14,style:4,innerHTML:11,oninput:15,confirm:16,focus:17,select:18},[-1,-1])}get spellcheck(){return this.$$.ctx[0]}set spellcheck(t){this.$set({spellcheck:t}),ar()}get autocorrect(){return this.$$.ctx[1]}set autocorrect(t){this.$set({autocorrect:t}),ar()}get autocapitalize(){return this.$$.ctx[2]}set autocapitalize(t){this.$set({autocapitalize:t}),ar()}get wrapLines(){return this.$$.ctx[3]}set wrapLines(t){this.$set({wrapLines:t}),ar()}get textStyles(){return this.$$.ctx[12]}set textStyles(t){this.$set({textStyles:t}),ar()}get formatInput(){return this.$$.ctx[13]}set formatInput(t){this.$set({formatInput:t}),ar()}get formatPaste(){return this.$$.ctx[14]}set formatPaste(t){this.$set({formatPaste:t}),ar()}get style(){return this.$$.ctx[4]}set style(t){this.$set({style:t}),ar()}get innerHTML(){return this.$$.ctx[11]}set innerHTML(t){this.$set({innerHTML:t}),ar()}get oninput(){return this.$$.ctx[15]}set oninput(t){this.$set({oninput:t}),ar()}get confirm(){return this.$$.ctx[16]}get focus(){return this.$$.ctx[17]}get select(){return this.$$.ctx[18]}}function jf(t,e,i){const n=t.slice();return n[202]=e[i],n[204]=i,n}function Yf(t,e){let i,n,o,r,s,a,l,c,h,u,d,p=e[202].name+"";function f(...t){return e[136](e[204],...t)}return o=new Vu({props:{color:e[202].color}}),{key:t,first:null,c(){i=wo("li"),n=wo("button"),Cr(o.$$.fragment),r=So(),s=wo("span"),a=ko(p),c=So(),Eo(n,"class","PinturaShapeListItem"),Eo(n,"type","button"),Eo(n,"aria-label",l="Select shape "+e[202].name),this.first=i},m(t,e){xo(t,i,e),bo(i,n),Tr(o,n,null),bo(n,r),bo(n,s),bo(s,a),bo(i,c),h=!0,u||(d=To(n,"click",f),u=!0)},p(t,i){e=t;const r={};8388608&i[0]&&(r.color=e[202].color),o.$set(r),(!h||8388608&i[0])&&p!==(p=e[202].name+"")&&Ao(a,p),(!h||8388608&i[0]&&l!==(l="Select shape "+e[202].name))&&Eo(n,"aria-label",l)},i(t){h||(mr(o.$$.fragment,t),h=!0)},o(t){gr(o.$$.fragment,t),h=!1},d(t){t&&$o(i),Mr(o),u=!1,d()}}}function Vf(t){let e,i;return e=new If({props:{visible:!0,points:t[12],rotatorPoint:t[17],enableResizing:t[16],enableRotating:t[10]}}),e.$on("resizestart",t[30]),e.$on("resizemove",t[31]),e.$on("resizeend",t[32]),e.$on("rotatestart",t[33]),e.$on("rotatemove",t[34]),e.$on("rotateend",t[35]),{c(){Cr(e.$$.fragment)},m(t,n){Tr(e,t,n),i=!0},p(t,i){const n={};4096&i[0]&&(n.points=t[12]),131072&i[0]&&(n.rotatorPoint=t[17]),65536&i[0]&&(n.enableResizing=t[16]),1024&i[0]&&(n.enableRotating=t[10]),e.$set(n)},i(t){i||(mr(e.$$.fragment,t),i=!0)},o(t){gr(e.$$.fragment,t),i=!1},d(t){Mr(e,t)}}}function Uf(t){let e,i,n,o;const r=[Xf,qf],s=[];function a(t,e){return"modal"===t[4]?0:"inline"===t[4]?1:-1}return~(e=a(t))&&(i=s[e]=r[e](t)),{c(){i&&i.c(),n=Co()},m(t,i){~e&&s[e].m(t,i),xo(t,n,i),o=!0},p(t,o){let l=e;e=a(t),e===l?~e&&s[e].p(t,o):(i&&(pr(),gr(s[l],1,1,(()=>{s[l]=null})),fr()),~e?(i=s[e],i?i.p(t,o):(i=s[e]=r[e](t),i.c()),mr(i,1),i.m(n.parentNode,n)):i=null)},i(t){o||(mr(i),o=!0)},o(t){gr(i),o=!1},d(t){~e&&s[e].d(t),t&&$o(n)}}}function qf(t){let e,i,n,o={formatInput:t[37],wrapLines:!!t[9].width,style:t[19]};return i=new Wf({props:o}),t[139](i),i.$on("input",t[38]),i.$on("keyup",t[41]),{c(){e=wo("div"),Cr(i.$$.fragment),Eo(e,"class","PinturaInlineInput"),Eo(e,"style",t[20])},m(t,o){xo(t,e,o),Tr(i,e,null),n=!0},p(t,o){const r={};512&o[0]&&(r.wrapLines=!!t[9].width),524288&o[0]&&(r.style=t[19]),i.$set(r),(!n||1048576&o[0])&&Eo(e,"style",t[20])},i(t){n||(mr(i.$$.fragment,t),n=!0)},o(t){gr(i.$$.fragment,t),n=!1},d(n){n&&$o(e),t[139](null),Mr(i)}}}function Xf(t){let e,i;return e=new Ff({props:{panelOffset:t[2],onconfirm:t[42],oncancel:t[43],labelCancel:t[5].shapeLabelInputCancel,iconCancel:t[5].shapeIconInputCancel,labelConfirm:t[5].shapeLabelInputConfirm,iconConfirm:t[5].shapeIconInputConfirm,$$slots:{default:[Gf]},$$scope:{ctx:t}}}),{c(){Cr(e.$$.fragment)},m(t,n){Tr(e,t,n),i=!0},p(t,i){const n={};4&i[0]&&(n.panelOffset=t[2]),32&i[0]&&(n.labelCancel=t[5].shapeLabelInputCancel),32&i[0]&&(n.iconCancel=t[5].shapeIconInputCancel),32&i[0]&&(n.labelConfirm=t[5].shapeLabelInputConfirm),32&i[0]&&(n.iconConfirm=t[5].shapeIconInputConfirm),786560&i[0]|524288&i[6]&&(n.$$scope={dirty:i,ctx:t}),e.$set(n)},i(t){i||(mr(e.$$.fragment,t),i=!0)},o(t){gr(e.$$.fragment,t),i=!1},d(t){Mr(e,t)}}}function Gf(t){let e,i,n;return{c(){e=wo("textarea"),Eo(e,"spellcheck","false"),Eo(e,"autocorrect","off"),Eo(e,"autocapitalize","off"),Eo(e,"style",t[19])},m(o,r){xo(o,e,r),t[137](e),Do(e,t[18]),i||(n=[To(e,"keydown",t[40]),To(e,"keypress",t[39]),To(e,"keyup",t[41]),To(e,"input",t[38]),To(e,"input",t[138])],i=!0)},p(t,i){524288&i[0]&&Eo(e,"style",t[19]),262144&i[0]&&Do(e,t[18])},d(o){o&&$o(e),t[137](null),i=!1,Jn(n)}}}function Zf(t){let e,i,n,o,r;return i=new Nh({props:{items:t[22]}}),{c(){e=wo("div"),Cr(i.$$.fragment),Eo(e,"class","PinturaShapeControls"),Eo(e,"style",t[21])},m(s,a){xo(s,e,a),Tr(i,e,null),n=!0,o||(r=[To(e,"measure",t[140]),uo(ha.call(null,e))],o=!0)},p(t,o){const r={};4194304&o[0]&&(r.items=t[22]),i.$set(r),(!n||2097152&o[0])&&Eo(e,"style",t[21])},i(t){n||(mr(i.$$.fragment,t),n=!0)},o(t){gr(i.$$.fragment,t),n=!1},d(t){t&&$o(e),Mr(i),o=!1,Jn(r)}}}function Kf(t){let e,i,n,o,r,s,a,l,c,h,u=[],d=new Map,p=t[23];const m=t=>t[202].id;for(let e=0;e<p.length;e+=1){let i=jf(t,p,e),n=m(i);d.set(n,u[e]=Yf(n,i))}let g=t[11]&&Vf(t),y=t[13]&&Uf(t),v=t[14]>0&&Zf(t);return{c(){e=wo("div"),i=wo("nav"),n=wo("ul");for(let t=0;t<u.length;t+=1)u[t].c();o=So(),g&&g.c(),r=So(),y&&y.c(),s=So(),v&&v.c(),Eo(i,"class","PinturaShapeList"),Eo(i,"data-visible",t[15]),Eo(e,"class","PinturaShapeEditor"),Eo(e,"tabindex","0")},m(d,p){xo(d,e,p),bo(e,i),bo(i,n);for(let t=0;t<u.length;t+=1)u[t].m(n,null);bo(e,o),g&&g.m(e,null),bo(e,r),y&&y.m(e,null),bo(e,s),v&&v.m(e,null),l=!0,c||(h=[To(i,"focusin",t[46]),To(i,"focusout",t[47]),To(e,"keydown",(function(){to(t[1]?f:t[36])&&(t[1]?f:t[36]).apply(this,arguments)})),To(e,"nudge",(function(){to(t[1]?f:t[45])&&(t[1]?f:t[45]).apply(this,arguments)})),To(e,"measure",t[135]),To(e,"pointermove",(function(){to(t[1]?f:t[48])&&(t[1]?f:t[48]).apply(this,arguments)})),To(e,"interactionstart",(function(){to(t[1]?f:t[25])&&(t[1]?f:t[25]).apply(this,arguments)})),To(e,"interactionupdate",(function(){to(t[1]?f:t[27])&&(t[1]?f:t[27]).apply(this,arguments)})),To(e,"interactioncancel",(function(){to(t[1]?f:t[26])&&(t[1]?f:t[26]).apply(this,arguments)})),To(e,"interactionrelease",(function(){to(t[1]?f:t[28])&&(t[1]?f:t[28]).apply(this,arguments)})),To(e,"interactionend",(function(){to(t[1]?f:t[29])&&(t[1]?f:t[29]).apply(this,arguments)})),uo(ha.call(null,e)),uo(Al.call(null,e)),uo(a=Il.call(null,e,{drag:!0,inertia:!0,multiTouch:!1,shouldStartInteraction:Jf,getEventPosition:t[141]}))],c=!0)},p(o,c){t=o,8388673&c[0]&&(p=t[23],pr(),u=wr(u,c,m,1,t,p,d,n,$r,Yf,null,jf),fr()),(!l||32768&c[0])&&Eo(i,"data-visible",t[15]),t[11]?g?(g.p(t,c),2048&c[0]&&mr(g,1)):(g=Vf(t),g.c(),mr(g,1),g.m(e,r)):g&&(pr(),gr(g,1,1,(()=>{g=null})),fr()),t[13]?y?(y.p(t,c),8192&c[0]&&mr(y,1)):(y=Uf(t),y.c(),mr(y,1),y.m(e,s)):y&&(pr(),gr(y,1,1,(()=>{y=null})),fr()),t[14]>0?v?(v.p(t,c),16384&c[0]&&mr(v,1)):(v=Zf(t),v.c(),mr(v,1),v.m(e,null)):v&&(pr(),gr(v,1,1,(()=>{v=null})),fr()),a&&to(a.update)&&8&c[0]&&a.update.call(null,{drag:!0,inertia:!0,multiTouch:!1,shouldStartInteraction:Jf,getEventPosition:t[141]})},i(t){if(!l){for(let t=0;t<p.length;t+=1)mr(u[t]);mr(g),mr(y),mr(v),l=!0}},o(t){for(let t=0;t<u.length;t+=1)gr(u[t]);gr(g),gr(y),gr(v),l=!1},d(t){t&&$o(e);for(let t=0;t<u.length;t+=1)u[t].d();g&&g.d(),y&&y.d(),v&&v.d(),c=!1,Jn(h)}}}const Qf="markup-hover",Jf=(t,e)=>t.target===e;function tm(t,i,n){let o,r,s,a,l,c,h,u,d,p,m,g,y,v,b,x,$,w,_,k,S,C,T,M,P,E,I,D,R,L,O,z,F,B,N,H,W,j,{uid:V=A()}=i,{ui:U}=i,{disabled:q=!1}=i,{markup:X}=i,{offset:G}=i,{contextRotation:J=0}=i,{contextFlipX:tt=!1}=i,{contextFlipY:it=!1}=i,{contextZoom:ot=1}=i,{active:mt=!1}=i,{opacity:bt=1}=i,{parentRect:xt}=i,{rootRect:wt}=i,{utilRect:_t}=i,{hoverColor:kt}=i,{textInputMode:Ct="inline"}=i,{oninteractionstart:Tt=f}=i,{oninteractionupdate:Mt=f}=i,{oninteractionrelease:Pt=f}=i,{oninteractionend:Et=f}=i,{oninteractioncancel:It=f}=i,{onaddshape:Dt=f}=i,{onupdateshape:Lt=f}=i,{onselectshape:Ot=f}=i,{onremoveshape:zt=f}=i,{ontapshape:Ft=f}=i,{onhovershape:Bt=f}=i,{onhovercanvas:jt=f}=i,{beforeSelectShape:Ut=(()=>!0)}=i,{beforeDeselectShape:qt=(()=>!0)}=i,{beforeRemoveShape:Xt=(()=>!0)}=i,{beforeUpdateShape:Gt=((t,e)=>e)}=i,{willRenderShapeControls:Zt=Y}=i,{mapEditorPointToImagePoint:Kt}=i,{mapImagePointToEditorPoint:Qt}=i,{eraseRadius:Jt}=i,{selectRadius:ee}=i,{enableButtonFlipVertical:ie=!1}=i,{enableTapToAddText:ne=!0}=i,{locale:ae}=i;const le=(t,e,i)=>{let n=Gt({...t},e,{...i});wn(t,n,i)},ce=(t,e,i,n)=>{const o=Q(t.x-i.x,t.y-i.y),r=Q(n.x-i.x,n.y-i.y),s=dt(r,r);let a=dt(o,r)/s;a=a<0?0:a,a=a>1?1:a;const l=Q(r.x*a+i.x-t.x,r.y*a+i.y-t.y);return dt(l,l)<=e*e},he=(t,e,i)=>{const n=i.length;for(let o=0;o<n-1;o++)if(ce(t,e,i[o],i[o+1]))return!0;return!1},ue=(t,e,i)=>!!pe(t,i)||!!he(t,e,i)||ce(t,e,i[0],i[i.length-1]),fe=(t,e,i,n,o)=>ue(t,e,te(i,n,o||Vt(i))),ge=qo("keysPressed");oo(t,ge,(t=>n(151,W=t)));const ye=(t,e,i)=>0===t||e&&i?t:e||i?-t:t,ve=(t,e)=>{const i=Qt(t);return Kt(ct(i,e))},be=(t,e,i)=>{if(Hi(t)){const n=ve(Ri(e),i),o=ve(Li(e),i);le(t,{x1:n.x,y1:n.y,x2:o.x,y2:o.y},xt)}else if(Bi(t)||Oi(t)||Ni(t)){const n=ve(e,i);le(t,n,xt)}Me()},xe={0:1,1:0,2:3,3:2},$e={0:3,1:2,2:1,3:0};let we;const _e=()=>{if(X.length)return X.find(Xi)},ke=()=>{if(X.length)return X.findIndex(Xi)},Se=(t,e=!0)=>{if(!_e())return Ji(t),Pe(t,e)},Ce=()=>{const t=_e();if(t)return t._isDraft=!1,Me(),t},Te=()=>{_e()&&(X.splice(ke(),1),Me())},Me=()=>n(0,X),Pe=(t,e=!0)=>(X.push(t),e&&Me(),t),Ee=(t,e=[],i=!0)=>{e.forEach((e=>delete t[e])),i&&Me()},Ie=(t,e,i=!0)=>{t=Object.assign(t,e),i&&Me()},Ae=(t,e,i,n=!0)=>{t[e]=i,n&&Me()},De=(t,e=!0)=>{X.forEach((e=>Ie(e,t,!1))),e&&Me()},Re=()=>[...X].reverse().find(Ui),Le=()=>!!Re(),Oe=t=>{if(!Xt(t))return!1;n(0,X=X.filter((e=>e!==t))),zt(t)},ze=()=>{const t=Re();if(!t)return;const e=X.filter((t=>nn(t)&&en(t))),i=e.findIndex((e=>e===t));if(!1===Oe(t))return;if(Fe=t,e.length-1<=0)return Be();const n=i-1<0?e.length-1:i-1;He(e[n])};let Fe;const Be=()=>{Object.keys(bi).forEach((t=>bi[t]={})),Fe=Ne(),De({isSelected:!1,isEditing:!1,_prerender:!1})},Ne=()=>X.find(Ui),He=(t,e=!0)=>{if(Xi(t))return;const i=Ne()||Fe,n=Ui(t);Fe=void 0,Ut(i,t)&&(Be(),(t=>{t.isSelected=!0})(t),!n&&Ot(t),e&&Me())},We=t=>{di&&t.isEditing&&di.confirm&&di.confirm(),Ie(t,{isSelected:!1,isEditing:!1,_prerender:!1})},je=t=>{Ie(t,{isSelected:!0,isEditing:!0,_prerender:"inline"===Ct})},Ye=t=>{Ie(t,{isSelected:!0,isEditing:!1,_prerender:!1})},Ve=t=>{if(!t.length)return[];const e=t.filter(Xt);return n(0,X=X.filter((t=>!e.includes(t)))),e},Ue=t=>{const e=vi(t.text,t);return Yt(t.x,t.y,t.width?Math.min(t.width,e.width):e.width,t.height?Math.min(t.height,e.height):e.height)},qe=t=>{if(Gi(t))return Nt(t);if(Ni(t))return Wt(t);const e=Ue(t);return e.width=Math.max(10,t.width||e.width),e},Xe=(t,e=0,i=(()=>!0))=>[...X].reverse().filter(i).map((t=>({shape:t,priority:1}))).filter((i=>{const{shape:n}=i,o=vn(Pi(n),xt),r=e+(o.strokeWidth||0);if(Bi(o))return fe(t,r,o,n.rotation);if(Oi(o)){const e=qe(o),s=fe(t,r,e,n.rotation);let a=!1;if(s&&!Ui(n)){const s=Ue(o);"right"!==n.textAlign||n.flipX||(s.x=e.x+e.width-s.width),"center"===n.textAlign&&(s.x=e.x+.5*e.width-.5*s.width),a=fe(t,r,s,n.rotation,Vt(e)),a||(i.priority=-1)}return s}return Ni(o)?((t,e,i,n,o,r)=>{const s=me(Q(i.x,i.y),i.rx,i.ry,n,o,r,12);return ue(t,e,s)})(t,r,o,n.rotation,n.flipX,n.flipY):Hi(o)?ce(t,Math.max(16,r),Ri(o),Li(o)):!!ji(o)&&he(t,Math.max(16,r),o.points)})).sort(((t,e)=>t.priority<e.priority?1:t.priority>e.priority?-1:0)).map((t=>t.shape)),Ge=(t,e,i,n=0)=>{const o=Math.abs(n),r=At(e,i),s=Rt(r,o),a=(({start:t,end:e},i)=>{if(0===i)return[Q(t.x,t.y),Q(t.x,t.y),Q(e.x,e.y),Q(e.x,e.y)];const n=Math.atan2(e.y-t.y,e.x-t.x),o=Math.sin(n)*i,r=Math.cos(n)*i;return[Q(o+t.x,-r+t.y),Q(-o+t.x,r+t.y),Q(-o+e.x,r+e.y),Q(o+e.x,-r+e.y)]})(s,o);return t.filter((t=>{const e=vn(Pi(t),xt);if(Hi(e)||ji(e)){const t=e.points?[...e.points]:[Ri(e),Li(e)];return!!((t,e)=>{const i=e.length,n=[];for(let o=0;o<i-1;o++){const i=de(t.start,t.end,e[o],e[o+1]);i&&n.push(i)}return n.length?n:void 0})(s,t)}return((t,e)=>!!t.find((t=>pe(t,e)))||!!e.find((e=>pe(e,t))))(a,((t,e=12)=>{if(Bi(t))return te(t,t.rotation,Vt(t));if(Oi(t)){const e=qe(t);return te(e,t.rotation,Vt(e))}return Ni(t)?me(Q(t.x,t.y),t.rx,t.ry,t.rotation,t.flipX,t.flipY,e):[]})(e))}))};let Ze,Ke,Qe,ti,ei,ii=!1;const ni=()=>{clearTimeout(Ze),Ze=void 0,n(111,ii=!1)},oi=t=>{let e;if(Bi(t)){if(t.width<5&&t.height<5)return;const i=Vt(t);e=se(t),(t.flipX||t.flipY)&&yt(e,t.flipX,t.flipY,i.x,i.y),e=vt(e,t.rotation,i.x,i.y)}else if(Ni(t)){const i=t;e=se(Wt(t)),(t.flipX||t.flipY)&&yt(e,t.flipX,t.flipY,i.x,i.y),e=vt(e,t.rotation,i.x,i.y)}else if(Hi(t))e=[Ri(t),Li(t)];else if(ji(t))e=[...t.points];else if(Oi(t)){if(t.width<5&&t.height<5)return;const i=qe(t);i.width=Math.max(10,i.width);const n=Vt(i);e=se(i),(t.flipX||t.flipY)&&yt(e,t.flipX,t.flipY,n.x,n.y),e=vt(e,t.rotation,n.x,n.y)}return e},ri=t=>{const e=oi(t);let i,n;return t.flipY?(i=gt([e[0],e[1]]),n=rt(Q(e[1].x-e[2].x,e[1].y-e[2].y))):(i=gt([e[2],e[3]]),n=rt(Q(e[2].x-e[1].x,e[2].y-e[1].y))),ut(n,20/ot),{origin:i,dir:n}},li=()=>{const t=U.filter((t=>t.id!==Qf));t.length!==U.length&&n(49,U=t)};let ci;const hi="markup-manipulator-segment-"+V,ui=()=>{n(49,U=U.filter((t=>t.id!==hi)))};let di;const pi=()=>{const t=(t=>{let e;return e=void 0===t.value?t.innerHTML.split("<br>").join("\n").replace(/&nbsp;/g,String.fromCharCode(160)).replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">"):t.value,zi(o)?(t=>{const e=t.split(/[\n\r]/g);return e.length>1?e.map((t=>t.trim())).filter((t=>t.length)).join(" "):e[0]})(e):e})(di),i=on(o,t),n=!0===i?t:i;let r=w.x,a=w.y;if(!o.height){const t=te({...k},o.rotation),e=vi(n,s),i=te({x:r,y:a,...e},o.rotation),[l,,c]=t,[h,,u]=i;let d=l,p=h;o.flipX&&(d=c,p=u);const f=ht(et(d),p);r+=f.x,a+=f.y}Ie(o,{x:e($.x)?si(r,xt.width):r,y:e($.y)?si(a,xt.height):a,text:n})},fi=()=>{let t=Xi(o);Xi(o)&&Ce(),pi(),Ye(o),t?Dt(o):Lt(o)},mi=()=>{Xi(o)?Te():(Ie(o,{text:$.text,x:$.x,y:$.y}),Ye(o))},gi=(t,e,{flipX:i,flipY:n,rotation:o},r="top left")=>{let s,a;const[l,c,h,u]=te(t,o),[d,p,f,m]=te(e,o);return"top center"===r?(s=gt(n?[u,h]:[l,c]),a=gt(n?[m,f]:[d,p])):"top right"===r&&!i||"top left"===r&&i?(s=n?h:c,a=n?f:p):(s=n?u:l,a=n?m:d),ht(et(s),a)},yi=(t,i,n)=>Q(e(t.x)?si(i.x+n.x,xt.width):i.x+n.x,e(t.y)?si(i.y+n.y,xt.height):i.y+n.y),bi={},xi=()=>je(o),$i=()=>{const t=vi(o.text,s),i=Je(o,"height"),n=!i&&Je(o,"width"),r=o.id;let a=bi[r];a||(bi[r]={},a=bi[r]);const l=t=>{const{width:e,...i}=s,n=vi(o.text,i),r=gi(Yt(s.x,s.y,t.width,t.height),Yt(s.x,s.y,n.width,n.height),s,"top "+o.textAlign);Ee(o,["width","height","textAlign"]),Ie(o,{...yi(o,s,r)})},c=i=>{const n=St(a.width||s.width||t.width,t.height),r=a.textAlign||"left",l=gi(Yt(s.x,s.y,i.width,i.height),Yt(s.x,s.y,n.width,n.height),s,"top "+r);Ee(o,["height"]),Ie(o,{...yi(o,s,l),width:e(o.width)?si(n.width,xt.width):n.width,textAlign:r})},h=i=>{const n=St(a.width||t.width,a.height||t.height),r=a.textAlign||"left",l=gi(Yt(s.x,s.y,i.width,i.height),Yt(s.x,s.y,n.width,n.height),s,"top "+r);Ie(o,{...yi(o,s,l),width:e(o.width)?si(n.width,xt.width):n.width,height:e(o.width)?si(n.height,xt.height):n.height,textAlign:r})};if(i){a.textAlign=o.textAlign,a.width=s.width,a.height=s.height;const t=St(s.width,s.height);rn(o,"auto-height")?c(t):rn(o,"auto-width")&&l(t)}else if(n){a.textAlign=o.textAlign,a.width=s.width;const e=St(s.width,t.height);rn(o,"auto-width")?l(e):rn(o,"fixed-size")&&h(e)}else{const e=St(t.width,t.height);rn(o,"fixed-size")?h(e):rn(o,"auto-height")&&c(e)}},wi=t=>{t.stopPropagation();const e=o.flipX||!1;Ae(o,"flipX",!e),Lt(o)},_i=t=>{t.stopPropagation();const e=o.flipY||!1;Ae(o,"flipY",!e),Lt(o)},ki=t=>{Ae(o,"opacity",t)},Si=t=>{ki(t),Lt(o)},Ci=t=>{t.stopPropagation(),t.target.blur(),ze()},Ti=t=>{t.stopPropagation(),X.findIndex((t=>t===o))!==X.length-1&&(n(0,X=X.filter((t=>t!==o)).concat([o])),Lt(o))},Ei=t=>{t.stopPropagation();const e=Pi(o);e.id=A();const i=Q(50,-50);if(Hi(e)){const t=$n(e,["x1","y1","x2","y2"],xt);t.x1+=i.x,t.y1+=i.y,t.x2+=i.x,t.y2+=i.y,wn(e,t,xt)}else{const t=$n(e,["x","y"],xt);t.x+=50,t.y-=50,wn(e,t,xt)}X.push(e),Dt(e),He(e)},Ii=Qs(0,{stiffness:.2,damping:.7});let Ai;oo(t,Ii,(t=>n(14,j=t)));const Di=(t,e)=>{const{disableTextLayout:i=[]}=e;return"height"in e?i.includes("auto-height")?t.shapeIconButtonTextLayoutAutoWidth:t.shapeIconButtonTextLayoutAutoHeight:"width"in e?i.includes("auto-width")?t.shapeIconButtonTextLayoutFixedSize:t.shapeIconButtonTextLayoutAutoWidth:i.includes("fixed-size")?t.shapeIconButtonTextLayoutAutoHeight:t.shapeIconButtonTextLayoutFixedSize},Wi=(t,e)=>{const{disableTextLayout:i=[]}=e;return"height"in e?i.includes("auto-height")?t.shapeTitleButtonTextLayoutAutoWidth:t.shapeTitleButtonTextLayoutAutoHeight:"width"in e?i.includes("auto-width")?t.shapeTitleButtonTextLayoutFixedSize:t.shapeTitleButtonTextLayoutAutoWidth:i.includes("fixed-size")?t.shapeTitleButtonTextLayoutAutoHeight:t.shapeTitleButtonTextLayoutFixedSize};let Vi=!1,qi=K();const Ki=t=>{Bt(t),n(112,ci=t)};return Yo((()=>{ui(),li()})),t.$$set=t=>{"uid"in t&&n(50,V=t.uid),"ui"in t&&n(49,U=t.ui),"disabled"in t&&n(1,q=t.disabled),"markup"in t&&n(0,X=t.markup),"offset"in t&&n(2,G=t.offset),"contextRotation"in t&&n(51,J=t.contextRotation),"contextFlipX"in t&&n(52,tt=t.contextFlipX),"contextFlipY"in t&&n(53,it=t.contextFlipY),"contextZoom"in t&&n(54,ot=t.contextZoom),"active"in t&&n(55,mt=t.active),"opacity"in t&&n(56,bt=t.opacity),"parentRect"in t&&n(57,xt=t.parentRect),"rootRect"in t&&n(3,wt=t.rootRect),"utilRect"in t&&n(58,_t=t.utilRect),"hoverColor"in t&&n(59,kt=t.hoverColor),"textInputMode"in t&&n(4,Ct=t.textInputMode),"oninteractionstart"in t&&n(60,Tt=t.oninteractionstart),"oninteractionupdate"in t&&n(61,Mt=t.oninteractionupdate),"oninteractionrelease"in t&&n(62,Pt=t.oninteractionrelease),"oninteractionend"in t&&n(63,Et=t.oninteractionend),"oninteractioncancel"in t&&n(64,It=t.oninteractioncancel),"onaddshape"in t&&n(65,Dt=t.onaddshape),"onupdateshape"in t&&n(66,Lt=t.onupdateshape),"onselectshape"in t&&n(67,Ot=t.onselectshape),"onremoveshape"in t&&n(68,zt=t.onremoveshape),"ontapshape"in t&&n(69,Ft=t.ontapshape),"onhovershape"in t&&n(70,Bt=t.onhovershape),"onhovercanvas"in t&&n(71,jt=t.onhovercanvas),"beforeSelectShape"in t&&n(72,Ut=t.beforeSelectShape),"beforeDeselectShape"in t&&n(73,qt=t.beforeDeselectShape),"beforeRemoveShape"in t&&n(74,Xt=t.beforeRemoveShape),"beforeUpdateShape"in t&&n(75,Gt=t.beforeUpdateShape),"willRenderShapeControls"in t&&n(76,Zt=t.willRenderShapeControls),"mapEditorPointToImagePoint"in t&&n(77,Kt=t.mapEditorPointToImagePoint),"mapImagePointToEditorPoint"in t&&n(78,Qt=t.mapImagePointToEditorPoint),"eraseRadius"in t&&n(79,Jt=t.eraseRadius),"selectRadius"in t&&n(80,ee=t.selectRadius),"enableButtonFlipVertical"in t&&n(81,ie=t.enableButtonFlipVertical),"enableTapToAddText"in t&&n(82,ne=t.enableTapToAddText),"locale"in t&&n(5,ae=t.locale)},t.$$.update=()=>{var e,i;if(3&t.$$.dirty[0]&&n(113,o=!q&&X&&(_e()||Re())),1048576&t.$$.dirty[3]&&n(114,r=o&&!Xi(o)?o.id:void 0),8&t.$$.dirty[0]|67108864&t.$$.dirty[1]|1048576&t.$$.dirty[3]&&n(9,s=wt&&o&&vn(Pi(o),xt)),1048576&t.$$.dirty[3]&&n(115,a=!(!o||!Xi(o))),512&t.$$.dirty[0]|33554432&t.$$.dirty[1]|1048576&t.$$.dirty[3]&&n(116,l=o&&bt&&oi(s)||[]),1048576&t.$$.dirty[3]&&n(117,c=o&&sn(e=o)&&an(e)&&!0!==e.disableResize&&(Gi(e)||Fi(e)||Ni(e)||Hi(e))&&!Yi(o)),1048576&t.$$.dirty[3]&&n(10,h=o&&(t=>sn(t)&&!0!==t.disableRotate&&(Gi(t)||Je(t,"text")||Ni(t)))(o)&&!Yi(o)),17825792&t.$$.dirty[3]&&n(16,u=c&&Je(o,"text")&&!o.height?"horizontal":c),9437184&t.$$.dirty[3]&&n(11,d=o&&l.length>1),65536&t.$$.dirty[2]|8388608&t.$$.dirty[3]&&n(118,p=l.map(Qt)),4&t.$$.dirty[0]|33554432&t.$$.dirty[3]&&n(12,m=p.map((t=>Q(t.x-G.x,t.y-G.y)))),4096&t.$$.dirty[0]&&n(119,g=m.length),65536&t.$$.dirty[2]|524288&t.$$.dirty[3]&&(ci&&Qt&&!Ui(ci)&&en(ci)?(t=>{const e=oi(vn(Pi(t),xt));if(!e)return;const i=e.map(Qt),o=!ji(t)&&!Hi(t),r={id:Qf,points:i.map((t=>Q(t.x+1,t.y+1))),strokeColor:[0,0,0,.1],strokeWidth:2,pathClose:o},s={id:Qf,points:i,strokeColor:kt,strokeWidth:2,pathClose:o},a=U.filter((t=>t.id!==Qf));n(49,U=[...a,r,s])})(ci):li()),7680&t.$$.dirty[0]|33554432&t.$$.dirty[1]&&n(120,y=d&&h&&bt&&m&&(t=>{const e=ri(t),i=Qt({x:e.origin.x+e.dir.x,y:e.origin.y+e.dir.y});return{origin:Qt(e.origin),position:i}})(s)),4&t.$$.dirty[0]|134217728&t.$$.dirty[3]&&n(17,v=y&&Q(y.position.x-G.x,y.position.y-G.y)),33554432&t.$$.dirty[1]|101711872&t.$$.dirty[3]&&o&&p&&bt>0){const t=o&&Xi(o)&&ji(o);g>2&&!t?((t,e)=>{const i=[],o=.1*t,r=t,s=[0,0,0],a=[1,1,1],l=!ji(e)&&!Hi(e);i.push({id:hi,points:p.map((t=>Q(t.x+1,t.y+1))),pathClose:l,strokeColor:s,strokeWidth:2,opacity:o}),y&&i.push({id:hi,points:[Q(y.origin.x+1,y.origin.y+1),Q(y.position.x+1,y.position.y+1)],strokeColor:s,strokeWidth:2,opacity:o}),i.push({id:hi,points:p,pathClose:l,strokeColor:a,strokeWidth:1.5,opacity:r}),y&&i.push({id:hi,points:[{x:y.origin.x,y:y.origin.y},{x:y.position.x,y:y.position.y}],strokeColor:a,strokeWidth:1.5,opacity:r}),n(49,U=U.filter((t=>t.id!==hi)).concat(i))})(bt,o):ui()}1048576&t.$$.dirty[3]&&(o||ui()),16777216&t.$$.dirty[1]&&(t=>{if(!t)return De({_prerender:!1});const e=X.find((t=>t.isEditing));e&&Ie(e,{_prerender:"inline"===Ct})})(mt),144&t.$$.dirty[0]&&di&&"inline"===Ct&&di.focus(),1048576&t.$$.dirty[3]&&n(121,b=o&&Oi(o)),269484032&t.$$.dirty[3]&&n(13,x=b&&!1!==on(o)&&Yi(o)),8192&t.$$.dirty[0]&&n(122,$=x?{...o}:void 0),67108864&t.$$.dirty[1]|536870912&t.$$.dirty[3]&&n(123,w=$&&vn({...$},xt)),1073741824&t.$$.dirty[3]&&n(124,_=w&&vi(w.text,w)),1073741824&t.$$.dirty[3]|1&t.$$.dirty[4]&&(k=w&&Yt(w.x,w.y,_.width,_.height)),8192&t.$$.dirty[0]|1048576&t.$$.dirty[3]&&n(18,S=x?o.text:""),8720&t.$$.dirty[0]&&n(19,C=x&&((t,e)=>{const{textAlign:i="left",fontFamily:n="sans-serif",fontWeight:o="normal",fontStyle:r="normal"}=t,s=t.fontSize,a="!important",l=`text-align:${i}${a};font-family:${n}${a};font-weight:${o}${a};font-style:${r}${a};`;if("modal"===e)return l;const c=ai(t.color),h=t.lineHeight,u=.5*Math.max(0,s-h);return`--bottom-inset:${u}px;padding:${u}px 0 0${a};color:${c}${a};font-size:${s}px${a};line-height:${h}px${a};${l}`})(s,Ct)),8708&t.$$.dirty[0]|9437184&t.$$.dirty[1]&&n(20,T=x&&((t,e,i,n)=>{let r,a;t.width&&t.height?(r=Vt(t),a=$t(t)):(a=vi(o.text,s),a.width=s.width||a.width,r=Q(t.x+.5*a.width,t.y+.5*a.height));const l=Math.max(0,t.fontSize-t.lineHeight)+t.lineHeight,c=Qt(r);let h=c.x-e.x-.5*a.width,u=c.y-e.y-.5*a.height,d=t.flipX,p=t.flipY,f=t.rotation;tt&&it?(d=!d,p=!p):tt?(d=!d,f=-f):it&&(p=!p,f=-f),f+=n;const m=i*(d?-1:1),g=i*(p?-1:1);return`--line-height:${l}px;width:${a.width}px;height:${a.height}px;transform:translate(${h}px,${u}px) rotate(${f}rad) scale(${m}, ${g})`})(s,G,ot,J)),8336&t.$$.dirty[0]&&x&&di&&"inline"===Ct&&(t=>{n(7,di.innerHTML=(t=>t.replace(/ {2,}/g," ").replace(/&/g,"&amp;").replace(/\u00a0/g,"&nbsp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").split("\n").join("<br>"))(t),di)})(S),5242880&t.$$.dirty[3]|2&t.$$.dirty[4]&&n(125,M=o&&!a?o:M),2&t.$$.dirty[4]&&n(126,P=M&&(t=>!t.disableFlip&&!Xi(t)&&!Zi(t)&&(t=>Je(t,"backgroundImage")||Je(t,"text"))(t))(M)),2&t.$$.dirty[4]&&n(127,E=M&&rn(M)),2&t.$$.dirty[4]&&n(128,I=M&&(t=>!0!==t.disableDuplicate&&an(t))(M)),2&t.$$.dirty[4]&&n(129,D=M&&nn(M)),2&t.$$.dirty[4]&&n(130,R=M&&(t=>!0!==t.disableReorder)(M)),2&t.$$.dirty[4]&&n(131,L=M&&!1!==on(M)),2&t.$$.dirty[4]&&n(132,O=M&&Je(M,"backgroundImage")&&tn(M,"opacity")),8192&t.$$.dirty[0]|5505024&t.$$.dirty[3]&&Ii.set(!o||a||ii||x?0:1),4096&t.$$.dirty[0]|5242880&t.$$.dirty[3]|512&t.$$.dirty[4]&&n(133,z=o&&!a&&m.length?(i=Ht(m),lt(Q(i.x+.5*i.width,i.y),rc)):z),256&t.$$.dirty[0]|134217728&t.$$.dirty[1]|512&t.$$.dirty[4]&&n(134,F=z&&Ai&&_t&&(t=>{const e=_t.x,i=_t.y,n=e+_t.width;let o=Math.max(t.x-.5*Ai.width,e),r=Math.max(t.y-Ai.height-16,i);return o+Ai.width>n&&(o=n-Ai.width),Q(o,r)})(z)),16384&t.$$.dirty[0]|1024&t.$$.dirty[4]&&n(21,B=F&&`transform: translate(${F.x}px, ${F.y}px);opacity:${j}`),32&t.$$.dirty[0]|540672&t.$$.dirty[2]|3145728&t.$$.dirty[3]|508&t.$$.dirty[4]&&n(22,N=r&&Zt&&iu((()=>Zt([O&&["div","alpha",{class:"PinturaShapeControlsGroup"},[["Slider","adjust-opacity",{onrelease:Si,onchange:ki,step:.01,value:Je(o,"opacity")?o.opacity:1,label:(t,e,i)=>Math.round(t/i*100)+"%",min:0,max:1,direction:"x"}]]],["div","beta",{class:"PinturaShapeControlsGroup"},[P&&["Button","flip-horizontal",{onclick:wi,label:ae.shapeTitleButtonFlipHorizontal,icon:ae.shapeIconButtonFlipHorizontal,hideLabel:!0}],P&&ie&&["Button","flip-vertical",{onclick:_i,label:ae.shapeTitleButtonFlipVertical,icon:ae.shapeIconButtonFlipVertical,hideLabel:!0}],R&&["Button","to-front",{onclick:Ti,label:ae.shapeTitleButtonMoveToFront,icon:ae.shapeIconButtonMoveToFront,hideLabel:!0}],I&&["Button","duplicate",{onclick:Ei,label:ae.shapeTitleButtonDuplicate,icon:ae.shapeIconButtonDuplicate,hideLabel:!0}],D&&["Button","remove",{onclick:Ci,label:ae.shapeTitleButtonRemove,icon:ae.shapeIconButtonRemove,hideLabel:!0}]].filter(Boolean)],L&&E&&["div","gamma",{class:"PinturaShapeControlsGroup"},[["Button","text-layout",{onclick:$i,label:kc(Wi,ae,o),icon:kc(Di,ae,o),hideLabel:!0}]]],L&&["div","delta",{class:"PinturaShapeControlsGroup"},[["Button","edit-text",{label:ae.shapeLabelInputText,onclick:xi}]]]].filter(Boolean),r)))),33&t.$$.dirty[0]&&n(23,H=X.filter(en).filter((t=>!Xi(t))).map((t=>({id:t.id,color:Oi(t)?t.color:Hi(t)?t.strokeColor:t.backgroundColor,name:t.name||ae["shapeLabelTool"+jr(pn(t))]}))))},[X,q,G,wt,Ct,ae,He,di,Ai,s,h,d,m,x,j,Vi,u,v,S,C,T,B,N,H,ge,t=>{const{origin:e}=t.detail;Qe=void 0,ti=void 0,ei=void 0,Ke=void 0,clearTimeout(Ze),Ze=setTimeout((()=>n(111,ii=!0)),250),_e()&&Ce();const i=Kt(et(e)),r=Xe(i,ee,(t=>en(t))),s=r.length&&r.shift();if(!s&&o&&Yi(o)&&We(o),s&&Ui(s))return Qe=s,ti=Pi(Qe),void(ei=vn(Pi(Qe),xt));Ke=s,!Tt(t)&&s&&(He(s),Qe=s,ti=Pi(Qe),ei=vn(Pi(Qe),xt))},t=>{ni(),It(t)},t=>{const{translation:e}=t.detail;if(Qe){if(!an(Qe))return;if(Yi(Qe))return;return be(Qe,ei,e)}Mt(t)},t=>{ni(),Qe?Yi(Qe)?mi():t.detail.isTap&&Oi(Qe)&&!1!==on(Qe)&&je(Qe):Pt(t)},t=>{const e=Ke&&t.detail.isTap;if(Qe)return Ft(Qe),i=Qe,n=ti,JSON.stringify(i)!==JSON.stringify(n)&&Lt(Qe),void(Qe=void 0);var i,n;const o=Ne(),r=!o||qt(o,Ke);r&&Be(),Et(t),r&&e&&He(Ke)},t=>{n(111,ii=!0),Qe=o,ei=s},t=>{const{translation:e,indexes:i,shiftKey:n}=t.detail;((t,e,i,n,o)=>{if(Hi(t)){const[o]=i,r=W.includes(16)?(t,e)=>{const i=ft(t,e),n=st(t,e),o=Math.PI/4,r=o*Math.round(n/o)-J%o;e.x=t.x+i*Math.cos(r),e.y=t.y+i*Math.sin(r)}:(t,e)=>e;if(0===o){const i=ve(Ri(e),n);r(Q(e.x2,e.y2),i),le(t,{x1:i.x,y1:i.y},xt)}else if(1===o){const i=ve(Li(e),n);r(Q(e.x1,e.y1),i),le(t,{x2:i.x,y2:i.y},xt)}}else if(Gi(t)||Ni(t)||Fi(t)){let r,s,a=!1;if(Ni(t))r=Wt(e);else if(Gi(t))r=Nt(e);else{a=!0,r=Nt(e);const t=vi(e.text,e);r.height=t.height}t.aspectRatio?s=t.aspectRatio:o.shiftKey&&!a&&(s=r.width/r.height);const l=Nt(r),c=Vt(l),h=t.rotation,u=se(l),d=te(l,h);if(1===i.length){let e=i[0];t.flipX&&(e=xe[e]),t.flipY&&(e=$e[e]);const[o,r,a,l]=u,p=Qt(d[e]);ct(p,n);const f=Kt(p),m=Q(f.x-d[e].x,f.y-d[e].y),g=nt(et(m),-h),y=Q(u[e].x+g.x,u[e].y+g.y);let v;0===e&&(v=a),1===e&&(v=l),2===e&&(v=o),3===e&&(v=r);const b=Ht([v,y]);if(s){const{width:t,height:e}=oe(b,s),[i,n,o,r]=re(b);b.width=t,b.height=e,y.y<v.y&&(b.y=o-e),y.x<v.x&&(b.x=n-t)}const x=te(b,h,c),$=gt(x),w=nt(x[0],-h,$),_=nt(x[2],-h,$),k=Ht([w,_]);le(t,Ni(t)?Z(k):k,xt)}else{i=i.map((e=>(t.flipX&&(e=xe[e]),t.flipY&&(e=$e[e]),e)));const[e,o]=i.map((t=>d[t])),r={x:e.x+.5*(o.x-e.x),y:e.y+.5*(o.y-e.y)},[l,p]=i.map((t=>u[t])),[f,m]=i.map((t=>{const e=t+2;return e<4?u[e]:u[e-4]})),g={x:f.x+.5*(m.x-f.x),y:f.y+.5*(m.y-f.y)},y=Qt(r);ct(y,n);const v=Kt(y),b=Q(v.x-r.x,v.y-r.y),x=nt(et(b),-h),$=ht(et(l),p),w=lt($,(t=>1-Math.abs(Math.sign(t)))),_=Q(x.x*w.x,x.y*w.y);ct(l,_),ct(p,_);const k=Ht(u);if(s){let t=k.width,e=k.height;0===w.y?e=t/s:t=e*s,k.width=t,k.height=e,0===w.y?k.y=g.y-.5*e:k.x=g.x-.5*t}const S=te(k,h,c),C=gt(S),T=nt(S[0],-h,C),M=nt(S[2],-h,C),P=Ht([T,M]);let E;Ni(t)?E=Z(P):Gi(t)?E=P:a&&(E={x:P.x,y:P.y,width:P.width}),le(t,E,xt)}}Me()})(Qe,ei,i,e,{shiftKey:n})},t=>{He(Qe);const{isTap:e}=t.detail;e&&Ft(Qe),Qe=void 0,n(111,ii=!1),Lt(o)},t=>{we=ri(s).origin,n(111,ii=!0),Qe=o,ei=s},t=>{const{translation:e,shiftKey:i}=t.detail;((t,e,i,n)=>{const o=qe(vn(Pi(t),xt)),r=Vt(o),s=ve(we,i);let a=st(s,r)+Math.PI/2;if(n.shiftKey){const t=Math.PI/16;a=t*Math.round(a/t)-J%t}le(t,{rotation:a},xt),Me()})(Qe,0,e,{shiftKey:i})},()=>{He(Qe),Qe=void 0,n(111,ii=!1),Lt(o)},t=>{if(!Le())return;const{key:e}=t;if(/escape/i.test(e))return t.preventDefault(),t.stopPropagation(),We(o);/backspace/i.test(e)&&!(t=>t.isContentEditable||/input|textarea/i.test(t.nodeName))(t.target)&&(t.preventDefault(),ze())},t=>{const e=on(o,t);return!0===e?t:e},pi,t=>{const{target:e,key:i}=t,n=e.value||e.innerText,r=e.selectionStart||0,s=e.selectionEnd||n.length,a=n.substring(0,r)+i+n.substring(s);if(on(o,a)!==a)return t.preventDefault()},t=>zi(o)&&/enter/i.test(t.code)?t.preventDefault():/arrow/i.test(t.code)?t.stopPropagation():/escape/i.test(t.key)?mi():void 0,t=>{const{key:e,ctrlKey:i,altKey:n}=t;if(/enter/i.test(e)&&(i||n))return fi()},fi,mi,Ii,t=>{const e=Re();e&&(Yi(e)||an(e)&&(Qe=e,ei=vn(Pi(Qe),xt),be(Qe,ei,t.detail)))},t=>{n(15,Vi=!0)},({relatedTarget:t})=>{t&&t.classList.contains("shape-selector__button")||n(15,Vi=!1)},t=>{if(ii||Ze)return Ki(void 0);const e=Af(t,wt),i=lt(Kt(e),(t=>Math.round(t)));if(at(i,qi))return;qi=et(i),jt(e,i);const[n]=Xe(i,0,en);n&&Xi(n)||Ki(n)},U,V,J,tt,it,ot,mt,bt,xt,_t,kt,Tt,Mt,Pt,Et,It,Dt,Lt,Ot,zt,Ft,Bt,jt,Ut,qt,Xt,Gt,Zt,Kt,Qt,Jt,ee,ie,ne,(t,i={})=>{let n,o,r,s=Ni(t),a=Oi(t),l="relative"===i.position;return ji(t)?{start:e=>{const{origin:i}=e.detail;o=4,n=et(i),r=et(i);const s=Kt(i);l&&(s.x=l?si(s.x,xt.width):s.x,s.y=l?si(s.y,xt.height):s.y),Se({...t,points:[s]})},update:t=>{const e=_e(),{translation:i}=t.detail,s=Q(n.x+i.x,n.y+i.y),a=ft(r,s);if(Mi(a,5)<=o)return;const c=st(s,r),h=o-a;r.x+=h*Math.cos(c),r.y+=h*Math.sin(c);const u=Kt(r);u&&(u.x=l?si(u.x,xt.width):u.x,u.y=l?si(u.y,xt.height):u.y),e.points=e.points.concat(u),Me()},release:t=>t.detail.preventInertia(),cancel:t=>{Te()},end:t=>{if(t.detail.isTap)return Te();const e=Ce();Dt(e)}}:s||a||Bi(t)?{start:e=>{const{origin:i}=e.detail;n=et(i);const o=Kt(n),r={...t,rotation:-1*ye(J,tt,it),x:l?si(o.x,xt.width):o.x,y:l?si(o.y,xt.height):o.y};r.flipX=tt,r.flipY=it,delete r.position,r.opacity=0,s?(r.rx=l?"0%":0,r.ry=l?"0%":0):(r.width=l?"0%":0,r.height=l?"0%":0),Se(r)},update:t=>{const e=_e();e.opacity=1;const{aspectRatio:i}=e;let{translation:o}=t.detail;if(i){const t=Math.abs(o.x)*i;o.x=o.x,o.y=t*Math.sign(o.y)}const r=Q(n.x+o.x,n.y+o.y),a=Kt(n),l=Kt(r),c={x:a.x+.5*(l.x-a.x),y:a.y+.5*(l.y-a.y)},h=ye(J,tt,it);nt(a,h,c),nt(l,h,c);const u=Math.min(a.x,l.x),d=Math.min(a.y,l.y);let p=Math.max(a.x,l.x)-u,f=Math.max(a.y,l.y)-d,m={};s?(m.x=u+.5*p,m.y=d+.5*f,m.rx=.5*p,m.ry=.5*f):(m.x=u,m.y=d,m.width=p,m.height=f),le(e,m,xt),Me()},release:t=>{t.detail.preventInertia()},cancel:t=>{Te()},end:t=>{const i=_e();if(t.detail.isTap){if(!Oi(i)||!ne||Ke)return Te();delete i.width,delete i.height,delete i.textAlign;const t=vn({...i},xt),o=vi(i.text,t);o.width*=ot,o.height*=ot;const r=Kt({x:n.x,y:n.y-.5*o.height}),s=Kt({x:n.x+o.width,y:n.y+.5*o.height}),a={x:r.x+.5*(s.x-r.x),y:r.y+.5*(s.y-r.y)},l=ye(J,tt,it);nt(r,l,a),nt(s,l,a);const c=Math.min(r.x,s.x),h=Math.min(r.y,s.y);i.x=e(i.x)?si(c,xt.width):c,i.y=e(i.y)?si(h,xt.height):h}if(i.opacity=1,!Oi(i)){const t=Ce();Dt(t)}He(i),Oi(i)&&je(i)}}:Hi(t)?{start:e=>{const{origin:i}=e.detail,o=Kt(i),r=lt(o,rc);n=et(i),Se({...t,x1:l?si(r.x,xt.width):r.x,y1:l?si(r.y,xt.height):r.y,x2:l?si(r.x,xt.width):r.x,y2:l?si(r.y,xt.height):r.y,opacity:0})},update:t=>{const e=_e(),{translation:i}=t.detail,o=ct(et(n),i);if(W.includes(16)){const t=ft(n,o),e=st(n,o),i=Math.PI/4,r=i*Math.round(e/i);o.x=n.x+t*Math.cos(r),o.y=n.y+t*Math.sin(r)}const r=Kt(o);Ie(e,{x2:l?si(r.x,xt.width):r.x,y2:l?si(r.y,xt.height):r.y,opacity:1}),Me()},release:t=>t.detail.preventInertia(),cancel:t=>{Te()},end:t=>{const e=_e();if(t.detail.isTap)return Te();e.opacity=1;const i=Ce();Dt(i),He(i)}}:void 0},()=>{let t,e;const i=Jt*Jt,n=(t,e,n=!1)=>{const o=pt(t,e);if(!n&&o<2)return!1;const r=X.filter((t=>!t.disableErase));let s;return s=o<i?Xe(Kt(e),Jt):Ge(r,Kt(t),Kt(e),Jt),Ve(s).forEach(zt),!0};return{start:i=>{t=Q(Math.round(i.detail.origin.x),Math.round(i.detail.origin.y)),n(t,t,!0),e=t},update:i=>{const{translation:o}=i.detail,r=Q(Math.round(t.x+o.x),Math.round(t.y+o.y));n(e,r)&&(e=et(r))},release:t=>t.detail.preventInertia(),end:()=>{}}},_e,ke,Se,Ce,Te,(t={})=>({id:A(),...t}),Me,Pe,Ee,Ie,Ae,(t,e,i=!0)=>{X.forEach((i=>Ae(i,t,e,!1))),i&&Me()},De,Re,Le,Oe,ze,Be,We,je,Ye,Ve,Ue,qe,Xe,Ge,ii,ci,o,r,a,l,c,p,g,y,b,$,w,_,M,P,E,I,D,R,L,O,z,F,function(e){Xo(t,e)},(t,e)=>He(X[t]),function(t){Zo[t?"unshift":"push"]((()=>{di=t,n(7,di)}))},function(){S=this.value,n(18,S),n(13,x),n(113,o),n(121,b),n(1,q),n(0,X)},function(t){Zo[t?"unshift":"push"]((()=>{di=t,n(7,di)}))},t=>n(8,Ai=t.detail),t=>Af(t,wt)]}class em extends Er{constructor(t){super(),Pr(this,t,tm,Kf,eo,{uid:50,ui:49,disabled:1,markup:0,offset:2,contextRotation:51,contextFlipX:52,contextFlipY:53,contextZoom:54,active:55,opacity:56,parentRect:57,rootRect:3,utilRect:58,hoverColor:59,textInputMode:4,oninteractionstart:60,oninteractionupdate:61,oninteractionrelease:62,oninteractionend:63,oninteractioncancel:64,onaddshape:65,onupdateshape:66,onselectshape:67,onremoveshape:68,ontapshape:69,onhovershape:70,onhovercanvas:71,beforeSelectShape:72,beforeDeselectShape:73,beforeRemoveShape:74,beforeUpdateShape:75,willRenderShapeControls:76,mapEditorPointToImagePoint:77,mapImagePointToEditorPoint:78,eraseRadius:79,selectRadius:80,enableButtonFlipVertical:81,enableTapToAddText:82,locale:5,createShape:83,eraseShape:84,getMarkupItemDraft:85,getMarkupItemDraftIndex:86,addMarkupItemDraft:87,confirmMarkupItemDraft:88,discardMarkupItemDraft:89,createMarkupItem:90,syncShapes:91,addShape:92,removeMarkupShapeProps:93,updateMarkupShape:94,updateMarkupShapeProperty:95,updateMarkupItemsShapeProperty:96,updateMarkupShapeItems:97,getActiveMarkupItem:98,hasActiveMarkupItem:99,removeShape:100,removeActiveMarkupItem:101,blurShapes:102,selectShape:6,deselectMarkupItem:103,editMarkupItem:104,finishEditMarkupItem:105,removeMarkupItems:106,getTextShapeRect:107,getMarkupShapeRect:108,getShapesNearPosition:109,getShapesBetweenPoints:110},[-1,-1,-1,-1,-1,-1,-1])}get createShape(){return this.$$.ctx[83]}get eraseShape(){return this.$$.ctx[84]}get getMarkupItemDraft(){return this.$$.ctx[85]}get getMarkupItemDraftIndex(){return this.$$.ctx[86]}get addMarkupItemDraft(){return this.$$.ctx[87]}get confirmMarkupItemDraft(){return this.$$.ctx[88]}get discardMarkupItemDraft(){return this.$$.ctx[89]}get createMarkupItem(){return this.$$.ctx[90]}get syncShapes(){return this.$$.ctx[91]}get addShape(){return this.$$.ctx[92]}get removeMarkupShapeProps(){return this.$$.ctx[93]}get updateMarkupShape(){return this.$$.ctx[94]}get updateMarkupShapeProperty(){return this.$$.ctx[95]}get updateMarkupItemsShapeProperty(){return this.$$.ctx[96]}get updateMarkupShapeItems(){return this.$$.ctx[97]}get getActiveMarkupItem(){return this.$$.ctx[98]}get hasActiveMarkupItem(){return this.$$.ctx[99]}get removeShape(){return this.$$.ctx[100]}get removeActiveMarkupItem(){return this.$$.ctx[101]}get blurShapes(){return this.$$.ctx[102]}get selectShape(){return this.$$.ctx[6]}get deselectMarkupItem(){return this.$$.ctx[103]}get editMarkupItem(){return this.$$.ctx[104]}get finishEditMarkupItem(){return this.$$.ctx[105]}get removeMarkupItems(){return this.$$.ctx[106]}get getTextShapeRect(){return this.$$.ctx[107]}get getMarkupShapeRect(){return this.$$.ctx[108]}get getShapesNearPosition(){return this.$$.ctx[109]}get getShapesBetweenPoints(){return this.$$.ctx[110]}}function im(t,e,i){const n=t.slice();return n[7]=e[i],n}function nm(t,e){let i,n,o,r,s,a,l,c=kc(e[7].componentProps.title,e[1])+"";const h=[e[7].componentProps];var u=e[7].component;function d(t){let e={};for(let t=0;t<h.length;t+=1)e=Zn(e,h[t]);return{props:e}}return u&&(s=new u(d())),{key:t,first:null,c(){i=wo("li"),n=wo("span"),o=ko(c),r=So(),s&&Cr(s.$$.fragment),a=So(),Eo(n,"class","PinturaShapeStyleLabel"),Eo(i,"class","PinturaShapeStyle"),this.first=i},m(t,e){xo(t,i,e),bo(i,n),bo(n,o),bo(i,r),s&&Tr(s,i,null),bo(i,a),l=!0},p(t,n){e=t,(!l||3&n)&&c!==(c=kc(e[7].componentProps.title,e[1])+"")&&Ao(o,c);const r=1&n?_r(h,[kr(e[7].componentProps)]):{};if(u!==(u=e[7].component)){if(s){pr();const t=s;gr(t.$$.fragment,1,0,(()=>{Mr(t,1)})),fr()}u?(s=new u(d()),Cr(s.$$.fragment),mr(s.$$.fragment,1),Tr(s,i,a)):s=null}else u&&s.$set(r)},i(t){l||(s&&mr(s.$$.fragment,t),l=!0)},o(t){s&&gr(s.$$.fragment,t),l=!1},d(t){t&&$o(i),s&&Mr(s)}}}function om(t){let e,i,n=[],o=new Map,r=t[0];const s=t=>t[7].id;for(let e=0;e<r.length;e+=1){let i=im(t,r,e),a=s(i);o.set(a,n[e]=nm(a,i))}return{c(){e=wo("ul");for(let t=0;t<n.length;t+=1)n[t].c();Eo(e,"class","PinturaShapeStyleList")},m(t,o){xo(t,e,o);for(let t=0;t<n.length;t+=1)n[t].m(e,null);i=!0},p(t,i){3&i&&(r=t[0],pr(),n=wr(n,i,s,1,t,r,o,e,$r,nm,null,im),fr())},i(t){if(!i){for(let t=0;t<r.length;t+=1)mr(n[t]);i=!0}},o(t){for(let t=0;t<n.length;t+=1)gr(n[t]);i=!1},d(t){t&&$o(e);for(let t=0;t<n.length;t+=1)n[t].d()}}}function rm(t){let e,i,n;return i=new Nl({props:{class:"PinturaShapeStyles",elasticity:t[2],$$slots:{default:[om]},$$scope:{ctx:t}}}),{c(){e=wo("div"),Cr(i.$$.fragment),Eo(e,"style",t[3])},m(t,o){xo(t,e,o),Tr(i,e,null),n=!0},p(t,[o]){const r={};4&o&&(r.elasticity=t[2]),1027&o&&(r.$$scope={dirty:o,ctx:t}),i.$set(r),(!n||8&o)&&Eo(e,"style",t[3])},i(t){n||(mr(i.$$.fragment,t),n=!0)},o(t){gr(i.$$.fragment,t),n=!1},d(t){t&&$o(e),Mr(i)}}}function sm(t,e,i){let n,o,{isActive:r=!1}=e,{controls:s=[]}=e,{locale:a}=e,{scrollElasticity:l}=e;const c=Qs(0);return oo(t,c,(t=>i(6,o=t))),t.$$set=t=>{"isActive"in t&&i(5,r=t.isActive),"controls"in t&&i(0,s=t.controls),"locale"in t&&i(1,a=t.locale),"scrollElasticity"in t&&i(2,l=t.scrollElasticity)},t.$$.update=()=>{32&t.$$.dirty&&c.set(r?1:0),96&t.$$.dirty&&i(3,n=`opacity:${o};${r?"":"pointer-events:none;"}${o<=0?"visibility:hidden":""}`)},[s,a,l,n,c,r,o]}class am extends Er{constructor(t){super(),Pr(this,t,sm,rm,eo,{isActive:5,controls:0,locale:1,scrollElasticity:2})}}function lm(t,e,i){const n=t.slice();return n[11]=e[i].key,n[2]=e[i].controls,n[12]=e[i].isActive,n}function cm(t,e){let i,n,o;return n=new am({props:{isActive:e[12],controls:e[2],locale:e[0],scrollElasticity:e[1]}}),{key:t,first:null,c(){i=Co(),Cr(n.$$.fragment),this.first=i},m(t,e){xo(t,i,e),Tr(n,t,e),o=!0},p(t,i){e=t;const o={};8&i&&(o.isActive=e[12]),8&i&&(o.controls=e[2]),1&i&&(o.locale=e[0]),2&i&&(o.scrollElasticity=e[1]),n.$set(o)},i(t){o||(mr(n.$$.fragment,t),o=!0)},o(t){gr(n.$$.fragment,t),o=!1},d(t){t&&$o(i),Mr(n,t)}}}function hm(t){let e,i,n=[],o=new Map,r=t[3];const s=t=>t[11];for(let e=0;e<r.length;e+=1){let i=lm(t,r,e),a=s(i);o.set(a,n[e]=cm(a,i))}return{c(){e=wo("div");for(let t=0;t<n.length;t+=1)n[t].c();Eo(e,"class","PinturaShapeStyleEditor")},m(t,o){xo(t,e,o);for(let t=0;t<n.length;t+=1)n[t].m(e,null);i=!0},p(t,[i]){11&i&&(r=t[3],pr(),n=wr(n,i,s,1,t,r,o,e,$r,cm,null,lm),fr())},i(t){if(!i){for(let t=0;t<r.length;t+=1)mr(n[t]);i=!0}},o(t){for(let t=0;t<n.length;t+=1)gr(n[t]);i=!1},d(t){t&&$o(e);for(let t=0;t<n.length;t+=1)n[t].d()}}}function um(t,i,n){let o,r,s,{controls:a={}}=i,{shape:l}=i,{onchange:c}=i,{locale:h}=i,{scrollElasticity:u}=i;const d=[];return t.$$set=t=>{"controls"in t&&n(2,a=t.controls),"shape"in t&&n(4,l=t.shape),"onchange"in t&&n(5,c=t.onchange),"locale"in t&&n(0,h=t.locale),"scrollElasticity"in t&&n(1,u=t.scrollElasticity)},t.$$.update=()=>{4&t.$$.dirty&&n(6,o=Object.keys(a).filter((t=>a[t]))),80&t.$$.dirty&&n(7,r=l&&o&&tn(l)?(t=>o.filter((e=>e.split("_").every((e=>Je(t,e)&&tn(t,e))))).map((i=>{const n=i.split("_"),o=n.length>1?n.map((e=>t[e])):t[i];let[r,s]=a[i];if(e(r))if(a[r]){const t={...s};[r,s]=a[r],s={...s,...t}}else{if("Dropdown"!==r)return;r=dh}const l=P(s.options)?s.options(t):s.options;return{id:i,component:r,componentProps:{...s,options:l,locale:h,value:o,optionLabelClass:"PinturaButtonLabel",onchange:e=>{const o=C(e)&&!ti(e)?e.value:e;s.onchange&&s.onchange(o,t);const r=n.length>1?n.reduce(((t,e,i)=>({...t,[e]:Array.isArray(o)?o[i]:o})),{}):{[i]:o};c(r)}}}})).filter(Boolean))(l):[]),144&t.$$.dirty&&n(3,s=((t,e)=>{let i=d.find((e=>e.key===t));return i||(i={key:t,controls:e},d.push(i)),d.forEach((t=>t.isActive=!1)),i.controls=e,i.isActive=!0,d})(l?Object.keys(l).join("_"):"none",r||[]))},[h,u,a,s,l,c,o,r]}class dm extends Er{constructor(t){super(),Pr(this,t,um,hm,eo,{controls:2,shape:4,onchange:5,locale:0,scrollElasticity:1})}}function pm(t){let e,i,n;return{c(){e=wo("button"),Eo(e,"class","PinturaDragButton"),Eo(e,"title",t[1]),e.disabled=t[2]},m(o,r){xo(o,e,r),e.innerHTML=t[0],t[9](e),i||(n=To(e,"pointerdown",t[4]),i=!0)},p(t,[i]){1&i&&(e.innerHTML=t[0]),2&i&&Eo(e,"title",t[1]),4&i&&(e.disabled=t[2])},i:Xn,o:Xn,d(o){o&&$o(e),t[9](null),i=!1,n()}}}function fm(t,e,i){let n,{html:o}=e,{title:r}=e,{onclick:s}=e,{disabled:a=!1}=e,{ongrab:l=f}=e,{ondrag:c=f}=e,{ondrop:h=f}=e;const u=t=>pt(d,Q(t.pageX,t.pageY))<256;let d;const p=t=>{document.documentElement.removeEventListener("pointermove",m),document.documentElement.removeEventListener("pointerup",p);const e=Q(t.pageX,t.pageY);if(pt(d,e)<32)return s(t);u(t)||h(t)},m=t=>{u(t)||c(t)};return t.$$set=t=>{"html"in t&&i(0,o=t.html),"title"in t&&i(1,r=t.title),"onclick"in t&&i(5,s=t.onclick),"disabled"in t&&i(2,a=t.disabled),"ongrab"in t&&i(6,l=t.ongrab),"ondrag"in t&&i(7,c=t.ondrag),"ondrop"in t&&i(8,h=t.ondrop)},[o,r,a,n,t=>{d=Q(t.pageX,t.pageY),l(t),document.documentElement.addEventListener("pointermove",m),document.documentElement.addEventListener("pointerup",p)},s,l,c,h,function(t){Zo[t?"unshift":"push"]((()=>{n=t,i(3,n)}))}]}class mm extends Er{constructor(t){super(),Pr(this,t,fm,pm,eo,{html:0,title:1,onclick:5,disabled:2,ongrab:6,ondrag:7,ondrop:8})}}function gm(t,e,i){const n=t.slice();return n[14]=e[i],n}function ym(t,e){let i,n,o,r,s,a,l;function c(){return e[10](e[14])}function h(...t){return e[11](e[14],...t)}function u(...t){return e[12](e[14],...t)}function d(...t){return e[13](e[14],...t)}return n=new mm({props:{onclick:c,ongrab:h,ondrag:u,ondrop:d,disabled:e[1]||e[14].disabled,title:e[14].title,html:e[14].thumb}}),{key:t,first:null,c(){i=wo("li"),Cr(n.$$.fragment),o=So(),Eo(i,"class","PinturaShapePreset"),Eo(i,"style",e[6]),this.first=i},m(t,c){xo(t,i,c),Tr(n,i,null),bo(i,o),s=!0,a||(l=uo(r=e[8].call(null,i,e[14])),a=!0)},p(t,o){e=t;const a={};5&o&&(a.onclick=c),9&o&&(a.ongrab=h),17&o&&(a.ondrag=u),33&o&&(a.ondrop=d),3&o&&(a.disabled=e[1]||e[14].disabled),1&o&&(a.title=e[14].title),1&o&&(a.html=e[14].thumb),n.$set(a),(!s||64&o)&&Eo(i,"style",e[6]),r&&to(r.update)&&1&o&&r.update.call(null,e[14])},i(t){s||(mr(n.$$.fragment,t),s=!0)},o(t){gr(n.$$.fragment,t),s=!1},d(t){t&&$o(i),Mr(n),a=!1,l()}}}function vm(t){let e,i,n=[],o=new Map,r=t[0];const s=t=>t[14].id;for(let e=0;e<r.length;e+=1){let i=gm(t,r,e),a=s(i);o.set(a,n[e]=ym(a,i))}return{c(){e=wo("ul");for(let t=0;t<n.length;t+=1)n[t].c();Eo(e,"class","PinturaShapePresetsList")},m(t,o){xo(t,e,o);for(let t=0;t<n.length;t+=1)n[t].m(e,null);i=!0},p(t,[i]){127&i&&(r=t[0],pr(),n=wr(n,i,s,1,t,r,o,e,$r,ym,null,gm),fr())},i(t){if(!i){for(let t=0;t<r.length;t+=1)mr(n[t]);i=!0}},o(t){for(let t=0;t<n.length;t+=1)gr(n[t]);i=!1},d(t){t&&$o(e);for(let t=0;t<n.length;t+=1)n[t].d()}}}function bm(t,e,i){let n,o,{presets:r}=e,{disabled:s}=e,{onclickpreset:a}=e,{ongrabpreset:l}=e,{ondragpreset:c}=e,{ondroppreset:h}=e;const u=Zs(0,{duration:300});return oo(t,u,(t=>i(9,o=t))),Wo((()=>u.set(1))),t.$$set=t=>{"presets"in t&&i(0,r=t.presets),"disabled"in t&&i(1,s=t.disabled),"onclickpreset"in t&&i(2,a=t.onclickpreset),"ongrabpreset"in t&&i(3,l=t.ongrabpreset),"ondragpreset"in t&&i(4,c=t.ondragpreset),"ondroppreset"in t&&i(5,h=t.ondroppreset)},t.$$.update=()=>{512&t.$$.dirty&&i(6,n="opacity:"+o)},[r,s,a,l,c,h,n,u,(t,e)=>e.mount&&e.mount(t.firstChild,e),o,t=>a(t.id),(t,e)=>l&&l(t.id,e),(t,e)=>c&&c(t.id,e),(t,e)=>h&&h(t.id,e)]}class xm extends Er{constructor(t){super(),Pr(this,t,bm,vm,eo,{presets:0,disabled:1,onclickpreset:2,ongrabpreset:3,ondragpreset:4,ondroppreset:5})}}var $m=t=>/<svg /.test(t);function wm(t){let e,i;return e=new Nh({props:{items:t[13]}}),{c(){Cr(e.$$.fragment)},m(t,n){Tr(e,t,n),i=!0},p(t,i){const n={};8192&i&&(n.items=t[13]),e.$set(n)},i(t){i||(mr(e.$$.fragment,t),i=!0)},o(t){gr(e.$$.fragment,t),i=!1},d(t){Mr(e,t)}}}function _m(t){let e,i,n,o;const r=[Sm,km],s=[];function a(t,e){return t[7]?0:1}return e=a(t),i=s[e]=r[e](t),{c(){i.c(),n=Co()},m(t,i){s[e].m(t,i),xo(t,n,i),o=!0},p(t,o){let l=e;e=a(t),e===l?s[e].p(t,o):(pr(),gr(s[l],1,1,(()=>{s[l]=null})),fr(),i=s[e],i?i.p(t,o):(i=s[e]=r[e](t),i.c()),mr(i,1),i.m(n.parentNode,n))},i(t){o||(mr(i),o=!0)},o(t){gr(i),o=!1},d(t){s[e].d(t),t&&$o(n)}}}function km(t){let e,i,n,o,r=t[13]&&Cm(t);return n=new Nl({props:{scrollAutoCancel:t[6],elasticity:t[0],$$slots:{default:[Tm]},$$scope:{ctx:t}}}),{c(){e=wo("div"),r&&r.c(),i=So(),Cr(n.$$.fragment),Eo(e,"class","PinturaShapePresetsFlat")},m(t,s){xo(t,e,s),r&&r.m(e,null),bo(e,i),Tr(n,e,null),o=!0},p(t,o){t[13]?r?(r.p(t,o),8192&o&&mr(r,1)):(r=Cm(t),r.c(),mr(r,1),r.m(e,i)):r&&(pr(),gr(r,1,1,(()=>{r=null})),fr());const s={};64&o&&(s.scrollAutoCancel=t[6]),1&o&&(s.elasticity=t[0]),536870974&o&&(s.$$scope={dirty:o,ctx:t}),n.$set(s)},i(t){o||(mr(r),mr(n.$$.fragment,t),o=!0)},o(t){gr(r),gr(n.$$.fragment,t),o=!1},d(t){t&&$o(e),r&&r.d(),Mr(n)}}}function Sm(t){let e,i,n,o,r,s,a,l=t[13]&&Mm(t);const c=[{class:"PinturaControlList"},{tabs:t[8]},t[11],{layout:"compact"}];let h={$$slots:{default:[Am,({tab:t})=>({28:t}),({tab:t})=>t?268435456:0]},$$scope:{ctx:t}};for(let t=0;t<c.length;t+=1)h=Zn(h,c[t]);o=new nl({props:h}),o.$on("select",t[18]);const u=[{class:"PinturaControlPanels"},{panelClass:"PinturaControlPanel"},{panels:t[12]},t[11]];let d={$$slots:{default:[Rm,({panel:t,panelIsActive:e})=>({26:t,27:e}),({panel:t,panelIsActive:e})=>(t?67108864:0)|(e?134217728:0)]},$$scope:{ctx:t}};for(let t=0;t<u.length;t+=1)d=Zn(d,u[t]);return s=new ml({props:d}),{c(){e=wo("div"),i=wo("div"),l&&l.c(),n=So(),Cr(o.$$.fragment),r=So(),Cr(s.$$.fragment),Eo(i,"class","PinturaShapePresetsGroups"),Eo(e,"class","PinturaShapePresetsGrouped")},m(t,c){xo(t,e,c),bo(e,i),l&&l.m(i,null),bo(i,n),Tr(o,i,null),bo(e,r),Tr(s,e,null),a=!0},p(t,e){t[13]?l?(l.p(t,e),8192&e&&mr(l,1)):(l=Mm(t),l.c(),mr(l,1),l.m(i,n)):l&&(pr(),gr(l,1,1,(()=>{l=null})),fr());const r=2304&e?_r(c,[c[0],256&e&&{tabs:t[8]},2048&e&&kr(t[11]),c[3]]):{};805306368&e&&(r.$$scope={dirty:e,ctx:t}),o.$set(r);const a=6144&e?_r(u,[u[0],u[1],4096&e&&{panels:t[12]},2048&e&&kr(t[11])]):{};738198623&e&&(a.$$scope={dirty:e,ctx:t}),s.$set(a)},i(t){a||(mr(l),mr(o.$$.fragment,t),mr(s.$$.fragment,t),a=!0)},o(t){gr(l),gr(o.$$.fragment,t),gr(s.$$.fragment,t),a=!1},d(t){t&&$o(e),l&&l.d(),Mr(o),Mr(s)}}}function Cm(t){let e,i;return e=new Nh({props:{items:t[13]}}),{c(){Cr(e.$$.fragment)},m(t,n){Tr(e,t,n),i=!0},p(t,i){const n={};8192&i&&(n.items=t[13]),e.$set(n)},i(t){i||(mr(e.$$.fragment,t),i=!0)},o(t){gr(e.$$.fragment,t),i=!1},d(t){Mr(e,t)}}}function Tm(t){let e,i;return e=new xm({props:{presets:t[5],onclickpreset:t[1],ongrabpreset:t[2],ondragpreset:t[3],ondroppreset:t[4]}}),{c(){Cr(e.$$.fragment)},m(t,n){Tr(e,t,n),i=!0},p(t,i){const n={};32&i&&(n.presets=t[5]),2&i&&(n.onclickpreset=t[1]),4&i&&(n.ongrabpreset=t[2]),8&i&&(n.ondragpreset=t[3]),16&i&&(n.ondroppreset=t[4]),e.$set(n)},i(t){i||(mr(e.$$.fragment,t),i=!0)},o(t){gr(e.$$.fragment,t),i=!1},d(t){Mr(e,t)}}}function Mm(t){let e,i;return e=new Nh({props:{items:t[13]}}),{c(){Cr(e.$$.fragment)},m(t,n){Tr(e,t,n),i=!0},p(t,i){const n={};8192&i&&(n.items=t[13]),e.$set(n)},i(t){i||(mr(e.$$.fragment,t),i=!0)},o(t){gr(e.$$.fragment,t),i=!1},d(t){Mr(e,t)}}}function Pm(t){let e,i;return e=new wl({props:{$$slots:{default:[Em]},$$scope:{ctx:t}}}),{c(){Cr(e.$$.fragment)},m(t,n){Tr(e,t,n),i=!0},p(t,i){const n={};805306368&i&&(n.$$scope={dirty:i,ctx:t}),e.$set(n)},i(t){i||(mr(e.$$.fragment,t),i=!0)},o(t){gr(e.$$.fragment,t),i=!1},d(t){Mr(e,t)}}}function Em(t){let e,i=t[28].icon+"";return{c(){e=_o("g")},m(t,n){xo(t,e,n),e.innerHTML=i},p(t,n){268435456&n&&i!==(i=t[28].icon+"")&&(e.innerHTML=i)},d(t){t&&$o(e)}}}function Im(t){let e,i,n=t[28].label+"";return{c(){e=wo("span"),i=ko(n)},m(t,n){xo(t,e,n),bo(e,i)},p(t,e){268435456&e&&n!==(n=t[28].label+"")&&Ao(i,n)},d(t){t&&$o(e)}}}function Am(t){let e,i,n,o=t[28].icon&&Pm(t),r=!t[28].hideLabel&&Im(t);return{c(){o&&o.c(),e=So(),r&&r.c(),i=Co()},m(t,s){o&&o.m(t,s),xo(t,e,s),r&&r.m(t,s),xo(t,i,s),n=!0},p(t,n){t[28].icon?o?(o.p(t,n),268435456&n&&mr(o,1)):(o=Pm(t),o.c(),mr(o,1),o.m(e.parentNode,e)):o&&(pr(),gr(o,1,1,(()=>{o=null})),fr()),t[28].hideLabel?r&&(r.d(1),r=null):r?r.p(t,n):(r=Im(t),r.c(),r.m(i.parentNode,i))},i(t){n||(mr(o),n=!0)},o(t){gr(o),n=!1},d(t){o&&o.d(t),t&&$o(e),r&&r.d(t),t&&$o(i)}}}function Dm(t){let e,i;return e=new xm({props:{presets:t[10][t[26]].items,disabled:t[10][t[26]].disabled,onclickpreset:t[1],ongrabpreset:t[2],ondragpreset:t[3],ondroppreset:t[4]}}),{c(){Cr(e.$$.fragment)},m(t,n){Tr(e,t,n),i=!0},p(t,i){const n={};67109888&i&&(n.presets=t[10][t[26]].items),67109888&i&&(n.disabled=t[10][t[26]].disabled),2&i&&(n.onclickpreset=t[1]),4&i&&(n.ongrabpreset=t[2]),8&i&&(n.ondragpreset=t[3]),16&i&&(n.ondroppreset=t[4]),e.$set(n)},i(t){i||(mr(e.$$.fragment,t),i=!0)},o(t){gr(e.$$.fragment,t),i=!1},d(t){Mr(e,t)}}}function Rm(t){let e,i;return e=new Nl({props:{scroll:t[27]?{scrollOffset:0,animate:!1}:void 0,scrollAutoCancel:t[6],elasticity:t[0],$$slots:{default:[Dm]},$$scope:{ctx:t}}}),{c(){Cr(e.$$.fragment)},m(t,n){Tr(e,t,n),i=!0},p(t,i){const n={};134217728&i&&(n.scroll=t[27]?{scrollOffset:0,animate:!1}:void 0),64&i&&(n.scrollAutoCancel=t[6]),1&i&&(n.elasticity=t[0]),603980830&i&&(n.$$scope={dirty:i,ctx:t}),e.$set(n)},i(t){i||(mr(e.$$.fragment,t),i=!0)},o(t){gr(e.$$.fragment,t),i=!1},d(t){Mr(e,t)}}}function Lm(t){let e,i,n,o;const r=[_m,wm],s=[];function a(t,e){return t[6]?0:t[13]?1:-1}return~(i=a(t))&&(n=s[i]=r[i](t)),{c(){e=wo("div"),n&&n.c(),Eo(e,"class","PinturaShapePresetsPalette")},m(t,n){xo(t,e,n),~i&&s[i].m(e,null),o=!0},p(t,[o]){let l=i;i=a(t),i===l?~i&&s[i].p(t,o):(n&&(pr(),gr(s[l],1,1,(()=>{s[l]=null})),fr()),~i?(n=s[i],n?n.p(t,o):(n=s[i]=r[i](t),n.c()),mr(n,1),n.m(e,null)):n=null)},i(t){o||(mr(n),o=!0)},o(t){gr(n),o=!1},d(t){t&&$o(e),~i&&s[i].d()}}}function Om(t,i,n){let o,r,s,a,l,c,h,u,d,{locale:p}=i,{presets:m}=i,{scrollElasticity:g}=i,{enableSelectImage:y=!0}=i,{willRenderPresetToolbar:v=Y}=i,{onaddpreset:b=f}=i,{ongrabpreset:x}=i,{ondragpreset:$}=i,{ondroppreset:w}=i;const _="presets-"+A(),k=(t,e="")=>$m(t)?t:Qe(t)?ri(t,e):`<img src="${t}" alt="${e}"/>`,S=t=>B(ve(t)),C=["src","alt","thumb","shape","id","mount","disabled"],T=t=>t.map((t=>(t=>ti(t)&&e(t[0])&&ti(t[1]))(t)?{...t[2],id:`${_}-${t[0].toLowerCase()}`,label:t[0],items:T(t[1])}:(t=>{let i,n,o,r,s,a,l,c=t;return e(t)?Qe(t)?(i=t,s=t,r=k(i,s)):(i=t,s=S(i),r=k(i,s)):(i=t.src,s=t.alt||(e(i)?S(i):e(t.thumb)?S(t.thumb):void 0),r=k(t.thumb||i,s),n=t.shape,a=t.mount,l=t.disabled,o=Object.keys(t).reduce(((e,i)=>(C.includes(i)||(e[i]=t[i]),e)),{})),{id:c,src:i,thumb:r,shape:n,shapeProps:o,alt:s,title:s,mount:a,disabled:l}})(t)));return t.$$set=t=>{"locale"in t&&n(14,p=t.locale),"presets"in t&&n(15,m=t.presets),"scrollElasticity"in t&&n(0,g=t.scrollElasticity),"enableSelectImage"in t&&n(16,y=t.enableSelectImage),"willRenderPresetToolbar"in t&&n(17,v=t.willRenderPresetToolbar),"onaddpreset"in t&&n(1,b=t.onaddpreset),"ongrabpreset"in t&&n(2,x=t.ongrabpreset),"ondragpreset"in t&&n(3,$=t.ondragpreset),"ondroppreset"in t&&n(4,w=t.ondroppreset)},t.$$.update=()=>{32768&t.$$.dirty&&n(5,o=T(m)),32&t.$$.dirty&&n(6,r=o.length),96&t.$$.dirty&&n(7,s=r&&o.some((t=>!!t.items))),160&t.$$.dirty&&n(8,a=s&&o),160&t.$$.dirty&&n(10,l=s&&o.reduce(((t,e)=>(t[e.id]=e,t)),{})),768&t.$$.dirty&&n(9,c=c||a&&(a.find((t=>!t.disabled))||{}).id),512&t.$$.dirty&&n(11,h={name:_,selected:c}),256&t.$$.dirty&&n(12,u=a&&a.map((t=>t.id))),212994&t.$$.dirty&&n(13,d=p&&v([y&&["Button","browse",{label:p.shapeLabelButtonSelectSticker,icon:p.shapeIconButtonSelectSticker,onclick:()=>{eu().then((t=>{t&&b(t)}))}}]]))},[g,b,x,$,w,o,r,s,a,c,l,h,u,d,p,m,y,v,({detail:t})=>n(9,c=t)]}class zm extends Er{constructor(t){super(),Pr(this,t,Om,Lm,eo,{locale:14,presets:15,scrollElasticity:0,enableSelectImage:16,willRenderPresetToolbar:17,onaddpreset:1,ongrabpreset:2,ondragpreset:3,ondroppreset:4})}}function Fm(t){let e,i,n,o;const r=[{locale:t[4]},{uid:t[14]},{parentRect:t[27]},{rootRect:t[36]},{utilRect:t[28]},{offset:t[38]},{disabled:!t[33]&&t[31]},{contextRotation:t[17]},{contextFlipX:t[18]},{contextFlipY:t[19]},{contextZoom:t[22]||t[24]},{active:t[23]},{opacity:t[32]},{hoverColor:t[50]},{eraseRadius:t[40]},{selectRadius:t[6]},{enableButtonFlipVertical:t[9]},{mapEditorPointToImagePoint:t[15]},{mapImagePointToEditorPoint:t[16]},{enableTapToAddText:t[12]},{textInputMode:t[7]},{oninteractionstart:t[71]},{oninteractionupdate:t[72]},{oninteractionrelease:t[73]},{oninteractionend:t[75]},{oninteractioncancel:t[74]},{onhovershape:t[77]},{onaddshape:t[131]},{onselectshape:t[132]},{ontapshape:t[133]},{onupdateshape:t[134]},{onremoveshape:t[135]},t[47]];function s(e){t[137](e)}function a(e){t[138](e)}let l={};for(let t=0;t<r.length;t+=1)l=Zn(l,r[t]);return void 0!==t[29]&&(l.markup=t[29]),void 0!==t[49]&&(l.ui=t[49]),e=new em({props:l}),t[136](e),Zo.push((()=>Sr(e,"markup",s))),Zo.push((()=>Sr(e,"ui",a))),{c(){Cr(e.$$.fragment)},m(t,i){Tr(e,t,i),o=!0},p(t,o){const s=433050320&o[0]|590759&o[1]|67157504&o[2]?_r(r,[16&o[0]&&{locale:t[4]},16384&o[0]&&{uid:t[14]},134217728&o[0]&&{parentRect:t[27]},32&o[1]&&{rootRect:t[36]},268435456&o[0]&&{utilRect:t[28]},128&o[1]&&{offset:t[38]},5&o[1]&&{disabled:!t[33]&&t[31]},131072&o[0]&&{contextRotation:t[17]},262144&o[0]&&{contextFlipX:t[18]},524288&o[0]&&{contextFlipY:t[19]},20971520&o[0]&&{contextZoom:t[22]||t[24]},8388608&o[0]&&{active:t[23]},2&o[1]&&{opacity:t[32]},524288&o[1]&&{hoverColor:t[50]},512&o[1]&&{eraseRadius:t[40]},64&o[0]&&{selectRadius:t[6]},512&o[0]&&{enableButtonFlipVertical:t[9]},32768&o[0]&&{mapEditorPointToImagePoint:t[15]},65536&o[0]&&{mapImagePointToEditorPoint:t[16]},4096&o[0]&&{enableTapToAddText:t[12]},128&o[0]&&{textInputMode:t[7]},512&o[2]&&{oninteractionstart:t[71]},1024&o[2]&&{oninteractionupdate:t[72]},2048&o[2]&&{oninteractionrelease:t[73]},8192&o[2]&&{oninteractionend:t[75]},4096&o[2]&&{oninteractioncancel:t[74]},32768&o[2]&&{onhovershape:t[77]},256&o[1]|67108864&o[2]&&{onaddshape:t[131]},256&o[1]&&{onselectshape:t[132]},256&o[1]&&{ontapshape:t[133]},256&o[1]|67108864&o[2]&&{onupdateshape:t[134]},256&o[1]|67108864&o[2]&&{onremoveshape:t[135]},65536&o[1]&&kr(t[47])]):{};!i&&536870912&o[0]&&(i=!0,s.markup=t[29],or((()=>i=!1))),!n&&262144&o[1]&&(n=!0,s.ui=t[49],or((()=>n=!1))),e.$set(s)},i(t){o||(mr(e.$$.fragment,t),o=!0)},o(t){gr(e.$$.fragment,t),o=!1},d(i){t[136](null),Mr(e,i)}}}function Bm(t){let e,i,n,o,r,s=t[37]&&Fm(t);return{c(){e=wo("div"),s&&s.c(),Eo(e,"slot","main"),Eo(e,"style",i="cursor: "+t[41])},m(i,a){xo(i,e,a),s&&s.m(e,null),t[139](e),n=!0,o||(r=[uo(l.call(null,e)),To(e,"dropfiles",(function(){to(t[11]?t[82]:f)&&(t[11]?t[82]:f).apply(this,arguments)})),uo(ha.call(null,e)),To(e,"measure",t[129]),To(e,"wheel",(function(){to(t[43]?t[87]:f)&&(t[43]?t[87]:f).apply(this,arguments)}),{passive:!1}),To(e,"interactionstart",(function(){to(t[44]?t[83]:f)&&(t[44]?t[83]:f).apply(this,arguments)})),To(e,"interactionupdate",(function(){to(t[44]?t[84]:f)&&(t[44]?t[84]:f).apply(this,arguments)})),To(e,"interactionrelease",(function(){to(t[44]?t[85]:f)&&(t[44]?t[85]:f).apply(this,arguments)})),To(e,"interactionend",(function(){to(t[44]?t[86]:f)&&(t[44]?t[86]:f).apply(this,arguments)})),uo(Il.call(null,e,{drag:!0,pinch:!0,inertia:!0,shouldStartInteraction:t[140]}))],o=!0)},p(o,r){(t=o)[37]?s?(s.p(t,r),64&r[1]&&mr(s,1)):(s=Fm(t),s.c(),mr(s,1),s.m(e,null)):s&&(pr(),gr(s,1,1,(()=>{s=null})),fr()),(!n||1024&r[1]&&i!==(i="cursor: "+t[41]))&&Eo(e,"style",i)},i(t){n||(mr(s),n=!0)},o(t){gr(s),n=!1},d(i){i&&$o(e),s&&s.d(),t[139](null),o=!1,Jn(r)}}}function Nm(t){let e,i;return e=new zm({props:{locale:t[4],presets:t[13],enableSelectImage:t[10],willRenderPresetToolbar:t[46],onaddpreset:t[81],ongrabpreset:t[78],ondragpreset:t[79],ondroppreset:t[80],scrollElasticity:t[45]}}),{c(){Cr(e.$$.fragment)},m(t,n){Tr(e,t,n),i=!0},p(t,i){const n={};16&i[0]&&(n.locale=t[4]),8192&i[0]&&(n.presets=t[13]),1024&i[0]&&(n.enableSelectImage=t[10]),32768&i[1]&&(n.willRenderPresetToolbar=t[46]),16384&i[1]&&(n.scrollElasticity=t[45]),e.$set(n)},i(t){i||(mr(e.$$.fragment,t),i=!0)},o(t){gr(e.$$.fragment,t),i=!1},d(t){Mr(e,t)}}}function Hm(t){let e,i,n,o,r,s;const a=[jm,Wm],l=[];function c(t,e){return t[42]?0:1}i=c(t),n=l[i]=a[i](t);let h=t[26]&&Ym(t);return{c(){e=wo("div"),n.c(),o=So(),h&&h.c(),r=Co(),Eo(e,"class","PinturaControlPanels")},m(t,n){xo(t,e,n),l[i].m(e,null),xo(t,o,n),h&&h.m(t,n),xo(t,r,n),s=!0},p(t,o){let s=i;i=c(t),i===s?l[i].p(t,o):(pr(),gr(l[s],1,1,(()=>{l[s]=null})),fr(),n=l[i],n?n.p(t,o):(n=l[i]=a[i](t),n.c()),mr(n,1),n.m(e,null)),t[26]?h?(h.p(t,o),67108864&o[0]&&mr(h,1)):(h=Ym(t),h.c(),mr(h,1),h.m(r.parentNode,r)):h&&(pr(),gr(h,1,1,(()=>{h=null})),fr())},i(t){s||(mr(n),mr(h),s=!0)},o(t){gr(n),gr(h),s=!1},d(t){t&&$o(e),l[i].d(),t&&$o(o),h&&h.d(t),t&&$o(r)}}}function Wm(t){let e,i,n;return i=new dm({props:{locale:t[4],shape:t[30],onchange:t[76],controls:t[8],scrollElasticity:t[45]}}),{c(){e=wo("div"),Cr(i.$$.fragment),Eo(e,"class","PinturaControlPanel")},m(t,o){xo(t,e,o),Tr(i,e,null),n=!0},p(t,e){const n={};16&e[0]&&(n.locale=t[4]),1073741824&e[0]&&(n.shape=t[30]),256&e[0]&&(n.controls=t[8]),16384&e[1]&&(n.scrollElasticity=t[45]),i.$set(n)},i(t){n||(mr(i.$$.fragment,t),n=!0)},o(t){gr(i.$$.fragment,t),n=!1},d(t){t&&$o(e),Mr(i)}}}function jm(t){let e,i,n;return i=new zm({props:{locale:t[4],presets:t[13],enableSelectImage:t[10],willRenderPresetToolbar:t[46],onaddpreset:t[81],ongrabpreset:t[78],ondragpreset:t[79],ondroppreset:t[80],scrollElasticity:t[45]}}),{c(){e=wo("div"),Cr(i.$$.fragment),Eo(e,"class","PinturaControlPanel")},m(t,o){xo(t,e,o),Tr(i,e,null),n=!0},p(t,e){const n={};16&e[0]&&(n.locale=t[4]),8192&e[0]&&(n.presets=t[13]),1024&e[0]&&(n.enableSelectImage=t[10]),32768&e[1]&&(n.willRenderPresetToolbar=t[46]),16384&e[1]&&(n.scrollElasticity=t[45]),i.$set(n)},i(t){n||(mr(i.$$.fragment,t),n=!0)},o(t){gr(i.$$.fragment,t),n=!1},d(t){t&&$o(e),Mr(i)}}}function Ym(t){let e,i;return e=new Nl({props:{class:"PinturaControlListScroller",elasticity:t[45],$$slots:{default:[Xm]},$$scope:{ctx:t}}}),{c(){Cr(e.$$.fragment)},m(t,n){Tr(e,t,n),i=!0},p(t,i){const n={};16384&i[1]&&(n.elasticity=t[45]),33554449&i[0]|134217728&i[5]&&(n.$$scope={dirty:i,ctx:t}),e.$set(n)},i(t){i||(mr(e.$$.fragment,t),i=!0)},o(t){gr(e.$$.fragment,t),i=!1},d(t){Mr(e,t)}}}function Vm(t){let e,i;return e=new wl({props:{$$slots:{default:[Um]},$$scope:{ctx:t}}}),{c(){Cr(e.$$.fragment)},m(t,n){Tr(e,t,n),i=!0},p(t,i){const n={};16&i[0]|201326592&i[5]&&(n.$$scope={dirty:i,ctx:t}),e.$set(n)},i(t){i||(mr(e.$$.fragment,t),i=!0)},o(t){gr(e.$$.fragment,t),i=!1},d(t){Mr(e,t)}}}function Um(t){let e,i=(P(t[181].icon)?t[181].icon(t[4]):t[181].icon)+"";return{c(){e=_o("g")},m(t,n){xo(t,e,n),e.innerHTML=i},p(t,n){16&n[0]|67108864&n[5]&&i!==(i=(P(t[181].icon)?t[181].icon(t[4]):t[181].icon)+"")&&(e.innerHTML=i)},d(t){t&&$o(e)}}}function qm(t){let e,i,n,o,r,s=(P(t[181].label)?t[181].label(t[4]):t[181].label)+"",a=t[181].icon&&Vm(t);return{c(){e=wo("div"),a&&a.c(),i=So(),n=wo("span"),o=ko(s),Eo(e,"slot","option")},m(t,s){xo(t,e,s),a&&a.m(e,null),bo(e,i),bo(e,n),bo(n,o),r=!0},p(t,n){t[181].icon?a?(a.p(t,n),67108864&n[5]&&mr(a,1)):(a=Vm(t),a.c(),mr(a,1),a.m(e,i)):a&&(pr(),gr(a,1,1,(()=>{a=null})),fr()),(!r||16&n[0]|67108864&n[5])&&s!==(s=(P(t[181].label)?t[181].label(t[4]):t[181].label)+"")&&Ao(o,s)},i(t){r||(mr(a),r=!0)},o(t){gr(a),r=!1},d(t){t&&$o(e),a&&a.d()}}}function Xm(t){let e,i;return e=new Qc({props:{locale:t[4],class:"PinturaControlList",optionClass:"PinturaControlListOption",layout:"row",options:t[25],selectedIndex:t[25].findIndex(t[130]),onchange:t[70],$$slots:{option:[qm,({option:t})=>({181:t}),({option:t})=>[0,0,0,0,0,t?67108864:0]]},$$scope:{ctx:t}}}),{c(){Cr(e.$$.fragment)},m(t,n){Tr(e,t,n),i=!0},p(t,i){const n={};16&i[0]&&(n.locale=t[4]),33554432&i[0]&&(n.options=t[25]),33554433&i[0]&&(n.selectedIndex=t[25].findIndex(t[130])),16&i[0]|201326592&i[5]&&(n.$$scope={dirty:i,ctx:t}),e.$set(n)},i(t){i||(mr(e.$$.fragment,t),i=!0)},o(t){gr(e.$$.fragment,t),i=!1},d(t){Mr(e,t)}}}function Gm(t){let e,i,n,o;const r=[Hm,Nm],s=[];function a(t,e){return t[35]?0:t[42]?1:-1}return~(i=a(t))&&(n=s[i]=r[i](t)),{c(){e=wo("div"),n&&n.c(),Eo(e,"slot","footer"),Eo(e,"style",t[48])},m(t,n){xo(t,e,n),~i&&s[i].m(e,null),o=!0},p(t,l){let c=i;i=a(t),i===c?~i&&s[i].p(t,l):(n&&(pr(),gr(s[c],1,1,(()=>{s[c]=null})),fr()),~i?(n=s[i],n?n.p(t,l):(n=s[i]=r[i](t),n.c()),mr(n,1),n.m(e,null)):n=null),(!o||131072&l[1])&&Eo(e,"style",t[48])},i(t){o||(mr(n),o=!0)},o(t){gr(n),o=!1},d(t){t&&$o(e),~i&&s[i].d()}}}function Zm(t){let e,i;return e=new np({props:{$$slots:{footer:[Gm],main:[Bm]},$$scope:{ctx:t}}}),e.$on("measure",t[141]),{c(){Cr(e.$$.fragment)},m(t,n){Tr(e,t,n),i=!0},p(t,i){const n={};2146435025&i[0]|1048575&i[1]|134217728&i[5]&&(n.$$scope={dirty:i,ctx:t}),e.$set(n)},i(t){i||(mr(e.$$.fragment,t),i=!0)},o(t){gr(e.$$.fragment,t),i=!1},d(t){Mr(e,t)}}}function Km(t,i,n){let o,r,s,a,l,c,h,u,d,p,f,m,g,y,v,b,x,$,w,_,k,S,C,T,M,P,E,I,A,D,R,L,O,z,F,B,N,H,W,j,V,U,q,X,G,Z,J,tt,it,nt,rt,st,at,lt,ct,dt,pt,mt,gt,yt,vt,bt=Xn,xt=()=>(bt(),bt=io(Pt,(t=>n(23,W=t))),Pt),$t=Xn,wt=()=>($t(),$t=io(ce,(t=>n(27,q=t))),ce),_t=Xn,kt=()=>(_t(),_t=io(It,(t=>n(117,Z=t))),It),St=Xn,Ct=()=>(St(),St=io(Rt,(t=>n(29,it=t))),Rt),Tt=Xn,Mt=()=>(Tt(),Tt=io(Et,(t=>n(32,rt=t))),Et);t.$$.on_destroy.push((()=>bt())),t.$$.on_destroy.push((()=>$t())),t.$$.on_destroy.push((()=>_t())),t.$$.on_destroy.push((()=>St())),t.$$.on_destroy.push((()=>Tt()));let{isActive:Pt}=i;xt();let{isActiveFraction:Et}=i;Mt();let{isVisible:It}=i;kt();let{stores:At}=i,{locale:Dt={}}=i,{shapes:Rt}=i;Ct();let{toolbar:Lt=[]}=i,{toolShapes:Ot=[]}=i,{toolActive:Ft}=i,{toolSelectRadius:Bt}=i,{zoomOptions:Nt=[.25,.5,1,1.25,1.5,2,3,4,6,8,16]}=i,{textInputMode:Ht}=i,{shapeControls:Wt={}}=i,{enableButtonFlipVertical:jt=!1}=i,{enablePresetSelectImage:Yt=!0}=i,{enablePresetDropImage:Xt=!0}=i,{enableZoom:Gt=!0}=i,{enablePan:Zt=!0}=i,{enableSelectToolToAddShape:Kt=!1}=i,{enableTapToAddText:Qt=!1}=i,{enableZoomControls:Jt=!1}=i,{willRenderPresetToolbar:te}=i,{shapePresets:ee=[]}=i,{utilKey:ne}=i,{mapScreenPointToImagePoint:oe}=i,{mapImagePointToScreenPoint:re}=i,{imageRotation:se=0}=i,{imageFlipX:ae=!1}=i,{imageFlipY:le=!1}=i,{parentRect:ce}=i;wt();let{hooks:he={}}=i;const{env:ue,animation:de,history:pe,rootRect:fe,rootColorSecondary:me,stageRect:ge,stageScalar:ye,utilRect:ve,utilTools:be,elasticityMultiplier:xe,scrollElasticity:$e,imageOverlayMarkup:we,imagePreviewModifiers:_e,imageCropRect:ke,shapePreprocessor:Se,imageSelectionRect:Ce,imageSelectionZoom:Te,imageSelectionPan:Me,imageSelectionStageFitScalar:Pe,imageSelectionStoredState:Ee,imagePreviewUpscale:Ie,isInteracting:Ae}=At;oo(t,ue,(t=>n(126,pt=t))),oo(t,de,(t=>n(127,mt=t))),oo(t,fe,(t=>n(36,X=t))),oo(t,me,(t=>n(50,vt=t))),oo(t,ge,(t=>n(118,tt=t))),oo(t,ye,(t=>n(103,j=t))),oo(t,ve,(t=>n(28,J=t))),oo(t,we,(t=>n(49,yt=t))),oo(t,_e,(t=>n(115,G=t))),oo(t,ke,(t=>n(158,st=t))),oo(t,Se,(t=>n(123,nt=t))),oo(t,Ce,(t=>n(160,ct=t))),oo(t,Te,(t=>n(22,N=t))),oo(t,Me,(t=>n(154,B=t))),oo(t,Pe,(t=>n(24,U=t))),oo(t,Ee,(t=>n(155,H=t))),oo(t,Ie,(t=>n(105,V=t))),oo(t,Ae,(t=>n(159,lt=t)));const De=(t={})=>{const{pan:e=B,zoom:i=N}=t;ho(Ee,H={translation:e,zoom:i},H)},Re=()=>{ho(Te,N=void 0,N),ho(Me,B=K(),B),Oe.set(void 0,{hard:!0})},Le=()=>{Re(),De()},Oe=Qs(void 0,{precision:.01});Oe.subscribe((t=>{if(void 0===t)return ho(Te,N=void 0,N),void ho(Me,B=K(),B);const e=N;t<=1?ho(Me,B=K(),B):t<=e&&ho(Me,B=ut(B,.8),B),ho(Te,N=t,N)}));const ze=t=>{Oe.update((e=>{const i=t(e||U);return De({zoom:i}),i}))},Fe=qo("keysPressed");oo(t,Fe,(t=>n(124,at=t)));const Be=t=>oe(Af(t,X));let Ne,He,We,je,Ye={};const Ve=(t,i,n)=>{let o=!1;i||(o=!0,i=P?oe(Vt(tt)):Vt(st)),i.x-=q.x||0,i.y-=q.y||0,(ae||le)&&(t.flipX=ae,t.flipY=le);const r=Ne.getShapesNearPosition(i);if(o&&r.length){const t=.1*Math.min(st.width,st.height);i.x+=Math.round(-t+Math.random()*t*2),i.y+=Math.round(-t+Math.random()*t*2)}if(0!==se&&(t.rotation=ae&&le?-se:ae||le?se:-se),Je(t,"width")&&Je(t,"height")){const{width:e,height:n}=$n(t,["width","height"],q);wn(t,{x:i.x-.5*e,y:i.y-.5*n},q)}else if(Ni(t))wn(t,{x:i.x,y:i.y},q);else if(Hi(t)){const{x1:o,y1:r,x2:s,y2:a}=$n(t,["x1","y1","x2","y2"],q),l=ft(Q(o,r),Q(s,a))||e(n)?fn(n,q.width):n;wn(t,{x1:i.x-l,y1:i.y+l,x2:i.x+l,y2:i.y-l},q)}return t},Ue=(t,e)=>{const i=Ve(Di(t,st),e);return t.shape&&(Je(t.shape,"x")&&(i.x=t.shape.x),Je(t.shape,"y")&&(i.y=t.shape.y)),qe(i)},qe=t=>{const{beforeAddShape:e=(()=>!0)}=he;if(e(t))return Ne.addShape(t),Ne.selectShape(t),pe.write(),R("addshape",t),t};let Xe,Ge,Ze,Qe,ti,ei=!1,ii=Date.now(),ni=0,oi=!1,ri=!1;const si=()=>pe.write();let ai;const li=Dr({});oo(t,li,(t=>n(125,dt=t)));const ci=Qs(mt?20:0);return oo(t,ci,(t=>n(128,gt=t))),t.$$set=t=>{"isActive"in t&&xt(n(1,Pt=t.isActive)),"isActiveFraction"in t&&Mt(n(2,Et=t.isActiveFraction)),"isVisible"in t&&kt(n(3,It=t.isVisible)),"stores"in t&&n(91,At=t.stores),"locale"in t&&n(4,Dt=t.locale),"shapes"in t&&Ct(n(5,Rt=t.shapes)),"toolbar"in t&&n(92,Lt=t.toolbar),"toolShapes"in t&&n(93,Ot=t.toolShapes),"toolActive"in t&&n(0,Ft=t.toolActive),"toolSelectRadius"in t&&n(6,Bt=t.toolSelectRadius),"zoomOptions"in t&&n(94,Nt=t.zoomOptions),"textInputMode"in t&&n(7,Ht=t.textInputMode),"shapeControls"in t&&n(8,Wt=t.shapeControls),"enableButtonFlipVertical"in t&&n(9,jt=t.enableButtonFlipVertical),"enablePresetSelectImage"in t&&n(10,Yt=t.enablePresetSelectImage),"enablePresetDropImage"in t&&n(11,Xt=t.enablePresetDropImage),"enableZoom"in t&&n(95,Gt=t.enableZoom),"enablePan"in t&&n(96,Zt=t.enablePan),"enableSelectToolToAddShape"in t&&n(97,Kt=t.enableSelectToolToAddShape),"enableTapToAddText"in t&&n(12,Qt=t.enableTapToAddText),"enableZoomControls"in t&&n(98,Jt=t.enableZoomControls),"willRenderPresetToolbar"in t&&n(99,te=t.willRenderPresetToolbar),"shapePresets"in t&&n(13,ee=t.shapePresets),"utilKey"in t&&n(14,ne=t.utilKey),"mapScreenPointToImagePoint"in t&&n(15,oe=t.mapScreenPointToImagePoint),"mapImagePointToScreenPoint"in t&&n(16,re=t.mapImagePointToScreenPoint),"imageRotation"in t&&n(17,se=t.imageRotation),"imageFlipX"in t&&n(18,ae=t.imageFlipX),"imageFlipY"in t&&n(19,le=t.imageFlipY),"parentRect"in t&&wt(n(20,ce=t.parentRect)),"hooks"in t&&n(100,he=t.hooks)},t.$$.update=()=>{var e,i,L;8388608&t.$$.dirty[0]&&(W?(ho(Te,N=Gt?H.zoom:void 0,N),ho(Me,B=Zt?et(H.translation):K(),B),Oe.set(N)):Re()),1024&t.$$.dirty[3]&&(o=j>=1),16777232&t.$$.dirty[0]|5122&t.$$.dirty[3]&&n(104,r=[(V||j<1)&&[void 0,Nu(U)+"%",{sublabel:Dt.labelZoomFit}],...Nt.map((t=>[t,Nu(t)+"%"]))].filter(Boolean).map((t=>(1===t[0]&&(t[2]={sublabel:Dt.labelZoomActual}),t))).sort(((t,e)=>{const i=t[0]||U,n=e[0]||U;return i<n?-1:n<i?1:0}))),16777216&t.$$.dirty[0]|2048&t.$$.dirty[3]&&n(106,s=Math.min(r.reduce(((t,[e])=>e<t?e:t),Number.MAX_SAFE_INTEGER),U)),2048&t.$$.dirty[3]&&n(107,a=r.reduce(((t,[e])=>e>t?e:t),Number.MIN_SAFE_INTEGER)),20971520&t.$$.dirty[0]|5120&t.$$.dirty[3]&&n(109,c=N||(V||j<1?U:1)),67584&t.$$.dirty[3]&&n(108,(e=r.map((([t])=>t)),i=c,l=e.findIndex((t=>t===i)))),65536&t.$$.dirty[3]&&n(110,h=Nu(c)+"%"),4194320&t.$$.dirty[0]|190496&t.$$.dirty[3]&&n(111,u=Jt&&[["Button","zoom-out",{hideLabel:!0,label:Dt.labelZoomOut,icon:Dt.iconZoomOut,disabled:N===s,onclick:()=>ze((t=>Math.max(s,t-.25))),onhold:()=>ze((t=>Math.max(s,.9*t)))}],["Dropdown","zoom-level",{label:h,labelClass:"PinturaFixedWidthCharacters",options:r,selectedIndex:l,onchange:t=>{return(e=t.value)?Oe.set(e):(e=void 0,Oe.set(void 0,{hard:!0})),void De({zoom:e});var e}}],["Button","zoom-in",{hideLabel:!0,label:Dt.labelZoomIn,icon:Dt.iconZoomIn,disabled:N===a,onclick:()=>ze((t=>Math.min(a,t+.25))),onhold:()=>ze((t=>Math.min(a,1.1*t)))}]]),8388608&t.$$.dirty[0]|262144&t.$$.dirty[3]&&W&&u&&be.set(u),8192&t.$$.dirty[0]|1073741824&t.$$.dirty[2]|64&t.$$.dirty[3]&&n(25,d=0!==ee.length||te?Lt:Lt.filter((t=>"preset"!==t[0]))),256&t.$$.dirty[0]&&n(112,p=Object.keys(Wt).length),33554432&t.$$.dirty[0]&&n(26,f=d.length>1),33554432&t.$$.dirty[0]&&n(113,m=!!d.length),100663297&t.$$.dirty[0]&&f&&void 0===Ft&&n(0,Ft=d[0][0]),1&t.$$.dirty[0]&&n(114,g=void 0!==Ft),3670016&t.$$.dirty[3]&&n(35,y=(!g||m)&&p),8404992&t.$$.dirty[0]|4194304&t.$$.dirty[3]&&(W?ho(_e,G[ne]={maskMarkupOpacity:.85},G):delete G[ne]),1&t.$$.dirty[0]&&Ft&&Ne&&Ne.blurShapes(),8388608&t.$$.dirty[0]|16777216&t.$$.dirty[3]&&n(37,v=W&&Z),268435456&t.$$.dirty[0]|33554432&t.$$.dirty[3]&&n(38,b=J&&Q(tt.x-J.x,tt.y-J.y)),256&t.$$.dirty[0]&&n(119,x=Object.keys(Wt)),536870912&t.$$.dirty[0]&&n(120,$=it.filter(Ui)[0]),536870912&t.$$.dirty[0]&&n(121,w=it.find((t=>qi(t)))),8388609&t.$$.dirty[0]|1&t.$$.dirty[3]&&n(122,_=W&&(Ot[Ft]?dn(Pi(Ot[Ft][0])):{})),603980032&t.$$.dirty[3]&&n(116,k=_&&Object.keys(_).reduce(((t,e)=>{const i="disableStyle"===e,n=x.find((t=>t.split("_").includes(e)));return i||n?(void 0===_[e]||(t[e]=Je(Ye,e)?Ye[e]:_[e]),t):t}),{})),142606336&t.$$.dirty[3]&&n(30,S=$||k),1073741824&t.$$.dirty[0]|1073741824&t.$$.dirty[3]&&S&&S.lineEnd&&!nt&&console.warn("Set shapePreprocessor property to draw lineStart and lineEnd styles.\nhttps://pqina.nl/pintura/docs/v8/api/exports/#createshapepreprocessor"),545259520&t.$$.dirty[3]&&n(40,C=_&&Ke(_.eraseRadius)?(k||_).eraseRadius:void 0),1&t.$$.dirty[4]&&n(31,E=at&&32===at[0]),1&t.$$.dirty[1]|134218240&t.$$.dirty[3]&&n(41,T=((t,e,i)=>{if(i)return"grab";if(!t)return"crosshair";let n=t||e;return Ui(n)?qi(n)?"modal"===Ht?"default":"text":an(n)?"move":"default":"crosshair"})(je,$,E)),9217&t.$$.dirty[0]|2&t.$$.dirty[1]|64&t.$$.dirty[3]&&n(42,M=rt>0&&"preset"===Ft&&(ee.length>0||Yt||te)),134217728&t.$$.dirty[0]&&(P=!Je(q,"x")&&!Je(q,"y")),268435456&t.$$.dirty[3]&&n(33,I=!!w),4&t.$$.dirty[1]|4&t.$$.dirty[3]&&n(43,A=Gt&&!I),4&t.$$.dirty[1]|8&t.$$.dirty[3]&&n(44,D=Zt&&!I),2097152&t.$$.dirty[0]&&n(39,R=ai&&(L=ai,(t,e)=>{L.dispatchEvent(jh(t,e))})),64&t.$$.dirty[3]|6&t.$$.dirty[4]&&n(46,O=dt&&te?t=>iu((()=>te(t,Ue,{...pt},(()=>li.set({}))))):Y),128&t.$$.dirty[3]&&n(47,z=Object.keys(he).reduce(((t,e)=>("beforeAddShape"===e||(t[e]=he[e]),t)),{})),8388608&t.$$.dirty[0]|8&t.$$.dirty[4]&&mt&&ci.set(W?0:20),16&t.$$.dirty[4]&&n(48,F=gt?`transform: translateY(${gt}px)`:void 0)},n(45,L=xe*$e),[Ft,Pt,Et,It,Dt,Rt,Bt,Ht,Wt,jt,Yt,Xt,Qt,ee,ne,oe,re,se,ae,le,ce,ai,N,W,U,d,f,q,J,it,S,E,rt,I,Ne,y,X,v,b,R,C,T,M,A,D,L,O,z,F,yt,vt,ue,de,fe,me,ge,ye,ve,we,_e,ke,Se,Ce,Te,Me,Pe,Ee,Ie,Ae,Fe,({value:t},e)=>{n(0,Ft=t),(Kt||/enter/i.test(e.key))&&(t=>{const[e,i]=Ot[t];let n,o,r="relative"===i.position;const s=r?"0%":0,a=r?"0%":0;Bi(e)||Oi(e)?(o=r?"20%":.2*q.width,n=Pi(e),n.x=s,n.y=a,wn(n,{width:o,height:o},q)):Ni(e)?(o=r?"10%":.1*q.width,n=Pi(e),n.x=s,n.y=a,wn(n,{rx:o,ry:o},q)):Hi(e)&&(o=r?"10%":.1*q.width,n=Pi(e),n.x1=s,n.y1=a,n.x2=s,n.y2=a),n&&Promise.resolve().then((()=>{qe(Ve(n,void 0,o))}))})(t)},t=>{if("eraser"===Ft)He=Ne.eraseShape();else if(Ft&&Ot[Ft]){const[t,e]=Ot[Ft];He=Ne.createShape({...t,...k},e)}else He=void 0;return!!He&&(He.start(t),!0)},t=>!!He&&(He.update(t),!0),t=>!!He&&(He.release(t),!0),t=>!!He&&(He.cancel(t),He=void 0,!0),t=>!!He&&(He.end(t),He=void 0,!0),function(t){Object.keys(t).forEach((e=>n(101,Ye[e]=t[e],Ye))),R("selectstyle",t),$&&(Ne.updateMarkupShape($,t),clearTimeout(We),We=setTimeout((()=>{si()}),200))},t=>n(102,je=t),()=>{ei=!1},(t,e)=>{if(ei)return;const{beforeAddShape:i=(()=>!0)}=he,n=Be(e),o=Ne.getMarkupItemDraft(),r=ie(st,{x:n.x+(q.x||0),y:n.y+(q.y||0)});if(o&&!r&&Ne.discardMarkupItemDraft(),r){if(!o){const o=Di(t,st),r=Ve(o,n);return i(r)?(Ji(r),void Ne.addShape(r)):(ei=!0,void e.preventDefault())}Bi(o)&&(n.x-=.5*o.width,n.y-=.5*o.height),t.shape&&(Je(t.shape,"x")&&(n.x=t.shape.x),Je(t.shape,"y")&&(n.y=t.shape.y)),Ne.updateMarkupShape(o,n)}},(t,e)=>{if(ei)return;const i=Be(e);if(!ie(st,{x:i.x+(q.x||0),y:i.y+(q.y||0)}))return void Ne.discardMarkupItemDraft();const n=Ne.confirmMarkupItemDraft();Ne.selectShape(n),R("addshape",n),pe.write()},t=>Ue(t),t=>{return e=t.detail.resources,i=Be(t.detail.event),e.forEach((t=>Ue(t,i)));var e,i},t=>{ho(Ae,lt=!0,lt),Ze=!1,Xe=B,Ge=o?N||1:N||U},t=>{const{scalar:e=1,translation:i,isMultiTouching:n}=t.detail;if(!Xe||!n&&!E)return;n&&ut(i,.5),Qe=ot(B);const o=Q(Xe.x+i.x,Xe.y+i.y),r=ot(o);Ze=r<Qe,Te.set(Qr(Ge*e,s,a)),Me.set(o)},t=>{if(Ze&&Qe<50)return Xe=void 0,Ge=void 0,void Me.set(K())},t=>{if(Xe=void 0,Ge=void 0,E&&t.detail.isDoubleTap)return Le();ho(Ae,lt=!1,lt),De()},t=>{if(t.preventDefault(),t.stopPropagation(),ri)return;clearTimeout(ti);const e=K(),i=B,n=Date.now(),r=n-ii;ii=n;const l=r<24;ni=l?ni+1:0;const c=-1*Ol(t),h=V?U:o?1:U,u=V?N||U:o?N||1:N||U,d=u*(1+c/(l?50:100)),p=Math.abs(d-h),f=d<u,m=u>h&&f||u<h&&d>u,g=ni>=5;if(l||(oi=!1),ni>0&&!oi&&(oi=m),g&&oi)return Le(),ri=!0,void setTimeout((()=>{ri=!1}),100);if(g)return;!l&&m&&p<=.05&&(ti=setTimeout((()=>{Le()}),250)),ho(Te,N=Qr(d,s,a),N);const y=Mp(t,X,tt),v=zt(ct);qt(v,u),Ut(v,i);const b=Vt(v),x=zt(v);qt(x,N-u+1,y);const $=Vt(x),w=(k=u,(_=ht($,b)).x/=k,_.y/=k,_);var _,k;((t,e,i)=>{t.x=e,t.y=i})(e,i.x+w.x,i.y+w.y),ho(Me,B=f&&l?ut(B,.85):e,B),De()},si,li,ci,At,Lt,Ot,Nt,Gt,Zt,Kt,Jt,te,he,Ye,je,j,r,V,s,a,l,c,h,u,p,m,g,G,k,Z,tt,x,$,w,_,nt,at,dt,pt,mt,gt,function(e){Xo(t,e)},t=>t[0]===Ft,t=>{R("addshape",t),si()},t=>{R("selectshape",t)},t=>{R("tapshape",t)},t=>{R("updateshape",t),si()},t=>{R("removeshape",t),si()},function(t){Zo[t?"unshift":"push"]((()=>{Ne=t,n(34,Ne)}))},function(t){it=t,Rt.set(it)},function(t){yt=t,we.set(yt)},function(t){Zo[t?"unshift":"push"]((()=>{ai=t,n(21,ai)}))},t=>!Yh(t.target),function(e){Xo(t,e)}]}class Qm extends Er{constructor(t){super(),Pr(this,t,Km,Zm,eo,{isActive:1,isActiveFraction:2,isVisible:3,stores:91,locale:4,shapes:5,toolbar:92,toolShapes:93,toolActive:0,toolSelectRadius:6,zoomOptions:94,textInputMode:7,shapeControls:8,enableButtonFlipVertical:9,enablePresetSelectImage:10,enablePresetDropImage:11,enableZoom:95,enablePan:96,enableSelectToolToAddShape:97,enableTapToAddText:12,enableZoomControls:98,willRenderPresetToolbar:99,shapePresets:13,utilKey:14,mapScreenPointToImagePoint:15,mapImagePointToScreenPoint:16,imageRotation:17,imageFlipX:18,imageFlipY:19,parentRect:20,hooks:100},[-1,-1,-1,-1,-1,-1])}get isActive(){return this.$$.ctx[1]}set isActive(t){this.$set({isActive:t}),ar()}get isActiveFraction(){return this.$$.ctx[2]}set isActiveFraction(t){this.$set({isActiveFraction:t}),ar()}get isVisible(){return this.$$.ctx[3]}set isVisible(t){this.$set({isVisible:t}),ar()}get stores(){return this.$$.ctx[91]}set stores(t){this.$set({stores:t}),ar()}get locale(){return this.$$.ctx[4]}set locale(t){this.$set({locale:t}),ar()}get shapes(){return this.$$.ctx[5]}set shapes(t){this.$set({shapes:t}),ar()}get toolbar(){return this.$$.ctx[92]}set toolbar(t){this.$set({toolbar:t}),ar()}get toolShapes(){return this.$$.ctx[93]}set toolShapes(t){this.$set({toolShapes:t}),ar()}get toolActive(){return this.$$.ctx[0]}set toolActive(t){this.$set({toolActive:t}),ar()}get toolSelectRadius(){return this.$$.ctx[6]}set toolSelectRadius(t){this.$set({toolSelectRadius:t}),ar()}get zoomOptions(){return this.$$.ctx[94]}set zoomOptions(t){this.$set({zoomOptions:t}),ar()}get textInputMode(){return this.$$.ctx[7]}set textInputMode(t){this.$set({textInputMode:t}),ar()}get shapeControls(){return this.$$.ctx[8]}set shapeControls(t){this.$set({shapeControls:t}),ar()}get enableButtonFlipVertical(){return this.$$.ctx[9]}set enableButtonFlipVertical(t){this.$set({enableButtonFlipVertical:t}),ar()}get enablePresetSelectImage(){return this.$$.ctx[10]}set enablePresetSelectImage(t){this.$set({enablePresetSelectImage:t}),ar()}get enablePresetDropImage(){return this.$$.ctx[11]}set enablePresetDropImage(t){this.$set({enablePresetDropImage:t}),ar()}get enableZoom(){return this.$$.ctx[95]}set enableZoom(t){this.$set({enableZoom:t}),ar()}get enablePan(){return this.$$.ctx[96]}set enablePan(t){this.$set({enablePan:t}),ar()}get enableSelectToolToAddShape(){return this.$$.ctx[97]}set enableSelectToolToAddShape(t){this.$set({enableSelectToolToAddShape:t}),ar()}get enableTapToAddText(){return this.$$.ctx[12]}set enableTapToAddText(t){this.$set({enableTapToAddText:t}),ar()}get enableZoomControls(){return this.$$.ctx[98]}set enableZoomControls(t){this.$set({enableZoomControls:t}),ar()}get willRenderPresetToolbar(){return this.$$.ctx[99]}set willRenderPresetToolbar(t){this.$set({willRenderPresetToolbar:t}),ar()}get shapePresets(){return this.$$.ctx[13]}set shapePresets(t){this.$set({shapePresets:t}),ar()}get utilKey(){return this.$$.ctx[14]}set utilKey(t){this.$set({utilKey:t}),ar()}get mapScreenPointToImagePoint(){return this.$$.ctx[15]}set mapScreenPointToImagePoint(t){this.$set({mapScreenPointToImagePoint:t}),ar()}get mapImagePointToScreenPoint(){return this.$$.ctx[16]}set mapImagePointToScreenPoint(t){this.$set({mapImagePointToScreenPoint:t}),ar()}get imageRotation(){return this.$$.ctx[17]}set imageRotation(t){this.$set({imageRotation:t}),ar()}get imageFlipX(){return this.$$.ctx[18]}set imageFlipX(t){this.$set({imageFlipX:t}),ar()}get imageFlipY(){return this.$$.ctx[19]}set imageFlipY(t){this.$set({imageFlipY:t}),ar()}get parentRect(){return this.$$.ctx[20]}set parentRect(t){this.$set({parentRect:t}),ar()}get hooks(){return this.$$.ctx[100]}set hooks(t){this.$set({hooks:t}),ar()}}var Jm=(t,e,i,n,o,r,s,a,l)=>{const c=et(t),h=.5*i.width,u=.5*i.height,d=.5*e.width,p=.5*e.height,f=o.x+n.x,m=o.y+n.y;a&&(c.x=i.width-c.x),l&&(c.y=i.height-c.y);const g=Math.cos(r),y=Math.sin(r);c.x-=h,c.y-=u;const v=c.x*g-c.y*y,b=c.x*y+c.y*g;c.x=h+v,c.y=u+b,c.x*=s,c.y*=s,c.x+=d,c.y+=p,c.x+=f,c.y+=m,c.x-=h*s,c.y-=u*s;const x=(o.x-f)*s,$=(o.y-m)*s,w=x*g-$*y,_=x*y+$*g;return c.x+=w,c.y+=_,c},tg=(t,e,i,n,o,r,s,a,l)=>{const c=et(t),h=Mt(i),u=Mt(e),d=Q(o.x+n.x,o.y+n.y),p=Math.cos(r),f=Math.sin(r);c.x-=u.x,c.y-=u.y;const m=(o.x-d.x)*s,g=(o.y-d.y)*s,y=m*p-g*f,v=m*f+g*p;c.x-=y,c.y-=v,c.x-=d.x,c.y-=d.y,c.x/=s,c.y/=s;const b=c.x*p+c.y*f,x=c.x*f-c.y*p;return c.x=b,c.y=-x,c.x+=h.x,c.y+=h.y,a&&(c.x=i.width-c.x),l&&(c.y=i.height-c.y),c};function eg(t){let e,i,n;function o(e){t[46](e)}let r={stores:t[4],locale:t[5],isActive:t[1],isActiveFraction:t[2],isVisible:t[3],mapScreenPointToImagePoint:t[30],mapImagePointToScreenPoint:t[31],utilKey:"annotate",imageRotation:t[32],imageFlipX:t[28],imageFlipY:t[29],shapes:t[34],toolbar:t[12]||t[6],toolShapes:t[13]||t[7],enableSelectToolToAddShape:t[19],enableTapToAddText:t[20],enableZoomControls:t[21],shapeControls:t[14]||t[8],shapePresets:t[17],enableButtonFlipVertical:t[15],parentRect:t[35],enablePresetSelectImage:t[16],toolSelectRadius:t[9],textInputMode:t[10],willRenderPresetToolbar:t[18]||t[11],hooks:{willRenderShapeControls:t[22],beforeAddShape:t[23],beforeRemoveShape:t[24],beforeDeselectShape:t[25],beforeSelectShape:t[26],beforeUpdateShape:t[27]}};return void 0!==t[0]&&(r.toolActive=t[0]),e=new Qm({props:r}),Zo.push((()=>Sr(e,"toolActive",o))),e.$on("measure",t[47]),{c(){Cr(e.$$.fragment)},m(t,i){Tr(e,t,i),n=!0},p(t,n){const o={};16&n[0]&&(o.stores=t[4]),32&n[0]&&(o.locale=t[5]),2&n[0]&&(o.isActive=t[1]),4&n[0]&&(o.isActiveFraction=t[2]),8&n[0]&&(o.isVisible=t[3]),1073741824&n[0]&&(o.mapScreenPointToImagePoint=t[30]),1&n[1]&&(o.mapImagePointToScreenPoint=t[31]),2&n[1]&&(o.imageRotation=t[32]),268435456&n[0]&&(o.imageFlipX=t[28]),536870912&n[0]&&(o.imageFlipY=t[29]),4160&n[0]&&(o.toolbar=t[12]||t[6]),8320&n[0]&&(o.toolShapes=t[13]||t[7]),524288&n[0]&&(o.enableSelectToolToAddShape=t[19]),1048576&n[0]&&(o.enableTapToAddText=t[20]),2097152&n[0]&&(o.enableZoomControls=t[21]),16640&n[0]&&(o.shapeControls=t[14]||t[8]),131072&n[0]&&(o.shapePresets=t[17]),32768&n[0]&&(o.enableButtonFlipVertical=t[15]),65536&n[0]&&(o.enablePresetSelectImage=t[16]),512&n[0]&&(o.toolSelectRadius=t[9]),1024&n[0]&&(o.textInputMode=t[10]),264192&n[0]&&(o.willRenderPresetToolbar=t[18]||t[11]),264241152&n[0]&&(o.hooks={willRenderShapeControls:t[22],beforeAddShape:t[23],beforeRemoveShape:t[24],beforeDeselectShape:t[25],beforeSelectShape:t[26],beforeUpdateShape:t[27]}),!i&&1&n[0]&&(i=!0,o.toolActive=t[0],or((()=>i=!1))),e.$set(o)},i(t){n||(mr(e.$$.fragment,t),n=!0)},o(t){gr(e.$$.fragment,t),n=!1},d(t){Mr(e,t)}}}function ig(t,e,i){let n,o,r,s,a,l,c,h,u,{isActive:d}=e,{isActiveFraction:p}=e,{isVisible:f}=e,{stores:m}=e,{locale:g={}}=e,{markupEditorToolbar:y}=e,{markupEditorToolStyles:v}=e,{markupEditorShapeStyleControls:b}=e,{markupEditorToolSelectRadius:x}=e,{markupEditorTextInputMode:$}=e,{willRenderShapePresetToolbar:w}=e,{annotateTools:_}=e,{annotateToolShapes:k}=e,{annotateShapeControls:S}=e,{annotateActiveTool:C}=e,{annotateEnableButtonFlipVertical:T=!1}=e,{annotateEnableSelectImagePreset:M=!1}=e,{annotatePresets:P=[]}=e,{annotateWillRenderShapePresetToolbar:E}=e,{enableSelectToolToAddShape:I}=e,{enableTapToAddText:A}=e,{enableZoomControls:D=!0}=e,{willRenderShapeControls:R}=e,{beforeAddShape:L}=e,{beforeRemoveShape:O}=e,{beforeDeselectShape:z}=e,{beforeSelectShape:F}=e,{beforeUpdateShape:B}=e;const{rootRect:N,imageAnnotation:H,imageSize:W,imageRotation:j,imageFlipX:Y,imageFlipY:V,imageTransforms:U,imageTransformsInterpolated:q}=m;return oo(t,N,(t=>i(42,r=t))),oo(t,W,(t=>i(43,s=t))),oo(t,j,(t=>i(32,u=t))),oo(t,Y,(t=>i(28,c=t))),oo(t,V,(t=>i(29,h=t))),oo(t,U,(t=>i(45,l=t))),oo(t,q,(t=>i(44,a=t))),t.$$set=t=>{"isActive"in t&&i(1,d=t.isActive),"isActiveFraction"in t&&i(2,p=t.isActiveFraction),"isVisible"in t&&i(3,f=t.isVisible),"stores"in t&&i(4,m=t.stores),"locale"in t&&i(5,g=t.locale),"markupEditorToolbar"in t&&i(6,y=t.markupEditorToolbar),"markupEditorToolStyles"in t&&i(7,v=t.markupEditorToolStyles),"markupEditorShapeStyleControls"in t&&i(8,b=t.markupEditorShapeStyleControls),"markupEditorToolSelectRadius"in t&&i(9,x=t.markupEditorToolSelectRadius),"markupEditorTextInputMode"in t&&i(10,$=t.markupEditorTextInputMode),"willRenderShapePresetToolbar"in t&&i(11,w=t.willRenderShapePresetToolbar),"annotateTools"in t&&i(12,_=t.annotateTools),"annotateToolShapes"in t&&i(13,k=t.annotateToolShapes),"annotateShapeControls"in t&&i(14,S=t.annotateShapeControls),"annotateActiveTool"in t&&i(0,C=t.annotateActiveTool),"annotateEnableButtonFlipVertical"in t&&i(15,T=t.annotateEnableButtonFlipVertical),"annotateEnableSelectImagePreset"in t&&i(16,M=t.annotateEnableSelectImagePreset),"annotatePresets"in t&&i(17,P=t.annotatePresets),"annotateWillRenderShapePresetToolbar"in t&&i(18,E=t.annotateWillRenderShapePresetToolbar),"enableSelectToolToAddShape"in t&&i(19,I=t.enableSelectToolToAddShape),"enableTapToAddText"in t&&i(20,A=t.enableTapToAddText),"enableZoomControls"in t&&i(21,D=t.enableZoomControls),"willRenderShapeControls"in t&&i(22,R=t.willRenderShapeControls),"beforeAddShape"in t&&i(23,L=t.beforeAddShape),"beforeRemoveShape"in t&&i(24,O=t.beforeRemoveShape),"beforeDeselectShape"in t&&i(25,z=t.beforeDeselectShape),"beforeSelectShape"in t&&i(26,F=t.beforeSelectShape),"beforeUpdateShape"in t&&i(27,B=t.beforeUpdateShape)},t.$$.update=()=>{805306368&t.$$.dirty[0]|30720&t.$$.dirty[1]&&i(30,n=t=>tg(t,r,s,a.origin,a.translation,l.rotation.z,a.scale,c,h)),805306368&t.$$.dirty[0]|30720&t.$$.dirty[1]&&i(31,o=t=>Jm(t,r,s,a.origin,a.translation,l.rotation.z,a.scale,c,h))},[C,d,p,f,m,g,y,v,b,x,$,w,_,k,S,T,M,P,E,I,A,D,R,L,O,z,F,B,c,h,n,o,u,N,H,W,j,Y,V,U,q,"annotate",r,s,a,l,function(t){C=t,i(0,C)},function(e){Xo(t,e)}]}var ng={util:["annotate",class extends Er{constructor(t){super(),Pr(this,t,ig,eg,eo,{name:41,isActive:1,isActiveFraction:2,isVisible:3,stores:4,locale:5,markupEditorToolbar:6,markupEditorToolStyles:7,markupEditorShapeStyleControls:8,markupEditorToolSelectRadius:9,markupEditorTextInputMode:10,willRenderShapePresetToolbar:11,annotateTools:12,annotateToolShapes:13,annotateShapeControls:14,annotateActiveTool:0,annotateEnableButtonFlipVertical:15,annotateEnableSelectImagePreset:16,annotatePresets:17,annotateWillRenderShapePresetToolbar:18,enableSelectToolToAddShape:19,enableTapToAddText:20,enableZoomControls:21,willRenderShapeControls:22,beforeAddShape:23,beforeRemoveShape:24,beforeDeselectShape:25,beforeSelectShape:26,beforeUpdateShape:27},[-1,-1])}get name(){return this.$$.ctx[41]}get isActive(){return this.$$.ctx[1]}set isActive(t){this.$set({isActive:t}),ar()}get isActiveFraction(){return this.$$.ctx[2]}set isActiveFraction(t){this.$set({isActiveFraction:t}),ar()}get isVisible(){return this.$$.ctx[3]}set isVisible(t){this.$set({isVisible:t}),ar()}get stores(){return this.$$.ctx[4]}set stores(t){this.$set({stores:t}),ar()}get locale(){return this.$$.ctx[5]}set locale(t){this.$set({locale:t}),ar()}get markupEditorToolbar(){return this.$$.ctx[6]}set markupEditorToolbar(t){this.$set({markupEditorToolbar:t}),ar()}get markupEditorToolStyles(){return this.$$.ctx[7]}set markupEditorToolStyles(t){this.$set({markupEditorToolStyles:t}),ar()}get markupEditorShapeStyleControls(){return this.$$.ctx[8]}set markupEditorShapeStyleControls(t){this.$set({markupEditorShapeStyleControls:t}),ar()}get markupEditorToolSelectRadius(){return this.$$.ctx[9]}set markupEditorToolSelectRadius(t){this.$set({markupEditorToolSelectRadius:t}),ar()}get markupEditorTextInputMode(){return this.$$.ctx[10]}set markupEditorTextInputMode(t){this.$set({markupEditorTextInputMode:t}),ar()}get willRenderShapePresetToolbar(){return this.$$.ctx[11]}set willRenderShapePresetToolbar(t){this.$set({willRenderShapePresetToolbar:t}),ar()}get annotateTools(){return this.$$.ctx[12]}set annotateTools(t){this.$set({annotateTools:t}),ar()}get annotateToolShapes(){return this.$$.ctx[13]}set annotateToolShapes(t){this.$set({annotateToolShapes:t}),ar()}get annotateShapeControls(){return this.$$.ctx[14]}set annotateShapeControls(t){this.$set({annotateShapeControls:t}),ar()}get annotateActiveTool(){return this.$$.ctx[0]}set annotateActiveTool(t){this.$set({annotateActiveTool:t}),ar()}get annotateEnableButtonFlipVertical(){return this.$$.ctx[15]}set annotateEnableButtonFlipVertical(t){this.$set({annotateEnableButtonFlipVertical:t}),ar()}get annotateEnableSelectImagePreset(){return this.$$.ctx[16]}set annotateEnableSelectImagePreset(t){this.$set({annotateEnableSelectImagePreset:t}),ar()}get annotatePresets(){return this.$$.ctx[17]}set annotatePresets(t){this.$set({annotatePresets:t}),ar()}get annotateWillRenderShapePresetToolbar(){return this.$$.ctx[18]}set annotateWillRenderShapePresetToolbar(t){this.$set({annotateWillRenderShapePresetToolbar:t}),ar()}get enableSelectToolToAddShape(){return this.$$.ctx[19]}set enableSelectToolToAddShape(t){this.$set({enableSelectToolToAddShape:t}),ar()}get enableTapToAddText(){return this.$$.ctx[20]}set enableTapToAddText(t){this.$set({enableTapToAddText:t}),ar()}get enableZoomControls(){return this.$$.ctx[21]}set enableZoomControls(t){this.$set({enableZoomControls:t}),ar()}get willRenderShapeControls(){return this.$$.ctx[22]}set willRenderShapeControls(t){this.$set({willRenderShapeControls:t}),ar()}get beforeAddShape(){return this.$$.ctx[23]}set beforeAddShape(t){this.$set({beforeAddShape:t}),ar()}get beforeRemoveShape(){return this.$$.ctx[24]}set beforeRemoveShape(t){this.$set({beforeRemoveShape:t}),ar()}get beforeDeselectShape(){return this.$$.ctx[25]}set beforeDeselectShape(t){this.$set({beforeDeselectShape:t}),ar()}get beforeSelectShape(){return this.$$.ctx[26]}set beforeSelectShape(t){this.$set({beforeSelectShape:t}),ar()}get beforeUpdateShape(){return this.$$.ctx[27]}set beforeUpdateShape(t){this.$set({beforeUpdateShape:t}),ar()}}]};function og(t){let e,i,n;function o(e){t[38](e)}let r={stores:t[4],locale:t[5],isActive:t[1],isActiveFraction:t[2],isVisible:t[3],mapScreenPointToImagePoint:t[28],mapImagePointToScreenPoint:t[29],utilKey:"decorate",shapes:t[31],toolbar:t[12]||t[6],toolShapes:t[13]||t[7],shapeControls:t[14]||t[8],shapePresets:t[17],enableSelectToolToAddShape:t[19],enableTapToAddText:t[20],enableZoomControls:t[21],enablePresetSelectImage:t[16],enableButtonFlipVertical:t[15],parentRect:t[30],toolSelectRadius:t[9],textInputMode:t[10],willRenderPresetToolbar:t[18]||t[11],hooks:{willRenderShapeControls:t[22],beforeAddShape:t[23],beforeRemoveShape:t[24],beforeDeselectShape:t[25],beforeSelectShape:t[26],beforeUpdateShape:t[27]}};return void 0!==t[0]&&(r.toolActive=t[0]),e=new Qm({props:r}),Zo.push((()=>Sr(e,"toolActive",o))),e.$on("measure",t[39]),{c(){Cr(e.$$.fragment)},m(t,i){Tr(e,t,i),n=!0},p(t,n){const o={};16&n[0]&&(o.stores=t[4]),32&n[0]&&(o.locale=t[5]),2&n[0]&&(o.isActive=t[1]),4&n[0]&&(o.isActiveFraction=t[2]),8&n[0]&&(o.isVisible=t[3]),268435456&n[0]&&(o.mapScreenPointToImagePoint=t[28]),536870912&n[0]&&(o.mapImagePointToScreenPoint=t[29]),4160&n[0]&&(o.toolbar=t[12]||t[6]),8320&n[0]&&(o.toolShapes=t[13]||t[7]),16640&n[0]&&(o.shapeControls=t[14]||t[8]),131072&n[0]&&(o.shapePresets=t[17]),524288&n[0]&&(o.enableSelectToolToAddShape=t[19]),1048576&n[0]&&(o.enableTapToAddText=t[20]),2097152&n[0]&&(o.enableZoomControls=t[21]),65536&n[0]&&(o.enablePresetSelectImage=t[16]),32768&n[0]&&(o.enableButtonFlipVertical=t[15]),512&n[0]&&(o.toolSelectRadius=t[9]),1024&n[0]&&(o.textInputMode=t[10]),264192&n[0]&&(o.willRenderPresetToolbar=t[18]||t[11]),264241152&n[0]&&(o.hooks={willRenderShapeControls:t[22],beforeAddShape:t[23],beforeRemoveShape:t[24],beforeDeselectShape:t[25],beforeSelectShape:t[26],beforeUpdateShape:t[27]}),!i&&1&n[0]&&(i=!0,o.toolActive=t[0],or((()=>i=!1))),e.$set(o)},i(t){n||(mr(e.$$.fragment,t),n=!0)},o(t){gr(e.$$.fragment,t),n=!1},d(t){Mr(e,t)}}}function rg(t,e,i){let n,o,r,s,a,{isActive:l}=e,{isActiveFraction:c}=e,{isVisible:h}=e,{stores:u}=e,{locale:d={}}=e,{markupEditorToolbar:p}=e,{markupEditorToolStyles:f}=e,{markupEditorShapeStyleControls:m}=e,{markupEditorToolSelectRadius:g}=e,{markupEditorTextInputMode:y}=e,{willRenderShapePresetToolbar:v}=e,{decorateTools:b}=e,{decorateToolShapes:x}=e,{decorateShapeControls:$}=e,{decorateActiveTool:w}=e,{decorateEnableButtonFlipVertical:_=!1}=e,{decorateEnableSelectImagePreset:k=!1}=e,{decoratePresets:S=[]}=e,{decorateWillRenderShapePresetToolbar:C}=e,{enableSelectToolToAddShape:T}=e,{enableTapToAddText:M}=e,{enableZoomControls:P=!0}=e,{willRenderShapeControls:E}=e,{beforeAddShape:I}=e,{beforeRemoveShape:A}=e,{beforeDeselectShape:D}=e,{beforeSelectShape:R}=e,{beforeUpdateShape:L}=e;const{imageCropRect:O,imageDecoration:z,imageSelectionRectPresentation:F,imageTransformsInterpolated:B}=u;return oo(t,F,(t=>i(37,a=t))),oo(t,B,(t=>i(36,s=t))),t.$$set=t=>{"isActive"in t&&i(1,l=t.isActive),"isActiveFraction"in t&&i(2,c=t.isActiveFraction),"isVisible"in t&&i(3,h=t.isVisible),"stores"in t&&i(4,u=t.stores),"locale"in t&&i(5,d=t.locale),"markupEditorToolbar"in t&&i(6,p=t.markupEditorToolbar),"markupEditorToolStyles"in t&&i(7,f=t.markupEditorToolStyles),"markupEditorShapeStyleControls"in t&&i(8,m=t.markupEditorShapeStyleControls),"markupEditorToolSelectRadius"in t&&i(9,g=t.markupEditorToolSelectRadius),"markupEditorTextInputMode"in t&&i(10,y=t.markupEditorTextInputMode),"willRenderShapePresetToolbar"in t&&i(11,v=t.willRenderShapePresetToolbar),"decorateTools"in t&&i(12,b=t.decorateTools),"decorateToolShapes"in t&&i(13,x=t.decorateToolShapes),"decorateShapeControls"in t&&i(14,$=t.decorateShapeControls),"decorateActiveTool"in t&&i(0,w=t.decorateActiveTool),"decorateEnableButtonFlipVertical"in t&&i(15,_=t.decorateEnableButtonFlipVertical),"decorateEnableSelectImagePreset"in t&&i(16,k=t.decorateEnableSelectImagePreset),"decoratePresets"in t&&i(17,S=t.decoratePresets),"decorateWillRenderShapePresetToolbar"in t&&i(18,C=t.decorateWillRenderShapePresetToolbar),"enableSelectToolToAddShape"in t&&i(19,T=t.enableSelectToolToAddShape),"enableTapToAddText"in t&&i(20,M=t.enableTapToAddText),"enableZoomControls"in t&&i(21,P=t.enableZoomControls),"willRenderShapeControls"in t&&i(22,E=t.willRenderShapeControls),"beforeAddShape"in t&&i(23,I=t.beforeAddShape),"beforeRemoveShape"in t&&i(24,A=t.beforeRemoveShape),"beforeDeselectShape"in t&&i(25,D=t.beforeDeselectShape),"beforeSelectShape"in t&&i(26,R=t.beforeSelectShape),"beforeUpdateShape"in t&&i(27,L=t.beforeUpdateShape)},t.$$.update=()=>{32&t.$$.dirty[1]&&i(35,n=s?s.scale:1),80&t.$$.dirty[1]&&i(28,o=t=>{const e=et(t);return e.x-=a.x,e.y-=a.y,e.x/=n,e.y/=n,e}),80&t.$$.dirty[1]&&i(29,r=t=>{const e=et(t);return e.x*=n,e.y*=n,e.x+=a.x,e.y+=a.y,e})},[w,l,c,h,u,d,p,f,m,g,y,v,b,x,$,_,k,S,C,T,M,P,E,I,A,D,R,L,o,r,O,z,F,B,"decorate",n,s,a,function(t){w=t,i(0,w)},function(e){Xo(t,e)}]}var sg={util:["decorate",class extends Er{constructor(t){super(),Pr(this,t,rg,og,eo,{name:34,isActive:1,isActiveFraction:2,isVisible:3,stores:4,locale:5,markupEditorToolbar:6,markupEditorToolStyles:7,markupEditorShapeStyleControls:8,markupEditorToolSelectRadius:9,markupEditorTextInputMode:10,willRenderShapePresetToolbar:11,decorateTools:12,decorateToolShapes:13,decorateShapeControls:14,decorateActiveTool:0,decorateEnableButtonFlipVertical:15,decorateEnableSelectImagePreset:16,decoratePresets:17,decorateWillRenderShapePresetToolbar:18,enableSelectToolToAddShape:19,enableTapToAddText:20,enableZoomControls:21,willRenderShapeControls:22,beforeAddShape:23,beforeRemoveShape:24,beforeDeselectShape:25,beforeSelectShape:26,beforeUpdateShape:27},[-1,-1])}get name(){return this.$$.ctx[34]}get isActive(){return this.$$.ctx[1]}set isActive(t){this.$set({isActive:t}),ar()}get isActiveFraction(){return this.$$.ctx[2]}set isActiveFraction(t){this.$set({isActiveFraction:t}),ar()}get isVisible(){return this.$$.ctx[3]}set isVisible(t){this.$set({isVisible:t}),ar()}get stores(){return this.$$.ctx[4]}set stores(t){this.$set({stores:t}),ar()}get locale(){return this.$$.ctx[5]}set locale(t){this.$set({locale:t}),ar()}get markupEditorToolbar(){return this.$$.ctx[6]}set markupEditorToolbar(t){this.$set({markupEditorToolbar:t}),ar()}get markupEditorToolStyles(){return this.$$.ctx[7]}set markupEditorToolStyles(t){this.$set({markupEditorToolStyles:t}),ar()}get markupEditorShapeStyleControls(){return this.$$.ctx[8]}set markupEditorShapeStyleControls(t){this.$set({markupEditorShapeStyleControls:t}),ar()}get markupEditorToolSelectRadius(){return this.$$.ctx[9]}set markupEditorToolSelectRadius(t){this.$set({markupEditorToolSelectRadius:t}),ar()}get markupEditorTextInputMode(){return this.$$.ctx[10]}set markupEditorTextInputMode(t){this.$set({markupEditorTextInputMode:t}),ar()}get willRenderShapePresetToolbar(){return this.$$.ctx[11]}set willRenderShapePresetToolbar(t){this.$set({willRenderShapePresetToolbar:t}),ar()}get decorateTools(){return this.$$.ctx[12]}set decorateTools(t){this.$set({decorateTools:t}),ar()}get decorateToolShapes(){return this.$$.ctx[13]}set decorateToolShapes(t){this.$set({decorateToolShapes:t}),ar()}get decorateShapeControls(){return this.$$.ctx[14]}set decorateShapeControls(t){this.$set({decorateShapeControls:t}),ar()}get decorateActiveTool(){return this.$$.ctx[0]}set decorateActiveTool(t){this.$set({decorateActiveTool:t}),ar()}get decorateEnableButtonFlipVertical(){return this.$$.ctx[15]}set decorateEnableButtonFlipVertical(t){this.$set({decorateEnableButtonFlipVertical:t}),ar()}get decorateEnableSelectImagePreset(){return this.$$.ctx[16]}set decorateEnableSelectImagePreset(t){this.$set({decorateEnableSelectImagePreset:t}),ar()}get decoratePresets(){return this.$$.ctx[17]}set decoratePresets(t){this.$set({decoratePresets:t}),ar()}get decorateWillRenderShapePresetToolbar(){return this.$$.ctx[18]}set decorateWillRenderShapePresetToolbar(t){this.$set({decorateWillRenderShapePresetToolbar:t}),ar()}get enableSelectToolToAddShape(){return this.$$.ctx[19]}set enableSelectToolToAddShape(t){this.$set({enableSelectToolToAddShape:t}),ar()}get enableTapToAddText(){return this.$$.ctx[20]}set enableTapToAddText(t){this.$set({enableTapToAddText:t}),ar()}get enableZoomControls(){return this.$$.ctx[21]}set enableZoomControls(t){this.$set({enableZoomControls:t}),ar()}get willRenderShapeControls(){return this.$$.ctx[22]}set willRenderShapeControls(t){this.$set({willRenderShapeControls:t}),ar()}get beforeAddShape(){return this.$$.ctx[23]}set beforeAddShape(t){this.$set({beforeAddShape:t}),ar()}get beforeRemoveShape(){return this.$$.ctx[24]}set beforeRemoveShape(t){this.$set({beforeRemoveShape:t}),ar()}get beforeDeselectShape(){return this.$$.ctx[25]}set beforeDeselectShape(t){this.$set({beforeDeselectShape:t}),ar()}get beforeSelectShape(){return this.$$.ctx[26]}set beforeSelectShape(t){this.$set({beforeSelectShape:t}),ar()}get beforeUpdateShape(){return this.$$.ctx[27]}set beforeUpdateShape(t){this.$set({beforeUpdateShape:t}),ar()}}]};function ag(t){let e,i;return e=new Qm({props:{stores:t[3],locale:t[4],isActive:t[0],isActiveFraction:t[1],isVisible:t[2],mapScreenPointToImagePoint:t[21],mapImagePointToScreenPoint:t[22],enableZoomControls:t[18],utilKey:"sticker",shapePresets:t[5],shapes:t[6]?t[27]:t[28],toolActive:"preset",imageFlipX:!!t[6]&&t[19],imageFlipY:!!t[6]&&t[20],imageRotation:t[6]?t[23]:0,parentRect:t[6]?t[29]:t[25],enablePresetSelectImage:t[7],enableButtonFlipVertical:t[8],toolSelectRadius:t[11],willRenderPresetToolbar:t[9]||t[12],hooks:{willRenderShapeControls:t[10],beforeAddShape:t[13],beforeRemoveShape:t[14],beforeDeselectShape:t[15],beforeSelectShape:t[16],beforeUpdateShape:t[17]}}}),e.$on("measure",t[42]),{c(){Cr(e.$$.fragment)},m(t,n){Tr(e,t,n),i=!0},p(t,i){const n={};8&i[0]&&(n.stores=t[3]),16&i[0]&&(n.locale=t[4]),1&i[0]&&(n.isActive=t[0]),2&i[0]&&(n.isActiveFraction=t[1]),4&i[0]&&(n.isVisible=t[2]),2097152&i[0]&&(n.mapScreenPointToImagePoint=t[21]),4194304&i[0]&&(n.mapImagePointToScreenPoint=t[22]),262144&i[0]&&(n.enableZoomControls=t[18]),32&i[0]&&(n.shapePresets=t[5]),64&i[0]&&(n.shapes=t[6]?t[27]:t[28]),524352&i[0]&&(n.imageFlipX=!!t[6]&&t[19]),1048640&i[0]&&(n.imageFlipY=!!t[6]&&t[20]),8388672&i[0]&&(n.imageRotation=t[6]?t[23]:0),64&i[0]&&(n.parentRect=t[6]?t[29]:t[25]),128&i[0]&&(n.enablePresetSelectImage=t[7]),256&i[0]&&(n.enableButtonFlipVertical=t[8]),2048&i[0]&&(n.toolSelectRadius=t[11]),4608&i[0]&&(n.willRenderPresetToolbar=t[9]||t[12]),254976&i[0]&&(n.hooks={willRenderShapeControls:t[10],beforeAddShape:t[13],beforeRemoveShape:t[14],beforeDeselectShape:t[15],beforeSelectShape:t[16],beforeUpdateShape:t[17]}),e.$set(n)},i(t){i||(mr(e.$$.fragment,t),i=!0)},o(t){gr(e.$$.fragment,t),i=!1},d(t){Mr(e,t)}}}function lg(t,e,i){let n,o,r,s,a,l,c,h,u,d,p,{isActive:f}=e,{isActiveFraction:m}=e,{isVisible:g}=e,{stores:y}=e,{locale:v={}}=e,{stickers:b=[]}=e,{stickerStickToImage:x=!1}=e,{stickerEnableSelectImage:$=!0}=e,{stickersEnableButtonFlipVertical:w=!1}=e,{stickersWillRenderShapePresetToolbar:_}=e,{willRenderShapeControls:k}=e,{markupEditorToolSelectRadius:S}=e,{willRenderShapePresetToolbar:C}=e,{beforeAddShape:T}=e,{beforeRemoveShape:M}=e,{beforeDeselectShape:P}=e,{beforeSelectShape:E}=e,{beforeUpdateShape:I}=e,{enableZoomControls:A=!0}=e;const{presentationScalar:D,rootRect:R,imageCropRect:L,imageSelectionRectPresentation:O,imageAnnotation:z,imageDecoration:F,imageSize:B,imageTransforms:N,imageTransformsInterpolated:H,imageRotation:W,imageFlipX:j,imageFlipY:Y}=y;return oo(t,R,(t=>i(38,a=t))),oo(t,O,(t=>i(41,d=t))),oo(t,B,(t=>i(39,l=t))),oo(t,N,(t=>i(40,c=t))),oo(t,H,(t=>i(37,s=t))),oo(t,W,(t=>i(23,p=t))),oo(t,j,(t=>i(19,h=t))),oo(t,Y,(t=>i(20,u=t))),t.$$set=t=>{"isActive"in t&&i(0,f=t.isActive),"isActiveFraction"in t&&i(1,m=t.isActiveFraction),"isVisible"in t&&i(2,g=t.isVisible),"stores"in t&&i(3,y=t.stores),"locale"in t&&i(4,v=t.locale),"stickers"in t&&i(5,b=t.stickers),"stickerStickToImage"in t&&i(6,x=t.stickerStickToImage),"stickerEnableSelectImage"in t&&i(7,$=t.stickerEnableSelectImage),"stickersEnableButtonFlipVertical"in t&&i(8,w=t.stickersEnableButtonFlipVertical),"stickersWillRenderShapePresetToolbar"in t&&i(9,_=t.stickersWillRenderShapePresetToolbar),"willRenderShapeControls"in t&&i(10,k=t.willRenderShapeControls),"markupEditorToolSelectRadius"in t&&i(11,S=t.markupEditorToolSelectRadius),"willRenderShapePresetToolbar"in t&&i(12,C=t.willRenderShapePresetToolbar),"beforeAddShape"in t&&i(13,T=t.beforeAddShape),"beforeRemoveShape"in t&&i(14,M=t.beforeRemoveShape),"beforeDeselectShape"in t&&i(15,P=t.beforeDeselectShape),"beforeSelectShape"in t&&i(16,E=t.beforeSelectShape),"beforeUpdateShape"in t&&i(17,I=t.beforeUpdateShape),"enableZoomControls"in t&&i(18,A=t.enableZoomControls)},t.$$.update=()=>{64&t.$$.dirty[1]&&i(36,n=s?s.scale:1),1572928&t.$$.dirty[0]|2016&t.$$.dirty[1]&&i(21,o=x?t=>tg(t,a,l,s.origin,s.translation,c.rotation.z,s.scale,h,u):t=>{const e=et(t);return e.x-=d.x,e.y-=d.y,e.x/=n,e.y/=n,e}),1572928&t.$$.dirty[0]|2016&t.$$.dirty[1]&&i(22,r=x?t=>Jm(t,a,l,s.origin,s.translation,c.rotation.z,s.scale,h,u):t=>{const e=et(t);return e.x*=n,e.y*=n,e.x+=d.x,e.y+=d.y,e})},[f,m,g,y,v,b,x,$,w,_,k,S,C,T,M,P,E,I,A,h,u,o,r,p,R,L,O,z,F,B,N,H,W,j,Y,"sticker",n,s,a,l,c,d,function(e){Xo(t,e)}]}var cg={util:["sticker",class extends Er{constructor(t){super(),Pr(this,t,lg,ag,eo,{name:35,isActive:0,isActiveFraction:1,isVisible:2,stores:3,locale:4,stickers:5,stickerStickToImage:6,stickerEnableSelectImage:7,stickersEnableButtonFlipVertical:8,stickersWillRenderShapePresetToolbar:9,willRenderShapeControls:10,markupEditorToolSelectRadius:11,willRenderShapePresetToolbar:12,beforeAddShape:13,beforeRemoveShape:14,beforeDeselectShape:15,beforeSelectShape:16,beforeUpdateShape:17,enableZoomControls:18},[-1,-1])}get name(){return this.$$.ctx[35]}get isActive(){return this.$$.ctx[0]}set isActive(t){this.$set({isActive:t}),ar()}get isActiveFraction(){return this.$$.ctx[1]}set isActiveFraction(t){this.$set({isActiveFraction:t}),ar()}get isVisible(){return this.$$.ctx[2]}set isVisible(t){this.$set({isVisible:t}),ar()}get stores(){return this.$$.ctx[3]}set stores(t){this.$set({stores:t}),ar()}get locale(){return this.$$.ctx[4]}set locale(t){this.$set({locale:t}),ar()}get stickers(){return this.$$.ctx[5]}set stickers(t){this.$set({stickers:t}),ar()}get stickerStickToImage(){return this.$$.ctx[6]}set stickerStickToImage(t){this.$set({stickerStickToImage:t}),ar()}get stickerEnableSelectImage(){return this.$$.ctx[7]}set stickerEnableSelectImage(t){this.$set({stickerEnableSelectImage:t}),ar()}get stickersEnableButtonFlipVertical(){return this.$$.ctx[8]}set stickersEnableButtonFlipVertical(t){this.$set({stickersEnableButtonFlipVertical:t}),ar()}get stickersWillRenderShapePresetToolbar(){return this.$$.ctx[9]}set stickersWillRenderShapePresetToolbar(t){this.$set({stickersWillRenderShapePresetToolbar:t}),ar()}get willRenderShapeControls(){return this.$$.ctx[10]}set willRenderShapeControls(t){this.$set({willRenderShapeControls:t}),ar()}get markupEditorToolSelectRadius(){return this.$$.ctx[11]}set markupEditorToolSelectRadius(t){this.$set({markupEditorToolSelectRadius:t}),ar()}get willRenderShapePresetToolbar(){return this.$$.ctx[12]}set willRenderShapePresetToolbar(t){this.$set({willRenderShapePresetToolbar:t}),ar()}get beforeAddShape(){return this.$$.ctx[13]}set beforeAddShape(t){this.$set({beforeAddShape:t}),ar()}get beforeRemoveShape(){return this.$$.ctx[14]}set beforeRemoveShape(t){this.$set({beforeRemoveShape:t}),ar()}get beforeDeselectShape(){return this.$$.ctx[15]}set beforeDeselectShape(t){this.$set({beforeDeselectShape:t}),ar()}get beforeSelectShape(){return this.$$.ctx[16]}set beforeSelectShape(t){this.$set({beforeSelectShape:t}),ar()}get beforeUpdateShape(){return this.$$.ctx[17]}set beforeUpdateShape(t){this.$set({beforeUpdateShape:t}),ar()}get enableZoomControls(){return this.$$.ctx[18]}set enableZoomControls(t){this.$set({enableZoomControls:t}),ar()}}]};function hg(t){let e,i,n,o,r,s=(t[13](t[29].value)||"")+"",a=(P(t[29].label)?t[29].label(t[1]):t[29].label)+"";return{c(){e=wo("div"),n=So(),o=wo("span"),r=ko(a),i=new Lo(n),Eo(e,"slot","option")},m(t,a){xo(t,e,a),i.m(s,e),bo(e,n),bo(e,o),bo(o,r)},p(t,e){536870912&e&&s!==(s=(t[13](t[29].value)||"")+"")&&i.p(s),536870914&e&&a!==(a=(P(t[29].label)?t[29].label(t[1]):t[29].label)+"")&&Ao(r,a)},d(t){t&&$o(e)}}}function ug(t){let e,i;return e=new Qc({props:{locale:t[1],layout:"row",options:t[2],selectedIndex:t[10],onchange:t[11],$$slots:{option:[hg,({option:t})=>({29:t}),({option:t})=>t?536870912:0]},$$scope:{ctx:t}}}),{c(){Cr(e.$$.fragment)},m(t,n){Tr(e,t,n),i=!0},p(t,i){const n={};2&i&&(n.locale=t[1]),4&i&&(n.options=t[2]),1610612738&i&&(n.$$scope={dirty:i,ctx:t}),e.$set(n)},i(t){i||(mr(e.$$.fragment,t),i=!0)},o(t){gr(e.$$.fragment,t),i=!1},d(t){Mr(e,t)}}}function dg(t){let e,i,n,o,r;return i=new dm({props:{locale:t[1],shape:t[5],onchange:t[12],controls:t[3],scrollElasticity:t[4]}}),o=new Nl({props:{elasticity:t[8],$$slots:{default:[ug]},$$scope:{ctx:t}}}),{c(){e=wo("div"),Cr(i.$$.fragment),n=So(),Cr(o.$$.fragment),Eo(e,"slot","footer"),Eo(e,"style",t[6])},m(t,s){xo(t,e,s),Tr(i,e,null),bo(e,n),Tr(o,e,null),r=!0},p(t,n){const s={};2&n&&(s.locale=t[1]),32&n&&(s.shape=t[5]),8&n&&(s.controls=t[3]),16&n&&(s.scrollElasticity=t[4]),i.$set(s);const a={};1073741830&n&&(a.$$scope={dirty:n,ctx:t}),o.$set(a),(!r||64&n)&&Eo(e,"style",t[6])},i(t){r||(mr(i.$$.fragment,t),mr(o.$$.fragment,t),r=!0)},o(t){gr(i.$$.fragment,t),gr(o.$$.fragment,t),r=!1},d(t){t&&$o(e),Mr(i),Mr(o)}}}function pg(t){let e,i;return e=new np({props:{$$slots:{footer:[dg]},$$scope:{ctx:t}}}),e.$on("measure",t[21]),{c(){Cr(e.$$.fragment)},m(t,n){Tr(e,t,n),i=!0},p(t,[i]){const n={};1073741950&i&&(n.$$scope={dirty:i,ctx:t}),e.$set(n)},i(t){i||(mr(e.$$.fragment,t),i=!0)},o(t){gr(e.$$.fragment,t),i=!1},d(t){Mr(e,t)}}}function fg(t,e,i){let n,o,r,s,a,l,c=Xn,h=()=>(c(),c=io(u,(t=>i(19,a=t))),u);t.$$.on_destroy.push((()=>c()));let{isActive:u}=e;h();let{stores:d}=e,{locale:p={}}=e,{frameStyles:f={}}=e,{frameOptions:m=[]}=e,{markupEditorShapeStyleControls:g}=e;const{history:y,animation:v,elasticityMultiplier:b,scrollElasticity:x,imageFrame:$}=d;oo(t,v,(t=>i(18,s=t))),oo(t,$,(t=>i(5,r=t)));let w,_=r?m.findIndex((([t])=>t===r.id)):0,k={};const S=Qs(s?20:0);return oo(t,S,(t=>i(20,l=t))),t.$$set=t=>{"isActive"in t&&h(i(0,u=t.isActive)),"stores"in t&&i(16,d=t.stores),"locale"in t&&i(1,p=t.locale),"frameStyles"in t&&i(17,f=t.frameStyles),"frameOptions"in t&&i(2,m=t.frameOptions),"markupEditorShapeStyleControls"in t&&i(3,g=t.markupEditorShapeStyleControls)},t.$$.update=()=>{786432&t.$$.dirty&&s&&S.set(a?0:20),1048576&t.$$.dirty&&i(6,o=l?`transform: translateY(${l}px)`:void 0)},i(4,n=b*x),[u,p,m,g,n,r,o,v,x,$,_,({value:t})=>{const e=f[t];if(!e||!e.shape)return $.set(void 0),void y.write();const{shape:i}=e,n={id:t,...Pi(i),...Object.keys(k).reduce(((t,e)=>i[e]?(t[e]=k[e],t):t),{})};$.set(n),y.write()},function(t){Je(t,"frameColor")&&(k.frameColor=t.frameColor),r&&(wn(r,t),$.set(r),clearTimeout(w),w=setTimeout((()=>{y.write()}),200))},t=>{const e=f[t];var i;if(e&&e.thumb)return i=e.thumb,/div/i.test(i)||$m(i)?i:/rect|path|circle|line|<g>/i.test(i)?`<svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" stroke-width="1" stroke="currentColor" fill="none" aria-hidden="true" focusable="false" stroke-linecap="round" stroke-linejoin="round">${i}</svg>`:`<img src="${i}" alt=""/>`},S,"frame",d,f,s,a,l,function(e){Xo(t,e)}]}var mg={util:["frame",class extends Er{constructor(t){super(),Pr(this,t,fg,pg,eo,{name:15,isActive:0,stores:16,locale:1,frameStyles:17,frameOptions:2,markupEditorShapeStyleControls:3})}get name(){return this.$$.ctx[15]}get isActive(){return this.$$.ctx[0]}set isActive(t){this.$set({isActive:t}),ar()}get stores(){return this.$$.ctx[16]}set stores(t){this.$set({stores:t}),ar()}get locale(){return this.$$.ctx[1]}set locale(t){this.$set({locale:t}),ar()}get frameStyles(){return this.$$.ctx[17]}set frameStyles(t){this.$set({frameStyles:t}),ar()}get frameOptions(){return this.$$.ctx[2]}set frameOptions(t){this.$set({frameOptions:t}),ar()}get markupEditorShapeStyleControls(){return this.$$.ctx[3]}set markupEditorShapeStyleControls(t){this.$set({markupEditorShapeStyleControls:t}),ar()}}]};function gg(t){let e,i,n,o,r,s,a,l;return{c(){e=wo("div"),i=wo("label"),n=ko(t[1]),o=So(),r=wo("input"),Eo(i,"for",t[0]),Eo(i,"title",t[2]),Eo(i,"aria-label",t[2]),Eo(r,"id",t[0]),Eo(r,"type","text"),Eo(r,"inputmode","numeric"),Eo(r,"pattern","[0-9]*"),Eo(r,"data-state",t[3]),Eo(r,"autocomplete","off"),Eo(r,"placeholder",t[4]),r.value=s=void 0===t[5]?"":t[7](t[5]+""),Eo(e,"class","PinturaInputDimension")},m(s,c){xo(s,e,c),bo(e,i),bo(i,n),bo(e,o),bo(e,r),a||(l=To(r,"input",t[8]),a=!0)},p(t,[e]){2&e&&Ao(n,t[1]),1&e&&Eo(i,"for",t[0]),4&e&&Eo(i,"title",t[2]),4&e&&Eo(i,"aria-label",t[2]),1&e&&Eo(r,"id",t[0]),8&e&&Eo(r,"data-state",t[3]),16&e&&Eo(r,"placeholder",t[4]),160&e&&s!==(s=void 0===t[5]?"":t[7](t[5]+""))&&r.value!==s&&(r.value=s)},i:Xn,o:Xn,d(t){t&&$o(e),a=!1,l()}}}function yg(t,e,i){let{id:n}=e,{label:o}=e,{title:r}=e,{state:s}=e,{placeholder:a}=e,{value:l}=e,{onchange:c}=e,{format:h=(t=>t.replace(/\D/g,""))}=e;return t.$$set=t=>{"id"in t&&i(0,n=t.id),"label"in t&&i(1,o=t.label),"title"in t&&i(2,r=t.title),"state"in t&&i(3,s=t.state),"placeholder"in t&&i(4,a=t.placeholder),"value"in t&&i(5,l=t.value),"onchange"in t&&i(6,c=t.onchange),"format"in t&&i(7,h=t.format)},[n,o,r,s,a,l,c,h,t=>c(h(t.currentTarget.value))]}class vg extends Er{constructor(t){super(),Pr(this,t,yg,gg,eo,{id:0,label:1,title:2,state:3,placeholder:4,value:5,onchange:6,format:7})}}function bg(t){let e;return{c(){e=_o("g")},m(i,n){xo(i,e,n),e.innerHTML=t[2]},p(t,i){4&i&&(e.innerHTML=t[2])},d(t){t&&$o(e)}}}function xg(t){let e,i,n,o,r,s,a,l;return r=new wl({props:{$$slots:{default:[bg]},$$scope:{ctx:t}}}),{c(){e=wo("div"),i=wo("input"),n=So(),o=wo("label"),Cr(r.$$.fragment),Eo(i,"id",t[0]),Eo(i,"class","implicit"),Eo(i,"type","checkbox"),i.checked=t[1],Eo(o,"for",t[0]),Eo(o,"title",t[3])},m(c,h){xo(c,e,h),bo(e,i),bo(e,n),bo(e,o),Tr(r,o,null),s=!0,a||(l=To(i,"change",t[5]),a=!0)},p(t,[e]){(!s||1&e)&&Eo(i,"id",t[0]),(!s||2&e)&&(i.checked=t[1]);const n={};68&e&&(n.$$scope={dirty:e,ctx:t}),r.$set(n),(!s||1&e)&&Eo(o,"for",t[0]),(!s||8&e)&&Eo(o,"title",t[3])},i(t){s||(mr(r.$$.fragment,t),s=!0)},o(t){gr(r.$$.fragment,t),s=!1},d(t){t&&$o(e),Mr(r),a=!1,l()}}}function $g(t,e,i){let{id:n}=e,{locked:o}=e,{icon:r}=e,{title:s}=e,{onchange:a}=e;return t.$$set=t=>{"id"in t&&i(0,n=t.id),"locked"in t&&i(1,o=t.locked),"icon"in t&&i(2,r=t.icon),"title"in t&&i(3,s=t.title),"onchange"in t&&i(4,a=t.onchange)},[n,o,r,s,a,t=>a(t.currentTarget.checked)]}class wg extends Er{constructor(t){super(),Pr(this,t,$g,xg,eo,{id:0,locked:1,icon:2,title:3,onchange:4})}}function _g(t){let e;return{c(){e=ko("Save")},m(t,i){xo(t,e,i)},d(t){t&&$o(e)}}}function kg(t){let e,i,n,o,r,s,a,l,c,h,u,d,p,f=t[1].resizeLabelFormCaption+"";return l=new Nh({props:{items:t[3]}}),h=new Pl({props:{type:"submit",class:"implicit",$$slots:{default:[_g]},$$scope:{ctx:t}}}),{c(){e=wo("form"),i=wo("div"),n=wo("fieldset"),o=wo("legend"),r=ko(f),s=So(),a=wo("div"),Cr(l.$$.fragment),c=So(),Cr(h.$$.fragment),Eo(o,"class","implicit"),Eo(a,"class","PinturaFieldsetInner"),Eo(i,"class","PinturaFormInner"),Eo(e,"slot","footer"),Eo(e,"style",t[4])},m(f,m){xo(f,e,m),bo(e,i),bo(i,n),bo(n,o),bo(o,r),bo(n,s),bo(n,a),Tr(l,a,null),t[64](a),bo(i,c),Tr(h,i,null),u=!0,d||(p=[To(a,"focusin",t[14]),To(a,"focusout",t[15]),To(e,"submit",Mo(t[16]))],d=!0)},p(t,i){(!u||2&i[0])&&f!==(f=t[1].resizeLabelFormCaption+"")&&Ao(r,f);const n={};8&i[0]&&(n.items=t[3]),l.$set(n);const o={};67108864&i[2]&&(o.$$scope={dirty:i,ctx:t}),h.$set(o),(!u||16&i[0])&&Eo(e,"style",t[4])},i(t){u||(mr(l.$$.fragment,t),mr(h.$$.fragment,t),u=!0)},o(t){gr(l.$$.fragment,t),gr(h.$$.fragment,t),u=!1},d(i){i&&$o(e),Mr(l),t[64](null),Mr(h),d=!1,Jn(p)}}}function Sg(t){let e,i;return e=new np({props:{$$slots:{footer:[kg]},$$scope:{ctx:t}}}),e.$on("measure",t[65]),{c(){Cr(e.$$.fragment)},m(t,n){Tr(e,t,n),i=!0},p(t,i){const n={};30&i[0]|67108864&i[2]&&(n.$$scope={dirty:i,ctx:t}),e.$set(n)},i(t){i||(mr(e.$$.fragment,t),i=!0)},o(t){gr(e.$$.fragment,t),i=!1},d(t){Mr(e,t)}}}function Cg(t,i,n){let o,r,s,a,l,c,h,u,d,p,f,m,g,y,v,b,x,$,w,_,k,S,C,T,M,P,E,I,D,R=Xn,L=()=>(R(),R=io(z,(t=>n(41,m=t))),z);t.$$.on_destroy.push((()=>R()));const O=(t,i=0,n=9999)=>{if(e(t)&&!(t=t.replace(/\D/g,"")).length)return;const o=Math.round(t);return Number.isNaN(o)?void 0:Qr(o,i,n)};let{isActive:z}=i;L();let{stores:F}=i,{locale:B={}}=i,{resizeMinSize:N=St(1,1)}=i,{resizeMaxSize:H=St(9999,9999)}=i,{resizeSizePresetOptions:W}=i,{resizeWidthPresetOptions:V}=i,{resizeHeightPresetOptions:U}=i,{resizeWillRenderFooter:q=Y}=i;const X=Qs(0,{stiffness:.15,damping:.3});oo(t,X,(t=>n(60,P=t)));const{animation:G,imageSize:Z,imageCropRect:K,imageCropRectAspectRatio:Q,imageCropAspectRatio:J,imageOutputSize:tt,imageSelectionRect:et,imageSelectionZoom:it,history:nt,env:ot}=F;oo(t,G,(t=>n(62,I=t))),oo(t,Z,(t=>n(71,b=t))),oo(t,K,(t=>n(40,p=t))),oo(t,Q,(t=>n(43,y=t))),oo(t,J,(t=>n(70,v=t))),oo(t,tt,(t=>n(42,g=t))),oo(t,it,(t=>n(69,f=t))),oo(t,ot,(t=>n(61,E=t)));const rt=A();let st,at,lt,ct,ht,ut=!1;const dt=(t,e,i,n,o)=>null!=t&&i!==e?t>=n[e]&&t<=o[e]?"valid":"invalid":"undetermined",pt=(t,e,i)=>Math.round(null!=t?t/e:i.height),ft=()=>{ut&&at&&lt&&("width"===ct?n(37,lt=Math.round(at/y)):"height"===ct?n(36,at=Math.round(lt*y)):("width"===ht?n(37,lt=Math.round(at/y)):"height"===ht&&n(36,at=Math.round(lt*y)),mt()))},mt=t=>{let e=O(at),i=O(lt),o=e,r=i,s=o&&r,a=t||y;if(!o&&!r)return;o&&!r?r=Math.round(o/a):r&&!o&&(o=Math.round(r*a)),a=t||s?j(o,r):y;let l=St(o,r);Et(H,l)||(l=oe(H,a)),Et(l,N)||(l=ne(N,a)),n(36,at=null!=e?Math.round(l.width):void 0),n(37,lt=null!=i?Math.round(l.height):void 0)},gt=()=>{mt();const{width:t,height:e}=g||{};t===at&&e===lt||(at||lt?(at&&lt&&ho(J,v=at/lt,v),ho(tt,g=St(at,lt),g)):(ho(J,v=b.width/b.height,v),ho(J,v=void 0,v),ho(tt,g=void 0,g)),nt.write())},yt=tt.subscribe((t=>{if(!t)return n(36,at=void 0),void n(37,lt=void 0);n(36,at=t.width),n(37,lt=t.height),mt()})),vt=J.subscribe((t=>{(at||lt)&&t&&(at&&lt&&j(at,lt)!==t?(n(37,lt=at/t),mt(t)):mt())})),bt=t=>e(t[0])?(t[1]=t[1].map(bt),t):Ke(t)?[t,""+t]:t,xt=t=>{if(e(t[0]))return t[1]=t[1].map(xt),t;let[i,n]=t;if(Ke(i)&&Ke(n)){const[t,e]=[i,n];n=`${t} Г— ${e}`,i=[t,e]}return[i,n]},$t=Dr();oo(t,$t,(t=>n(44,x=t)));const wt=Dr();oo(t,wt,(t=>n(45,$=t)));const kt=Dr();oo(t,kt,(t=>n(46,w=t)));const Ct=Dr();oo(t,Ct,(t=>n(47,_=t)));const Tt=Dr();oo(t,Tt,(t=>n(48,k=t)));const Mt=Dr();oo(t,Mt,(t=>n(49,S=t)));const Pt=Rr([tt,wt],(([t,e],i)=>{if(!e)return i(-1);const n=e.findIndex((([e])=>{if(!e&&!t)return!0;if(!e)return!1;const[i,n]=e;return t.width===i&&t.height===n}));i(n<0?0:n)}));oo(t,Pt,(t=>n(51,C=t)));const It=Rr([tt,Ct],(([t,e],i)=>{if(!e)return i(-1);const n=e.findIndex((([e])=>!e&&!t||!!e&&t.width===e));i(n<0?0:n)}));oo(t,It,(t=>n(53,T=t)));const At=Rr([tt,Mt],(([t,e],i)=>{if(!e)return i(-1);const n=e.findIndex((([e])=>!e&&!t||!!e&&t.height===e));i(n<0?0:n)}));let Dt,Rt;oo(t,At,(t=>n(55,M=t)));let Lt={};const Ot=Qs(I?20:0);return oo(t,Ot,(t=>n(63,D=t))),Yo((()=>{yt(),vt()})),t.$$set=t=>{"isActive"in t&&L(n(0,z=t.isActive)),"stores"in t&&n(28,F=t.stores),"locale"in t&&n(1,B=t.locale),"resizeMinSize"in t&&n(29,N=t.resizeMinSize),"resizeMaxSize"in t&&n(30,H=t.resizeMaxSize),"resizeSizePresetOptions"in t&&n(31,W=t.resizeSizePresetOptions),"resizeWidthPresetOptions"in t&&n(32,V=t.resizeWidthPresetOptions),"resizeHeightPresetOptions"in t&&n(33,U=t.resizeHeightPresetOptions),"resizeWillRenderFooter"in t&&n(34,q=t.resizeWillRenderFooter)},t.$$.update=()=>{var i;8193&t.$$.dirty[1]&&W&&(ho($t,x=W.map(xt),x),ho(wt,$=wc(x),$)),8192&t.$$.dirty[1]&&n(56,a=!!x),1064960&t.$$.dirty[1]&&n(50,o=C>-1&&$[C][1]),32770&t.$$.dirty[1]&&V&&(ho(kt,w=V.map(bt),w),ho(Ct,_=wc(w),_)),33587200&t.$$.dirty[1]&&n(57,l=!a&&w),4259840&t.$$.dirty[1]&&n(52,r=T>-1&&_[T][1]),131076&t.$$.dirty[1]&&U&&(ho(Tt,k=U.map(bt),k),ho(Mt,S=wc(k),S)),33685504&t.$$.dirty[1]&&n(58,c=!a&&k),17039360&t.$$.dirty[1]&&n(54,s=M>-1&&S[M][1]),234881024&t.$$.dirty[1]&&n(59,h=!a&&!l&&!c),1610612738&t.$$.dirty[0]|2147136504&t.$$.dirty[1]&&n(3,u=Lt&&iu((()=>{return q([a&&["Dropdown","size-presets",{label:o,options:x,onchange:t=>{return(e=t.value)&&!Dt&&(Dt={...p},Rt=v),e?(ho(J,v=j(e[0],e[1]),v),ho(tt,g=_t(e),g)):(ho(K,p=Dt,p),ho(J,v=Rt,v),ho(tt,g=void 0,g),Dt=void 0,Rt=void 0),void nt.write();var e},selectedIndex:C}],l&&["Dropdown","width-presets",{label:r,options:w,onchange:t=>{n(36,at=t.value),gt()},selectedIndex:T}],l&&c&&["span","times",{class:"PinturaResizeLabel",innerHTML:"&times;"}],c&&["Dropdown","height-presets",{label:s,options:k,onchange:t=>{n(37,lt=t.value),gt()},selectedIndex:M}],h&&[vg,"width-input",{id:"width-"+rt,title:B.resizeTitleInputWidth,label:B.resizeLabelInputWidth,placeholder:(t=O(lt),i=y,u=p,Math.round(null!=t?t*i:u.width)),value:at,state:dt(O(at),"width",ct,N,H),onchange:t=>{n(36,at=t),ft()}}],h&&[wg,"aspect-ratio-lock",{id:"aspect-ratio-lock-"+rt,title:B.resizeTitleButtonMaintainAspectRatio,icon:e(B.resizeIconButtonMaintainAspectRatio)?B.resizeIconButtonMaintainAspectRatio:B.resizeIconButtonMaintainAspectRatio(ut,P),locked:ut,onchange:t=>{n(35,ut=t),ft()}}],h&&[vg,"height-input",{id:"height-"+rt,title:B.resizeTitleInputHeight,label:B.resizeLabelInputHeight,placeholder:pt(O(at),y,p),value:lt,state:dt(O(lt),"height",ct,N,H),onchange:t=>{n(37,lt=t),ft()}}]].filter(Boolean),{...E},(()=>n(39,Lt={})));var t,i,u})).filter(Boolean)),16&t.$$.dirty[1]&&X.set(ut?1:0),128&t.$$.dirty[1]&&ct&&(ht=ct),3072&t.$$.dirty[1]&&ho(it,f=m?(i=g)&&p?i.width/p.width||i.height/p.height:1:void 0,f),1024&t.$$.dirty[1]|1&t.$$.dirty[2]&&I&&Ot.set(m?0:20),2&t.$$.dirty[2]&&n(4,d=D?`transform: translateY(${D}px)`:void 0)},[z,B,st,u,d,X,G,Z,K,Q,J,tt,it,ot,t=>{const e=t.target.id;/width/.test(e)?n(38,ct="width"):/height/.test(e)?n(38,ct="height"):/aspectRatio/i.test(e)?n(38,ct="lock"):n(38,ct=void 0)},t=>{st.contains(t.relatedTarget)||gt(),n(38,ct=void 0)},gt,$t,wt,kt,Ct,Tt,Mt,Pt,It,At,Ot,"resize",F,N,H,W,V,U,q,ut,at,lt,ct,Lt,p,m,g,y,x,$,w,_,k,S,o,C,r,T,s,M,a,l,c,h,P,E,I,D,function(t){Zo[t?"unshift":"push"]((()=>{st=t,n(2,st)}))},function(e){Xo(t,e)}]}var Tg={util:["resize",class extends Er{constructor(t){super(),Pr(this,t,Cg,Sg,eo,{name:27,isActive:0,stores:28,locale:1,resizeMinSize:29,resizeMaxSize:30,resizeSizePresetOptions:31,resizeWidthPresetOptions:32,resizeHeightPresetOptions:33,resizeWillRenderFooter:34},[-1,-1,-1])}get name(){return this.$$.ctx[27]}get isActive(){return this.$$.ctx[0]}set isActive(t){this.$set({isActive:t}),ar()}get stores(){return this.$$.ctx[28]}set stores(t){this.$set({stores:t}),ar()}get locale(){return this.$$.ctx[1]}set locale(t){this.$set({locale:t}),ar()}get resizeMinSize(){return this.$$.ctx[29]}set resizeMinSize(t){this.$set({resizeMinSize:t}),ar()}get resizeMaxSize(){return this.$$.ctx[30]}set resizeMaxSize(t){this.$set({resizeMaxSize:t}),ar()}get resizeSizePresetOptions(){return this.$$.ctx[31]}set resizeSizePresetOptions(t){this.$set({resizeSizePresetOptions:t}),ar()}get resizeWidthPresetOptions(){return this.$$.ctx[32]}set resizeWidthPresetOptions(t){this.$set({resizeWidthPresetOptions:t}),ar()}get resizeHeightPresetOptions(){return this.$$.ctx[33]}set resizeHeightPresetOptions(t){this.$set({resizeHeightPresetOptions:t}),ar()}get resizeWillRenderFooter(){return this.$$.ctx[34]}set resizeWillRenderFooter(t){this.$set({resizeWillRenderFooter:t}),ar()}}]};function Mg(t){let e,i;return e=new Qm({props:{stores:t[3],locale:t[4],isActive:t[0],isActiveFraction:t[1],isVisible:t[2],mapScreenPointToImagePoint:t[8],mapImagePointToScreenPoint:t[9],enableZoomControls:t[5],utilKey:"redact",imageRotation:t[10],imageFlipX:t[6],imageFlipY:t[7],shapes:t[11],toolbar:["rect"],toolShapes:{rectangle:[{x:0,y:0,width:0,height:0}]},toolActive:"rectangle",parentRect:t[13],enablePresetDropImage:!1,enablePresetSelectImage:!1,hooks:{willRenderShapeControls:t[24]}}}),e.$on("measure",t[25]),{c(){Cr(e.$$.fragment)},m(t,n){Tr(e,t,n),i=!0},p(t,[i]){const n={};8&i&&(n.stores=t[3]),16&i&&(n.locale=t[4]),1&i&&(n.isActive=t[0]),2&i&&(n.isActiveFraction=t[1]),4&i&&(n.isVisible=t[2]),256&i&&(n.mapScreenPointToImagePoint=t[8]),512&i&&(n.mapImagePointToScreenPoint=t[9]),32&i&&(n.enableZoomControls=t[5]),1024&i&&(n.imageRotation=t[10]),64&i&&(n.imageFlipX=t[6]),128&i&&(n.imageFlipY=t[7]),e.$set(n)},i(t){i||(mr(e.$$.fragment,t),i=!0)},o(t){gr(e.$$.fragment,t),i=!1},d(t){Mr(e,t)}}}function Pg(t,e,i){let n,o,r,s,a,l,c,h,u,{isActive:d}=e,{isActiveFraction:p}=e,{isVisible:f}=e,{stores:m}=e,{locale:g={}}=e,{enableZoomControls:y=!0}=e;const{imageRedaction:v,rootRect:b,imageSize:x,imageRotation:$,imageFlipX:w,imageFlipY:_,imageTransforms:k,imageTransformsInterpolated:S}=m;return oo(t,b,(t=>i(20,r=t))),oo(t,x,(t=>i(21,s=t))),oo(t,$,(t=>i(10,u=t))),oo(t,w,(t=>i(6,c=t))),oo(t,_,(t=>i(7,h=t))),oo(t,k,(t=>i(23,l=t))),oo(t,S,(t=>i(22,a=t))),t.$$set=t=>{"isActive"in t&&i(0,d=t.isActive),"isActiveFraction"in t&&i(1,p=t.isActiveFraction),"isVisible"in t&&i(2,f=t.isVisible),"stores"in t&&i(3,m=t.stores),"locale"in t&&i(4,g=t.locale),"enableZoomControls"in t&&i(5,y=t.enableZoomControls)},t.$$.update=()=>{15728832&t.$$.dirty&&i(8,n=t=>tg(t,r,s,a.origin,a.translation,l.rotation.z,a.scale,c,h)),15728832&t.$$.dirty&&i(9,o=t=>Jm(t,r,s,a.origin,a.translation,l.rotation.z,a.scale,c,h))},[d,p,f,m,g,y,c,h,n,o,u,v,b,x,$,w,_,k,S,"redact",r,s,a,l,t=>(((t,e)=>{const i=Bu(t,e);El(i,(e=>zu(e)===t))})("to-front",Fu(t[0])),t),function(e){Xo(t,e)}]}var Eg={util:["redact",class extends Er{constructor(t){super(),Pr(this,t,Pg,Mg,eo,{name:19,isActive:0,isActiveFraction:1,isVisible:2,stores:3,locale:4,enableZoomControls:5})}get name(){return this.$$.ctx[19]}get isActive(){return this.$$.ctx[0]}set isActive(t){this.$set({isActive:t}),ar()}get isActiveFraction(){return this.$$.ctx[1]}set isActiveFraction(t){this.$set({isActiveFraction:t}),ar()}get isVisible(){return this.$$.ctx[2]}set isVisible(t){this.$set({isVisible:t}),ar()}get stores(){return this.$$.ctx[3]}set stores(t){this.$set({stores:t}),ar()}get locale(){return this.$$.ctx[4]}set locale(t){this.$set({locale:t}),ar()}get enableZoomControls(){return this.$$.ctx[5]}set enableZoomControls(t){this.$set({enableZoomControls:t}),ar()}}]};const Ig='<g fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em"><path d="M18 6L6 18M6 6l12 12"></path></path></g>',Ag='<path fill="none" d="M9 15 L12 9 L15 15 M10 13.5 h3" stroke="currentColor" stroke-width=".125em"/>';var Dg={labelReset:"Reset",labelDefault:"Default",labelAuto:"Auto",labelNone:"None",labelEdit:"Edit",labelClose:"Close",labelSupportError:t=>t.join(", ")+" not supported on this browser",labelColor:"Color",labelWidth:"Width",labelSize:"Size",labelOffset:"Offset",labelAmount:"Amount",labelInset:"Inset",labelRadius:"Radius",labelSizeExtraSmall:"Extra small",labelSizeSmall:"Small",labelSizeMediumSmall:"Medium small",labelSizeMedium:"Medium",labelSizeMediumLarge:"Medium large",labelSizeLarge:"Large",labelSizeExtraLarge:"Extra large",labelButtonCancel:"Cancel",labelButtonUndo:"Undo",labelButtonRedo:"Redo",labelButtonRevert:"Revert",labelButtonExport:"Done",labelZoomIn:"Zoom in",labelZoomOut:"Zoom out",labelZoomFit:"Fit to view",labelZoomActual:"Actual size",iconZoomIn:'<path stroke="currentColor" stroke-width=".125em" d="M8 12 h8 M12 8 v8" />',iconZoomOut:'<path stroke="currentColor" stroke-width=".125em" d="M9 12 h6" />',iconSupportError:'<g fill="none" stroke="currentColor" stroke-width="2"><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"/><g><line x1="12" y1="9" x2="12" y2="13"/><line x1="12" y1="17" x2="12.01" y2="17"/></g>',iconButtonClose:Ig,iconButtonRevert:'<g fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em"><path d="M7.388 18.538a8 8 0 10-2.992-9.03"/><path fill="currentColor" d="M2.794 11.696L2.37 6.714l5.088 3.18z"/><path d="M12 8v4M12 12l4 2"/></g>',iconButtonUndo:'<g fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em"><path d="M10 8h4c2.485 0 5 2 5 5s-2.515 5-5 5h-4"/><path fill="currentColor" d="M5 8l4-3v6z"/></g>',iconButtonRedo:'<g fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em"><path d="M14 8h-4c-2.485 0-5 2-5 5s2.515 5 5 5h4"/><path fill="currentColor" d="M19 8l-4-3v6z"/></g>',iconButtonExport:'<polyline points="20 6 9 17 4 12" fill="none" stroke="currentColor" stroke-width=".125em"></polyline>',statusLabelButtonClose:"Close",statusIconButtonClose:Ig,statusLabelLoadImage:t=>t&&t.task?t.error?"IMAGE_TOO_SMALL"===t.error.code?"Minimum image size is {minWidth} Г— {minHeight}":"Error loading image":"blob-to-bitmap"===t.task?"Creating previewвЂ¦":"Loading imageвЂ¦":"Waiting for image",statusLabelProcessImage:t=>{if(t&&t.task)return"store"===t.task?t.error?"Error uploading image":"Uploading imageвЂ¦":t.error?"Error processing image":"Processing imageвЂ¦"}};const Rg={shapeLabelButtonSelectSticker:"Select image",shapeIconButtonSelectSticker:'<g fill="none" stroke="currentColor" stroke-width="0.0625em"><path d="M8 21 L15 11 L19 15"/><path d="M15 2 v5 h5"/><path d="M8 2 h8 l4 4 v12 q0 4 -4 4 h-8 q-4 0 -4 -4 v-12 q0 -4 4 -4z"/></g><circle fill="currentColor" cx="10" cy="8" r="1.5"/>',shapeIconButtonFlipHorizontal:'<g stroke="currentColor" stroke-width=".125em"><path fill="none" d="M6 6.5h5v11H6z"/><path fill="currentColor" d="M15 6.5h3v11h-3z"/><path d="M11 4v16" fill="currentColor"/></g>',shapeIconButtonFlipVertical:'<g stroke="currentColor" stroke-width=".125em"><rect x="7" y="8" width="11" height="5" fill="none"/><rect x="7" y="17" width="11" height="2" fill="currentColor"/><line x1="5" y1="13" x2="20" y2="13"/></g>',shapeIconButtonRemove:'<g fill="none" fill-rule="evenodd"><path stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" d="M7.5 7h9z"/><path d="M7.916 9h8.168a1 1 0 01.99 1.14l-.972 6.862a2 2 0 01-1.473 1.653c-.877.23-1.753.345-2.629.345-.876 0-1.752-.115-2.628-.345a2 2 0 01-1.473-1.653l-.973-6.862A1 1 0 017.916 9z" fill="currentColor"/><rect fill="currentColor" x="10" y="5" width="4" height="3" rx="1"/></g>',shapeIconButtonDuplicate:'<g fill="none" fill-rule="evenodd"><path d="M15 13.994V16a2 2 0 01-2 2H8a2 2 0 01-2-2v-5a2 2 0 012-2h2.142" stroke="currentColor" stroke-width=".125em"/><path d="M15 9V8a1 1 0 00-2 0v1h-1a1 1 0 000 2h1v1a1 1 0 002 0v-1h1a1 1 0 000-2h-1zm-4-4h6a2 2 0 012 2v6a2 2 0 01-2 2h-6a2 2 0 01-2-2V7a2 2 0 012-2z" fill="currentColor"/></g>',shapeIconButtonMoveToFront:'<g fill="none" fill-rule="evenodd"><rect fill="currentColor" x="11" y="13" width="8" height="2" rx="1"/><rect fill="currentColor" x="9" y="17" width="10" height="2" rx="1"/><path d="M11.364 8H10a5 5 0 000 10M12 6.5L14.5 8 12 9.5z" stroke="currentColor" stroke-width=".125em" stroke-linecap="round"/></g>',shapeIconButtonTextLayoutAutoWidth:""+Ag,shapeIconButtonTextLayoutAutoHeight:'<g fill="currentColor"><circle cx="4" cy="12" r="1.5"/><circle cx="20" cy="12" r="1.5"/></g>'+Ag,shapeIconButtonTextLayoutFixedSize:'<g fill="currentColor"><circle cx="5" cy="6" r="1.5"/><circle cx="19" cy="6" r="1.5"/><circle cx="19" cy="19" r="1.5"/><circle cx="5" cy="19" r="1.5"/></g>'+Ag,shapeTitleButtonTextLayoutAutoWidth:"Auto width",shapeTitleButtonTextLayoutAutoHeight:"Auto height",shapeTitleButtonTextLayoutFixedSize:"Fixed size",shapeTitleButtonFlipHorizontal:"Flip Horizontal",shapeTitleButtonFlipVertical:"Flip Vertical",shapeTitleButtonRemove:"Remove",shapeTitleButtonDuplicate:"Duplicate",shapeTitleButtonMoveToFront:"Move to front",shapeLabelInputText:"Edit text",shapeIconInputCancel:'<g fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em"><path d="M18 6L6 18M6 6l12 12"/></g>',shapeIconInputConfirm:'<g fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em"><polyline points="20 6 9 17 4 12"/></g>',shapeLabelInputCancel:"Cancel",shapeLabelInputConfirm:"Confirm",shapeLabelStrokeNone:"No outline",shapeLabelFontStyleNormal:"Normal",shapeLabelFontStyleBold:"Bold",shapeLabelFontStyleItalic:"Italic",shapeLabelFontStyleItalicBold:"Bold Italic",shapeTitleBackgroundColor:"Fill color",shapeTitleFontFamily:"Font",shapeTitleFontSize:"Font size",shapeTitleFontStyle:"Font style",shapeTitleLineHeight:"Line height",shapeTitleLineStart:"Start",shapeTitleLineEnd:"End",shapeTitleStrokeWidth:"Line width",shapeTitleStrokeColor:"Line color",shapeTitleLineDecorationBar:"Bar",shapeTitleLineDecorationCircle:"Circle",shapeTitleLineDecorationSquare:"Square",shapeTitleLineDecorationArrow:"Arrow",shapeTitleLineDecorationCircleSolid:"Circle solid",shapeTitleLineDecorationSquareSolid:"Square solid",shapeTitleLineDecorationArrowSolid:"Arrow solid",shapeIconLineDecorationBar:'<g stroke="currentColor" stroke-linecap="round" stroke-width=".125em"><path d="M5,12 H16"/><path d="M16,8 V16"/></g>',shapeIconLineDecorationCircle:'<g stroke="currentColor" stroke-linecap="round"><path stroke-width=".125em" d="M5,12 H12"/><circle fill="none" stroke-width=".125em" cx="16" cy="12" r="4"/></g>',shapeIconLineDecorationSquare:'<g stroke="currentColor" stroke-linecap="round"><path stroke-width=".125em" d="M5,12 H12"/><rect fill="none" stroke-width=".125em" x="12" y="8" width="8" height="8"/></g>',shapeIconLineDecorationArrow:'<g stroke="currentColor" stroke-linecap="round" stroke-width=".125em"><path d="M5,12 H16 M13,7 l6,5 l-6,5" fill="none"/></g>',shapeIconLineDecorationCircleSolid:'<g stroke="currentColor" stroke-linecap="round"><path stroke-width=".125em" d="M5,12 H12"/><circle fill="currentColor" cx="16" cy="12" r="4"/></g>',shapeIconLineDecorationSquareSolid:'<g stroke="currentColor" stroke-linecap="round"><path stroke-width=".125em" d="M5,12 H12"/><rect fill="currentColor" x="12" y="8" width="8" height="8"/></g>',shapeIconLineDecorationArrowSolid:'<g stroke="currentColor" stroke-linecap="round" stroke-width=".125em"><path d="M5,12 H16"/><path d="M13,7 l6,5 l-6,5z" fill="currentColor"/></g>',shapeTitleColorTransparent:"Transparent",shapeTitleColorWhite:"White",shapeTitleColorSilver:"Silver",shapeTitleColorGray:"Gray",shapeTitleColorBlack:"Black",shapeTitleColorNavy:"Navy",shapeTitleColorBlue:"Blue",shapeTitleColorAqua:"Aqua",shapeTitleColorTeal:"Teal",shapeTitleColorOlive:"Olive",shapeTitleColorGreen:"Green",shapeTitleColorYellow:"Yellow",shapeTitleColorOrange:"Orange",shapeTitleColorRed:"Red",shapeTitleColorMaroon:"Maroon",shapeTitleColorFuchsia:"Fuchsia",shapeTitleColorPurple:"Purple",shapeTitleTextColor:"Font color",shapeTitleTextAlign:"Text align",shapeTitleTextAlignLeft:"Left align text",shapeTitleTextAlignCenter:"Center align text",shapeTitleTextAlignRight:"Right align text",shapeIconTextAlignLeft:'<g stroke-width=".125em" stroke="currentColor"><line x1="5" y1="8" x2="15" y2="8"/><line x1="5" y1="12" x2="19" y2="12"/><line x1="5" y1="16" x2="14" y2="16"/></g>',shapeIconTextAlignCenter:'<g stroke-width=".125em" stroke="currentColor"><line x1="7" y1="8" x2="17" y2="8"/><line x1="5" y1="12" x2="19" y2="12"/><line x1="8" y1="16" x2="16" y2="16"/></g>',shapeIconTextAlignRight:'<g stroke-width=".125em" stroke="currentColor"><line x1="9" y1="8" x2="19" y2="8"/><line x1="5" y1="12" x2="19" y2="12"/><line x1="11" y1="16" x2="19" y2="16"/></g>',shapeLabelToolSharpie:"Sharpie",shapeLabelToolEraser:"Eraser",shapeLabelToolRectangle:"Rectangle",shapeLabelToolEllipse:"Ellipse",shapeLabelToolArrow:"Arrow",shapeLabelToolLine:"Line",shapeLabelToolText:"Text",shapeLabelToolPreset:"Stickers",shapeIconToolSharpie:'<g stroke-width=".125em" stroke="currentColor" fill="none"><path d="M2.025 5c5.616-2.732 8.833-3.857 9.65-3.374C12.903 2.351.518 12.666 2.026 14 3.534 15.334 16.536.566 17.73 2.566 18.924 4.566 3.98 17.187 4.831 18c.851.813 9.848-6 11.643-6 1.087 0-2.53 5.11-2.92 7-.086.41 3.323-1.498 4.773-1 .494.17.64 2.317 1.319 3 .439.443 1.332.776 2.679 1" stroke="currentColor" stroke-width=".125em" fill="none" fill-rule="evenodd" stroke-linejoin="round"/></g>',shapeIconToolEraser:'<g stroke-width=".125em" stroke="currentColor" stroke-linecap="round" fill="none"><g transform="translate(3, 15) rotate(-45)"><rect x="0" y="0" width="18" height="10" rx="3"/></g><line x1="11" y1="21" x2="18" y2="21"/><line x1="20" y1="21" x2="22" y2="21"/></g>',shapeIconToolRectangle:'<g stroke-width=".125em" stroke="currentColor" fill="none"><rect x="2" y="2" width="20" height="20" rx="3"/></g>',shapeIconToolEllipse:'<g stroke-width=".125em" stroke="currentColor" fill="none"><circle cx="12" cy="12" r="11"/></g>',shapeIconToolArrow:'<g stroke-width=".125em" stroke="currentColor" fill="none"><line x1="20" y1="3" x2="6" y2="21"/><path d="m10 5 L22 1 L21 13" fill="currentColor" stroke="none"/></g>',shapeIconToolLine:'<g stroke-width=".125em" stroke="currentColor" fill="none"><line x1="20" y1="3" x2="6" y2="21"/></g>',shapeIconToolText:'<g stroke="none" fill="currentColor" transform="translate(6,0)"><path d="M8.14 20.085c.459 0 .901-.034 1.329-.102a8.597 8.597 0 001.015-.21v1.984c-.281.135-.695.247-1.242.336a9.328 9.328 0 01-1.477.133c-3.312 0-4.968-1.745-4.968-5.235V6.804H.344v-1.25l2.453-1.078L3.89.819h1.5v3.97h4.97v2.015H5.39v10.078c0 1.031.245 1.823.735 2.375s1.161.828 2.015.828z"/>',shapeIconToolPreset:'<g fill="none" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em"><path d="M12 22c2.773 0 1.189-5.177 3-7 1.796-1.808 7-.25 7-3 0-5.523-4.477-10-10-10S2 6.477 2 12s4.477 10 10 10z"></path><path d="M20 17c-3 3-5 5-8 5"></path></g>'};var Lg=(t,e)=>{const i=Object.getOwnPropertyDescriptors(t);Object.keys(i).forEach((n=>{i[n].get?Object.defineProperty(e,n,{get:()=>t[n],set:e=>t[n]=e}):e[n]=t[n]}))},Og=t=>{const e={},{sub:i,pub:o}=di();n()&&null!==document.doctype||console.warn("Browser is in quirks mode, add <!DOCTYPE html> to page to fix render issues");const r=fs();Lg(r,e);const s=((t,e)=>{const i={},o=new Mu({target:t,props:{stores:e,pluginComponents:Array.from(Ru)}});let r=!1;const s=()=>{r||(n()&&window.removeEventListener("pagehide",s),o&&(r=!0,o.$destroy()))};Iu||(Iu=new Set(gl(Mu).filter((t=>!Eu.includes(t))))),Iu.forEach((t=>{Object.defineProperty(i,t,{get:()=>o[t],set:e=>o[t]=e})})),Object.defineProperty(i,"previewImageData",{get:()=>o.imagePreviewCurrent}),Au.forEach((t=>{const e=Du[t],n=e[0];Object.defineProperty(i,t,{get:()=>o.pluginInterface[n][t],set:i=>{const n=e.reduce(((e,n)=>(e[n]={...o.pluginOptions[n],[t]:i},e)),{});o.pluginOptions={...o.pluginOptions,...n}}})})),Object.defineProperty(i,"element",{get:()=>o.root,set:()=>{}});const a=o.history;return Yr(i,{on:(t,e)=>{if(r)return()=>{};if(/undo|redo|revert/.test(t))return a.on(t,e);const i=[o.sub(t,e),o.$on(t,(t=>e(t instanceof CustomEvent&&!t.detail?void 0:t)))].filter(Boolean);return()=>i.forEach((t=>t()))},updateImagePreview:t=>{o.imagePreviewSrc=t},close:()=>!r&&o.pub("close"),destroy:s}),Object.defineProperty(i,"history",{get:()=>({undo:()=>a.undo(),redo:()=>a.redo(),revert:()=>a.revert(),get:()=>a.get(),getCollapsed:()=>a.get().splice(0,a.index+1),set:t=>a.set(t),write:t=>a.write(t),get length(){return a.length()},get index(){return a.index}})}),n()&&window.addEventListener("pagehide",s),i})(t,r.stores);Lg(s,e);const a=["loadImage","processImage","abortProcessImage","abortLoadImage"].map((t=>s.on(t,(e=>{const i=r[t](e&&e.detail);i instanceof Promise&&i.catch(f)})))),l=(t,e)=>{const n=i(t,e),o=r.on(t,e),a=s.on(t,e);return()=>{n(),o(),a()}};e.handleEvent=f;const c=Lu.map((t=>l(t,(i=>e.handleEvent(t,i)))));return Yr(e,{on:l,updateImage:t=>new Promise(((i,n)=>{const o=e.history.get(),s=e.imageState;r.loadImage(t).then((t=>{e.history.set(o),e.imageState=s,i(t)})).catch(n)})),close:()=>{o("close")},destroy:()=>{[...a,...c].forEach((t=>t())),s.destroy(),r.destroy(),o("destroy")}}),setTimeout((()=>o("init",e)),0),e};n()&&HTMLElement;const{document:zg,window:Fg}=br;function Bg(t){let e,i,n,o;return nr(t[27]),{c(){e=So(),i=wo("div"),Eo(i,"class",t[5]),Eo(i,"style",t[4])},m(r,s){xo(r,e,s),xo(r,i,s),t[28](i),n||(o=[To(Fg,"keydown",t[10]),To(Fg,"orientationchange",t[11]),To(Fg,"resize",t[27]),To(zg.body,"focusin",(function(){to(!t[1]&&t[7])&&(!t[1]&&t[7]).apply(this,arguments)})),To(zg.body,"focusout",(function(){to(t[2]&&t[8])&&(t[2]&&t[8]).apply(this,arguments)})),To(i,"wheel",t[9],{passive:!1})],n=!0)},p(e,n){t=e,32&n[0]&&Eo(i,"class",t[5]),16&n[0]&&Eo(i,"style",t[4])},i:Xn,o:Xn,d(r){r&&$o(e),r&&$o(i),t[28](null),n=!1,Jn(o)}}}function Ng(e,i,o){let r,s,a,l,c,h,u,d;const p=Vo();let{root:f}=i,{preventZoomViewport:m=!0}=i,{preventScrollBodyIfNeeded:g=!0}=i,{preventFooterOverlapIfNeeded:y=!0}=i,{class:v}=i,b=!0,x=!1,$=!1,w=n()&&document.documentElement,_=n()&&document.body,k=n()&&document.head;const S=Qs(0,{precision:.001,damping:.5});oo(e,S,(t=>o(23,d=t)));const C=S.subscribe((t=>{$&&t>=1?(o(19,$=!1),o(1,b=!1),p("show")):x&&t<=0&&(o(18,x=!1),o(1,b=!0),p("hide"))}));let T,M,P,E=!1;const I=()=>document.querySelector("meta[name=viewport]"),A=()=>Array.from(document.querySelectorAll("meta[name=theme-color]"));let D;let R,L,O,z=0;const F=()=>{L||(L=t("div",{style:"position:fixed;height:100vh;top:0"}),_.append(L))};let B;Wo((()=>{y&&Oe()&&F()})),jo((()=>{L&&(o(21,O=L.offsetHeight),L.remove(),L=void 0)}));const N=()=>w.style.setProperty("--pintura-document-height",window.innerHeight+"px");return Yo((()=>{w.classList.remove("PinturaModalBodyLock"),C()})),e.$$set=t=>{"root"in t&&o(0,f=t.root),"preventZoomViewport"in t&&o(12,m=t.preventZoomViewport),"preventScrollBodyIfNeeded"in t&&o(13,g=t.preventScrollBodyIfNeeded),"preventFooterOverlapIfNeeded"in t&&o(14,y=t.preventFooterOverlapIfNeeded),"class"in t&&o(15,v=t.class)},e.$$.update=()=>{9175042&e.$$.dirty[0]&&o(22,r=$||x?d:b?0:1),4096&e.$$.dirty[0]&&(s="width=device-width,height=device-height,initial-scale=1"+(m?",maximum-scale=1,user-scalable=0":"")),786434&e.$$.dirty[0]&&o(24,a=!$&&!b&&!x),12&e.$$.dirty[0]&&(E||o(20,R=z)),2097160&e.$$.dirty[0]&&o(25,l=Ke(O)?"--viewport-pad-footer:"+(O>z?0:1):""),38797312&e.$$.dirty[0]&&o(4,c=`opacity:${r};height:${R}px;--editor-modal:1;${l}`),32768&e.$$.dirty[0]&&o(5,h=Ga(["pintura-editor","PinturaModal",v])),8192&e.$$.dirty[0]&&o(26,u=g&&Oe()&&/15_/.test(navigator.userAgent)),83886080&e.$$.dirty[0]&&u&&(t=>{t?(B=window.scrollY,w.classList.add("PinturaDocumentLock"),N(),window.addEventListener("resize",N)):(window.removeEventListener("resize",N),w.classList.remove("PinturaDocumentLock"),Ke(B)&&window.scrollTo(0,B),B=void 0)})(a)},[f,b,E,z,c,h,S,t=>{Yh(t.target)&&(o(2,E=!0),D=z)},t=>{if(Yh(t.target))if(clearTimeout(void 0),D===z)o(2,E=!1);else{const t=z;((t,e)=>{const i=()=>{t()?e():requestAnimationFrame(i)};requestAnimationFrame(i)})((()=>z!==t),(()=>o(2,E=!1)))}},t=>{t.target&&/PinturaStage/.test(t.target.className)&&t.preventDefault()},t=>{const{key:e}=t;if(!/escape/i.test(e))return;const i=t.target;if(i&&/input|textarea/i.test(i.nodeName))return;const n=document.querySelectorAll(".PinturaModal");n[n.length-1]===f&&p("close")},F,m,g,y,v,()=>{if($||!b)return;o(19,$=!0);const e=I()||t("meta",{name:"viewport"});T=!T&&e.getAttribute("content"),e.setAttribute("content",s+(/cover/.test(T)?",viewport-fit=cover":"")),e.parentNode||k.append(e);const i=getComputedStyle(f).getPropertyValue("--color-background"),n=A();if(n.length)M=n.map((t=>t.getAttribute("content")));else{const e=t("meta",{name:"theme-color"});k.append(e),n.push(e)}n.forEach((t=>t.setAttribute("content",`rgb(${i})`))),clearTimeout(P),P=setTimeout((()=>S.set(1)),250)},()=>{if(x||b)return;clearTimeout(P),o(18,x=!0);const t=I();T?t.setAttribute("content",T):t.remove();const e=A();M?e.forEach(((t,e)=>{t.setAttribute("content",M[e])})):e.forEach((t=>t.remove())),S.set(0)},x,$,R,O,r,d,a,l,u,function(){o(3,z=Fg.innerHeight)},function(t){Zo[t?"unshift":"push"]((()=>{f=t,o(0,f)}))}]}class Hg extends Er{constructor(t){super(),Pr(this,t,Ng,Bg,eo,{root:0,preventZoomViewport:12,preventScrollBodyIfNeeded:13,preventFooterOverlapIfNeeded:14,class:15,show:16,hide:17},[-1,-1])}get root(){return this.$$.ctx[0]}set root(t){this.$set({root:t}),ar()}get preventZoomViewport(){return this.$$.ctx[12]}set preventZoomViewport(t){this.$set({preventZoomViewport:t}),ar()}get preventScrollBodyIfNeeded(){return this.$$.ctx[13]}set preventScrollBodyIfNeeded(t){this.$set({preventScrollBodyIfNeeded:t}),ar()}get preventFooterOverlapIfNeeded(){return this.$$.ctx[14]}set preventFooterOverlapIfNeeded(t){this.$set({preventFooterOverlapIfNeeded:t}),ar()}get class(){return this.$$.ctx[15]}set class(t){this.$set({class:t}),ar()}get show(){return this.$$.ctx[16]}get hide(){return this.$$.ctx[17]}}const Wg=(t,e,i,n)=>{const o=Q(e.x-t.x,e.y-t.y),r=rt(o),s=5*i;let a;a=n?.5*s:Math.ceil(.5*(s-1));const l=ut(et(r),a);return{anchor:et(t),offset:l,normal:r,solid:n,size:s,sizeHalf:a}},jg=({anchor:t,solid:e,normal:i,offset:n,size:o,sizeHalf:r,strokeWidth:s,strokeColor:a},l)=>{const c=t.x,h=t.y,u=ut(et(i),o),d=Q(c+u.x,h+u.y);if(ut(u,.55),e){ct(l,n);const t=ut(et(i),.5*r);return[{points:[Q(c-t.x,h-t.y),Q(d.x-u.y,d.y+u.x),Q(d.x+u.y,d.y-u.x)],backgroundColor:a}]}{const t=ut((t=>{const e=t.x;return t.x=-t.y,t.y=e,t})(et(i)),.5),e=Q(c-t.x,h-t.y),n=Q(c+t.x,h+t.y);return[{points:[Q(d.x+u.y,d.y-u.x),e,Q(c,h),n,Q(d.x-u.y,d.y+u.x)],strokeWidth:s,strokeColor:a}]}},Yg=({anchor:t,solid:e,offset:i,normal:n,sizeHalf:o,strokeWidth:r,strokeColor:s},a)=>(ct(a,i),e&&ct(a,it(et(n))),[{x:t.x,y:t.y,rx:o,ry:o,backgroundColor:e?s:void 0,strokeWidth:e?void 0:r,strokeColor:e?void 0:s}]),Vg=({anchor:t,offset:e,strokeWidth:i,strokeColor:n})=>[{points:[Q(t.x-e.y,t.y+e.x),Q(t.x+e.y,t.y-e.x)],strokeWidth:i,strokeColor:n}],Ug=({anchor:t,solid:e,offset:i,normal:n,sizeHalf:o,strokeWidth:r,strokeColor:s},a)=>{return ct(a,i),[{x:t.x-o,y:t.y-o,width:2*o,height:2*o,rotation:(l=n,Math.atan2(l.y,l.x)),backgroundColor:e?s:void 0,strokeWidth:e?void 0:r,strokeColor:e?void 0:s}];var l},qg=(t,i)=>{const n=parseFloat(t)*i;return e(t)?n+"%":n},Xg=(t,i)=>e(t)?fn(t,i):t,Gg=t=>[{...t,frameStyle:"line",frameInset:0,frameOffset:0,frameSize:t.frameSize?qg(t.frameSize,2):"2.5%",frameRadius:t.frameRound?qg(t.frameSize,2):0}],Zg=({width:t,height:e,frameImage:i,frameSize:n="15%",frameSlices:o={x1:.15,y1:.15,x2:.85,y2:.85}},{isPreview:r})=>{if(!i)return[];const s=Math.sqrt(t*e),a=Xg(n,s),l=r?a:Math.round(a),c=l,{x1:h,x2:u,y1:d,y2:p}=o,f={x0:0,y0:0,x1:l,y1:c,x2:t-l,y2:e-c,x3:t,y3:e,cw:l,ch:c,ew:t-l-l,eh:e-c-c},m=r?1:0,g=2*m,y={width:f.cw,height:f.ch,backgroundImage:i};return[{x:f.x1-m,y:f.y0,width:f.ew+g,height:f.ch,backgroundCorners:[{x:h,y:0},{x:u,y:0},{x:u,y:d},{x:h,y:d}],backgroundImage:i},{x:f.x1-m,y:f.y2,width:f.ew+g,height:f.ch,backgroundCorners:[{x:h,y:p},{x:u,y:p},{x:u,y:1},{x:h,y:1}],backgroundImage:i},{x:f.x0,y:f.y1-m,width:f.cw,height:f.eh+g,backgroundCorners:[{x:0,y:d},{x:h,y:d},{x:h,y:p},{x:0,y:p}],backgroundImage:i},{x:f.x2,y:f.y1-m,width:f.cw,height:f.eh+g,backgroundCorners:[{x:u,y:d},{x:1,y:d},{x:1,y:p},{x:u,y:p}],backgroundImage:i},{...y,x:f.x0,y:f.y0,backgroundCorners:[{x:0,y:0},{x:h,y:0},{x:h,y:d},{x:0,y:d}]},{...y,x:f.x2,y:f.y0,backgroundCorners:[{x:u,y:0},{x:1,y:0},{x:1,y:d},{x:u,y:d}]},{...y,x:f.x2,y:f.y2,backgroundCorners:[{x:u,y:p},{x:1,y:p},{x:1,y:1},{x:u,y:1}]},{...y,x:f.x0,y:f.y2,backgroundCorners:[{x:0,y:p},{x:h,y:p},{x:h,y:1},{x:0,y:1}]}]},Kg=({x:t,y:e,width:i,height:n,frameInset:o="3.5%",frameSize:r=".25%",frameColor:s=[1,1,1],frameOffset:a="5%",frameAmount:l=1,frameRadius:c=0,expandsCanvas:h=!1},{isPreview:u})=>{const d=Math.sqrt(i*n);let p=Xg(r,d);const f=Xg(o,d),m=Xg(a,d);let g=0;u||(p=Math.max(1,Math.round(p)),g=p%2==0?0:.5);const y=Xg(qg(c,l),d);return new Array(l).fill(void 0).map(((o,r)=>{const a=m*r;let l=t+f+a,c=e+f+a,d=t+i-f-a,v=e+n-f-a;return u||(l=Math.round(l),c=Math.round(c),d=Math.round(d),v=Math.round(v)),{x:l+g,y:c+g,width:d-l,height:v-c,cornerRadius:y>0?y-a:0,strokeWidth:p,strokeColor:s,expandsCanvas:h}}))},Qg=({x:t,y:e,width:i,height:n,frameSize:o=".25%",frameOffset:r=0,frameInset:s="2.5%",frameColor:a=[1,1,1]},{isPreview:l})=>{const c=Math.sqrt(i*n);let h=Xg(o,c),u=Xg(s,c),d=Xg(r,c),p=0;l||(h=Math.max(1,Math.round(h)),u=Math.round(u),d=Math.round(d),p=h%2==0?0:.5);const f=d-u,m=t+u+p,g=e+u+p,y=t+i-u-p,v=e+n-u-p;return[{points:[Q(m+f,g),Q(y-f,g)]},{points:[Q(y,g+f),Q(y,v-f)]},{points:[Q(y-f,v),Q(m+f,v)]},{points:[Q(m,v-f),Q(m,g+f)]}].map((t=>(t.strokeWidth=h,t.strokeColor=a,t)))},Jg=({x:t,y:e,width:i,height:n,frameSize:o=".25%",frameInset:r="2.5%",frameLength:s="2.5%",frameColor:a=[1,1,1]},{isPreview:l})=>{const c=Math.sqrt(i*n);let h=Xg(o,c),u=Xg(r,c),d=Xg(s,c),p=0;l||(h=Math.max(1,Math.round(h)),u=Math.round(u),d=Math.round(d),p=h%2==0?0:.5);const f=t+u+p,m=e+u+p,g=t+i-u-p,y=e+n-u-p;return[{points:[Q(f,m+d),Q(f,m),Q(f+d,m)]},{points:[Q(g-d,m),Q(g,m),Q(g,m+d)]},{points:[Q(g,y-d),Q(g,y),Q(g-d,y)]},{points:[Q(f+d,y),Q(f,y),Q(f,y-d)]}].map((t=>(t.strokeWidth=h,t.strokeColor=a,t)))},ty=({x:t,y:e,width:i,height:n,frameColor:o=[1,1,1]},{isPreview:r})=>{const s=Math.sqrt(i*n),a=.1*s;let l=.2*s;const c=.5*a;let h=.0025*s;return r||(l=Math.ceil(l),h=Math.max(2,h)),o.length=3,[{id:"border",x:t-c,y:e-c,width:i+a,height:n+l,frameStyle:"line",frameInset:0,frameOffset:0,frameSize:a,frameColor:o,expandsCanvas:!0},{id:"chin",x:t-c,y:n,width:i+a,height:l,backgroundColor:o,expandsCanvas:!0},r&&{x:t,y:e,width:i,height:n,strokeWidth:h,strokeColor:o}].filter(Boolean)},ey=js,iy=Ys,ny=(e={})=>{const{blurAmount:i,scrambleAmount:n,enableSmoothing:o,backgroundColor:r}=e;return(e,s)=>(async(e,i={})=>{if(!e)return;const{width:n,height:o}=e,{dataSize:r=96,dataSizeScalar:s=1,scrambleAmount:a=4,blurAmount:l=6,outputFormat:c="canvas",backgroundColor:h=[0,0,0]}=i,u=Math.round(r*s),d=Math.min(u/n,u/o),p=Math.floor(n*d),f=Math.floor(o*d),m=t("canvas",{width:p,height:f}),g=m.getContext("2d");if(h.length=3,g.fillStyle=ai(h),g.fillRect(0,0,p,f),_(e)){const i=t("canvas",{width:n,height:o});i.getContext("2d").putImageData(e,0,0),g.drawImage(i,0,0,p,f),w(i)}else g.drawImage(e,0,0,p,f);const y=g.getImageData(0,0,p,f),v=[];if(a>0&&v.push([Vs,{amount:a}]),l>0)for(let t=0;t<l;t++)v.push([Ue,{matrix:Us}]);let b;if(v.length){const t=(e,i)=>`(err, imageData) => {\n                (${e[i][0].toString()})(Object.assign({ imageData: imageData }, filterInstructions[${i}]), \n                    ${e[i+1]?t(e,i+1):"done"})\n            }`,e=`function (options, done) {\n            const filterInstructions = options.filterInstructions;\n            const imageData = options.imageData;\n            (${t(v,0)})(null, imageData)\n        }`,i=await R(e,[{imageData:y,filterInstructions:v.map((t=>t[1]))}],[y.data.buffer]);b=je(i)}else b=y;return"canvas"===c?(g.putImageData(b,0,0),m):b})(e,{blurAmount:i,scrambleAmount:n,enableSmoothing:o,backgroundColor:r,...s})},oy={markupEditorToolbar:((t=["sharpie","eraser","line","arrow","rectangle","ellipse","text","preset"])=>t.map((t=>e(t)?pd(t):Array.isArray(t)?C(t[1])?pd(t[0],void 0,t[1]):pd(t[0],t[1],t[2]):void 0)).filter(Boolean))(),markupEditorToolStyles:{sharpie:dd("path",{strokeWidth:"0.5%",strokeColor:[...cd],disableMove:!0}),eraser:dd("eraser"),line:dd("line",{strokeColor:[...cd],strokeWidth:"0.5%"}),arrow:dd("line",{lineStart:"none",lineEnd:"arrow-solid",strokeColor:[...cd],strokeWidth:"0.5%"}),rectangle:dd("rectangle",{strokeColor:[...hd],backgroundColor:[...cd]}),ellipse:dd("ellipse",{strokeColor:[...hd],backgroundColor:[...cd]}),text:dd("text",{color:[...cd],fontSize:"2%"})},markupEditorShapeStyleControls:((e={})=>{const{colorOptions:i=wd(fd()),lineEndStyleOptions:n=Md(vd()),fontFamilyOptions:o=Cd(bd()),fontStyleOptions:r=Td($d()),textAlignOptions:s=Pd(xd())}=e;let{strokeWidthOptions:a=Sd(yd()),fontSizeOptions:l=_d(md()),lineHeightOptions:c=kd(gd())}=e;[l,c,a]=[l,c,a].map((t=>Array.isArray(t)&&t.every(Ke)?t.map(ad):t));const h={defaultColor:i&&Ad(i),defaultNumber:Dd(),defaultPercentage:Dd({getValue:t=>parseFloat(t),setValue:t=>t+"%",step:.05,label:(t,e,i)=>Math.round(t/i*100)+"%",labelClass:"PinturaPercentageLabel"}),backgroundColor:i&&Rd(i),strokeColor:i&&Ld(i),strokeWidth:a&&(d=a,[dh,{title:t=>t.shapeTitleStrokeWidth,options:t=>Je(t,"backgroundColor")?Ed(d,{defaultKey:"shapeLabelStrokeNone"}):Ed(d),onchange:(t,e)=>{if(!t)return;const i=e.strokeColor||[];if(i[3])return;const n=[...i];n[3]=1,e.strokeColor[3]=n}}]),lineStart:n&&zd(n),lineEnd:n&&Fd(n),color:i&&Bd(i),fontFamily:o&&(u=o,[dh,{title:t=>t.shapeTitleFontFamily,onload:({options:e=[]})=>{rd()&&e.map((([t])=>t)).filter(Boolean).filter((t=>!Id(t))).forEach((e=>{const i="PinturaFontTest-"+e.replace(/[^a-zA-Z0-9]+/g,"").toLowerCase();document.getElementById(i)||document.body.append(t("span",{textContent:" ",id:i,class:"PinturaFontTest",style:`font-family:${e};font-size:0;color:transparent;`}))}))},ondestroy:()=>{rd()&&document.querySelectorAll(".PinturaFontTest").forEach((t=>t.remove()))},optionLabelStyle:t=>"font-family: "+t,options:Ed(u,{defaultKey:"labelDefault"}),optionFilter:t=>{if(!rd())return!0;const[e]=t;return!e||Id(e)}}]),fontStyle_fontWeight:r&&Nd(r),fontSize:l&&Hd(l),lineHeight:c&&jd(c),textAlign:s&&Wd(s),frameColor:["defaultColor"],frameSize:["defaultPercentage",{min:.2,max:10,title:t=>t.labelSize}],frameInset:["defaultPercentage",{min:.5,max:10,title:t=>t.labelInset}],frameOffset:["defaultPercentage",{min:.5,max:10,title:t=>t.labelOffset}],frameRadius:["defaultPercentage",{min:.5,max:10,title:t=>t.labelRadius}],frameAmount:["defaultNumber",{min:1,max:5,step:1,title:t=>t.labelAmount}]};var u,d;return Object.entries(e).forEach((([t,e])=>{h[t]||(h[t]=e)})),h})()};const ry=hf,sy=yf,ay=kf,ly=ng,cy=sg,hy=cg,uy=mg,dy=Eg,py=Tg,fy=Hu,my={filterFunctions:{chrome:()=>[1.398,-.316,.065,-.273,.201,-.051,1.278,-.08,-.273,.201,-.051,.119,1.151,-.29,.215,0,0,0,1,0],fade:()=>[1.073,-.015,.092,-.115,-.017,.107,.859,.184,-.115,-.017,.015,.077,1.104,-.115,-.017,0,0,0,1,0],pastel:()=>[.75,.25,.25,0,0,.25,.75,.25,0,0,.25,.25,.75,0,0,0,0,0,1,0],cold:()=>[1.1,0,0,0,-.1,0,1.1,0,0,-.1,0,0,1.2,0,-.1,0,0,0,1,0],warm:()=>[1.06,0,0,0,0,0,1.01,0,0,0,0,0,.93,0,0,0,0,0,1,0],monoDefault:()=>[.212,.715,.114,0,0,.212,.715,.114,0,0,.212,.715,.114,0,0,0,0,0,1,0],monoWash:()=>[.163,.518,.084,-.01,.208,.163,.529,.082,-.02,.21,.171,.529,.084,0,.214,0,0,0,1,0],monoNoir:()=>[.15,1.3,-.25,.1,-.2,.15,1.3,-.25,.1,-.2,.15,1.3,-.25,.1,-.2,0,0,0,1,0],monoStark:()=>[.338,.991,.117,.093,-.196,.302,1.049,.096,.078,-.196,.286,1.016,.146,.101,-.196,0,0,0,1,0],sepiaDefault:()=>[.393,.768,.188,0,0,.349,.685,.167,0,0,.272,.533,.13,0,0,0,0,0,1,0],sepiaRust:()=>[.269,.764,.172,.05,.1,.239,.527,.152,0,.176,.186,.4,.119,0,.159,0,0,0,1,0],sepiaBlues:()=>[.289,.62,.185,0,.077,.257,.566,.163,0,.115,.2,.43,.128,0,.188,0,0,0,1,0],sepiaColor:()=>[.547,.764,.134,0,-.147,.281,.925,.12,0,-.135,.225,.558,.33,0,-.113,0,0,0,1,0]},filterOptions:[["Default",[[void 0,t=>t.labelDefault]]],["Classic",[["chrome",t=>t.filterLabelChrome],["fade",t=>t.filterLabelFade],["cold",t=>t.filterLabelCold],["warm",t=>t.filterLabelWarm],["pastel",t=>t.filterLabelPastel]]],["Monochrome",[["monoDefault",t=>t.filterLabelMonoDefault],["monoNoir",t=>t.filterLabelMonoNoir],["monoStark",t=>t.filterLabelMonoStark],["monoWash",t=>t.filterLabelMonoWash]]],["Sepia",[["sepiaDefault",t=>t.filterLabelSepiaDefault],["sepiaRust",t=>t.filterLabelSepiaRust],["sepiaBlues",t=>t.filterLabelSepiaBlues],["sepiaColor",t=>t.filterLabelSepiaColor]]]]},gy={frameStyles:{solidSharp:{shape:{frameColor:[1,1,1],frameStyle:"solid",frameSize:"2.5%"},thumb:'<rect stroke-width="5" x="0" y="0" width="100%" height="100%"/>'},solidRound:{shape:{frameColor:[1,1,1],frameStyle:"solid",frameSize:"2.5%",frameRound:!0},thumb:'<rect stroke-width="5" x="0" y="0" width="100%" height="100%" rx="12%"/>'},lineSingle:{shape:{frameColor:[1,1,1],frameStyle:"line",frameInset:"2.5%",frameSize:".3125%",frameRadius:0},thumb:'<div style="top:.5em;left:.5em;right:.5em;bottom:.5em;box-shadow:inset 0 0 0 1px currentColor"></div>'},lineMultiple:{shape:{frameColor:[1,1,1],frameStyle:"line",frameAmount:2,frameInset:"2.5%",frameSize:".3125%",frameOffset:"1.25%",frameRadius:0},thumb:'<div style="top:.75em;left:.75em;right:.75em;bottom:.75em; outline: 3px double"></div>'},edgeSeparate:{shape:{frameColor:[1,1,1],frameStyle:"edge",frameInset:"2.5%",frameOffset:"5%",frameSize:".3125%"},thumb:'<div style="top:.75em;left:.5em;bottom:.75em;border-left:1px solid"></div><div style="top:.75em;right:.5em;bottom:.75em;border-right:1px solid"></div><div style="top:.5em;left:.75em;right:.75em;border-top:1px solid"></div><div style="bottom:.5em;left:.75em;right:.75em;border-bottom:1px solid"></div>'},edgeCross:{shape:{frameColor:[1,1,1],frameStyle:"edge",frameInset:"2.5%",frameSize:".3125%"},thumb:'<div style="top:-.5em;left:.5em;right:.5em;bottom:-.5em; box-shadow: inset 0 0 0 1px currentColor"></div><div style="top:.5em;left:-.5em;right:-.5em;bottom:.5em;box-shadow:inset 0 0 0 1px currentColor"></div>'},edgeOverlap:{shape:{frameColor:[1,1,1],frameStyle:"edge",frameOffset:"1.5%",frameSize:".3125%"},thumb:'<div style="top:.3125em;left:.5em;bottom:.3125em;border-left:1px solid"></div><div style="top:.3125em;right:.5em;bottom:.3125em;border-right:1px solid"></div><div style="top:.5em;left:.3125em;right:.3125em;border-top:1px solid"></div><div style="bottom:.5em;left:.3125em;right:.3125em;border-bottom:1px solid"></div>'},hook:{shape:{frameColor:[1,1,1],frameStyle:"hook",frameInset:"2.5%",frameSize:".3125%",frameLength:"5%"},thumb:'<div style="top:.5em;left:.5em;width:.75em;height:.75em; border-left: 1px solid;border-top: 1px solid;"></div><div style="top:.5em;right:.5em;width:.75em;height:.75em; border-right: 1px solid;border-top: 1px solid;"></div><div style="bottom:.5em;left:.5em;width:.75em;height:.75em; border-left: 1px solid;border-bottom: 1px solid;"></div><div style="bottom:.5em;right:.5em;width:.75em;height:.75em; border-right: 1px solid;border-bottom: 1px solid;"></div>'},polaroid:{shape:{frameColor:[1,1,1],frameStyle:"polaroid"},thumb:'<rect stroke-width="20%" x="-5%" y="-5%" width="110%" height="96%"/>'}},frameOptions:[[void 0,t=>t.labelNone],["solidSharp",t=>t.frameLabelMatSharp],["solidRound",t=>t.frameLabelMatRound],["lineSingle",t=>t.frameLabelLineSingle],["lineMultiple",t=>t.frameLabelLineMultiple],["edgeCross",t=>t.frameLabelEdgeCross],["edgeSeparate",t=>t.frameLabelEdgeSeparate],["edgeOverlap",t=>t.frameLabelEdgeOverlap],["hook",t=>t.frameLabelCornerHooks],["polaroid",t=>t.frameLabelPolaroid]]},yy=Dg,vy=Rg,by={cropLabel:"Crop",cropIcon:'<g stroke-width=".125em" stroke="currentColor" fill="none"><path d="M23 17H9a2 2 0 0 1-2-2v-5m0-3V1 M1 7h14a2 2 0 0 1 2 2v7m0 4v3"/></g>',cropIconButtonRecenter:'<path stroke="currentColor" fill="none" stroke-width="2" stroke-linejoin="bevel" d="M1.5 7.5v-6h6M1.5 16.5v6h6M22.5 16.5v6h-6M22.5 7.5v-6h-6"/><circle cx="12" cy="12" r="3.5" fill="currentColor" stroke="none"/>',cropIconButtonRotateLeft:'<g stroke="none" fill="currentColor"><path fill="none" d="M-1-1h582v402H-1z"/><rect x="3" rx="1" height="12" width="12" y="9"/><path d="M15 5h-1a5 5 0 015 5 1 1 0 002 0 7 7 0 00-7-7h-1.374l.747-.747A1 1 0 0011.958.84L9.603 3.194a1 1 0 000 1.415l2.355 2.355a1 1 0 001.415-1.414l-.55-.55H15z"/></g>',cropIconButtonRotateRight:'<g stroke="none" fill="currentColor"><path fill="none" d="M-1-1h582v402H-1z"/><path d="M11.177 5H10a5 5 0 00-5 5 1 1 0 01-2 0 7 7 0 017-7h1.374l-.747-.747A1 1 0 0112.042.84l2.355 2.355a1 1 0 010 1.415l-2.355 2.354a1 1 0 01-1.415-1.414l.55-.55z"/><rect rx="1" height="12" width="12" y="9" x="9"/></g>',cropIconButtonFlipVertical:'<g stroke="none" fill="currentColor"><path d="M19.993 12.143H7a1 1 0 0 1-1-1V5.994a1 1 0 0 1 1.368-.93l12.993 5.15a1 1 0 0 1-.368 1.93z"/><path d="M19.993 14a1 1 0 0 1 .368 1.93L7.368 21.078A1 1 0 0 1 6 20.148V15a1 1 0 0 1 1-1h12.993z" opacity=".6"/></g>',cropIconButtonFlipHorizontal:'<g stroke="none" fill="currentColor"><path d="M11.93 7.007V20a1 1 0 0 1-1 1H5.78a1 1 0 0 1-.93-1.368l5.15-12.993a1 1 0 0 1 1.929.368z"/><path d="M14 7.007V20a1 1 0 0 0 1 1h5.149a1 1 0 0 0 .93-1.368l-5.15-12.993A1 1 0 0 0 14 7.007z" opacity=".6"/></g>',cropIconSelectPreset:(t,e)=>{const[i,n,o]=e?[e<1?1:.3,1===e?.85:.5,e>1?1:.3]:[.2,.3,.4];return`<g fill="currentColor">\n            <rect opacity="${i}" x="2" y="4" width="10" height="18" rx="1"/>\n            <rect opacity="${n}" x="4" y="8" width="14" height="14" rx="1"/>\n            <rect opacity="${o}" x="6" y="12" width="17" height="10" rx="1"/>\n        </g>`},cropIconCropBoundary:(t,e)=>{const[i,n,o,r]=e?[.3,1,0,0]:[0,0,.3,1];return`<g fill="currentColor">\n            <rect opacity="${i}" x="2" y="3" width="20" height="20" rx="1"/>\n            <rect opacity="${n}" x="7" y="8" width="10" height="10" rx="1"/>\n            <rect opacity="${o}" x="4" y="8" width="14" height="14" rx="1"/>\n            <rect opacity="${r}" x="12" y="4" width="10" height="10" rx="1"/>\n        </g>`},cropLabelButtonRecenter:"Recenter",cropLabelButtonRotateLeft:"Rotate left",cropLabelButtonRotateRight:"Rotate right",cropLabelButtonFlipHorizontal:"Flip horizontal",cropLabelButtonFlipVertical:"Flip vertical",cropLabelSelectPreset:"Crop shape",cropLabelCropBoundary:"Crop boundary",cropLabelCropBoundaryEdge:"Edge of image",cropLabelCropBoundaryNone:"None",cropLabelTabRotation:"Rotation",cropLabelTabZoom:"Zoom"},xy={filterLabel:"Filter",filterIcon:'<g stroke-width=".125em" stroke="currentColor" fill="none"><path d="M18.347 9.907a6.5 6.5 0 1 0-1.872 3.306M3.26 11.574a6.5 6.5 0 1 0 2.815-1.417 M10.15 17.897A6.503 6.503 0 0 0 16.5 23a6.5 6.5 0 1 0-6.183-8.51"/></g>',filterLabelChrome:"Chrome",filterLabelFade:"Fade",filterLabelCold:"Cold",filterLabelWarm:"Warm",filterLabelPastel:"Pastel",filterLabelMonoDefault:"Mono",filterLabelMonoNoir:"Noir",filterLabelMonoWash:"Wash",filterLabelMonoStark:"Stark",filterLabelSepiaDefault:"Sepia",filterLabelSepiaBlues:"Blues",filterLabelSepiaRust:"Rust",filterLabelSepiaColor:"Color"},$y={finetuneLabel:"Finetune",finetuneIcon:'<g stroke-width=".125em" stroke="currentColor" fill="none"><path d="M4 1v5.5m0 3.503V23M12 1v10.5m0 3.5v8M20 1v15.5m0 3.5v3M2 7h4M10 12h4M18 17h4"/></g>',finetuneLabelBrightness:"Brightness",finetuneLabelContrast:"Contrast",finetuneLabelSaturation:"Saturation",finetuneLabelExposure:"Exposure",finetuneLabelTemperature:"Temperature",finetuneLabelGamma:"Gamma",finetuneLabelClarity:"Clarity",finetuneLabelVignette:"Vignette"},wy={resizeLabel:"Resize",resizeIcon:'<g stroke-width=".125em" stroke="currentColor" fill="none"><rect x="2" y="12" width="10" height="10" rx="2"/><path d="M4 11.5V4a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-5.5"/><path d="M14 10l3.365-3.365M14 6h4v4"/></g>',resizeLabelFormCaption:"Image output size",resizeLabelInputWidth:"w",resizeTitleInputWidth:"Width",resizeLabelInputHeight:"h",resizeTitleInputHeight:"Height",resizeTitleButtonMaintainAspectRatio:"Maintain aspectratio",resizeIconButtonMaintainAspectRatio:(t,e)=>`\n        <defs>\n            <mask id="mask1" x="0" y="0" width="24" height="24" >\n                <rect x="0" y="0" width="24" height="10" fill="#fff" stroke="none"/>\n            </mask>\n        </defs>\n        <g fill="none" fill-rule="evenodd">\n            <g  mask="url(#mask1)">\n                <path transform="translate(0 ${3*(e-1)})" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" d="M9.401 10.205v-.804a2.599 2.599 0 0 1 5.198 0V17"/>\n            </g>\n            <rect fill="currentColor" x="7" y="10" width="10" height="7" rx="1.5"/>\n        </g>\n    `},_y={decorateLabel:"Decorate",decorateIcon:'<g fill="none" fill-rule="evenodd"><path stroke="currentColor" stroke-width=".125em" stroke-linecap="round" stroke-linejoin="round" d="M12 18.5l-6.466 3.4 1.235-7.2-5.23-5.1 7.228-1.05L12 2l3.233 6.55 7.229 1.05-5.231 5.1 1.235 7.2z"/></g>'},ky={annotateLabel:"Annotate",annotateIcon:'<g stroke-width=".125em" stroke="currentColor" fill="none"><path d="M17.086 2.914a2.828 2.828 0 1 1 4 4l-14.5 14.5-5.5 1.5 1.5-5.5 14.5-14.5z"/></g>'},Sy={stickerLabel:"Sticker",stickerIcon:'<g fill="none" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em"><path d="M12 22c2.773 0 1.189-5.177 3-7 1.796-1.808 7-.25 7-3 0-5.523-4.477-10-10-10S2 6.477 2 12s4.477 10 10 10z"/><path d="M20 17c-3 3-5 5-8 5"/></g>'},Cy={frameLabel:"Frame",frameIcon:'<g fill="none" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em">\n            <rect x="2" y="2" width="20" height="20" rx="4"/>\n            <rect x="6" y="6" width="12" height="12" rx="1"/>\n        </g>',frameLabelMatSharp:"Mat",frameLabelMatRound:"Bevel",frameLabelLineSingle:"Line",frameLabelLineMultiple:"Zebra",frameLabelEdgeSeparate:"Inset",frameLabelEdgeOverlap:"Plus",frameLabelEdgeCross:"Lumber",frameLabelCornerHooks:"Hook",frameLabelPolaroid:"Polaroid"},Ty={redactLabel:"Redact",redactIcon:'<g fill="none" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em">\n        <path d="M 4 5 l 1 -1"/>\n        <path d="M 4 10 l 6 -6"/>\n        <path d="M 4 15 l 11 -11"/>\n        <path d="M 4 20 l 16 -16"/>\n        <path d="M 9 20 l 11 -11"/>\n        <path d="M 14 20 l 6 -6"/>\n        <path d="M 19 20 l 1 -1"/>\n    </g>'},My="pintura-input",Py=["accept","capture"],Ey=(t,i)=>new Promise(((n,o)=>{const{store:r,editor:s,eventTarget:a}=i,l={};s.imageReader&&(l.imageReader=ey({...s.imageReader})),(s.imageWriter||r)&&(l.imageWriter=iy({store:(e(r),r),...s.imageWriter}));const c=(t=>((t={},e)=>{const{sub:i,pub:n}=di(),o={},r=((t={},e)=>new Hg({target:e||document.body,props:{class:t.class,preventZoomViewport:t.preventZoomViewport,preventScrollBodyIfNeeded:t.preventScrollBodyIfNeeded,preventFooterOverlapIfNeeded:t.preventFooterOverlapIfNeeded}}))(t,e),s=()=>{r.hide&&r.hide()},a=()=>{r.show&&r.show()},l=Og(r.root);Lg(l,o),o.handleEvent=f,l.handleEvent=(t,e)=>{if("init"===t)return o.handleEvent(t,o);o.handleEvent(t,e)},l.on("close",(async()=>{const{willClose:e}=t;if(!e)return s();await e()&&s()}));const c=(t,e)=>/show|hide/.test(t)?i(t,e):l.on(t,e),h=["show","hide"].map((t=>c(t,(e=>o.handleEvent(t,e))))),u=()=>{h.forEach((t=>t())),s(),r.$destroy(),l.destroy()};return Yr(o,{on:c,destroy:u,hide:s,show:a}),Object.defineProperty(o,"modal",{get:()=>r.root,set:()=>{}}),r.$on("close",l.close),r.$on("show",(()=>n("show"))),r.$on("hide",(()=>{n("hide"),!1!==t.enableAutoDestroy&&u()})),!1!==t.enableAutoHide&&l.on("process",s),l.on("loadstart",a),!1!==t.enableButtonClose&&(t.enableButtonClose=!0),delete t.class,Object.assign(o,t),o})(((t={})=>{((...t)=>{t.filter((t=>!!t.util)).forEach((t=>{const[e,i]=t.util;Ru.has(e)||(Ru.set(e,i),gl(i).filter((t=>!Pu.includes(t))).forEach((t=>{Au.add(t),Du[t]?Du[t].push(e):Du[t]=[e]})))}))})(...[ry,sy,ay,ly,cy,hy,uy,dy,py].filter(Boolean));const e=["crop","filter","finetune","annotate","decorate",t.stickers&&"sticker","frame","redact","resize"].filter(Boolean),i=((t={})=>{let e,i,n;return Array.isArray(t.imageWriter)||(e=t.imageWriter,delete t.imageReader),Array.isArray(t.imageWriter)||(i=t.imageWriter,delete t.imageWriter),P(t.imageScrambler)||(n=t.imageScrambler,delete t.imageScrambler),{imageReader:ey(e),imageWriter:iy(i),imageOrienter:{read:y,apply:S},imageScrambler:ny(n)}})(t),n={...yy,...vy,...by,...xy,...$y,...Cy,...Ty,...wy,..._y,...ky,...Sy,...t.locale};return delete t.locale,Lr([{...i,shapePreprocessor:(t=>{const e=(i,n={isPreview:!0})=>{const o=t.map((t=>{const o=t(i,n);if(o)return o.map((t=>e(t,n)))})).filter(Boolean).flat();return o.length?o.flat():i};return e})([((t={})=>(e,i)=>{if(!Je(e,"frameStyle"))return;const n=e.frameStyle,o=t[n];if(!o)return;const{frameStyle:r,...s}=e;return o(s,i)})({solid:Gg,hook:Jg,line:Kg,edge:Qg,polaroid:ty,nine:Zg}),((t={})=>e=>{if(!Je(e,"lineStart")&&!Je(e,"lineEnd"))return;const i=[],{lineStart:n,lineEnd:o,strokeWidth:r,strokeColor:s}=e,a=Q(e.x1,e.y1),l=Q(e.x2,e.y2),c=[a,l];if(n){const[e,o]=n.split("-"),c=t[e];if(c){const t=Wg(a,l,r,!!o);i.push(...c({...t,strokeColor:s,strokeWidth:r},a))}}if(o){const[e,n]=o.split("-"),c=t[e];if(c){const t=Wg(l,a,r,!!n);i.push(...c({...t,strokeColor:s,strokeWidth:r},l))}}return[{points:c,strokeWidth:r,strokeColor:s},...i]})({arrow:jg,circle:Yg,square:Ug,bar:Vg})]),utils:e,...fy,...my,...gy,...oy,stickerStickToImage:!0,locale:n},t])})(t)))({...l,...Ay(s,["id","name","store","imageWriter","imageReader"]),src:t}),h=((t,e,i={})=>{const{prefix:n="pintura:"}=i;return Lu.map((i=>t.on(i,(t=>ge(e)?((t,e,i)=>t.dispatchEvent(new CustomEvent(e,{detail:i,bubbles:!0,cancelable:!0})))(e,`${n}${i}`,t):e(i,t)))))})(c,a);let u=!1;c.on("loadabort",(()=>{c.close(),u=!0})),c.on("loaderror",o),c.on("processerror",o),c.on("close",(()=>{h.forEach((t=>t())),u?o():n(void 0)})),c.on("process",n)})),Iy=(t,e)=>t.getAttribute(e),Ay=(t,e)=>Object.keys(t).filter((t=>!e.includes(t))).reduce(((e,i)=>({...e,[i]:t[i]})),{}),Dy=t=>{t.value="",/safari/i.test(navigator.userAgent)||(t.type="",t.type="file"),delete t._files},Ry=(t,e)=>{try{const i=new DataTransfer;i.items.add(e),t.files=i.files}catch(i){t._files=[e]}},Ly=t=>Object.values(t).reduce(((t,e)=>(t[((t,e="")=>(t=>t.charAt(0).toLowerCase()+t.slice(1))(t.replace(new RegExp("^"+e,"g"),"").split("-").map(o).join("")))(e.name)]=(t=>{if("true"===t||"false"===t)return"true"===t;if(!isNaN(t))return parseFloat(t);if(/[0-9]+\/[0-9]+/.test(t)){const[e,i]=t.split("/").map((t=>t.trim())).map(parseFloat);return e/i}if(/^\{|\[/.test(t))try{return JSON.parse(t)}catch(t){}return t})(e.value),t)),{}),Oy=(t,e,i)=>{const n=Object.values(i).filter((t=>/^post/.test(t.name))).map((t=>[t.name.replace(/^post-/,""),t.value]));return{url:e||"",dataset:e=>[...n,[t,e.dest,e.dest.name]]}},zy=(t,e)=>(Array.from(t.attributes).filter((({value:t})=>t.length&&t.includes("{"))).forEach((({name:i,value:n})=>t.setAttribute(i,va(n,e,"{","}")))),t.childNodes.forEach((t=>{1===t.nodeType&&(t=zy(t,e)),3===t.nodeType&&(t.textContent=va(t.textContent,e,"{","}"))})),t),Fy=(t,e)=>t&&t.content.querySelector(`[data-${e}]`),By=t=>t.querySelector("template"),Ny=t=>{const e=By(t);return{empty:Fy(e,"empty"),load:Fy(e,"load"),process:Fy(e,"process")}},Hy=(t,e)=>!!Ny(t)[e],Wy=(t,e,i)=>{const n=Ny(t);if(Object.keys(n).map((e=>((t,e)=>t.querySelector(`[data-${e}]`))(t,e))).filter(Boolean).forEach((t=>t.remove())),!n[e])return!1;let o=n[e].cloneNode(!0);return i&&(o=zy(o,i)),t.appendChild(o),t.querySelector("[data-drop]")&&l(o,{bubbles:!0}),!0},jy=t=>t.querySelector('input[type="file"]'),Yy=t=>t.querySelector('input[type="hidden"]'),Vy=t=>{const e=Iy(t,"src");if(null!=e)return e},Uy=t=>Iy(t,"store"),qy=(t,e,i)=>{const n=By(t)||document.createElement("template");n.innerHTML=n.innerHTML+va(e,i,"{{","}}"),n.parentNode||t.appendChild(n)};function Xy(){const e=Uy(this),i=Vy(this),n={success:Iy(this,"input-store-success")||'"{filename}" uploaded successfully',reset:Iy(this,"input-button-reset")||"&times;",url:i};i&&!Hy(this,"load")&&qy(this,'<div data-load style="display:flex;align-items:center;pointer-events:none;">\n    <img src="{{url}}" alt="" style="object-fit:cover;width:auto;height:1.5em;margin-right:.5em;"/>\n    <button data-remove style="pointer-events:all;margin-left:.5em;" aria-label="Reset">{{reset}}</button>\n</output>',n),e&&!Hy(this,"process")&&qy(this,'<output data-process style="display:flex;align-items:center;pointer-events:none;">\n    <img src="{url}" alt="" style="object-fit:cover;width:auto;height:1.5em;margin-right:.5em;"/>\n    <span>{{success}}</span>\n    <button data-remove style="pointer-events:all;margin-left:.5em;" aria-label="Reset">{{reset}}</button>\n</output>',n);let o=jy(this),r=Yy(this);const s=o&&o.name||Iy(this,"name")||"image";o||(o=t("input",{type:"file"}),Py.forEach((t=>{const e=Iy(this,t);null!==e&&o.setAttribute(t,e)})),this.removeAttribute("name"),this.append(o)),e?(o.removeAttribute("name"),r||(r=t("input",{type:"hidden",name:s}),this.append(r))):o.name=s,!i&&Hy(this,"empty")&&(Wy(this,"empty"),o.hidden=!0),i&&Hy(this,"load")&&(Wy(this,"load"),o.hidden=!0),o.accept&&/image/.test(o.accept)||(o.accept="image/*"),o.removeAttribute("multiple"),o.addEventListener("change",(()=>this.edit())),this.addEventListener("click",(t=>{const{target:e}=t,i=["reset","remove","browse","edit"].find((t=>""===e.dataset[t]));i&&this[i]()})),this.addEventListener("dropfiles",(t=>{t.stopPropagation();const{detail:e}=t,i=e.resources[0];i&&(Ry(o,i),this.edit())}))}const Gy=n()&&class extends HTMLElement{connectedCallback(){if(this.innerHTML)return Xy.apply(this);let t;const e=new MutationObserver((()=>{null!==t&&(clearTimeout(t),Xy.apply(this),e.disconnect())}));e.observe(this,{childList:!0}),t=setTimeout((()=>{t=null,Xy.apply(this)}),0)}browse(){this.querySelector('input[type="file"]').click()}reset(){if(!Vy(this))return this.remove();Dy(jy(this)),Wy(this,"load")}remove(){const t=jy(this);Dy(t),Uy(this)&&(Yy(this).value=""),Wy(this,"empty")||(t.hidden=!1)}edit(){const t=jy(this);if(!t)return;const e=(t=>{if(!t)return;if(!t.matches('input[type="file"]'))return;const e=t,i=e.files[0]||(e._files||[])[0];return i&&/image/.test(i.type)?i:void 0})(t)||Vy(this);((t,e)=>{if(!e)return;const i=jy(t);if(!i)return;const n={...window.PinturaInput,...window[t.id],...Ly(t.attributes)};Ey(e,{editor:n,eventTarget:t,store:n.store&&Oy(Yy(t).name,n.store,t.attributes)}).then((e=>{if(!e)return Dy(i);const{dest:n,store:o}=e;o?((e,n)=>{i.hidden=!0,Yy(t).value=n.responseText,Wy(t,"process",{response:n.responseText,filename:e.name,url:URL.createObjectURL(e)})})(n,o):(Ry(i,n),(e=>{Wy(t,"process",{filename:e.name,url:URL.createObjectURL(e)})&&(jy(t).hidden=!0)})(n))})).catch((()=>{Dy(i)}))})(this,e)}};Gy&&(My,document.createElement("pintura-input").constructor===HTMLElement)&&customElements.define(My,Gy)}(),function(){"use strict";function t(t){t?(f[0]=f[16]=f[1]=f[2]=f[3]=f[4]=f[5]=f[6]=f[7]=f[8]=f[9]=f[10]=f[11]=f[12]=f[13]=f[14]=f[15]=0,this.blocks=f):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.h0=1732584193,this.h1=4023233417,this.h2=2562383102,this.h3=271733878,this.h4=3285377520,this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0}var h="object"==typeof window?window:{},s=!h.JS_SHA1_NO_NODE_JS&&"object"==typeof process&&process.versions&&process.versions.node;s&&(h=global);var i=!h.JS_SHA1_NO_COMMON_JS&&"object"==typeof module&&module.exports,e="function"==typeof define&&define.amd,r="0123456789abcdef".split(""),o=[-2147483648,8388608,32768,128],n=[24,16,8,0],a=["hex","array","digest","arrayBuffer"],f=[],u=function(e){return function(i){return new t(!0).update(i)[e]()}},c=function(){var e=u("hex");s&&(e=p(e)),e.create=function(){return new t},e.update=function(t){return e.create().update(t)};for(var i=0;i<a.length;++i){var n=a[i];e[n]=u(n)}return e},p=function(t){var h=eval("require('crypto')"),s=eval("require('buffer').Buffer"),i=function(e){if("string"==typeof e)return h.createHash("sha1").update(e,"utf8").digest("hex");if(e.constructor===ArrayBuffer)e=new Uint8Array(e);else if(void 0===e.length)return t(e);return h.createHash("sha1").update(new s(e)).digest("hex")};return i};t.prototype.update=function(t){if(!this.finalized){var e="string"!=typeof t;e&&t.constructor===h.ArrayBuffer&&(t=new Uint8Array(t));for(var i,o,r=0,s=t.length||0,a=this.blocks;r<s;){if(this.hashed&&(this.hashed=!1,a[0]=this.block,a[16]=a[1]=a[2]=a[3]=a[4]=a[5]=a[6]=a[7]=a[8]=a[9]=a[10]=a[11]=a[12]=a[13]=a[14]=a[15]=0),e)for(o=this.start;r<s&&o<64;++r)a[o>>2]|=t[r]<<n[3&o++];else for(o=this.start;r<s&&o<64;++r)(i=t.charCodeAt(r))<128?a[o>>2]|=i<<n[3&o++]:i<2048?(a[o>>2]|=(192|i>>6)<<n[3&o++],a[o>>2]|=(128|63&i)<<n[3&o++]):i<55296||i>=57344?(a[o>>2]|=(224|i>>12)<<n[3&o++],a[o>>2]|=(128|i>>6&63)<<n[3&o++],a[o>>2]|=(128|63&i)<<n[3&o++]):(i=65536+((1023&i)<<10|1023&t.charCodeAt(++r)),a[o>>2]|=(240|i>>18)<<n[3&o++],a[o>>2]|=(128|i>>12&63)<<n[3&o++],a[o>>2]|=(128|i>>6&63)<<n[3&o++],a[o>>2]|=(128|63&i)<<n[3&o++]);this.lastByteIndex=o,this.bytes+=o-this.start,o>=64?(this.block=a[16],this.start=o-64,this.hash(),this.hashed=!0):this.start=o}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}},t.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var t=this.blocks,e=this.lastByteIndex;t[16]=this.block,t[e>>2]|=o[3&e],this.block=t[16],e>=56&&(this.hashed||this.hash(),t[0]=this.block,t[16]=t[1]=t[2]=t[3]=t[4]=t[5]=t[6]=t[7]=t[8]=t[9]=t[10]=t[11]=t[12]=t[13]=t[14]=t[15]=0),t[14]=this.hBytes<<3|this.bytes>>>29,t[15]=this.bytes<<3,this.hash()}},t.prototype.hash=function(){var t,e,i=this.h0,n=this.h1,o=this.h2,r=this.h3,s=this.h4,a=this.blocks;for(t=16;t<80;++t)e=a[t-3]^a[t-8]^a[t-14]^a[t-16],a[t]=e<<1|e>>>31;for(t=0;t<20;t+=5)i=(e=(n=(e=(o=(e=(r=(e=(s=(e=i<<5|i>>>27)+(n&o|~n&r)+s+1518500249+a[t]<<0)<<5|s>>>27)+(i&(n=n<<30|n>>>2)|~i&o)+r+1518500249+a[t+1]<<0)<<5|r>>>27)+(s&(i=i<<30|i>>>2)|~s&n)+o+1518500249+a[t+2]<<0)<<5|o>>>27)+(r&(s=s<<30|s>>>2)|~r&i)+n+1518500249+a[t+3]<<0)<<5|n>>>27)+(o&(r=r<<30|r>>>2)|~o&s)+i+1518500249+a[t+4]<<0,o=o<<30|o>>>2;for(;t<40;t+=5)i=(e=(n=(e=(o=(e=(r=(e=(s=(e=i<<5|i>>>27)+(n^o^r)+s+1859775393+a[t]<<0)<<5|s>>>27)+(i^(n=n<<30|n>>>2)^o)+r+1859775393+a[t+1]<<0)<<5|r>>>27)+(s^(i=i<<30|i>>>2)^n)+o+1859775393+a[t+2]<<0)<<5|o>>>27)+(r^(s=s<<30|s>>>2)^i)+n+1859775393+a[t+3]<<0)<<5|n>>>27)+(o^(r=r<<30|r>>>2)^s)+i+1859775393+a[t+4]<<0,o=o<<30|o>>>2;for(;t<60;t+=5)i=(e=(n=(e=(o=(e=(r=(e=(s=(e=i<<5|i>>>27)+(n&o|n&r|o&r)+s-1894007588+a[t]<<0)<<5|s>>>27)+(i&(n=n<<30|n>>>2)|i&o|n&o)+r-1894007588+a[t+1]<<0)<<5|r>>>27)+(s&(i=i<<30|i>>>2)|s&n|i&n)+o-1894007588+a[t+2]<<0)<<5|o>>>27)+(r&(s=s<<30|s>>>2)|r&i|s&i)+n-1894007588+a[t+3]<<0)<<5|n>>>27)+(o&(r=r<<30|r>>>2)|o&s|r&s)+i-1894007588+a[t+4]<<0,o=o<<30|o>>>2;for(;t<80;t+=5)i=(e=(n=(e=(o=(e=(r=(e=(s=(e=i<<5|i>>>27)+(n^o^r)+s-899497514+a[t]<<0)<<5|s>>>27)+(i^(n=n<<30|n>>>2)^o)+r-899497514+a[t+1]<<0)<<5|r>>>27)+(s^(i=i<<30|i>>>2)^n)+o-899497514+a[t+2]<<0)<<5|o>>>27)+(r^(s=s<<30|s>>>2)^i)+n-899497514+a[t+3]<<0)<<5|n>>>27)+(o^(r=r<<30|r>>>2)^s)+i-899497514+a[t+4]<<0,o=o<<30|o>>>2;this.h0=this.h0+i<<0,this.h1=this.h1+n<<0,this.h2=this.h2+o<<0,this.h3=this.h3+r<<0,this.h4=this.h4+s<<0},t.prototype.hex=function(){this.finalize();var t=this.h0,e=this.h1,i=this.h2,n=this.h3,o=this.h4;return r[t>>28&15]+r[t>>24&15]+r[t>>20&15]+r[t>>16&15]+r[t>>12&15]+r[t>>8&15]+r[t>>4&15]+r[15&t]+r[e>>28&15]+r[e>>24&15]+r[e>>20&15]+r[e>>16&15]+r[e>>12&15]+r[e>>8&15]+r[e>>4&15]+r[15&e]+r[i>>28&15]+r[i>>24&15]+r[i>>20&15]+r[i>>16&15]+r[i>>12&15]+r[i>>8&15]+r[i>>4&15]+r[15&i]+r[n>>28&15]+r[n>>24&15]+r[n>>20&15]+r[n>>16&15]+r[n>>12&15]+r[n>>8&15]+r[n>>4&15]+r[15&n]+r[o>>28&15]+r[o>>24&15]+r[o>>20&15]+r[o>>16&15]+r[o>>12&15]+r[o>>8&15]+r[o>>4&15]+r[15&o]},t.prototype.toString=t.prototype.hex,t.prototype.digest=function(){this.finalize();var t=this.h0,e=this.h1,i=this.h2,n=this.h3,o=this.h4;return[t>>24&255,t>>16&255,t>>8&255,255&t,e>>24&255,e>>16&255,e>>8&255,255&e,i>>24&255,i>>16&255,i>>8&255,255&i,n>>24&255,n>>16&255,n>>8&255,255&n,o>>24&255,o>>16&255,o>>8&255,255&o]},t.prototype.array=t.prototype.digest,t.prototype.arrayBuffer=function(){this.finalize();var t=new ArrayBuffer(20),e=new DataView(t);return e.setUint32(0,this.h0),e.setUint32(4,this.h1),e.setUint32(8,this.h2),e.setUint32(12,this.h3),e.setUint32(16,this.h4),t};var y=c();i?module.exports=y:(h.sha1=y,e&&define((function(){return y})))}(),
/*!
 * perfect-scrollbar v1.5.1
 * Copyright 2020 Hyunje Jun, MDBootstrap and Contributors
 * Licensed under MIT
 */
function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).PerfectScrollbar=e()}(this,(function(){"use strict";var t=Math.abs,e=Math.floor;function i(t){return getComputedStyle(t)}function n(t,e){for(var i in e){var n=e[i];"number"==typeof n&&(n+="px"),t.style[i]=n}return t}function o(t){var e=document.createElement("div");return e.className=t,e}function r(t,e){if(!b)throw new Error("No element matching method supported");return b.call(t,e)}function s(t){t.remove?t.remove():t.parentNode&&t.parentNode.removeChild(t)}function a(t,e){return Array.prototype.filter.call(t.children,(function(t){return r(t,e)}))}function l(t,e){var i=t.element.classList,n=x.state.scrolling(e);i.contains(n)?clearTimeout($[e]):i.add(n)}function c(t,e){$[e]=setTimeout((function(){return t.isAlive&&t.element.classList.remove(x.state.scrolling(e))}),t.settings.scrollingThreshold)}function h(t,e){l(t,e),c(t,e)}function u(t){if("function"==typeof window.CustomEvent)return new CustomEvent(t);var e=document.createEvent("CustomEvent");return e.initCustomEvent(t,!1,!1,void 0),e}function d(t,e,i,n,o){var r;if(void 0===n&&(n=!0),void 0===o&&(o=!1),"top"===e)r=["contentHeight","containerHeight","scrollTop","y","up","down"];else{if("left"!==e)throw new Error("A proper axis should be provided");r=["contentWidth","containerWidth","scrollLeft","x","left","right"]}!function(t,e,i,n,o){var r=i[0],s=i[1],a=i[2],l=i[3],c=i[4],d=i[5];void 0===n&&(n=!0),void 0===o&&(o=!1);var p=t.element;t.reach[l]=null,1>p[a]&&(t.reach[l]="start"),p[a]>t[r]-t[s]-1&&(t.reach[l]="end"),e&&(p.dispatchEvent(u("ps-scroll-"+l)),0>e?p.dispatchEvent(u("ps-scroll-"+c)):0<e&&p.dispatchEvent(u("ps-scroll-"+d)),n&&h(t,l)),t.reach[l]&&(e||o)&&p.dispatchEvent(u("ps-"+l+"-reach-"+t.reach[l]))}(t,i,r,n,o)}function p(t){return parseInt(t,10)||0}function f(t){return r(t,"input,[contenteditable]")||r(t,"select,[contenteditable]")||r(t,"textarea,[contenteditable]")||r(t,"button,[contenteditable]")}function m(t){var i=Math.ceil,n=t.element,o=e(n.scrollTop),r=n.getBoundingClientRect();t.containerWidth=i(r.width),t.containerHeight=i(r.height),t.contentWidth=n.scrollWidth,t.contentHeight=n.scrollHeight,n.contains(t.scrollbarXRail)||(a(n,x.element.rail("x")).forEach((function(t){return s(t)})),n.appendChild(t.scrollbarXRail)),n.contains(t.scrollbarYRail)||(a(n,x.element.rail("y")).forEach((function(t){return s(t)})),n.appendChild(t.scrollbarYRail)),!t.settings.suppressScrollX&&t.containerWidth+t.settings.scrollXMarginOffset<t.contentWidth?(t.scrollbarXActive=!0,t.railXWidth=t.containerWidth-t.railXMarginWidth,t.railXRatio=t.containerWidth/t.railXWidth,t.scrollbarXWidth=g(t,p(t.railXWidth*t.containerWidth/t.contentWidth)),t.scrollbarXLeft=p((t.negativeScrollAdjustment+n.scrollLeft)*(t.railXWidth-t.scrollbarXWidth)/(t.contentWidth-t.containerWidth))):t.scrollbarXActive=!1,!t.settings.suppressScrollY&&t.containerHeight+t.settings.scrollYMarginOffset<t.contentHeight?(t.scrollbarYActive=!0,t.railYHeight=t.containerHeight-t.railYMarginHeight,t.railYRatio=t.containerHeight/t.railYHeight,t.scrollbarYHeight=g(t,p(t.railYHeight*t.containerHeight/t.contentHeight)),t.scrollbarYTop=p(o*(t.railYHeight-t.scrollbarYHeight)/(t.contentHeight-t.containerHeight))):t.scrollbarYActive=!1,t.scrollbarXLeft>=t.railXWidth-t.scrollbarXWidth&&(t.scrollbarXLeft=t.railXWidth-t.scrollbarXWidth),t.scrollbarYTop>=t.railYHeight-t.scrollbarYHeight&&(t.scrollbarYTop=t.railYHeight-t.scrollbarYHeight),y(n,t),t.scrollbarXActive?n.classList.add(x.state.active("x")):(n.classList.remove(x.state.active("x")),t.scrollbarXWidth=0,t.scrollbarXLeft=0,n.scrollLeft=!0===t.isRtl?t.contentWidth:0),t.scrollbarYActive?n.classList.add(x.state.active("y")):(n.classList.remove(x.state.active("y")),t.scrollbarYHeight=0,t.scrollbarYTop=0,n.scrollTop=0)}function g(t,e){var i=Math.min,n=Math.max;return t.settings.minScrollbarLength&&(e=n(e,t.settings.minScrollbarLength)),t.settings.maxScrollbarLength&&(e=i(e,t.settings.maxScrollbarLength)),e}function y(t,i){var o={width:i.railXWidth},r=e(t.scrollTop);o.left=i.isRtl?i.negativeScrollAdjustment+t.scrollLeft+i.containerWidth-i.contentWidth:t.scrollLeft,i.isScrollbarXUsingBottom?o.bottom=i.scrollbarXBottom-r:o.top=i.scrollbarXTop+r,n(i.scrollbarXRail,o);var s={top:r,height:i.railYHeight};i.isScrollbarYUsingRight?i.isRtl?s.right=i.contentWidth-(i.negativeScrollAdjustment+t.scrollLeft)-i.scrollbarYRight-i.scrollbarYOuterWidth-9:s.right=i.scrollbarYRight-t.scrollLeft:i.isRtl?s.left=i.negativeScrollAdjustment+t.scrollLeft+2*i.containerWidth-i.contentWidth-i.scrollbarYLeft-i.scrollbarYOuterWidth:s.left=i.scrollbarYLeft+t.scrollLeft,n(i.scrollbarYRail,s),n(i.scrollbarX,{left:i.scrollbarXLeft,width:i.scrollbarXWidth-i.railBorderXWidth}),n(i.scrollbarY,{top:i.scrollbarYTop,height:i.scrollbarYHeight-i.railBorderYWidth})}function v(t,e){function i(e){e.touches&&e.touches[0]&&(e[a]=e.touches[0].pageY),y[p]=v+$*(e[a]-b),l(t,f),m(t),e.stopPropagation(),e.preventDefault()}function n(){c(t,f),t[g].classList.remove(x.state.clicking),t.event.unbind(t.ownerDocument,"mousemove",i)}function o(e,o){v=y[p],o&&e.touches&&(e[a]=e.touches[0].pageY),b=e[a],$=(t[s]-t[r])/(t[h]-t[d]),o?t.event.bind(t.ownerDocument,"touchmove",i):(t.event.bind(t.ownerDocument,"mousemove",i),t.event.once(t.ownerDocument,"mouseup",n),e.preventDefault()),t[g].classList.add(x.state.clicking),e.stopPropagation()}var r=e[0],s=e[1],a=e[2],h=e[3],u=e[4],d=e[5],p=e[6],f=e[7],g=e[8],y=t.element,v=null,b=null,$=null;t.event.bind(t[u],"mousedown",(function(t){o(t)})),t.event.bind(t[u],"touchstart",(function(t){o(t,!0)}))}var b="undefined"!=typeof Element&&(Element.prototype.matches||Element.prototype.webkitMatchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector),x={main:"ps",rtl:"ps__rtl",element:{thumb:function(t){return"ps__thumb-"+t},rail:function(t){return"ps__rail-"+t},consuming:"ps__child--consume"},state:{focus:"ps--focus",clicking:"ps--clicking",active:function(t){return"ps--active-"+t},scrolling:function(t){return"ps--scrolling-"+t}}},$={x:null,y:null},w=function(t){this.element=t,this.handlers={}},_={isEmpty:{configurable:!0}};w.prototype.bind=function(t,e){void 0===this.handlers[t]&&(this.handlers[t]=[]),this.handlers[t].push(e),this.element.addEventListener(t,e,!1)},w.prototype.unbind=function(t,e){var i=this;this.handlers[t]=this.handlers[t].filter((function(n){return!(!e||n===e)||(i.element.removeEventListener(t,n,!1),!1)}))},w.prototype.unbindAll=function(){for(var t in this.handlers)this.unbind(t)},_.isEmpty.get=function(){var t=this;return Object.keys(this.handlers).every((function(e){return 0===t.handlers[e].length}))},Object.defineProperties(w.prototype,_);var k=function(){this.eventElements=[]};k.prototype.eventElement=function(t){var e=this.eventElements.filter((function(e){return e.element===t}))[0];return e||(e=new w(t),this.eventElements.push(e)),e},k.prototype.bind=function(t,e,i){this.eventElement(t).bind(e,i)},k.prototype.unbind=function(t,e,i){var n=this.eventElement(t);n.unbind(e,i),n.isEmpty&&this.eventElements.splice(this.eventElements.indexOf(n),1)},k.prototype.unbindAll=function(){this.eventElements.forEach((function(t){return t.unbindAll()})),this.eventElements=[]},k.prototype.once=function(t,e,i){var n=this.eventElement(t),o=function(t){n.unbind(e,o),i(t)};n.bind(e,o)};var S={isWebKit:"undefined"!=typeof document&&"WebkitAppearance"in document.documentElement.style,supportsTouch:"undefined"!=typeof window&&("ontouchstart"in window||"maxTouchPoints"in window.navigator&&0<window.navigator.maxTouchPoints||window.DocumentTouch&&document instanceof window.DocumentTouch),supportsIePointer:"undefined"!=typeof navigator&&navigator.msMaxTouchPoints,isChrome:"undefined"!=typeof navigator&&/Chrome/i.test(navigator&&navigator.userAgent)},C={"click-rail":function(t){t.element,t.event.bind(t.scrollbarY,"mousedown",(function(t){return t.stopPropagation()})),t.event.bind(t.scrollbarYRail,"mousedown",(function(e){var i=e.pageY-window.pageYOffset-t.scrollbarYRail.getBoundingClientRect().top>t.scrollbarYTop?1:-1;t.element.scrollTop+=i*t.containerHeight,m(t),e.stopPropagation()})),t.event.bind(t.scrollbarX,"mousedown",(function(t){return t.stopPropagation()})),t.event.bind(t.scrollbarXRail,"mousedown",(function(e){var i=e.pageX-window.pageXOffset-t.scrollbarXRail.getBoundingClientRect().left>t.scrollbarXLeft?1:-1;t.element.scrollLeft+=i*t.containerWidth,m(t),e.stopPropagation()}))},"drag-thumb":function(t){v(t,["containerWidth","contentWidth","pageX","railXWidth","scrollbarX","scrollbarXWidth","scrollLeft","x","scrollbarXRail"]),v(t,["containerHeight","contentHeight","pageY","railYHeight","scrollbarY","scrollbarYHeight","scrollTop","y","scrollbarYRail"])},keyboard:function(t){var i=t.element,n=function(){return r(i,":hover")},o=function(){return r(t.scrollbarX,":focus")||r(t.scrollbarY,":focus")};t.event.bind(t.ownerDocument,"keydown",(function(r){if(!(r.isDefaultPrevented&&r.isDefaultPrevented()||r.defaultPrevented)&&(n()||o())){var s=document.activeElement?document.activeElement:t.ownerDocument.activeElement;if(s){if("IFRAME"===s.tagName)s=s.contentDocument.activeElement;else for(;s.shadowRoot;)s=s.shadowRoot.activeElement;if(f(s))return}var a=0,l=0;switch(r.which){case 37:a=r.metaKey?-t.contentWidth:r.altKey?-t.containerWidth:-30;break;case 38:l=r.metaKey?t.contentHeight:r.altKey?t.containerHeight:30;break;case 39:a=r.metaKey?t.contentWidth:r.altKey?t.containerWidth:30;break;case 40:l=r.metaKey?-t.contentHeight:r.altKey?-t.containerHeight:-30;break;case 32:l=r.shiftKey?t.containerHeight:-t.containerHeight;break;case 33:l=t.containerHeight;break;case 34:l=-t.containerHeight;break;case 36:l=t.contentHeight;break;case 35:l=-t.contentHeight;break;default:return}t.settings.suppressScrollX&&0!==a||t.settings.suppressScrollY&&0!==l||(i.scrollTop-=l,i.scrollLeft+=a,m(t),function(n,o){var r=e(i.scrollTop);if(0===n){if(!t.scrollbarYActive)return!1;if(0===r&&0<o||r>=t.contentHeight-t.containerHeight&&0>o)return!t.settings.wheelPropagation}var s=i.scrollLeft;if(0===o){if(!t.scrollbarXActive)return!1;if(0===s&&0>n||s>=t.contentWidth-t.containerWidth&&0<n)return!t.settings.wheelPropagation}return!0}(a,l)&&r.preventDefault())}}))},wheel:function(n){function o(t,e,n){if(!S.isWebKit&&s.querySelector("select:focus"))return!0;if(!s.contains(t))return!1;for(var o=t;o&&o!==s;){if(o.classList.contains(x.element.consuming))return!0;var r=i(o);if(n&&r.overflowY.match(/(scroll|auto)/)){var a=o.scrollHeight-o.clientHeight;if(0<a&&(0<o.scrollTop&&0>n||o.scrollTop<a&&0<n))return!0}if(e&&r.overflowX.match(/(scroll|auto)/)){var l=o.scrollWidth-o.clientWidth;if(0<l&&(0<o.scrollLeft&&0>e||o.scrollLeft<l&&0<e))return!0}o=o.parentNode}return!1}function r(i){var r=function(t){var e=t.deltaX,i=-1*t.deltaY;return(void 0===e||void 0===i)&&(e=-1*t.wheelDeltaX/6,i=t.wheelDeltaY/6),t.deltaMode&&1===t.deltaMode&&(e*=10,i*=10),e!=e&&i!=i&&(e=0,i=t.wheelDelta),t.shiftKey?[-i,-e]:[e,i]}(i),a=r[0],l=r[1];if(!o(i.target,a,l)){var c=!1;n.settings.useBothWheelAxes?n.scrollbarYActive&&!n.scrollbarXActive?(l?s.scrollTop-=l*n.settings.wheelSpeed:s.scrollTop+=a*n.settings.wheelSpeed,c=!0):n.scrollbarXActive&&!n.scrollbarYActive&&(a?s.scrollLeft+=a*n.settings.wheelSpeed:s.scrollLeft-=l*n.settings.wheelSpeed,c=!0):(s.scrollTop-=l*n.settings.wheelSpeed,s.scrollLeft+=a*n.settings.wheelSpeed),m(n),c=c||function(i,o){var r=e(s.scrollTop),a=0===s.scrollTop,l=r+s.offsetHeight===s.scrollHeight,c=0===s.scrollLeft,h=s.scrollLeft+s.offsetWidth===s.scrollWidth;return!(t(o)>t(i)?a||l:c||h)||!n.settings.wheelPropagation}(a,l),c&&!i.ctrlKey&&(i.stopPropagation(),i.preventDefault())}}var s=n.element;void 0===window.onwheel?void 0!==window.onmousewheel&&n.event.bind(s,"mousewheel",r):n.event.bind(s,"wheel",r)},touch:function(n){function o(i,o){var r=e(d.scrollTop),s=d.scrollLeft,a=t(i),l=t(o);if(l>a){if(0>o&&r===n.contentHeight-n.containerHeight||0<o&&0===r)return 0===window.scrollY&&0<o&&S.isChrome}else if(a>l&&(0>i&&s===n.contentWidth-n.containerWidth||0<i&&0===s))return!0;return!0}function r(t,e){d.scrollTop-=e,d.scrollLeft-=t,m(n)}function s(t){return t.targetTouches?t.targetTouches[0]:t}function a(t){return!(t.pointerType&&"pen"===t.pointerType&&0===t.buttons||(!t.targetTouches||1!==t.targetTouches.length)&&(!t.pointerType||"mouse"===t.pointerType||t.pointerType===t.MSPOINTER_TYPE_MOUSE))}function l(t){if(a(t)){var e=s(t);p.pageX=e.pageX,p.pageY=e.pageY,f=(new Date).getTime(),null!==y&&clearInterval(y)}}function c(t,e,n){if(!d.contains(t))return!1;for(var o=t;o&&o!==d;){if(o.classList.contains(x.element.consuming))return!0;var r=i(o);if(n&&r.overflowY.match(/(scroll|auto)/)){var s=o.scrollHeight-o.clientHeight;if(0<s&&(0<o.scrollTop&&0>n||o.scrollTop<s&&0<n))return!0}if(e&&r.overflowX.match(/(scroll|auto)/)){var a=o.scrollWidth-o.clientWidth;if(0<a&&(0<o.scrollLeft&&0>e||o.scrollLeft<a&&0<e))return!0}o=o.parentNode}return!1}function h(t){if(a(t)){var e=s(t),i={pageX:e.pageX,pageY:e.pageY},n=i.pageX-p.pageX,l=i.pageY-p.pageY;if(c(t.target,n,l))return;r(n,l),p=i;var h=(new Date).getTime(),u=h-f;0<u&&(g.x=n/u,g.y=l/u,f=h),o(n,l)&&t.preventDefault()}}function u(){n.settings.swipeEasing&&(clearInterval(y),y=setInterval((function(){return n.isInitialized?void clearInterval(y):g.x||g.y?.01>t(g.x)&&.01>t(g.y)?void clearInterval(y):(r(30*g.x,30*g.y),g.x*=.8,void(g.y*=.8)):void clearInterval(y)}),10))}if(S.supportsTouch||S.supportsIePointer){var d=n.element,p={},f=0,g={},y=null;S.supportsTouch?(n.event.bind(d,"touchstart",l),n.event.bind(d,"touchmove",h),n.event.bind(d,"touchend",u)):S.supportsIePointer&&(window.PointerEvent?(n.event.bind(d,"pointerdown",l),n.event.bind(d,"pointermove",h),n.event.bind(d,"pointerup",u)):window.MSPointerEvent&&(n.event.bind(d,"MSPointerDown",l),n.event.bind(d,"MSPointerMove",h),n.event.bind(d,"MSPointerUp",u)))}}},T=function(t,r){var s=this;if(void 0===r&&(r={}),"string"==typeof t&&(t=document.querySelector(t)),!t||!t.nodeName)throw new Error("no element is specified to initialize PerfectScrollbar");for(var a in this.element=t,t.classList.add(x.main),this.settings={handlers:["click-rail","drag-thumb","keyboard","wheel","touch"],maxScrollbarLength:null,minScrollbarLength:null,scrollingThreshold:1e3,scrollXMarginOffset:0,scrollYMarginOffset:0,suppressScrollX:!1,suppressScrollY:!1,swipeEasing:!0,useBothWheelAxes:!1,wheelPropagation:!0,wheelSpeed:1},r)this.settings[a]=r[a];this.containerWidth=null,this.containerHeight=null,this.contentWidth=null,this.contentHeight=null;var l=function(){return t.classList.add(x.state.focus)},c=function(){return t.classList.remove(x.state.focus)};this.isRtl="rtl"===i(t).direction,!0===this.isRtl&&t.classList.add(x.rtl),this.isNegativeScroll=function(){var e,i=t.scrollLeft;return t.scrollLeft=-1,e=0>t.scrollLeft,t.scrollLeft=i,e}(),this.negativeScrollAdjustment=this.isNegativeScroll?t.scrollWidth-t.clientWidth:0,this.event=new k,this.ownerDocument=t.ownerDocument||document,this.scrollbarXRail=o(x.element.rail("x")),t.appendChild(this.scrollbarXRail),this.scrollbarX=o(x.element.thumb("x")),this.scrollbarXRail.appendChild(this.scrollbarX),this.scrollbarX.setAttribute("tabindex",0),this.event.bind(this.scrollbarX,"focus",l),this.event.bind(this.scrollbarX,"blur",c),this.scrollbarXActive=null,this.scrollbarXWidth=null,this.scrollbarXLeft=null;var h=i(this.scrollbarXRail);this.scrollbarXBottom=parseInt(h.bottom,10),isNaN(this.scrollbarXBottom)?(this.isScrollbarXUsingBottom=!1,this.scrollbarXTop=p(h.top)):this.isScrollbarXUsingBottom=!0,this.railBorderXWidth=p(h.borderLeftWidth)+p(h.borderRightWidth),n(this.scrollbarXRail,{display:"block"}),this.railXMarginWidth=p(h.marginLeft)+p(h.marginRight),n(this.scrollbarXRail,{display:""}),this.railXWidth=null,this.railXRatio=null,this.scrollbarYRail=o(x.element.rail("y")),t.appendChild(this.scrollbarYRail),this.scrollbarY=o(x.element.thumb("y")),this.scrollbarYRail.appendChild(this.scrollbarY),this.scrollbarY.setAttribute("tabindex",0),this.event.bind(this.scrollbarY,"focus",l),this.event.bind(this.scrollbarY,"blur",c),this.scrollbarYActive=null,this.scrollbarYHeight=null,this.scrollbarYTop=null;var u=i(this.scrollbarYRail);this.scrollbarYRight=parseInt(u.right,10),isNaN(this.scrollbarYRight)?(this.isScrollbarYUsingRight=!1,this.scrollbarYLeft=p(u.left)):this.isScrollbarYUsingRight=!0,this.scrollbarYOuterWidth=this.isRtl?function(t){var e=i(t);return p(e.width)+p(e.paddingLeft)+p(e.paddingRight)+p(e.borderLeftWidth)+p(e.borderRightWidth)}(this.scrollbarY):null,this.railBorderYWidth=p(u.borderTopWidth)+p(u.borderBottomWidth),n(this.scrollbarYRail,{display:"block"}),this.railYMarginHeight=p(u.marginTop)+p(u.marginBottom),n(this.scrollbarYRail,{display:""}),this.railYHeight=null,this.railYRatio=null,this.reach={x:0>=t.scrollLeft?"start":t.scrollLeft>=this.contentWidth-this.containerWidth?"end":null,y:0>=t.scrollTop?"start":t.scrollTop>=this.contentHeight-this.containerHeight?"end":null},this.isAlive=!0,this.settings.handlers.forEach((function(t){return C[t](s)})),this.lastScrollTop=e(t.scrollTop),this.lastScrollLeft=t.scrollLeft,this.event.bind(this.element,"scroll",(function(t){return s.onScroll(t)})),m(this)};return T.prototype.update=function(){this.isAlive&&(this.negativeScrollAdjustment=this.isNegativeScroll?this.element.scrollWidth-this.element.clientWidth:0,n(this.scrollbarXRail,{display:"block"}),n(this.scrollbarYRail,{display:"block"}),this.railXMarginWidth=p(i(this.scrollbarXRail).marginLeft)+p(i(this.scrollbarXRail).marginRight),this.railYMarginHeight=p(i(this.scrollbarYRail).marginTop)+p(i(this.scrollbarYRail).marginBottom),n(this.scrollbarXRail,{display:"none"}),n(this.scrollbarYRail,{display:"none"}),m(this),d(this,"top",0,!1,!0),d(this,"left",0,!1,!0),n(this.scrollbarXRail,{display:""}),n(this.scrollbarYRail,{display:""}))},T.prototype.onScroll=function(){this.isAlive&&(m(this),d(this,"top",this.element.scrollTop-this.lastScrollTop),d(this,"left",this.element.scrollLeft-this.lastScrollLeft),this.lastScrollTop=e(this.element.scrollTop),this.lastScrollLeft=this.element.scrollLeft)},T.prototype.destroy=function(){this.isAlive&&(this.event.unbindAll(),s(this.scrollbarX),s(this.scrollbarY),s(this.scrollbarXRail),s(this.scrollbarYRail),this.removePsClasses(),this.element=null,this.scrollbarX=null,this.scrollbarY=null,this.scrollbarXRail=null,this.scrollbarYRail=null,this.isAlive=!1)},T.prototype.removePsClasses=function(){this.element.className=this.element.className.split(" ").filter((function(t){return!t.match(/^ps([-_].+|)$/)})).join(" ")},T})),function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.Scrollbar=e():t.Scrollbar=e()}(this,(function(){return function(t){var e={};function i(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,i),o.l=!0,o.exports}return i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)i.d(n,o,function(e){return t[e]}.bind(null,o));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=58)}([function(t,e,i){var n=i(25)("wks"),o=i(16),r=i(2).Symbol,s="function"==typeof r;(t.exports=function(t){return n[t]||(n[t]=s&&r[t]||(s?r:o)("Symbol."+t))}).store=n},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e){var i=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=i)},function(t,e){var i=t.exports={version:"2.6.9"};"number"==typeof __e&&(__e=i)},function(t,e,i){t.exports=!i(13)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},function(t,e,i){var n=i(2),o=i(3),r=i(11),s=i(6),a=i(10),l=function(t,e,i){var c,h,u,d,p=t&l.F,f=t&l.G,m=t&l.S,g=t&l.P,y=t&l.B,v=f?n:m?n[e]||(n[e]={}):(n[e]||{}).prototype,b=f?o:o[e]||(o[e]={}),x=b.prototype||(b.prototype={});for(c in f&&(i=e),i)u=((h=!p&&v&&void 0!==v[c])?v:i)[c],d=y&&h?a(u,n):g&&"function"==typeof u?a(Function.call,u):u,v&&s(v,c,u,t&l.U),b[c]!=u&&r(b,c,d),g&&x[c]!=u&&(x[c]=u)};n.core=o,l.F=1,l.G=2,l.S=4,l.P=8,l.B=16,l.W=32,l.U=64,l.R=128,t.exports=l},function(t,e,i){var n=i(2),o=i(11),r=i(9),s=i(16)("src"),a=i(60),l=(""+a).split("toString");i(3).inspectSource=function(t){return a.call(t)},(t.exports=function(t,e,i,a){var c="function"==typeof i;c&&(r(i,"name")||o(i,"name",e)),t[e]!==i&&(c&&(r(i,s)||o(i,s,t[e]?""+t[e]:l.join(String(e)))),t===n?t[e]=i:a?t[e]?t[e]=i:o(t,e,i):(delete t[e],o(t,e,i)))})(Function.prototype,"toString",(function(){return"function"==typeof this&&this[s]||a.call(this)}))},function(t,e,i){var n=i(8),o=i(41),r=i(43),s=Object.defineProperty;e.f=i(4)?Object.defineProperty:function(t,e,i){if(n(t),e=r(e,!0),n(i),o)try{return s(t,e,i)}catch(t){}if("get"in i||"set"in i)throw TypeError("Accessors not supported!");return"value"in i&&(t[e]=i.value),t}},function(t,e,i){var n=i(1);t.exports=function(t){if(!n(t))throw TypeError(t+" is not an object!");return t}},function(t,e){var i={}.hasOwnProperty;t.exports=function(t,e){return i.call(t,e)}},function(t,e,i){var n=i(44);t.exports=function(t,e,i){if(n(t),void 0===e)return t;switch(i){case 1:return function(i){return t.call(e,i)};case 2:return function(i,n){return t.call(e,i,n)};case 3:return function(i,n,o){return t.call(e,i,n,o)}}return function(){return t.apply(e,arguments)}}},function(t,e,i){var n=i(7),o=i(17);t.exports=i(4)?function(t,e,i){return n.f(t,e,o(1,i))}:function(t,e,i){return t[e]=i,t}},function(t,e,i){var n=i(1);t.exports=function(t,e){if(!n(t)||t._t!==e)throw TypeError("Incompatible receiver, "+e+" required!");return t}},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e){t.exports={}},function(t,e,i){var n=i(10),o=i(49),r=i(50),s=i(8),a=i(19),l=i(51),c={},h={};(e=t.exports=function(t,e,i,u,d){var p,f,m,g,y=d?function(){return t}:l(t),v=n(i,u,e?2:1),b=0;if("function"!=typeof y)throw TypeError(t+" is not iterable!");if(r(y)){for(p=a(t.length);p>b;b++)if((g=e?v(s(f=t[b])[0],f[1]):v(t[b]))===c||g===h)return g}else for(m=y.call(t);!(f=m.next()).done;)if((g=o(m,v,f.value,e))===c||g===h)return g}).BREAK=c,e.RETURN=h},function(t,e){var i=0,n=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++i+n).toString(36))}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e,i){var n=i(31),o=i(28);t.exports=function(t){return n(o(t))}},function(t,e,i){var n=i(27),o=Math.min;t.exports=function(t){return t>0?o(n(t),9007199254740991):0}},function(t,e,i){var n=i(28);t.exports=function(t){return Object(n(t))}},function(t,e,i){var n=i(16)("meta"),o=i(1),r=i(9),s=i(7).f,a=0,l=Object.isExtensible||function(){return!0},c=!i(13)((function(){return l(Object.preventExtensions({}))})),h=function(t){s(t,n,{value:{i:"O"+ ++a,w:{}}})},u=t.exports={KEY:n,NEED:!1,fastKey:function(t,e){if(!o(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!r(t,n)){if(!l(t))return"F";if(!e)return"E";h(t)}return t[n].i},getWeak:function(t,e){if(!r(t,n)){if(!l(t))return!0;if(!e)return!1;h(t)}return t[n].w},onFreeze:function(t){return c&&u.NEED&&l(t)&&!r(t,n)&&h(t),t}}},function(t,e,i){"use strict";var n=i(23),o={};o[i(0)("toStringTag")]="z",o+""!="[object z]"&&i(6)(Object.prototype,"toString",(function(){return"[object "+n(this)+"]"}),!0)},function(t,e,i){var n=i(24),o=i(0)("toStringTag"),r="Arguments"==n(function(){return arguments}());t.exports=function(t){var e,i,s;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(i=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),o))?i:r?n(e):"Object"==(s=n(e))&&"function"==typeof e.callee?"Arguments":s}},function(t,e){var i={}.toString;t.exports=function(t){return i.call(t).slice(8,-1)}},function(t,e,i){var n=i(3),o=i(2),r=o["__core-js_shared__"]||(o["__core-js_shared__"]={});(t.exports=function(t,e){return r[t]||(r[t]=void 0!==e?e:{})})("versions",[]).push({version:n.version,mode:i(40)?"pure":"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})},function(t,e,i){"use strict";var n=i(61)(!0);i(29)(String,"String",(function(t){this._t=String(t),this._i=0}),(function(){var t,e=this._t,i=this._i;return i>=e.length?{value:void 0,done:!0}:(t=n(e,i),this._i+=t.length,{value:t,done:!1})}))},function(t,e){var i=Math.ceil,n=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?n:i)(t)}},function(t,e){t.exports=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e,i){"use strict";var n=i(40),o=i(5),r=i(6),s=i(11),a=i(14),l=i(62),c=i(33),h=i(68),u=i(0)("iterator"),d=!([].keys&&"next"in[].keys()),p=function(){return this};t.exports=function(t,e,i,f,m,g,y){l(i,e,f);var v,b,x,$=function(t){if(!d&&t in S)return S[t];switch(t){case"keys":case"values":return function(){return new i(this,t)}}return function(){return new i(this,t)}},w=e+" Iterator",_="values"==m,k=!1,S=t.prototype,C=S[u]||S["@@iterator"]||m&&S[m],T=C||$(m),M=m?_?$("entries"):T:void 0,P="Array"==e&&S.entries||C;if(P&&(x=h(P.call(new t)))!==Object.prototype&&x.next&&(c(x,w,!0),n||"function"==typeof x[u]||s(x,u,p)),_&&C&&"values"!==C.name&&(k=!0,T=function(){return C.call(this)}),n&&!y||!d&&!k&&S[u]||s(S,u,T),a[e]=T,a[w]=p,m)if(v={values:_?T:$("values"),keys:g?T:$("keys"),entries:M},y)for(b in v)b in S||r(S,b,v[b]);else o(o.P+o.F*(d||k),e,v);return v}},function(t,e,i){var n=i(64),o=i(46);t.exports=Object.keys||function(t){return n(t,o)}},function(t,e,i){var n=i(24);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==n(t)?t.split(""):Object(t)}},function(t,e,i){var n=i(25)("keys"),o=i(16);t.exports=function(t){return n[t]||(n[t]=o(t))}},function(t,e,i){var n=i(7).f,o=i(9),r=i(0)("toStringTag");t.exports=function(t,e,i){t&&!o(t=i?t:t.prototype,r)&&n(t,r,{configurable:!0,value:e})}},function(t,e,i){for(var n=i(69),o=i(30),r=i(6),s=i(2),a=i(11),l=i(14),c=i(0),h=c("iterator"),u=c("toStringTag"),d=l.Array,p={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},f=o(p),m=0;m<f.length;m++){var g,y=f[m],v=p[y],b=s[y],x=b&&b.prototype;if(x&&(x[h]||a(x,h,d),x[u]||a(x,u,y),l[y]=d,v))for(g in n)x[g]||r(x,g,n[g],!0)}},function(t,e,i){var n=i(6);t.exports=function(t,e,i){for(var o in e)n(t,o,e[o],i);return t}},function(t,e){t.exports=function(t,e,i,n){if(!(t instanceof e)||void 0!==n&&n in t)throw TypeError(i+": incorrect invocation!");return t}},function(t,e,i){"use strict";var n=i(2),o=i(5),r=i(6),s=i(35),a=i(21),l=i(15),c=i(36),h=i(1),u=i(13),d=i(52),p=i(33),f=i(73);t.exports=function(t,e,i,m,g,y){var v=n[t],b=v,x=g?"set":"add",$=b&&b.prototype,w={},_=function(t){var e=$[t];r($,t,"delete"==t||"has"==t?function(t){return!(y&&!h(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return y&&!h(t)?void 0:e.call(this,0===t?0:t)}:"add"==t?function(t){return e.call(this,0===t?0:t),this}:function(t,i){return e.call(this,0===t?0:t,i),this})};if("function"==typeof b&&(y||$.forEach&&!u((function(){(new b).entries().next()})))){var k=new b,S=k[x](y?{}:-0,1)!=k,C=u((function(){k.has(1)})),T=d((function(t){new b(t)})),M=!y&&u((function(){for(var t=new b,e=5;e--;)t[x](e,e);return!t.has(-0)}));T||((b=e((function(e,i){c(e,b,t);var n=f(new v,e,b);return null!=i&&l(i,g,n[x],n),n}))).prototype=$,$.constructor=b),(C||M)&&(_("delete"),_("has"),g&&_("get")),(M||S)&&_(x),y&&$.clear&&delete $.clear}else b=m.getConstructor(e,t,g,x),s(b.prototype,i),a.NEED=!0;return p(b,t),w[t]=b,o(o.G+o.W+o.F*(b!=v),w),y||m.setStrong(b,t,g),b}},function(t,e,i){"use strict";var n=i(5);t.exports=function(t){n(n.S,t,{of:function(){for(var t=arguments.length,e=new Array(t);t--;)e[t]=arguments[t];return new this(e)}})}},function(t,e,i){"use strict";var n=i(5),o=i(44),r=i(10),s=i(15);t.exports=function(t){n(n.S,t,{from:function(t){var e,i,n,a,l=arguments[1];return o(this),(e=void 0!==l)&&o(l),null==t?new this:(i=[],e?(n=0,a=r(l,arguments[2],2),s(t,!1,(function(t){i.push(a(t,n++))}))):s(t,!1,i.push,i),new this(i))}})}},function(t,e){t.exports=!1},function(t,e,i){t.exports=!i(4)&&!i(13)((function(){return 7!=Object.defineProperty(i(42)("div"),"a",{get:function(){return 7}}).a}))},function(t,e,i){var n=i(1),o=i(2).document,r=n(o)&&n(o.createElement);t.exports=function(t){return r?o.createElement(t):{}}},function(t,e,i){var n=i(1);t.exports=function(t,e){if(!n(t))return t;var i,o;if(e&&"function"==typeof(i=t.toString)&&!n(o=i.call(t)))return o;if("function"==typeof(i=t.valueOf)&&!n(o=i.call(t)))return o;if(!e&&"function"==typeof(i=t.toString)&&!n(o=i.call(t)))return o;throw TypeError("Can't convert object to primitive value")}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e,i){var n=i(8),o=i(63),r=i(46),s=i(32)("IE_PROTO"),a=function(){},l=function(){var t,e=i(42)("iframe"),n=r.length;for(e.style.display="none",i(67).appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),l=t.F;n--;)delete l.prototype[r[n]];return l()};t.exports=Object.create||function(t,e){var i;return null!==t?(a.prototype=n(t),i=new a,a.prototype=null,i[s]=t):i=l(),void 0===e?i:o(i,e)}},function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e,i){"use strict";var n=i(7).f,o=i(45),r=i(35),s=i(10),a=i(36),l=i(15),c=i(29),h=i(47),u=i(72),d=i(4),p=i(21).fastKey,f=i(12),m=d?"_s":"size",g=function(t,e){var i,n=p(e);if("F"!==n)return t._i[n];for(i=t._f;i;i=i.n)if(i.k==e)return i};t.exports={getConstructor:function(t,e,i,c){var h=t((function(t,n){a(t,h,e,"_i"),t._t=e,t._i=o(null),t._f=void 0,t._l=void 0,t[m]=0,null!=n&&l(n,i,t[c],t)}));return r(h.prototype,{clear:function(){for(var t=f(this,e),i=t._i,n=t._f;n;n=n.n)n.r=!0,n.p&&(n.p=n.p.n=void 0),delete i[n.i];t._f=t._l=void 0,t[m]=0},delete:function(t){var i=f(this,e),n=g(i,t);if(n){var o=n.n,r=n.p;delete i._i[n.i],n.r=!0,r&&(r.n=o),o&&(o.p=r),i._f==n&&(i._f=o),i._l==n&&(i._l=r),i[m]--}return!!n},forEach:function(t){f(this,e);for(var i,n=s(t,arguments.length>1?arguments[1]:void 0,3);i=i?i.n:this._f;)for(n(i.v,i.k,this);i&&i.r;)i=i.p},has:function(t){return!!g(f(this,e),t)}}),d&&n(h.prototype,"size",{get:function(){return f(this,e)[m]}}),h},def:function(t,e,i){var n,o,r=g(t,e);return r?r.v=i:(t._l=r={i:o=p(e,!0),k:e,v:i,p:n=t._l,n:void 0,r:!1},t._f||(t._f=r),n&&(n.n=r),t[m]++,"F"!==o&&(t._i[o]=r)),t},getEntry:g,setStrong:function(t,e,i){c(t,e,(function(t,i){this._t=f(t,e),this._k=i,this._l=void 0}),(function(){for(var t=this._k,e=this._l;e&&e.r;)e=e.p;return this._t&&(this._l=e=e?e.n:this._t._f)?h(0,"keys"==t?e.k:"values"==t?e.v:[e.k,e.v]):(this._t=void 0,h(1))}),i?"entries":"values",!i,!0),u(e)}}},function(t,e,i){var n=i(8);t.exports=function(t,e,i,o){try{return o?e(n(i)[0],i[1]):e(i)}catch(e){var r=t.return;throw void 0!==r&&n(r.call(t)),e}}},function(t,e,i){var n=i(14),o=i(0)("iterator"),r=Array.prototype;t.exports=function(t){return void 0!==t&&(n.Array===t||r[o]===t)}},function(t,e,i){var n=i(23),o=i(0)("iterator"),r=i(14);t.exports=i(3).getIteratorMethod=function(t){if(null!=t)return t[o]||t["@@iterator"]||r[n(t)]}},function(t,e,i){var n=i(0)("iterator"),o=!1;try{var r=[7][n]();r.return=function(){o=!0},Array.from(r,(function(){throw 2}))}catch(t){}t.exports=function(t,e){if(!e&&!o)return!1;var i=!1;try{var r=[7],s=r[n]();s.next=function(){return{done:i=!0}},r[n]=function(){return s},t(r)}catch(t){}return i}},function(t,e){e.f={}.propertyIsEnumerable},function(t,e,i){var n=i(23),o=i(77);t.exports=function(t){return function(){if(n(this)!=t)throw TypeError(t+"#toJSON isn't generic");return o(this)}}},function(t,e,i){var n=i(10),o=i(31),r=i(20),s=i(19),a=i(87);t.exports=function(t,e){var i=1==t,l=2==t,c=3==t,h=4==t,u=6==t,d=5==t||u,p=e||a;return function(e,a,f){for(var m,g,y=r(e),v=o(y),b=n(a,f,3),x=s(v.length),$=0,w=i?p(e,x):l?p(e,0):void 0;x>$;$++)if((d||$ in v)&&(g=b(m=v[$],$,y),t))if(i)w[$]=g;else if(g)switch(t){case 3:return!0;case 5:return m;case 6:return $;case 2:w.push(m)}else if(h)return!1;return u?-1:c||h?h:w}}},function(t,e,i){"use strict";var n=i(4),o=i(30),r=i(90),s=i(53),a=i(20),l=i(31),c=Object.assign;t.exports=!c||i(13)((function(){var t={},e={},i=Symbol(),n="abcdefghijklmnopqrst";return t[i]=7,n.split("").forEach((function(t){e[t]=t})),7!=c({},t)[i]||Object.keys(c({},e)).join("")!=n}))?function(t,e){for(var i=a(t),c=arguments.length,h=1,u=r.f,d=s.f;c>h;)for(var p,f=l(arguments[h++]),m=u?o(f).concat(u(f)):o(f),g=m.length,y=0;g>y;)p=m[y++],n&&!d.call(f,p)||(i[p]=f[p]);return i}:c},function(t,e,i){"use strict";(function(t){var i="object"==typeof t&&t&&t.Object===Object&&t;e.a=i}).call(this,i(99))},function(t,e,i){t.exports=i(100)},function(t,e,i){i(22),i(26),i(34),i(71),i(76),i(78),i(79),t.exports=i(3).Map},function(t,e,i){t.exports=i(25)("native-function-to-string",Function.toString)},function(t,e,i){var n=i(27),o=i(28);t.exports=function(t){return function(e,i){var r,s,a=String(o(e)),l=n(i),c=a.length;return l<0||l>=c?t?"":void 0:(r=a.charCodeAt(l))<55296||r>56319||l+1===c||(s=a.charCodeAt(l+1))<56320||s>57343?t?a.charAt(l):r:t?a.slice(l,l+2):s-56320+(r-55296<<10)+65536}}},function(t,e,i){"use strict";var n=i(45),o=i(17),r=i(33),s={};i(11)(s,i(0)("iterator"),(function(){return this})),t.exports=function(t,e,i){t.prototype=n(s,{next:o(1,i)}),r(t,e+" Iterator")}},function(t,e,i){var n=i(7),o=i(8),r=i(30);t.exports=i(4)?Object.defineProperties:function(t,e){o(t);for(var i,s=r(e),a=s.length,l=0;a>l;)n.f(t,i=s[l++],e[i]);return t}},function(t,e,i){var n=i(9),o=i(18),r=i(65)(!1),s=i(32)("IE_PROTO");t.exports=function(t,e){var i,a=o(t),l=0,c=[];for(i in a)i!=s&&n(a,i)&&c.push(i);for(;e.length>l;)n(a,i=e[l++])&&(~r(c,i)||c.push(i));return c}},function(t,e,i){var n=i(18),o=i(19),r=i(66);t.exports=function(t){return function(e,i,s){var a,l=n(e),c=o(l.length),h=r(s,c);if(t&&i!=i){for(;c>h;)if((a=l[h++])!=a)return!0}else for(;c>h;h++)if((t||h in l)&&l[h]===i)return t||h||0;return!t&&-1}}},function(t,e,i){var n=i(27),o=Math.max,r=Math.min;t.exports=function(t,e){return(t=n(t))<0?o(t+e,0):r(t,e)}},function(t,e,i){var n=i(2).document;t.exports=n&&n.documentElement},function(t,e,i){var n=i(9),o=i(20),r=i(32)("IE_PROTO"),s=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=o(t),n(t,r)?t[r]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?s:null}},function(t,e,i){"use strict";var n=i(70),o=i(47),r=i(14),s=i(18);t.exports=i(29)(Array,"Array",(function(t,e){this._t=s(t),this._i=0,this._k=e}),(function(){var t=this._t,e=this._k,i=this._i++;return!t||i>=t.length?(this._t=void 0,o(1)):o(0,"keys"==e?i:"values"==e?t[i]:[i,t[i]])}),"values"),r.Arguments=r.Array,n("keys"),n("values"),n("entries")},function(t,e,i){var n=i(0)("unscopables"),o=Array.prototype;null==o[n]&&i(11)(o,n,{}),t.exports=function(t){o[n][t]=!0}},function(t,e,i){"use strict";var n=i(48),o=i(12);t.exports=i(37)("Map",(function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}}),{get:function(t){var e=n.getEntry(o(this,"Map"),t);return e&&e.v},set:function(t,e){return n.def(o(this,"Map"),0===t?0:t,e)}},n,!0)},function(t,e,i){"use strict";var n=i(2),o=i(7),r=i(4),s=i(0)("species");t.exports=function(t){var e=n[t];r&&e&&!e[s]&&o.f(e,s,{configurable:!0,get:function(){return this}})}},function(t,e,i){var n=i(1),o=i(74).set;t.exports=function(t,e,i){var r,s=e.constructor;return s!==i&&"function"==typeof s&&(r=s.prototype)!==i.prototype&&n(r)&&o&&o(t,r),t}},function(t,e,i){var n=i(1),o=i(8),r=function(t,e){if(o(t),!n(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,n){try{(n=i(10)(Function.call,i(75).f(Object.prototype,"__proto__").set,2))(t,[]),e=!(t instanceof Array)}catch(t){e=!0}return function(t,i){return r(t,i),e?t.__proto__=i:n(t,i),t}}({},!1):void 0),check:r}},function(t,e,i){var n=i(53),o=i(17),r=i(18),s=i(43),a=i(9),l=i(41),c=Object.getOwnPropertyDescriptor;e.f=i(4)?c:function(t,e){if(t=r(t),e=s(e,!0),l)try{return c(t,e)}catch(t){}if(a(t,e))return o(!n.f.call(t,e),t[e])}},function(t,e,i){var n=i(5);n(n.P+n.R,"Map",{toJSON:i(54)("Map")})},function(t,e,i){var n=i(15);t.exports=function(t,e){var i=[];return n(t,!1,i.push,i,e),i}},function(t,e,i){i(38)("Map")},function(t,e,i){i(39)("Map")},function(t,e,i){i(22),i(26),i(34),i(81),i(82),i(83),i(84),t.exports=i(3).Set},function(t,e,i){"use strict";var n=i(48),o=i(12);t.exports=i(37)("Set",(function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}}),{add:function(t){return n.def(o(this,"Set"),t=0===t?0:t,t)}},n)},function(t,e,i){var n=i(5);n(n.P+n.R,"Set",{toJSON:i(54)("Set")})},function(t,e,i){i(38)("Set")},function(t,e,i){i(39)("Set")},function(t,e,i){i(22),i(34),i(86),i(92),i(93),t.exports=i(3).WeakMap},function(t,e,i){"use strict";var n,o=i(2),r=i(55)(0),s=i(6),a=i(21),l=i(56),c=i(91),h=i(1),u=i(12),d=i(12),p=!o.ActiveXObject&&"ActiveXObject"in o,f=a.getWeak,m=Object.isExtensible,g=c.ufstore,y=function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},v={get:function(t){if(h(t)){var e=f(t);return!0===e?g(u(this,"WeakMap")).get(t):e?e[this._i]:void 0}},set:function(t,e){return c.def(u(this,"WeakMap"),t,e)}},b=t.exports=i(37)("WeakMap",y,v,c,!0,!0);d&&p&&(l((n=c.getConstructor(y,"WeakMap")).prototype,v),a.NEED=!0,r(["delete","has","get","set"],(function(t){var e=b.prototype,i=e[t];s(e,t,(function(e,o){if(h(e)&&!m(e)){this._f||(this._f=new n);var r=this._f[t](e,o);return"set"==t?this:r}return i.call(this,e,o)}))})))},function(t,e,i){var n=i(88);t.exports=function(t,e){return new(n(t))(e)}},function(t,e,i){var n=i(1),o=i(89),r=i(0)("species");t.exports=function(t){var e;return o(t)&&("function"!=typeof(e=t.constructor)||e!==Array&&!o(e.prototype)||(e=void 0),n(e)&&null===(e=e[r])&&(e=void 0)),void 0===e?Array:e}},function(t,e,i){var n=i(24);t.exports=Array.isArray||function(t){return"Array"==n(t)}},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e,i){"use strict";var n=i(35),o=i(21).getWeak,r=i(8),s=i(1),a=i(36),l=i(15),c=i(55),h=i(9),u=i(12),d=c(5),p=c(6),f=0,m=function(t){return t._l||(t._l=new g)},g=function(){this.a=[]},y=function(t,e){return d(t.a,(function(t){return t[0]===e}))};g.prototype={get:function(t){var e=y(this,t);if(e)return e[1]},has:function(t){return!!y(this,t)},set:function(t,e){var i=y(this,t);i?i[1]=e:this.a.push([t,e])},delete:function(t){var e=p(this.a,(function(e){return e[0]===t}));return~e&&this.a.splice(e,1),!!~e}},t.exports={getConstructor:function(t,e,i,r){var c=t((function(t,n){a(t,c,e,"_i"),t._t=e,t._i=f++,t._l=void 0,null!=n&&l(n,i,t[r],t)}));return n(c.prototype,{delete:function(t){if(!s(t))return!1;var i=o(t);return!0===i?m(u(this,e)).delete(t):i&&h(i,this._i)&&delete i[this._i]},has:function(t){if(!s(t))return!1;var i=o(t);return!0===i?m(u(this,e)).has(t):i&&h(i,this._i)}}),c},def:function(t,e,i){var n=o(r(e),!0);return!0===n?m(t).set(e,i):n[t._i]=i,t},ufstore:m}},function(t,e,i){i(38)("WeakMap")},function(t,e,i){i(39)("WeakMap")},function(t,e,i){i(26),i(95),t.exports=i(3).Array.from},function(t,e,i){"use strict";var n=i(10),o=i(5),r=i(20),s=i(49),a=i(50),l=i(19),c=i(96),h=i(51);o(o.S+o.F*!i(52)((function(t){Array.from(t)})),"Array",{from:function(t){var e,i,o,u,d=r(t),p="function"==typeof this?this:Array,f=arguments.length,m=f>1?arguments[1]:void 0,g=void 0!==m,y=0,v=h(d);if(g&&(m=n(m,f>2?arguments[2]:void 0,2)),null==v||p==Array&&a(v))for(i=new p(e=l(d.length));e>y;y++)c(i,y,g?m(d[y],y):d[y]);else for(u=v.call(d),i=new p;!(o=u.next()).done;y++)c(i,y,g?s(u,m,[o.value,y],!0):o.value);return i.length=y,i}})},function(t,e,i){"use strict";var n=i(7),o=i(17);t.exports=function(t,e,i){e in t?n.f(t,e,o(0,i)):t[e]=i}},function(t,e,i){i(98),t.exports=i(3).Object.assign},function(t,e,i){var n=i(5);n(n.S+n.F,"Object",{assign:i(56)})},function(t,e){var i;i=function(){return this}();try{i=i||new Function("return this")()}catch(t){"object"==typeof window&&(i=window)}t.exports=i},function(t,e,i){"use strict";i.r(e);var n={};i.r(n),i.d(n,"keyboardHandler",(function(){return et})),i.d(n,"mouseHandler",(function(){return it})),i.d(n,"resizeHandler",(function(){return nt})),i.d(n,"selectHandler",(function(){return ot})),i.d(n,"touchHandler",(function(){return rt})),i.d(n,"wheelHandler",(function(){return st}));
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},r=function(){return(r=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var o in e=arguments[i])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};function s(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s}i(59),i(80),i(85),i(94),i(97);var a=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)},l=i(57),c="object"==typeof self&&self&&self.Object===Object&&self,h=l.a||c||Function("return this")(),u=h.Symbol,d=Object.prototype,p=d.hasOwnProperty,f=d.toString,m=u?u.toStringTag:void 0,g=Object.prototype.toString,y=u?u.toStringTag:void 0,v=/^\s+|\s+$/g,b=/^[-+]0x[0-9a-f]+$/i,x=/^0b[01]+$/i,$=/^0o[0-7]+$/i,w=parseInt,_=function(t){if("number"==typeof t)return t;if(function(t){return"symbol"==typeof t||function(t){return null!=t&&"object"==typeof t}(t)&&"[object Symbol]"==function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":y&&y in Object(t)?function(t){var e=p.call(t,m),i=t[m];try{t[m]=void 0;var n=!0}catch(t){}var o=f.call(t);return n&&(e?t[m]=i:delete t[m]),o}(t):function(t){return g.call(t)}(t)}(t)}(t))return NaN;if(a(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=a(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(v,"");var i=x.test(t);return i||$.test(t)?w(t.slice(2),i?2:8):b.test(t)?NaN:+t},k=function(t,e,i){return void 0===i&&(i=e,e=void 0),void 0!==i&&(i=(i=_(i))==i?i:0),void 0!==e&&(e=(e=_(e))==e?e:0),function(t,e,i){return t==t&&(void 0!==i&&(t=t<=i?t:i),void 0!==e&&(t=t>=e?t:e)),t}(_(t),e,i)};function S(t,e){return void 0===t&&(t=-1/0),void 0===e&&(e=1/0),function(i,n){var o="_"+n;Object.defineProperty(i,n,{get:function(){return this[o]},set:function(i){Object.defineProperty(this,o,{value:k(i,t,e),enumerable:!1,writable:!0,configurable:!0})},enumerable:!0,configurable:!0})}}function C(t,e){var i="_"+e;Object.defineProperty(t,e,{get:function(){return this[i]},set:function(t){Object.defineProperty(this,i,{value:!!t,enumerable:!1,writable:!0,configurable:!0})},enumerable:!0,configurable:!0})}var T=function(){return h.Date.now()},M=Math.max,P=Math.min,E=function(t,e,i){var n,o,r,s,l,c,h=0,u=!1,d=!1,p=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function f(e){var i=n,r=o;return n=o=void 0,h=e,s=t.apply(r,i)}function m(t){var i=t-c;return void 0===c||i>=e||i<0||d&&t-h>=r}function g(){var t=T();if(m(t))return y(t);l=setTimeout(g,function(t){var i=e-(t-c);return d?P(i,r-(t-h)):i}(t))}function y(t){return l=void 0,p&&n?f(t):(n=o=void 0,s)}function v(){var t=T(),i=m(t);if(n=arguments,o=this,c=t,i){if(void 0===l)return function(t){return h=t,l=setTimeout(g,e),u?f(t):s}(c);if(d)return clearTimeout(l),l=setTimeout(g,e),f(c)}return void 0===l&&(l=setTimeout(g,e)),s}return e=_(e)||0,a(i)&&(u=!!i.leading,r=(d="maxWait"in i)?M(_(i.maxWait)||0,e):r,p="trailing"in i?!!i.trailing:p),v.cancel=function(){void 0!==l&&clearTimeout(l),h=0,n=c=o=l=void 0},v.flush=function(){return void 0===l?s:y(T())},v};function I(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(e,i,n){var o=n.value;return{get:function(){return this.hasOwnProperty(i)||Object.defineProperty(this,i,{value:E.apply(void 0,function(){for(var t=0,e=0,i=arguments.length;e<i;e++)t+=arguments[e].length;var n=Array(t),o=0;for(e=0;e<i;e++)for(var r=arguments[e],s=0,a=r.length;s<a;s++,o++)n[o]=r[s];return n}([o],t))}),this[i]}}}}var A,D=function(){function t(t){var e=this;void 0===t&&(t={}),this.damping=.1,this.thumbMinSize=20,this.renderByPixels=!0,this.alwaysShowTracks=!1,this.continuousScrolling=!0,this.delegateTo=null,this.plugins={},Object.keys(t).forEach((function(i){e[i]=t[i]}))}return Object.defineProperty(t.prototype,"wheelEventTarget",{get:function(){return this.delegateTo},set:function(t){console.warn("[smooth-scrollbar]: `options.wheelEventTarget` is deprecated and will be removed in the future, use `options.delegateTo` instead."),this.delegateTo=t},enumerable:!0,configurable:!0}),s([S(0,1)],t.prototype,"damping",void 0),s([S(0,1/0)],t.prototype,"thumbMinSize",void 0),s([C],t.prototype,"renderByPixels",void 0),s([C],t.prototype,"alwaysShowTracks",void 0),s([C],t.prototype,"continuousScrolling",void 0),t}(),R=new WeakMap;function L(){if(void 0!==A)return A;var t=!1;try{var e=function(){},i=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("testPassive",e,i),window.removeEventListener("testPassive",e,i)}catch(t){}return A=!!t&&{passive:!1}}function O(t){var e=R.get(t)||[];return R.set(t,e),function(t,i,n){function o(t){t.defaultPrevented||n(t)}i.split(/\s+/g).forEach((function(i){e.push({elem:t,eventName:i,handler:o}),t.addEventListener(i,o,L())}))}}function z(t){var e=function(t){return t.touches?t.touches[t.touches.length-1]:t}(t);return{x:e.clientX,y:e.clientY}}function F(t,e){return void 0===e&&(e=[]),e.some((function(e){return t===e}))}var B=["webkit","moz","ms","o"],N=new RegExp("^-(?!(?:"+B.join("|")+")-)");function H(t,e){e=function(t){var e={};return Object.keys(t).forEach((function(i){if(N.test(i)){var n=t[i];i=i.replace(/^-/,""),e[i]=n,B.forEach((function(t){e["-"+t+"-"+i]=n}))}else e[i]=t[i]})),e}(e),Object.keys(e).forEach((function(i){var n=i.replace(/^-/,"").replace(/-([a-z])/g,(function(t,e){return e.toUpperCase()}));t.style[n]=e[i]}))}var W,j=function(){function t(t){this.updateTime=Date.now(),this.delta={x:0,y:0},this.velocity={x:0,y:0},this.lastPosition={x:0,y:0},this.lastPosition=z(t)}return t.prototype.update=function(t){var e=this.velocity,i=this.updateTime,n=this.lastPosition,o=Date.now(),r=z(t),s={x:-(r.x-n.x),y:-(r.y-n.y)},a=o-i||16,l=s.x/a*16,c=s.y/a*16;e.x=.9*l+.1*e.x,e.y=.9*c+.1*e.y,this.delta=s,this.updateTime=o,this.lastPosition=r},t}(),Y=function(){function t(){this._touchList={}}return Object.defineProperty(t.prototype,"_primitiveValue",{get:function(){return{x:0,y:0}},enumerable:!0,configurable:!0}),t.prototype.isActive=function(){return void 0!==this._activeTouchID},t.prototype.getDelta=function(){var t=this._getActiveTracker();return t?r({},t.delta):this._primitiveValue},t.prototype.getVelocity=function(){var t=this._getActiveTracker();return t?r({},t.velocity):this._primitiveValue},t.prototype.track=function(t){var e=this,i=t.targetTouches;return Array.from(i).forEach((function(t){e._add(t)})),this._touchList},t.prototype.update=function(t){var e=this,i=t.touches,n=t.changedTouches;return Array.from(i).forEach((function(t){e._renew(t)})),this._setActiveID(n),this._touchList},t.prototype.release=function(t){var e=this;delete this._activeTouchID,Array.from(t.changedTouches).forEach((function(t){e._delete(t)}))},t.prototype._add=function(t){if(!this._has(t)){var e=new j(t);this._touchList[t.identifier]=e}},t.prototype._renew=function(t){this._has(t)&&this._touchList[t.identifier].update(t)},t.prototype._delete=function(t){delete this._touchList[t.identifier]},t.prototype._has=function(t){return this._touchList.hasOwnProperty(t.identifier)},t.prototype._setActiveID=function(t){this._activeTouchID=t[t.length-1].identifier},t.prototype._getActiveTracker=function(){return this._touchList[this._activeTouchID]},t}();!function(t){t.X="x",t.Y="y"}(W||(W={}));var V=function(){function t(t,e){void 0===e&&(e=0),this._direction=t,this._minSize=e,this.element=document.createElement("div"),this.displaySize=0,this.realSize=0,this.offset=0,this.element.className="scrollbar-thumb scrollbar-thumb-"+t}return t.prototype.attachTo=function(t){t.appendChild(this.element)},t.prototype.update=function(t,e,i){this.realSize=Math.min(e/i,1)*e,this.displaySize=Math.max(this.realSize,this._minSize),this.offset=t/i*(e+(this.realSize-this.displaySize)),H(this.element,this._getStyle())},t.prototype._getStyle=function(){switch(this._direction){case W.X:return{width:this.displaySize+"px","-transform":"translate3d("+this.offset+"px, 0, 0)"};case W.Y:return{height:this.displaySize+"px","-transform":"translate3d(0, "+this.offset+"px, 0)"};default:return null}},t}(),U=function(){function t(t,e){void 0===e&&(e=0),this.element=document.createElement("div"),this._isShown=!1,this.element.className="scrollbar-track scrollbar-track-"+t,this.thumb=new V(t,e),this.thumb.attachTo(this.element)}return t.prototype.attachTo=function(t){t.appendChild(this.element)},t.prototype.show=function(){this._isShown||(this._isShown=!0,this.element.classList.add("show"))},t.prototype.hide=function(){this._isShown&&(this._isShown=!1,this.element.classList.remove("show"))},t.prototype.update=function(t,e,i){H(this.element,{display:i<=e?"none":"block"}),this.thumb.update(t,e,i)},t}(),q=function(){function t(t){this._scrollbar=t;var e=t.options.thumbMinSize;this.xAxis=new U(W.X,e),this.yAxis=new U(W.Y,e),this.xAxis.attachTo(t.containerEl),this.yAxis.attachTo(t.containerEl),t.options.alwaysShowTracks&&(this.xAxis.show(),this.yAxis.show())}return t.prototype.update=function(){var t=this._scrollbar,e=t.size,i=t.offset;this.xAxis.update(i.x,e.container.width,e.content.width),this.yAxis.update(i.y,e.container.height,e.content.height)},t.prototype.autoHideOnIdle=function(){this._scrollbar.options.alwaysShowTracks||(this.xAxis.hide(),this.yAxis.hide())},s([I(300)],t.prototype,"autoHideOnIdle",null),t}(),X=new WeakMap;function G(t){return Math.pow(t-1,3)+1}var Z,K,Q,J=function(){function t(t,e){var i=this.constructor;this.scrollbar=t,this.name=i.pluginName,this.options=r(r({},i.defaultOptions),e)}return t.prototype.onInit=function(){},t.prototype.onDestroy=function(){},t.prototype.onUpdate=function(){},t.prototype.onRender=function(t){},t.prototype.transformDelta=function(t,e){return r({},t)},t.pluginName="",t.defaultOptions={},t}(),tt={order:new Set,constructors:{}};function et(t){var e=O(t),i=t.containerEl;e(i,"keydown",(function(e){var n=document.activeElement;if((n===i||i.contains(n))&&!function(t){return!("INPUT"!==t.tagName&&"SELECT"!==t.tagName&&"TEXTAREA"!==t.tagName&&!t.isContentEditable||t.disabled)}(n)){var o=function(t,e){var i=t.size,n=t.limit,o=t.offset;switch(e){case Z.TAB:return function(t){requestAnimationFrame((function(){t.scrollIntoView(document.activeElement,{offsetTop:t.size.container.height/2,onlyScrollIfNeeded:!0})}))}(t);case Z.SPACE:return[0,200];case Z.PAGE_UP:return[0,40-i.container.height];case Z.PAGE_DOWN:return[0,i.container.height-40];case Z.END:return[0,n.y-o.y];case Z.HOME:return[0,-o.y];case Z.LEFT:return[-40,0];case Z.UP:return[0,-40];case Z.RIGHT:return[40,0];case Z.DOWN:return[0,40];default:return null}}(t,e.keyCode||e.which);if(o){var r=o[0],s=o[1];t.addTransformableMomentum(r,s,e,(function(i){i?e.preventDefault():(t.containerEl.blur(),t.parent&&t.parent.containerEl.focus())}))}}}))}function it(t){var e,i,n,o,r,s=O(t),a=t.containerEl,l=t.track,c=l.xAxis,h=l.yAxis;function u(e,i){var n=t.size;return e===K.X?i/(n.container.width+(c.thumb.realSize-c.thumb.displaySize))*n.content.width:e===K.Y?i/(n.container.height+(h.thumb.realSize-h.thumb.displaySize))*n.content.height:0}function d(t){return F(t,[c.element,c.thumb.element])?K.X:F(t,[h.element,h.thumb.element])?K.Y:void 0}s(a,"click",(function(e){if(!i&&F(e.target,[c.element,h.element])){var n=e.target,o=d(n),r=n.getBoundingClientRect(),s=z(e),a=t.offset,l=t.limit;if(o===K.X){var p=s.x-r.left-c.thumb.displaySize/2;t.setMomentum(k(u(o,p)-a.x,-a.x,l.x-a.x),0)}o===K.Y&&(p=s.y-r.top-h.thumb.displaySize/2,t.setMomentum(0,k(u(o,p)-a.y,-a.y,l.y-a.y)))}})),s(a,"mousedown",(function(i){if(F(i.target,[c.thumb.element,h.thumb.element])){e=!0;var s=i.target,l=z(i),u=s.getBoundingClientRect();o=d(s),n={x:l.x-u.left,y:l.y-u.top},r=a.getBoundingClientRect(),H(t.containerEl,{"-user-select":"none"})}})),s(window,"mousemove",(function(s){if(e){i=!0;var a=t.offset,l=z(s);if(o===K.X){var c=l.x-n.x-r.left;t.setPosition(u(o,c),a.y)}o===K.Y&&(c=l.y-n.y-r.top,t.setPosition(a.x,u(o,c)))}})),s(window,"mouseup blur",(function(){e=i=!1,H(t.containerEl,{"-user-select":""})}))}function nt(t){O(t)(window,"resize",E(t.update.bind(t),300))}function ot(t){var e,i=O(t),n=t.containerEl,o=t.contentEl,r=t.offset,s=t.limit,a=!1;i(window,"mousemove",(function(i){a&&(cancelAnimationFrame(e),function i(n){var o=n.x,a=n.y;(o||a)&&(t.setMomentum(k(r.x+o,0,s.x)-r.x,k(r.y+a,0,s.y)-r.y),e=requestAnimationFrame((function(){i({x:o,y:a})})))}(function(t,e){var i=t.bounding,n=i.top,o=i.right,r=i.bottom,s=i.left,a=z(e),l=a.x,c=a.y,h={x:0,y:0};return 0===l&&0===c||(l>o-20?h.x=l-o+20:l<s+20&&(h.x=l-s-20),c>r-20?h.y=c-r+20:c<n+20&&(h.y=c-n-20),h.x*=2,h.y*=2),h}(t,i)))})),i(o,"selectstart",(function(t){t.stopPropagation(),cancelAnimationFrame(e),a=!0})),i(window,"mouseup blur",(function(){cancelAnimationFrame(e),a=!1})),i(n,"scroll",(function(t){t.preventDefault(),n.scrollTop=n.scrollLeft=0}))}function rt(t){var e,i=/Android/.test(navigator.userAgent)?3:2,n=t.options.delegateTo||t.containerEl,o=new Y,r=O(t),s=0;r(n,"touchstart",(function(i){o.track(i),t.setMomentum(0,0),0===s&&(e=t.options.damping,t.options.damping=Math.max(e,.5)),s++})),r(n,"touchmove",(function(e){if(!Q||Q===t){o.update(e);var i=o.getDelta(),n=i.x,r=i.y;t.addTransformableMomentum(n,r,e,(function(i){i&&e.cancelable&&(e.preventDefault(),Q=t)}))}})),r(n,"touchcancel touchend",(function(n){var r=o.getVelocity(),a={x:0,y:0};Object.keys(r).forEach((function(t){var n=r[t]/e;a[t]=Math.abs(n)<50?0:n*i})),t.addTransformableMomentum(a.x,a.y,n),0==--s&&(t.options.damping=e),o.release(n),Q=null}))}function st(t){O(t)(t.options.delegateTo||t.containerEl,"onwheel"in window||document.implementation.hasFeature("Events.wheel","3.0")?"wheel":"mousewheel",(function(e){var i=function(t){if("deltaX"in t){var e=ct(t.deltaMode);return{x:t.deltaX/at.STANDARD*e,y:t.deltaY/at.STANDARD*e}}return"wheelDeltaX"in t?{x:t.wheelDeltaX/at.OTHERS,y:t.wheelDeltaY/at.OTHERS}:{x:0,y:t.wheelDelta/at.OTHERS}}(e),n=i.x,o=i.y;t.addTransformableMomentum(n,o,e,(function(t){t&&e.preventDefault()}))}))}!function(t){t[t.TAB=9]="TAB",t[t.SPACE=32]="SPACE",t[t.PAGE_UP=33]="PAGE_UP",t[t.PAGE_DOWN=34]="PAGE_DOWN",t[t.END=35]="END",t[t.HOME=36]="HOME",t[t.LEFT=37]="LEFT",t[t.UP=38]="UP",t[t.RIGHT=39]="RIGHT",t[t.DOWN=40]="DOWN"}(Z||(Z={})),function(t){t[t.X=0]="X",t[t.Y=1]="Y"}(K||(K={}));var at={STANDARD:1,OTHERS:-3},lt=[1,28,500],ct=function(t){return lt[t]||lt[0]},ht=new Map,ut=function(){function t(t,e){var i=this;this.offset={x:0,y:0},this.limit={x:1/0,y:1/0},this.bounding={top:0,right:0,bottom:0,left:0},this._plugins=[],this._momentum={x:0,y:0},this._listeners=new Set,this.containerEl=t;var n=this.contentEl=document.createElement("div");this.options=new D(e),t.setAttribute("data-scrollbar","true"),t.setAttribute("tabindex","-1"),H(t,{overflow:"hidden",outline:"none"}),window.navigator.msPointerEnabled&&(t.style.msTouchAction="none"),n.className="scroll-content",Array.from(t.childNodes).forEach((function(t){n.appendChild(t)})),t.appendChild(n),this.track=new q(this),this.size=this.getSize(),this._plugins=function(t,e){return Array.from(tt.order).filter((function(t){return!1!==e[t]})).map((function(i){var n=new(0,tt.constructors[i])(t,e[i]);return e[i]=n.options,n}))}(this,this.options.plugins);var o=t.scrollLeft,r=t.scrollTop;t.scrollLeft=t.scrollTop=0,this.setPosition(o,r,{withoutCallbacks:!0});var s=window,a=s.MutationObserver||s.WebKitMutationObserver||s.MozMutationObserver;"function"==typeof a&&(this._observer=new a((function(){i.update()})),this._observer.observe(n,{subtree:!0,childList:!0})),ht.set(t,this),requestAnimationFrame((function(){i._init()}))}return Object.defineProperty(t.prototype,"parent",{get:function(){for(var t=this.containerEl.parentElement;t;){var e=ht.get(t);if(e)return e;t=t.parentElement}return null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scrollTop",{get:function(){return this.offset.y},set:function(t){this.setPosition(this.scrollLeft,t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scrollLeft",{get:function(){return this.offset.x},set:function(t){this.setPosition(t,this.scrollTop)},enumerable:!0,configurable:!0}),t.prototype.getSize=function(){return function(t){var e=t.containerEl,i=t.contentEl;return{container:{width:e.clientWidth,height:e.clientHeight},content:{width:i.offsetWidth-i.clientWidth+i.scrollWidth,height:i.offsetHeight-i.clientHeight+i.scrollHeight}}}(this)},t.prototype.update=function(){!function(t){var e=t.getSize(),i={x:Math.max(e.content.width-e.container.width,0),y:Math.max(e.content.height-e.container.height,0)},n=t.containerEl.getBoundingClientRect(),o={top:Math.max(n.top,0),right:Math.min(n.right,window.innerWidth),bottom:Math.min(n.bottom,window.innerHeight),left:Math.max(n.left,0)};t.size=e,t.limit=i,t.bounding=o,t.track.update(),t.setPosition()}(this),this._plugins.forEach((function(t){t.onUpdate()}))},t.prototype.isVisible=function(t){return function(t,e){var i=t.bounding,n=e.getBoundingClientRect(),o=Math.max(i.top,n.top),r=Math.max(i.left,n.left),s=Math.min(i.right,n.right);return o<Math.min(i.bottom,n.bottom)&&r<s}(this,t)},t.prototype.setPosition=function(t,e,i){var n=this;void 0===t&&(t=this.offset.x),void 0===e&&(e=this.offset.y),void 0===i&&(i={});var o=function(t,e,i){var n=t.options,o=t.offset,s=t.limit,a=t.track,l=t.contentEl;return n.renderByPixels&&(e=Math.round(e),i=Math.round(i)),e=k(e,0,s.x),i=k(i,0,s.y),e!==o.x&&a.xAxis.show(),i!==o.y&&a.yAxis.show(),n.alwaysShowTracks||a.autoHideOnIdle(),e===o.x&&i===o.y?null:(o.x=e,o.y=i,H(l,{"-transform":"translate3d("+-e+"px, "+-i+"px, 0)"}),a.update(),{offset:r({},o),limit:r({},s)})}(this,t,e);o&&!i.withoutCallbacks&&this._listeners.forEach((function(t){t.call(n,o)}))},t.prototype.scrollTo=function(t,e,i,n){void 0===t&&(t=this.offset.x),void 0===e&&(e=this.offset.y),void 0===i&&(i=0),void 0===n&&(n={}),function(t,e,i,n,o){void 0===n&&(n=0);var r=void 0===o?{}:o,s=r.easing,a=void 0===s?G:s,l=r.callback,c=t.options,h=t.offset,u=t.limit;c.renderByPixels&&(e=Math.round(e),i=Math.round(i));var d=h.x,p=h.y,f=k(e,0,u.x)-d,m=k(i,0,u.y)-p,g=Date.now();cancelAnimationFrame(X.get(t)),function e(){var i=Date.now()-g,o=n?a(Math.min(i/n,1)):1;if(t.setPosition(d+f*o,p+m*o),i>=n)"function"==typeof l&&l.call(t);else{var r=requestAnimationFrame(e);X.set(t,r)}}()}(this,t,e,i,n)},t.prototype.scrollIntoView=function(t,e){void 0===e&&(e={}),function(t,e,i){var n=void 0===i?{}:i,o=n.alignToTop,r=void 0===o||o,s=n.onlyScrollIfNeeded,a=void 0!==s&&s,l=n.offsetTop,c=void 0===l?0:l,h=n.offsetLeft,u=void 0===h?0:h,d=n.offsetBottom,p=void 0===d?0:d,f=t.containerEl,m=t.bounding,g=t.offset,y=t.limit;if(e&&f.contains(e)){var v=e.getBoundingClientRect();if(!a||!t.isVisible(e)){var b=r?v.top-m.top-c:v.bottom-m.bottom+p;t.setMomentum(v.left-m.left-u,k(b,-g.y,y.y-g.y))}}}(this,t,e)},t.prototype.addListener=function(t){if("function"!=typeof t)throw new TypeError("[smooth-scrollbar] scrolling listener should be a function");this._listeners.add(t)},t.prototype.removeListener=function(t){this._listeners.delete(t)},t.prototype.addTransformableMomentum=function(t,e,i,n){this._updateDebounced();var o=this._plugins.reduce((function(t,e){return e.transformDelta(t,i)||t}),{x:t,y:e}),r=!this._shouldPropagateMomentum(o.x,o.y);r&&this.addMomentum(o.x,o.y),n&&n.call(this,r)},t.prototype.addMomentum=function(t,e){this.setMomentum(this._momentum.x+t,this._momentum.y+e)},t.prototype.setMomentum=function(t,e){0===this.limit.x&&(t=0),0===this.limit.y&&(e=0),this.options.renderByPixels&&(t=Math.round(t),e=Math.round(e)),this._momentum.x=t,this._momentum.y=e},t.prototype.updatePluginOptions=function(t,e){this._plugins.forEach((function(i){i.name===t&&Object.assign(i.options,e)}))},t.prototype.destroy=function(){var t=this.containerEl,e=this.contentEl;!function(t){var e=R.get(t);e&&(e.forEach((function(t){var e=t.elem,i=t.eventName,n=t.handler;e.removeEventListener(i,n,L())})),R.delete(t))}(this),this._listeners.clear(),this.setMomentum(0,0),cancelAnimationFrame(this._renderID),this._observer&&this._observer.disconnect(),ht.delete(this.containerEl);for(var i=Array.from(e.childNodes);t.firstChild;)t.removeChild(t.firstChild);i.forEach((function(e){t.appendChild(e)})),H(t,{overflow:""}),t.scrollTop=this.scrollTop,t.scrollLeft=this.scrollLeft,this._plugins.forEach((function(t){t.onDestroy()})),this._plugins.length=0},t.prototype._init=function(){var t=this;this.update(),Object.keys(n).forEach((function(e){n[e](t)})),this._plugins.forEach((function(t){t.onInit()})),this._render()},t.prototype._updateDebounced=function(){this.update()},t.prototype._shouldPropagateMomentum=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0);var i=this.options,n=this.offset,o=this.limit;if(!i.continuousScrolling)return!1;0===o.x&&0===o.y&&this._updateDebounced();var r=k(t+n.x,0,o.x),s=k(e+n.y,0,o.y),a=!0;return(a=(a=a&&r===n.x)&&s===n.y)&&(n.x===o.x||0===n.x||n.y===o.y||0===n.y)},t.prototype._render=function(){var t=this._momentum;if(t.x||t.y){var e=this._nextTick("x"),i=this._nextTick("y");t.x=e.momentum,t.y=i.momentum,this.setPosition(e.position,i.position)}var n=r({},this._momentum);this._plugins.forEach((function(t){t.onRender(n)})),this._renderID=requestAnimationFrame(this._render.bind(this))},t.prototype._nextTick=function(t){var e=this.options,i=this.offset,n=this._momentum,o=i[t],r=n[t];if(Math.abs(r)<=.1)return{momentum:0,position:o+r};var s=r*(1-e.damping);return e.renderByPixels&&(s|=0),{momentum:s,position:o+r-s}},s([I(100,{leading:!0})],t.prototype,"_updateDebounced",null),t}(),dt="smooth-scrollbar-style",pt=!1;function ft(){if(!pt&&"undefined"!=typeof window){var t=document.createElement("style");t.id=dt,t.textContent="\n[data-scrollbar] {\n  display: block;\n  position: relative;\n}\n\n.scroll-content {\n  -webkit-transform: translate3d(0, 0, 0);\n          transform: translate3d(0, 0, 0);\n}\n\n.scrollbar-track {\n  position: absolute;\n  opacity: 0;\n  z-index: 1;\n  background: rgba(222, 222, 222, .75);\n  -webkit-user-select: none;\n     -moz-user-select: none;\n      -ms-user-select: none;\n          user-select: none;\n  -webkit-transition: opacity 0.5s 0.5s ease-out;\n          transition: opacity 0.5s 0.5s ease-out;\n}\n.scrollbar-track.show,\n.scrollbar-track:hover {\n  opacity: 1;\n  -webkit-transition-delay: 0s;\n          transition-delay: 0s;\n}\n\n.scrollbar-track-x {\n  bottom: 0;\n  left: 0;\n  width: 100%;\n  height: 8px;\n}\n.scrollbar-track-y {\n  top: 0;\n  right: 0;\n  width: 8px;\n  height: 100%;\n}\n.scrollbar-thumb {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 8px;\n  height: 8px;\n  background: rgba(0, 0, 0, .5);\n  border-radius: 4px;\n}\n",document.head&&document.head.appendChild(t),pt=!0}}i.d(e,"ScrollbarPlugin",(function(){return J}));
/*!
 * cast `I.Scrollbar` to `Scrollbar` to avoid error
 *
 * `I.Scrollbar` is not assignable to `Scrollbar`:
 *     "privateProp" is missing in `I.Scrollbar`
 *
 * @see https://github.com/Microsoft/TypeScript/issues/2672
 */
var mt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}(e,t),e.init=function(t,e){if(!t||1!==t.nodeType)throw new TypeError("expect element to be DOM Element, but got "+t);return ft(),ht.has(t)?ht.get(t):new ut(t,e)},e.initAll=function(t){return Array.from(document.querySelectorAll("[data-scrollbar]"),(function(i){return e.init(i,t)}))},e.has=function(t){return ht.has(t)},e.get=function(t){return ht.get(t)},e.getAll=function(){return Array.from(ht.values())},e.destroy=function(t){var e=ht.get(t);e&&e.destroy()},e.destroyAll=function(){ht.forEach((function(t){t.destroy()}))},e.use=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];t.forEach((function(t){var e=t.pluginName;if(!e)throw new TypeError("plugin name is required");tt.order.add(e),tt.constructors[e]=t}))}.apply(void 0,t)},e.attachStyle=function(){return ft()},e.detachStyle=function(){return function(){if(pt&&"undefined"!=typeof window){var t=document.getElementById(dt);t&&t.parentNode&&(t.parentNode.removeChild(t),pt=!1)}}()},e.version="8.5.3",e.ScrollbarPlugin=J,e}(ut);e.default=mt}]).default}));
